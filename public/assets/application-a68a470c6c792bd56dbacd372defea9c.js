/*!
 * jQuery JavaScript Library v1.10.0
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-05-24T18:39Z
 */

(function( window, undefined ) {

// Can't do this because several apps including ASP.NET trace
// the stack via arguments.caller.callee and Firefox dies if
// you try to trace through "use strict" call chains. (#13335)
// Support: Firefox 18+
//"use strict";
var
	// The deferred used on DOM ready
	readyList,

	// A central reference to the root jQuery(document)
	rootjQuery,

	// Support: IE<10
	// For `typeof xmlNode.method` instead of `xmlNode.method !== undefined`
	core_strundefined = typeof undefined,

	// Use the correct document accordingly with window argument (sandbox)
	location = window.location,
	document = window.document,
	docElem = document.documentElement,

	// Map over jQuery in case of overwrite
	_jQuery = window.jQuery,

	// Map over the $ in case of overwrite
	_$ = window.$,

	// [[Class]] -> type pairs
	class2type = {},

	// List of deleted data cache ids, so we can reuse them
	core_deletedIds = [],

	core_version = "1.10.0",

	// Save a reference to some core methods
	core_concat = core_deletedIds.concat,
	core_push = core_deletedIds.push,
	core_slice = core_deletedIds.slice,
	core_indexOf = core_deletedIds.indexOf,
	core_toString = class2type.toString,
	core_hasOwn = class2type.hasOwnProperty,
	core_trim = core_version.trim,

	// Define a local copy of jQuery
	jQuery = function( selector, context ) {
		// The jQuery object is actually just the init constructor 'enhanced'
		return new jQuery.fn.init( selector, context, rootjQuery );
	},

	// Used for matching numbers
	core_pnum = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,

	// Used for splitting on whitespace
	core_rnotwhite = /\S+/g,

	// Make sure we trim BOM and NBSP (here's looking at you, Safari 5.0 and IE)
	rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,

	// A simple way to check for HTML strings
	// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)
	// Strict HTML recognition (#11290: must start with <)
	rquickExpr = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,

	// Match a standalone tag
	rsingleTag = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,

	// JSON RegExp
	rvalidchars = /^[\],:{}\s]*$/,
	rvalidbraces = /(?:^|:|,)(?:\s*\[)+/g,
	rvalidescape = /\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,
	rvalidtokens = /"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,

	// Matches dashed string for camelizing
	rmsPrefix = /^-ms-/,
	rdashAlpha = /-([\da-z])/gi,

	// Used by jQuery.camelCase as callback to replace()
	fcamelCase = function( all, letter ) {
		return letter.toUpperCase();
	},

	// The ready event handler
	completed = function( event ) {

		// readyState === "complete" is good enough for us to call the dom ready in oldIE
		if ( document.addEventListener || event.type === "load" || document.readyState === "complete" ) {
			detach();
			jQuery.ready();
		}
	},
	// Clean-up method for dom ready events
	detach = function() {
		if ( document.addEventListener ) {
			document.removeEventListener( "DOMContentLoaded", completed, false );
			window.removeEventListener( "load", completed, false );

		} else {
			document.detachEvent( "onreadystatechange", completed );
			window.detachEvent( "onload", completed );
		}
	};

jQuery.fn = jQuery.prototype = {
	// The current version of jQuery being used
	jquery: core_version,

	constructor: jQuery,
	init: function( selector, context, rootjQuery ) {
		var match, elem;

		// HANDLE: $(""), $(null), $(undefined), $(false)
		if ( !selector ) {
			return this;
		}

		// Handle HTML strings
		if ( typeof selector === "string" ) {
			if ( selector.charAt(0) === "<" && selector.charAt( selector.length - 1 ) === ">" && selector.length >= 3 ) {
				// Assume that strings that start and end with <> are HTML and skip the regex check
				match = [ null, selector, null ];

			} else {
				match = rquickExpr.exec( selector );
			}

			// Match html or make sure no context is specified for #id
			if ( match && (match[1] || !context) ) {

				// HANDLE: $(html) -> $(array)
				if ( match[1] ) {
					context = context instanceof jQuery ? context[0] : context;

					// scripts is true for back-compat
					jQuery.merge( this, jQuery.parseHTML(
						match[1],
						context && context.nodeType ? context.ownerDocument || context : document,
						true
					) );

					// HANDLE: $(html, props)
					if ( rsingleTag.test( match[1] ) && jQuery.isPlainObject( context ) ) {
						for ( match in context ) {
							// Properties of context are called as methods if possible
							if ( jQuery.isFunction( this[ match ] ) ) {
								this[ match ]( context[ match ] );

							// ...and otherwise set as attributes
							} else {
								this.attr( match, context[ match ] );
							}
						}
					}

					return this;

				// HANDLE: $(#id)
				} else {
					elem = document.getElementById( match[2] );

					// Check parentNode to catch when Blackberry 4.6 returns
					// nodes that are no longer in the document #6963
					if ( elem && elem.parentNode ) {
						// Handle the case where IE and Opera return items
						// by name instead of ID
						if ( elem.id !== match[2] ) {
							return rootjQuery.find( selector );
						}

						// Otherwise, we inject the element directly into the jQuery object
						this.length = 1;
						this[0] = elem;
					}

					this.context = document;
					this.selector = selector;
					return this;
				}

			// HANDLE: $(expr, $(...))
			} else if ( !context || context.jquery ) {
				return ( context || rootjQuery ).find( selector );

			// HANDLE: $(expr, context)
			// (which is just equivalent to: $(context).find(expr)
			} else {
				return this.constructor( context ).find( selector );
			}

		// HANDLE: $(DOMElement)
		} else if ( selector.nodeType ) {
			this.context = this[0] = selector;
			this.length = 1;
			return this;

		// HANDLE: $(function)
		// Shortcut for document ready
		} else if ( jQuery.isFunction( selector ) ) {
			return rootjQuery.ready( selector );
		}

		if ( selector.selector !== undefined ) {
			this.selector = selector.selector;
			this.context = selector.context;
		}

		return jQuery.makeArray( selector, this );
	},

	// Start with an empty selector
	selector: "",

	// The default length of a jQuery object is 0
	length: 0,

	toArray: function() {
		return core_slice.call( this );
	},

	// Get the Nth element in the matched element set OR
	// Get the whole matched element set as a clean array
	get: function( num ) {
		return num == null ?

			// Return a 'clean' array
			this.toArray() :

			// Return just the object
			( num < 0 ? this[ this.length + num ] : this[ num ] );
	},

	// Take an array of elements and push it onto the stack
	// (returning the new matched element set)
	pushStack: function( elems ) {

		// Build a new jQuery matched element set
		var ret = jQuery.merge( this.constructor(), elems );

		// Add the old object onto the stack (as a reference)
		ret.prevObject = this;
		ret.context = this.context;

		// Return the newly-formed element set
		return ret;
	},

	// Execute a callback for every element in the matched set.
	// (You can seed the arguments with an array of args, but this is
	// only used internally.)
	each: function( callback, args ) {
		return jQuery.each( this, callback, args );
	},

	ready: function( fn ) {
		// Add the callback
		jQuery.ready.promise().done( fn );

		return this;
	},

	slice: function() {
		return this.pushStack( core_slice.apply( this, arguments ) );
	},

	first: function() {
		return this.eq( 0 );
	},

	last: function() {
		return this.eq( -1 );
	},

	eq: function( i ) {
		var len = this.length,
			j = +i + ( i < 0 ? len : 0 );
		return this.pushStack( j >= 0 && j < len ? [ this[j] ] : [] );
	},

	map: function( callback ) {
		return this.pushStack( jQuery.map(this, function( elem, i ) {
			return callback.call( elem, i, elem );
		}));
	},

	end: function() {
		return this.prevObject || this.constructor(null);
	},

	// For internal use only.
	// Behaves like an Array's method, not like a jQuery method.
	push: core_push,
	sort: [].sort,
	splice: [].splice
};

// Give the init function the jQuery prototype for later instantiation
jQuery.fn.init.prototype = jQuery.fn;

jQuery.extend = jQuery.fn.extend = function() {
	var src, copyIsArray, copy, name, options, clone,
		target = arguments[0] || {},
		i = 1,
		length = arguments.length,
		deep = false;

	// Handle a deep copy situation
	if ( typeof target === "boolean" ) {
		deep = target;
		target = arguments[1] || {};
		// skip the boolean and the target
		i = 2;
	}

	// Handle case when target is a string or something (possible in deep copy)
	if ( typeof target !== "object" && !jQuery.isFunction(target) ) {
		target = {};
	}

	// extend jQuery itself if only one argument is passed
	if ( length === i ) {
		target = this;
		--i;
	}

	for ( ; i < length; i++ ) {
		// Only deal with non-null/undefined values
		if ( (options = arguments[ i ]) != null ) {
			// Extend the base object
			for ( name in options ) {
				src = target[ name ];
				copy = options[ name ];

				// Prevent never-ending loop
				if ( target === copy ) {
					continue;
				}

				// Recurse if we're merging plain objects or arrays
				if ( deep && copy && ( jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)) ) ) {
					if ( copyIsArray ) {
						copyIsArray = false;
						clone = src && jQuery.isArray(src) ? src : [];

					} else {
						clone = src && jQuery.isPlainObject(src) ? src : {};
					}

					// Never move original objects, clone them
					target[ name ] = jQuery.extend( deep, clone, copy );

				// Don't bring in undefined values
				} else if ( copy !== undefined ) {
					target[ name ] = copy;
				}
			}
		}
	}

	// Return the modified object
	return target;
};

jQuery.extend({
	// Unique for each copy of jQuery on the page
	// Non-digits removed to match rinlinejQuery
	expando: "jQuery" + ( core_version + Math.random() ).replace( /\D/g, "" ),

	noConflict: function( deep ) {
		if ( window.$ === jQuery ) {
			window.$ = _$;
		}

		if ( deep && window.jQuery === jQuery ) {
			window.jQuery = _jQuery;
		}

		return jQuery;
	},

	// Is the DOM ready to be used? Set to true once it occurs.
	isReady: false,

	// A counter to track how many items to wait for before
	// the ready event fires. See #6781
	readyWait: 1,

	// Hold (or release) the ready event
	holdReady: function( hold ) {
		if ( hold ) {
			jQuery.readyWait++;
		} else {
			jQuery.ready( true );
		}
	},

	// Handle when the DOM is ready
	ready: function( wait ) {

		// Abort if there are pending holds or we're already ready
		if ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {
			return;
		}

		// Make sure body exists, at least, in case IE gets a little overzealous (ticket #5443).
		if ( !document.body ) {
			return setTimeout( jQuery.ready );
		}

		// Remember that the DOM is ready
		jQuery.isReady = true;

		// If a normal DOM Ready event fired, decrement, and wait if need be
		if ( wait !== true && --jQuery.readyWait > 0 ) {
			return;
		}

		// If there are functions bound, to execute
		readyList.resolveWith( document, [ jQuery ] );

		// Trigger any bound ready events
		if ( jQuery.fn.trigger ) {
			jQuery( document ).trigger("ready").off("ready");
		}
	},

	// See test/unit/core.js for details concerning isFunction.
	// Since version 1.3, DOM methods and functions like alert
	// aren't supported. They return false on IE (#2968).
	isFunction: function( obj ) {
		return jQuery.type(obj) === "function";
	},

	isArray: Array.isArray || function( obj ) {
		return jQuery.type(obj) === "array";
	},

	isWindow: function( obj ) {
		/* jshint eqeqeq: false */
		return obj != null && obj == obj.window;
	},

	isNumeric: function( obj ) {
		return !isNaN( parseFloat(obj) ) && isFinite( obj );
	},

	type: function( obj ) {
		if ( obj == null ) {
			return String( obj );
		}
		return typeof obj === "object" || typeof obj === "function" ?
			class2type[ core_toString.call(obj) ] || "object" :
			typeof obj;
	},

	isPlainObject: function( obj ) {
		var key;

		// Must be an Object.
		// Because of IE, we also have to check the presence of the constructor property.
		// Make sure that DOM nodes and window objects don't pass through, as well
		if ( !obj || jQuery.type(obj) !== "object" || obj.nodeType || jQuery.isWindow( obj ) ) {
			return false;
		}

		try {
			// Not own constructor property must be Object
			if ( obj.constructor &&
				!core_hasOwn.call(obj, "constructor") &&
				!core_hasOwn.call(obj.constructor.prototype, "isPrototypeOf") ) {
				return false;
			}
		} catch ( e ) {
			// IE8,9 Will throw exceptions on certain host objects #9897
			return false;
		}

		// Support: IE<9
		// Handle iteration over inherited properties before own properties.
		if ( jQuery.support.ownLast ) {
			for ( key in obj ) {
				return core_hasOwn.call( obj, key );
			}
		}

		// Own properties are enumerated firstly, so to speed up,
		// if last one is own, then all properties are own.
		for ( key in obj ) {}

		return key === undefined || core_hasOwn.call( obj, key );
	},

	isEmptyObject: function( obj ) {
		var name;
		for ( name in obj ) {
			return false;
		}
		return true;
	},

	error: function( msg ) {
		throw new Error( msg );
	},

	// data: string of html
	// context (optional): If specified, the fragment will be created in this context, defaults to document
	// keepScripts (optional): If true, will include scripts passed in the html string
	parseHTML: function( data, context, keepScripts ) {
		if ( !data || typeof data !== "string" ) {
			return null;
		}
		if ( typeof context === "boolean" ) {
			keepScripts = context;
			context = false;
		}
		context = context || document;

		var parsed = rsingleTag.exec( data ),
			scripts = !keepScripts && [];

		// Single tag
		if ( parsed ) {
			return [ context.createElement( parsed[1] ) ];
		}

		parsed = jQuery.buildFragment( [ data ], context, scripts );
		if ( scripts ) {
			jQuery( scripts ).remove();
		}
		return jQuery.merge( [], parsed.childNodes );
	},

	parseJSON: function( data ) {
		// Attempt to parse using the native JSON parser first
		if ( window.JSON && window.JSON.parse ) {
			return window.JSON.parse( data );
		}

		if ( data === null ) {
			return data;
		}

		if ( typeof data === "string" ) {

			// Make sure leading/trailing whitespace is removed (IE can't handle it)
			data = jQuery.trim( data );

			if ( data ) {
				// Make sure the incoming data is actual JSON
				// Logic borrowed from http://json.org/json2.js
				if ( rvalidchars.test( data.replace( rvalidescape, "@" )
					.replace( rvalidtokens, "]" )
					.replace( rvalidbraces, "")) ) {

					return ( new Function( "return " + data ) )();
				}
			}
		}

		jQuery.error( "Invalid JSON: " + data );
	},

	// Cross-browser xml parsing
	parseXML: function( data ) {
		var xml, tmp;
		if ( !data || typeof data !== "string" ) {
			return null;
		}
		try {
			if ( window.DOMParser ) { // Standard
				tmp = new DOMParser();
				xml = tmp.parseFromString( data , "text/xml" );
			} else { // IE
				xml = new ActiveXObject( "Microsoft.XMLDOM" );
				xml.async = "false";
				xml.loadXML( data );
			}
		} catch( e ) {
			xml = undefined;
		}
		if ( !xml || !xml.documentElement || xml.getElementsByTagName( "parsererror" ).length ) {
			jQuery.error( "Invalid XML: " + data );
		}
		return xml;
	},

	noop: function() {},

	// Evaluates a script in a global context
	// Workarounds based on findings by Jim Driscoll
	// http://weblogs.java.net/blog/driscoll/archive/2009/09/08/eval-javascript-global-context
	globalEval: function( data ) {
		if ( data && jQuery.trim( data ) ) {
			// We use execScript on Internet Explorer
			// We use an anonymous function so that context is window
			// rather than jQuery in Firefox
			( window.execScript || function( data ) {
				window[ "eval" ].call( window, data );
			} )( data );
		}
	},

	// Convert dashed to camelCase; used by the css and data modules
	// Microsoft forgot to hump their vendor prefix (#9572)
	camelCase: function( string ) {
		return string.replace( rmsPrefix, "ms-" ).replace( rdashAlpha, fcamelCase );
	},

	nodeName: function( elem, name ) {
		return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();
	},

	// args is for internal usage only
	each: function( obj, callback, args ) {
		var value,
			i = 0,
			length = obj.length,
			isArray = isArraylike( obj );

		if ( args ) {
			if ( isArray ) {
				for ( ; i < length; i++ ) {
					value = callback.apply( obj[ i ], args );

					if ( value === false ) {
						break;
					}
				}
			} else {
				for ( i in obj ) {
					value = callback.apply( obj[ i ], args );

					if ( value === false ) {
						break;
					}
				}
			}

		// A special, fast, case for the most common use of each
		} else {
			if ( isArray ) {
				for ( ; i < length; i++ ) {
					value = callback.call( obj[ i ], i, obj[ i ] );

					if ( value === false ) {
						break;
					}
				}
			} else {
				for ( i in obj ) {
					value = callback.call( obj[ i ], i, obj[ i ] );

					if ( value === false ) {
						break;
					}
				}
			}
		}

		return obj;
	},

	// Use native String.trim function wherever possible
	trim: core_trim && !core_trim.call("\uFEFF\xA0") ?
		function( text ) {
			return text == null ?
				"" :
				core_trim.call( text );
		} :

		// Otherwise use our own trimming functionality
		function( text ) {
			return text == null ?
				"" :
				( text + "" ).replace( rtrim, "" );
		},

	// results is for internal usage only
	makeArray: function( arr, results ) {
		var ret = results || [];

		if ( arr != null ) {
			if ( isArraylike( Object(arr) ) ) {
				jQuery.merge( ret,
					typeof arr === "string" ?
					[ arr ] : arr
				);
			} else {
				core_push.call( ret, arr );
			}
		}

		return ret;
	},

	inArray: function( elem, arr, i ) {
		var len;

		if ( arr ) {
			if ( core_indexOf ) {
				return core_indexOf.call( arr, elem, i );
			}

			len = arr.length;
			i = i ? i < 0 ? Math.max( 0, len + i ) : i : 0;

			for ( ; i < len; i++ ) {
				// Skip accessing in sparse arrays
				if ( i in arr && arr[ i ] === elem ) {
					return i;
				}
			}
		}

		return -1;
	},

	merge: function( first, second ) {
		var l = second.length,
			i = first.length,
			j = 0;

		if ( typeof l === "number" ) {
			for ( ; j < l; j++ ) {
				first[ i++ ] = second[ j ];
			}
		} else {
			while ( second[j] !== undefined ) {
				first[ i++ ] = second[ j++ ];
			}
		}

		first.length = i;

		return first;
	},

	grep: function( elems, callback, inv ) {
		var retVal,
			ret = [],
			i = 0,
			length = elems.length;
		inv = !!inv;

		// Go through the array, only saving the items
		// that pass the validator function
		for ( ; i < length; i++ ) {
			retVal = !!callback( elems[ i ], i );
			if ( inv !== retVal ) {
				ret.push( elems[ i ] );
			}
		}

		return ret;
	},

	// arg is for internal usage only
	map: function( elems, callback, arg ) {
		var value,
			i = 0,
			length = elems.length,
			isArray = isArraylike( elems ),
			ret = [];

		// Go through the array, translating each of the items to their
		if ( isArray ) {
			for ( ; i < length; i++ ) {
				value = callback( elems[ i ], i, arg );

				if ( value != null ) {
					ret[ ret.length ] = value;
				}
			}

		// Go through every key on the object,
		} else {
			for ( i in elems ) {
				value = callback( elems[ i ], i, arg );

				if ( value != null ) {
					ret[ ret.length ] = value;
				}
			}
		}

		// Flatten any nested arrays
		return core_concat.apply( [], ret );
	},

	// A global GUID counter for objects
	guid: 1,

	// Bind a function to a context, optionally partially applying any
	// arguments.
	proxy: function( fn, context ) {
		var args, proxy, tmp;

		if ( typeof context === "string" ) {
			tmp = fn[ context ];
			context = fn;
			fn = tmp;
		}

		// Quick check to determine if target is callable, in the spec
		// this throws a TypeError, but we will just return undefined.
		if ( !jQuery.isFunction( fn ) ) {
			return undefined;
		}

		// Simulated bind
		args = core_slice.call( arguments, 2 );
		proxy = function() {
			return fn.apply( context || this, args.concat( core_slice.call( arguments ) ) );
		};

		// Set the guid of unique handler to the same of original handler, so it can be removed
		proxy.guid = fn.guid = fn.guid || jQuery.guid++;

		return proxy;
	},

	// Multifunctional method to get and set values of a collection
	// The value/s can optionally be executed if it's a function
	access: function( elems, fn, key, value, chainable, emptyGet, raw ) {
		var i = 0,
			length = elems.length,
			bulk = key == null;

		// Sets many values
		if ( jQuery.type( key ) === "object" ) {
			chainable = true;
			for ( i in key ) {
				jQuery.access( elems, fn, i, key[i], true, emptyGet, raw );
			}

		// Sets one value
		} else if ( value !== undefined ) {
			chainable = true;

			if ( !jQuery.isFunction( value ) ) {
				raw = true;
			}

			if ( bulk ) {
				// Bulk operations run against the entire set
				if ( raw ) {
					fn.call( elems, value );
					fn = null;

				// ...except when executing function values
				} else {
					bulk = fn;
					fn = function( elem, key, value ) {
						return bulk.call( jQuery( elem ), value );
					};
				}
			}

			if ( fn ) {
				for ( ; i < length; i++ ) {
					fn( elems[i], key, raw ? value : value.call( elems[i], i, fn( elems[i], key ) ) );
				}
			}
		}

		return chainable ?
			elems :

			// Gets
			bulk ?
				fn.call( elems ) :
				length ? fn( elems[0], key ) : emptyGet;
	},

	now: function() {
		return ( new Date() ).getTime();
	},

	// A method for quickly swapping in/out CSS properties to get correct calculations.
	// Note: this method belongs to the css module but it's needed here for the support module.
	// If support gets modularized, this method should be moved back to the css module.
	swap: function( elem, options, callback, args ) {
		var ret, name,
			old = {};

		// Remember the old values, and insert the new ones
		for ( name in options ) {
			old[ name ] = elem.style[ name ];
			elem.style[ name ] = options[ name ];
		}

		ret = callback.apply( elem, args || [] );

		// Revert the old values
		for ( name in options ) {
			elem.style[ name ] = old[ name ];
		}

		return ret;
	}
});

jQuery.ready.promise = function( obj ) {
	if ( !readyList ) {

		readyList = jQuery.Deferred();

		// Catch cases where $(document).ready() is called after the browser event has already occurred.
		// we once tried to use readyState "interactive" here, but it caused issues like the one
		// discovered by ChrisS here: http://bugs.jquery.com/ticket/12282#comment:15
		if ( document.readyState === "complete" ) {
			// Handle it asynchronously to allow scripts the opportunity to delay ready
			setTimeout( jQuery.ready );

		// Standards-based browsers support DOMContentLoaded
		} else if ( document.addEventListener ) {
			// Use the handy event callback
			document.addEventListener( "DOMContentLoaded", completed, false );

			// A fallback to window.onload, that will always work
			window.addEventListener( "load", completed, false );

		// If IE event model is used
		} else {
			// Ensure firing before onload, maybe late but safe also for iframes
			document.attachEvent( "onreadystatechange", completed );

			// A fallback to window.onload, that will always work
			window.attachEvent( "onload", completed );

			// If IE and not a frame
			// continually check to see if the document is ready
			var top = false;

			try {
				top = window.frameElement == null && document.documentElement;
			} catch(e) {}

			if ( top && top.doScroll ) {
				(function doScrollCheck() {
					if ( !jQuery.isReady ) {

						try {
							// Use the trick by Diego Perini
							// http://javascript.nwbox.com/IEContentLoaded/
							top.doScroll("left");
						} catch(e) {
							return setTimeout( doScrollCheck, 50 );
						}

						// detach all dom ready events
						detach();

						// and execute any waiting functions
						jQuery.ready();
					}
				})();
			}
		}
	}
	return readyList.promise( obj );
};

// Populate the class2type map
jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(i, name) {
	class2type[ "[object " + name + "]" ] = name.toLowerCase();
});

function isArraylike( obj ) {
	var length = obj.length,
		type = jQuery.type( obj );

	if ( jQuery.isWindow( obj ) ) {
		return false;
	}

	if ( obj.nodeType === 1 && length ) {
		return true;
	}

	return type === "array" || type !== "function" &&
		( length === 0 ||
		typeof length === "number" && length > 0 && ( length - 1 ) in obj );
}

// All jQuery objects should point back to these
rootjQuery = jQuery(document);
/*!
 * Sizzle CSS Selector Engine v1.9.4-pre
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-05-15
 */
(function( window, undefined ) {

var i,
	support,
	cachedruns,
	Expr,
	getText,
	isXML,
	compile,
	outermostContext,
	sortInput,

	// Local document vars
	setDocument,
	document,
	docElem,
	documentIsHTML,
	rbuggyQSA,
	rbuggyMatches,
	matches,
	contains,

	// Instance-specific data
	expando = "sizzle" + -(new Date()),
	preferredDoc = window.document,
	dirruns = 0,
	done = 0,
	classCache = createCache(),
	tokenCache = createCache(),
	compilerCache = createCache(),
	hasDuplicate = false,
	sortOrder = function() { return 0; },

	// General-purpose constants
	strundefined = typeof undefined,
	MAX_NEGATIVE = 1 << 31,

	// Instance methods
	hasOwn = ({}).hasOwnProperty,
	arr = [],
	pop = arr.pop,
	push_native = arr.push,
	push = arr.push,
	slice = arr.slice,
	// Use a stripped-down indexOf if we can't use a native one
	indexOf = arr.indexOf || function( elem ) {
		var i = 0,
			len = this.length;
		for ( ; i < len; i++ ) {
			if ( this[i] === elem ) {
				return i;
			}
		}
		return -1;
	},

	booleans = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",

	// Regular expressions

	// Whitespace characters http://www.w3.org/TR/css3-selectors/#whitespace
	whitespace = "[\\x20\\t\\r\\n\\f]",
	// http://www.w3.org/TR/css3-syntax/#characters
	characterEncoding = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",

	// Loosely modeled on CSS identifier characters
	// An unquoted value should be a CSS identifier http://www.w3.org/TR/css3-selectors/#attribute-selectors
	// Proper syntax: http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier
	identifier = characterEncoding.replace( "w", "w#" ),

	// Acceptable operators http://www.w3.org/TR/selectors/#attribute-selectors
	attributes = "\\[" + whitespace + "*(" + characterEncoding + ")" + whitespace +
		"*(?:([*^$|!~]?=)" + whitespace + "*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|(" + identifier + ")|)|)" + whitespace + "*\\]",

	// Prefer arguments quoted,
	//   then not containing pseudos/brackets,
	//   then attribute selectors/non-parenthetical expressions,
	//   then anything else
	// These preferences are here to reduce the number of selectors
	//   needing tokenize in the PSEUDO preFilter
	pseudos = ":(" + characterEncoding + ")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|" + attributes.replace( 3, 8 ) + ")*)|.*)\\)|)",

	// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter
	rtrim = new RegExp( "^" + whitespace + "+|((?:^|[^\\\\])(?:\\\\.)*)" + whitespace + "+$", "g" ),

	rcomma = new RegExp( "^" + whitespace + "*," + whitespace + "*" ),
	rcombinators = new RegExp( "^" + whitespace + "*([>+~]|" + whitespace + ")" + whitespace + "*" ),

	rsibling = new RegExp( whitespace + "*[+~]" ),
	rattributeQuotes = new RegExp( "=" + whitespace + "*([^\\]'\"]*)" + whitespace + "*\\]", "g" ),

	rpseudo = new RegExp( pseudos ),
	ridentifier = new RegExp( "^" + identifier + "$" ),

	matchExpr = {
		"ID": new RegExp( "^#(" + characterEncoding + ")" ),
		"CLASS": new RegExp( "^\\.(" + characterEncoding + ")" ),
		"TAG": new RegExp( "^(" + characterEncoding.replace( "w", "w*" ) + ")" ),
		"ATTR": new RegExp( "^" + attributes ),
		"PSEUDO": new RegExp( "^" + pseudos ),
		"CHILD": new RegExp( "^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + whitespace +
			"*(even|odd|(([+-]|)(\\d*)n|)" + whitespace + "*(?:([+-]|)" + whitespace +
			"*(\\d+)|))" + whitespace + "*\\)|)", "i" ),
		"bool": new RegExp( "^(?:" + booleans + ")$", "i" ),
		// For use in libraries implementing .is()
		// We use this for POS matching in `select`
		"needsContext": new RegExp( "^" + whitespace + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" +
			whitespace + "*((?:-\\d)?\\d*)" + whitespace + "*\\)|)(?=[^-]|$)", "i" )
	},

	rnative = /^[^{]+\{\s*\[native \w/,

	// Easily-parseable/retrievable ID or TAG or CLASS selectors
	rquickExpr = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,

	rinputs = /^(?:input|select|textarea|button)$/i,
	rheader = /^h\d$/i,

	rescape = /'|\\/g,

	// CSS escapes http://www.w3.org/TR/CSS21/syndata.html#escaped-characters
	runescape = new RegExp( "\\\\([\\da-f]{1,6}" + whitespace + "?|(" + whitespace + ")|.)", "ig" ),
	funescape = function( _, escaped, escapedWhitespace ) {
		var high = "0x" + escaped - 0x10000;
		// NaN means non-codepoint
		// Support: Firefox
		// Workaround erroneous numeric interpretation of +"0x"
		return high !== high || escapedWhitespace ?
			escaped :
			// BMP codepoint
			high < 0 ?
				String.fromCharCode( high + 0x10000 ) :
				// Supplemental Plane codepoint (surrogate pair)
				String.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );
	};

// Optimize for push.apply( _, NodeList )
try {
	push.apply(
		(arr = slice.call( preferredDoc.childNodes )),
		preferredDoc.childNodes
	);
	// Support: Android<4.0
	// Detect silently failing push.apply
	arr[ preferredDoc.childNodes.length ].nodeType;
} catch ( e ) {
	push = { apply: arr.length ?

		// Leverage slice if possible
		function( target, els ) {
			push_native.apply( target, slice.call(els) );
		} :

		// Support: IE<9
		// Otherwise append directly
		function( target, els ) {
			var j = target.length,
				i = 0;
			// Can't trust NodeList.length
			while ( (target[j++] = els[i++]) ) {}
			target.length = j - 1;
		}
	};
}

function Sizzle( selector, context, results, seed ) {
	var match, elem, m, nodeType,
		// QSA vars
		i, groups, old, nid, newContext, newSelector;

	if ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {
		setDocument( context );
	}

	context = context || document;
	results = results || [];

	if ( !selector || typeof selector !== "string" ) {
		return results;
	}

	if ( (nodeType = context.nodeType) !== 1 && nodeType !== 9 ) {
		return [];
	}

	if ( documentIsHTML && !seed ) {

		// Shortcuts
		if ( (match = rquickExpr.exec( selector )) ) {
			// Speed-up: Sizzle("#ID")
			if ( (m = match[1]) ) {
				if ( nodeType === 9 ) {
					elem = context.getElementById( m );
					// Check parentNode to catch when Blackberry 4.6 returns
					// nodes that are no longer in the document #6963
					if ( elem && elem.parentNode ) {
						// Handle the case where IE, Opera, and Webkit return items
						// by name instead of ID
						if ( elem.id === m ) {
							results.push( elem );
							return results;
						}
					} else {
						return results;
					}
				} else {
					// Context is not a document
					if ( context.ownerDocument && (elem = context.ownerDocument.getElementById( m )) &&
						contains( context, elem ) && elem.id === m ) {
						results.push( elem );
						return results;
					}
				}

			// Speed-up: Sizzle("TAG")
			} else if ( match[2] ) {
				push.apply( results, context.getElementsByTagName( selector ) );
				return results;

			// Speed-up: Sizzle(".CLASS")
			} else if ( (m = match[3]) && support.getElementsByClassName && context.getElementsByClassName ) {
				push.apply( results, context.getElementsByClassName( m ) );
				return results;
			}
		}

		// QSA path
		if ( support.qsa && (!rbuggyQSA || !rbuggyQSA.test( selector )) ) {
			nid = old = expando;
			newContext = context;
			newSelector = nodeType === 9 && selector;

			// qSA works strangely on Element-rooted queries
			// We can work around this by specifying an extra ID on the root
			// and working up from there (Thanks to Andrew Dupont for the technique)
			// IE 8 doesn't work on object elements
			if ( nodeType === 1 && context.nodeName.toLowerCase() !== "object" ) {
				groups = tokenize( selector );

				if ( (old = context.getAttribute("id")) ) {
					nid = old.replace( rescape, "\\$&" );
				} else {
					context.setAttribute( "id", nid );
				}
				nid = "[id='" + nid + "'] ";

				i = groups.length;
				while ( i-- ) {
					groups[i] = nid + toSelector( groups[i] );
				}
				newContext = rsibling.test( selector ) && context.parentNode || context;
				newSelector = groups.join(",");
			}

			if ( newSelector ) {
				try {
					push.apply( results,
						newContext.querySelectorAll( newSelector )
					);
					return results;
				} catch(qsaError) {
				} finally {
					if ( !old ) {
						context.removeAttribute("id");
					}
				}
			}
		}
	}

	// All others
	return select( selector.replace( rtrim, "$1" ), context, results, seed );
}

/**
 * For feature detection
 * @param {Function} fn The function to test for native support
 */
function isNative( fn ) {
	return rnative.test( fn + "" );
}

/**
 * Create key-value caches of limited size
 * @returns {Function(string, Object)} Returns the Object data after storing it on itself with
 *	property name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)
 *	deleting the oldest entry
 */
function createCache() {
	var keys = [];

	function cache( key, value ) {
		// Use (key + " ") to avoid collision with native prototype properties (see Issue #157)
		if ( keys.push( key += " " ) > Expr.cacheLength ) {
			// Only keep the most recent entries
			delete cache[ keys.shift() ];
		}
		return (cache[ key ] = value);
	}
	return cache;
}

/**
 * Mark a function for special use by Sizzle
 * @param {Function} fn The function to mark
 */
function markFunction( fn ) {
	fn[ expando ] = true;
	return fn;
}

/**
 * Support testing using an element
 * @param {Function} fn Passed the created div and expects a boolean result
 */
function assert( fn ) {
	var div = document.createElement("div");

	try {
		return !!fn( div );
	} catch (e) {
		return false;
	} finally {
		// Remove from its parent by default
		if ( div.parentNode ) {
			div.parentNode.removeChild( div );
		}
		// release memory in IE
		div = null;
	}
}

/**
 * Adds the same handler for all of the specified attrs
 * @param {String} attrs Pipe-separated list of attributes
 * @param {Function} handler The method that will be applied if the test fails
 * @param {Boolean} test The result of a test. If true, null will be set as the handler in leiu of the specified handler
 */
function addHandle( attrs, handler, test ) {
	attrs = attrs.split("|");
	var current,
		i = attrs.length,
		setHandle = test ? null : handler;

	while ( i-- ) {
		// Don't override a user's handler
		if ( !(current = Expr.attrHandle[ attrs[i] ]) || current === handler ) {
			Expr.attrHandle[ attrs[i] ] = setHandle;
		}
	}
}

/**
 * Fetches boolean attributes by node
 * @param {Element} elem
 * @param {String} name
 */
function boolHandler( elem, name ) {
	// XML does not need to be checked as this will not be assigned for XML documents
	var val = elem.getAttributeNode( name );
	return val && val.specified ?
		val.value :
		elem[ name ] === true ? name.toLowerCase() : null;
}

/**
 * Fetches attributes without interpolation
 * http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx
 * @param {Element} elem
 * @param {String} name
 */
function interpolationHandler( elem, name ) {
	// XML does not need to be checked as this will not be assigned for XML documents
	return elem.getAttribute( name, name.toLowerCase() === "type" ? 1 : 2 );
}

/**
 * Uses defaultValue to retrieve value in IE6/7
 * @param {Element} elem
 * @param {String} name
 */
function valueHandler( elem ) {
	// Ignore the value *property* on inputs by using defaultValue
	// Fallback to Sizzle.attr by returning undefined where appropriate
	// XML does not need to be checked as this will not be assigned for XML documents
	if ( elem.nodeName.toLowerCase() === "input" ) {
		return elem.defaultValue;
	}
}

/**
 * Checks document order of two siblings
 * @param {Element} a
 * @param {Element} b
 * @returns Returns -1 if a precedes b, 1 if a follows b
 */
function siblingCheck( a, b ) {
	var cur = b && a,
		diff = cur && a.nodeType === 1 && b.nodeType === 1 &&
			( ~b.sourceIndex || MAX_NEGATIVE ) -
			( ~a.sourceIndex || MAX_NEGATIVE );

	// Use IE sourceIndex if available on both nodes
	if ( diff ) {
		return diff;
	}

	// Check if b follows a
	if ( cur ) {
		while ( (cur = cur.nextSibling) ) {
			if ( cur === b ) {
				return -1;
			}
		}
	}

	return a ? 1 : -1;
}

/**
 * Returns a function to use in pseudos for input types
 * @param {String} type
 */
function createInputPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return name === "input" && elem.type === type;
	};
}

/**
 * Returns a function to use in pseudos for buttons
 * @param {String} type
 */
function createButtonPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return (name === "input" || name === "button") && elem.type === type;
	};
}

/**
 * Returns a function to use in pseudos for positionals
 * @param {Function} fn
 */
function createPositionalPseudo( fn ) {
	return markFunction(function( argument ) {
		argument = +argument;
		return markFunction(function( seed, matches ) {
			var j,
				matchIndexes = fn( [], seed.length, argument ),
				i = matchIndexes.length;

			// Match elements found at the specified indexes
			while ( i-- ) {
				if ( seed[ (j = matchIndexes[i]) ] ) {
					seed[j] = !(matches[j] = seed[j]);
				}
			}
		});
	});
}

/**
 * Detect xml
 * @param {Element|Object} elem An element or a document
 */
isXML = Sizzle.isXML = function( elem ) {
	// documentElement is verified for cases where it doesn't yet exist
	// (such as loading iframes in IE - #4833)
	var documentElement = elem && (elem.ownerDocument || elem).documentElement;
	return documentElement ? documentElement.nodeName !== "HTML" : false;
};

// Expose support vars for convenience
support = Sizzle.support = {};

/**
 * Sets document-related variables once based on the current document
 * @param {Element|Object} [doc] An element or document object to use to set the document
 * @returns {Object} Returns the current document
 */
setDocument = Sizzle.setDocument = function( node ) {
	var doc = node ? node.ownerDocument || node : preferredDoc;

	// If no document and documentElement is available, return
	if ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {
		return document;
	}

	// Set our document
	document = doc;
	docElem = doc.documentElement;

	// Support tests
	documentIsHTML = !isXML( doc );

	/* Attributes
	---------------------------------------------------------------------- */

	// Support: IE<8
	// Verify that getAttribute really returns attributes and not properties (excepting IE8 booleans)
	support.attributes = assert(function( div ) {

		// Support: IE<8
		// Prevent attribute/property "interpolation"
		div.innerHTML = "<a href='#'></a>";
		addHandle( "type|href|height|width", interpolationHandler, div.firstChild.getAttribute("href") === "#" );

		// Support: IE<9
		// Use getAttributeNode to fetch booleans when getAttribute lies
		addHandle( booleans, boolHandler, div.getAttribute("disabled") == null );

		div.className = "i";
		return !div.getAttribute("className");
	});

	// Support: IE<9
	// Retrieving value should defer to defaultValue
	support.input = assert(function( div ) {
		div.innerHTML = "<input>";
		div.firstChild.setAttribute( "value", "" );
		return div.firstChild.getAttribute( "value" ) === "";
	});

	// IE6/7 still return empty string for value,
	// but are actually retrieving the property
	addHandle( "value", valueHandler, support.attributes && support.input );

	/* getElement(s)By*
	---------------------------------------------------------------------- */

	// Check if getElementsByTagName("*") returns only elements
	support.getElementsByTagName = assert(function( div ) {
		div.appendChild( doc.createComment("") );
		return !div.getElementsByTagName("*").length;
	});

	// Check if getElementsByClassName can be trusted
	support.getElementsByClassName = assert(function( div ) {
		div.innerHTML = "<div class='a'></div><div class='a i'></div>";

		// Support: Safari<4
		// Catch class over-caching
		div.firstChild.className = "i";
		// Support: Opera<10
		// Catch gEBCN failure to find non-leading classes
		return div.getElementsByClassName("i").length === 2;
	});

	// Support: IE<10
	// Check if getElementById returns elements by name
	// The broken getElementById methods don't pick up programatically-set names,
	// so use a roundabout getElementsByName test
	support.getById = assert(function( div ) {
		docElem.appendChild( div ).id = expando;
		return !doc.getElementsByName || !doc.getElementsByName( expando ).length;
	});

	// ID find and filter
	if ( support.getById ) {
		Expr.find["ID"] = function( id, context ) {
			if ( typeof context.getElementById !== strundefined && documentIsHTML ) {
				var m = context.getElementById( id );
				// Check parentNode to catch when Blackberry 4.6 returns
				// nodes that are no longer in the document #6963
				return m && m.parentNode ? [m] : [];
			}
		};
		Expr.filter["ID"] = function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				return elem.getAttribute("id") === attrId;
			};
		};
	} else {
		// Support: IE6/7
		// getElementById is not reliable as a find shortcut
		delete Expr.find["ID"];

		Expr.filter["ID"] =  function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				var node = typeof elem.getAttributeNode !== strundefined && elem.getAttributeNode("id");
				return node && node.value === attrId;
			};
		};
	}

	// Tag
	Expr.find["TAG"] = support.getElementsByTagName ?
		function( tag, context ) {
			if ( typeof context.getElementsByTagName !== strundefined ) {
				return context.getElementsByTagName( tag );
			}
		} :
		function( tag, context ) {
			var elem,
				tmp = [],
				i = 0,
				results = context.getElementsByTagName( tag );

			// Filter out possible comments
			if ( tag === "*" ) {
				while ( (elem = results[i++]) ) {
					if ( elem.nodeType === 1 ) {
						tmp.push( elem );
					}
				}

				return tmp;
			}
			return results;
		};

	// Class
	Expr.find["CLASS"] = support.getElementsByClassName && function( className, context ) {
		if ( typeof context.getElementsByClassName !== strundefined && documentIsHTML ) {
			return context.getElementsByClassName( className );
		}
	};

	/* QSA/matchesSelector
	---------------------------------------------------------------------- */

	// QSA and matchesSelector support

	// matchesSelector(:active) reports false when true (IE9/Opera 11.5)
	rbuggyMatches = [];

	// qSa(:focus) reports false when true (Chrome 21)
	// We allow this because of a bug in IE8/9 that throws an error
	// whenever `document.activeElement` is accessed on an iframe
	// So, we allow :focus to pass through QSA all the time to avoid the IE error
	// See http://bugs.jquery.com/ticket/13378
	rbuggyQSA = [];

	if ( (support.qsa = isNative(doc.querySelectorAll)) ) {
		// Build QSA regex
		// Regex strategy adopted from Diego Perini
		assert(function( div ) {
			// Select is set to empty string on purpose
			// This is to test IE's treatment of not explicitly
			// setting a boolean content attribute,
			// since its presence should be enough
			// http://bugs.jquery.com/ticket/12359
			div.innerHTML = "<select><option selected=''></option></select>";

			// Support: IE8
			// Boolean attributes and "value" are not treated correctly
			if ( !div.querySelectorAll("[selected]").length ) {
				rbuggyQSA.push( "\\[" + whitespace + "*(?:value|" + booleans + ")" );
			}

			// Webkit/Opera - :checked should return selected option elements
			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
			// IE8 throws error here and will not see later tests
			if ( !div.querySelectorAll(":checked").length ) {
				rbuggyQSA.push(":checked");
			}
		});

		assert(function( div ) {

			// Support: Opera 10-12/IE8
			// ^= $= *= and empty values
			// Should not select anything
			// Support: Windows 8 Native Apps
			// The type attribute is restricted during .innerHTML assignment
			var input = doc.createElement("input");
			input.setAttribute( "type", "hidden" );
			div.appendChild( input ).setAttribute( "t", "" );

			if ( div.querySelectorAll("[t^='']").length ) {
				rbuggyQSA.push( "[*^$]=" + whitespace + "*(?:''|\"\")" );
			}

			// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)
			// IE8 throws error here and will not see later tests
			if ( !div.querySelectorAll(":enabled").length ) {
				rbuggyQSA.push( ":enabled", ":disabled" );
			}

			// Opera 10-11 does not throw on post-comma invalid pseudos
			div.querySelectorAll("*,:x");
			rbuggyQSA.push(",.*:");
		});
	}

	if ( (support.matchesSelector = isNative( (matches = docElem.webkitMatchesSelector ||
		docElem.mozMatchesSelector ||
		docElem.oMatchesSelector ||
		docElem.msMatchesSelector) )) ) {

		assert(function( div ) {
			// Check to see if it's possible to do matchesSelector
			// on a disconnected node (IE 9)
			support.disconnectedMatch = matches.call( div, "div" );

			// This should fail with an exception
			// Gecko does not error, returns false instead
			matches.call( div, "[s!='']:x" );
			rbuggyMatches.push( "!=", pseudos );
		});
	}

	rbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join("|") );
	rbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join("|") );

	/* Contains
	---------------------------------------------------------------------- */

	// Element contains another
	// Purposefully does not implement inclusive descendent
	// As in, an element does not contain itself
	contains = isNative(docElem.contains) || docElem.compareDocumentPosition ?
		function( a, b ) {
			var adown = a.nodeType === 9 ? a.documentElement : a,
				bup = b && b.parentNode;
			return a === bup || !!( bup && bup.nodeType === 1 && (
				adown.contains ?
					adown.contains( bup ) :
					a.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16
			));
		} :
		function( a, b ) {
			if ( b ) {
				while ( (b = b.parentNode) ) {
					if ( b === a ) {
						return true;
					}
				}
			}
			return false;
		};

	/* Sorting
	---------------------------------------------------------------------- */

	// Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)
	// Detached nodes confoundingly follow *each other*
	support.sortDetached = assert(function( div1 ) {
		// Should return 1, but returns 4 (following)
		return div1.compareDocumentPosition( doc.createElement("div") ) & 1;
	});

	// Document order sorting
	sortOrder = docElem.compareDocumentPosition ?
	function( a, b ) {

		// Flag for duplicate removal
		if ( a === b ) {
			hasDuplicate = true;
			return 0;
		}

		var compare = b.compareDocumentPosition && a.compareDocumentPosition && a.compareDocumentPosition( b );

		if ( compare ) {
			// Disconnected nodes
			if ( compare & 1 ||
				(!support.sortDetached && b.compareDocumentPosition( a ) === compare) ) {

				// Choose the first element that is related to our preferred document
				if ( a === doc || contains(preferredDoc, a) ) {
					return -1;
				}
				if ( b === doc || contains(preferredDoc, b) ) {
					return 1;
				}

				// Maintain original order
				return sortInput ?
					( indexOf.call( sortInput, a ) - indexOf.call( sortInput, b ) ) :
					0;
			}

			return compare & 4 ? -1 : 1;
		}

		// Not directly comparable, sort on existence of method
		return a.compareDocumentPosition ? -1 : 1;
	} :
	function( a, b ) {
		var cur,
			i = 0,
			aup = a.parentNode,
			bup = b.parentNode,
			ap = [ a ],
			bp = [ b ];

		// Exit early if the nodes are identical
		if ( a === b ) {
			hasDuplicate = true;
			return 0;

		// Parentless nodes are either documents or disconnected
		} else if ( !aup || !bup ) {
			return a === doc ? -1 :
				b === doc ? 1 :
				aup ? -1 :
				bup ? 1 :
				sortInput ?
				( indexOf.call( sortInput, a ) - indexOf.call( sortInput, b ) ) :
				0;

		// If the nodes are siblings, we can do a quick check
		} else if ( aup === bup ) {
			return siblingCheck( a, b );
		}

		// Otherwise we need full lists of their ancestors for comparison
		cur = a;
		while ( (cur = cur.parentNode) ) {
			ap.unshift( cur );
		}
		cur = b;
		while ( (cur = cur.parentNode) ) {
			bp.unshift( cur );
		}

		// Walk down the tree looking for a discrepancy
		while ( ap[i] === bp[i] ) {
			i++;
		}

		return i ?
			// Do a sibling check if the nodes have a common ancestor
			siblingCheck( ap[i], bp[i] ) :

			// Otherwise nodes in our document sort first
			ap[i] === preferredDoc ? -1 :
			bp[i] === preferredDoc ? 1 :
			0;
	};

	return doc;
};

Sizzle.matches = function( expr, elements ) {
	return Sizzle( expr, null, null, elements );
};

Sizzle.matchesSelector = function( elem, expr ) {
	// Set document vars if needed
	if ( ( elem.ownerDocument || elem ) !== document ) {
		setDocument( elem );
	}

	// Make sure that attribute selectors are quoted
	expr = expr.replace( rattributeQuotes, "='$1']" );

	if ( support.matchesSelector && documentIsHTML &&
		( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&
		( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {

		try {
			var ret = matches.call( elem, expr );

			// IE 9's matchesSelector returns false on disconnected nodes
			if ( ret || support.disconnectedMatch ||
					// As well, disconnected nodes are said to be in a document
					// fragment in IE 9
					elem.document && elem.document.nodeType !== 11 ) {
				return ret;
			}
		} catch(e) {}
	}

	return Sizzle( expr, document, null, [elem] ).length > 0;
};

Sizzle.contains = function( context, elem ) {
	// Set document vars if needed
	if ( ( context.ownerDocument || context ) !== document ) {
		setDocument( context );
	}
	return contains( context, elem );
};

Sizzle.attr = function( elem, name ) {
	// Set document vars if needed
	if ( ( elem.ownerDocument || elem ) !== document ) {
		setDocument( elem );
	}

	var fn = Expr.attrHandle[ name.toLowerCase() ],
		// Don't get fooled by Object.prototype properties (jQuery #13807)
		val = ( fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?
			fn( elem, name, !documentIsHTML ) :
			undefined );

	return val === undefined ?
		support.attributes || !documentIsHTML ?
			elem.getAttribute( name ) :
			(val = elem.getAttributeNode(name)) && val.specified ?
				val.value :
				null :
		val;
};

Sizzle.error = function( msg ) {
	throw new Error( "Syntax error, unrecognized expression: " + msg );
};

/**
 * Document sorting and removing duplicates
 * @param {ArrayLike} results
 */
Sizzle.uniqueSort = function( results ) {
	var elem,
		duplicates = [],
		j = 0,
		i = 0;

	// Unless we *know* we can detect duplicates, assume their presence
	hasDuplicate = !support.detectDuplicates;
	sortInput = !support.sortStable && results.slice( 0 );
	results.sort( sortOrder );

	if ( hasDuplicate ) {
		while ( (elem = results[i++]) ) {
			if ( elem === results[ i ] ) {
				j = duplicates.push( i );
			}
		}
		while ( j-- ) {
			results.splice( duplicates[ j ], 1 );
		}
	}

	return results;
};

/**
 * Utility function for retrieving the text value of an array of DOM nodes
 * @param {Array|Element} elem
 */
getText = Sizzle.getText = function( elem ) {
	var node,
		ret = "",
		i = 0,
		nodeType = elem.nodeType;

	if ( !nodeType ) {
		// If no nodeType, this is expected to be an array
		for ( ; (node = elem[i]); i++ ) {
			// Do not traverse comment nodes
			ret += getText( node );
		}
	} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {
		// Use textContent for elements
		// innerText usage removed for consistency of new lines (see #11153)
		if ( typeof elem.textContent === "string" ) {
			return elem.textContent;
		} else {
			// Traverse its children
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				ret += getText( elem );
			}
		}
	} else if ( nodeType === 3 || nodeType === 4 ) {
		return elem.nodeValue;
	}
	// Do not include comment or processing instruction nodes

	return ret;
};

Expr = Sizzle.selectors = {

	// Can be adjusted by the user
	cacheLength: 50,

	createPseudo: markFunction,

	match: matchExpr,

	attrHandle: {},

	find: {},

	relative: {
		">": { dir: "parentNode", first: true },
		" ": { dir: "parentNode" },
		"+": { dir: "previousSibling", first: true },
		"~": { dir: "previousSibling" }
	},

	preFilter: {
		"ATTR": function( match ) {
			match[1] = match[1].replace( runescape, funescape );

			// Move the given value to match[3] whether quoted or unquoted
			match[3] = ( match[4] || match[5] || "" ).replace( runescape, funescape );

			if ( match[2] === "~=" ) {
				match[3] = " " + match[3] + " ";
			}

			return match.slice( 0, 4 );
		},

		"CHILD": function( match ) {
			/* matches from matchExpr["CHILD"]
				1 type (only|nth|...)
				2 what (child|of-type)
				3 argument (even|odd|\d*|\d*n([+-]\d+)?|...)
				4 xn-component of xn+y argument ([+-]?\d*n|)
				5 sign of xn-component
				6 x of xn-component
				7 sign of y-component
				8 y of y-component
			*/
			match[1] = match[1].toLowerCase();

			if ( match[1].slice( 0, 3 ) === "nth" ) {
				// nth-* requires argument
				if ( !match[3] ) {
					Sizzle.error( match[0] );
				}

				// numeric x and y parameters for Expr.filter.CHILD
				// remember that false/true cast respectively to 0/1
				match[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === "even" || match[3] === "odd" ) );
				match[5] = +( ( match[7] + match[8] ) || match[3] === "odd" );

			// other types prohibit arguments
			} else if ( match[3] ) {
				Sizzle.error( match[0] );
			}

			return match;
		},

		"PSEUDO": function( match ) {
			var excess,
				unquoted = !match[5] && match[2];

			if ( matchExpr["CHILD"].test( match[0] ) ) {
				return null;
			}

			// Accept quoted arguments as-is
			if ( match[3] && match[4] !== undefined ) {
				match[2] = match[4];

			// Strip excess characters from unquoted arguments
			} else if ( unquoted && rpseudo.test( unquoted ) &&
				// Get excess from tokenize (recursively)
				(excess = tokenize( unquoted, true )) &&
				// advance to the next closing parenthesis
				(excess = unquoted.indexOf( ")", unquoted.length - excess ) - unquoted.length) ) {

				// excess is a negative index
				match[0] = match[0].slice( 0, excess );
				match[2] = unquoted.slice( 0, excess );
			}

			// Return only captures needed by the pseudo filter method (type and argument)
			return match.slice( 0, 3 );
		}
	},

	filter: {

		"TAG": function( nodeNameSelector ) {
			var nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();
			return nodeNameSelector === "*" ?
				function() { return true; } :
				function( elem ) {
					return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;
				};
		},

		"CLASS": function( className ) {
			var pattern = classCache[ className + " " ];

			return pattern ||
				(pattern = new RegExp( "(^|" + whitespace + ")" + className + "(" + whitespace + "|$)" )) &&
				classCache( className, function( elem ) {
					return pattern.test( typeof elem.className === "string" && elem.className || typeof elem.getAttribute !== strundefined && elem.getAttribute("class") || "" );
				});
		},

		"ATTR": function( name, operator, check ) {
			return function( elem ) {
				var result = Sizzle.attr( elem, name );

				if ( result == null ) {
					return operator === "!=";
				}
				if ( !operator ) {
					return true;
				}

				result += "";

				return operator === "=" ? result === check :
					operator === "!=" ? result !== check :
					operator === "^=" ? check && result.indexOf( check ) === 0 :
					operator === "*=" ? check && result.indexOf( check ) > -1 :
					operator === "$=" ? check && result.slice( -check.length ) === check :
					operator === "~=" ? ( " " + result + " " ).indexOf( check ) > -1 :
					operator === "|=" ? result === check || result.slice( 0, check.length + 1 ) === check + "-" :
					false;
			};
		},

		"CHILD": function( type, what, argument, first, last ) {
			var simple = type.slice( 0, 3 ) !== "nth",
				forward = type.slice( -4 ) !== "last",
				ofType = what === "of-type";

			return first === 1 && last === 0 ?

				// Shortcut for :nth-*(n)
				function( elem ) {
					return !!elem.parentNode;
				} :

				function( elem, context, xml ) {
					var cache, outerCache, node, diff, nodeIndex, start,
						dir = simple !== forward ? "nextSibling" : "previousSibling",
						parent = elem.parentNode,
						name = ofType && elem.nodeName.toLowerCase(),
						useCache = !xml && !ofType;

					if ( parent ) {

						// :(first|last|only)-(child|of-type)
						if ( simple ) {
							while ( dir ) {
								node = elem;
								while ( (node = node[ dir ]) ) {
									if ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) {
										return false;
									}
								}
								// Reverse direction for :only-* (if we haven't yet done so)
								start = dir = type === "only" && !start && "nextSibling";
							}
							return true;
						}

						start = [ forward ? parent.firstChild : parent.lastChild ];

						// non-xml :nth-child(...) stores cache data on `parent`
						if ( forward && useCache ) {
							// Seek `elem` from a previously-cached index
							outerCache = parent[ expando ] || (parent[ expando ] = {});
							cache = outerCache[ type ] || [];
							nodeIndex = cache[0] === dirruns && cache[1];
							diff = cache[0] === dirruns && cache[2];
							node = nodeIndex && parent.childNodes[ nodeIndex ];

							while ( (node = ++nodeIndex && node && node[ dir ] ||

								// Fallback to seeking `elem` from the start
								(diff = nodeIndex = 0) || start.pop()) ) {

								// When found, cache indexes on `parent` and break
								if ( node.nodeType === 1 && ++diff && node === elem ) {
									outerCache[ type ] = [ dirruns, nodeIndex, diff ];
									break;
								}
							}

						// Use previously-cached element index if available
						} else if ( useCache && (cache = (elem[ expando ] || (elem[ expando ] = {}))[ type ]) && cache[0] === dirruns ) {
							diff = cache[1];

						// xml :nth-child(...) or :nth-last-child(...) or :nth(-last)?-of-type(...)
						} else {
							// Use the same loop as above to seek `elem` from the start
							while ( (node = ++nodeIndex && node && node[ dir ] ||
								(diff = nodeIndex = 0) || start.pop()) ) {

								if ( ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) && ++diff ) {
									// Cache the index of each encountered element
									if ( useCache ) {
										(node[ expando ] || (node[ expando ] = {}))[ type ] = [ dirruns, diff ];
									}

									if ( node === elem ) {
										break;
									}
								}
							}
						}

						// Incorporate the offset, then check against cycle size
						diff -= last;
						return diff === first || ( diff % first === 0 && diff / first >= 0 );
					}
				};
		},

		"PSEUDO": function( pseudo, argument ) {
			// pseudo-class names are case-insensitive
			// http://www.w3.org/TR/selectors/#pseudo-classes
			// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters
			// Remember that setFilters inherits from pseudos
			var args,
				fn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||
					Sizzle.error( "unsupported pseudo: " + pseudo );

			// The user may use createPseudo to indicate that
			// arguments are needed to create the filter function
			// just as Sizzle does
			if ( fn[ expando ] ) {
				return fn( argument );
			}

			// But maintain support for old signatures
			if ( fn.length > 1 ) {
				args = [ pseudo, pseudo, "", argument ];
				return Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?
					markFunction(function( seed, matches ) {
						var idx,
							matched = fn( seed, argument ),
							i = matched.length;
						while ( i-- ) {
							idx = indexOf.call( seed, matched[i] );
							seed[ idx ] = !( matches[ idx ] = matched[i] );
						}
					}) :
					function( elem ) {
						return fn( elem, 0, args );
					};
			}

			return fn;
		}
	},

	pseudos: {
		// Potentially complex pseudos
		"not": markFunction(function( selector ) {
			// Trim the selector passed to compile
			// to avoid treating leading and trailing
			// spaces as combinators
			var input = [],
				results = [],
				matcher = compile( selector.replace( rtrim, "$1" ) );

			return matcher[ expando ] ?
				markFunction(function( seed, matches, context, xml ) {
					var elem,
						unmatched = matcher( seed, null, xml, [] ),
						i = seed.length;

					// Match elements unmatched by `matcher`
					while ( i-- ) {
						if ( (elem = unmatched[i]) ) {
							seed[i] = !(matches[i] = elem);
						}
					}
				}) :
				function( elem, context, xml ) {
					input[0] = elem;
					matcher( input, null, xml, results );
					return !results.pop();
				};
		}),

		"has": markFunction(function( selector ) {
			return function( elem ) {
				return Sizzle( selector, elem ).length > 0;
			};
		}),

		"contains": markFunction(function( text ) {
			return function( elem ) {
				return ( elem.textContent || elem.innerText || getText( elem ) ).indexOf( text ) > -1;
			};
		}),

		// "Whether an element is represented by a :lang() selector
		// is based solely on the element's language value
		// being equal to the identifier C,
		// or beginning with the identifier C immediately followed by "-".
		// The matching of C against the element's language value is performed case-insensitively.
		// The identifier C does not have to be a valid language name."
		// http://www.w3.org/TR/selectors/#lang-pseudo
		"lang": markFunction( function( lang ) {
			// lang value must be a valid identifier
			if ( !ridentifier.test(lang || "") ) {
				Sizzle.error( "unsupported lang: " + lang );
			}
			lang = lang.replace( runescape, funescape ).toLowerCase();
			return function( elem ) {
				var elemLang;
				do {
					if ( (elemLang = documentIsHTML ?
						elem.lang :
						elem.getAttribute("xml:lang") || elem.getAttribute("lang")) ) {

						elemLang = elemLang.toLowerCase();
						return elemLang === lang || elemLang.indexOf( lang + "-" ) === 0;
					}
				} while ( (elem = elem.parentNode) && elem.nodeType === 1 );
				return false;
			};
		}),

		// Miscellaneous
		"target": function( elem ) {
			var hash = window.location && window.location.hash;
			return hash && hash.slice( 1 ) === elem.id;
		},

		"root": function( elem ) {
			return elem === docElem;
		},

		"focus": function( elem ) {
			return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);
		},

		// Boolean properties
		"enabled": function( elem ) {
			return elem.disabled === false;
		},

		"disabled": function( elem ) {
			return elem.disabled === true;
		},

		"checked": function( elem ) {
			// In CSS3, :checked should return both checked and selected elements
			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
			var nodeName = elem.nodeName.toLowerCase();
			return (nodeName === "input" && !!elem.checked) || (nodeName === "option" && !!elem.selected);
		},

		"selected": function( elem ) {
			// Accessing this property makes selected-by-default
			// options in Safari work properly
			if ( elem.parentNode ) {
				elem.parentNode.selectedIndex;
			}

			return elem.selected === true;
		},

		// Contents
		"empty": function( elem ) {
			// http://www.w3.org/TR/selectors/#empty-pseudo
			// :empty is only affected by element nodes and content nodes(including text(3), cdata(4)),
			//   not comment, processing instructions, or others
			// Thanks to Diego Perini for the nodeName shortcut
			//   Greater than "@" means alpha characters (specifically not starting with "#" or "?")
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				if ( elem.nodeName > "@" || elem.nodeType === 3 || elem.nodeType === 4 ) {
					return false;
				}
			}
			return true;
		},

		"parent": function( elem ) {
			return !Expr.pseudos["empty"]( elem );
		},

		// Element/input types
		"header": function( elem ) {
			return rheader.test( elem.nodeName );
		},

		"input": function( elem ) {
			return rinputs.test( elem.nodeName );
		},

		"button": function( elem ) {
			var name = elem.nodeName.toLowerCase();
			return name === "input" && elem.type === "button" || name === "button";
		},

		"text": function( elem ) {
			var attr;
			// IE6 and 7 will map elem.type to 'text' for new HTML5 types (search, etc)
			// use getAttribute instead to test this case
			return elem.nodeName.toLowerCase() === "input" &&
				elem.type === "text" &&
				( (attr = elem.getAttribute("type")) == null || attr.toLowerCase() === elem.type );
		},

		// Position-in-collection
		"first": createPositionalPseudo(function() {
			return [ 0 ];
		}),

		"last": createPositionalPseudo(function( matchIndexes, length ) {
			return [ length - 1 ];
		}),

		"eq": createPositionalPseudo(function( matchIndexes, length, argument ) {
			return [ argument < 0 ? argument + length : argument ];
		}),

		"even": createPositionalPseudo(function( matchIndexes, length ) {
			var i = 0;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"odd": createPositionalPseudo(function( matchIndexes, length ) {
			var i = 1;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"lt": createPositionalPseudo(function( matchIndexes, length, argument ) {
			var i = argument < 0 ? argument + length : argument;
			for ( ; --i >= 0; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"gt": createPositionalPseudo(function( matchIndexes, length, argument ) {
			var i = argument < 0 ? argument + length : argument;
			for ( ; ++i < length; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		})
	}
};

// Add button/input type pseudos
for ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {
	Expr.pseudos[ i ] = createInputPseudo( i );
}
for ( i in { submit: true, reset: true } ) {
	Expr.pseudos[ i ] = createButtonPseudo( i );
}

function tokenize( selector, parseOnly ) {
	var matched, match, tokens, type,
		soFar, groups, preFilters,
		cached = tokenCache[ selector + " " ];

	if ( cached ) {
		return parseOnly ? 0 : cached.slice( 0 );
	}

	soFar = selector;
	groups = [];
	preFilters = Expr.preFilter;

	while ( soFar ) {

		// Comma and first run
		if ( !matched || (match = rcomma.exec( soFar )) ) {
			if ( match ) {
				// Don't consume trailing commas as valid
				soFar = soFar.slice( match[0].length ) || soFar;
			}
			groups.push( tokens = [] );
		}

		matched = false;

		// Combinators
		if ( (match = rcombinators.exec( soFar )) ) {
			matched = match.shift();
			tokens.push({
				value: matched,
				// Cast descendant combinators to space
				type: match[0].replace( rtrim, " " )
			});
			soFar = soFar.slice( matched.length );
		}

		// Filters
		for ( type in Expr.filter ) {
			if ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||
				(match = preFilters[ type ]( match ))) ) {
				matched = match.shift();
				tokens.push({
					value: matched,
					type: type,
					matches: match
				});
				soFar = soFar.slice( matched.length );
			}
		}

		if ( !matched ) {
			break;
		}
	}

	// Return the length of the invalid excess
	// if we're just parsing
	// Otherwise, throw an error or return tokens
	return parseOnly ?
		soFar.length :
		soFar ?
			Sizzle.error( selector ) :
			// Cache the tokens
			tokenCache( selector, groups ).slice( 0 );
}

function toSelector( tokens ) {
	var i = 0,
		len = tokens.length,
		selector = "";
	for ( ; i < len; i++ ) {
		selector += tokens[i].value;
	}
	return selector;
}

function addCombinator( matcher, combinator, base ) {
	var dir = combinator.dir,
		checkNonElements = base && dir === "parentNode",
		doneName = done++;

	return combinator.first ?
		// Check against closest ancestor/preceding element
		function( elem, context, xml ) {
			while ( (elem = elem[ dir ]) ) {
				if ( elem.nodeType === 1 || checkNonElements ) {
					return matcher( elem, context, xml );
				}
			}
		} :

		// Check against all ancestor/preceding elements
		function( elem, context, xml ) {
			var data, cache, outerCache,
				dirkey = dirruns + " " + doneName;

			// We can't set arbitrary data on XML nodes, so they don't benefit from dir caching
			if ( xml ) {
				while ( (elem = elem[ dir ]) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						if ( matcher( elem, context, xml ) ) {
							return true;
						}
					}
				}
			} else {
				while ( (elem = elem[ dir ]) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						outerCache = elem[ expando ] || (elem[ expando ] = {});
						if ( (cache = outerCache[ dir ]) && cache[0] === dirkey ) {
							if ( (data = cache[1]) === true || data === cachedruns ) {
								return data === true;
							}
						} else {
							cache = outerCache[ dir ] = [ dirkey ];
							cache[1] = matcher( elem, context, xml ) || cachedruns;
							if ( cache[1] === true ) {
								return true;
							}
						}
					}
				}
			}
		};
}

function elementMatcher( matchers ) {
	return matchers.length > 1 ?
		function( elem, context, xml ) {
			var i = matchers.length;
			while ( i-- ) {
				if ( !matchers[i]( elem, context, xml ) ) {
					return false;
				}
			}
			return true;
		} :
		matchers[0];
}

function condense( unmatched, map, filter, context, xml ) {
	var elem,
		newUnmatched = [],
		i = 0,
		len = unmatched.length,
		mapped = map != null;

	for ( ; i < len; i++ ) {
		if ( (elem = unmatched[i]) ) {
			if ( !filter || filter( elem, context, xml ) ) {
				newUnmatched.push( elem );
				if ( mapped ) {
					map.push( i );
				}
			}
		}
	}

	return newUnmatched;
}

function setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {
	if ( postFilter && !postFilter[ expando ] ) {
		postFilter = setMatcher( postFilter );
	}
	if ( postFinder && !postFinder[ expando ] ) {
		postFinder = setMatcher( postFinder, postSelector );
	}
	return markFunction(function( seed, results, context, xml ) {
		var temp, i, elem,
			preMap = [],
			postMap = [],
			preexisting = results.length,

			// Get initial elements from seed or context
			elems = seed || multipleContexts( selector || "*", context.nodeType ? [ context ] : context, [] ),

			// Prefilter to get matcher input, preserving a map for seed-results synchronization
			matcherIn = preFilter && ( seed || !selector ) ?
				condense( elems, preMap, preFilter, context, xml ) :
				elems,

			matcherOut = matcher ?
				// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,
				postFinder || ( seed ? preFilter : preexisting || postFilter ) ?

					// ...intermediate processing is necessary
					[] :

					// ...otherwise use results directly
					results :
				matcherIn;

		// Find primary matches
		if ( matcher ) {
			matcher( matcherIn, matcherOut, context, xml );
		}

		// Apply postFilter
		if ( postFilter ) {
			temp = condense( matcherOut, postMap );
			postFilter( temp, [], context, xml );

			// Un-match failing elements by moving them back to matcherIn
			i = temp.length;
			while ( i-- ) {
				if ( (elem = temp[i]) ) {
					matcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);
				}
			}
		}

		if ( seed ) {
			if ( postFinder || preFilter ) {
				if ( postFinder ) {
					// Get the final matcherOut by condensing this intermediate into postFinder contexts
					temp = [];
					i = matcherOut.length;
					while ( i-- ) {
						if ( (elem = matcherOut[i]) ) {
							// Restore matcherIn since elem is not yet a final match
							temp.push( (matcherIn[i] = elem) );
						}
					}
					postFinder( null, (matcherOut = []), temp, xml );
				}

				// Move matched elements from seed to results to keep them synchronized
				i = matcherOut.length;
				while ( i-- ) {
					if ( (elem = matcherOut[i]) &&
						(temp = postFinder ? indexOf.call( seed, elem ) : preMap[i]) > -1 ) {

						seed[temp] = !(results[temp] = elem);
					}
				}
			}

		// Add elements to results, through postFinder if defined
		} else {
			matcherOut = condense(
				matcherOut === results ?
					matcherOut.splice( preexisting, matcherOut.length ) :
					matcherOut
			);
			if ( postFinder ) {
				postFinder( null, results, matcherOut, xml );
			} else {
				push.apply( results, matcherOut );
			}
		}
	});
}

function matcherFromTokens( tokens ) {
	var checkContext, matcher, j,
		len = tokens.length,
		leadingRelative = Expr.relative[ tokens[0].type ],
		implicitRelative = leadingRelative || Expr.relative[" "],
		i = leadingRelative ? 1 : 0,

		// The foundational matcher ensures that elements are reachable from top-level context(s)
		matchContext = addCombinator( function( elem ) {
			return elem === checkContext;
		}, implicitRelative, true ),
		matchAnyContext = addCombinator( function( elem ) {
			return indexOf.call( checkContext, elem ) > -1;
		}, implicitRelative, true ),
		matchers = [ function( elem, context, xml ) {
			return ( !leadingRelative && ( xml || context !== outermostContext ) ) || (
				(checkContext = context).nodeType ?
					matchContext( elem, context, xml ) :
					matchAnyContext( elem, context, xml ) );
		} ];

	for ( ; i < len; i++ ) {
		if ( (matcher = Expr.relative[ tokens[i].type ]) ) {
			matchers = [ addCombinator(elementMatcher( matchers ), matcher) ];
		} else {
			matcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );

			// Return special upon seeing a positional matcher
			if ( matcher[ expando ] ) {
				// Find the next relative operator (if any) for proper handling
				j = ++i;
				for ( ; j < len; j++ ) {
					if ( Expr.relative[ tokens[j].type ] ) {
						break;
					}
				}
				return setMatcher(
					i > 1 && elementMatcher( matchers ),
					i > 1 && toSelector(
						// If the preceding token was a descendant combinator, insert an implicit any-element `*`
						tokens.slice( 0, i - 1 ).concat({ value: tokens[ i - 2 ].type === " " ? "*" : "" })
					).replace( rtrim, "$1" ),
					matcher,
					i < j && matcherFromTokens( tokens.slice( i, j ) ),
					j < len && matcherFromTokens( (tokens = tokens.slice( j )) ),
					j < len && toSelector( tokens )
				);
			}
			matchers.push( matcher );
		}
	}

	return elementMatcher( matchers );
}

function matcherFromGroupMatchers( elementMatchers, setMatchers ) {
	// A counter to specify which element is currently being matched
	var matcherCachedRuns = 0,
		bySet = setMatchers.length > 0,
		byElement = elementMatchers.length > 0,
		superMatcher = function( seed, context, xml, results, expandContext ) {
			var elem, j, matcher,
				setMatched = [],
				matchedCount = 0,
				i = "0",
				unmatched = seed && [],
				outermost = expandContext != null,
				contextBackup = outermostContext,
				// We must always have either seed elements or context
				elems = seed || byElement && Expr.find["TAG"]( "*", expandContext && context.parentNode || context ),
				// Use integer dirruns iff this is the outermost matcher
				dirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1);

			if ( outermost ) {
				outermostContext = context !== document && context;
				cachedruns = matcherCachedRuns;
			}

			// Add elements passing elementMatchers directly to results
			// Keep `i` a string if there are no elements so `matchedCount` will be "00" below
			for ( ; (elem = elems[i]) != null; i++ ) {
				if ( byElement && elem ) {
					j = 0;
					while ( (matcher = elementMatchers[j++]) ) {
						if ( matcher( elem, context, xml ) ) {
							results.push( elem );
							break;
						}
					}
					if ( outermost ) {
						dirruns = dirrunsUnique;
						cachedruns = ++matcherCachedRuns;
					}
				}

				// Track unmatched elements for set filters
				if ( bySet ) {
					// They will have gone through all possible matchers
					if ( (elem = !matcher && elem) ) {
						matchedCount--;
					}

					// Lengthen the array for every element, matched or not
					if ( seed ) {
						unmatched.push( elem );
					}
				}
			}

			// Apply set filters to unmatched elements
			matchedCount += i;
			if ( bySet && i !== matchedCount ) {
				j = 0;
				while ( (matcher = setMatchers[j++]) ) {
					matcher( unmatched, setMatched, context, xml );
				}

				if ( seed ) {
					// Reintegrate element matches to eliminate the need for sorting
					if ( matchedCount > 0 ) {
						while ( i-- ) {
							if ( !(unmatched[i] || setMatched[i]) ) {
								setMatched[i] = pop.call( results );
							}
						}
					}

					// Discard index placeholder values to get only actual matches
					setMatched = condense( setMatched );
				}

				// Add matches to results
				push.apply( results, setMatched );

				// Seedless set matches succeeding multiple successful matchers stipulate sorting
				if ( outermost && !seed && setMatched.length > 0 &&
					( matchedCount + setMatchers.length ) > 1 ) {

					Sizzle.uniqueSort( results );
				}
			}

			// Override manipulation of globals by nested matchers
			if ( outermost ) {
				dirruns = dirrunsUnique;
				outermostContext = contextBackup;
			}

			return unmatched;
		};

	return bySet ?
		markFunction( superMatcher ) :
		superMatcher;
}

compile = Sizzle.compile = function( selector, group /* Internal Use Only */ ) {
	var i,
		setMatchers = [],
		elementMatchers = [],
		cached = compilerCache[ selector + " " ];

	if ( !cached ) {
		// Generate a function of recursive functions that can be used to check each element
		if ( !group ) {
			group = tokenize( selector );
		}
		i = group.length;
		while ( i-- ) {
			cached = matcherFromTokens( group[i] );
			if ( cached[ expando ] ) {
				setMatchers.push( cached );
			} else {
				elementMatchers.push( cached );
			}
		}

		// Cache the compiled function
		cached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );
	}
	return cached;
};

function multipleContexts( selector, contexts, results ) {
	var i = 0,
		len = contexts.length;
	for ( ; i < len; i++ ) {
		Sizzle( selector, contexts[i], results );
	}
	return results;
}

function select( selector, context, results, seed ) {
	var i, tokens, token, type, find,
		match = tokenize( selector );

	if ( !seed ) {
		// Try to minimize operations if there is only one group
		if ( match.length === 1 ) {

			// Take a shortcut and set the context if the root selector is an ID
			tokens = match[0] = match[0].slice( 0 );
			if ( tokens.length > 2 && (token = tokens[0]).type === "ID" &&
					support.getById && context.nodeType === 9 && documentIsHTML &&
					Expr.relative[ tokens[1].type ] ) {

				context = ( Expr.find["ID"]( token.matches[0].replace(runescape, funescape), context ) || [] )[0];
				if ( !context ) {
					return results;
				}
				selector = selector.slice( tokens.shift().value.length );
			}

			// Fetch a seed set for right-to-left matching
			i = matchExpr["needsContext"].test( selector ) ? 0 : tokens.length;
			while ( i-- ) {
				token = tokens[i];

				// Abort if we hit a combinator
				if ( Expr.relative[ (type = token.type) ] ) {
					break;
				}
				if ( (find = Expr.find[ type ]) ) {
					// Search, expanding context for leading sibling combinators
					if ( (seed = find(
						token.matches[0].replace( runescape, funescape ),
						rsibling.test( tokens[0].type ) && context.parentNode || context
					)) ) {

						// If seed is empty or no tokens remain, we can return early
						tokens.splice( i, 1 );
						selector = seed.length && toSelector( tokens );
						if ( !selector ) {
							push.apply( results, seed );
							return results;
						}

						break;
					}
				}
			}
		}
	}

	// Compile and execute a filtering function
	// Provide `match` to avoid retokenization if we modified the selector above
	compile( selector, match )(
		seed,
		context,
		!documentIsHTML,
		results,
		rsibling.test( selector )
	);
	return results;
}

// Deprecated
Expr.pseudos["nth"] = Expr.pseudos["eq"];

// Easy API for creating new setFilters
function setFilters() {}
setFilters.prototype = Expr.filters = Expr.pseudos;
Expr.setFilters = new setFilters();

// One-time assignments

// Sort stability
support.sortStable = expando.split("").sort( sortOrder ).join("") === expando;

// Initialize against the default document
setDocument();

// Support: Chrome<<14
// Always assume duplicates if they aren't passed to the comparison function
[0, 0].sort( sortOrder );
support.detectDuplicates = hasDuplicate;

jQuery.find = Sizzle;
jQuery.expr = Sizzle.selectors;
jQuery.expr[":"] = jQuery.expr.pseudos;
jQuery.unique = Sizzle.uniqueSort;
jQuery.text = Sizzle.getText;
jQuery.isXMLDoc = Sizzle.isXML;
jQuery.contains = Sizzle.contains;


})( window );
// String to Object options format cache
var optionsCache = {};

// Convert String-formatted options into Object-formatted ones and store in cache
function createOptions( options ) {
	var object = optionsCache[ options ] = {};
	jQuery.each( options.match( core_rnotwhite ) || [], function( _, flag ) {
		object[ flag ] = true;
	});
	return object;
}

/*
 * Create a callback list using the following parameters:
 *
 *	options: an optional list of space-separated options that will change how
 *			the callback list behaves or a more traditional option object
 *
 * By default a callback list will act like an event callback list and can be
 * "fired" multiple times.
 *
 * Possible options:
 *
 *	once:			will ensure the callback list can only be fired once (like a Deferred)
 *
 *	memory:			will keep track of previous values and will call any callback added
 *					after the list has been fired right away with the latest "memorized"
 *					values (like a Deferred)
 *
 *	unique:			will ensure a callback can only be added once (no duplicate in the list)
 *
 *	stopOnFalse:	interrupt callings when a callback returns false
 *
 */
jQuery.Callbacks = function( options ) {

	// Convert options from String-formatted to Object-formatted if needed
	// (we check in cache first)
	options = typeof options === "string" ?
		( optionsCache[ options ] || createOptions( options ) ) :
		jQuery.extend( {}, options );

	var // Flag to know if list is currently firing
		firing,
		// Last fire value (for non-forgettable lists)
		memory,
		// Flag to know if list was already fired
		fired,
		// End of the loop when firing
		firingLength,
		// Index of currently firing callback (modified by remove if needed)
		firingIndex,
		// First callback to fire (used internally by add and fireWith)
		firingStart,
		// Actual callback list
		list = [],
		// Stack of fire calls for repeatable lists
		stack = !options.once && [],
		// Fire callbacks
		fire = function( data ) {
			memory = options.memory && data;
			fired = true;
			firingIndex = firingStart || 0;
			firingStart = 0;
			firingLength = list.length;
			firing = true;
			for ( ; list && firingIndex < firingLength; firingIndex++ ) {
				if ( list[ firingIndex ].apply( data[ 0 ], data[ 1 ] ) === false && options.stopOnFalse ) {
					memory = false; // To prevent further calls using add
					break;
				}
			}
			firing = false;
			if ( list ) {
				if ( stack ) {
					if ( stack.length ) {
						fire( stack.shift() );
					}
				} else if ( memory ) {
					list = [];
				} else {
					self.disable();
				}
			}
		},
		// Actual Callbacks object
		self = {
			// Add a callback or a collection of callbacks to the list
			add: function() {
				if ( list ) {
					// First, we save the current length
					var start = list.length;
					(function add( args ) {
						jQuery.each( args, function( _, arg ) {
							var type = jQuery.type( arg );
							if ( type === "function" ) {
								if ( !options.unique || !self.has( arg ) ) {
									list.push( arg );
								}
							} else if ( arg && arg.length && type !== "string" ) {
								// Inspect recursively
								add( arg );
							}
						});
					})( arguments );
					// Do we need to add the callbacks to the
					// current firing batch?
					if ( firing ) {
						firingLength = list.length;
					// With memory, if we're not firing then
					// we should call right away
					} else if ( memory ) {
						firingStart = start;
						fire( memory );
					}
				}
				return this;
			},
			// Remove a callback from the list
			remove: function() {
				if ( list ) {
					jQuery.each( arguments, function( _, arg ) {
						var index;
						while( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {
							list.splice( index, 1 );
							// Handle firing indexes
							if ( firing ) {
								if ( index <= firingLength ) {
									firingLength--;
								}
								if ( index <= firingIndex ) {
									firingIndex--;
								}
							}
						}
					});
				}
				return this;
			},
			// Check if a given callback is in the list.
			// If no argument is given, return whether or not list has callbacks attached.
			has: function( fn ) {
				return fn ? jQuery.inArray( fn, list ) > -1 : !!( list && list.length );
			},
			// Remove all callbacks from the list
			empty: function() {
				list = [];
				firingLength = 0;
				return this;
			},
			// Have the list do nothing anymore
			disable: function() {
				list = stack = memory = undefined;
				return this;
			},
			// Is it disabled?
			disabled: function() {
				return !list;
			},
			// Lock the list in its current state
			lock: function() {
				stack = undefined;
				if ( !memory ) {
					self.disable();
				}
				return this;
			},
			// Is it locked?
			locked: function() {
				return !stack;
			},
			// Call all callbacks with the given context and arguments
			fireWith: function( context, args ) {
				args = args || [];
				args = [ context, args.slice ? args.slice() : args ];
				if ( list && ( !fired || stack ) ) {
					if ( firing ) {
						stack.push( args );
					} else {
						fire( args );
					}
				}
				return this;
			},
			// Call all the callbacks with the given arguments
			fire: function() {
				self.fireWith( this, arguments );
				return this;
			},
			// To know if the callbacks have already been called at least once
			fired: function() {
				return !!fired;
			}
		};

	return self;
};
jQuery.extend({

	Deferred: function( func ) {
		var tuples = [
				// action, add listener, listener list, final state
				[ "resolve", "done", jQuery.Callbacks("once memory"), "resolved" ],
				[ "reject", "fail", jQuery.Callbacks("once memory"), "rejected" ],
				[ "notify", "progress", jQuery.Callbacks("memory") ]
			],
			state = "pending",
			promise = {
				state: function() {
					return state;
				},
				always: function() {
					deferred.done( arguments ).fail( arguments );
					return this;
				},
				then: function( /* fnDone, fnFail, fnProgress */ ) {
					var fns = arguments;
					return jQuery.Deferred(function( newDefer ) {
						jQuery.each( tuples, function( i, tuple ) {
							var action = tuple[ 0 ],
								fn = jQuery.isFunction( fns[ i ] ) && fns[ i ];
							// deferred[ done | fail | progress ] for forwarding actions to newDefer
							deferred[ tuple[1] ](function() {
								var returned = fn && fn.apply( this, arguments );
								if ( returned && jQuery.isFunction( returned.promise ) ) {
									returned.promise()
										.done( newDefer.resolve )
										.fail( newDefer.reject )
										.progress( newDefer.notify );
								} else {
									newDefer[ action + "With" ]( this === promise ? newDefer.promise() : this, fn ? [ returned ] : arguments );
								}
							});
						});
						fns = null;
					}).promise();
				},
				// Get a promise for this deferred
				// If obj is provided, the promise aspect is added to the object
				promise: function( obj ) {
					return obj != null ? jQuery.extend( obj, promise ) : promise;
				}
			},
			deferred = {};

		// Keep pipe for back-compat
		promise.pipe = promise.then;

		// Add list-specific methods
		jQuery.each( tuples, function( i, tuple ) {
			var list = tuple[ 2 ],
				stateString = tuple[ 3 ];

			// promise[ done | fail | progress ] = list.add
			promise[ tuple[1] ] = list.add;

			// Handle state
			if ( stateString ) {
				list.add(function() {
					// state = [ resolved | rejected ]
					state = stateString;

				// [ reject_list | resolve_list ].disable; progress_list.lock
				}, tuples[ i ^ 1 ][ 2 ].disable, tuples[ 2 ][ 2 ].lock );
			}

			// deferred[ resolve | reject | notify ]
			deferred[ tuple[0] ] = function() {
				deferred[ tuple[0] + "With" ]( this === deferred ? promise : this, arguments );
				return this;
			};
			deferred[ tuple[0] + "With" ] = list.fireWith;
		});

		// Make the deferred a promise
		promise.promise( deferred );

		// Call given func if any
		if ( func ) {
			func.call( deferred, deferred );
		}

		// All done!
		return deferred;
	},

	// Deferred helper
	when: function( subordinate /* , ..., subordinateN */ ) {
		var i = 0,
			resolveValues = core_slice.call( arguments ),
			length = resolveValues.length,

			// the count of uncompleted subordinates
			remaining = length !== 1 || ( subordinate && jQuery.isFunction( subordinate.promise ) ) ? length : 0,

			// the master Deferred. If resolveValues consist of only a single Deferred, just use that.
			deferred = remaining === 1 ? subordinate : jQuery.Deferred(),

			// Update function for both resolve and progress values
			updateFunc = function( i, contexts, values ) {
				return function( value ) {
					contexts[ i ] = this;
					values[ i ] = arguments.length > 1 ? core_slice.call( arguments ) : value;
					if( values === progressValues ) {
						deferred.notifyWith( contexts, values );
					} else if ( !( --remaining ) ) {
						deferred.resolveWith( contexts, values );
					}
				};
			},

			progressValues, progressContexts, resolveContexts;

		// add listeners to Deferred subordinates; treat others as resolved
		if ( length > 1 ) {
			progressValues = new Array( length );
			progressContexts = new Array( length );
			resolveContexts = new Array( length );
			for ( ; i < length; i++ ) {
				if ( resolveValues[ i ] && jQuery.isFunction( resolveValues[ i ].promise ) ) {
					resolveValues[ i ].promise()
						.done( updateFunc( i, resolveContexts, resolveValues ) )
						.fail( deferred.reject )
						.progress( updateFunc( i, progressContexts, progressValues ) );
				} else {
					--remaining;
				}
			}
		}

		// if we're not waiting on anything, resolve the master
		if ( !remaining ) {
			deferred.resolveWith( resolveContexts, resolveValues );
		}

		return deferred.promise();
	}
});
jQuery.support = (function( support ) {

	var all, a, input, select, fragment, opt, eventName, isSupported, i,
		div = document.createElement("div");

	// Setup
	div.setAttribute( "className", "t" );
	div.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";

	// Finish early in limited (non-browser) environments
	all = div.getElementsByTagName("*") || [];
	a = div.getElementsByTagName("a")[ 0 ];
	if ( !a || !a.style || !all.length ) {
		return support;
	}

	// First batch of tests
	select = document.createElement("select");
	opt = select.appendChild( document.createElement("option") );
	input = div.getElementsByTagName("input")[ 0 ];

	a.style.cssText = "top:1px;float:left;opacity:.5";

	// Test setAttribute on camelCase class. If it works, we need attrFixes when doing get/setAttribute (ie6/7)
	support.getSetAttribute = div.className !== "t";

	// IE strips leading whitespace when .innerHTML is used
	support.leadingWhitespace = div.firstChild.nodeType === 3;

	// Make sure that tbody elements aren't automatically inserted
	// IE will insert them into empty tables
	support.tbody = !div.getElementsByTagName("tbody").length;

	// Make sure that link elements get serialized correctly by innerHTML
	// This requires a wrapper element in IE
	support.htmlSerialize = !!div.getElementsByTagName("link").length;

	// Get the style information from getAttribute
	// (IE uses .cssText instead)
	support.style = /top/.test( a.getAttribute("style") );

	// Make sure that URLs aren't manipulated
	// (IE normalizes it by default)
	support.hrefNormalized = a.getAttribute("href") === "/a";

	// Make sure that element opacity exists
	// (IE uses filter instead)
	// Use a regex to work around a WebKit issue. See #5145
	support.opacity = /^0.5/.test( a.style.opacity );

	// Verify style float existence
	// (IE uses styleFloat instead of cssFloat)
	support.cssFloat = !!a.style.cssFloat;

	// Check the default checkbox/radio value ("" on WebKit; "on" elsewhere)
	support.checkOn = !!input.value;

	// Make sure that a selected-by-default option has a working selected property.
	// (WebKit defaults to false instead of true, IE too, if it's in an optgroup)
	support.optSelected = opt.selected;

	// Tests for enctype support on a form (#6743)
	support.enctype = !!document.createElement("form").enctype;

	// Makes sure cloning an html5 element does not cause problems
	// Where outerHTML is undefined, this still works
	support.html5Clone = document.createElement("nav").cloneNode( true ).outerHTML !== "<:nav></:nav>";

	// Will be defined later
	support.inlineBlockNeedsLayout = false;
	support.shrinkWrapBlocks = false;
	support.pixelPosition = false;
	support.deleteExpando = true;
	support.noCloneEvent = true;
	support.reliableMarginRight = true;
	support.boxSizingReliable = true;

	// Make sure checked status is properly cloned
	input.checked = true;
	support.noCloneChecked = input.cloneNode( true ).checked;

	// Make sure that the options inside disabled selects aren't marked as disabled
	// (WebKit marks them as disabled)
	select.disabled = true;
	support.optDisabled = !opt.disabled;

	// Support: IE<9
	try {
		delete div.test;
	} catch( e ) {
		support.deleteExpando = false;
	}

	// Check if we can trust getAttribute("value")
	input = document.createElement("input");
	input.setAttribute( "value", "" );
	support.input = input.getAttribute( "value" ) === "";

	// Check if an input maintains its value after becoming a radio
	input.value = "t";
	input.setAttribute( "type", "radio" );
	support.radioValue = input.value === "t";

	// #11217 - WebKit loses check when the name is after the checked attribute
	input.setAttribute( "checked", "t" );
	input.setAttribute( "name", "t" );

	fragment = document.createDocumentFragment();
	fragment.appendChild( input );

	// Check if a disconnected checkbox will retain its checked
	// value of true after appended to the DOM (IE6/7)
	support.appendChecked = input.checked;

	// WebKit doesn't clone checked state correctly in fragments
	support.checkClone = fragment.cloneNode( true ).cloneNode( true ).lastChild.checked;

	// Support: IE<9
	// Opera does not clone events (and typeof div.attachEvent === undefined).
	// IE9-10 clones events bound via attachEvent, but they don't trigger with .click()
	if ( div.attachEvent ) {
		div.attachEvent( "onclick", function() {
			support.noCloneEvent = false;
		});

		div.cloneNode( true ).click();
	}

	// Support: IE<9 (lack submit/change bubble), Firefox 17+ (lack focusin event)
	// Beware of CSP restrictions (https://developer.mozilla.org/en/Security/CSP)
	for ( i in { submit: true, change: true, focusin: true }) {
		div.setAttribute( eventName = "on" + i, "t" );

		support[ i + "Bubbles" ] = eventName in window || div.attributes[ eventName ].expando === false;
	}

	div.style.backgroundClip = "content-box";
	div.cloneNode( true ).style.backgroundClip = "";
	support.clearCloneStyle = div.style.backgroundClip === "content-box";

	// Support: IE<9
	// Iteration over object's inherited properties before its own.
	for ( i in jQuery( support ) ) {
		break;
	}
	support.ownLast = i !== "0";

	// Run tests that need a body at doc ready
	jQuery(function() {
		var container, marginDiv, tds,
			divReset = "padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",
			body = document.getElementsByTagName("body")[0];

		if ( !body ) {
			// Return for frameset docs that don't have a body
			return;
		}

		container = document.createElement("div");
		container.style.cssText = "border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px";

		body.appendChild( container ).appendChild( div );

		// Support: IE8
		// Check if table cells still have offsetWidth/Height when they are set
		// to display:none and there are still other visible table cells in a
		// table row; if so, offsetWidth/Height are not reliable for use when
		// determining if an element has been hidden directly using
		// display:none (it is still safe to use offsets if a parent element is
		// hidden; don safety goggles and see bug #4512 for more information).
		div.innerHTML = "<table><tr><td></td><td>t</td></tr></table>";
		tds = div.getElementsByTagName("td");
		tds[ 0 ].style.cssText = "padding:0;margin:0;border:0;display:none";
		isSupported = ( tds[ 0 ].offsetHeight === 0 );

		tds[ 0 ].style.display = "";
		tds[ 1 ].style.display = "none";

		// Support: IE8
		// Check if empty table cells still have offsetWidth/Height
		support.reliableHiddenOffsets = isSupported && ( tds[ 0 ].offsetHeight === 0 );

		// Check box-sizing and margin behavior.
		div.innerHTML = "";
		div.style.cssText = "box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";

		// Workaround failing boxSizing test due to offsetWidth returning wrong value
		// with some non-1 values of body zoom, ticket #13543
		jQuery.swap( body, body.style.zoom != null ? { zoom: 1 } : {}, function() {
			support.boxSizing = div.offsetWidth === 4;
		});

		// Use window.getComputedStyle because jsdom on node.js will break without it.
		if ( window.getComputedStyle ) {
			support.pixelPosition = ( window.getComputedStyle( div, null ) || {} ).top !== "1%";
			support.boxSizingReliable = ( window.getComputedStyle( div, null ) || { width: "4px" } ).width === "4px";

			// Check if div with explicit width and no margin-right incorrectly
			// gets computed margin-right based on width of container. (#3333)
			// Fails in WebKit before Feb 2011 nightlies
			// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right
			marginDiv = div.appendChild( document.createElement("div") );
			marginDiv.style.cssText = div.style.cssText = divReset;
			marginDiv.style.marginRight = marginDiv.style.width = "0";
			div.style.width = "1px";

			support.reliableMarginRight =
				!parseFloat( ( window.getComputedStyle( marginDiv, null ) || {} ).marginRight );
		}

		if ( typeof div.style.zoom !== core_strundefined ) {
			// Support: IE<8
			// Check if natively block-level elements act like inline-block
			// elements when setting their display to 'inline' and giving
			// them layout
			div.innerHTML = "";
			div.style.cssText = divReset + "width:1px;padding:1px;display:inline;zoom:1";
			support.inlineBlockNeedsLayout = ( div.offsetWidth === 3 );

			// Support: IE6
			// Check if elements with layout shrink-wrap their children
			div.style.display = "block";
			div.innerHTML = "<div></div>";
			div.firstChild.style.width = "5px";
			support.shrinkWrapBlocks = ( div.offsetWidth !== 3 );

			if ( support.inlineBlockNeedsLayout ) {
				// Prevent IE 6 from affecting layout for positioned elements #11048
				// Prevent IE from shrinking the body in IE 7 mode #12869
				// Support: IE<8
				body.style.zoom = 1;
			}
		}

		body.removeChild( container );

		// Null elements to avoid leaks in IE
		container = div = tds = marginDiv = null;
	});

	// Null elements to avoid leaks in IE
	all = select = fragment = opt = a = input = null;

	return support;
})({});

var rbrace = /(?:\{[\s\S]*\}|\[[\s\S]*\])$/,
	rmultiDash = /([A-Z])/g;

function internalData( elem, name, data, pvt /* Internal Use Only */ ){
	if ( !jQuery.acceptData( elem ) ) {
		return;
	}

	var ret, thisCache,
		internalKey = jQuery.expando,

		// We have to handle DOM nodes and JS objects differently because IE6-7
		// can't GC object references properly across the DOM-JS boundary
		isNode = elem.nodeType,

		// Only DOM nodes need the global jQuery cache; JS object data is
		// attached directly to the object so GC can occur automatically
		cache = isNode ? jQuery.cache : elem,

		// Only defining an ID for JS objects if its cache already exists allows
		// the code to shortcut on the same path as a DOM node with no cache
		id = isNode ? elem[ internalKey ] : elem[ internalKey ] && internalKey;

	// Avoid doing any more work than we need to when trying to get data on an
	// object that has no data at all
	if ( (!id || !cache[id] || (!pvt && !cache[id].data)) && data === undefined && typeof name === "string" ) {
		return;
	}

	if ( !id ) {
		// Only DOM nodes need a new unique ID for each element since their data
		// ends up in the global cache
		if ( isNode ) {
			id = elem[ internalKey ] = core_deletedIds.pop() || jQuery.guid++;
		} else {
			id = internalKey;
		}
	}

	if ( !cache[ id ] ) {
		// Avoid exposing jQuery metadata on plain JS objects when the object
		// is serialized using JSON.stringify
		cache[ id ] = isNode ? {} : { toJSON: jQuery.noop };
	}

	// An object can be passed to jQuery.data instead of a key/value pair; this gets
	// shallow copied over onto the existing cache
	if ( typeof name === "object" || typeof name === "function" ) {
		if ( pvt ) {
			cache[ id ] = jQuery.extend( cache[ id ], name );
		} else {
			cache[ id ].data = jQuery.extend( cache[ id ].data, name );
		}
	}

	thisCache = cache[ id ];

	// jQuery data() is stored in a separate object inside the object's internal data
	// cache in order to avoid key collisions between internal data and user-defined
	// data.
	if ( !pvt ) {
		if ( !thisCache.data ) {
			thisCache.data = {};
		}

		thisCache = thisCache.data;
	}

	if ( data !== undefined ) {
		thisCache[ jQuery.camelCase( name ) ] = data;
	}

	// Check for both converted-to-camel and non-converted data property names
	// If a data property was specified
	if ( typeof name === "string" ) {

		// First Try to find as-is property data
		ret = thisCache[ name ];

		// Test for null|undefined property data
		if ( ret == null ) {

			// Try to find the camelCased property
			ret = thisCache[ jQuery.camelCase( name ) ];
		}
	} else {
		ret = thisCache;
	}

	return ret;
}

function internalRemoveData( elem, name, pvt ) {
	if ( !jQuery.acceptData( elem ) ) {
		return;
	}

	var thisCache, i,
		isNode = elem.nodeType,

		// See jQuery.data for more information
		cache = isNode ? jQuery.cache : elem,
		id = isNode ? elem[ jQuery.expando ] : jQuery.expando;

	// If there is already no cache entry for this object, there is no
	// purpose in continuing
	if ( !cache[ id ] ) {
		return;
	}

	if ( name ) {

		thisCache = pvt ? cache[ id ] : cache[ id ].data;

		if ( thisCache ) {

			// Support array or space separated string names for data keys
			if ( !jQuery.isArray( name ) ) {

				// try the string as a key before any manipulation
				if ( name in thisCache ) {
					name = [ name ];
				} else {

					// split the camel cased version by spaces unless a key with the spaces exists
					name = jQuery.camelCase( name );
					if ( name in thisCache ) {
						name = [ name ];
					} else {
						name = name.split(" ");
					}
				}
			} else {
				// If "name" is an array of keys...
				// When data is initially created, via ("key", "val") signature,
				// keys will be converted to camelCase.
				// Since there is no way to tell _how_ a key was added, remove
				// both plain key and camelCase key. #12786
				// This will only penalize the array argument path.
				name = name.concat( jQuery.map( name, jQuery.camelCase ) );
			}

			i = name.length;
			while ( i-- ) {
				delete thisCache[ name[i] ];
			}

			// If there is no data left in the cache, we want to continue
			// and let the cache object itself get destroyed
			if ( pvt ? !isEmptyDataObject(thisCache) : !jQuery.isEmptyObject(thisCache) ) {
				return;
			}
		}
	}

	// See jQuery.data for more information
	if ( !pvt ) {
		delete cache[ id ].data;

		// Don't destroy the parent cache unless the internal data object
		// had been the only thing left in it
		if ( !isEmptyDataObject( cache[ id ] ) ) {
			return;
		}
	}

	// Destroy the cache
	if ( isNode ) {
		jQuery.cleanData( [ elem ], true );

	// Use delete when supported for expandos or `cache` is not a window per isWindow (#10080)
	/* jshint eqeqeq: false */
	} else if ( jQuery.support.deleteExpando || cache != cache.window ) {
		/* jshint eqeqeq: true */
		delete cache[ id ];

	// When all else fails, null
	} else {
		cache[ id ] = null;
	}
}

jQuery.extend({
	cache: {},

	// The following elements throw uncatchable exceptions if you
	// attempt to add expando properties to them.
	noData: {
		"applet": true,
		"embed": true,
		// Ban all objects except for Flash (which handle expandos)
		"object": "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
	},

	hasData: function( elem ) {
		elem = elem.nodeType ? jQuery.cache[ elem[jQuery.expando] ] : elem[ jQuery.expando ];
		return !!elem && !isEmptyDataObject( elem );
	},

	data: function( elem, name, data ) {
		return internalData( elem, name, data );
	},

	removeData: function( elem, name ) {
		return internalRemoveData( elem, name );
	},

	// For internal use only.
	_data: function( elem, name, data ) {
		return internalData( elem, name, data, true );
	},

	_removeData: function( elem, name ) {
		return internalRemoveData( elem, name, true );
	},

	// A method for determining if a DOM node can handle the data expando
	acceptData: function( elem ) {
		// Do not set data on non-element because it will not be cleared (#8335).
		if ( elem.nodeType && elem.nodeType !== 1 && elem.nodeType !== 9 ) {
			return false;
		}

		var noData = elem.nodeName && jQuery.noData[ elem.nodeName.toLowerCase() ];

		// nodes accept data unless otherwise specified; rejection can be conditional
		return !noData || noData !== true && elem.getAttribute("classid") === noData;
	}
});

jQuery.fn.extend({
	data: function( key, value ) {
		var attrs, name,
			data = null,
			i = 0,
			elem = this[0];

		// Special expections of .data basically thwart jQuery.access,
		// so implement the relevant behavior ourselves

		// Gets all values
		if ( key === undefined ) {
			if ( this.length ) {
				data = jQuery.data( elem );

				if ( elem.nodeType === 1 && !jQuery._data( elem, "parsedAttrs" ) ) {
					attrs = elem.attributes;
					for ( ; i < attrs.length; i++ ) {
						name = attrs[i].name;

						if ( name.indexOf("data-") === 0 ) {
							name = jQuery.camelCase( name.slice(5) );

							dataAttr( elem, name, data[ name ] );
						}
					}
					jQuery._data( elem, "parsedAttrs", true );
				}
			}

			return data;
		}

		// Sets multiple values
		if ( typeof key === "object" ) {
			return this.each(function() {
				jQuery.data( this, key );
			});
		}

		return arguments.length > 1 ?

			// Sets one value
			this.each(function() {
				jQuery.data( this, key, value );
			}) :

			// Gets one value
			// Try to fetch any internally stored data first
			elem ? dataAttr( elem, key, jQuery.data( elem, key ) ) : null;
	},

	removeData: function( key ) {
		return this.each(function() {
			jQuery.removeData( this, key );
		});
	}
});

function dataAttr( elem, key, data ) {
	// If nothing was found internally, try to fetch any
	// data from the HTML5 data-* attribute
	if ( data === undefined && elem.nodeType === 1 ) {

		var name = "data-" + key.replace( rmultiDash, "-$1" ).toLowerCase();

		data = elem.getAttribute( name );

		if ( typeof data === "string" ) {
			try {
				data = data === "true" ? true :
					data === "false" ? false :
					data === "null" ? null :
					// Only convert to a number if it doesn't change the string
					+data + "" === data ? +data :
					rbrace.test( data ) ? jQuery.parseJSON( data ) :
						data;
			} catch( e ) {}

			// Make sure we set the data so it isn't changed later
			jQuery.data( elem, key, data );

		} else {
			data = undefined;
		}
	}

	return data;
}

// checks a cache object for emptiness
function isEmptyDataObject( obj ) {
	var name;
	for ( name in obj ) {

		// if the public data object is empty, the private is still empty
		if ( name === "data" && jQuery.isEmptyObject( obj[name] ) ) {
			continue;
		}
		if ( name !== "toJSON" ) {
			return false;
		}
	}

	return true;
}
jQuery.extend({
	queue: function( elem, type, data ) {
		var queue;

		if ( elem ) {
			type = ( type || "fx" ) + "queue";
			queue = jQuery._data( elem, type );

			// Speed up dequeue by getting out quickly if this is just a lookup
			if ( data ) {
				if ( !queue || jQuery.isArray(data) ) {
					queue = jQuery._data( elem, type, jQuery.makeArray(data) );
				} else {
					queue.push( data );
				}
			}
			return queue || [];
		}
	},

	dequeue: function( elem, type ) {
		type = type || "fx";

		var queue = jQuery.queue( elem, type ),
			startLength = queue.length,
			fn = queue.shift(),
			hooks = jQuery._queueHooks( elem, type ),
			next = function() {
				jQuery.dequeue( elem, type );
			};

		// If the fx queue is dequeued, always remove the progress sentinel
		if ( fn === "inprogress" ) {
			fn = queue.shift();
			startLength--;
		}

		hooks.cur = fn;
		if ( fn ) {

			// Add a progress sentinel to prevent the fx queue from being
			// automatically dequeued
			if ( type === "fx" ) {
				queue.unshift( "inprogress" );
			}

			// clear up the last queue stop function
			delete hooks.stop;
			fn.call( elem, next, hooks );
		}

		if ( !startLength && hooks ) {
			hooks.empty.fire();
		}
	},

	// not intended for public consumption - generates a queueHooks object, or returns the current one
	_queueHooks: function( elem, type ) {
		var key = type + "queueHooks";
		return jQuery._data( elem, key ) || jQuery._data( elem, key, {
			empty: jQuery.Callbacks("once memory").add(function() {
				jQuery._removeData( elem, type + "queue" );
				jQuery._removeData( elem, key );
			})
		});
	}
});

jQuery.fn.extend({
	queue: function( type, data ) {
		var setter = 2;

		if ( typeof type !== "string" ) {
			data = type;
			type = "fx";
			setter--;
		}

		if ( arguments.length < setter ) {
			return jQuery.queue( this[0], type );
		}

		return data === undefined ?
			this :
			this.each(function() {
				var queue = jQuery.queue( this, type, data );

				// ensure a hooks for this queue
				jQuery._queueHooks( this, type );

				if ( type === "fx" && queue[0] !== "inprogress" ) {
					jQuery.dequeue( this, type );
				}
			});
	},
	dequeue: function( type ) {
		return this.each(function() {
			jQuery.dequeue( this, type );
		});
	},
	// Based off of the plugin by Clint Helfers, with permission.
	// http://blindsignals.com/index.php/2009/07/jquery-delay/
	delay: function( time, type ) {
		time = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;
		type = type || "fx";

		return this.queue( type, function( next, hooks ) {
			var timeout = setTimeout( next, time );
			hooks.stop = function() {
				clearTimeout( timeout );
			};
		});
	},
	clearQueue: function( type ) {
		return this.queue( type || "fx", [] );
	},
	// Get a promise resolved when queues of a certain type
	// are emptied (fx is the type by default)
	promise: function( type, obj ) {
		var tmp,
			count = 1,
			defer = jQuery.Deferred(),
			elements = this,
			i = this.length,
			resolve = function() {
				if ( !( --count ) ) {
					defer.resolveWith( elements, [ elements ] );
				}
			};

		if ( typeof type !== "string" ) {
			obj = type;
			type = undefined;
		}
		type = type || "fx";

		while( i-- ) {
			tmp = jQuery._data( elements[ i ], type + "queueHooks" );
			if ( tmp && tmp.empty ) {
				count++;
				tmp.empty.add( resolve );
			}
		}
		resolve();
		return defer.promise( obj );
	}
});
var nodeHook, boolHook,
	rclass = /[\t\r\n\f]/g,
	rreturn = /\r/g,
	rfocusable = /^(?:input|select|textarea|button|object)$/i,
	rclickable = /^(?:a|area)$/i,
	ruseDefault = /^(?:checked|selected)$/i,
	getSetAttribute = jQuery.support.getSetAttribute,
	getSetInput = jQuery.support.input;

jQuery.fn.extend({
	attr: function( name, value ) {
		return jQuery.access( this, jQuery.attr, name, value, arguments.length > 1 );
	},

	removeAttr: function( name ) {
		return this.each(function() {
			jQuery.removeAttr( this, name );
		});
	},

	prop: function( name, value ) {
		return jQuery.access( this, jQuery.prop, name, value, arguments.length > 1 );
	},

	removeProp: function( name ) {
		name = jQuery.propFix[ name ] || name;
		return this.each(function() {
			// try/catch handles cases where IE balks (such as removing a property on window)
			try {
				this[ name ] = undefined;
				delete this[ name ];
			} catch( e ) {}
		});
	},

	addClass: function( value ) {
		var classes, elem, cur, clazz, j,
			i = 0,
			len = this.length,
			proceed = typeof value === "string" && value;

		if ( jQuery.isFunction( value ) ) {
			return this.each(function( j ) {
				jQuery( this ).addClass( value.call( this, j, this.className ) );
			});
		}

		if ( proceed ) {
			// The disjunction here is for better compressibility (see removeClass)
			classes = ( value || "" ).match( core_rnotwhite ) || [];

			for ( ; i < len; i++ ) {
				elem = this[ i ];
				cur = elem.nodeType === 1 && ( elem.className ?
					( " " + elem.className + " " ).replace( rclass, " " ) :
					" "
				);

				if ( cur ) {
					j = 0;
					while ( (clazz = classes[j++]) ) {
						if ( cur.indexOf( " " + clazz + " " ) < 0 ) {
							cur += clazz + " ";
						}
					}
					elem.className = jQuery.trim( cur );

				}
			}
		}

		return this;
	},

	removeClass: function( value ) {
		var classes, elem, cur, clazz, j,
			i = 0,
			len = this.length,
			proceed = arguments.length === 0 || typeof value === "string" && value;

		if ( jQuery.isFunction( value ) ) {
			return this.each(function( j ) {
				jQuery( this ).removeClass( value.call( this, j, this.className ) );
			});
		}
		if ( proceed ) {
			classes = ( value || "" ).match( core_rnotwhite ) || [];

			for ( ; i < len; i++ ) {
				elem = this[ i ];
				// This expression is here for better compressibility (see addClass)
				cur = elem.nodeType === 1 && ( elem.className ?
					( " " + elem.className + " " ).replace( rclass, " " ) :
					""
				);

				if ( cur ) {
					j = 0;
					while ( (clazz = classes[j++]) ) {
						// Remove *all* instances
						while ( cur.indexOf( " " + clazz + " " ) >= 0 ) {
							cur = cur.replace( " " + clazz + " ", " " );
						}
					}
					elem.className = value ? jQuery.trim( cur ) : "";
				}
			}
		}

		return this;
	},

	toggleClass: function( value, stateVal ) {
		var type = typeof value,
			isBool = typeof stateVal === "boolean";

		if ( jQuery.isFunction( value ) ) {
			return this.each(function( i ) {
				jQuery( this ).toggleClass( value.call(this, i, this.className, stateVal), stateVal );
			});
		}

		return this.each(function() {
			if ( type === "string" ) {
				// toggle individual class names
				var className,
					i = 0,
					self = jQuery( this ),
					state = stateVal,
					classNames = value.match( core_rnotwhite ) || [];

				while ( (className = classNames[ i++ ]) ) {
					// check each className given, space separated list
					state = isBool ? state : !self.hasClass( className );
					self[ state ? "addClass" : "removeClass" ]( className );
				}

			// Toggle whole class name
			} else if ( type === core_strundefined || type === "boolean" ) {
				if ( this.className ) {
					// store className if set
					jQuery._data( this, "__className__", this.className );
				}

				// If the element has a class name or if we're passed "false",
				// then remove the whole classname (if there was one, the above saved it).
				// Otherwise bring back whatever was previously saved (if anything),
				// falling back to the empty string if nothing was stored.
				this.className = this.className || value === false ? "" : jQuery._data( this, "__className__" ) || "";
			}
		});
	},

	hasClass: function( selector ) {
		var className = " " + selector + " ",
			i = 0,
			l = this.length;
		for ( ; i < l; i++ ) {
			if ( this[i].nodeType === 1 && (" " + this[i].className + " ").replace(rclass, " ").indexOf( className ) >= 0 ) {
				return true;
			}
		}

		return false;
	},

	val: function( value ) {
		var ret, hooks, isFunction,
			elem = this[0];

		if ( !arguments.length ) {
			if ( elem ) {
				hooks = jQuery.valHooks[ elem.type ] || jQuery.valHooks[ elem.nodeName.toLowerCase() ];

				if ( hooks && "get" in hooks && (ret = hooks.get( elem, "value" )) !== undefined ) {
					return ret;
				}

				ret = elem.value;

				return typeof ret === "string" ?
					// handle most common string cases
					ret.replace(rreturn, "") :
					// handle cases where value is null/undef or number
					ret == null ? "" : ret;
			}

			return;
		}

		isFunction = jQuery.isFunction( value );

		return this.each(function( i ) {
			var val;

			if ( this.nodeType !== 1 ) {
				return;
			}

			if ( isFunction ) {
				val = value.call( this, i, jQuery( this ).val() );
			} else {
				val = value;
			}

			// Treat null/undefined as ""; convert numbers to string
			if ( val == null ) {
				val = "";
			} else if ( typeof val === "number" ) {
				val += "";
			} else if ( jQuery.isArray( val ) ) {
				val = jQuery.map(val, function ( value ) {
					return value == null ? "" : value + "";
				});
			}

			hooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];

			// If set returns undefined, fall back to normal setting
			if ( !hooks || !("set" in hooks) || hooks.set( this, val, "value" ) === undefined ) {
				this.value = val;
			}
		});
	}
});

jQuery.extend({
	valHooks: {
		option: {
			get: function( elem ) {
				// Use proper attribute retrieval(#6932, #12072)
				var val = jQuery.find.attr( elem, "value" );
				return val != null ?
					val :
					elem.text;
			}
		},
		select: {
			get: function( elem ) {
				var value, option,
					options = elem.options,
					index = elem.selectedIndex,
					one = elem.type === "select-one" || index < 0,
					values = one ? null : [],
					max = one ? index + 1 : options.length,
					i = index < 0 ?
						max :
						one ? index : 0;

				// Loop through all the selected options
				for ( ; i < max; i++ ) {
					option = options[ i ];

					// oldIE doesn't update selected after form reset (#2551)
					if ( ( option.selected || i === index ) &&
							// Don't return options that are disabled or in a disabled optgroup
							( jQuery.support.optDisabled ? !option.disabled : option.getAttribute("disabled") === null ) &&
							( !option.parentNode.disabled || !jQuery.nodeName( option.parentNode, "optgroup" ) ) ) {

						// Get the specific value for the option
						value = jQuery( option ).val();

						// We don't need an array for one selects
						if ( one ) {
							return value;
						}

						// Multi-Selects return an array
						values.push( value );
					}
				}

				return values;
			},

			set: function( elem, value ) {
				var optionSet, option,
					options = elem.options,
					values = jQuery.makeArray( value ),
					i = options.length;

				while ( i-- ) {
					option = options[ i ];
					if ( (option.selected = jQuery.inArray( jQuery(option).val(), values ) >= 0) ) {
						optionSet = true;
					}
				}

				// force browsers to behave consistently when non-matching value is set
				if ( !optionSet ) {
					elem.selectedIndex = -1;
				}
				return values;
			}
		}
	},

	attr: function( elem, name, value ) {
		var hooks, ret,
			nType = elem.nodeType;

		// don't get/set attributes on text, comment and attribute nodes
		if ( !elem || nType === 3 || nType === 8 || nType === 2 ) {
			return;
		}

		// Fallback to prop when attributes are not supported
		if ( typeof elem.getAttribute === core_strundefined ) {
			return jQuery.prop( elem, name, value );
		}

		// All attributes are lowercase
		// Grab necessary hook if one is defined
		if ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {
			name = name.toLowerCase();
			hooks = jQuery.attrHooks[ name ] ||
				( jQuery.expr.match.bool.test( name ) ? boolHook : nodeHook );
		}

		if ( value !== undefined ) {

			if ( value === null ) {
				jQuery.removeAttr( elem, name );

			} else if ( hooks && "set" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ) {
				return ret;

			} else {
				elem.setAttribute( name, value + "" );
				return value;
			}

		} else if ( hooks && "get" in hooks && (ret = hooks.get( elem, name )) !== null ) {
			return ret;

		} else {
			ret = jQuery.find.attr( elem, name );

			// Non-existent attributes return null, we normalize to undefined
			return ret == null ?
				undefined :
				ret;
		}
	},

	removeAttr: function( elem, value ) {
		var name, propName,
			i = 0,
			attrNames = value && value.match( core_rnotwhite );

		if ( attrNames && elem.nodeType === 1 ) {
			while ( (name = attrNames[i++]) ) {
				propName = jQuery.propFix[ name ] || name;

				// Boolean attributes get special treatment (#10870)
				if ( jQuery.expr.match.bool.test( name ) ) {
					// Set corresponding property to false
					if ( getSetInput && getSetAttribute || !ruseDefault.test( name ) ) {
						elem[ propName ] = false;
					// Support: IE<9
					// Also clear defaultChecked/defaultSelected (if appropriate)
					} else {
						elem[ jQuery.camelCase( "default-" + name ) ] =
							elem[ propName ] = false;
					}

				// See #9699 for explanation of this approach (setting first, then removal)
				} else {
					jQuery.attr( elem, name, "" );
				}

				elem.removeAttribute( getSetAttribute ? name : propName );
			}
		}
	},

	attrHooks: {
		type: {
			set: function( elem, value ) {
				if ( !jQuery.support.radioValue && value === "radio" && jQuery.nodeName(elem, "input") ) {
					// Setting the type on a radio button after the value resets the value in IE6-9
					// Reset value to default in case type is set after value during creation
					var val = elem.value;
					elem.setAttribute( "type", value );
					if ( val ) {
						elem.value = val;
					}
					return value;
				}
			}
		}
	},

	propFix: {
		"for": "htmlFor",
		"class": "className"
	},

	prop: function( elem, name, value ) {
		var ret, hooks, notxml,
			nType = elem.nodeType;

		// don't get/set properties on text, comment and attribute nodes
		if ( !elem || nType === 3 || nType === 8 || nType === 2 ) {
			return;
		}

		notxml = nType !== 1 || !jQuery.isXMLDoc( elem );

		if ( notxml ) {
			// Fix name and attach hooks
			name = jQuery.propFix[ name ] || name;
			hooks = jQuery.propHooks[ name ];
		}

		if ( value !== undefined ) {
			return hooks && "set" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ?
				ret :
				( elem[ name ] = value );

		} else {
			return hooks && "get" in hooks && (ret = hooks.get( elem, name )) !== null ?
				ret :
				elem[ name ];
		}
	},

	propHooks: {
		tabIndex: {
			get: function( elem ) {
				// elem.tabIndex doesn't always return the correct value when it hasn't been explicitly set
				// http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/
				// Use proper attribute retrieval(#12072)
				var tabindex = jQuery.find.attr( elem, "tabindex" );

				return tabindex ?
					parseInt( tabindex, 10 ) :
					rfocusable.test( elem.nodeName ) || rclickable.test( elem.nodeName ) && elem.href ?
						0 :
						-1;
			}
		}
	}
});

// Hooks for boolean attributes
boolHook = {
	set: function( elem, value, name ) {
		if ( value === false ) {
			// Remove boolean attributes when set to false
			jQuery.removeAttr( elem, name );
		} else if ( getSetInput && getSetAttribute || !ruseDefault.test( name ) ) {
			// IE<8 needs the *property* name
			elem.setAttribute( !getSetAttribute && jQuery.propFix[ name ] || name, name );

		// Use defaultChecked and defaultSelected for oldIE
		} else {
			elem[ jQuery.camelCase( "default-" + name ) ] = elem[ name ] = true;
		}

		return name;
	}
};
jQuery.each( jQuery.expr.match.bool.source.match( /\w+/g ), function( i, name ) {
	var getter = jQuery.expr.attrHandle[ name ] || jQuery.find.attr;

	jQuery.expr.attrHandle[ name ] = getSetInput && getSetAttribute || !ruseDefault.test( name ) ?
		function( elem, name, isXML ) {
			var fn = jQuery.expr.attrHandle[ name ],
				ret = isXML ?
					undefined :
					/* jshint eqeqeq: false */
					(jQuery.expr.attrHandle[ name ] = undefined) !=
						getter( elem, name, isXML ) ?

						name.toLowerCase() :
						null;
			jQuery.expr.attrHandle[ name ] = fn;
			return ret;
		} :
		function( elem, name, isXML ) {
			return isXML ?
				undefined :
				elem[ jQuery.camelCase( "default-" + name ) ] ?
					name.toLowerCase() :
					null;
		};
});

// fix oldIE attroperties
if ( !getSetInput || !getSetAttribute ) {
	jQuery.attrHooks.value = {
		set: function( elem, value, name ) {
			if ( jQuery.nodeName( elem, "input" ) ) {
				// Does not return so that setAttribute is also used
				elem.defaultValue = value;
			} else {
				// Use nodeHook if defined (#1954); otherwise setAttribute is fine
				return nodeHook && nodeHook.set( elem, value, name );
			}
		}
	};
}

// IE6/7 do not support getting/setting some attributes with get/setAttribute
if ( !getSetAttribute ) {

	// Use this for any attribute in IE6/7
	// This fixes almost every IE6/7 issue
	nodeHook = {
		set: function( elem, value, name ) {
			// Set the existing or create a new attribute node
			var ret = elem.getAttributeNode( name );
			if ( !ret ) {
				elem.setAttributeNode(
					(ret = elem.ownerDocument.createAttribute( name ))
				);
			}

			ret.value = value += "";

			// Break association with cloned elements by also using setAttribute (#9646)
			return name === "value" || value === elem.getAttribute( name ) ?
				value :
				undefined;
		}
	};
	jQuery.expr.attrHandle.id = jQuery.expr.attrHandle.name = jQuery.expr.attrHandle.coords =
		// Some attributes are constructed with empty-string values when not defined
		function( elem, name, isXML ) {
			var ret;
			return isXML ?
				undefined :
				(ret = elem.getAttributeNode( name )) && ret.value !== "" ?
					ret.value :
					null;
		};
	jQuery.valHooks.button = {
		get: function( elem, name ) {
			var ret = elem.getAttributeNode( name );
			return ret && ret.specified ?
				ret.value :
				undefined;
		},
		set: nodeHook.set
	};

	// Set contenteditable to false on removals(#10429)
	// Setting to empty string throws an error as an invalid value
	jQuery.attrHooks.contenteditable = {
		set: function( elem, value, name ) {
			nodeHook.set( elem, value === "" ? false : value, name );
		}
	};

	// Set width and height to auto instead of 0 on empty string( Bug #8150 )
	// This is for removals
	jQuery.each([ "width", "height" ], function( i, name ) {
		jQuery.attrHooks[ name ] = {
			set: function( elem, value ) {
				if ( value === "" ) {
					elem.setAttribute( name, "auto" );
					return value;
				}
			}
		};
	});
}


// Some attributes require a special call on IE
// http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx
if ( !jQuery.support.hrefNormalized ) {
	// href/src property should get the full normalized URL (#10299/#12915)
	jQuery.each([ "href", "src" ], function( i, name ) {
		jQuery.propHooks[ name ] = {
			get: function( elem ) {
				return elem.getAttribute( name, 4 );
			}
		};
	});
}

if ( !jQuery.support.style ) {
	jQuery.attrHooks.style = {
		get: function( elem ) {
			// Return undefined in the case of empty string
			// Note: IE uppercases css property names, but if we were to .toLowerCase()
			// .cssText, that would destroy case senstitivity in URL's, like in "background"
			return elem.style.cssText || undefined;
		},
		set: function( elem, value ) {
			return ( elem.style.cssText = value + "" );
		}
	};
}

// Safari mis-reports the default selected property of an option
// Accessing the parent's selectedIndex property fixes it
if ( !jQuery.support.optSelected ) {
	jQuery.propHooks.selected = {
		get: function( elem ) {
			var parent = elem.parentNode;

			if ( parent ) {
				parent.selectedIndex;

				// Make sure that it also works with optgroups, see #5701
				if ( parent.parentNode ) {
					parent.parentNode.selectedIndex;
				}
			}
			return null;
		}
	};
}

jQuery.each([
	"tabIndex",
	"readOnly",
	"maxLength",
	"cellSpacing",
	"cellPadding",
	"rowSpan",
	"colSpan",
	"useMap",
	"frameBorder",
	"contentEditable"
], function() {
	jQuery.propFix[ this.toLowerCase() ] = this;
});

// IE6/7 call enctype encoding
if ( !jQuery.support.enctype ) {
	jQuery.propFix.enctype = "encoding";
}

// Radios and checkboxes getter/setter
jQuery.each([ "radio", "checkbox" ], function() {
	jQuery.valHooks[ this ] = {
		set: function( elem, value ) {
			if ( jQuery.isArray( value ) ) {
				return ( elem.checked = jQuery.inArray( jQuery(elem).val(), value ) >= 0 );
			}
		}
	};
	if ( !jQuery.support.checkOn ) {
		jQuery.valHooks[ this ].get = function( elem ) {
			// Support: Webkit
			// "" is returned instead of "on" if a value isn't specified
			return elem.getAttribute("value") === null ? "on" : elem.value;
		};
	}
});
var rformElems = /^(?:input|select|textarea)$/i,
	rkeyEvent = /^key/,
	rmouseEvent = /^(?:mouse|contextmenu)|click/,
	rfocusMorph = /^(?:focusinfocus|focusoutblur)$/,
	rtypenamespace = /^([^.]*)(?:\.(.+)|)$/;

function returnTrue() {
	return true;
}

function returnFalse() {
	return false;
}

function safeActiveElement() {
	try {
		return document.activeElement;
	} catch ( err ) { }
}

/*
 * Helper functions for managing events -- not part of the public interface.
 * Props to Dean Edwards' addEvent library for many of the ideas.
 */
jQuery.event = {

	global: {},

	add: function( elem, types, handler, data, selector ) {
		var tmp, events, t, handleObjIn,
			special, eventHandle, handleObj,
			handlers, type, namespaces, origType,
			elemData = jQuery._data( elem );

		// Don't attach events to noData or text/comment nodes (but allow plain objects)
		if ( !elemData ) {
			return;
		}

		// Caller can pass in an object of custom data in lieu of the handler
		if ( handler.handler ) {
			handleObjIn = handler;
			handler = handleObjIn.handler;
			selector = handleObjIn.selector;
		}

		// Make sure that the handler has a unique ID, used to find/remove it later
		if ( !handler.guid ) {
			handler.guid = jQuery.guid++;
		}

		// Init the element's event structure and main handler, if this is the first
		if ( !(events = elemData.events) ) {
			events = elemData.events = {};
		}
		if ( !(eventHandle = elemData.handle) ) {
			eventHandle = elemData.handle = function( e ) {
				// Discard the second event of a jQuery.event.trigger() and
				// when an event is called after a page has unloaded
				return typeof jQuery !== core_strundefined && (!e || jQuery.event.triggered !== e.type) ?
					jQuery.event.dispatch.apply( eventHandle.elem, arguments ) :
					undefined;
			};
			// Add elem as a property of the handle fn to prevent a memory leak with IE non-native events
			eventHandle.elem = elem;
		}

		// Handle multiple events separated by a space
		types = ( types || "" ).match( core_rnotwhite ) || [""];
		t = types.length;
		while ( t-- ) {
			tmp = rtypenamespace.exec( types[t] ) || [];
			type = origType = tmp[1];
			namespaces = ( tmp[2] || "" ).split( "." ).sort();

			// There *must* be a type, no attaching namespace-only handlers
			if ( !type ) {
				continue;
			}

			// If event changes its type, use the special event handlers for the changed type
			special = jQuery.event.special[ type ] || {};

			// If selector defined, determine special event api type, otherwise given type
			type = ( selector ? special.delegateType : special.bindType ) || type;

			// Update special based on newly reset type
			special = jQuery.event.special[ type ] || {};

			// handleObj is passed to all event handlers
			handleObj = jQuery.extend({
				type: type,
				origType: origType,
				data: data,
				handler: handler,
				guid: handler.guid,
				selector: selector,
				needsContext: selector && jQuery.expr.match.needsContext.test( selector ),
				namespace: namespaces.join(".")
			}, handleObjIn );

			// Init the event handler queue if we're the first
			if ( !(handlers = events[ type ]) ) {
				handlers = events[ type ] = [];
				handlers.delegateCount = 0;

				// Only use addEventListener/attachEvent if the special events handler returns false
				if ( !special.setup || special.setup.call( elem, data, namespaces, eventHandle ) === false ) {
					// Bind the global event handler to the element
					if ( elem.addEventListener ) {
						elem.addEventListener( type, eventHandle, false );

					} else if ( elem.attachEvent ) {
						elem.attachEvent( "on" + type, eventHandle );
					}
				}
			}

			if ( special.add ) {
				special.add.call( elem, handleObj );

				if ( !handleObj.handler.guid ) {
					handleObj.handler.guid = handler.guid;
				}
			}

			// Add to the element's handler list, delegates in front
			if ( selector ) {
				handlers.splice( handlers.delegateCount++, 0, handleObj );
			} else {
				handlers.push( handleObj );
			}

			// Keep track of which events have ever been used, for event optimization
			jQuery.event.global[ type ] = true;
		}

		// Nullify elem to prevent memory leaks in IE
		elem = null;
	},

	// Detach an event or set of events from an element
	remove: function( elem, types, handler, selector, mappedTypes ) {
		var j, handleObj, tmp,
			origCount, t, events,
			special, handlers, type,
			namespaces, origType,
			elemData = jQuery.hasData( elem ) && jQuery._data( elem );

		if ( !elemData || !(events = elemData.events) ) {
			return;
		}

		// Once for each type.namespace in types; type may be omitted
		types = ( types || "" ).match( core_rnotwhite ) || [""];
		t = types.length;
		while ( t-- ) {
			tmp = rtypenamespace.exec( types[t] ) || [];
			type = origType = tmp[1];
			namespaces = ( tmp[2] || "" ).split( "." ).sort();

			// Unbind all events (on this namespace, if provided) for the element
			if ( !type ) {
				for ( type in events ) {
					jQuery.event.remove( elem, type + types[ t ], handler, selector, true );
				}
				continue;
			}

			special = jQuery.event.special[ type ] || {};
			type = ( selector ? special.delegateType : special.bindType ) || type;
			handlers = events[ type ] || [];
			tmp = tmp[2] && new RegExp( "(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)" );

			// Remove matching events
			origCount = j = handlers.length;
			while ( j-- ) {
				handleObj = handlers[ j ];

				if ( ( mappedTypes || origType === handleObj.origType ) &&
					( !handler || handler.guid === handleObj.guid ) &&
					( !tmp || tmp.test( handleObj.namespace ) ) &&
					( !selector || selector === handleObj.selector || selector === "**" && handleObj.selector ) ) {
					handlers.splice( j, 1 );

					if ( handleObj.selector ) {
						handlers.delegateCount--;
					}
					if ( special.remove ) {
						special.remove.call( elem, handleObj );
					}
				}
			}

			// Remove generic event handler if we removed something and no more handlers exist
			// (avoids potential for endless recursion during removal of special event handlers)
			if ( origCount && !handlers.length ) {
				if ( !special.teardown || special.teardown.call( elem, namespaces, elemData.handle ) === false ) {
					jQuery.removeEvent( elem, type, elemData.handle );
				}

				delete events[ type ];
			}
		}

		// Remove the expando if it's no longer used
		if ( jQuery.isEmptyObject( events ) ) {
			delete elemData.handle;

			// removeData also checks for emptiness and clears the expando if empty
			// so use it instead of delete
			jQuery._removeData( elem, "events" );
		}
	},

	trigger: function( event, data, elem, onlyHandlers ) {
		var handle, ontype, cur,
			bubbleType, special, tmp, i,
			eventPath = [ elem || document ],
			type = core_hasOwn.call( event, "type" ) ? event.type : event,
			namespaces = core_hasOwn.call( event, "namespace" ) ? event.namespace.split(".") : [];

		cur = tmp = elem = elem || document;

		// Don't do events on text and comment nodes
		if ( elem.nodeType === 3 || elem.nodeType === 8 ) {
			return;
		}

		// focus/blur morphs to focusin/out; ensure we're not firing them right now
		if ( rfocusMorph.test( type + jQuery.event.triggered ) ) {
			return;
		}

		if ( type.indexOf(".") >= 0 ) {
			// Namespaced trigger; create a regexp to match event type in handle()
			namespaces = type.split(".");
			type = namespaces.shift();
			namespaces.sort();
		}
		ontype = type.indexOf(":") < 0 && "on" + type;

		// Caller can pass in a jQuery.Event object, Object, or just an event type string
		event = event[ jQuery.expando ] ?
			event :
			new jQuery.Event( type, typeof event === "object" && event );

		// Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)
		event.isTrigger = onlyHandlers ? 2 : 3;
		event.namespace = namespaces.join(".");
		event.namespace_re = event.namespace ?
			new RegExp( "(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)" ) :
			null;

		// Clean up the event in case it is being reused
		event.result = undefined;
		if ( !event.target ) {
			event.target = elem;
		}

		// Clone any incoming data and prepend the event, creating the handler arg list
		data = data == null ?
			[ event ] :
			jQuery.makeArray( data, [ event ] );

		// Allow special events to draw outside the lines
		special = jQuery.event.special[ type ] || {};
		if ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {
			return;
		}

		// Determine event propagation path in advance, per W3C events spec (#9951)
		// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)
		if ( !onlyHandlers && !special.noBubble && !jQuery.isWindow( elem ) ) {

			bubbleType = special.delegateType || type;
			if ( !rfocusMorph.test( bubbleType + type ) ) {
				cur = cur.parentNode;
			}
			for ( ; cur; cur = cur.parentNode ) {
				eventPath.push( cur );
				tmp = cur;
			}

			// Only add window if we got to document (e.g., not plain obj or detached DOM)
			if ( tmp === (elem.ownerDocument || document) ) {
				eventPath.push( tmp.defaultView || tmp.parentWindow || window );
			}
		}

		// Fire handlers on the event path
		i = 0;
		while ( (cur = eventPath[i++]) && !event.isPropagationStopped() ) {

			event.type = i > 1 ?
				bubbleType :
				special.bindType || type;

			// jQuery handler
			handle = ( jQuery._data( cur, "events" ) || {} )[ event.type ] && jQuery._data( cur, "handle" );
			if ( handle ) {
				handle.apply( cur, data );
			}

			// Native handler
			handle = ontype && cur[ ontype ];
			if ( handle && jQuery.acceptData( cur ) && handle.apply && handle.apply( cur, data ) === false ) {
				event.preventDefault();
			}
		}
		event.type = type;

		// If nobody prevented the default action, do it now
		if ( !onlyHandlers && !event.isDefaultPrevented() ) {

			if ( (!special._default || special._default.apply( eventPath.pop(), data ) === false) &&
				jQuery.acceptData( elem ) ) {

				// Call a native DOM method on the target with the same name name as the event.
				// Can't use an .isFunction() check here because IE6/7 fails that test.
				// Don't do default actions on window, that's where global variables be (#6170)
				if ( ontype && elem[ type ] && !jQuery.isWindow( elem ) ) {

					// Don't re-trigger an onFOO event when we call its FOO() method
					tmp = elem[ ontype ];

					if ( tmp ) {
						elem[ ontype ] = null;
					}

					// Prevent re-triggering of the same event, since we already bubbled it above
					jQuery.event.triggered = type;
					try {
						elem[ type ]();
					} catch ( e ) {
						// IE<9 dies on focus/blur to hidden element (#1486,#12518)
						// only reproducible on winXP IE8 native, not IE9 in IE8 mode
					}
					jQuery.event.triggered = undefined;

					if ( tmp ) {
						elem[ ontype ] = tmp;
					}
				}
			}
		}

		return event.result;
	},

	dispatch: function( event ) {

		// Make a writable jQuery.Event from the native event object
		event = jQuery.event.fix( event );

		var i, ret, handleObj, matched, j,
			handlerQueue = [],
			args = core_slice.call( arguments ),
			handlers = ( jQuery._data( this, "events" ) || {} )[ event.type ] || [],
			special = jQuery.event.special[ event.type ] || {};

		// Use the fix-ed jQuery.Event rather than the (read-only) native event
		args[0] = event;
		event.delegateTarget = this;

		// Call the preDispatch hook for the mapped type, and let it bail if desired
		if ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {
			return;
		}

		// Determine handlers
		handlerQueue = jQuery.event.handlers.call( this, event, handlers );

		// Run delegates first; they may want to stop propagation beneath us
		i = 0;
		while ( (matched = handlerQueue[ i++ ]) && !event.isPropagationStopped() ) {
			event.currentTarget = matched.elem;

			j = 0;
			while ( (handleObj = matched.handlers[ j++ ]) && !event.isImmediatePropagationStopped() ) {

				// Triggered event must either 1) have no namespace, or
				// 2) have namespace(s) a subset or equal to those in the bound event (both can have no namespace).
				if ( !event.namespace_re || event.namespace_re.test( handleObj.namespace ) ) {

					event.handleObj = handleObj;
					event.data = handleObj.data;

					ret = ( (jQuery.event.special[ handleObj.origType ] || {}).handle || handleObj.handler )
							.apply( matched.elem, args );

					if ( ret !== undefined ) {
						if ( (event.result = ret) === false ) {
							event.preventDefault();
							event.stopPropagation();
						}
					}
				}
			}
		}

		// Call the postDispatch hook for the mapped type
		if ( special.postDispatch ) {
			special.postDispatch.call( this, event );
		}

		return event.result;
	},

	handlers: function( event, handlers ) {
		var sel, handleObj, matches, i,
			handlerQueue = [],
			delegateCount = handlers.delegateCount,
			cur = event.target;

		// Find delegate handlers
		// Black-hole SVG <use> instance trees (#13180)
		// Avoid non-left-click bubbling in Firefox (#3861)
		if ( delegateCount && cur.nodeType && (!event.button || event.type !== "click") ) {

			/* jshint eqeqeq: false */
			for ( ; cur != this; cur = cur.parentNode || this ) {
				/* jshint eqeqeq: true */

				// Don't check non-elements (#13208)
				// Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)
				if ( cur.nodeType === 1 && (cur.disabled !== true || event.type !== "click") ) {
					matches = [];
					for ( i = 0; i < delegateCount; i++ ) {
						handleObj = handlers[ i ];

						// Don't conflict with Object.prototype properties (#13203)
						sel = handleObj.selector + " ";

						if ( matches[ sel ] === undefined ) {
							matches[ sel ] = handleObj.needsContext ?
								jQuery( sel, this ).index( cur ) >= 0 :
								jQuery.find( sel, this, null, [ cur ] ).length;
						}
						if ( matches[ sel ] ) {
							matches.push( handleObj );
						}
					}
					if ( matches.length ) {
						handlerQueue.push({ elem: cur, handlers: matches });
					}
				}
			}
		}

		// Add the remaining (directly-bound) handlers
		if ( delegateCount < handlers.length ) {
			handlerQueue.push({ elem: this, handlers: handlers.slice( delegateCount ) });
		}

		return handlerQueue;
	},

	fix: function( event ) {
		if ( event[ jQuery.expando ] ) {
			return event;
		}

		// Create a writable copy of the event object and normalize some properties
		var i, prop, copy,
			type = event.type,
			originalEvent = event,
			fixHook = this.fixHooks[ type ];

		if ( !fixHook ) {
			this.fixHooks[ type ] = fixHook =
				rmouseEvent.test( type ) ? this.mouseHooks :
				rkeyEvent.test( type ) ? this.keyHooks :
				{};
		}
		copy = fixHook.props ? this.props.concat( fixHook.props ) : this.props;

		event = new jQuery.Event( originalEvent );

		i = copy.length;
		while ( i-- ) {
			prop = copy[ i ];
			event[ prop ] = originalEvent[ prop ];
		}

		// Support: IE<9
		// Fix target property (#1925)
		if ( !event.target ) {
			event.target = originalEvent.srcElement || document;
		}

		// Support: Chrome 23+, Safari?
		// Target should not be a text node (#504, #13143)
		if ( event.target.nodeType === 3 ) {
			event.target = event.target.parentNode;
		}

		// Support: IE<9
		// For mouse/key events, metaKey==false if it's undefined (#3368, #11328)
		event.metaKey = !!event.metaKey;

		return fixHook.filter ? fixHook.filter( event, originalEvent ) : event;
	},

	// Includes some event props shared by KeyEvent and MouseEvent
	props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),

	fixHooks: {},

	keyHooks: {
		props: "char charCode key keyCode".split(" "),
		filter: function( event, original ) {

			// Add which for key events
			if ( event.which == null ) {
				event.which = original.charCode != null ? original.charCode : original.keyCode;
			}

			return event;
		}
	},

	mouseHooks: {
		props: "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
		filter: function( event, original ) {
			var body, eventDoc, doc,
				button = original.button,
				fromElement = original.fromElement;

			// Calculate pageX/Y if missing and clientX/Y available
			if ( event.pageX == null && original.clientX != null ) {
				eventDoc = event.target.ownerDocument || document;
				doc = eventDoc.documentElement;
				body = eventDoc.body;

				event.pageX = original.clientX + ( doc && doc.scrollLeft || body && body.scrollLeft || 0 ) - ( doc && doc.clientLeft || body && body.clientLeft || 0 );
				event.pageY = original.clientY + ( doc && doc.scrollTop  || body && body.scrollTop  || 0 ) - ( doc && doc.clientTop  || body && body.clientTop  || 0 );
			}

			// Add relatedTarget, if necessary
			if ( !event.relatedTarget && fromElement ) {
				event.relatedTarget = fromElement === event.target ? original.toElement : fromElement;
			}

			// Add which for click: 1 === left; 2 === middle; 3 === right
			// Note: button is not normalized, so don't use it
			if ( !event.which && button !== undefined ) {
				event.which = ( button & 1 ? 1 : ( button & 2 ? 3 : ( button & 4 ? 2 : 0 ) ) );
			}

			return event;
		}
	},

	special: {
		load: {
			// Prevent triggered image.load events from bubbling to window.load
			noBubble: true
		},
		focus: {
			// Fire native event if possible so blur/focus sequence is correct
			trigger: function() {
				if ( this !== safeActiveElement() && this.focus ) {
					try {
						this.focus();
						return false;
					} catch ( e ) {
						// Support: IE<9
						// If we error on focus to hidden element (#1486, #12518),
						// let .trigger() run the handlers
					}
				}
			},
			delegateType: "focusin"
		},
		blur: {
			trigger: function() {
				if ( this === safeActiveElement() && this.blur ) {
					this.blur();
					return false;
				}
			},
			delegateType: "focusout"
		},
		click: {
			// For checkbox, fire native event so checked state will be right
			trigger: function() {
				if ( jQuery.nodeName( this, "input" ) && this.type === "checkbox" && this.click ) {
					this.click();
					return false;
				}
			},

			// For cross-browser consistency, don't fire native .click() on links
			_default: function( event ) {
				return jQuery.nodeName( event.target, "a" );
			}
		},

		beforeunload: {
			postDispatch: function( event ) {

				// Even when returnValue equals to undefined Firefox will still show alert
				if ( event.result !== undefined ) {
					event.originalEvent.returnValue = event.result;
				}
			}
		}
	},

	simulate: function( type, elem, event, bubble ) {
		// Piggyback on a donor event to simulate a different one.
		// Fake originalEvent to avoid donor's stopPropagation, but if the
		// simulated event prevents default then we do the same on the donor.
		var e = jQuery.extend(
			new jQuery.Event(),
			event,
			{
				type: type,
				isSimulated: true,
				originalEvent: {}
			}
		);
		if ( bubble ) {
			jQuery.event.trigger( e, null, elem );
		} else {
			jQuery.event.dispatch.call( elem, e );
		}
		if ( e.isDefaultPrevented() ) {
			event.preventDefault();
		}
	}
};

jQuery.removeEvent = document.removeEventListener ?
	function( elem, type, handle ) {
		if ( elem.removeEventListener ) {
			elem.removeEventListener( type, handle, false );
		}
	} :
	function( elem, type, handle ) {
		var name = "on" + type;

		if ( elem.detachEvent ) {

			// #8545, #7054, preventing memory leaks for custom events in IE6-8
			// detachEvent needed property on element, by name of that event, to properly expose it to GC
			if ( typeof elem[ name ] === core_strundefined ) {
				elem[ name ] = null;
			}

			elem.detachEvent( name, handle );
		}
	};

jQuery.Event = function( src, props ) {
	// Allow instantiation without the 'new' keyword
	if ( !(this instanceof jQuery.Event) ) {
		return new jQuery.Event( src, props );
	}

	// Event object
	if ( src && src.type ) {
		this.originalEvent = src;
		this.type = src.type;

		// Events bubbling up the document may have been marked as prevented
		// by a handler lower down the tree; reflect the correct value.
		this.isDefaultPrevented = ( src.defaultPrevented || src.returnValue === false ||
			src.getPreventDefault && src.getPreventDefault() ) ? returnTrue : returnFalse;

	// Event type
	} else {
		this.type = src;
	}

	// Put explicitly provided properties onto the event object
	if ( props ) {
		jQuery.extend( this, props );
	}

	// Create a timestamp if incoming event doesn't have one
	this.timeStamp = src && src.timeStamp || jQuery.now();

	// Mark it as fixed
	this[ jQuery.expando ] = true;
};

// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding
// http://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html
jQuery.Event.prototype = {
	isDefaultPrevented: returnFalse,
	isPropagationStopped: returnFalse,
	isImmediatePropagationStopped: returnFalse,

	preventDefault: function() {
		var e = this.originalEvent;

		this.isDefaultPrevented = returnTrue;
		if ( !e ) {
			return;
		}

		// If preventDefault exists, run it on the original event
		if ( e.preventDefault ) {
			e.preventDefault();

		// Support: IE
		// Otherwise set the returnValue property of the original event to false
		} else {
			e.returnValue = false;
		}
	},
	stopPropagation: function() {
		var e = this.originalEvent;

		this.isPropagationStopped = returnTrue;
		if ( !e ) {
			return;
		}
		// If stopPropagation exists, run it on the original event
		if ( e.stopPropagation ) {
			e.stopPropagation();
		}

		// Support: IE
		// Set the cancelBubble property of the original event to true
		e.cancelBubble = true;
	},
	stopImmediatePropagation: function() {
		this.isImmediatePropagationStopped = returnTrue;
		this.stopPropagation();
	}
};

// Create mouseenter/leave events using mouseover/out and event-time checks
jQuery.each({
	mouseenter: "mouseover",
	mouseleave: "mouseout"
}, function( orig, fix ) {
	jQuery.event.special[ orig ] = {
		delegateType: fix,
		bindType: fix,

		handle: function( event ) {
			var ret,
				target = this,
				related = event.relatedTarget,
				handleObj = event.handleObj;

			// For mousenter/leave call the handler if related is outside the target.
			// NB: No relatedTarget if the mouse left/entered the browser window
			if ( !related || (related !== target && !jQuery.contains( target, related )) ) {
				event.type = handleObj.origType;
				ret = handleObj.handler.apply( this, arguments );
				event.type = fix;
			}
			return ret;
		}
	};
});

// IE submit delegation
if ( !jQuery.support.submitBubbles ) {

	jQuery.event.special.submit = {
		setup: function() {
			// Only need this for delegated form submit events
			if ( jQuery.nodeName( this, "form" ) ) {
				return false;
			}

			// Lazy-add a submit handler when a descendant form may potentially be submitted
			jQuery.event.add( this, "click._submit keypress._submit", function( e ) {
				// Node name check avoids a VML-related crash in IE (#9807)
				var elem = e.target,
					form = jQuery.nodeName( elem, "input" ) || jQuery.nodeName( elem, "button" ) ? elem.form : undefined;
				if ( form && !jQuery._data( form, "submitBubbles" ) ) {
					jQuery.event.add( form, "submit._submit", function( event ) {
						event._submit_bubble = true;
					});
					jQuery._data( form, "submitBubbles", true );
				}
			});
			// return undefined since we don't need an event listener
		},

		postDispatch: function( event ) {
			// If form was submitted by the user, bubble the event up the tree
			if ( event._submit_bubble ) {
				delete event._submit_bubble;
				if ( this.parentNode && !event.isTrigger ) {
					jQuery.event.simulate( "submit", this.parentNode, event, true );
				}
			}
		},

		teardown: function() {
			// Only need this for delegated form submit events
			if ( jQuery.nodeName( this, "form" ) ) {
				return false;
			}

			// Remove delegated handlers; cleanData eventually reaps submit handlers attached above
			jQuery.event.remove( this, "._submit" );
		}
	};
}

// IE change delegation and checkbox/radio fix
if ( !jQuery.support.changeBubbles ) {

	jQuery.event.special.change = {

		setup: function() {

			if ( rformElems.test( this.nodeName ) ) {
				// IE doesn't fire change on a check/radio until blur; trigger it on click
				// after a propertychange. Eat the blur-change in special.change.handle.
				// This still fires onchange a second time for check/radio after blur.
				if ( this.type === "checkbox" || this.type === "radio" ) {
					jQuery.event.add( this, "propertychange._change", function( event ) {
						if ( event.originalEvent.propertyName === "checked" ) {
							this._just_changed = true;
						}
					});
					jQuery.event.add( this, "click._change", function( event ) {
						if ( this._just_changed && !event.isTrigger ) {
							this._just_changed = false;
						}
						// Allow triggered, simulated change events (#11500)
						jQuery.event.simulate( "change", this, event, true );
					});
				}
				return false;
			}
			// Delegated event; lazy-add a change handler on descendant inputs
			jQuery.event.add( this, "beforeactivate._change", function( e ) {
				var elem = e.target;

				if ( rformElems.test( elem.nodeName ) && !jQuery._data( elem, "changeBubbles" ) ) {
					jQuery.event.add( elem, "change._change", function( event ) {
						if ( this.parentNode && !event.isSimulated && !event.isTrigger ) {
							jQuery.event.simulate( "change", this.parentNode, event, true );
						}
					});
					jQuery._data( elem, "changeBubbles", true );
				}
			});
		},

		handle: function( event ) {
			var elem = event.target;

			// Swallow native change events from checkbox/radio, we already triggered them above
			if ( this !== elem || event.isSimulated || event.isTrigger || (elem.type !== "radio" && elem.type !== "checkbox") ) {
				return event.handleObj.handler.apply( this, arguments );
			}
		},

		teardown: function() {
			jQuery.event.remove( this, "._change" );

			return !rformElems.test( this.nodeName );
		}
	};
}

// Create "bubbling" focus and blur events
if ( !jQuery.support.focusinBubbles ) {
	jQuery.each({ focus: "focusin", blur: "focusout" }, function( orig, fix ) {

		// Attach a single capturing handler while someone wants focusin/focusout
		var attaches = 0,
			handler = function( event ) {
				jQuery.event.simulate( fix, event.target, jQuery.event.fix( event ), true );
			};

		jQuery.event.special[ fix ] = {
			setup: function() {
				if ( attaches++ === 0 ) {
					document.addEventListener( orig, handler, true );
				}
			},
			teardown: function() {
				if ( --attaches === 0 ) {
					document.removeEventListener( orig, handler, true );
				}
			}
		};
	});
}

jQuery.fn.extend({

	on: function( types, selector, data, fn, /*INTERNAL*/ one ) {
		var type, origFn;

		// Types can be a map of types/handlers
		if ( typeof types === "object" ) {
			// ( types-Object, selector, data )
			if ( typeof selector !== "string" ) {
				// ( types-Object, data )
				data = data || selector;
				selector = undefined;
			}
			for ( type in types ) {
				this.on( type, selector, data, types[ type ], one );
			}
			return this;
		}

		if ( data == null && fn == null ) {
			// ( types, fn )
			fn = selector;
			data = selector = undefined;
		} else if ( fn == null ) {
			if ( typeof selector === "string" ) {
				// ( types, selector, fn )
				fn = data;
				data = undefined;
			} else {
				// ( types, data, fn )
				fn = data;
				data = selector;
				selector = undefined;
			}
		}
		if ( fn === false ) {
			fn = returnFalse;
		} else if ( !fn ) {
			return this;
		}

		if ( one === 1 ) {
			origFn = fn;
			fn = function( event ) {
				// Can use an empty set, since event contains the info
				jQuery().off( event );
				return origFn.apply( this, arguments );
			};
			// Use same guid so caller can remove using origFn
			fn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );
		}
		return this.each( function() {
			jQuery.event.add( this, types, fn, data, selector );
		});
	},
	one: function( types, selector, data, fn ) {
		return this.on( types, selector, data, fn, 1 );
	},
	off: function( types, selector, fn ) {
		var handleObj, type;
		if ( types && types.preventDefault && types.handleObj ) {
			// ( event )  dispatched jQuery.Event
			handleObj = types.handleObj;
			jQuery( types.delegateTarget ).off(
				handleObj.namespace ? handleObj.origType + "." + handleObj.namespace : handleObj.origType,
				handleObj.selector,
				handleObj.handler
			);
			return this;
		}
		if ( typeof types === "object" ) {
			// ( types-object [, selector] )
			for ( type in types ) {
				this.off( type, selector, types[ type ] );
			}
			return this;
		}
		if ( selector === false || typeof selector === "function" ) {
			// ( types [, fn] )
			fn = selector;
			selector = undefined;
		}
		if ( fn === false ) {
			fn = returnFalse;
		}
		return this.each(function() {
			jQuery.event.remove( this, types, fn, selector );
		});
	},

	trigger: function( type, data ) {
		return this.each(function() {
			jQuery.event.trigger( type, data, this );
		});
	},
	triggerHandler: function( type, data ) {
		var elem = this[0];
		if ( elem ) {
			return jQuery.event.trigger( type, data, elem, true );
		}
	}
});
var isSimple = /^.[^:#\[\.,]*$/,
	rparentsprev = /^(?:parents|prev(?:Until|All))/,
	rneedsContext = jQuery.expr.match.needsContext,
	// methods guaranteed to produce a unique set when starting from a unique set
	guaranteedUnique = {
		children: true,
		contents: true,
		next: true,
		prev: true
	};

jQuery.fn.extend({
	find: function( selector ) {
		var i,
			ret = [],
			self = this,
			len = self.length;

		if ( typeof selector !== "string" ) {
			return this.pushStack( jQuery( selector ).filter(function() {
				for ( i = 0; i < len; i++ ) {
					if ( jQuery.contains( self[ i ], this ) ) {
						return true;
					}
				}
			}) );
		}

		for ( i = 0; i < len; i++ ) {
			jQuery.find( selector, self[ i ], ret );
		}

		// Needed because $( selector, context ) becomes $( context ).find( selector )
		ret = this.pushStack( len > 1 ? jQuery.unique( ret ) : ret );
		ret.selector = this.selector ? this.selector + " " + selector : selector;
		return ret;
	},

	has: function( target ) {
		var i,
			targets = jQuery( target, this ),
			len = targets.length;

		return this.filter(function() {
			for ( i = 0; i < len; i++ ) {
				if ( jQuery.contains( this, targets[i] ) ) {
					return true;
				}
			}
		});
	},

	not: function( selector ) {
		return this.pushStack( winnow(this, selector || [], true) );
	},

	filter: function( selector ) {
		return this.pushStack( winnow(this, selector || [], false) );
	},

	is: function( selector ) {
		return !!winnow(
			this,

			// If this is a positional/relative selector, check membership in the returned set
			// so $("p:first").is("p:last") won't return true for a doc with two "p".
			typeof selector === "string" && rneedsContext.test( selector ) ?
				jQuery( selector ) :
				selector || [],
			false
		).length;
	},

	closest: function( selectors, context ) {
		var cur,
			i = 0,
			l = this.length,
			ret = [],
			pos = rneedsContext.test( selectors ) || typeof selectors !== "string" ?
				jQuery( selectors, context || this.context ) :
				0;

		for ( ; i < l; i++ ) {
			for ( cur = this[i]; cur && cur !== context; cur = cur.parentNode ) {
				// Always skip document fragments
				if ( cur.nodeType < 11 && (pos ?
					pos.index(cur) > -1 :

					// Don't pass non-elements to Sizzle
					cur.nodeType === 1 &&
						jQuery.find.matchesSelector(cur, selectors)) ) {

					cur = ret.push( cur );
					break;
				}
			}
		}

		return this.pushStack( ret.length > 1 ? jQuery.unique( ret ) : ret );
	},

	// Determine the position of an element within
	// the matched set of elements
	index: function( elem ) {

		// No argument, return index in parent
		if ( !elem ) {
			return ( this[0] && this[0].parentNode ) ? this.first().prevAll().length : -1;
		}

		// index in selector
		if ( typeof elem === "string" ) {
			return jQuery.inArray( this[0], jQuery( elem ) );
		}

		// Locate the position of the desired element
		return jQuery.inArray(
			// If it receives a jQuery object, the first element is used
			elem.jquery ? elem[0] : elem, this );
	},

	add: function( selector, context ) {
		var set = typeof selector === "string" ?
				jQuery( selector, context ) :
				jQuery.makeArray( selector && selector.nodeType ? [ selector ] : selector ),
			all = jQuery.merge( this.get(), set );

		return this.pushStack( jQuery.unique(all) );
	},

	addBack: function( selector ) {
		return this.add( selector == null ?
			this.prevObject : this.prevObject.filter(selector)
		);
	}
});

function sibling( cur, dir ) {
	do {
		cur = cur[ dir ];
	} while ( cur && cur.nodeType !== 1 );

	return cur;
}

jQuery.each({
	parent: function( elem ) {
		var parent = elem.parentNode;
		return parent && parent.nodeType !== 11 ? parent : null;
	},
	parents: function( elem ) {
		return jQuery.dir( elem, "parentNode" );
	},
	parentsUntil: function( elem, i, until ) {
		return jQuery.dir( elem, "parentNode", until );
	},
	next: function( elem ) {
		return sibling( elem, "nextSibling" );
	},
	prev: function( elem ) {
		return sibling( elem, "previousSibling" );
	},
	nextAll: function( elem ) {
		return jQuery.dir( elem, "nextSibling" );
	},
	prevAll: function( elem ) {
		return jQuery.dir( elem, "previousSibling" );
	},
	nextUntil: function( elem, i, until ) {
		return jQuery.dir( elem, "nextSibling", until );
	},
	prevUntil: function( elem, i, until ) {
		return jQuery.dir( elem, "previousSibling", until );
	},
	siblings: function( elem ) {
		return jQuery.sibling( ( elem.parentNode || {} ).firstChild, elem );
	},
	children: function( elem ) {
		return jQuery.sibling( elem.firstChild );
	},
	contents: function( elem ) {
		return jQuery.nodeName( elem, "iframe" ) ?
			elem.contentDocument || elem.contentWindow.document :
			jQuery.merge( [], elem.childNodes );
	}
}, function( name, fn ) {
	jQuery.fn[ name ] = function( until, selector ) {
		var ret = jQuery.map( this, fn, until );

		if ( name.slice( -5 ) !== "Until" ) {
			selector = until;
		}

		if ( selector && typeof selector === "string" ) {
			ret = jQuery.filter( selector, ret );
		}

		if ( this.length > 1 ) {
			// Remove duplicates
			if ( !guaranteedUnique[ name ] ) {
				ret = jQuery.unique( ret );
			}

			// Reverse order for parents* and prev-derivatives
			if ( rparentsprev.test( name ) ) {
				ret = ret.reverse();
			}
		}

		return this.pushStack( ret );
	};
});

jQuery.extend({
	filter: function( expr, elems, not ) {
		var elem = elems[ 0 ];

		if ( not ) {
			expr = ":not(" + expr + ")";
		}

		return elems.length === 1 && elem.nodeType === 1 ?
			jQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [] :
			jQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {
				return elem.nodeType === 1;
			}));
	},

	dir: function( elem, dir, until ) {
		var matched = [],
			cur = elem[ dir ];

		while ( cur && cur.nodeType !== 9 && (until === undefined || cur.nodeType !== 1 || !jQuery( cur ).is( until )) ) {
			if ( cur.nodeType === 1 ) {
				matched.push( cur );
			}
			cur = cur[dir];
		}
		return matched;
	},

	sibling: function( n, elem ) {
		var r = [];

		for ( ; n; n = n.nextSibling ) {
			if ( n.nodeType === 1 && n !== elem ) {
				r.push( n );
			}
		}

		return r;
	}
});

// Implement the identical functionality for filter and not
function winnow( elements, qualifier, not ) {
	if ( jQuery.isFunction( qualifier ) ) {
		return jQuery.grep( elements, function( elem, i ) {
			/* jshint -W018 */
			return !!qualifier.call( elem, i, elem ) !== not;
		});

	}

	if ( qualifier.nodeType ) {
		return jQuery.grep( elements, function( elem ) {
			return ( elem === qualifier ) !== not;
		});

	}

	if ( typeof qualifier === "string" ) {
		if ( isSimple.test( qualifier ) ) {
			return jQuery.filter( qualifier, elements, not );
		}

		qualifier = jQuery.filter( qualifier, elements );
	}

	return jQuery.grep( elements, function( elem ) {
		return ( jQuery.inArray( elem, qualifier ) >= 0 ) !== not;
	});
}
function createSafeFragment( document ) {
	var list = nodeNames.split( "|" ),
		safeFrag = document.createDocumentFragment();

	if ( safeFrag.createElement ) {
		while ( list.length ) {
			safeFrag.createElement(
				list.pop()
			);
		}
	}
	return safeFrag;
}

var nodeNames = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|" +
		"header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
	rinlinejQuery = / jQuery\d+="(?:null|\d+)"/g,
	rnoshimcache = new RegExp("<(?:" + nodeNames + ")[\\s/>]", "i"),
	rleadingWhitespace = /^\s+/,
	rxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
	rtagName = /<([\w:]+)/,
	rtbody = /<tbody/i,
	rhtml = /<|&#?\w+;/,
	rnoInnerhtml = /<(?:script|style|link)/i,
	manipulation_rcheckableType = /^(?:checkbox|radio)$/i,
	// checked="checked" or checked
	rchecked = /checked\s*(?:[^=]|=\s*.checked.)/i,
	rscriptType = /^$|\/(?:java|ecma)script/i,
	rscriptTypeMasked = /^true\/(.*)/,
	rcleanScript = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,

	// We have to close these tags to support XHTML (#13200)
	wrapMap = {
		option: [ 1, "<select multiple='multiple'>", "</select>" ],
		legend: [ 1, "<fieldset>", "</fieldset>" ],
		area: [ 1, "<map>", "</map>" ],
		param: [ 1, "<object>", "</object>" ],
		thead: [ 1, "<table>", "</table>" ],
		tr: [ 2, "<table><tbody>", "</tbody></table>" ],
		col: [ 2, "<table><tbody></tbody><colgroup>", "</colgroup></table>" ],
		td: [ 3, "<table><tbody><tr>", "</tr></tbody></table>" ],

		// IE6-8 can't serialize link, script, style, or any html5 (NoScope) tags,
		// unless wrapped in a div with non-breaking characters in front of it.
		_default: jQuery.support.htmlSerialize ? [ 0, "", "" ] : [ 1, "X<div>", "</div>"  ]
	},
	safeFragment = createSafeFragment( document ),
	fragmentDiv = safeFragment.appendChild( document.createElement("div") );

wrapMap.optgroup = wrapMap.option;
wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;
wrapMap.th = wrapMap.td;

jQuery.fn.extend({
	text: function( value ) {
		return jQuery.access( this, function( value ) {
			return value === undefined ?
				jQuery.text( this ) :
				this.empty().append( ( this[0] && this[0].ownerDocument || document ).createTextNode( value ) );
		}, null, value, arguments.length );
	},

	append: function() {
		return this.domManip( arguments, function( elem ) {
			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
				var target = manipulationTarget( this, elem );
				target.appendChild( elem );
			}
		});
	},

	prepend: function() {
		return this.domManip( arguments, function( elem ) {
			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
				var target = manipulationTarget( this, elem );
				target.insertBefore( elem, target.firstChild );
			}
		});
	},

	before: function() {
		return this.domManip( arguments, function( elem ) {
			if ( this.parentNode ) {
				this.parentNode.insertBefore( elem, this );
			}
		});
	},

	after: function() {
		return this.domManip( arguments, function( elem ) {
			if ( this.parentNode ) {
				this.parentNode.insertBefore( elem, this.nextSibling );
			}
		});
	},

	// keepData is for internal use only--do not document
	remove: function( selector, keepData ) {
		var elem,
			elems = selector ? jQuery.filter( selector, this ) : this,
			i = 0;

		for ( ; (elem = elems[i]) != null; i++ ) {

			if ( !keepData && elem.nodeType === 1 ) {
				jQuery.cleanData( getAll( elem ) );
			}

			if ( elem.parentNode ) {
				if ( keepData && jQuery.contains( elem.ownerDocument, elem ) ) {
					setGlobalEval( getAll( elem, "script" ) );
				}
				elem.parentNode.removeChild( elem );
			}
		}

		return this;
	},

	empty: function() {
		var elem,
			i = 0;

		for ( ; (elem = this[i]) != null; i++ ) {
			// Remove element nodes and prevent memory leaks
			if ( elem.nodeType === 1 ) {
				jQuery.cleanData( getAll( elem, false ) );
			}

			// Remove any remaining nodes
			while ( elem.firstChild ) {
				elem.removeChild( elem.firstChild );
			}

			// If this is a select, ensure that it displays empty (#12336)
			// Support: IE<9
			if ( elem.options && jQuery.nodeName( elem, "select" ) ) {
				elem.options.length = 0;
			}
		}

		return this;
	},

	clone: function( dataAndEvents, deepDataAndEvents ) {
		dataAndEvents = dataAndEvents == null ? false : dataAndEvents;
		deepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;

		return this.map( function () {
			return jQuery.clone( this, dataAndEvents, deepDataAndEvents );
		});
	},

	html: function( value ) {
		return jQuery.access( this, function( value ) {
			var elem = this[0] || {},
				i = 0,
				l = this.length;

			if ( value === undefined ) {
				return elem.nodeType === 1 ?
					elem.innerHTML.replace( rinlinejQuery, "" ) :
					undefined;
			}

			// See if we can take a shortcut and just use innerHTML
			if ( typeof value === "string" && !rnoInnerhtml.test( value ) &&
				( jQuery.support.htmlSerialize || !rnoshimcache.test( value )  ) &&
				( jQuery.support.leadingWhitespace || !rleadingWhitespace.test( value ) ) &&
				!wrapMap[ ( rtagName.exec( value ) || ["", ""] )[1].toLowerCase() ] ) {

				value = value.replace( rxhtmlTag, "<$1></$2>" );

				try {
					for (; i < l; i++ ) {
						// Remove element nodes and prevent memory leaks
						elem = this[i] || {};
						if ( elem.nodeType === 1 ) {
							jQuery.cleanData( getAll( elem, false ) );
							elem.innerHTML = value;
						}
					}

					elem = 0;

				// If using innerHTML throws an exception, use the fallback method
				} catch(e) {}
			}

			if ( elem ) {
				this.empty().append( value );
			}
		}, null, value, arguments.length );
	},

	replaceWith: function() {
		var
			// Snapshot the DOM in case .domManip sweeps something relevant into its fragment
			args = jQuery.map( this, function( elem ) {
				return [ elem.nextSibling, elem.parentNode ];
			}),
			i = 0;

		// Make the changes, replacing each context element with the new content
		this.domManip( arguments, function( elem ) {
			var next = args[ i++ ],
				parent = args[ i++ ];

			if ( parent ) {
				// Don't use the snapshot next if it has moved (#13810)
				if ( next && next.parentNode !== parent ) {
					next = this.nextSibling;
				}
				jQuery( this ).remove();
				parent.insertBefore( elem, next );
			}
		// Allow new content to include elements from the context set
		}, true );

		// Force removal if there was no new content (e.g., from empty arguments)
		return i ? this : this.remove();
	},

	detach: function( selector ) {
		return this.remove( selector, true );
	},

	domManip: function( args, callback, allowIntersection ) {

		// Flatten any nested arrays
		args = core_concat.apply( [], args );

		var first, node, hasScripts,
			scripts, doc, fragment,
			i = 0,
			l = this.length,
			set = this,
			iNoClone = l - 1,
			value = args[0],
			isFunction = jQuery.isFunction( value );

		// We can't cloneNode fragments that contain checked, in WebKit
		if ( isFunction || !( l <= 1 || typeof value !== "string" || jQuery.support.checkClone || !rchecked.test( value ) ) ) {
			return this.each(function( index ) {
				var self = set.eq( index );
				if ( isFunction ) {
					args[0] = value.call( this, index, self.html() );
				}
				self.domManip( args, callback, allowIntersection );
			});
		}

		if ( l ) {
			fragment = jQuery.buildFragment( args, this[ 0 ].ownerDocument, false, !allowIntersection && this );
			first = fragment.firstChild;

			if ( fragment.childNodes.length === 1 ) {
				fragment = first;
			}

			if ( first ) {
				scripts = jQuery.map( getAll( fragment, "script" ), disableScript );
				hasScripts = scripts.length;

				// Use the original fragment for the last item instead of the first because it can end up
				// being emptied incorrectly in certain situations (#8070).
				for ( ; i < l; i++ ) {
					node = fragment;

					if ( i !== iNoClone ) {
						node = jQuery.clone( node, true, true );

						// Keep references to cloned scripts for later restoration
						if ( hasScripts ) {
							jQuery.merge( scripts, getAll( node, "script" ) );
						}
					}

					callback.call( this[i], node, i );
				}

				if ( hasScripts ) {
					doc = scripts[ scripts.length - 1 ].ownerDocument;

					// Reenable scripts
					jQuery.map( scripts, restoreScript );

					// Evaluate executable scripts on first document insertion
					for ( i = 0; i < hasScripts; i++ ) {
						node = scripts[ i ];
						if ( rscriptType.test( node.type || "" ) &&
							!jQuery._data( node, "globalEval" ) && jQuery.contains( doc, node ) ) {

							if ( node.src ) {
								// Hope ajax is available...
								jQuery._evalUrl( node.src );
							} else {
								jQuery.globalEval( ( node.text || node.textContent || node.innerHTML || "" ).replace( rcleanScript, "" ) );
							}
						}
					}
				}

				// Fix #11809: Avoid leaking memory
				fragment = first = null;
			}
		}

		return this;
	}
});

// Support: IE<8
// Manipulating tables requires a tbody
function manipulationTarget( elem, content ) {
	return jQuery.nodeName( elem, "table" ) &&
		jQuery.nodeName( content.nodeType === 1 ? content : content.firstChild, "tr" ) ?

		elem.getElementsByTagName("tbody")[0] ||
			elem.appendChild( elem.ownerDocument.createElement("tbody") ) :
		elem;
}

// Replace/restore the type attribute of script elements for safe DOM manipulation
function disableScript( elem ) {
	elem.type = (jQuery.find.attr( elem, "type" ) !== null) + "/" + elem.type;
	return elem;
}
function restoreScript( elem ) {
	var match = rscriptTypeMasked.exec( elem.type );
	if ( match ) {
		elem.type = match[1];
	} else {
		elem.removeAttribute("type");
	}
	return elem;
}

// Mark scripts as having already been evaluated
function setGlobalEval( elems, refElements ) {
	var elem,
		i = 0;
	for ( ; (elem = elems[i]) != null; i++ ) {
		jQuery._data( elem, "globalEval", !refElements || jQuery._data( refElements[i], "globalEval" ) );
	}
}

function cloneCopyEvent( src, dest ) {

	if ( dest.nodeType !== 1 || !jQuery.hasData( src ) ) {
		return;
	}

	var type, i, l,
		oldData = jQuery._data( src ),
		curData = jQuery._data( dest, oldData ),
		events = oldData.events;

	if ( events ) {
		delete curData.handle;
		curData.events = {};

		for ( type in events ) {
			for ( i = 0, l = events[ type ].length; i < l; i++ ) {
				jQuery.event.add( dest, type, events[ type ][ i ] );
			}
		}
	}

	// make the cloned public data object a copy from the original
	if ( curData.data ) {
		curData.data = jQuery.extend( {}, curData.data );
	}
}

function fixCloneNodeIssues( src, dest ) {
	var nodeName, e, data;

	// We do not need to do anything for non-Elements
	if ( dest.nodeType !== 1 ) {
		return;
	}

	nodeName = dest.nodeName.toLowerCase();

	// IE6-8 copies events bound via attachEvent when using cloneNode.
	if ( !jQuery.support.noCloneEvent && dest[ jQuery.expando ] ) {
		data = jQuery._data( dest );

		for ( e in data.events ) {
			jQuery.removeEvent( dest, e, data.handle );
		}

		// Event data gets referenced instead of copied if the expando gets copied too
		dest.removeAttribute( jQuery.expando );
	}

	// IE blanks contents when cloning scripts, and tries to evaluate newly-set text
	if ( nodeName === "script" && dest.text !== src.text ) {
		disableScript( dest ).text = src.text;
		restoreScript( dest );

	// IE6-10 improperly clones children of object elements using classid.
	// IE10 throws NoModificationAllowedError if parent is null, #12132.
	} else if ( nodeName === "object" ) {
		if ( dest.parentNode ) {
			dest.outerHTML = src.outerHTML;
		}

		// This path appears unavoidable for IE9. When cloning an object
		// element in IE9, the outerHTML strategy above is not sufficient.
		// If the src has innerHTML and the destination does not,
		// copy the src.innerHTML into the dest.innerHTML. #10324
		if ( jQuery.support.html5Clone && ( src.innerHTML && !jQuery.trim(dest.innerHTML) ) ) {
			dest.innerHTML = src.innerHTML;
		}

	} else if ( nodeName === "input" && manipulation_rcheckableType.test( src.type ) ) {
		// IE6-8 fails to persist the checked state of a cloned checkbox
		// or radio button. Worse, IE6-7 fail to give the cloned element
		// a checked appearance if the defaultChecked value isn't also set

		dest.defaultChecked = dest.checked = src.checked;

		// IE6-7 get confused and end up setting the value of a cloned
		// checkbox/radio button to an empty string instead of "on"
		if ( dest.value !== src.value ) {
			dest.value = src.value;
		}

	// IE6-8 fails to return the selected option to the default selected
	// state when cloning options
	} else if ( nodeName === "option" ) {
		dest.defaultSelected = dest.selected = src.defaultSelected;

	// IE6-8 fails to set the defaultValue to the correct value when
	// cloning other types of input fields
	} else if ( nodeName === "input" || nodeName === "textarea" ) {
		dest.defaultValue = src.defaultValue;
	}
}

jQuery.each({
	appendTo: "append",
	prependTo: "prepend",
	insertBefore: "before",
	insertAfter: "after",
	replaceAll: "replaceWith"
}, function( name, original ) {
	jQuery.fn[ name ] = function( selector ) {
		var elems,
			i = 0,
			ret = [],
			insert = jQuery( selector ),
			last = insert.length - 1;

		for ( ; i <= last; i++ ) {
			elems = i === last ? this : this.clone(true);
			jQuery( insert[i] )[ original ]( elems );

			// Modern browsers can apply jQuery collections as arrays, but oldIE needs a .get()
			core_push.apply( ret, elems.get() );
		}

		return this.pushStack( ret );
	};
});

function getAll( context, tag ) {
	var elems, elem,
		i = 0,
		found = typeof context.getElementsByTagName !== core_strundefined ? context.getElementsByTagName( tag || "*" ) :
			typeof context.querySelectorAll !== core_strundefined ? context.querySelectorAll( tag || "*" ) :
			undefined;

	if ( !found ) {
		for ( found = [], elems = context.childNodes || context; (elem = elems[i]) != null; i++ ) {
			if ( !tag || jQuery.nodeName( elem, tag ) ) {
				found.push( elem );
			} else {
				jQuery.merge( found, getAll( elem, tag ) );
			}
		}
	}

	return tag === undefined || tag && jQuery.nodeName( context, tag ) ?
		jQuery.merge( [ context ], found ) :
		found;
}

// Used in buildFragment, fixes the defaultChecked property
function fixDefaultChecked( elem ) {
	if ( manipulation_rcheckableType.test( elem.type ) ) {
		elem.defaultChecked = elem.checked;
	}
}

jQuery.extend({
	clone: function( elem, dataAndEvents, deepDataAndEvents ) {
		var destElements, node, clone, i, srcElements,
			inPage = jQuery.contains( elem.ownerDocument, elem );

		if ( jQuery.support.html5Clone || jQuery.isXMLDoc(elem) || !rnoshimcache.test( "<" + elem.nodeName + ">" ) ) {
			clone = elem.cloneNode( true );

		// IE<=8 does not properly clone detached, unknown element nodes
		} else {
			fragmentDiv.innerHTML = elem.outerHTML;
			fragmentDiv.removeChild( clone = fragmentDiv.firstChild );
		}

		if ( (!jQuery.support.noCloneEvent || !jQuery.support.noCloneChecked) &&
				(elem.nodeType === 1 || elem.nodeType === 11) && !jQuery.isXMLDoc(elem) ) {

			// We eschew Sizzle here for performance reasons: http://jsperf.com/getall-vs-sizzle/2
			destElements = getAll( clone );
			srcElements = getAll( elem );

			// Fix all IE cloning issues
			for ( i = 0; (node = srcElements[i]) != null; ++i ) {
				// Ensure that the destination node is not null; Fixes #9587
				if ( destElements[i] ) {
					fixCloneNodeIssues( node, destElements[i] );
				}
			}
		}

		// Copy the events from the original to the clone
		if ( dataAndEvents ) {
			if ( deepDataAndEvents ) {
				srcElements = srcElements || getAll( elem );
				destElements = destElements || getAll( clone );

				for ( i = 0; (node = srcElements[i]) != null; i++ ) {
					cloneCopyEvent( node, destElements[i] );
				}
			} else {
				cloneCopyEvent( elem, clone );
			}
		}

		// Preserve script evaluation history
		destElements = getAll( clone, "script" );
		if ( destElements.length > 0 ) {
			setGlobalEval( destElements, !inPage && getAll( elem, "script" ) );
		}

		destElements = srcElements = node = null;

		// Return the cloned set
		return clone;
	},

	buildFragment: function( elems, context, scripts, selection ) {
		var j, elem, contains,
			tmp, tag, tbody, wrap,
			l = elems.length,

			// Ensure a safe fragment
			safe = createSafeFragment( context ),

			nodes = [],
			i = 0;

		for ( ; i < l; i++ ) {
			elem = elems[ i ];

			if ( elem || elem === 0 ) {

				// Add nodes directly
				if ( jQuery.type( elem ) === "object" ) {
					jQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );

				// Convert non-html into a text node
				} else if ( !rhtml.test( elem ) ) {
					nodes.push( context.createTextNode( elem ) );

				// Convert html into DOM nodes
				} else {
					tmp = tmp || safe.appendChild( context.createElement("div") );

					// Deserialize a standard representation
					tag = ( rtagName.exec( elem ) || ["", ""] )[1].toLowerCase();
					wrap = wrapMap[ tag ] || wrapMap._default;

					tmp.innerHTML = wrap[1] + elem.replace( rxhtmlTag, "<$1></$2>" ) + wrap[2];

					// Descend through wrappers to the right content
					j = wrap[0];
					while ( j-- ) {
						tmp = tmp.lastChild;
					}

					// Manually add leading whitespace removed by IE
					if ( !jQuery.support.leadingWhitespace && rleadingWhitespace.test( elem ) ) {
						nodes.push( context.createTextNode( rleadingWhitespace.exec( elem )[0] ) );
					}

					// Remove IE's autoinserted <tbody> from table fragments
					if ( !jQuery.support.tbody ) {

						// String was a <table>, *may* have spurious <tbody>
						elem = tag === "table" && !rtbody.test( elem ) ?
							tmp.firstChild :

							// String was a bare <thead> or <tfoot>
							wrap[1] === "<table>" && !rtbody.test( elem ) ?
								tmp :
								0;

						j = elem && elem.childNodes.length;
						while ( j-- ) {
							if ( jQuery.nodeName( (tbody = elem.childNodes[j]), "tbody" ) && !tbody.childNodes.length ) {
								elem.removeChild( tbody );
							}
						}
					}

					jQuery.merge( nodes, tmp.childNodes );

					// Fix #12392 for WebKit and IE > 9
					tmp.textContent = "";

					// Fix #12392 for oldIE
					while ( tmp.firstChild ) {
						tmp.removeChild( tmp.firstChild );
					}

					// Remember the top-level container for proper cleanup
					tmp = safe.lastChild;
				}
			}
		}

		// Fix #11356: Clear elements from fragment
		if ( tmp ) {
			safe.removeChild( tmp );
		}

		// Reset defaultChecked for any radios and checkboxes
		// about to be appended to the DOM in IE 6/7 (#8060)
		if ( !jQuery.support.appendChecked ) {
			jQuery.grep( getAll( nodes, "input" ), fixDefaultChecked );
		}

		i = 0;
		while ( (elem = nodes[ i++ ]) ) {

			// #4087 - If origin and destination elements are the same, and this is
			// that element, do not do anything
			if ( selection && jQuery.inArray( elem, selection ) !== -1 ) {
				continue;
			}

			contains = jQuery.contains( elem.ownerDocument, elem );

			// Append to fragment
			tmp = getAll( safe.appendChild( elem ), "script" );

			// Preserve script evaluation history
			if ( contains ) {
				setGlobalEval( tmp );
			}

			// Capture executables
			if ( scripts ) {
				j = 0;
				while ( (elem = tmp[ j++ ]) ) {
					if ( rscriptType.test( elem.type || "" ) ) {
						scripts.push( elem );
					}
				}
			}
		}

		tmp = null;

		return safe;
	},

	cleanData: function( elems, /* internal */ acceptData ) {
		var elem, type, id, data,
			i = 0,
			internalKey = jQuery.expando,
			cache = jQuery.cache,
			deleteExpando = jQuery.support.deleteExpando,
			special = jQuery.event.special;

		for ( ; (elem = elems[i]) != null; i++ ) {

			if ( acceptData || jQuery.acceptData( elem ) ) {

				id = elem[ internalKey ];
				data = id && cache[ id ];

				if ( data ) {
					if ( data.events ) {
						for ( type in data.events ) {
							if ( special[ type ] ) {
								jQuery.event.remove( elem, type );

							// This is a shortcut to avoid jQuery.event.remove's overhead
							} else {
								jQuery.removeEvent( elem, type, data.handle );
							}
						}
					}

					// Remove cache only if it was not already removed by jQuery.event.remove
					if ( cache[ id ] ) {

						delete cache[ id ];

						// IE does not allow us to delete expando properties from nodes,
						// nor does it have a removeAttribute function on Document nodes;
						// we must handle all of these cases
						if ( deleteExpando ) {
							delete elem[ internalKey ];

						} else if ( typeof elem.removeAttribute !== core_strundefined ) {
							elem.removeAttribute( internalKey );

						} else {
							elem[ internalKey ] = null;
						}

						core_deletedIds.push( id );
					}
				}
			}
		}
	},

	_evalUrl: function( url ) {
		return jQuery.ajax({
			url: url,
			type: "GET",
			dataType: "script",
			async: false,
			global: false,
			"throws": true
		});
	}
});
jQuery.fn.extend({
	wrapAll: function( html ) {
		if ( jQuery.isFunction( html ) ) {
			return this.each(function(i) {
				jQuery(this).wrapAll( html.call(this, i) );
			});
		}

		if ( this[0] ) {
			// The elements to wrap the target around
			var wrap = jQuery( html, this[0].ownerDocument ).eq(0).clone(true);

			if ( this[0].parentNode ) {
				wrap.insertBefore( this[0] );
			}

			wrap.map(function() {
				var elem = this;

				while ( elem.firstChild && elem.firstChild.nodeType === 1 ) {
					elem = elem.firstChild;
				}

				return elem;
			}).append( this );
		}

		return this;
	},

	wrapInner: function( html ) {
		if ( jQuery.isFunction( html ) ) {
			return this.each(function(i) {
				jQuery(this).wrapInner( html.call(this, i) );
			});
		}

		return this.each(function() {
			var self = jQuery( this ),
				contents = self.contents();

			if ( contents.length ) {
				contents.wrapAll( html );

			} else {
				self.append( html );
			}
		});
	},

	wrap: function( html ) {
		var isFunction = jQuery.isFunction( html );

		return this.each(function(i) {
			jQuery( this ).wrapAll( isFunction ? html.call(this, i) : html );
		});
	},

	unwrap: function() {
		return this.parent().each(function() {
			if ( !jQuery.nodeName( this, "body" ) ) {
				jQuery( this ).replaceWith( this.childNodes );
			}
		}).end();
	}
});
var iframe, getStyles, curCSS,
	ralpha = /alpha\([^)]*\)/i,
	ropacity = /opacity\s*=\s*([^)]*)/,
	rposition = /^(top|right|bottom|left)$/,
	// swappable if display is none or starts with table except "table", "table-cell", or "table-caption"
	// see here for display values: https://developer.mozilla.org/en-US/docs/CSS/display
	rdisplayswap = /^(none|table(?!-c[ea]).+)/,
	rmargin = /^margin/,
	rnumsplit = new RegExp( "^(" + core_pnum + ")(.*)$", "i" ),
	rnumnonpx = new RegExp( "^(" + core_pnum + ")(?!px)[a-z%]+$", "i" ),
	rrelNum = new RegExp( "^([+-])=(" + core_pnum + ")", "i" ),
	elemdisplay = { BODY: "block" },

	cssShow = { position: "absolute", visibility: "hidden", display: "block" },
	cssNormalTransform = {
		letterSpacing: 0,
		fontWeight: 400
	},

	cssExpand = [ "Top", "Right", "Bottom", "Left" ],
	cssPrefixes = [ "Webkit", "O", "Moz", "ms" ];

// return a css property mapped to a potentially vendor prefixed property
function vendorPropName( style, name ) {

	// shortcut for names that are not vendor prefixed
	if ( name in style ) {
		return name;
	}

	// check for vendor prefixed names
	var capName = name.charAt(0).toUpperCase() + name.slice(1),
		origName = name,
		i = cssPrefixes.length;

	while ( i-- ) {
		name = cssPrefixes[ i ] + capName;
		if ( name in style ) {
			return name;
		}
	}

	return origName;
}

function isHidden( elem, el ) {
	// isHidden might be called from jQuery#filter function;
	// in that case, element will be second argument
	elem = el || elem;
	return jQuery.css( elem, "display" ) === "none" || !jQuery.contains( elem.ownerDocument, elem );
}

function showHide( elements, show ) {
	var display, elem, hidden,
		values = [],
		index = 0,
		length = elements.length;

	for ( ; index < length; index++ ) {
		elem = elements[ index ];
		if ( !elem.style ) {
			continue;
		}

		values[ index ] = jQuery._data( elem, "olddisplay" );
		display = elem.style.display;
		if ( show ) {
			// Reset the inline display of this element to learn if it is
			// being hidden by cascaded rules or not
			if ( !values[ index ] && display === "none" ) {
				elem.style.display = "";
			}

			// Set elements which have been overridden with display: none
			// in a stylesheet to whatever the default browser style is
			// for such an element
			if ( elem.style.display === "" && isHidden( elem ) ) {
				values[ index ] = jQuery._data( elem, "olddisplay", css_defaultDisplay(elem.nodeName) );
			}
		} else {

			if ( !values[ index ] ) {
				hidden = isHidden( elem );

				if ( display && display !== "none" || !hidden ) {
					jQuery._data( elem, "olddisplay", hidden ? display : jQuery.css( elem, "display" ) );
				}
			}
		}
	}

	// Set the display of most of the elements in a second loop
	// to avoid the constant reflow
	for ( index = 0; index < length; index++ ) {
		elem = elements[ index ];
		if ( !elem.style ) {
			continue;
		}
		if ( !show || elem.style.display === "none" || elem.style.display === "" ) {
			elem.style.display = show ? values[ index ] || "" : "none";
		}
	}

	return elements;
}

jQuery.fn.extend({
	css: function( name, value ) {
		return jQuery.access( this, function( elem, name, value ) {
			var len, styles,
				map = {},
				i = 0;

			if ( jQuery.isArray( name ) ) {
				styles = getStyles( elem );
				len = name.length;

				for ( ; i < len; i++ ) {
					map[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );
				}

				return map;
			}

			return value !== undefined ?
				jQuery.style( elem, name, value ) :
				jQuery.css( elem, name );
		}, name, value, arguments.length > 1 );
	},
	show: function() {
		return showHide( this, true );
	},
	hide: function() {
		return showHide( this );
	},
	toggle: function( state ) {
		var bool = typeof state === "boolean";

		return this.each(function() {
			if ( bool ? state : isHidden( this ) ) {
				jQuery( this ).show();
			} else {
				jQuery( this ).hide();
			}
		});
	}
});

jQuery.extend({
	// Add in style property hooks for overriding the default
	// behavior of getting and setting a style property
	cssHooks: {
		opacity: {
			get: function( elem, computed ) {
				if ( computed ) {
					// We should always get a number back from opacity
					var ret = curCSS( elem, "opacity" );
					return ret === "" ? "1" : ret;
				}
			}
		}
	},

	// Don't automatically add "px" to these possibly-unitless properties
	cssNumber: {
		"columnCount": true,
		"fillOpacity": true,
		"fontWeight": true,
		"lineHeight": true,
		"opacity": true,
		"orphans": true,
		"widows": true,
		"zIndex": true,
		"zoom": true
	},

	// Add in properties whose names you wish to fix before
	// setting or getting the value
	cssProps: {
		// normalize float css property
		"float": jQuery.support.cssFloat ? "cssFloat" : "styleFloat"
	},

	// Get and set the style property on a DOM Node
	style: function( elem, name, value, extra ) {
		// Don't set styles on text and comment nodes
		if ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {
			return;
		}

		// Make sure that we're working with the right name
		var ret, type, hooks,
			origName = jQuery.camelCase( name ),
			style = elem.style;

		name = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( style, origName ) );

		// gets hook for the prefixed version
		// followed by the unprefixed version
		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

		// Check if we're setting a value
		if ( value !== undefined ) {
			type = typeof value;

			// convert relative number strings (+= or -=) to relative numbers. #7345
			if ( type === "string" && (ret = rrelNum.exec( value )) ) {
				value = ( ret[1] + 1 ) * ret[2] + parseFloat( jQuery.css( elem, name ) );
				// Fixes bug #9237
				type = "number";
			}

			// Make sure that NaN and null values aren't set. See: #7116
			if ( value == null || type === "number" && isNaN( value ) ) {
				return;
			}

			// If a number was passed in, add 'px' to the (except for certain CSS properties)
			if ( type === "number" && !jQuery.cssNumber[ origName ] ) {
				value += "px";
			}

			// Fixes #8908, it can be done more correctly by specifing setters in cssHooks,
			// but it would mean to define eight (for every problematic property) identical functions
			if ( !jQuery.support.clearCloneStyle && value === "" && name.indexOf("background") === 0 ) {
				style[ name ] = "inherit";
			}

			// If a hook was provided, use that value, otherwise just set the specified value
			if ( !hooks || !("set" in hooks) || (value = hooks.set( elem, value, extra )) !== undefined ) {

				// Wrapped to prevent IE from throwing errors when 'invalid' values are provided
				// Fixes bug #5509
				try {
					style[ name ] = value;
				} catch(e) {}
			}

		} else {
			// If a hook was provided get the non-computed value from there
			if ( hooks && "get" in hooks && (ret = hooks.get( elem, false, extra )) !== undefined ) {
				return ret;
			}

			// Otherwise just get the value from the style object
			return style[ name ];
		}
	},

	css: function( elem, name, extra, styles ) {
		var num, val, hooks,
			origName = jQuery.camelCase( name );

		// Make sure that we're working with the right name
		name = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( elem.style, origName ) );

		// gets hook for the prefixed version
		// followed by the unprefixed version
		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

		// If a hook was provided get the computed value from there
		if ( hooks && "get" in hooks ) {
			val = hooks.get( elem, true, extra );
		}

		// Otherwise, if a way to get the computed value exists, use that
		if ( val === undefined ) {
			val = curCSS( elem, name, styles );
		}

		//convert "normal" to computed value
		if ( val === "normal" && name in cssNormalTransform ) {
			val = cssNormalTransform[ name ];
		}

		// Return, converting to number if forced or a qualifier was provided and val looks numeric
		if ( extra === "" || extra ) {
			num = parseFloat( val );
			return extra === true || jQuery.isNumeric( num ) ? num || 0 : val;
		}
		return val;
	}
});

// NOTE: we've included the "window" in window.getComputedStyle
// because jsdom on node.js will break without it.
if ( window.getComputedStyle ) {
	getStyles = function( elem ) {
		return window.getComputedStyle( elem, null );
	};

	curCSS = function( elem, name, _computed ) {
		var width, minWidth, maxWidth,
			computed = _computed || getStyles( elem ),

			// getPropertyValue is only needed for .css('filter') in IE9, see #12537
			ret = computed ? computed.getPropertyValue( name ) || computed[ name ] : undefined,
			style = elem.style;

		if ( computed ) {

			if ( ret === "" && !jQuery.contains( elem.ownerDocument, elem ) ) {
				ret = jQuery.style( elem, name );
			}

			// A tribute to the "awesome hack by Dean Edwards"
			// Chrome < 17 and Safari 5.0 uses "computed value" instead of "used value" for margin-right
			// Safari 5.1.7 (at least) returns percentage for a larger set of values, but width seems to be reliably pixels
			// this is against the CSSOM draft spec: http://dev.w3.org/csswg/cssom/#resolved-values
			if ( rnumnonpx.test( ret ) && rmargin.test( name ) ) {

				// Remember the original values
				width = style.width;
				minWidth = style.minWidth;
				maxWidth = style.maxWidth;

				// Put in the new values to get a computed value out
				style.minWidth = style.maxWidth = style.width = ret;
				ret = computed.width;

				// Revert the changed values
				style.width = width;
				style.minWidth = minWidth;
				style.maxWidth = maxWidth;
			}
		}

		return ret;
	};
} else if ( document.documentElement.currentStyle ) {
	getStyles = function( elem ) {
		return elem.currentStyle;
	};

	curCSS = function( elem, name, _computed ) {
		var left, rs, rsLeft,
			computed = _computed || getStyles( elem ),
			ret = computed ? computed[ name ] : undefined,
			style = elem.style;

		// Avoid setting ret to empty string here
		// so we don't default to auto
		if ( ret == null && style && style[ name ] ) {
			ret = style[ name ];
		}

		// From the awesome hack by Dean Edwards
		// http://erik.eae.net/archives/2007/07/27/18.54.15/#comment-102291

		// If we're not dealing with a regular pixel number
		// but a number that has a weird ending, we need to convert it to pixels
		// but not position css attributes, as those are proportional to the parent element instead
		// and we can't measure the parent instead because it might trigger a "stacking dolls" problem
		if ( rnumnonpx.test( ret ) && !rposition.test( name ) ) {

			// Remember the original values
			left = style.left;
			rs = elem.runtimeStyle;
			rsLeft = rs && rs.left;

			// Put in the new values to get a computed value out
			if ( rsLeft ) {
				rs.left = elem.currentStyle.left;
			}
			style.left = name === "fontSize" ? "1em" : ret;
			ret = style.pixelLeft + "px";

			// Revert the changed values
			style.left = left;
			if ( rsLeft ) {
				rs.left = rsLeft;
			}
		}

		return ret === "" ? "auto" : ret;
	};
}

function setPositiveNumber( elem, value, subtract ) {
	var matches = rnumsplit.exec( value );
	return matches ?
		// Guard against undefined "subtract", e.g., when used as in cssHooks
		Math.max( 0, matches[ 1 ] - ( subtract || 0 ) ) + ( matches[ 2 ] || "px" ) :
		value;
}

function augmentWidthOrHeight( elem, name, extra, isBorderBox, styles ) {
	var i = extra === ( isBorderBox ? "border" : "content" ) ?
		// If we already have the right measurement, avoid augmentation
		4 :
		// Otherwise initialize for horizontal or vertical properties
		name === "width" ? 1 : 0,

		val = 0;

	for ( ; i < 4; i += 2 ) {
		// both box models exclude margin, so add it if we want it
		if ( extra === "margin" ) {
			val += jQuery.css( elem, extra + cssExpand[ i ], true, styles );
		}

		if ( isBorderBox ) {
			// border-box includes padding, so remove it if we want content
			if ( extra === "content" ) {
				val -= jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );
			}

			// at this point, extra isn't border nor margin, so remove border
			if ( extra !== "margin" ) {
				val -= jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
			}
		} else {
			// at this point, extra isn't content, so add padding
			val += jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );

			// at this point, extra isn't content nor padding, so add border
			if ( extra !== "padding" ) {
				val += jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
			}
		}
	}

	return val;
}

function getWidthOrHeight( elem, name, extra ) {

	// Start with offset property, which is equivalent to the border-box value
	var valueIsBorderBox = true,
		val = name === "width" ? elem.offsetWidth : elem.offsetHeight,
		styles = getStyles( elem ),
		isBorderBox = jQuery.support.boxSizing && jQuery.css( elem, "boxSizing", false, styles ) === "border-box";

	// some non-html elements return undefined for offsetWidth, so check for null/undefined
	// svg - https://bugzilla.mozilla.org/show_bug.cgi?id=649285
	// MathML - https://bugzilla.mozilla.org/show_bug.cgi?id=491668
	if ( val <= 0 || val == null ) {
		// Fall back to computed then uncomputed css if necessary
		val = curCSS( elem, name, styles );
		if ( val < 0 || val == null ) {
			val = elem.style[ name ];
		}

		// Computed unit is not pixels. Stop here and return.
		if ( rnumnonpx.test(val) ) {
			return val;
		}

		// we need the check for style in case a browser which returns unreliable values
		// for getComputedStyle silently falls back to the reliable elem.style
		valueIsBorderBox = isBorderBox && ( jQuery.support.boxSizingReliable || val === elem.style[ name ] );

		// Normalize "", auto, and prepare for extra
		val = parseFloat( val ) || 0;
	}

	// use the active box-sizing model to add/subtract irrelevant styles
	return ( val +
		augmentWidthOrHeight(
			elem,
			name,
			extra || ( isBorderBox ? "border" : "content" ),
			valueIsBorderBox,
			styles
		)
	) + "px";
}

// Try to determine the default display value of an element
function css_defaultDisplay( nodeName ) {
	var doc = document,
		display = elemdisplay[ nodeName ];

	if ( !display ) {
		display = actualDisplay( nodeName, doc );

		// If the simple way fails, read from inside an iframe
		if ( display === "none" || !display ) {
			// Use the already-created iframe if possible
			iframe = ( iframe ||
				jQuery("<iframe frameborder='0' width='0' height='0'/>")
				.css( "cssText", "display:block !important" )
			).appendTo( doc.documentElement );

			// Always write a new HTML skeleton so Webkit and Firefox don't choke on reuse
			doc = ( iframe[0].contentWindow || iframe[0].contentDocument ).document;
			doc.write("<!doctype html><html><body>");
			doc.close();

			display = actualDisplay( nodeName, doc );
			iframe.detach();
		}

		// Store the correct default display
		elemdisplay[ nodeName ] = display;
	}

	return display;
}

// Called ONLY from within css_defaultDisplay
function actualDisplay( name, doc ) {
	var elem = jQuery( doc.createElement( name ) ).appendTo( doc.body ),
		display = jQuery.css( elem[0], "display" );
	elem.remove();
	return display;
}

jQuery.each([ "height", "width" ], function( i, name ) {
	jQuery.cssHooks[ name ] = {
		get: function( elem, computed, extra ) {
			if ( computed ) {
				// certain elements can have dimension info if we invisibly show them
				// however, it must have a current display style that would benefit from this
				return elem.offsetWidth === 0 && rdisplayswap.test( jQuery.css( elem, "display" ) ) ?
					jQuery.swap( elem, cssShow, function() {
						return getWidthOrHeight( elem, name, extra );
					}) :
					getWidthOrHeight( elem, name, extra );
			}
		},

		set: function( elem, value, extra ) {
			var styles = extra && getStyles( elem );
			return setPositiveNumber( elem, value, extra ?
				augmentWidthOrHeight(
					elem,
					name,
					extra,
					jQuery.support.boxSizing && jQuery.css( elem, "boxSizing", false, styles ) === "border-box",
					styles
				) : 0
			);
		}
	};
});

if ( !jQuery.support.opacity ) {
	jQuery.cssHooks.opacity = {
		get: function( elem, computed ) {
			// IE uses filters for opacity
			return ropacity.test( (computed && elem.currentStyle ? elem.currentStyle.filter : elem.style.filter) || "" ) ?
				( 0.01 * parseFloat( RegExp.$1 ) ) + "" :
				computed ? "1" : "";
		},

		set: function( elem, value ) {
			var style = elem.style,
				currentStyle = elem.currentStyle,
				opacity = jQuery.isNumeric( value ) ? "alpha(opacity=" + value * 100 + ")" : "",
				filter = currentStyle && currentStyle.filter || style.filter || "";

			// IE has trouble with opacity if it does not have layout
			// Force it by setting the zoom level
			style.zoom = 1;

			// if setting opacity to 1, and no other filters exist - attempt to remove filter attribute #6652
			// if value === "", then remove inline opacity #12685
			if ( ( value >= 1 || value === "" ) &&
					jQuery.trim( filter.replace( ralpha, "" ) ) === "" &&
					style.removeAttribute ) {

				// Setting style.filter to null, "" & " " still leave "filter:" in the cssText
				// if "filter:" is present at all, clearType is disabled, we want to avoid this
				// style.removeAttribute is IE Only, but so apparently is this code path...
				style.removeAttribute( "filter" );

				// if there is no filter style applied in a css rule or unset inline opacity, we are done
				if ( value === "" || currentStyle && !currentStyle.filter ) {
					return;
				}
			}

			// otherwise, set new filter values
			style.filter = ralpha.test( filter ) ?
				filter.replace( ralpha, opacity ) :
				filter + " " + opacity;
		}
	};
}

// These hooks cannot be added until DOM ready because the support test
// for it is not run until after DOM ready
jQuery(function() {
	if ( !jQuery.support.reliableMarginRight ) {
		jQuery.cssHooks.marginRight = {
			get: function( elem, computed ) {
				if ( computed ) {
					// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right
					// Work around by temporarily setting element display to inline-block
					return jQuery.swap( elem, { "display": "inline-block" },
						curCSS, [ elem, "marginRight" ] );
				}
			}
		};
	}

	// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084
	// getComputedStyle returns percent when specified for top/left/bottom/right
	// rather than make the css module depend on the offset module, we just check for it here
	if ( !jQuery.support.pixelPosition && jQuery.fn.position ) {
		jQuery.each( [ "top", "left" ], function( i, prop ) {
			jQuery.cssHooks[ prop ] = {
				get: function( elem, computed ) {
					if ( computed ) {
						computed = curCSS( elem, prop );
						// if curCSS returns percentage, fallback to offset
						return rnumnonpx.test( computed ) ?
							jQuery( elem ).position()[ prop ] + "px" :
							computed;
					}
				}
			};
		});
	}

});

if ( jQuery.expr && jQuery.expr.filters ) {
	jQuery.expr.filters.hidden = function( elem ) {
		// Support: Opera <= 12.12
		// Opera reports offsetWidths and offsetHeights less than zero on some elements
		return elem.offsetWidth <= 0 && elem.offsetHeight <= 0 ||
			(!jQuery.support.reliableHiddenOffsets && ((elem.style && elem.style.display) || jQuery.css( elem, "display" )) === "none");
	};

	jQuery.expr.filters.visible = function( elem ) {
		return !jQuery.expr.filters.hidden( elem );
	};
}

// These hooks are used by animate to expand properties
jQuery.each({
	margin: "",
	padding: "",
	border: "Width"
}, function( prefix, suffix ) {
	jQuery.cssHooks[ prefix + suffix ] = {
		expand: function( value ) {
			var i = 0,
				expanded = {},

				// assumes a single number if not a string
				parts = typeof value === "string" ? value.split(" ") : [ value ];

			for ( ; i < 4; i++ ) {
				expanded[ prefix + cssExpand[ i ] + suffix ] =
					parts[ i ] || parts[ i - 2 ] || parts[ 0 ];
			}

			return expanded;
		}
	};

	if ( !rmargin.test( prefix ) ) {
		jQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;
	}
});
var r20 = /%20/g,
	rbracket = /\[\]$/,
	rCRLF = /\r?\n/g,
	rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,
	rsubmittable = /^(?:input|select|textarea|keygen)/i;

jQuery.fn.extend({
	serialize: function() {
		return jQuery.param( this.serializeArray() );
	},
	serializeArray: function() {
		return this.map(function(){
			// Can add propHook for "elements" to filter or add form elements
			var elements = jQuery.prop( this, "elements" );
			return elements ? jQuery.makeArray( elements ) : this;
		})
		.filter(function(){
			var type = this.type;
			// Use .is(":disabled") so that fieldset[disabled] works
			return this.name && !jQuery( this ).is( ":disabled" ) &&
				rsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&
				( this.checked || !manipulation_rcheckableType.test( type ) );
		})
		.map(function( i, elem ){
			var val = jQuery( this ).val();

			return val == null ?
				null :
				jQuery.isArray( val ) ?
					jQuery.map( val, function( val ){
						return { name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
					}) :
					{ name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
		}).get();
	}
});

//Serialize an array of form elements or a set of
//key/values into a query string
jQuery.param = function( a, traditional ) {
	var prefix,
		s = [],
		add = function( key, value ) {
			// If value is a function, invoke it and return its value
			value = jQuery.isFunction( value ) ? value() : ( value == null ? "" : value );
			s[ s.length ] = encodeURIComponent( key ) + "=" + encodeURIComponent( value );
		};

	// Set traditional to true for jQuery <= 1.3.2 behavior.
	if ( traditional === undefined ) {
		traditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;
	}

	// If an array was passed in, assume that it is an array of form elements.
	if ( jQuery.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {
		// Serialize the form elements
		jQuery.each( a, function() {
			add( this.name, this.value );
		});

	} else {
		// If traditional, encode the "old" way (the way 1.3.2 or older
		// did it), otherwise encode params recursively.
		for ( prefix in a ) {
			buildParams( prefix, a[ prefix ], traditional, add );
		}
	}

	// Return the resulting serialization
	return s.join( "&" ).replace( r20, "+" );
};

function buildParams( prefix, obj, traditional, add ) {
	var name;

	if ( jQuery.isArray( obj ) ) {
		// Serialize array item.
		jQuery.each( obj, function( i, v ) {
			if ( traditional || rbracket.test( prefix ) ) {
				// Treat each array item as a scalar.
				add( prefix, v );

			} else {
				// Item is non-scalar (array or object), encode its numeric index.
				buildParams( prefix + "[" + ( typeof v === "object" ? i : "" ) + "]", v, traditional, add );
			}
		});

	} else if ( !traditional && jQuery.type( obj ) === "object" ) {
		// Serialize object item.
		for ( name in obj ) {
			buildParams( prefix + "[" + name + "]", obj[ name ], traditional, add );
		}

	} else {
		// Serialize scalar item.
		add( prefix, obj );
	}
}
jQuery.each( ("blur focus focusin focusout load resize scroll unload click dblclick " +
	"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave " +
	"change select submit keydown keypress keyup error contextmenu").split(" "), function( i, name ) {

	// Handle event binding
	jQuery.fn[ name ] = function( data, fn ) {
		return arguments.length > 0 ?
			this.on( name, null, data, fn ) :
			this.trigger( name );
	};
});

jQuery.fn.extend({
	hover: function( fnOver, fnOut ) {
		return this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );
	},

	bind: function( types, data, fn ) {
		return this.on( types, null, data, fn );
	},
	unbind: function( types, fn ) {
		return this.off( types, null, fn );
	},

	delegate: function( selector, types, data, fn ) {
		return this.on( types, selector, data, fn );
	},
	undelegate: function( selector, types, fn ) {
		// ( namespace ) or ( selector, types [, fn] )
		return arguments.length === 1 ? this.off( selector, "**" ) : this.off( types, selector || "**", fn );
	}
});
var
	// Document location
	ajaxLocParts,
	ajaxLocation,
	ajax_nonce = jQuery.now(),

	ajax_rquery = /\?/,
	rhash = /#.*$/,
	rts = /([?&])_=[^&]*/,
	rheaders = /^(.*?):[ \t]*([^\r\n]*)\r?$/mg, // IE leaves an \r character at EOL
	// #7653, #8125, #8152: local protocol detection
	rlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
	rnoContent = /^(?:GET|HEAD)$/,
	rprotocol = /^\/\//,
	rurl = /^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,

	// Keep a copy of the old load method
	_load = jQuery.fn.load,

	/* Prefilters
	 * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)
	 * 2) These are called:
	 *    - BEFORE asking for a transport
	 *    - AFTER param serialization (s.data is a string if s.processData is true)
	 * 3) key is the dataType
	 * 4) the catchall symbol "*" can be used
	 * 5) execution will start with transport dataType and THEN continue down to "*" if needed
	 */
	prefilters = {},

	/* Transports bindings
	 * 1) key is the dataType
	 * 2) the catchall symbol "*" can be used
	 * 3) selection will start with transport dataType and THEN go to "*" if needed
	 */
	transports = {},

	// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression
	allTypes = "*/".concat("*");

// #8138, IE may throw an exception when accessing
// a field from window.location if document.domain has been set
try {
	ajaxLocation = location.href;
} catch( e ) {
	// Use the href attribute of an A element
	// since IE will modify it given document.location
	ajaxLocation = document.createElement( "a" );
	ajaxLocation.href = "";
	ajaxLocation = ajaxLocation.href;
}

// Segment location into parts
ajaxLocParts = rurl.exec( ajaxLocation.toLowerCase() ) || [];

// Base "constructor" for jQuery.ajaxPrefilter and jQuery.ajaxTransport
function addToPrefiltersOrTransports( structure ) {

	// dataTypeExpression is optional and defaults to "*"
	return function( dataTypeExpression, func ) {

		if ( typeof dataTypeExpression !== "string" ) {
			func = dataTypeExpression;
			dataTypeExpression = "*";
		}

		var dataType,
			i = 0,
			dataTypes = dataTypeExpression.toLowerCase().match( core_rnotwhite ) || [];

		if ( jQuery.isFunction( func ) ) {
			// For each dataType in the dataTypeExpression
			while ( (dataType = dataTypes[i++]) ) {
				// Prepend if requested
				if ( dataType[0] === "+" ) {
					dataType = dataType.slice( 1 ) || "*";
					(structure[ dataType ] = structure[ dataType ] || []).unshift( func );

				// Otherwise append
				} else {
					(structure[ dataType ] = structure[ dataType ] || []).push( func );
				}
			}
		}
	};
}

// Base inspection function for prefilters and transports
function inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {

	var inspected = {},
		seekingTransport = ( structure === transports );

	function inspect( dataType ) {
		var selected;
		inspected[ dataType ] = true;
		jQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {
			var dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );
			if( typeof dataTypeOrTransport === "string" && !seekingTransport && !inspected[ dataTypeOrTransport ] ) {
				options.dataTypes.unshift( dataTypeOrTransport );
				inspect( dataTypeOrTransport );
				return false;
			} else if ( seekingTransport ) {
				return !( selected = dataTypeOrTransport );
			}
		});
		return selected;
	}

	return inspect( options.dataTypes[ 0 ] ) || !inspected[ "*" ] && inspect( "*" );
}

// A special extend for ajax options
// that takes "flat" options (not to be deep extended)
// Fixes #9887
function ajaxExtend( target, src ) {
	var deep, key,
		flatOptions = jQuery.ajaxSettings.flatOptions || {};

	for ( key in src ) {
		if ( src[ key ] !== undefined ) {
			( flatOptions[ key ] ? target : ( deep || (deep = {}) ) )[ key ] = src[ key ];
		}
	}
	if ( deep ) {
		jQuery.extend( true, target, deep );
	}

	return target;
}

jQuery.fn.load = function( url, params, callback ) {
	if ( typeof url !== "string" && _load ) {
		return _load.apply( this, arguments );
	}

	var selector, response, type,
		self = this,
		off = url.indexOf(" ");

	if ( off >= 0 ) {
		selector = url.slice( off, url.length );
		url = url.slice( 0, off );
	}

	// If it's a function
	if ( jQuery.isFunction( params ) ) {

		// We assume that it's the callback
		callback = params;
		params = undefined;

	// Otherwise, build a param string
	} else if ( params && typeof params === "object" ) {
		type = "POST";
	}

	// If we have elements to modify, make the request
	if ( self.length > 0 ) {
		jQuery.ajax({
			url: url,

			// if "type" variable is undefined, then "GET" method will be used
			type: type,
			dataType: "html",
			data: params
		}).done(function( responseText ) {

			// Save response for use in complete callback
			response = arguments;

			self.html( selector ?

				// If a selector was specified, locate the right elements in a dummy div
				// Exclude scripts to avoid IE 'Permission Denied' errors
				jQuery("<div>").append( jQuery.parseHTML( responseText ) ).find( selector ) :

				// Otherwise use the full result
				responseText );

		}).complete( callback && function( jqXHR, status ) {
			self.each( callback, response || [ jqXHR.responseText, status, jqXHR ] );
		});
	}

	return this;
};

// Attach a bunch of functions for handling common AJAX events
jQuery.each( [ "ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend" ], function( i, type ){
	jQuery.fn[ type ] = function( fn ){
		return this.on( type, fn );
	};
});

jQuery.extend({

	// Counter for holding the number of active queries
	active: 0,

	// Last-Modified header cache for next request
	lastModified: {},
	etag: {},

	ajaxSettings: {
		url: ajaxLocation,
		type: "GET",
		isLocal: rlocalProtocol.test( ajaxLocParts[ 1 ] ),
		global: true,
		processData: true,
		async: true,
		contentType: "application/x-www-form-urlencoded; charset=UTF-8",
		/*
		timeout: 0,
		data: null,
		dataType: null,
		username: null,
		password: null,
		cache: null,
		throws: false,
		traditional: false,
		headers: {},
		*/

		accepts: {
			"*": allTypes,
			text: "text/plain",
			html: "text/html",
			xml: "application/xml, text/xml",
			json: "application/json, text/javascript"
		},

		contents: {
			xml: /xml/,
			html: /html/,
			json: /json/
		},

		responseFields: {
			xml: "responseXML",
			text: "responseText",
			json: "responseJSON"
		},

		// Data converters
		// Keys separate source (or catchall "*") and destination types with a single space
		converters: {

			// Convert anything to text
			"* text": String,

			// Text to html (true = no transformation)
			"text html": true,

			// Evaluate text as a json expression
			"text json": jQuery.parseJSON,

			// Parse text as xml
			"text xml": jQuery.parseXML
		},

		// For options that shouldn't be deep extended:
		// you can add your own custom options here if
		// and when you create one that shouldn't be
		// deep extended (see ajaxExtend)
		flatOptions: {
			url: true,
			context: true
		}
	},

	// Creates a full fledged settings object into target
	// with both ajaxSettings and settings fields.
	// If target is omitted, writes into ajaxSettings.
	ajaxSetup: function( target, settings ) {
		return settings ?

			// Building a settings object
			ajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :

			// Extending ajaxSettings
			ajaxExtend( jQuery.ajaxSettings, target );
	},

	ajaxPrefilter: addToPrefiltersOrTransports( prefilters ),
	ajaxTransport: addToPrefiltersOrTransports( transports ),

	// Main method
	ajax: function( url, options ) {

		// If url is an object, simulate pre-1.5 signature
		if ( typeof url === "object" ) {
			options = url;
			url = undefined;
		}

		// Force options to be an object
		options = options || {};

		var // Cross-domain detection vars
			parts,
			// Loop variable
			i,
			// URL without anti-cache param
			cacheURL,
			// Response headers as string
			responseHeadersString,
			// timeout handle
			timeoutTimer,

			// To know if global events are to be dispatched
			fireGlobals,

			transport,
			// Response headers
			responseHeaders,
			// Create the final options object
			s = jQuery.ajaxSetup( {}, options ),
			// Callbacks context
			callbackContext = s.context || s,
			// Context for global events is callbackContext if it is a DOM node or jQuery collection
			globalEventContext = s.context && ( callbackContext.nodeType || callbackContext.jquery ) ?
				jQuery( callbackContext ) :
				jQuery.event,
			// Deferreds
			deferred = jQuery.Deferred(),
			completeDeferred = jQuery.Callbacks("once memory"),
			// Status-dependent callbacks
			statusCode = s.statusCode || {},
			// Headers (they are sent all at once)
			requestHeaders = {},
			requestHeadersNames = {},
			// The jqXHR state
			state = 0,
			// Default abort message
			strAbort = "canceled",
			// Fake xhr
			jqXHR = {
				readyState: 0,

				// Builds headers hashtable if needed
				getResponseHeader: function( key ) {
					var match;
					if ( state === 2 ) {
						if ( !responseHeaders ) {
							responseHeaders = {};
							while ( (match = rheaders.exec( responseHeadersString )) ) {
								responseHeaders[ match[1].toLowerCase() ] = match[ 2 ];
							}
						}
						match = responseHeaders[ key.toLowerCase() ];
					}
					return match == null ? null : match;
				},

				// Raw string
				getAllResponseHeaders: function() {
					return state === 2 ? responseHeadersString : null;
				},

				// Caches the header
				setRequestHeader: function( name, value ) {
					var lname = name.toLowerCase();
					if ( !state ) {
						name = requestHeadersNames[ lname ] = requestHeadersNames[ lname ] || name;
						requestHeaders[ name ] = value;
					}
					return this;
				},

				// Overrides response content-type header
				overrideMimeType: function( type ) {
					if ( !state ) {
						s.mimeType = type;
					}
					return this;
				},

				// Status-dependent callbacks
				statusCode: function( map ) {
					var code;
					if ( map ) {
						if ( state < 2 ) {
							for ( code in map ) {
								// Lazy-add the new callback in a way that preserves old ones
								statusCode[ code ] = [ statusCode[ code ], map[ code ] ];
							}
						} else {
							// Execute the appropriate callbacks
							jqXHR.always( map[ jqXHR.status ] );
						}
					}
					return this;
				},

				// Cancel the request
				abort: function( statusText ) {
					var finalText = statusText || strAbort;
					if ( transport ) {
						transport.abort( finalText );
					}
					done( 0, finalText );
					return this;
				}
			};

		// Attach deferreds
		deferred.promise( jqXHR ).complete = completeDeferred.add;
		jqXHR.success = jqXHR.done;
		jqXHR.error = jqXHR.fail;

		// Remove hash character (#7531: and string promotion)
		// Add protocol if not provided (#5866: IE7 issue with protocol-less urls)
		// Handle falsy url in the settings object (#10093: consistency with old signature)
		// We also use the url parameter if available
		s.url = ( ( url || s.url || ajaxLocation ) + "" ).replace( rhash, "" ).replace( rprotocol, ajaxLocParts[ 1 ] + "//" );

		// Alias method option to type as per ticket #12004
		s.type = options.method || options.type || s.method || s.type;

		// Extract dataTypes list
		s.dataTypes = jQuery.trim( s.dataType || "*" ).toLowerCase().match( core_rnotwhite ) || [""];

		// A cross-domain request is in order when we have a protocol:host:port mismatch
		if ( s.crossDomain == null ) {
			parts = rurl.exec( s.url.toLowerCase() );
			s.crossDomain = !!( parts &&
				( parts[ 1 ] !== ajaxLocParts[ 1 ] || parts[ 2 ] !== ajaxLocParts[ 2 ] ||
					( parts[ 3 ] || ( parts[ 1 ] === "http:" ? "80" : "443" ) ) !==
						( ajaxLocParts[ 3 ] || ( ajaxLocParts[ 1 ] === "http:" ? "80" : "443" ) ) )
			);
		}

		// Convert data if not already a string
		if ( s.data && s.processData && typeof s.data !== "string" ) {
			s.data = jQuery.param( s.data, s.traditional );
		}

		// Apply prefilters
		inspectPrefiltersOrTransports( prefilters, s, options, jqXHR );

		// If request was aborted inside a prefilter, stop there
		if ( state === 2 ) {
			return jqXHR;
		}

		// We can fire global events as of now if asked to
		fireGlobals = s.global;

		// Watch for a new set of requests
		if ( fireGlobals && jQuery.active++ === 0 ) {
			jQuery.event.trigger("ajaxStart");
		}

		// Uppercase the type
		s.type = s.type.toUpperCase();

		// Determine if request has content
		s.hasContent = !rnoContent.test( s.type );

		// Save the URL in case we're toying with the If-Modified-Since
		// and/or If-None-Match header later on
		cacheURL = s.url;

		// More options handling for requests with no content
		if ( !s.hasContent ) {

			// If data is available, append data to url
			if ( s.data ) {
				cacheURL = ( s.url += ( ajax_rquery.test( cacheURL ) ? "&" : "?" ) + s.data );
				// #9682: remove data so that it's not used in an eventual retry
				delete s.data;
			}

			// Add anti-cache in url if needed
			if ( s.cache === false ) {
				s.url = rts.test( cacheURL ) ?

					// If there is already a '_' parameter, set its value
					cacheURL.replace( rts, "$1_=" + ajax_nonce++ ) :

					// Otherwise add one to the end
					cacheURL + ( ajax_rquery.test( cacheURL ) ? "&" : "?" ) + "_=" + ajax_nonce++;
			}
		}

		// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
		if ( s.ifModified ) {
			if ( jQuery.lastModified[ cacheURL ] ) {
				jqXHR.setRequestHeader( "If-Modified-Since", jQuery.lastModified[ cacheURL ] );
			}
			if ( jQuery.etag[ cacheURL ] ) {
				jqXHR.setRequestHeader( "If-None-Match", jQuery.etag[ cacheURL ] );
			}
		}

		// Set the correct header, if data is being sent
		if ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {
			jqXHR.setRequestHeader( "Content-Type", s.contentType );
		}

		// Set the Accepts header for the server, depending on the dataType
		jqXHR.setRequestHeader(
			"Accept",
			s.dataTypes[ 0 ] && s.accepts[ s.dataTypes[0] ] ?
				s.accepts[ s.dataTypes[0] ] + ( s.dataTypes[ 0 ] !== "*" ? ", " + allTypes + "; q=0.01" : "" ) :
				s.accepts[ "*" ]
		);

		// Check for headers option
		for ( i in s.headers ) {
			jqXHR.setRequestHeader( i, s.headers[ i ] );
		}

		// Allow custom headers/mimetypes and early abort
		if ( s.beforeSend && ( s.beforeSend.call( callbackContext, jqXHR, s ) === false || state === 2 ) ) {
			// Abort if not done already and return
			return jqXHR.abort();
		}

		// aborting is no longer a cancellation
		strAbort = "abort";

		// Install callbacks on deferreds
		for ( i in { success: 1, error: 1, complete: 1 } ) {
			jqXHR[ i ]( s[ i ] );
		}

		// Get transport
		transport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );

		// If no transport, we auto-abort
		if ( !transport ) {
			done( -1, "No Transport" );
		} else {
			jqXHR.readyState = 1;

			// Send global event
			if ( fireGlobals ) {
				globalEventContext.trigger( "ajaxSend", [ jqXHR, s ] );
			}
			// Timeout
			if ( s.async && s.timeout > 0 ) {
				timeoutTimer = setTimeout(function() {
					jqXHR.abort("timeout");
				}, s.timeout );
			}

			try {
				state = 1;
				transport.send( requestHeaders, done );
			} catch ( e ) {
				// Propagate exception as error if not done
				if ( state < 2 ) {
					done( -1, e );
				// Simply rethrow otherwise
				} else {
					throw e;
				}
			}
		}

		// Callback for when everything is done
		function done( status, nativeStatusText, responses, headers ) {
			var isSuccess, success, error, response, modified,
				statusText = nativeStatusText;

			// Called once
			if ( state === 2 ) {
				return;
			}

			// State is "done" now
			state = 2;

			// Clear timeout if it exists
			if ( timeoutTimer ) {
				clearTimeout( timeoutTimer );
			}

			// Dereference transport for early garbage collection
			// (no matter how long the jqXHR object will be used)
			transport = undefined;

			// Cache response headers
			responseHeadersString = headers || "";

			// Set readyState
			jqXHR.readyState = status > 0 ? 4 : 0;

			// Determine if successful
			isSuccess = status >= 200 && status < 300 || status === 304;

			// Get response data
			if ( responses ) {
				response = ajaxHandleResponses( s, jqXHR, responses );
			}

			// Convert no matter what (that way responseXXX fields are always set)
			response = ajaxConvert( s, response, jqXHR, isSuccess );

			// If successful, handle type chaining
			if ( isSuccess ) {

				// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
				if ( s.ifModified ) {
					modified = jqXHR.getResponseHeader("Last-Modified");
					if ( modified ) {
						jQuery.lastModified[ cacheURL ] = modified;
					}
					modified = jqXHR.getResponseHeader("etag");
					if ( modified ) {
						jQuery.etag[ cacheURL ] = modified;
					}
				}

				// if no content
				if ( status === 204 || s.type === "HEAD" ) {
					statusText = "nocontent";

				// if not modified
				} else if ( status === 304 ) {
					statusText = "notmodified";

				// If we have data, let's convert it
				} else {
					statusText = response.state;
					success = response.data;
					error = response.error;
					isSuccess = !error;
				}
			} else {
				// We extract error from statusText
				// then normalize statusText and status for non-aborts
				error = statusText;
				if ( status || !statusText ) {
					statusText = "error";
					if ( status < 0 ) {
						status = 0;
					}
				}
			}

			// Set data for the fake xhr object
			jqXHR.status = status;
			jqXHR.statusText = ( nativeStatusText || statusText ) + "";

			// Success/Error
			if ( isSuccess ) {
				deferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );
			} else {
				deferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );
			}

			// Status-dependent callbacks
			jqXHR.statusCode( statusCode );
			statusCode = undefined;

			if ( fireGlobals ) {
				globalEventContext.trigger( isSuccess ? "ajaxSuccess" : "ajaxError",
					[ jqXHR, s, isSuccess ? success : error ] );
			}

			// Complete
			completeDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );

			if ( fireGlobals ) {
				globalEventContext.trigger( "ajaxComplete", [ jqXHR, s ] );
				// Handle the global AJAX counter
				if ( !( --jQuery.active ) ) {
					jQuery.event.trigger("ajaxStop");
				}
			}
		}

		return jqXHR;
	},

	getJSON: function( url, data, callback ) {
		return jQuery.get( url, data, callback, "json" );
	},

	getScript: function( url, callback ) {
		return jQuery.get( url, undefined, callback, "script" );
	}
});

jQuery.each( [ "get", "post" ], function( i, method ) {
	jQuery[ method ] = function( url, data, callback, type ) {
		// shift arguments if data argument was omitted
		if ( jQuery.isFunction( data ) ) {
			type = type || callback;
			callback = data;
			data = undefined;
		}

		return jQuery.ajax({
			url: url,
			type: method,
			dataType: type,
			data: data,
			success: callback
		});
	};
});

/* Handles responses to an ajax request:
 * - finds the right dataType (mediates between content-type and expected dataType)
 * - returns the corresponding response
 */
function ajaxHandleResponses( s, jqXHR, responses ) {
	var firstDataType, ct, finalDataType, type,
		contents = s.contents,
		dataTypes = s.dataTypes;

	// Remove auto dataType and get content-type in the process
	while( dataTypes[ 0 ] === "*" ) {
		dataTypes.shift();
		if ( ct === undefined ) {
			ct = s.mimeType || jqXHR.getResponseHeader("Content-Type");
		}
	}

	// Check if we're dealing with a known content-type
	if ( ct ) {
		for ( type in contents ) {
			if ( contents[ type ] && contents[ type ].test( ct ) ) {
				dataTypes.unshift( type );
				break;
			}
		}
	}

	// Check to see if we have a response for the expected dataType
	if ( dataTypes[ 0 ] in responses ) {
		finalDataType = dataTypes[ 0 ];
	} else {
		// Try convertible dataTypes
		for ( type in responses ) {
			if ( !dataTypes[ 0 ] || s.converters[ type + " " + dataTypes[0] ] ) {
				finalDataType = type;
				break;
			}
			if ( !firstDataType ) {
				firstDataType = type;
			}
		}
		// Or just use first one
		finalDataType = finalDataType || firstDataType;
	}

	// If we found a dataType
	// We add the dataType to the list if needed
	// and return the corresponding response
	if ( finalDataType ) {
		if ( finalDataType !== dataTypes[ 0 ] ) {
			dataTypes.unshift( finalDataType );
		}
		return responses[ finalDataType ];
	}
}

/* Chain conversions given the request and the original response
 * Also sets the responseXXX fields on the jqXHR instance
 */
function ajaxConvert( s, response, jqXHR, isSuccess ) {
	var conv2, current, conv, tmp, prev,
		converters = {},
		// Work with a copy of dataTypes in case we need to modify it for conversion
		dataTypes = s.dataTypes.slice();

	// Create converters map with lowercased keys
	if ( dataTypes[ 1 ] ) {
		for ( conv in s.converters ) {
			converters[ conv.toLowerCase() ] = s.converters[ conv ];
		}
	}

	current = dataTypes.shift();

	// Convert to each sequential dataType
	while ( current ) {

		if ( s.responseFields[ current ] ) {
			jqXHR[ s.responseFields[ current ] ] = response;
		}

		// Apply the dataFilter if provided
		if ( !prev && isSuccess && s.dataFilter ) {
			response = s.dataFilter( response, s.dataType );
		}

		prev = current;
		current = dataTypes.shift();

		if ( current ) {

			// There's only work to do if current dataType is non-auto
			if ( current === "*" ) {

				current = prev;

			// Convert response if prev dataType is non-auto and differs from current
			} else if ( prev !== "*" && prev !== current ) {

				// Seek a direct converter
				conv = converters[ prev + " " + current ] || converters[ "* " + current ];

				// If none found, seek a pair
				if ( !conv ) {
					for ( conv2 in converters ) {

						// If conv2 outputs current
						tmp = conv2.split( " " );
						if ( tmp[ 1 ] === current ) {

							// If prev can be converted to accepted input
							conv = converters[ prev + " " + tmp[ 0 ] ] ||
								converters[ "* " + tmp[ 0 ] ];
							if ( conv ) {
								// Condense equivalence converters
								if ( conv === true ) {
									conv = converters[ conv2 ];

								// Otherwise, insert the intermediate dataType
								} else if ( converters[ conv2 ] !== true ) {
									current = tmp[ 0 ];
									dataTypes.unshift( tmp[ 1 ] );
								}
								break;
							}
						}
					}
				}

				// Apply converter (if not an equivalence)
				if ( conv !== true ) {

					// Unless errors are allowed to bubble, catch and return them
					if ( conv && s[ "throws" ] ) {
						response = conv( response );
					} else {
						try {
							response = conv( response );
						} catch ( e ) {
							return { state: "parsererror", error: conv ? e : "No conversion from " + prev + " to " + current };
						}
					}
				}
			}
		}
	}

	return { state: "success", data: response };
}
// Install script dataType
jQuery.ajaxSetup({
	accepts: {
		script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
	},
	contents: {
		script: /(?:java|ecma)script/
	},
	converters: {
		"text script": function( text ) {
			jQuery.globalEval( text );
			return text;
		}
	}
});

// Handle cache's special case and global
jQuery.ajaxPrefilter( "script", function( s ) {
	if ( s.cache === undefined ) {
		s.cache = false;
	}
	if ( s.crossDomain ) {
		s.type = "GET";
		s.global = false;
	}
});

// Bind script tag hack transport
jQuery.ajaxTransport( "script", function(s) {

	// This transport only deals with cross domain requests
	if ( s.crossDomain ) {

		var script,
			head = document.head || jQuery("head")[0] || document.documentElement;

		return {

			send: function( _, callback ) {

				script = document.createElement("script");

				script.async = true;

				if ( s.scriptCharset ) {
					script.charset = s.scriptCharset;
				}

				script.src = s.url;

				// Attach handlers for all browsers
				script.onload = script.onreadystatechange = function( _, isAbort ) {

					if ( isAbort || !script.readyState || /loaded|complete/.test( script.readyState ) ) {

						// Handle memory leak in IE
						script.onload = script.onreadystatechange = null;

						// Remove the script
						if ( script.parentNode ) {
							script.parentNode.removeChild( script );
						}

						// Dereference the script
						script = null;

						// Callback if not abort
						if ( !isAbort ) {
							callback( 200, "success" );
						}
					}
				};

				// Circumvent IE6 bugs with base elements (#2709 and #4378) by prepending
				// Use native DOM manipulation to avoid our domManip AJAX trickery
				head.insertBefore( script, head.firstChild );
			},

			abort: function() {
				if ( script ) {
					script.onload( undefined, true );
				}
			}
		};
	}
});
var oldCallbacks = [],
	rjsonp = /(=)\?(?=&|$)|\?\?/;

// Default jsonp settings
jQuery.ajaxSetup({
	jsonp: "callback",
	jsonpCallback: function() {
		var callback = oldCallbacks.pop() || ( jQuery.expando + "_" + ( ajax_nonce++ ) );
		this[ callback ] = true;
		return callback;
	}
});

// Detect, normalize options and install callbacks for jsonp requests
jQuery.ajaxPrefilter( "json jsonp", function( s, originalSettings, jqXHR ) {

	var callbackName, overwritten, responseContainer,
		jsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?
			"url" :
			typeof s.data === "string" && !( s.contentType || "" ).indexOf("application/x-www-form-urlencoded") && rjsonp.test( s.data ) && "data"
		);

	// Handle iff the expected data type is "jsonp" or we have a parameter to set
	if ( jsonProp || s.dataTypes[ 0 ] === "jsonp" ) {

		// Get callback name, remembering preexisting value associated with it
		callbackName = s.jsonpCallback = jQuery.isFunction( s.jsonpCallback ) ?
			s.jsonpCallback() :
			s.jsonpCallback;

		// Insert callback into url or form data
		if ( jsonProp ) {
			s[ jsonProp ] = s[ jsonProp ].replace( rjsonp, "$1" + callbackName );
		} else if ( s.jsonp !== false ) {
			s.url += ( ajax_rquery.test( s.url ) ? "&" : "?" ) + s.jsonp + "=" + callbackName;
		}

		// Use data converter to retrieve json after script execution
		s.converters["script json"] = function() {
			if ( !responseContainer ) {
				jQuery.error( callbackName + " was not called" );
			}
			return responseContainer[ 0 ];
		};

		// force json dataType
		s.dataTypes[ 0 ] = "json";

		// Install callback
		overwritten = window[ callbackName ];
		window[ callbackName ] = function() {
			responseContainer = arguments;
		};

		// Clean-up function (fires after converters)
		jqXHR.always(function() {
			// Restore preexisting value
			window[ callbackName ] = overwritten;

			// Save back as free
			if ( s[ callbackName ] ) {
				// make sure that re-using the options doesn't screw things around
				s.jsonpCallback = originalSettings.jsonpCallback;

				// save the callback name for future use
				oldCallbacks.push( callbackName );
			}

			// Call if it was a function and we have a response
			if ( responseContainer && jQuery.isFunction( overwritten ) ) {
				overwritten( responseContainer[ 0 ] );
			}

			responseContainer = overwritten = undefined;
		});

		// Delegate to script
		return "script";
	}
});
var xhrCallbacks, xhrSupported,
	xhrId = 0,
	// #5280: Internet Explorer will keep connections alive if we don't abort on unload
	xhrOnUnloadAbort = window.ActiveXObject && function() {
		// Abort all pending requests
		var key;
		for ( key in xhrCallbacks ) {
			xhrCallbacks[ key ]( undefined, true );
		}
	};

// Functions to create xhrs
function createStandardXHR() {
	try {
		return new window.XMLHttpRequest();
	} catch( e ) {}
}

function createActiveXHR() {
	try {
		return new window.ActiveXObject("Microsoft.XMLHTTP");
	} catch( e ) {}
}

// Create the request object
// (This is still attached to ajaxSettings for backward compatibility)
jQuery.ajaxSettings.xhr = window.ActiveXObject ?
	/* Microsoft failed to properly
	 * implement the XMLHttpRequest in IE7 (can't request local files),
	 * so we use the ActiveXObject when it is available
	 * Additionally XMLHttpRequest can be disabled in IE7/IE8 so
	 * we need a fallback.
	 */
	function() {
		return !this.isLocal && createStandardXHR() || createActiveXHR();
	} :
	// For all other browsers, use the standard XMLHttpRequest object
	createStandardXHR;

// Determine support properties
xhrSupported = jQuery.ajaxSettings.xhr();
jQuery.support.cors = !!xhrSupported && ( "withCredentials" in xhrSupported );
xhrSupported = jQuery.support.ajax = !!xhrSupported;

// Create transport if the browser can provide an xhr
if ( xhrSupported ) {

	jQuery.ajaxTransport(function( s ) {
		// Cross domain only allowed if supported through XMLHttpRequest
		if ( !s.crossDomain || jQuery.support.cors ) {

			var callback;

			return {
				send: function( headers, complete ) {

					// Get a new xhr
					var handle, i,
						xhr = s.xhr();

					// Open the socket
					// Passing null username, generates a login popup on Opera (#2865)
					if ( s.username ) {
						xhr.open( s.type, s.url, s.async, s.username, s.password );
					} else {
						xhr.open( s.type, s.url, s.async );
					}

					// Apply custom fields if provided
					if ( s.xhrFields ) {
						for ( i in s.xhrFields ) {
							xhr[ i ] = s.xhrFields[ i ];
						}
					}

					// Override mime type if needed
					if ( s.mimeType && xhr.overrideMimeType ) {
						xhr.overrideMimeType( s.mimeType );
					}

					// X-Requested-With header
					// For cross-domain requests, seeing as conditions for a preflight are
					// akin to a jigsaw puzzle, we simply never set it to be sure.
					// (it can always be set on a per-request basis or even using ajaxSetup)
					// For same-domain requests, won't change header if already provided.
					if ( !s.crossDomain && !headers["X-Requested-With"] ) {
						headers["X-Requested-With"] = "XMLHttpRequest";
					}

					// Need an extra try/catch for cross domain requests in Firefox 3
					try {
						for ( i in headers ) {
							xhr.setRequestHeader( i, headers[ i ] );
						}
					} catch( err ) {}

					// Do send the request
					// This may raise an exception which is actually
					// handled in jQuery.ajax (so no try/catch here)
					xhr.send( ( s.hasContent && s.data ) || null );

					// Listener
					callback = function( _, isAbort ) {
						var status, responseHeaders, statusText, responses;

						// Firefox throws exceptions when accessing properties
						// of an xhr when a network error occurred
						// http://helpful.knobs-dials.com/index.php/Component_returned_failure_code:_0x80040111_(NS_ERROR_NOT_AVAILABLE)
						try {

							// Was never called and is aborted or complete
							if ( callback && ( isAbort || xhr.readyState === 4 ) ) {

								// Only called once
								callback = undefined;

								// Do not keep as active anymore
								if ( handle ) {
									xhr.onreadystatechange = jQuery.noop;
									if ( xhrOnUnloadAbort ) {
										delete xhrCallbacks[ handle ];
									}
								}

								// If it's an abort
								if ( isAbort ) {
									// Abort it manually if needed
									if ( xhr.readyState !== 4 ) {
										xhr.abort();
									}
								} else {
									responses = {};
									status = xhr.status;
									responseHeaders = xhr.getAllResponseHeaders();

									// When requesting binary data, IE6-9 will throw an exception
									// on any attempt to access responseText (#11426)
									if ( typeof xhr.responseText === "string" ) {
										responses.text = xhr.responseText;
									}

									// Firefox throws an exception when accessing
									// statusText for faulty cross-domain requests
									try {
										statusText = xhr.statusText;
									} catch( e ) {
										// We normalize with Webkit giving an empty statusText
										statusText = "";
									}

									// Filter status for non standard behaviors

									// If the request is local and we have data: assume a success
									// (success with no data won't get notified, that's the best we
									// can do given current implementations)
									if ( !status && s.isLocal && !s.crossDomain ) {
										status = responses.text ? 200 : 404;
									// IE - #1450: sometimes returns 1223 when it should be 204
									} else if ( status === 1223 ) {
										status = 204;
									}
								}
							}
						} catch( firefoxAccessException ) {
							if ( !isAbort ) {
								complete( -1, firefoxAccessException );
							}
						}

						// Call complete if needed
						if ( responses ) {
							complete( status, statusText, responses, responseHeaders );
						}
					};

					if ( !s.async ) {
						// if we're in sync mode we fire the callback
						callback();
					} else if ( xhr.readyState === 4 ) {
						// (IE6 & IE7) if it's in cache and has been
						// retrieved directly we need to fire the callback
						setTimeout( callback );
					} else {
						handle = ++xhrId;
						if ( xhrOnUnloadAbort ) {
							// Create the active xhrs callbacks list if needed
							// and attach the unload handler
							if ( !xhrCallbacks ) {
								xhrCallbacks = {};
								jQuery( window ).unload( xhrOnUnloadAbort );
							}
							// Add to list of active xhrs callbacks
							xhrCallbacks[ handle ] = callback;
						}
						xhr.onreadystatechange = callback;
					}
				},

				abort: function() {
					if ( callback ) {
						callback( undefined, true );
					}
				}
			};
		}
	});
}
var fxNow, timerId,
	rfxtypes = /^(?:toggle|show|hide)$/,
	rfxnum = new RegExp( "^(?:([+-])=|)(" + core_pnum + ")([a-z%]*)$", "i" ),
	rrun = /queueHooks$/,
	animationPrefilters = [ defaultPrefilter ],
	tweeners = {
		"*": [function( prop, value ) {
			var tween = this.createTween( prop, value ),
				target = tween.cur(),
				parts = rfxnum.exec( value ),
				unit = parts && parts[ 3 ] || ( jQuery.cssNumber[ prop ] ? "" : "px" ),

				// Starting value computation is required for potential unit mismatches
				start = ( jQuery.cssNumber[ prop ] || unit !== "px" && +target ) &&
					rfxnum.exec( jQuery.css( tween.elem, prop ) ),
				scale = 1,
				maxIterations = 20;

			if ( start && start[ 3 ] !== unit ) {
				// Trust units reported by jQuery.css
				unit = unit || start[ 3 ];

				// Make sure we update the tween properties later on
				parts = parts || [];

				// Iteratively approximate from a nonzero starting point
				start = +target || 1;

				do {
					// If previous iteration zeroed out, double until we get *something*
					// Use a string for doubling factor so we don't accidentally see scale as unchanged below
					scale = scale || ".5";

					// Adjust and apply
					start = start / scale;
					jQuery.style( tween.elem, prop, start + unit );

				// Update scale, tolerating zero or NaN from tween.cur()
				// And breaking the loop if scale is unchanged or perfect, or if we've just had enough
				} while ( scale !== (scale = tween.cur() / target) && scale !== 1 && --maxIterations );
			}

			// Update tween properties
			if ( parts ) {
				tween.unit = unit;
				tween.start = +start || +target || 0;
				// If a +=/-= token was provided, we're doing a relative animation
				tween.end = parts[ 1 ] ?
					start + ( parts[ 1 ] + 1 ) * parts[ 2 ] :
					+parts[ 2 ];
			}

			return tween;
		}]
	};

// Animations created synchronously will run synchronously
function createFxNow() {
	setTimeout(function() {
		fxNow = undefined;
	});
	return ( fxNow = jQuery.now() );
}

function createTween( value, prop, animation ) {
	var tween,
		collection = ( tweeners[ prop ] || [] ).concat( tweeners[ "*" ] ),
		index = 0,
		length = collection.length;
	for ( ; index < length; index++ ) {
		if ( (tween = collection[ index ].call( animation, prop, value )) ) {

			// we're done with this property
			return tween;
		}
	}
}

function Animation( elem, properties, options ) {
	var result,
		stopped,
		index = 0,
		length = animationPrefilters.length,
		deferred = jQuery.Deferred().always( function() {
			// don't match elem in the :animated selector
			delete tick.elem;
		}),
		tick = function() {
			if ( stopped ) {
				return false;
			}
			var currentTime = fxNow || createFxNow(),
				remaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),
				// archaic crash bug won't allow us to use 1 - ( 0.5 || 0 ) (#12497)
				temp = remaining / animation.duration || 0,
				percent = 1 - temp,
				index = 0,
				length = animation.tweens.length;

			for ( ; index < length ; index++ ) {
				animation.tweens[ index ].run( percent );
			}

			deferred.notifyWith( elem, [ animation, percent, remaining ]);

			if ( percent < 1 && length ) {
				return remaining;
			} else {
				deferred.resolveWith( elem, [ animation ] );
				return false;
			}
		},
		animation = deferred.promise({
			elem: elem,
			props: jQuery.extend( {}, properties ),
			opts: jQuery.extend( true, { specialEasing: {} }, options ),
			originalProperties: properties,
			originalOptions: options,
			startTime: fxNow || createFxNow(),
			duration: options.duration,
			tweens: [],
			createTween: function( prop, end ) {
				var tween = jQuery.Tween( elem, animation.opts, prop, end,
						animation.opts.specialEasing[ prop ] || animation.opts.easing );
				animation.tweens.push( tween );
				return tween;
			},
			stop: function( gotoEnd ) {
				var index = 0,
					// if we are going to the end, we want to run all the tweens
					// otherwise we skip this part
					length = gotoEnd ? animation.tweens.length : 0;
				if ( stopped ) {
					return this;
				}
				stopped = true;
				for ( ; index < length ; index++ ) {
					animation.tweens[ index ].run( 1 );
				}

				// resolve when we played the last frame
				// otherwise, reject
				if ( gotoEnd ) {
					deferred.resolveWith( elem, [ animation, gotoEnd ] );
				} else {
					deferred.rejectWith( elem, [ animation, gotoEnd ] );
				}
				return this;
			}
		}),
		props = animation.props;

	propFilter( props, animation.opts.specialEasing );

	for ( ; index < length ; index++ ) {
		result = animationPrefilters[ index ].call( animation, elem, props, animation.opts );
		if ( result ) {
			return result;
		}
	}

	jQuery.map( props, createTween, animation );

	if ( jQuery.isFunction( animation.opts.start ) ) {
		animation.opts.start.call( elem, animation );
	}

	jQuery.fx.timer(
		jQuery.extend( tick, {
			elem: elem,
			anim: animation,
			queue: animation.opts.queue
		})
	);

	// attach callbacks from options
	return animation.progress( animation.opts.progress )
		.done( animation.opts.done, animation.opts.complete )
		.fail( animation.opts.fail )
		.always( animation.opts.always );
}

function propFilter( props, specialEasing ) {
	var index, name, easing, value, hooks;

	// camelCase, specialEasing and expand cssHook pass
	for ( index in props ) {
		name = jQuery.camelCase( index );
		easing = specialEasing[ name ];
		value = props[ index ];
		if ( jQuery.isArray( value ) ) {
			easing = value[ 1 ];
			value = props[ index ] = value[ 0 ];
		}

		if ( index !== name ) {
			props[ name ] = value;
			delete props[ index ];
		}

		hooks = jQuery.cssHooks[ name ];
		if ( hooks && "expand" in hooks ) {
			value = hooks.expand( value );
			delete props[ name ];

			// not quite $.extend, this wont overwrite keys already present.
			// also - reusing 'index' from above because we have the correct "name"
			for ( index in value ) {
				if ( !( index in props ) ) {
					props[ index ] = value[ index ];
					specialEasing[ index ] = easing;
				}
			}
		} else {
			specialEasing[ name ] = easing;
		}
	}
}

jQuery.Animation = jQuery.extend( Animation, {

	tweener: function( props, callback ) {
		if ( jQuery.isFunction( props ) ) {
			callback = props;
			props = [ "*" ];
		} else {
			props = props.split(" ");
		}

		var prop,
			index = 0,
			length = props.length;

		for ( ; index < length ; index++ ) {
			prop = props[ index ];
			tweeners[ prop ] = tweeners[ prop ] || [];
			tweeners[ prop ].unshift( callback );
		}
	},

	prefilter: function( callback, prepend ) {
		if ( prepend ) {
			animationPrefilters.unshift( callback );
		} else {
			animationPrefilters.push( callback );
		}
	}
});

function defaultPrefilter( elem, props, opts ) {
	/* jshint validthis: true */
	var prop, value, toggle, tween, hooks, oldfire,
		anim = this,
		orig = {},
		style = elem.style,
		hidden = elem.nodeType && isHidden( elem ),
		dataShow = jQuery._data( elem, "fxshow" );

	// handle queue: false promises
	if ( !opts.queue ) {
		hooks = jQuery._queueHooks( elem, "fx" );
		if ( hooks.unqueued == null ) {
			hooks.unqueued = 0;
			oldfire = hooks.empty.fire;
			hooks.empty.fire = function() {
				if ( !hooks.unqueued ) {
					oldfire();
				}
			};
		}
		hooks.unqueued++;

		anim.always(function() {
			// doing this makes sure that the complete handler will be called
			// before this completes
			anim.always(function() {
				hooks.unqueued--;
				if ( !jQuery.queue( elem, "fx" ).length ) {
					hooks.empty.fire();
				}
			});
		});
	}

	// height/width overflow pass
	if ( elem.nodeType === 1 && ( "height" in props || "width" in props ) ) {
		// Make sure that nothing sneaks out
		// Record all 3 overflow attributes because IE does not
		// change the overflow attribute when overflowX and
		// overflowY are set to the same value
		opts.overflow = [ style.overflow, style.overflowX, style.overflowY ];

		// Set display property to inline-block for height/width
		// animations on inline elements that are having width/height animated
		if ( jQuery.css( elem, "display" ) === "inline" &&
				jQuery.css( elem, "float" ) === "none" ) {

			// inline-level elements accept inline-block;
			// block-level elements need to be inline with layout
			if ( !jQuery.support.inlineBlockNeedsLayout || css_defaultDisplay( elem.nodeName ) === "inline" ) {
				style.display = "inline-block";

			} else {
				style.zoom = 1;
			}
		}
	}

	if ( opts.overflow ) {
		style.overflow = "hidden";
		if ( !jQuery.support.shrinkWrapBlocks ) {
			anim.always(function() {
				style.overflow = opts.overflow[ 0 ];
				style.overflowX = opts.overflow[ 1 ];
				style.overflowY = opts.overflow[ 2 ];
			});
		}
	}


	// show/hide pass
	for ( prop in props ) {
		value = props[ prop ];
		if ( rfxtypes.exec( value ) ) {
			delete props[ prop ];
			toggle = toggle || value === "toggle";
			if ( value === ( hidden ? "hide" : "show" ) ) {
				continue;
			}
			orig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );
		}
	}

	if ( !jQuery.isEmptyObject( orig ) ) {
		if ( dataShow ) {
			if ( "hidden" in dataShow ) {
				hidden = dataShow.hidden;
			}
		} else {
			dataShow = jQuery._data( elem, "fxshow", {} );
		}

		// store state if its toggle - enables .stop().toggle() to "reverse"
		if ( toggle ) {
			dataShow.hidden = !hidden;
		}
		if ( hidden ) {
			jQuery( elem ).show();
		} else {
			anim.done(function() {
				jQuery( elem ).hide();
			});
		}
		anim.done(function() {
			var prop;
			jQuery._removeData( elem, "fxshow" );
			for ( prop in orig ) {
				jQuery.style( elem, prop, orig[ prop ] );
			}
		});
		for ( prop in orig ) {
			tween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );

			if ( !( prop in dataShow ) ) {
				dataShow[ prop ] = tween.start;
				if ( hidden ) {
					tween.end = tween.start;
					tween.start = prop === "width" || prop === "height" ? 1 : 0;
				}
			}
		}
	}
}

function Tween( elem, options, prop, end, easing ) {
	return new Tween.prototype.init( elem, options, prop, end, easing );
}
jQuery.Tween = Tween;

Tween.prototype = {
	constructor: Tween,
	init: function( elem, options, prop, end, easing, unit ) {
		this.elem = elem;
		this.prop = prop;
		this.easing = easing || "swing";
		this.options = options;
		this.start = this.now = this.cur();
		this.end = end;
		this.unit = unit || ( jQuery.cssNumber[ prop ] ? "" : "px" );
	},
	cur: function() {
		var hooks = Tween.propHooks[ this.prop ];

		return hooks && hooks.get ?
			hooks.get( this ) :
			Tween.propHooks._default.get( this );
	},
	run: function( percent ) {
		var eased,
			hooks = Tween.propHooks[ this.prop ];

		if ( this.options.duration ) {
			this.pos = eased = jQuery.easing[ this.easing ](
				percent, this.options.duration * percent, 0, 1, this.options.duration
			);
		} else {
			this.pos = eased = percent;
		}
		this.now = ( this.end - this.start ) * eased + this.start;

		if ( this.options.step ) {
			this.options.step.call( this.elem, this.now, this );
		}

		if ( hooks && hooks.set ) {
			hooks.set( this );
		} else {
			Tween.propHooks._default.set( this );
		}
		return this;
	}
};

Tween.prototype.init.prototype = Tween.prototype;

Tween.propHooks = {
	_default: {
		get: function( tween ) {
			var result;

			if ( tween.elem[ tween.prop ] != null &&
				(!tween.elem.style || tween.elem.style[ tween.prop ] == null) ) {
				return tween.elem[ tween.prop ];
			}

			// passing an empty string as a 3rd parameter to .css will automatically
			// attempt a parseFloat and fallback to a string if the parse fails
			// so, simple values such as "10px" are parsed to Float.
			// complex values such as "rotate(1rad)" are returned as is.
			result = jQuery.css( tween.elem, tween.prop, "" );
			// Empty strings, null, undefined and "auto" are converted to 0.
			return !result || result === "auto" ? 0 : result;
		},
		set: function( tween ) {
			// use step hook for back compat - use cssHook if its there - use .style if its
			// available and use plain properties where available
			if ( jQuery.fx.step[ tween.prop ] ) {
				jQuery.fx.step[ tween.prop ]( tween );
			} else if ( tween.elem.style && ( tween.elem.style[ jQuery.cssProps[ tween.prop ] ] != null || jQuery.cssHooks[ tween.prop ] ) ) {
				jQuery.style( tween.elem, tween.prop, tween.now + tween.unit );
			} else {
				tween.elem[ tween.prop ] = tween.now;
			}
		}
	}
};

// Support: IE <=9
// Panic based approach to setting things on disconnected nodes

Tween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {
	set: function( tween ) {
		if ( tween.elem.nodeType && tween.elem.parentNode ) {
			tween.elem[ tween.prop ] = tween.now;
		}
	}
};

jQuery.each([ "toggle", "show", "hide" ], function( i, name ) {
	var cssFn = jQuery.fn[ name ];
	jQuery.fn[ name ] = function( speed, easing, callback ) {
		return speed == null || typeof speed === "boolean" ?
			cssFn.apply( this, arguments ) :
			this.animate( genFx( name, true ), speed, easing, callback );
	};
});

jQuery.fn.extend({
	fadeTo: function( speed, to, easing, callback ) {

		// show any hidden elements after setting opacity to 0
		return this.filter( isHidden ).css( "opacity", 0 ).show()

			// animate to the value specified
			.end().animate({ opacity: to }, speed, easing, callback );
	},
	animate: function( prop, speed, easing, callback ) {
		var empty = jQuery.isEmptyObject( prop ),
			optall = jQuery.speed( speed, easing, callback ),
			doAnimation = function() {
				// Operate on a copy of prop so per-property easing won't be lost
				var anim = Animation( this, jQuery.extend( {}, prop ), optall );
				doAnimation.finish = function() {
					anim.stop( true );
				};
				// Empty animations, or finishing resolves immediately
				if ( empty || jQuery._data( this, "finish" ) ) {
					anim.stop( true );
				}
			};
			doAnimation.finish = doAnimation;

		return empty || optall.queue === false ?
			this.each( doAnimation ) :
			this.queue( optall.queue, doAnimation );
	},
	stop: function( type, clearQueue, gotoEnd ) {
		var stopQueue = function( hooks ) {
			var stop = hooks.stop;
			delete hooks.stop;
			stop( gotoEnd );
		};

		if ( typeof type !== "string" ) {
			gotoEnd = clearQueue;
			clearQueue = type;
			type = undefined;
		}
		if ( clearQueue && type !== false ) {
			this.queue( type || "fx", [] );
		}

		return this.each(function() {
			var dequeue = true,
				index = type != null && type + "queueHooks",
				timers = jQuery.timers,
				data = jQuery._data( this );

			if ( index ) {
				if ( data[ index ] && data[ index ].stop ) {
					stopQueue( data[ index ] );
				}
			} else {
				for ( index in data ) {
					if ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {
						stopQueue( data[ index ] );
					}
				}
			}

			for ( index = timers.length; index--; ) {
				if ( timers[ index ].elem === this && (type == null || timers[ index ].queue === type) ) {
					timers[ index ].anim.stop( gotoEnd );
					dequeue = false;
					timers.splice( index, 1 );
				}
			}

			// start the next in the queue if the last step wasn't forced
			// timers currently will call their complete callbacks, which will dequeue
			// but only if they were gotoEnd
			if ( dequeue || !gotoEnd ) {
				jQuery.dequeue( this, type );
			}
		});
	},
	finish: function( type ) {
		if ( type !== false ) {
			type = type || "fx";
		}
		return this.each(function() {
			var index,
				data = jQuery._data( this ),
				queue = data[ type + "queue" ],
				hooks = data[ type + "queueHooks" ],
				timers = jQuery.timers,
				length = queue ? queue.length : 0;

			// enable finishing flag on private data
			data.finish = true;

			// empty the queue first
			jQuery.queue( this, type, [] );

			if ( hooks && hooks.cur && hooks.cur.finish ) {
				hooks.cur.finish.call( this );
			}

			// look for any active animations, and finish them
			for ( index = timers.length; index--; ) {
				if ( timers[ index ].elem === this && timers[ index ].queue === type ) {
					timers[ index ].anim.stop( true );
					timers.splice( index, 1 );
				}
			}

			// look for any animations in the old queue and finish them
			for ( index = 0; index < length; index++ ) {
				if ( queue[ index ] && queue[ index ].finish ) {
					queue[ index ].finish.call( this );
				}
			}

			// turn off finishing flag
			delete data.finish;
		});
	}
});

// Generate parameters to create a standard animation
function genFx( type, includeWidth ) {
	var which,
		attrs = { height: type },
		i = 0;

	// if we include width, step value is 1 to do all cssExpand values,
	// if we don't include width, step value is 2 to skip over Left and Right
	includeWidth = includeWidth? 1 : 0;
	for( ; i < 4 ; i += 2 - includeWidth ) {
		which = cssExpand[ i ];
		attrs[ "margin" + which ] = attrs[ "padding" + which ] = type;
	}

	if ( includeWidth ) {
		attrs.opacity = attrs.width = type;
	}

	return attrs;
}

// Generate shortcuts for custom animations
jQuery.each({
	slideDown: genFx("show"),
	slideUp: genFx("hide"),
	slideToggle: genFx("toggle"),
	fadeIn: { opacity: "show" },
	fadeOut: { opacity: "hide" },
	fadeToggle: { opacity: "toggle" }
}, function( name, props ) {
	jQuery.fn[ name ] = function( speed, easing, callback ) {
		return this.animate( props, speed, easing, callback );
	};
});

jQuery.speed = function( speed, easing, fn ) {
	var opt = speed && typeof speed === "object" ? jQuery.extend( {}, speed ) : {
		complete: fn || !fn && easing ||
			jQuery.isFunction( speed ) && speed,
		duration: speed,
		easing: fn && easing || easing && !jQuery.isFunction( easing ) && easing
	};

	opt.duration = jQuery.fx.off ? 0 : typeof opt.duration === "number" ? opt.duration :
		opt.duration in jQuery.fx.speeds ? jQuery.fx.speeds[ opt.duration ] : jQuery.fx.speeds._default;

	// normalize opt.queue - true/undefined/null -> "fx"
	if ( opt.queue == null || opt.queue === true ) {
		opt.queue = "fx";
	}

	// Queueing
	opt.old = opt.complete;

	opt.complete = function() {
		if ( jQuery.isFunction( opt.old ) ) {
			opt.old.call( this );
		}

		if ( opt.queue ) {
			jQuery.dequeue( this, opt.queue );
		}
	};

	return opt;
};

jQuery.easing = {
	linear: function( p ) {
		return p;
	},
	swing: function( p ) {
		return 0.5 - Math.cos( p*Math.PI ) / 2;
	}
};

jQuery.timers = [];
jQuery.fx = Tween.prototype.init;
jQuery.fx.tick = function() {
	var timer,
		timers = jQuery.timers,
		i = 0;

	fxNow = jQuery.now();

	for ( ; i < timers.length; i++ ) {
		timer = timers[ i ];
		// Checks the timer has not already been removed
		if ( !timer() && timers[ i ] === timer ) {
			timers.splice( i--, 1 );
		}
	}

	if ( !timers.length ) {
		jQuery.fx.stop();
	}
	fxNow = undefined;
};

jQuery.fx.timer = function( timer ) {
	if ( timer() && jQuery.timers.push( timer ) ) {
		jQuery.fx.start();
	}
};

jQuery.fx.interval = 13;

jQuery.fx.start = function() {
	if ( !timerId ) {
		timerId = setInterval( jQuery.fx.tick, jQuery.fx.interval );
	}
};

jQuery.fx.stop = function() {
	clearInterval( timerId );
	timerId = null;
};

jQuery.fx.speeds = {
	slow: 600,
	fast: 200,
	// Default speed
	_default: 400
};

// Back Compat <1.8 extension point
jQuery.fx.step = {};

if ( jQuery.expr && jQuery.expr.filters ) {
	jQuery.expr.filters.animated = function( elem ) {
		return jQuery.grep(jQuery.timers, function( fn ) {
			return elem === fn.elem;
		}).length;
	};
}
jQuery.fn.offset = function( options ) {
	if ( arguments.length ) {
		return options === undefined ?
			this :
			this.each(function( i ) {
				jQuery.offset.setOffset( this, options, i );
			});
	}

	var docElem, win,
		box = { top: 0, left: 0 },
		elem = this[ 0 ],
		doc = elem && elem.ownerDocument;

	if ( !doc ) {
		return;
	}

	docElem = doc.documentElement;

	// Make sure it's not a disconnected DOM node
	if ( !jQuery.contains( docElem, elem ) ) {
		return box;
	}

	// If we don't have gBCR, just use 0,0 rather than error
	// BlackBerry 5, iOS 3 (original iPhone)
	if ( typeof elem.getBoundingClientRect !== core_strundefined ) {
		box = elem.getBoundingClientRect();
	}
	win = getWindow( doc );
	return {
		top: box.top  + ( win.pageYOffset || docElem.scrollTop )  - ( docElem.clientTop  || 0 ),
		left: box.left + ( win.pageXOffset || docElem.scrollLeft ) - ( docElem.clientLeft || 0 )
	};
};

jQuery.offset = {

	setOffset: function( elem, options, i ) {
		var position = jQuery.css( elem, "position" );

		// set position first, in-case top/left are set even on static elem
		if ( position === "static" ) {
			elem.style.position = "relative";
		}

		var curElem = jQuery( elem ),
			curOffset = curElem.offset(),
			curCSSTop = jQuery.css( elem, "top" ),
			curCSSLeft = jQuery.css( elem, "left" ),
			calculatePosition = ( position === "absolute" || position === "fixed" ) && jQuery.inArray("auto", [curCSSTop, curCSSLeft]) > -1,
			props = {}, curPosition = {}, curTop, curLeft;

		// need to be able to calculate position if either top or left is auto and position is either absolute or fixed
		if ( calculatePosition ) {
			curPosition = curElem.position();
			curTop = curPosition.top;
			curLeft = curPosition.left;
		} else {
			curTop = parseFloat( curCSSTop ) || 0;
			curLeft = parseFloat( curCSSLeft ) || 0;
		}

		if ( jQuery.isFunction( options ) ) {
			options = options.call( elem, i, curOffset );
		}

		if ( options.top != null ) {
			props.top = ( options.top - curOffset.top ) + curTop;
		}
		if ( options.left != null ) {
			props.left = ( options.left - curOffset.left ) + curLeft;
		}

		if ( "using" in options ) {
			options.using.call( elem, props );
		} else {
			curElem.css( props );
		}
	}
};


jQuery.fn.extend({

	position: function() {
		if ( !this[ 0 ] ) {
			return;
		}

		var offsetParent, offset,
			parentOffset = { top: 0, left: 0 },
			elem = this[ 0 ];

		// fixed elements are offset from window (parentOffset = {top:0, left: 0}, because it is it's only offset parent
		if ( jQuery.css( elem, "position" ) === "fixed" ) {
			// we assume that getBoundingClientRect is available when computed position is fixed
			offset = elem.getBoundingClientRect();
		} else {
			// Get *real* offsetParent
			offsetParent = this.offsetParent();

			// Get correct offsets
			offset = this.offset();
			if ( !jQuery.nodeName( offsetParent[ 0 ], "html" ) ) {
				parentOffset = offsetParent.offset();
			}

			// Add offsetParent borders
			parentOffset.top  += jQuery.css( offsetParent[ 0 ], "borderTopWidth", true );
			parentOffset.left += jQuery.css( offsetParent[ 0 ], "borderLeftWidth", true );
		}

		// Subtract parent offsets and element margins
		// note: when an element has margin: auto the offsetLeft and marginLeft
		// are the same in Safari causing offset.left to incorrectly be 0
		return {
			top:  offset.top  - parentOffset.top - jQuery.css( elem, "marginTop", true ),
			left: offset.left - parentOffset.left - jQuery.css( elem, "marginLeft", true)
		};
	},

	offsetParent: function() {
		return this.map(function() {
			var offsetParent = this.offsetParent || docElem;
			while ( offsetParent && ( !jQuery.nodeName( offsetParent, "html" ) && jQuery.css( offsetParent, "position") === "static" ) ) {
				offsetParent = offsetParent.offsetParent;
			}
			return offsetParent || docElem;
		});
	}
});


// Create scrollLeft and scrollTop methods
jQuery.each( {scrollLeft: "pageXOffset", scrollTop: "pageYOffset"}, function( method, prop ) {
	var top = /Y/.test( prop );

	jQuery.fn[ method ] = function( val ) {
		return jQuery.access( this, function( elem, method, val ) {
			var win = getWindow( elem );

			if ( val === undefined ) {
				return win ? (prop in win) ? win[ prop ] :
					win.document.documentElement[ method ] :
					elem[ method ];
			}

			if ( win ) {
				win.scrollTo(
					!top ? val : jQuery( win ).scrollLeft(),
					top ? val : jQuery( win ).scrollTop()
				);

			} else {
				elem[ method ] = val;
			}
		}, method, val, arguments.length, null );
	};
});

function getWindow( elem ) {
	return jQuery.isWindow( elem ) ?
		elem :
		elem.nodeType === 9 ?
			elem.defaultView || elem.parentWindow :
			false;
}
// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods
jQuery.each( { Height: "height", Width: "width" }, function( name, type ) {
	jQuery.each( { padding: "inner" + name, content: type, "": "outer" + name }, function( defaultExtra, funcName ) {
		// margin is only for outerHeight, outerWidth
		jQuery.fn[ funcName ] = function( margin, value ) {
			var chainable = arguments.length && ( defaultExtra || typeof margin !== "boolean" ),
				extra = defaultExtra || ( margin === true || value === true ? "margin" : "border" );

			return jQuery.access( this, function( elem, type, value ) {
				var doc;

				if ( jQuery.isWindow( elem ) ) {
					// As of 5/8/2012 this will yield incorrect results for Mobile Safari, but there
					// isn't a whole lot we can do. See pull request at this URL for discussion:
					// https://github.com/jquery/jquery/pull/764
					return elem.document.documentElement[ "client" + name ];
				}

				// Get document width or height
				if ( elem.nodeType === 9 ) {
					doc = elem.documentElement;

					// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height], whichever is greatest
					// unfortunately, this causes bug #3838 in IE6/8 only, but there is currently no good, small way to fix it.
					return Math.max(
						elem.body[ "scroll" + name ], doc[ "scroll" + name ],
						elem.body[ "offset" + name ], doc[ "offset" + name ],
						doc[ "client" + name ]
					);
				}

				return value === undefined ?
					// Get width or height on the element, requesting but not forcing parseFloat
					jQuery.css( elem, type, extra ) :

					// Set width or height on the element
					jQuery.style( elem, type, value, extra );
			}, type, chainable ? margin : undefined, chainable, null );
		};
	});
});
// Limit scope pollution from any deprecated API
// (function() {

// The number of elements contained in the matched element set
jQuery.fn.size = function() {
	return this.length;
};

jQuery.fn.andSelf = jQuery.fn.addBack;

// })();
if ( typeof module === "object" && typeof module.exports === "object" ) {
	// Expose jQuery as module.exports in loaders that implement the Node
	// module pattern (including browserify). Do not create the global, since
	// the user will be storing it themselves locally, and globals are frowned
	// upon in the Node module world.
	module.exports = jQuery;
} else {
	// Otherwise expose jQuery to the global object as usual
	window.jQuery = window.$ = jQuery;

	// Register as a named AMD module, since jQuery can be concatenated with other
	// files that may use define, but not via a proper concatenation script that
	// understands anonymous AMD modules. A named AMD is safest and most robust
	// way to register. Lowercase jquery is used because AMD module names are
	// derived from file names, and jQuery is normally delivered in a lowercase
	// file name. Do this after creating the global so that if an AMD module wants
	// to call noConflict to hide this version of jQuery, it will work.
	if ( typeof define === "function" && define.amd ) {
		define( "jquery", [], function () { return jQuery; } );
	}
}

})( window );
(function($, undefined) {

/**
 * Unobtrusive scripting adapter for jQuery
 * https://github.com/rails/jquery-ujs
 *
 * Requires jQuery 1.7.0 or later.
 *
 * Released under the MIT license
 *
 */

  // Cut down on the number of issues from people inadvertently including jquery_ujs twice
  // by detecting and raising an error when it happens.
  if ( $.rails !== undefined ) {
    $.error('jquery-ujs has already been loaded!');
  }

  // Shorthand to make it a little easier to call public rails functions from within rails.js
  var rails;

  $.rails = rails = {
    // Link elements bound by jquery-ujs
    linkClickSelector: 'a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]',

    // Button elements boud jquery-ujs
    buttonClickSelector: 'button[data-remote]',

    // Select elements bound by jquery-ujs
    inputChangeSelector: 'select[data-remote], input[data-remote], textarea[data-remote]',

    // Form elements bound by jquery-ujs
    formSubmitSelector: 'form',

    // Form input elements bound by jquery-ujs
    formInputClickSelector: 'form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])',

    // Form input elements disabled during form submission
    disableSelector: 'input[data-disable-with], button[data-disable-with], textarea[data-disable-with]',

    // Form input elements re-enabled after form submission
    enableSelector: 'input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled',

    // Form required input elements
    requiredInputSelector: 'input[name][required]:not([disabled]),textarea[name][required]:not([disabled])',

    // Form file input elements
    fileInputSelector: 'input[type=file]',

    // Link onClick disable selector with possible reenable after remote submission
    linkDisableSelector: 'a[data-disable-with]',

    // Make sure that every Ajax request sends the CSRF token
    CSRFProtection: function(xhr) {
      var token = $('meta[name="csrf-token"]').attr('content');
      if (token) xhr.setRequestHeader('X-CSRF-Token', token);
    },

    // Triggers an event on an element and returns false if the event result is false
    fire: function(obj, name, data) {
      var event = $.Event(name);
      obj.trigger(event, data);
      return event.result !== false;
    },

    // Default confirm dialog, may be overridden with custom confirm dialog in $.rails.confirm
    confirm: function(message) {
      return confirm(message);
    },

    // Default ajax function, may be overridden with custom function in $.rails.ajax
    ajax: function(options) {
      return $.ajax(options);
    },

    // Default way to get an element's href. May be overridden at $.rails.href.
    href: function(element) {
      return element.attr('href');
    },

    // Submits "remote" forms and links with ajax
    handleRemote: function(element) {
      var method, url, data, elCrossDomain, crossDomain, withCredentials, dataType, options;

      if (rails.fire(element, 'ajax:before')) {
        elCrossDomain = element.data('cross-domain');
        crossDomain = elCrossDomain === undefined ? null : elCrossDomain;
        withCredentials = element.data('with-credentials') || null;
        dataType = element.data('type') || ($.ajaxSettings && $.ajaxSettings.dataType);

        if (element.is('form')) {
          method = element.attr('method');
          url = element.attr('action');
          data = element.serializeArray();
          // memoized value from clicked submit button
          var button = element.data('ujs:submit-button');
          if (button) {
            data.push(button);
            element.data('ujs:submit-button', null);
          }
        } else if (element.is(rails.inputChangeSelector)) {
          method = element.data('method');
          url = element.data('url');
          data = element.serialize();
          if (element.data('params')) data = data + "&" + element.data('params');
        } else if (element.is(rails.buttonClickSelector)) {
          method = element.data('method') || 'get';
          url = element.data('url');
          data = element.serialize();
          if (element.data('params')) data = data + "&" + element.data('params');
        } else {
          method = element.data('method');
          url = rails.href(element);
          data = element.data('params') || null;
        }

        options = {
          type: method || 'GET', data: data, dataType: dataType,
          // stopping the "ajax:beforeSend" event will cancel the ajax request
          beforeSend: function(xhr, settings) {
            if (settings.dataType === undefined) {
              xhr.setRequestHeader('accept', '*/*;q=0.5, ' + settings.accepts.script);
            }
            return rails.fire(element, 'ajax:beforeSend', [xhr, settings]);
          },
          success: function(data, status, xhr) {
            element.trigger('ajax:success', [data, status, xhr]);
          },
          complete: function(xhr, status) {
            element.trigger('ajax:complete', [xhr, status]);
          },
          error: function(xhr, status, error) {
            element.trigger('ajax:error', [xhr, status, error]);
          },
          crossDomain: crossDomain
        };

        // There is no withCredentials for IE6-8 when
        // "Enable native XMLHTTP support" is disabled
        if (withCredentials) {
          options.xhrFields = {
            withCredentials: withCredentials
          };
        }

        // Only pass url to `ajax` options if not blank
        if (url) { options.url = url; }

        var jqxhr = rails.ajax(options);
        element.trigger('ajax:send', jqxhr);
        return jqxhr;
      } else {
        return false;
      }
    },

    // Handles "data-method" on links such as:
    // <a href="/users/5" data-method="delete" rel="nofollow" data-confirm="Are you sure?">Delete</a>
    handleMethod: function(link) {
      var href = rails.href(link),
        method = link.data('method'),
        target = link.attr('target'),
        csrf_token = $('meta[name=csrf-token]').attr('content'),
        csrf_param = $('meta[name=csrf-param]').attr('content'),
        form = $('<form method="post" action="' + href + '"></form>'),
        metadata_input = '<input name="_method" value="' + method + '" type="hidden" />';

      if (csrf_param !== undefined && csrf_token !== undefined) {
        metadata_input += '<input name="' + csrf_param + '" value="' + csrf_token + '" type="hidden" />';
      }

      if (target) { form.attr('target', target); }

      form.hide().append(metadata_input).appendTo('body');
      form.submit();
    },

    /* Disables form elements:
      - Caches element value in 'ujs:enable-with' data store
      - Replaces element text with value of 'data-disable-with' attribute
      - Sets disabled property to true
    */
    disableFormElements: function(form) {
      form.find(rails.disableSelector).each(function() {
        var element = $(this), method = element.is('button') ? 'html' : 'val';
        element.data('ujs:enable-with', element[method]());
        element[method](element.data('disable-with'));
        element.prop('disabled', true);
      });
    },

    /* Re-enables disabled form elements:
      - Replaces element text with cached value from 'ujs:enable-with' data store (created in `disableFormElements`)
      - Sets disabled property to false
    */
    enableFormElements: function(form) {
      form.find(rails.enableSelector).each(function() {
        var element = $(this), method = element.is('button') ? 'html' : 'val';
        if (element.data('ujs:enable-with')) element[method](element.data('ujs:enable-with'));
        element.prop('disabled', false);
      });
    },

   /* For 'data-confirm' attribute:
      - Fires `confirm` event
      - Shows the confirmation dialog
      - Fires the `confirm:complete` event

      Returns `true` if no function stops the chain and user chose yes; `false` otherwise.
      Attaching a handler to the element's `confirm` event that returns a `falsy` value cancels the confirmation dialog.
      Attaching a handler to the element's `confirm:complete` event that returns a `falsy` value makes this function
      return false. The `confirm:complete` event is fired whether or not the user answered true or false to the dialog.
   */
    allowAction: function(element) {
      var message = element.data('confirm'),
          answer = false, callback;
      if (!message) { return true; }

      if (rails.fire(element, 'confirm')) {
        answer = rails.confirm(message);
        callback = rails.fire(element, 'confirm:complete', [answer]);
      }
      return answer && callback;
    },

    // Helper function which checks for blank inputs in a form that match the specified CSS selector
    blankInputs: function(form, specifiedSelector, nonBlank) {
      var inputs = $(), input, valueToCheck,
          selector = specifiedSelector || 'input,textarea',
          allInputs = form.find(selector);

      allInputs.each(function() {
        input = $(this);
        valueToCheck = input.is('input[type=checkbox],input[type=radio]') ? input.is(':checked') : input.val();
        // If nonBlank and valueToCheck are both truthy, or nonBlank and valueToCheck are both falsey
        if (!valueToCheck === !nonBlank) {

          // Don't count unchecked required radio if other radio with same name is checked
          if (input.is('input[type=radio]') && allInputs.filter('input[type=radio]:checked[name="' + input.attr('name') + '"]').length) {
            return true; // Skip to next input
          }

          inputs = inputs.add(input);
        }
      });
      return inputs.length ? inputs : false;
    },

    // Helper function which checks for non-blank inputs in a form that match the specified CSS selector
    nonBlankInputs: function(form, specifiedSelector) {
      return rails.blankInputs(form, specifiedSelector, true); // true specifies nonBlank
    },

    // Helper function, needed to provide consistent behavior in IE
    stopEverything: function(e) {
      $(e.target).trigger('ujs:everythingStopped');
      e.stopImmediatePropagation();
      return false;
    },

    //  replace element's html with the 'data-disable-with' after storing original html
    //  and prevent clicking on it
    disableElement: function(element) {
      element.data('ujs:enable-with', element.html()); // store enabled state
      element.html(element.data('disable-with')); // set to disabled state
      element.bind('click.railsDisable', function(e) { // prevent further clicking
        return rails.stopEverything(e);
      });
    },

    // restore element to its original state which was disabled by 'disableElement' above
    enableElement: function(element) {
      if (element.data('ujs:enable-with') !== undefined) {
        element.html(element.data('ujs:enable-with')); // set to old enabled state
        element.removeData('ujs:enable-with'); // clean up cache
      }
      element.unbind('click.railsDisable'); // enable element
    }

  };

  if (rails.fire($(document), 'rails:attachBindings')) {

    $.ajaxPrefilter(function(options, originalOptions, xhr){ if ( !options.crossDomain ) { rails.CSRFProtection(xhr); }});

    $(document).delegate(rails.linkDisableSelector, 'ajax:complete', function() {
        rails.enableElement($(this));
    });

    $(document).delegate(rails.linkClickSelector, 'click.rails', function(e) {
      var link = $(this), method = link.data('method'), data = link.data('params');
      if (!rails.allowAction(link)) return rails.stopEverything(e);

      if (link.is(rails.linkDisableSelector)) rails.disableElement(link);

      if (link.data('remote') !== undefined) {
        if ( (e.metaKey || e.ctrlKey) && (!method || method === 'GET') && !data ) { return true; }

        var handleRemote = rails.handleRemote(link);
        // response from rails.handleRemote() will either be false or a deferred object promise.
        if (handleRemote === false) {
          rails.enableElement(link);
        } else {
          handleRemote.error( function() { rails.enableElement(link); } );
        }
        return false;

      } else if (link.data('method')) {
        rails.handleMethod(link);
        return false;
      }
    });

    $(document).delegate(rails.buttonClickSelector, 'click.rails', function(e) {
      var button = $(this);
      if (!rails.allowAction(button)) return rails.stopEverything(e);

      rails.handleRemote(button);
      return false;
    });

    $(document).delegate(rails.inputChangeSelector, 'change.rails', function(e) {
      var link = $(this);
      if (!rails.allowAction(link)) return rails.stopEverything(e);

      rails.handleRemote(link);
      return false;
    });

    $(document).delegate(rails.formSubmitSelector, 'submit.rails', function(e) {
      var form = $(this),
        remote = form.data('remote') !== undefined,
        blankRequiredInputs = rails.blankInputs(form, rails.requiredInputSelector),
        nonBlankFileInputs = rails.nonBlankInputs(form, rails.fileInputSelector);

      if (!rails.allowAction(form)) return rails.stopEverything(e);

      // skip other logic when required values are missing or file upload is present
      if (blankRequiredInputs && form.attr("novalidate") == undefined && rails.fire(form, 'ajax:aborted:required', [blankRequiredInputs])) {
        return rails.stopEverything(e);
      }

      if (remote) {
        if (nonBlankFileInputs) {
          // slight timeout so that the submit button gets properly serialized
          // (make it easy for event handler to serialize form without disabled values)
          setTimeout(function(){ rails.disableFormElements(form); }, 13);
          var aborted = rails.fire(form, 'ajax:aborted:file', [nonBlankFileInputs]);

          // re-enable form elements if event bindings return false (canceling normal form submission)
          if (!aborted) { setTimeout(function(){ rails.enableFormElements(form); }, 13); }

          return aborted;
        }

        rails.handleRemote(form);
        return false;

      } else {
        // slight timeout so that the submit button gets properly serialized
        setTimeout(function(){ rails.disableFormElements(form); }, 13);
      }
    });

    $(document).delegate(rails.formInputClickSelector, 'click.rails', function(event) {
      var button = $(this);

      if (!rails.allowAction(button)) return rails.stopEverything(event);

      // register the pressed submit button
      var name = button.attr('name'),
        data = name ? {name:name, value:button.val()} : null;

      button.closest('form').data('ujs:submit-button', data);
    });

    $(document).delegate(rails.formSubmitSelector, 'ajax:beforeSend.rails', function(event) {
      if (this == event.target) rails.disableFormElements($(this));
    });

    $(document).delegate(rails.formSubmitSelector, 'ajax:complete.rails', function(event) {
      if (this == event.target) rails.enableFormElements($(this));
    });

    $(function(){
      // making sure that all forms have actual up-to-date token(cached forms contain old one)
      var csrf_token = $('meta[name=csrf-token]').attr('content');
      var csrf_param = $('meta[name=csrf-param]').attr('content');
      $('form input[name="' + csrf_param + '"]').val(csrf_token);
    });
  }

})( jQuery );
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.effect.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.position.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */

(function( $, undefined ) {

var uuid = 0,
	runiqueId = /^ui-id-\d+$/;

// $.ui might exist from components with no dependencies, e.g., $.ui.position
$.ui = $.ui || {};

$.extend( $.ui, {
	version: "1.10.3",

	keyCode: {
		BACKSPACE: 8,
		COMMA: 188,
		DELETE: 46,
		DOWN: 40,
		END: 35,
		ENTER: 13,
		ESCAPE: 27,
		HOME: 36,
		LEFT: 37,
		NUMPAD_ADD: 107,
		NUMPAD_DECIMAL: 110,
		NUMPAD_DIVIDE: 111,
		NUMPAD_ENTER: 108,
		NUMPAD_MULTIPLY: 106,
		NUMPAD_SUBTRACT: 109,
		PAGE_DOWN: 34,
		PAGE_UP: 33,
		PERIOD: 190,
		RIGHT: 39,
		SPACE: 32,
		TAB: 9,
		UP: 38
	}
});

// plugins
$.fn.extend({
	focus: (function( orig ) {
		return function( delay, fn ) {
			return typeof delay === "number" ?
				this.each(function() {
					var elem = this;
					setTimeout(function() {
						$( elem ).focus();
						if ( fn ) {
							fn.call( elem );
						}
					}, delay );
				}) :
				orig.apply( this, arguments );
		};
	})( $.fn.focus ),

	scrollParent: function() {
		var scrollParent;
		if (($.ui.ie && (/(static|relative)/).test(this.css("position"))) || (/absolute/).test(this.css("position"))) {
			scrollParent = this.parents().filter(function() {
				return (/(relative|absolute|fixed)/).test($.css(this,"position")) && (/(auto|scroll)/).test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"));
			}).eq(0);
		} else {
			scrollParent = this.parents().filter(function() {
				return (/(auto|scroll)/).test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"));
			}).eq(0);
		}

		return (/fixed/).test(this.css("position")) || !scrollParent.length ? $(document) : scrollParent;
	},

	zIndex: function( zIndex ) {
		if ( zIndex !== undefined ) {
			return this.css( "zIndex", zIndex );
		}

		if ( this.length ) {
			var elem = $( this[ 0 ] ), position, value;
			while ( elem.length && elem[ 0 ] !== document ) {
				// Ignore z-index if position is set to a value where z-index is ignored by the browser
				// This makes behavior of this function consistent across browsers
				// WebKit always returns auto if the element is positioned
				position = elem.css( "position" );
				if ( position === "absolute" || position === "relative" || position === "fixed" ) {
					// IE returns 0 when zIndex is not specified
					// other browsers return a string
					// we ignore the case of nested elements with an explicit value of 0
					// <div style="z-index: -10;"><div style="z-index: 0;"></div></div>
					value = parseInt( elem.css( "zIndex" ), 10 );
					if ( !isNaN( value ) && value !== 0 ) {
						return value;
					}
				}
				elem = elem.parent();
			}
		}

		return 0;
	},

	uniqueId: function() {
		return this.each(function() {
			if ( !this.id ) {
				this.id = "ui-id-" + (++uuid);
			}
		});
	},

	removeUniqueId: function() {
		return this.each(function() {
			if ( runiqueId.test( this.id ) ) {
				$( this ).removeAttr( "id" );
			}
		});
	}
});

// selectors
function focusable( element, isTabIndexNotNaN ) {
	var map, mapName, img,
		nodeName = element.nodeName.toLowerCase();
	if ( "area" === nodeName ) {
		map = element.parentNode;
		mapName = map.name;
		if ( !element.href || !mapName || map.nodeName.toLowerCase() !== "map" ) {
			return false;
		}
		img = $( "img[usemap=#" + mapName + "]" )[0];
		return !!img && visible( img );
	}
	return ( /input|select|textarea|button|object/.test( nodeName ) ?
		!element.disabled :
		"a" === nodeName ?
			element.href || isTabIndexNotNaN :
			isTabIndexNotNaN) &&
		// the element and all of its ancestors must be visible
		visible( element );
}

function visible( element ) {
	return $.expr.filters.visible( element ) &&
		!$( element ).parents().addBack().filter(function() {
			return $.css( this, "visibility" ) === "hidden";
		}).length;
}

$.extend( $.expr[ ":" ], {
	data: $.expr.createPseudo ?
		$.expr.createPseudo(function( dataName ) {
			return function( elem ) {
				return !!$.data( elem, dataName );
			};
		}) :
		// support: jQuery <1.8
		function( elem, i, match ) {
			return !!$.data( elem, match[ 3 ] );
		},

	focusable: function( element ) {
		return focusable( element, !isNaN( $.attr( element, "tabindex" ) ) );
	},

	tabbable: function( element ) {
		var tabIndex = $.attr( element, "tabindex" ),
			isTabIndexNaN = isNaN( tabIndex );
		return ( isTabIndexNaN || tabIndex >= 0 ) && focusable( element, !isTabIndexNaN );
	}
});

// support: jQuery <1.8
if ( !$( "<a>" ).outerWidth( 1 ).jquery ) {
	$.each( [ "Width", "Height" ], function( i, name ) {
		var side = name === "Width" ? [ "Left", "Right" ] : [ "Top", "Bottom" ],
			type = name.toLowerCase(),
			orig = {
				innerWidth: $.fn.innerWidth,
				innerHeight: $.fn.innerHeight,
				outerWidth: $.fn.outerWidth,
				outerHeight: $.fn.outerHeight
			};

		function reduce( elem, size, border, margin ) {
			$.each( side, function() {
				size -= parseFloat( $.css( elem, "padding" + this ) ) || 0;
				if ( border ) {
					size -= parseFloat( $.css( elem, "border" + this + "Width" ) ) || 0;
				}
				if ( margin ) {
					size -= parseFloat( $.css( elem, "margin" + this ) ) || 0;
				}
			});
			return size;
		}

		$.fn[ "inner" + name ] = function( size ) {
			if ( size === undefined ) {
				return orig[ "inner" + name ].call( this );
			}

			return this.each(function() {
				$( this ).css( type, reduce( this, size ) + "px" );
			});
		};

		$.fn[ "outer" + name] = function( size, margin ) {
			if ( typeof size !== "number" ) {
				return orig[ "outer" + name ].call( this, size );
			}

			return this.each(function() {
				$( this).css( type, reduce( this, size, true, margin ) + "px" );
			});
		};
	});
}

// support: jQuery <1.8
if ( !$.fn.addBack ) {
	$.fn.addBack = function( selector ) {
		return this.add( selector == null ?
			this.prevObject : this.prevObject.filter( selector )
		);
	};
}

// support: jQuery 1.6.1, 1.6.2 (http://bugs.jquery.com/ticket/9413)
if ( $( "<a>" ).data( "a-b", "a" ).removeData( "a-b" ).data( "a-b" ) ) {
	$.fn.removeData = (function( removeData ) {
		return function( key ) {
			if ( arguments.length ) {
				return removeData.call( this, $.camelCase( key ) );
			} else {
				return removeData.call( this );
			}
		};
	})( $.fn.removeData );
}





// deprecated
$.ui.ie = !!/msie [\w.]+/.exec( navigator.userAgent.toLowerCase() );

$.support.selectstart = "onselectstart" in document.createElement( "div" );
$.fn.extend({
	disableSelection: function() {
		return this.bind( ( $.support.selectstart ? "selectstart" : "mousedown" ) +
			".ui-disableSelection", function( event ) {
				event.preventDefault();
			});
	},

	enableSelection: function() {
		return this.unbind( ".ui-disableSelection" );
	}
});

$.extend( $.ui, {
	// $.ui.plugin is deprecated. Use $.widget() extensions instead.
	plugin: {
		add: function( module, option, set ) {
			var i,
				proto = $.ui[ module ].prototype;
			for ( i in set ) {
				proto.plugins[ i ] = proto.plugins[ i ] || [];
				proto.plugins[ i ].push( [ option, set[ i ] ] );
			}
		},
		call: function( instance, name, args ) {
			var i,
				set = instance.plugins[ name ];
			if ( !set || !instance.element[ 0 ].parentNode || instance.element[ 0 ].parentNode.nodeType === 11 ) {
				return;
			}

			for ( i = 0; i < set.length; i++ ) {
				if ( instance.options[ set[ i ][ 0 ] ] ) {
					set[ i ][ 1 ].apply( instance.element, args );
				}
			}
		}
	},

	// only used by resizable
	hasScroll: function( el, a ) {

		//If overflow is hidden, the element might have extra content, but the user wants to hide it
		if ( $( el ).css( "overflow" ) === "hidden") {
			return false;
		}

		var scroll = ( a && a === "left" ) ? "scrollLeft" : "scrollTop",
			has = false;

		if ( el[ scroll ] > 0 ) {
			return true;
		}

		// TODO: determine which cases actually cause this to happen
		// if the element doesn't have the scroll set, see if it's possible to
		// set the scroll
		el[ scroll ] = 1;
		has = ( el[ scroll ] > 0 );
		el[ scroll ] = 0;
		return has;
	}
});

})( jQuery );

(function( $, undefined ) {

var uuid = 0,
	slice = Array.prototype.slice,
	_cleanData = $.cleanData;
$.cleanData = function( elems ) {
	for ( var i = 0, elem; (elem = elems[i]) != null; i++ ) {
		try {
			$( elem ).triggerHandler( "remove" );
		// http://bugs.jquery.com/ticket/8235
		} catch( e ) {}
	}
	_cleanData( elems );
};

$.widget = function( name, base, prototype ) {
	var fullName, existingConstructor, constructor, basePrototype,
		// proxiedPrototype allows the provided prototype to remain unmodified
		// so that it can be used as a mixin for multiple widgets (#8876)
		proxiedPrototype = {},
		namespace = name.split( "." )[ 0 ];

	name = name.split( "." )[ 1 ];
	fullName = namespace + "-" + name;

	if ( !prototype ) {
		prototype = base;
		base = $.Widget;
	}

	// create selector for plugin
	$.expr[ ":" ][ fullName.toLowerCase() ] = function( elem ) {
		return !!$.data( elem, fullName );
	};

	$[ namespace ] = $[ namespace ] || {};
	existingConstructor = $[ namespace ][ name ];
	constructor = $[ namespace ][ name ] = function( options, element ) {
		// allow instantiation without "new" keyword
		if ( !this._createWidget ) {
			return new constructor( options, element );
		}

		// allow instantiation without initializing for simple inheritance
		// must use "new" keyword (the code above always passes args)
		if ( arguments.length ) {
			this._createWidget( options, element );
		}
	};
	// extend with the existing constructor to carry over any static properties
	$.extend( constructor, existingConstructor, {
		version: prototype.version,
		// copy the object used to create the prototype in case we need to
		// redefine the widget later
		_proto: $.extend( {}, prototype ),
		// track widgets that inherit from this widget in case this widget is
		// redefined after a widget inherits from it
		_childConstructors: []
	});

	basePrototype = new base();
	// we need to make the options hash a property directly on the new instance
	// otherwise we'll modify the options hash on the prototype that we're
	// inheriting from
	basePrototype.options = $.widget.extend( {}, basePrototype.options );
	$.each( prototype, function( prop, value ) {
		if ( !$.isFunction( value ) ) {
			proxiedPrototype[ prop ] = value;
			return;
		}
		proxiedPrototype[ prop ] = (function() {
			var _super = function() {
					return base.prototype[ prop ].apply( this, arguments );
				},
				_superApply = function( args ) {
					return base.prototype[ prop ].apply( this, args );
				};
			return function() {
				var __super = this._super,
					__superApply = this._superApply,
					returnValue;

				this._super = _super;
				this._superApply = _superApply;

				returnValue = value.apply( this, arguments );

				this._super = __super;
				this._superApply = __superApply;

				return returnValue;
			};
		})();
	});
	constructor.prototype = $.widget.extend( basePrototype, {
		// TODO: remove support for widgetEventPrefix
		// always use the name + a colon as the prefix, e.g., draggable:start
		// don't prefix for widgets that aren't DOM-based
		widgetEventPrefix: existingConstructor ? basePrototype.widgetEventPrefix : name
	}, proxiedPrototype, {
		constructor: constructor,
		namespace: namespace,
		widgetName: name,
		widgetFullName: fullName
	});

	// If this widget is being redefined then we need to find all widgets that
	// are inheriting from it and redefine all of them so that they inherit from
	// the new version of this widget. We're essentially trying to replace one
	// level in the prototype chain.
	if ( existingConstructor ) {
		$.each( existingConstructor._childConstructors, function( i, child ) {
			var childPrototype = child.prototype;

			// redefine the child widget using the same prototype that was
			// originally used, but inherit from the new version of the base
			$.widget( childPrototype.namespace + "." + childPrototype.widgetName, constructor, child._proto );
		});
		// remove the list of existing child constructors from the old constructor
		// so the old child constructors can be garbage collected
		delete existingConstructor._childConstructors;
	} else {
		base._childConstructors.push( constructor );
	}

	$.widget.bridge( name, constructor );
};

$.widget.extend = function( target ) {
	var input = slice.call( arguments, 1 ),
		inputIndex = 0,
		inputLength = input.length,
		key,
		value;
	for ( ; inputIndex < inputLength; inputIndex++ ) {
		for ( key in input[ inputIndex ] ) {
			value = input[ inputIndex ][ key ];
			if ( input[ inputIndex ].hasOwnProperty( key ) && value !== undefined ) {
				// Clone objects
				if ( $.isPlainObject( value ) ) {
					target[ key ] = $.isPlainObject( target[ key ] ) ?
						$.widget.extend( {}, target[ key ], value ) :
						// Don't extend strings, arrays, etc. with objects
						$.widget.extend( {}, value );
				// Copy everything else by reference
				} else {
					target[ key ] = value;
				}
			}
		}
	}
	return target;
};

$.widget.bridge = function( name, object ) {
	var fullName = object.prototype.widgetFullName || name;
	$.fn[ name ] = function( options ) {
		var isMethodCall = typeof options === "string",
			args = slice.call( arguments, 1 ),
			returnValue = this;

		// allow multiple hashes to be passed on init
		options = !isMethodCall && args.length ?
			$.widget.extend.apply( null, [ options ].concat(args) ) :
			options;

		if ( isMethodCall ) {
			this.each(function() {
				var methodValue,
					instance = $.data( this, fullName );
				if ( !instance ) {
					return $.error( "cannot call methods on " + name + " prior to initialization; " +
						"attempted to call method '" + options + "'" );
				}
				if ( !$.isFunction( instance[options] ) || options.charAt( 0 ) === "_" ) {
					return $.error( "no such method '" + options + "' for " + name + " widget instance" );
				}
				methodValue = instance[ options ].apply( instance, args );
				if ( methodValue !== instance && methodValue !== undefined ) {
					returnValue = methodValue && methodValue.jquery ?
						returnValue.pushStack( methodValue.get() ) :
						methodValue;
					return false;
				}
			});
		} else {
			this.each(function() {
				var instance = $.data( this, fullName );
				if ( instance ) {
					instance.option( options || {} )._init();
				} else {
					$.data( this, fullName, new object( options, this ) );
				}
			});
		}

		return returnValue;
	};
};

$.Widget = function( /* options, element */ ) {};
$.Widget._childConstructors = [];

$.Widget.prototype = {
	widgetName: "widget",
	widgetEventPrefix: "",
	defaultElement: "<div>",
	options: {
		disabled: false,

		// callbacks
		create: null
	},
	_createWidget: function( options, element ) {
		element = $( element || this.defaultElement || this )[ 0 ];
		this.element = $( element );
		this.uuid = uuid++;
		this.eventNamespace = "." + this.widgetName + this.uuid;
		this.options = $.widget.extend( {},
			this.options,
			this._getCreateOptions(),
			options );

		this.bindings = $();
		this.hoverable = $();
		this.focusable = $();

		if ( element !== this ) {
			$.data( element, this.widgetFullName, this );
			this._on( true, this.element, {
				remove: function( event ) {
					if ( event.target === element ) {
						this.destroy();
					}
				}
			});
			this.document = $( element.style ?
				// element within the document
				element.ownerDocument :
				// element is window or document
				element.document || element );
			this.window = $( this.document[0].defaultView || this.document[0].parentWindow );
		}

		this._create();
		this._trigger( "create", null, this._getCreateEventData() );
		this._init();
	},
	_getCreateOptions: $.noop,
	_getCreateEventData: $.noop,
	_create: $.noop,
	_init: $.noop,

	destroy: function() {
		this._destroy();
		// we can probably remove the unbind calls in 2.0
		// all event bindings should go through this._on()
		this.element
			.unbind( this.eventNamespace )
			// 1.9 BC for #7810
			// TODO remove dual storage
			.removeData( this.widgetName )
			.removeData( this.widgetFullName )
			// support: jquery <1.6.3
			// http://bugs.jquery.com/ticket/9413
			.removeData( $.camelCase( this.widgetFullName ) );
		this.widget()
			.unbind( this.eventNamespace )
			.removeAttr( "aria-disabled" )
			.removeClass(
				this.widgetFullName + "-disabled " +
				"ui-state-disabled" );

		// clean up events and states
		this.bindings.unbind( this.eventNamespace );
		this.hoverable.removeClass( "ui-state-hover" );
		this.focusable.removeClass( "ui-state-focus" );
	},
	_destroy: $.noop,

	widget: function() {
		return this.element;
	},

	option: function( key, value ) {
		var options = key,
			parts,
			curOption,
			i;

		if ( arguments.length === 0 ) {
			// don't return a reference to the internal hash
			return $.widget.extend( {}, this.options );
		}

		if ( typeof key === "string" ) {
			// handle nested keys, e.g., "foo.bar" => { foo: { bar: ___ } }
			options = {};
			parts = key.split( "." );
			key = parts.shift();
			if ( parts.length ) {
				curOption = options[ key ] = $.widget.extend( {}, this.options[ key ] );
				for ( i = 0; i < parts.length - 1; i++ ) {
					curOption[ parts[ i ] ] = curOption[ parts[ i ] ] || {};
					curOption = curOption[ parts[ i ] ];
				}
				key = parts.pop();
				if ( value === undefined ) {
					return curOption[ key ] === undefined ? null : curOption[ key ];
				}
				curOption[ key ] = value;
			} else {
				if ( value === undefined ) {
					return this.options[ key ] === undefined ? null : this.options[ key ];
				}
				options[ key ] = value;
			}
		}

		this._setOptions( options );

		return this;
	},
	_setOptions: function( options ) {
		var key;

		for ( key in options ) {
			this._setOption( key, options[ key ] );
		}

		return this;
	},
	_setOption: function( key, value ) {
		this.options[ key ] = value;

		if ( key === "disabled" ) {
			this.widget()
				.toggleClass( this.widgetFullName + "-disabled ui-state-disabled", !!value )
				.attr( "aria-disabled", value );
			this.hoverable.removeClass( "ui-state-hover" );
			this.focusable.removeClass( "ui-state-focus" );
		}

		return this;
	},

	enable: function() {
		return this._setOption( "disabled", false );
	},
	disable: function() {
		return this._setOption( "disabled", true );
	},

	_on: function( suppressDisabledCheck, element, handlers ) {
		var delegateElement,
			instance = this;

		// no suppressDisabledCheck flag, shuffle arguments
		if ( typeof suppressDisabledCheck !== "boolean" ) {
			handlers = element;
			element = suppressDisabledCheck;
			suppressDisabledCheck = false;
		}

		// no element argument, shuffle and use this.element
		if ( !handlers ) {
			handlers = element;
			element = this.element;
			delegateElement = this.widget();
		} else {
			// accept selectors, DOM elements
			element = delegateElement = $( element );
			this.bindings = this.bindings.add( element );
		}

		$.each( handlers, function( event, handler ) {
			function handlerProxy() {
				// allow widgets to customize the disabled handling
				// - disabled as an array instead of boolean
				// - disabled class as method for disabling individual parts
				if ( !suppressDisabledCheck &&
						( instance.options.disabled === true ||
							$( this ).hasClass( "ui-state-disabled" ) ) ) {
					return;
				}
				return ( typeof handler === "string" ? instance[ handler ] : handler )
					.apply( instance, arguments );
			}

			// copy the guid so direct unbinding works
			if ( typeof handler !== "string" ) {
				handlerProxy.guid = handler.guid =
					handler.guid || handlerProxy.guid || $.guid++;
			}

			var match = event.match( /^(\w+)\s*(.*)$/ ),
				eventName = match[1] + instance.eventNamespace,
				selector = match[2];
			if ( selector ) {
				delegateElement.delegate( selector, eventName, handlerProxy );
			} else {
				element.bind( eventName, handlerProxy );
			}
		});
	},

	_off: function( element, eventName ) {
		eventName = (eventName || "").split( " " ).join( this.eventNamespace + " " ) + this.eventNamespace;
		element.unbind( eventName ).undelegate( eventName );
	},

	_delay: function( handler, delay ) {
		function handlerProxy() {
			return ( typeof handler === "string" ? instance[ handler ] : handler )
				.apply( instance, arguments );
		}
		var instance = this;
		return setTimeout( handlerProxy, delay || 0 );
	},

	_hoverable: function( element ) {
		this.hoverable = this.hoverable.add( element );
		this._on( element, {
			mouseenter: function( event ) {
				$( event.currentTarget ).addClass( "ui-state-hover" );
			},
			mouseleave: function( event ) {
				$( event.currentTarget ).removeClass( "ui-state-hover" );
			}
		});
	},

	_focusable: function( element ) {
		this.focusable = this.focusable.add( element );
		this._on( element, {
			focusin: function( event ) {
				$( event.currentTarget ).addClass( "ui-state-focus" );
			},
			focusout: function( event ) {
				$( event.currentTarget ).removeClass( "ui-state-focus" );
			}
		});
	},

	_trigger: function( type, event, data ) {
		var prop, orig,
			callback = this.options[ type ];

		data = data || {};
		event = $.Event( event );
		event.type = ( type === this.widgetEventPrefix ?
			type :
			this.widgetEventPrefix + type ).toLowerCase();
		// the original event may come from any element
		// so we need to reset the target on the new event
		event.target = this.element[ 0 ];

		// copy original event properties over to the new event
		orig = event.originalEvent;
		if ( orig ) {
			for ( prop in orig ) {
				if ( !( prop in event ) ) {
					event[ prop ] = orig[ prop ];
				}
			}
		}

		this.element.trigger( event, data );
		return !( $.isFunction( callback ) &&
			callback.apply( this.element[0], [ event ].concat( data ) ) === false ||
			event.isDefaultPrevented() );
	}
};

$.each( { show: "fadeIn", hide: "fadeOut" }, function( method, defaultEffect ) {
	$.Widget.prototype[ "_" + method ] = function( element, options, callback ) {
		if ( typeof options === "string" ) {
			options = { effect: options };
		}
		var hasOptions,
			effectName = !options ?
				method :
				options === true || typeof options === "number" ?
					defaultEffect :
					options.effect || defaultEffect;
		options = options || {};
		if ( typeof options === "number" ) {
			options = { duration: options };
		}
		hasOptions = !$.isEmptyObject( options );
		options.complete = callback;
		if ( options.delay ) {
			element.delay( options.delay );
		}
		if ( hasOptions && $.effects && $.effects.effect[ effectName ] ) {
			element[ method ]( options );
		} else if ( effectName !== method && element[ effectName ] ) {
			element[ effectName ]( options.duration, options.easing, callback );
		} else {
			element.queue(function( next ) {
				$( this )[ method ]();
				if ( callback ) {
					callback.call( element[ 0 ] );
				}
				next();
			});
		}
	};
});

})( jQuery );

(function( $, undefined ) {

var mouseHandled = false;
$( document ).mouseup( function() {
	mouseHandled = false;
});

$.widget("ui.mouse", {
	version: "1.10.3",
	options: {
		cancel: "input,textarea,button,select,option",
		distance: 1,
		delay: 0
	},
	_mouseInit: function() {
		var that = this;

		this.element
			.bind("mousedown."+this.widgetName, function(event) {
				return that._mouseDown(event);
			})
			.bind("click."+this.widgetName, function(event) {
				if (true === $.data(event.target, that.widgetName + ".preventClickEvent")) {
					$.removeData(event.target, that.widgetName + ".preventClickEvent");
					event.stopImmediatePropagation();
					return false;
				}
			});

		this.started = false;
	},

	// TODO: make sure destroying one instance of mouse doesn't mess with
	// other instances of mouse
	_mouseDestroy: function() {
		this.element.unbind("."+this.widgetName);
		if ( this._mouseMoveDelegate ) {
			$(document)
				.unbind("mousemove."+this.widgetName, this._mouseMoveDelegate)
				.unbind("mouseup."+this.widgetName, this._mouseUpDelegate);
		}
	},

	_mouseDown: function(event) {
		// don't let more than one widget handle mouseStart
		if( mouseHandled ) { return; }

		// we may have missed mouseup (out of window)
		(this._mouseStarted && this._mouseUp(event));

		this._mouseDownEvent = event;

		var that = this,
			btnIsLeft = (event.which === 1),
			// event.target.nodeName works around a bug in IE 8 with
			// disabled inputs (#7620)
			elIsCancel = (typeof this.options.cancel === "string" && event.target.nodeName ? $(event.target).closest(this.options.cancel).length : false);
		if (!btnIsLeft || elIsCancel || !this._mouseCapture(event)) {
			return true;
		}

		this.mouseDelayMet = !this.options.delay;
		if (!this.mouseDelayMet) {
			this._mouseDelayTimer = setTimeout(function() {
				that.mouseDelayMet = true;
			}, this.options.delay);
		}

		if (this._mouseDistanceMet(event) && this._mouseDelayMet(event)) {
			this._mouseStarted = (this._mouseStart(event) !== false);
			if (!this._mouseStarted) {
				event.preventDefault();
				return true;
			}
		}

		// Click event may never have fired (Gecko & Opera)
		if (true === $.data(event.target, this.widgetName + ".preventClickEvent")) {
			$.removeData(event.target, this.widgetName + ".preventClickEvent");
		}

		// these delegates are required to keep context
		this._mouseMoveDelegate = function(event) {
			return that._mouseMove(event);
		};
		this._mouseUpDelegate = function(event) {
			return that._mouseUp(event);
		};
		$(document)
			.bind("mousemove."+this.widgetName, this._mouseMoveDelegate)
			.bind("mouseup."+this.widgetName, this._mouseUpDelegate);

		event.preventDefault();

		mouseHandled = true;
		return true;
	},

	_mouseMove: function(event) {
		// IE mouseup check - mouseup happened when mouse was out of window
		if ($.ui.ie && ( !document.documentMode || document.documentMode < 9 ) && !event.button) {
			return this._mouseUp(event);
		}

		if (this._mouseStarted) {
			this._mouseDrag(event);
			return event.preventDefault();
		}

		if (this._mouseDistanceMet(event) && this._mouseDelayMet(event)) {
			this._mouseStarted =
				(this._mouseStart(this._mouseDownEvent, event) !== false);
			(this._mouseStarted ? this._mouseDrag(event) : this._mouseUp(event));
		}

		return !this._mouseStarted;
	},

	_mouseUp: function(event) {
		$(document)
			.unbind("mousemove."+this.widgetName, this._mouseMoveDelegate)
			.unbind("mouseup."+this.widgetName, this._mouseUpDelegate);

		if (this._mouseStarted) {
			this._mouseStarted = false;

			if (event.target === this._mouseDownEvent.target) {
				$.data(event.target, this.widgetName + ".preventClickEvent", true);
			}

			this._mouseStop(event);
		}

		return false;
	},

	_mouseDistanceMet: function(event) {
		return (Math.max(
				Math.abs(this._mouseDownEvent.pageX - event.pageX),
				Math.abs(this._mouseDownEvent.pageY - event.pageY)
			) >= this.options.distance
		);
	},

	_mouseDelayMet: function(/* event */) {
		return this.mouseDelayMet;
	},

	// These are placeholder methods, to be overriden by extending plugin
	_mouseStart: function(/* event */) {},
	_mouseDrag: function(/* event */) {},
	_mouseStop: function(/* event */) {},
	_mouseCapture: function(/* event */) { return true; }
});

})(jQuery);

(function( $, undefined ) {

$.widget("ui.draggable", $.ui.mouse, {
	version: "1.10.3",
	widgetEventPrefix: "drag",
	options: {
		addClasses: true,
		appendTo: "parent",
		axis: false,
		connectToSortable: false,
		containment: false,
		cursor: "auto",
		cursorAt: false,
		grid: false,
		handle: false,
		helper: "original",
		iframeFix: false,
		opacity: false,
		refreshPositions: false,
		revert: false,
		revertDuration: 500,
		scope: "default",
		scroll: true,
		scrollSensitivity: 20,
		scrollSpeed: 20,
		snap: false,
		snapMode: "both",
		snapTolerance: 20,
		stack: false,
		zIndex: false,

		// callbacks
		drag: null,
		start: null,
		stop: null
	},
	_create: function() {

		if (this.options.helper === "original" && !(/^(?:r|a|f)/).test(this.element.css("position"))) {
			this.element[0].style.position = "relative";
		}
		if (this.options.addClasses){
			this.element.addClass("ui-draggable");
		}
		if (this.options.disabled){
			this.element.addClass("ui-draggable-disabled");
		}

		this._mouseInit();

	},

	_destroy: function() {
		this.element.removeClass( "ui-draggable ui-draggable-dragging ui-draggable-disabled" );
		this._mouseDestroy();
	},

	_mouseCapture: function(event) {

		var o = this.options;

		// among others, prevent a drag on a resizable-handle
		if (this.helper || o.disabled || $(event.target).closest(".ui-resizable-handle").length > 0) {
			return false;
		}

		//Quit if we're not on a valid handle
		this.handle = this._getHandle(event);
		if (!this.handle) {
			return false;
		}

		$(o.iframeFix === true ? "iframe" : o.iframeFix).each(function() {
			$("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>")
			.css({
				width: this.offsetWidth+"px", height: this.offsetHeight+"px",
				position: "absolute", opacity: "0.001", zIndex: 1000
			})
			.css($(this).offset())
			.appendTo("body");
		});

		return true;

	},

	_mouseStart: function(event) {

		var o = this.options;

		//Create and append the visible helper
		this.helper = this._createHelper(event);

		this.helper.addClass("ui-draggable-dragging");

		//Cache the helper size
		this._cacheHelperProportions();

		//If ddmanager is used for droppables, set the global draggable
		if($.ui.ddmanager) {
			$.ui.ddmanager.current = this;
		}

		/*
		 * - Position generation -
		 * This block generates everything position related - it's the core of draggables.
		 */

		//Cache the margins of the original element
		this._cacheMargins();

		//Store the helper's css position
		this.cssPosition = this.helper.css( "position" );
		this.scrollParent = this.helper.scrollParent();
		this.offsetParent = this.helper.offsetParent();
		this.offsetParentCssPosition = this.offsetParent.css( "position" );

		//The element's absolute position on the page minus margins
		this.offset = this.positionAbs = this.element.offset();
		this.offset = {
			top: this.offset.top - this.margins.top,
			left: this.offset.left - this.margins.left
		};

		//Reset scroll cache
		this.offset.scroll = false;

		$.extend(this.offset, {
			click: { //Where the click happened, relative to the element
				left: event.pageX - this.offset.left,
				top: event.pageY - this.offset.top
			},
			parent: this._getParentOffset(),
			relative: this._getRelativeOffset() //This is a relative to absolute position minus the actual position calculation - only used for relative positioned helper
		});

		//Generate the original position
		this.originalPosition = this.position = this._generatePosition(event);
		this.originalPageX = event.pageX;
		this.originalPageY = event.pageY;

		//Adjust the mouse offset relative to the helper if "cursorAt" is supplied
		(o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt));

		//Set a containment if given in the options
		this._setContainment();

		//Trigger event + callbacks
		if(this._trigger("start", event) === false) {
			this._clear();
			return false;
		}

		//Recache the helper size
		this._cacheHelperProportions();

		//Prepare the droppable offsets
		if ($.ui.ddmanager && !o.dropBehaviour) {
			$.ui.ddmanager.prepareOffsets(this, event);
		}


		this._mouseDrag(event, true); //Execute the drag once - this causes the helper not to be visible before getting its correct position

		//If the ddmanager is used for droppables, inform the manager that dragging has started (see #5003)
		if ( $.ui.ddmanager ) {
			$.ui.ddmanager.dragStart(this, event);
		}

		return true;
	},

	_mouseDrag: function(event, noPropagation) {
		// reset any necessary cached properties (see #5009)
		if ( this.offsetParentCssPosition === "fixed" ) {
			this.offset.parent = this._getParentOffset();
		}

		//Compute the helpers position
		this.position = this._generatePosition(event);
		this.positionAbs = this._convertPositionTo("absolute");

		//Call plugins and callbacks and use the resulting position if something is returned
		if (!noPropagation) {
			var ui = this._uiHash();
			if(this._trigger("drag", event, ui) === false) {
				this._mouseUp({});
				return false;
			}
			this.position = ui.position;
		}

		if(!this.options.axis || this.options.axis !== "y") {
			this.helper[0].style.left = this.position.left+"px";
		}
		if(!this.options.axis || this.options.axis !== "x") {
			this.helper[0].style.top = this.position.top+"px";
		}
		if($.ui.ddmanager) {
			$.ui.ddmanager.drag(this, event);
		}

		return false;
	},

	_mouseStop: function(event) {

		//If we are using droppables, inform the manager about the drop
		var that = this,
			dropped = false;
		if ($.ui.ddmanager && !this.options.dropBehaviour) {
			dropped = $.ui.ddmanager.drop(this, event);
		}

		//if a drop comes from outside (a sortable)
		if(this.dropped) {
			dropped = this.dropped;
			this.dropped = false;
		}

		//if the original element is no longer in the DOM don't bother to continue (see #8269)
		if ( this.options.helper === "original" && !$.contains( this.element[ 0 ].ownerDocument, this.element[ 0 ] ) ) {
			return false;
		}

		if((this.options.revert === "invalid" && !dropped) || (this.options.revert === "valid" && dropped) || this.options.revert === true || ($.isFunction(this.options.revert) && this.options.revert.call(this.element, dropped))) {
			$(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function() {
				if(that._trigger("stop", event) !== false) {
					that._clear();
				}
			});
		} else {
			if(this._trigger("stop", event) !== false) {
				this._clear();
			}
		}

		return false;
	},

	_mouseUp: function(event) {
		//Remove frame helpers
		$("div.ui-draggable-iframeFix").each(function() {
			this.parentNode.removeChild(this);
		});

		//If the ddmanager is used for droppables, inform the manager that dragging has stopped (see #5003)
		if( $.ui.ddmanager ) {
			$.ui.ddmanager.dragStop(this, event);
		}

		return $.ui.mouse.prototype._mouseUp.call(this, event);
	},

	cancel: function() {

		if(this.helper.is(".ui-draggable-dragging")) {
			this._mouseUp({});
		} else {
			this._clear();
		}

		return this;

	},

	_getHandle: function(event) {
		return this.options.handle ?
			!!$( event.target ).closest( this.element.find( this.options.handle ) ).length :
			true;
	},

	_createHelper: function(event) {

		var o = this.options,
			helper = $.isFunction(o.helper) ? $(o.helper.apply(this.element[0], [event])) : (o.helper === "clone" ? this.element.clone().removeAttr("id") : this.element);

		if(!helper.parents("body").length) {
			helper.appendTo((o.appendTo === "parent" ? this.element[0].parentNode : o.appendTo));
		}

		if(helper[0] !== this.element[0] && !(/(fixed|absolute)/).test(helper.css("position"))) {
			helper.css("position", "absolute");
		}

		return helper;

	},

	_adjustOffsetFromHelper: function(obj) {
		if (typeof obj === "string") {
			obj = obj.split(" ");
		}
		if ($.isArray(obj)) {
			obj = {left: +obj[0], top: +obj[1] || 0};
		}
		if ("left" in obj) {
			this.offset.click.left = obj.left + this.margins.left;
		}
		if ("right" in obj) {
			this.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;
		}
		if ("top" in obj) {
			this.offset.click.top = obj.top + this.margins.top;
		}
		if ("bottom" in obj) {
			this.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;
		}
	},

	_getParentOffset: function() {

		//Get the offsetParent and cache its position
		var po = this.offsetParent.offset();

		// This is a special case where we need to modify a offset calculated on start, since the following happened:
		// 1. The position of the helper is absolute, so it's position is calculated based on the next positioned parent
		// 2. The actual offset parent is a child of the scroll parent, and the scroll parent isn't the document, which means that
		//    the scroll is included in the initial calculation of the offset of the parent, and never recalculated upon drag
		if(this.cssPosition === "absolute" && this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) {
			po.left += this.scrollParent.scrollLeft();
			po.top += this.scrollParent.scrollTop();
		}

		//This needs to be actually done for all browsers, since pageX/pageY includes this information
		//Ugly IE fix
		if((this.offsetParent[0] === document.body) ||
			(this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() === "html" && $.ui.ie)) {
			po = { top: 0, left: 0 };
		}

		return {
			top: po.top + (parseInt(this.offsetParent.css("borderTopWidth"),10) || 0),
			left: po.left + (parseInt(this.offsetParent.css("borderLeftWidth"),10) || 0)
		};

	},

	_getRelativeOffset: function() {

		if(this.cssPosition === "relative") {
			var p = this.element.position();
			return {
				top: p.top - (parseInt(this.helper.css("top"),10) || 0) + this.scrollParent.scrollTop(),
				left: p.left - (parseInt(this.helper.css("left"),10) || 0) + this.scrollParent.scrollLeft()
			};
		} else {
			return { top: 0, left: 0 };
		}

	},

	_cacheMargins: function() {
		this.margins = {
			left: (parseInt(this.element.css("marginLeft"),10) || 0),
			top: (parseInt(this.element.css("marginTop"),10) || 0),
			right: (parseInt(this.element.css("marginRight"),10) || 0),
			bottom: (parseInt(this.element.css("marginBottom"),10) || 0)
		};
	},

	_cacheHelperProportions: function() {
		this.helperProportions = {
			width: this.helper.outerWidth(),
			height: this.helper.outerHeight()
		};
	},

	_setContainment: function() {

		var over, c, ce,
			o = this.options;

		if ( !o.containment ) {
			this.containment = null;
			return;
		}

		if ( o.containment === "window" ) {
			this.containment = [
				$( window ).scrollLeft() - this.offset.relative.left - this.offset.parent.left,
				$( window ).scrollTop() - this.offset.relative.top - this.offset.parent.top,
				$( window ).scrollLeft() + $( window ).width() - this.helperProportions.width - this.margins.left,
				$( window ).scrollTop() + ( $( window ).height() || document.body.parentNode.scrollHeight ) - this.helperProportions.height - this.margins.top
			];
			return;
		}

		if ( o.containment === "document") {
			this.containment = [
				0,
				0,
				$( document ).width() - this.helperProportions.width - this.margins.left,
				( $( document ).height() || document.body.parentNode.scrollHeight ) - this.helperProportions.height - this.margins.top
			];
			return;
		}

		if ( o.containment.constructor === Array ) {
			this.containment = o.containment;
			return;
		}

		if ( o.containment === "parent" ) {
			o.containment = this.helper[ 0 ].parentNode;
		}

		c = $( o.containment );
		ce = c[ 0 ];

		if( !ce ) {
			return;
		}

		over = c.css( "overflow" ) !== "hidden";

		this.containment = [
			( parseInt( c.css( "borderLeftWidth" ), 10 ) || 0 ) + ( parseInt( c.css( "paddingLeft" ), 10 ) || 0 ),
			( parseInt( c.css( "borderTopWidth" ), 10 ) || 0 ) + ( parseInt( c.css( "paddingTop" ), 10 ) || 0 ) ,
			( over ? Math.max( ce.scrollWidth, ce.offsetWidth ) : ce.offsetWidth ) - ( parseInt( c.css( "borderRightWidth" ), 10 ) || 0 ) - ( parseInt( c.css( "paddingRight" ), 10 ) || 0 ) - this.helperProportions.width - this.margins.left - this.margins.right,
			( over ? Math.max( ce.scrollHeight, ce.offsetHeight ) : ce.offsetHeight ) - ( parseInt( c.css( "borderBottomWidth" ), 10 ) || 0 ) - ( parseInt( c.css( "paddingBottom" ), 10 ) || 0 ) - this.helperProportions.height - this.margins.top  - this.margins.bottom
		];
		this.relative_container = c;
	},

	_convertPositionTo: function(d, pos) {

		if(!pos) {
			pos = this.position;
		}

		var mod = d === "absolute" ? 1 : -1,
			scroll = this.cssPosition === "absolute" && !( this.scrollParent[ 0 ] !== document && $.contains( this.scrollParent[ 0 ], this.offsetParent[ 0 ] ) ) ? this.offsetParent : this.scrollParent;

		//Cache the scroll
		if (!this.offset.scroll) {
			this.offset.scroll = {top : scroll.scrollTop(), left : scroll.scrollLeft()};
		}

		return {
			top: (
				pos.top	+																// The absolute mouse position
				this.offset.relative.top * mod +										// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.top * mod -										// The offsetParent's offset without borders (offset + border)
				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : this.offset.scroll.top ) * mod )
			),
			left: (
				pos.left +																// The absolute mouse position
				this.offset.relative.left * mod +										// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.left * mod	-										// The offsetParent's offset without borders (offset + border)
				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : this.offset.scroll.left ) * mod )
			)
		};

	},

	_generatePosition: function(event) {

		var containment, co, top, left,
			o = this.options,
			scroll = this.cssPosition === "absolute" && !( this.scrollParent[ 0 ] !== document && $.contains( this.scrollParent[ 0 ], this.offsetParent[ 0 ] ) ) ? this.offsetParent : this.scrollParent,
			pageX = event.pageX,
			pageY = event.pageY;

		//Cache the scroll
		if (!this.offset.scroll) {
			this.offset.scroll = {top : scroll.scrollTop(), left : scroll.scrollLeft()};
		}

		/*
		 * - Position constraining -
		 * Constrain the position to a mix of grid, containment.
		 */

		// If we are not dragging yet, we won't check for options
		if ( this.originalPosition ) {
			if ( this.containment ) {
				if ( this.relative_container ){
					co = this.relative_container.offset();
					containment = [
						this.containment[ 0 ] + co.left,
						this.containment[ 1 ] + co.top,
						this.containment[ 2 ] + co.left,
						this.containment[ 3 ] + co.top
					];
				}
				else {
					containment = this.containment;
				}

				if(event.pageX - this.offset.click.left < containment[0]) {
					pageX = containment[0] + this.offset.click.left;
				}
				if(event.pageY - this.offset.click.top < containment[1]) {
					pageY = containment[1] + this.offset.click.top;
				}
				if(event.pageX - this.offset.click.left > containment[2]) {
					pageX = containment[2] + this.offset.click.left;
				}
				if(event.pageY - this.offset.click.top > containment[3]) {
					pageY = containment[3] + this.offset.click.top;
				}
			}

			if(o.grid) {
				//Check for grid elements set to 0 to prevent divide by 0 error causing invalid argument errors in IE (see ticket #6950)
				top = o.grid[1] ? this.originalPageY + Math.round((pageY - this.originalPageY) / o.grid[1]) * o.grid[1] : this.originalPageY;
				pageY = containment ? ((top - this.offset.click.top >= containment[1] || top - this.offset.click.top > containment[3]) ? top : ((top - this.offset.click.top >= containment[1]) ? top - o.grid[1] : top + o.grid[1])) : top;

				left = o.grid[0] ? this.originalPageX + Math.round((pageX - this.originalPageX) / o.grid[0]) * o.grid[0] : this.originalPageX;
				pageX = containment ? ((left - this.offset.click.left >= containment[0] || left - this.offset.click.left > containment[2]) ? left : ((left - this.offset.click.left >= containment[0]) ? left - o.grid[0] : left + o.grid[0])) : left;
			}

		}

		return {
			top: (
				pageY -																	// The absolute mouse position
				this.offset.click.top	-												// Click offset (relative to the element)
				this.offset.relative.top -												// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.top +												// The offsetParent's offset without borders (offset + border)
				( this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : this.offset.scroll.top )
			),
			left: (
				pageX -																	// The absolute mouse position
				this.offset.click.left -												// Click offset (relative to the element)
				this.offset.relative.left -												// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.left +												// The offsetParent's offset without borders (offset + border)
				( this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : this.offset.scroll.left )
			)
		};

	},

	_clear: function() {
		this.helper.removeClass("ui-draggable-dragging");
		if(this.helper[0] !== this.element[0] && !this.cancelHelperRemoval) {
			this.helper.remove();
		}
		this.helper = null;
		this.cancelHelperRemoval = false;
	},

	// From now on bulk stuff - mainly helpers

	_trigger: function(type, event, ui) {
		ui = ui || this._uiHash();
		$.ui.plugin.call(this, type, [event, ui]);
		//The absolute position has to be recalculated after plugins
		if(type === "drag") {
			this.positionAbs = this._convertPositionTo("absolute");
		}
		return $.Widget.prototype._trigger.call(this, type, event, ui);
	},

	plugins: {},

	_uiHash: function() {
		return {
			helper: this.helper,
			position: this.position,
			originalPosition: this.originalPosition,
			offset: this.positionAbs
		};
	}

});

$.ui.plugin.add("draggable", "connectToSortable", {
	start: function(event, ui) {

		var inst = $(this).data("ui-draggable"), o = inst.options,
			uiSortable = $.extend({}, ui, { item: inst.element });
		inst.sortables = [];
		$(o.connectToSortable).each(function() {
			var sortable = $.data(this, "ui-sortable");
			if (sortable && !sortable.options.disabled) {
				inst.sortables.push({
					instance: sortable,
					shouldRevert: sortable.options.revert
				});
				sortable.refreshPositions();	// Call the sortable's refreshPositions at drag start to refresh the containerCache since the sortable container cache is used in drag and needs to be up to date (this will ensure it's initialised as well as being kept in step with any changes that might have happened on the page).
				sortable._trigger("activate", event, uiSortable);
			}
		});

	},
	stop: function(event, ui) {

		//If we are still over the sortable, we fake the stop event of the sortable, but also remove helper
		var inst = $(this).data("ui-draggable"),
			uiSortable = $.extend({}, ui, { item: inst.element });

		$.each(inst.sortables, function() {
			if(this.instance.isOver) {

				this.instance.isOver = 0;

				inst.cancelHelperRemoval = true; //Don't remove the helper in the draggable instance
				this.instance.cancelHelperRemoval = false; //Remove it in the sortable instance (so sortable plugins like revert still work)

				//The sortable revert is supported, and we have to set a temporary dropped variable on the draggable to support revert: "valid/invalid"
				if(this.shouldRevert) {
					this.instance.options.revert = this.shouldRevert;
				}

				//Trigger the stop of the sortable
				this.instance._mouseStop(event);

				this.instance.options.helper = this.instance.options._helper;

				//If the helper has been the original item, restore properties in the sortable
				if(inst.options.helper === "original") {
					this.instance.currentItem.css({ top: "auto", left: "auto" });
				}

			} else {
				this.instance.cancelHelperRemoval = false; //Remove the helper in the sortable instance
				this.instance._trigger("deactivate", event, uiSortable);
			}

		});

	},
	drag: function(event, ui) {

		var inst = $(this).data("ui-draggable"), that = this;

		$.each(inst.sortables, function() {

			var innermostIntersecting = false,
				thisSortable = this;

			//Copy over some variables to allow calling the sortable's native _intersectsWith
			this.instance.positionAbs = inst.positionAbs;
			this.instance.helperProportions = inst.helperProportions;
			this.instance.offset.click = inst.offset.click;

			if(this.instance._intersectsWith(this.instance.containerCache)) {
				innermostIntersecting = true;
				$.each(inst.sortables, function () {
					this.instance.positionAbs = inst.positionAbs;
					this.instance.helperProportions = inst.helperProportions;
					this.instance.offset.click = inst.offset.click;
					if (this !== thisSortable &&
						this.instance._intersectsWith(this.instance.containerCache) &&
						$.contains(thisSortable.instance.element[0], this.instance.element[0])
					) {
						innermostIntersecting = false;
					}
					return innermostIntersecting;
				});
			}


			if(innermostIntersecting) {
				//If it intersects, we use a little isOver variable and set it once, so our move-in stuff gets fired only once
				if(!this.instance.isOver) {

					this.instance.isOver = 1;
					//Now we fake the start of dragging for the sortable instance,
					//by cloning the list group item, appending it to the sortable and using it as inst.currentItem
					//We can then fire the start event of the sortable with our passed browser event, and our own helper (so it doesn't create a new one)
					this.instance.currentItem = $(that).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item", true);
					this.instance.options._helper = this.instance.options.helper; //Store helper option to later restore it
					this.instance.options.helper = function() { return ui.helper[0]; };

					event.target = this.instance.currentItem[0];
					this.instance._mouseCapture(event, true);
					this.instance._mouseStart(event, true, true);

					//Because the browser event is way off the new appended portlet, we modify a couple of variables to reflect the changes
					this.instance.offset.click.top = inst.offset.click.top;
					this.instance.offset.click.left = inst.offset.click.left;
					this.instance.offset.parent.left -= inst.offset.parent.left - this.instance.offset.parent.left;
					this.instance.offset.parent.top -= inst.offset.parent.top - this.instance.offset.parent.top;

					inst._trigger("toSortable", event);
					inst.dropped = this.instance.element; //draggable revert needs that
					//hack so receive/update callbacks work (mostly)
					inst.currentItem = inst.element;
					this.instance.fromOutside = inst;

				}

				//Provided we did all the previous steps, we can fire the drag event of the sortable on every draggable drag, when it intersects with the sortable
				if(this.instance.currentItem) {
					this.instance._mouseDrag(event);
				}

			} else {

				//If it doesn't intersect with the sortable, and it intersected before,
				//we fake the drag stop of the sortable, but make sure it doesn't remove the helper by using cancelHelperRemoval
				if(this.instance.isOver) {

					this.instance.isOver = 0;
					this.instance.cancelHelperRemoval = true;

					//Prevent reverting on this forced stop
					this.instance.options.revert = false;

					// The out event needs to be triggered independently
					this.instance._trigger("out", event, this.instance._uiHash(this.instance));

					this.instance._mouseStop(event, true);
					this.instance.options.helper = this.instance.options._helper;

					//Now we remove our currentItem, the list group clone again, and the placeholder, and animate the helper back to it's original size
					this.instance.currentItem.remove();
					if(this.instance.placeholder) {
						this.instance.placeholder.remove();
					}

					inst._trigger("fromSortable", event);
					inst.dropped = false; //draggable revert needs that
				}

			}

		});

	}
});

$.ui.plugin.add("draggable", "cursor", {
	start: function() {
		var t = $("body"), o = $(this).data("ui-draggable").options;
		if (t.css("cursor")) {
			o._cursor = t.css("cursor");
		}
		t.css("cursor", o.cursor);
	},
	stop: function() {
		var o = $(this).data("ui-draggable").options;
		if (o._cursor) {
			$("body").css("cursor", o._cursor);
		}
	}
});

$.ui.plugin.add("draggable", "opacity", {
	start: function(event, ui) {
		var t = $(ui.helper), o = $(this).data("ui-draggable").options;
		if(t.css("opacity")) {
			o._opacity = t.css("opacity");
		}
		t.css("opacity", o.opacity);
	},
	stop: function(event, ui) {
		var o = $(this).data("ui-draggable").options;
		if(o._opacity) {
			$(ui.helper).css("opacity", o._opacity);
		}
	}
});

$.ui.plugin.add("draggable", "scroll", {
	start: function() {
		var i = $(this).data("ui-draggable");
		if(i.scrollParent[0] !== document && i.scrollParent[0].tagName !== "HTML") {
			i.overflowOffset = i.scrollParent.offset();
		}
	},
	drag: function( event ) {

		var i = $(this).data("ui-draggable"), o = i.options, scrolled = false;

		if(i.scrollParent[0] !== document && i.scrollParent[0].tagName !== "HTML") {

			if(!o.axis || o.axis !== "x") {
				if((i.overflowOffset.top + i.scrollParent[0].offsetHeight) - event.pageY < o.scrollSensitivity) {
					i.scrollParent[0].scrollTop = scrolled = i.scrollParent[0].scrollTop + o.scrollSpeed;
				} else if(event.pageY - i.overflowOffset.top < o.scrollSensitivity) {
					i.scrollParent[0].scrollTop = scrolled = i.scrollParent[0].scrollTop - o.scrollSpeed;
				}
			}

			if(!o.axis || o.axis !== "y") {
				if((i.overflowOffset.left + i.scrollParent[0].offsetWidth) - event.pageX < o.scrollSensitivity) {
					i.scrollParent[0].scrollLeft = scrolled = i.scrollParent[0].scrollLeft + o.scrollSpeed;
				} else if(event.pageX - i.overflowOffset.left < o.scrollSensitivity) {
					i.scrollParent[0].scrollLeft = scrolled = i.scrollParent[0].scrollLeft - o.scrollSpeed;
				}
			}

		} else {

			if(!o.axis || o.axis !== "x") {
				if(event.pageY - $(document).scrollTop() < o.scrollSensitivity) {
					scrolled = $(document).scrollTop($(document).scrollTop() - o.scrollSpeed);
				} else if($(window).height() - (event.pageY - $(document).scrollTop()) < o.scrollSensitivity) {
					scrolled = $(document).scrollTop($(document).scrollTop() + o.scrollSpeed);
				}
			}

			if(!o.axis || o.axis !== "y") {
				if(event.pageX - $(document).scrollLeft() < o.scrollSensitivity) {
					scrolled = $(document).scrollLeft($(document).scrollLeft() - o.scrollSpeed);
				} else if($(window).width() - (event.pageX - $(document).scrollLeft()) < o.scrollSensitivity) {
					scrolled = $(document).scrollLeft($(document).scrollLeft() + o.scrollSpeed);
				}
			}

		}

		if(scrolled !== false && $.ui.ddmanager && !o.dropBehaviour) {
			$.ui.ddmanager.prepareOffsets(i, event);
		}

	}
});

$.ui.plugin.add("draggable", "snap", {
	start: function() {

		var i = $(this).data("ui-draggable"),
			o = i.options;

		i.snapElements = [];

		$(o.snap.constructor !== String ? ( o.snap.items || ":data(ui-draggable)" ) : o.snap).each(function() {
			var $t = $(this),
				$o = $t.offset();
			if(this !== i.element[0]) {
				i.snapElements.push({
					item: this,
					width: $t.outerWidth(), height: $t.outerHeight(),
					top: $o.top, left: $o.left
				});
			}
		});

	},
	drag: function(event, ui) {

		var ts, bs, ls, rs, l, r, t, b, i, first,
			inst = $(this).data("ui-draggable"),
			o = inst.options,
			d = o.snapTolerance,
			x1 = ui.offset.left, x2 = x1 + inst.helperProportions.width,
			y1 = ui.offset.top, y2 = y1 + inst.helperProportions.height;

		for (i = inst.snapElements.length - 1; i >= 0; i--){

			l = inst.snapElements[i].left;
			r = l + inst.snapElements[i].width;
			t = inst.snapElements[i].top;
			b = t + inst.snapElements[i].height;

			if ( x2 < l - d || x1 > r + d || y2 < t - d || y1 > b + d || !$.contains( inst.snapElements[ i ].item.ownerDocument, inst.snapElements[ i ].item ) ) {
				if(inst.snapElements[i].snapping) {
					(inst.options.snap.release && inst.options.snap.release.call(inst.element, event, $.extend(inst._uiHash(), { snapItem: inst.snapElements[i].item })));
				}
				inst.snapElements[i].snapping = false;
				continue;
			}

			if(o.snapMode !== "inner") {
				ts = Math.abs(t - y2) <= d;
				bs = Math.abs(b - y1) <= d;
				ls = Math.abs(l - x2) <= d;
				rs = Math.abs(r - x1) <= d;
				if(ts) {
					ui.position.top = inst._convertPositionTo("relative", { top: t - inst.helperProportions.height, left: 0 }).top - inst.margins.top;
				}
				if(bs) {
					ui.position.top = inst._convertPositionTo("relative", { top: b, left: 0 }).top - inst.margins.top;
				}
				if(ls) {
					ui.position.left = inst._convertPositionTo("relative", { top: 0, left: l - inst.helperProportions.width }).left - inst.margins.left;
				}
				if(rs) {
					ui.position.left = inst._convertPositionTo("relative", { top: 0, left: r }).left - inst.margins.left;
				}
			}

			first = (ts || bs || ls || rs);

			if(o.snapMode !== "outer") {
				ts = Math.abs(t - y1) <= d;
				bs = Math.abs(b - y2) <= d;
				ls = Math.abs(l - x1) <= d;
				rs = Math.abs(r - x2) <= d;
				if(ts) {
					ui.position.top = inst._convertPositionTo("relative", { top: t, left: 0 }).top - inst.margins.top;
				}
				if(bs) {
					ui.position.top = inst._convertPositionTo("relative", { top: b - inst.helperProportions.height, left: 0 }).top - inst.margins.top;
				}
				if(ls) {
					ui.position.left = inst._convertPositionTo("relative", { top: 0, left: l }).left - inst.margins.left;
				}
				if(rs) {
					ui.position.left = inst._convertPositionTo("relative", { top: 0, left: r - inst.helperProportions.width }).left - inst.margins.left;
				}
			}

			if(!inst.snapElements[i].snapping && (ts || bs || ls || rs || first)) {
				(inst.options.snap.snap && inst.options.snap.snap.call(inst.element, event, $.extend(inst._uiHash(), { snapItem: inst.snapElements[i].item })));
			}
			inst.snapElements[i].snapping = (ts || bs || ls || rs || first);

		}

	}
});

$.ui.plugin.add("draggable", "stack", {
	start: function() {
		var min,
			o = this.data("ui-draggable").options,
			group = $.makeArray($(o.stack)).sort(function(a,b) {
				return (parseInt($(a).css("zIndex"),10) || 0) - (parseInt($(b).css("zIndex"),10) || 0);
			});

		if (!group.length) { return; }

		min = parseInt($(group[0]).css("zIndex"), 10) || 0;
		$(group).each(function(i) {
			$(this).css("zIndex", min + i);
		});
		this.css("zIndex", (min + group.length));
	}
});

$.ui.plugin.add("draggable", "zIndex", {
	start: function(event, ui) {
		var t = $(ui.helper), o = $(this).data("ui-draggable").options;
		if(t.css("zIndex")) {
			o._zIndex = t.css("zIndex");
		}
		t.css("zIndex", o.zIndex);
	},
	stop: function(event, ui) {
		var o = $(this).data("ui-draggable").options;
		if(o._zIndex) {
			$(ui.helper).css("zIndex", o._zIndex);
		}
	}
});

})(jQuery);

(function( $, undefined ) {

function isOverAxis( x, reference, size ) {
	return ( x > reference ) && ( x < ( reference + size ) );
}

$.widget("ui.droppable", {
	version: "1.10.3",
	widgetEventPrefix: "drop",
	options: {
		accept: "*",
		activeClass: false,
		addClasses: true,
		greedy: false,
		hoverClass: false,
		scope: "default",
		tolerance: "intersect",

		// callbacks
		activate: null,
		deactivate: null,
		drop: null,
		out: null,
		over: null
	},
	_create: function() {

		var o = this.options,
			accept = o.accept;

		this.isover = false;
		this.isout = true;

		this.accept = $.isFunction(accept) ? accept : function(d) {
			return d.is(accept);
		};

		//Store the droppable's proportions
		this.proportions = { width: this.element[0].offsetWidth, height: this.element[0].offsetHeight };

		// Add the reference and positions to the manager
		$.ui.ddmanager.droppables[o.scope] = $.ui.ddmanager.droppables[o.scope] || [];
		$.ui.ddmanager.droppables[o.scope].push(this);

		(o.addClasses && this.element.addClass("ui-droppable"));

	},

	_destroy: function() {
		var i = 0,
			drop = $.ui.ddmanager.droppables[this.options.scope];

		for ( ; i < drop.length; i++ ) {
			if ( drop[i] === this ) {
				drop.splice(i, 1);
			}
		}

		this.element.removeClass("ui-droppable ui-droppable-disabled");
	},

	_setOption: function(key, value) {

		if(key === "accept") {
			this.accept = $.isFunction(value) ? value : function(d) {
				return d.is(value);
			};
		}
		$.Widget.prototype._setOption.apply(this, arguments);
	},

	_activate: function(event) {
		var draggable = $.ui.ddmanager.current;
		if(this.options.activeClass) {
			this.element.addClass(this.options.activeClass);
		}
		if(draggable){
			this._trigger("activate", event, this.ui(draggable));
		}
	},

	_deactivate: function(event) {
		var draggable = $.ui.ddmanager.current;
		if(this.options.activeClass) {
			this.element.removeClass(this.options.activeClass);
		}
		if(draggable){
			this._trigger("deactivate", event, this.ui(draggable));
		}
	},

	_over: function(event) {

		var draggable = $.ui.ddmanager.current;

		// Bail if draggable and droppable are same element
		if (!draggable || (draggable.currentItem || draggable.element)[0] === this.element[0]) {
			return;
		}

		if (this.accept.call(this.element[0],(draggable.currentItem || draggable.element))) {
			if(this.options.hoverClass) {
				this.element.addClass(this.options.hoverClass);
			}
			this._trigger("over", event, this.ui(draggable));
		}

	},

	_out: function(event) {

		var draggable = $.ui.ddmanager.current;

		// Bail if draggable and droppable are same element
		if (!draggable || (draggable.currentItem || draggable.element)[0] === this.element[0]) {
			return;
		}

		if (this.accept.call(this.element[0],(draggable.currentItem || draggable.element))) {
			if(this.options.hoverClass) {
				this.element.removeClass(this.options.hoverClass);
			}
			this._trigger("out", event, this.ui(draggable));
		}

	},

	_drop: function(event,custom) {

		var draggable = custom || $.ui.ddmanager.current,
			childrenIntersection = false;

		// Bail if draggable and droppable are same element
		if (!draggable || (draggable.currentItem || draggable.element)[0] === this.element[0]) {
			return false;
		}

		this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function() {
			var inst = $.data(this, "ui-droppable");
			if(
				inst.options.greedy &&
				!inst.options.disabled &&
				inst.options.scope === draggable.options.scope &&
				inst.accept.call(inst.element[0], (draggable.currentItem || draggable.element)) &&
				$.ui.intersect(draggable, $.extend(inst, { offset: inst.element.offset() }), inst.options.tolerance)
			) { childrenIntersection = true; return false; }
		});
		if(childrenIntersection) {
			return false;
		}

		if(this.accept.call(this.element[0],(draggable.currentItem || draggable.element))) {
			if(this.options.activeClass) {
				this.element.removeClass(this.options.activeClass);
			}
			if(this.options.hoverClass) {
				this.element.removeClass(this.options.hoverClass);
			}
			this._trigger("drop", event, this.ui(draggable));
			return this.element;
		}

		return false;

	},

	ui: function(c) {
		return {
			draggable: (c.currentItem || c.element),
			helper: c.helper,
			position: c.position,
			offset: c.positionAbs
		};
	}

});

$.ui.intersect = function(draggable, droppable, toleranceMode) {

	if (!droppable.offset) {
		return false;
	}

	var draggableLeft, draggableTop,
		x1 = (draggable.positionAbs || draggable.position.absolute).left, x2 = x1 + draggable.helperProportions.width,
		y1 = (draggable.positionAbs || draggable.position.absolute).top, y2 = y1 + draggable.helperProportions.height,
		l = droppable.offset.left, r = l + droppable.proportions.width,
		t = droppable.offset.top, b = t + droppable.proportions.height;

	switch (toleranceMode) {
		case "fit":
			return (l <= x1 && x2 <= r && t <= y1 && y2 <= b);
		case "intersect":
			return (l < x1 + (draggable.helperProportions.width / 2) && // Right Half
				x2 - (draggable.helperProportions.width / 2) < r && // Left Half
				t < y1 + (draggable.helperProportions.height / 2) && // Bottom Half
				y2 - (draggable.helperProportions.height / 2) < b ); // Top Half
		case "pointer":
			draggableLeft = ((draggable.positionAbs || draggable.position.absolute).left + (draggable.clickOffset || draggable.offset.click).left);
			draggableTop = ((draggable.positionAbs || draggable.position.absolute).top + (draggable.clickOffset || draggable.offset.click).top);
			return isOverAxis( draggableTop, t, droppable.proportions.height ) && isOverAxis( draggableLeft, l, droppable.proportions.width );
		case "touch":
			return (
				(y1 >= t && y1 <= b) ||	// Top edge touching
				(y2 >= t && y2 <= b) ||	// Bottom edge touching
				(y1 < t && y2 > b)		// Surrounded vertically
			) && (
				(x1 >= l && x1 <= r) ||	// Left edge touching
				(x2 >= l && x2 <= r) ||	// Right edge touching
				(x1 < l && x2 > r)		// Surrounded horizontally
			);
		default:
			return false;
		}

};

/*
	This manager tracks offsets of draggables and droppables
*/
$.ui.ddmanager = {
	current: null,
	droppables: { "default": [] },
	prepareOffsets: function(t, event) {

		var i, j,
			m = $.ui.ddmanager.droppables[t.options.scope] || [],
			type = event ? event.type : null, // workaround for #2317
			list = (t.currentItem || t.element).find(":data(ui-droppable)").addBack();

		droppablesLoop: for (i = 0; i < m.length; i++) {

			//No disabled and non-accepted
			if(m[i].options.disabled || (t && !m[i].accept.call(m[i].element[0],(t.currentItem || t.element)))) {
				continue;
			}

			// Filter out elements in the current dragged item
			for (j=0; j < list.length; j++) {
				if(list[j] === m[i].element[0]) {
					m[i].proportions.height = 0;
					continue droppablesLoop;
				}
			}

			m[i].visible = m[i].element.css("display") !== "none";
			if(!m[i].visible) {
				continue;
			}

			//Activate the droppable if used directly from draggables
			if(type === "mousedown") {
				m[i]._activate.call(m[i], event);
			}

			m[i].offset = m[i].element.offset();
			m[i].proportions = { width: m[i].element[0].offsetWidth, height: m[i].element[0].offsetHeight };

		}

	},
	drop: function(draggable, event) {

		var dropped = false;
		// Create a copy of the droppables in case the list changes during the drop (#9116)
		$.each(($.ui.ddmanager.droppables[draggable.options.scope] || []).slice(), function() {

			if(!this.options) {
				return;
			}
			if (!this.options.disabled && this.visible && $.ui.intersect(draggable, this, this.options.tolerance)) {
				dropped = this._drop.call(this, event) || dropped;
			}

			if (!this.options.disabled && this.visible && this.accept.call(this.element[0],(draggable.currentItem || draggable.element))) {
				this.isout = true;
				this.isover = false;
				this._deactivate.call(this, event);
			}

		});
		return dropped;

	},
	dragStart: function( draggable, event ) {
		//Listen for scrolling so that if the dragging causes scrolling the position of the droppables can be recalculated (see #5003)
		draggable.element.parentsUntil( "body" ).bind( "scroll.droppable", function() {
			if( !draggable.options.refreshPositions ) {
				$.ui.ddmanager.prepareOffsets( draggable, event );
			}
		});
	},
	drag: function(draggable, event) {

		//If you have a highly dynamic page, you might try this option. It renders positions every time you move the mouse.
		if(draggable.options.refreshPositions) {
			$.ui.ddmanager.prepareOffsets(draggable, event);
		}

		//Run through all droppables and check their positions based on specific tolerance options
		$.each($.ui.ddmanager.droppables[draggable.options.scope] || [], function() {

			if(this.options.disabled || this.greedyChild || !this.visible) {
				return;
			}

			var parentInstance, scope, parent,
				intersects = $.ui.intersect(draggable, this, this.options.tolerance),
				c = !intersects && this.isover ? "isout" : (intersects && !this.isover ? "isover" : null);
			if(!c) {
				return;
			}

			if (this.options.greedy) {
				// find droppable parents with same scope
				scope = this.options.scope;
				parent = this.element.parents(":data(ui-droppable)").filter(function () {
					return $.data(this, "ui-droppable").options.scope === scope;
				});

				if (parent.length) {
					parentInstance = $.data(parent[0], "ui-droppable");
					parentInstance.greedyChild = (c === "isover");
				}
			}

			// we just moved into a greedy child
			if (parentInstance && c === "isover") {
				parentInstance.isover = false;
				parentInstance.isout = true;
				parentInstance._out.call(parentInstance, event);
			}

			this[c] = true;
			this[c === "isout" ? "isover" : "isout"] = false;
			this[c === "isover" ? "_over" : "_out"].call(this, event);

			// we just moved out of a greedy child
			if (parentInstance && c === "isout") {
				parentInstance.isout = false;
				parentInstance.isover = true;
				parentInstance._over.call(parentInstance, event);
			}
		});

	},
	dragStop: function( draggable, event ) {
		draggable.element.parentsUntil( "body" ).unbind( "scroll.droppable" );
		//Call prepareOffsets one final time since IE does not fire return scroll events when overflow was caused by drag (see #5003)
		if( !draggable.options.refreshPositions ) {
			$.ui.ddmanager.prepareOffsets( draggable, event );
		}
	}
};

})(jQuery);

(function( $, undefined ) {

function num(v) {
	return parseInt(v, 10) || 0;
}

function isNumber(value) {
	return !isNaN(parseInt(value, 10));
}

$.widget("ui.resizable", $.ui.mouse, {
	version: "1.10.3",
	widgetEventPrefix: "resize",
	options: {
		alsoResize: false,
		animate: false,
		animateDuration: "slow",
		animateEasing: "swing",
		aspectRatio: false,
		autoHide: false,
		containment: false,
		ghost: false,
		grid: false,
		handles: "e,s,se",
		helper: false,
		maxHeight: null,
		maxWidth: null,
		minHeight: 10,
		minWidth: 10,
		// See #7960
		zIndex: 90,

		// callbacks
		resize: null,
		start: null,
		stop: null
	},
	_create: function() {

		var n, i, handle, axis, hname,
			that = this,
			o = this.options;
		this.element.addClass("ui-resizable");

		$.extend(this, {
			_aspectRatio: !!(o.aspectRatio),
			aspectRatio: o.aspectRatio,
			originalElement: this.element,
			_proportionallyResizeElements: [],
			_helper: o.helper || o.ghost || o.animate ? o.helper || "ui-resizable-helper" : null
		});

		//Wrap the element if it cannot hold child nodes
		if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)) {

			//Create a wrapper element and set the wrapper to the new current internal element
			this.element.wrap(
				$("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({
					position: this.element.css("position"),
					width: this.element.outerWidth(),
					height: this.element.outerHeight(),
					top: this.element.css("top"),
					left: this.element.css("left")
				})
			);

			//Overwrite the original this.element
			this.element = this.element.parent().data(
				"ui-resizable", this.element.data("ui-resizable")
			);

			this.elementIsWrapper = true;

			//Move margins to the wrapper
			this.element.css({ marginLeft: this.originalElement.css("marginLeft"), marginTop: this.originalElement.css("marginTop"), marginRight: this.originalElement.css("marginRight"), marginBottom: this.originalElement.css("marginBottom") });
			this.originalElement.css({ marginLeft: 0, marginTop: 0, marginRight: 0, marginBottom: 0});

			//Prevent Safari textarea resize
			this.originalResizeStyle = this.originalElement.css("resize");
			this.originalElement.css("resize", "none");

			//Push the actual element to our proportionallyResize internal array
			this._proportionallyResizeElements.push(this.originalElement.css({ position: "static", zoom: 1, display: "block" }));

			// avoid IE jump (hard set the margin)
			this.originalElement.css({ margin: this.originalElement.css("margin") });

			// fix handlers offset
			this._proportionallyResize();

		}

		this.handles = o.handles || (!$(".ui-resizable-handle", this.element).length ? "e,s,se" : { n: ".ui-resizable-n", e: ".ui-resizable-e", s: ".ui-resizable-s", w: ".ui-resizable-w", se: ".ui-resizable-se", sw: ".ui-resizable-sw", ne: ".ui-resizable-ne", nw: ".ui-resizable-nw" });
		if(this.handles.constructor === String) {

			if ( this.handles === "all") {
				this.handles = "n,e,s,w,se,sw,ne,nw";
			}

			n = this.handles.split(",");
			this.handles = {};

			for(i = 0; i < n.length; i++) {

				handle = $.trim(n[i]);
				hname = "ui-resizable-"+handle;
				axis = $("<div class='ui-resizable-handle " + hname + "'></div>");

				// Apply zIndex to all handles - see #7960
				axis.css({ zIndex: o.zIndex });

				//TODO : What's going on here?
				if ("se" === handle) {
					axis.addClass("ui-icon ui-icon-gripsmall-diagonal-se");
				}

				//Insert into internal handles object and append to element
				this.handles[handle] = ".ui-resizable-"+handle;
				this.element.append(axis);
			}

		}

		this._renderAxis = function(target) {

			var i, axis, padPos, padWrapper;

			target = target || this.element;

			for(i in this.handles) {

				if(this.handles[i].constructor === String) {
					this.handles[i] = $(this.handles[i], this.element).show();
				}

				//Apply pad to wrapper element, needed to fix axis position (textarea, inputs, scrolls)
				if (this.elementIsWrapper && this.originalElement[0].nodeName.match(/textarea|input|select|button/i)) {

					axis = $(this.handles[i], this.element);

					//Checking the correct pad and border
					padWrapper = /sw|ne|nw|se|n|s/.test(i) ? axis.outerHeight() : axis.outerWidth();

					//The padding type i have to apply...
					padPos = [ "padding",
						/ne|nw|n/.test(i) ? "Top" :
						/se|sw|s/.test(i) ? "Bottom" :
						/^e$/.test(i) ? "Right" : "Left" ].join("");

					target.css(padPos, padWrapper);

					this._proportionallyResize();

				}

				//TODO: What's that good for? There's not anything to be executed left
				if(!$(this.handles[i]).length) {
					continue;
				}
			}
		};

		//TODO: make renderAxis a prototype function
		this._renderAxis(this.element);

		this._handles = $(".ui-resizable-handle", this.element)
			.disableSelection();

		//Matching axis name
		this._handles.mouseover(function() {
			if (!that.resizing) {
				if (this.className) {
					axis = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);
				}
				//Axis, default = se
				that.axis = axis && axis[1] ? axis[1] : "se";
			}
		});

		//If we want to auto hide the elements
		if (o.autoHide) {
			this._handles.hide();
			$(this.element)
				.addClass("ui-resizable-autohide")
				.mouseenter(function() {
					if (o.disabled) {
						return;
					}
					$(this).removeClass("ui-resizable-autohide");
					that._handles.show();
				})
				.mouseleave(function(){
					if (o.disabled) {
						return;
					}
					if (!that.resizing) {
						$(this).addClass("ui-resizable-autohide");
						that._handles.hide();
					}
				});
		}

		//Initialize the mouse interaction
		this._mouseInit();

	},

	_destroy: function() {

		this._mouseDestroy();

		var wrapper,
			_destroy = function(exp) {
				$(exp).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing")
					.removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove();
			};

		//TODO: Unwrap at same DOM position
		if (this.elementIsWrapper) {
			_destroy(this.element);
			wrapper = this.element;
			this.originalElement.css({
				position: wrapper.css("position"),
				width: wrapper.outerWidth(),
				height: wrapper.outerHeight(),
				top: wrapper.css("top"),
				left: wrapper.css("left")
			}).insertAfter( wrapper );
			wrapper.remove();
		}

		this.originalElement.css("resize", this.originalResizeStyle);
		_destroy(this.originalElement);

		return this;
	},

	_mouseCapture: function(event) {
		var i, handle,
			capture = false;

		for (i in this.handles) {
			handle = $(this.handles[i])[0];
			if (handle === event.target || $.contains(handle, event.target)) {
				capture = true;
			}
		}

		return !this.options.disabled && capture;
	},

	_mouseStart: function(event) {

		var curleft, curtop, cursor,
			o = this.options,
			iniPos = this.element.position(),
			el = this.element;

		this.resizing = true;

		// bugfix for http://dev.jquery.com/ticket/1749
		if ( (/absolute/).test( el.css("position") ) ) {
			el.css({ position: "absolute", top: el.css("top"), left: el.css("left") });
		} else if (el.is(".ui-draggable")) {
			el.css({ position: "absolute", top: iniPos.top, left: iniPos.left });
		}

		this._renderProxy();

		curleft = num(this.helper.css("left"));
		curtop = num(this.helper.css("top"));

		if (o.containment) {
			curleft += $(o.containment).scrollLeft() || 0;
			curtop += $(o.containment).scrollTop() || 0;
		}

		//Store needed variables
		this.offset = this.helper.offset();
		this.position = { left: curleft, top: curtop };
		this.size = this._helper ? { width: el.outerWidth(), height: el.outerHeight() } : { width: el.width(), height: el.height() };
		this.originalSize = this._helper ? { width: el.outerWidth(), height: el.outerHeight() } : { width: el.width(), height: el.height() };
		this.originalPosition = { left: curleft, top: curtop };
		this.sizeDiff = { width: el.outerWidth() - el.width(), height: el.outerHeight() - el.height() };
		this.originalMousePosition = { left: event.pageX, top: event.pageY };

		//Aspect Ratio
		this.aspectRatio = (typeof o.aspectRatio === "number") ? o.aspectRatio : ((this.originalSize.width / this.originalSize.height) || 1);

		cursor = $(".ui-resizable-" + this.axis).css("cursor");
		$("body").css("cursor", cursor === "auto" ? this.axis + "-resize" : cursor);

		el.addClass("ui-resizable-resizing");
		this._propagate("start", event);
		return true;
	},

	_mouseDrag: function(event) {

		//Increase performance, avoid regex
		var data,
			el = this.helper, props = {},
			smp = this.originalMousePosition,
			a = this.axis,
			prevTop = this.position.top,
			prevLeft = this.position.left,
			prevWidth = this.size.width,
			prevHeight = this.size.height,
			dx = (event.pageX-smp.left)||0,
			dy = (event.pageY-smp.top)||0,
			trigger = this._change[a];

		if (!trigger) {
			return false;
		}

		// Calculate the attrs that will be change
		data = trigger.apply(this, [event, dx, dy]);

		// Put this in the mouseDrag handler since the user can start pressing shift while resizing
		this._updateVirtualBoundaries(event.shiftKey);
		if (this._aspectRatio || event.shiftKey) {
			data = this._updateRatio(data, event);
		}

		data = this._respectSize(data, event);

		this._updateCache(data);

		// plugins callbacks need to be called first
		this._propagate("resize", event);

		if (this.position.top !== prevTop) {
			props.top = this.position.top + "px";
		}
		if (this.position.left !== prevLeft) {
			props.left = this.position.left + "px";
		}
		if (this.size.width !== prevWidth) {
			props.width = this.size.width + "px";
		}
		if (this.size.height !== prevHeight) {
			props.height = this.size.height + "px";
		}
		el.css(props);

		if (!this._helper && this._proportionallyResizeElements.length) {
			this._proportionallyResize();
		}

		// Call the user callback if the element was resized
		if ( ! $.isEmptyObject(props) ) {
			this._trigger("resize", event, this.ui());
		}

		return false;
	},

	_mouseStop: function(event) {

		this.resizing = false;
		var pr, ista, soffseth, soffsetw, s, left, top,
			o = this.options, that = this;

		if(this._helper) {

			pr = this._proportionallyResizeElements;
			ista = pr.length && (/textarea/i).test(pr[0].nodeName);
			soffseth = ista && $.ui.hasScroll(pr[0], "left") /* TODO - jump height */ ? 0 : that.sizeDiff.height;
			soffsetw = ista ? 0 : that.sizeDiff.width;

			s = { width: (that.helper.width()  - soffsetw), height: (that.helper.height() - soffseth) };
			left = (parseInt(that.element.css("left"), 10) + (that.position.left - that.originalPosition.left)) || null;
			top = (parseInt(that.element.css("top"), 10) + (that.position.top - that.originalPosition.top)) || null;

			if (!o.animate) {
				this.element.css($.extend(s, { top: top, left: left }));
			}

			that.helper.height(that.size.height);
			that.helper.width(that.size.width);

			if (this._helper && !o.animate) {
				this._proportionallyResize();
			}
		}

		$("body").css("cursor", "auto");

		this.element.removeClass("ui-resizable-resizing");

		this._propagate("stop", event);

		if (this._helper) {
			this.helper.remove();
		}

		return false;

	},

	_updateVirtualBoundaries: function(forceAspectRatio) {
		var pMinWidth, pMaxWidth, pMinHeight, pMaxHeight, b,
			o = this.options;

		b = {
			minWidth: isNumber(o.minWidth) ? o.minWidth : 0,
			maxWidth: isNumber(o.maxWidth) ? o.maxWidth : Infinity,
			minHeight: isNumber(o.minHeight) ? o.minHeight : 0,
			maxHeight: isNumber(o.maxHeight) ? o.maxHeight : Infinity
		};

		if(this._aspectRatio || forceAspectRatio) {
			// We want to create an enclosing box whose aspect ration is the requested one
			// First, compute the "projected" size for each dimension based on the aspect ratio and other dimension
			pMinWidth = b.minHeight * this.aspectRatio;
			pMinHeight = b.minWidth / this.aspectRatio;
			pMaxWidth = b.maxHeight * this.aspectRatio;
			pMaxHeight = b.maxWidth / this.aspectRatio;

			if(pMinWidth > b.minWidth) {
				b.minWidth = pMinWidth;
			}
			if(pMinHeight > b.minHeight) {
				b.minHeight = pMinHeight;
			}
			if(pMaxWidth < b.maxWidth) {
				b.maxWidth = pMaxWidth;
			}
			if(pMaxHeight < b.maxHeight) {
				b.maxHeight = pMaxHeight;
			}
		}
		this._vBoundaries = b;
	},

	_updateCache: function(data) {
		this.offset = this.helper.offset();
		if (isNumber(data.left)) {
			this.position.left = data.left;
		}
		if (isNumber(data.top)) {
			this.position.top = data.top;
		}
		if (isNumber(data.height)) {
			this.size.height = data.height;
		}
		if (isNumber(data.width)) {
			this.size.width = data.width;
		}
	},

	_updateRatio: function( data ) {

		var cpos = this.position,
			csize = this.size,
			a = this.axis;

		if (isNumber(data.height)) {
			data.width = (data.height * this.aspectRatio);
		} else if (isNumber(data.width)) {
			data.height = (data.width / this.aspectRatio);
		}

		if (a === "sw") {
			data.left = cpos.left + (csize.width - data.width);
			data.top = null;
		}
		if (a === "nw") {
			data.top = cpos.top + (csize.height - data.height);
			data.left = cpos.left + (csize.width - data.width);
		}

		return data;
	},

	_respectSize: function( data ) {

		var o = this._vBoundaries,
			a = this.axis,
			ismaxw = isNumber(data.width) && o.maxWidth && (o.maxWidth < data.width), ismaxh = isNumber(data.height) && o.maxHeight && (o.maxHeight < data.height),
			isminw = isNumber(data.width) && o.minWidth && (o.minWidth > data.width), isminh = isNumber(data.height) && o.minHeight && (o.minHeight > data.height),
			dw = this.originalPosition.left + this.originalSize.width,
			dh = this.position.top + this.size.height,
			cw = /sw|nw|w/.test(a), ch = /nw|ne|n/.test(a);
		if (isminw) {
			data.width = o.minWidth;
		}
		if (isminh) {
			data.height = o.minHeight;
		}
		if (ismaxw) {
			data.width = o.maxWidth;
		}
		if (ismaxh) {
			data.height = o.maxHeight;
		}

		if (isminw && cw) {
			data.left = dw - o.minWidth;
		}
		if (ismaxw && cw) {
			data.left = dw - o.maxWidth;
		}
		if (isminh && ch) {
			data.top = dh - o.minHeight;
		}
		if (ismaxh && ch) {
			data.top = dh - o.maxHeight;
		}

		// fixing jump error on top/left - bug #2330
		if (!data.width && !data.height && !data.left && data.top) {
			data.top = null;
		} else if (!data.width && !data.height && !data.top && data.left) {
			data.left = null;
		}

		return data;
	},

	_proportionallyResize: function() {

		if (!this._proportionallyResizeElements.length) {
			return;
		}

		var i, j, borders, paddings, prel,
			element = this.helper || this.element;

		for ( i=0; i < this._proportionallyResizeElements.length; i++) {

			prel = this._proportionallyResizeElements[i];

			if (!this.borderDif) {
				this.borderDif = [];
				borders = [prel.css("borderTopWidth"), prel.css("borderRightWidth"), prel.css("borderBottomWidth"), prel.css("borderLeftWidth")];
				paddings = [prel.css("paddingTop"), prel.css("paddingRight"), prel.css("paddingBottom"), prel.css("paddingLeft")];

				for ( j = 0; j < borders.length; j++ ) {
					this.borderDif[ j ] = ( parseInt( borders[ j ], 10 ) || 0 ) + ( parseInt( paddings[ j ], 10 ) || 0 );
				}
			}

			prel.css({
				height: (element.height() - this.borderDif[0] - this.borderDif[2]) || 0,
				width: (element.width() - this.borderDif[1] - this.borderDif[3]) || 0
			});

		}

	},

	_renderProxy: function() {

		var el = this.element, o = this.options;
		this.elementOffset = el.offset();

		if(this._helper) {

			this.helper = this.helper || $("<div style='overflow:hidden;'></div>");

			this.helper.addClass(this._helper).css({
				width: this.element.outerWidth() - 1,
				height: this.element.outerHeight() - 1,
				position: "absolute",
				left: this.elementOffset.left +"px",
				top: this.elementOffset.top +"px",
				zIndex: ++o.zIndex //TODO: Don't modify option
			});

			this.helper
				.appendTo("body")
				.disableSelection();

		} else {
			this.helper = this.element;
		}

	},

	_change: {
		e: function(event, dx) {
			return { width: this.originalSize.width + dx };
		},
		w: function(event, dx) {
			var cs = this.originalSize, sp = this.originalPosition;
			return { left: sp.left + dx, width: cs.width - dx };
		},
		n: function(event, dx, dy) {
			var cs = this.originalSize, sp = this.originalPosition;
			return { top: sp.top + dy, height: cs.height - dy };
		},
		s: function(event, dx, dy) {
			return { height: this.originalSize.height + dy };
		},
		se: function(event, dx, dy) {
			return $.extend(this._change.s.apply(this, arguments), this._change.e.apply(this, [event, dx, dy]));
		},
		sw: function(event, dx, dy) {
			return $.extend(this._change.s.apply(this, arguments), this._change.w.apply(this, [event, dx, dy]));
		},
		ne: function(event, dx, dy) {
			return $.extend(this._change.n.apply(this, arguments), this._change.e.apply(this, [event, dx, dy]));
		},
		nw: function(event, dx, dy) {
			return $.extend(this._change.n.apply(this, arguments), this._change.w.apply(this, [event, dx, dy]));
		}
	},

	_propagate: function(n, event) {
		$.ui.plugin.call(this, n, [event, this.ui()]);
		(n !== "resize" && this._trigger(n, event, this.ui()));
	},

	plugins: {},

	ui: function() {
		return {
			originalElement: this.originalElement,
			element: this.element,
			helper: this.helper,
			position: this.position,
			size: this.size,
			originalSize: this.originalSize,
			originalPosition: this.originalPosition
		};
	}

});

/*
 * Resizable Extensions
 */

$.ui.plugin.add("resizable", "animate", {

	stop: function( event ) {
		var that = $(this).data("ui-resizable"),
			o = that.options,
			pr = that._proportionallyResizeElements,
			ista = pr.length && (/textarea/i).test(pr[0].nodeName),
			soffseth = ista && $.ui.hasScroll(pr[0], "left") /* TODO - jump height */ ? 0 : that.sizeDiff.height,
			soffsetw = ista ? 0 : that.sizeDiff.width,
			style = { width: (that.size.width - soffsetw), height: (that.size.height - soffseth) },
			left = (parseInt(that.element.css("left"), 10) + (that.position.left - that.originalPosition.left)) || null,
			top = (parseInt(that.element.css("top"), 10) + (that.position.top - that.originalPosition.top)) || null;

		that.element.animate(
			$.extend(style, top && left ? { top: top, left: left } : {}), {
				duration: o.animateDuration,
				easing: o.animateEasing,
				step: function() {

					var data = {
						width: parseInt(that.element.css("width"), 10),
						height: parseInt(that.element.css("height"), 10),
						top: parseInt(that.element.css("top"), 10),
						left: parseInt(that.element.css("left"), 10)
					};

					if (pr && pr.length) {
						$(pr[0]).css({ width: data.width, height: data.height });
					}

					// propagating resize, and updating values for each animation step
					that._updateCache(data);
					that._propagate("resize", event);

				}
			}
		);
	}

});

$.ui.plugin.add("resizable", "containment", {

	start: function() {
		var element, p, co, ch, cw, width, height,
			that = $(this).data("ui-resizable"),
			o = that.options,
			el = that.element,
			oc = o.containment,
			ce = (oc instanceof $) ? oc.get(0) : (/parent/.test(oc)) ? el.parent().get(0) : oc;

		if (!ce) {
			return;
		}

		that.containerElement = $(ce);

		if (/document/.test(oc) || oc === document) {
			that.containerOffset = { left: 0, top: 0 };
			that.containerPosition = { left: 0, top: 0 };

			that.parentData = {
				element: $(document), left: 0, top: 0,
				width: $(document).width(), height: $(document).height() || document.body.parentNode.scrollHeight
			};
		}

		// i'm a node, so compute top, left, right, bottom
		else {
			element = $(ce);
			p = [];
			$([ "Top", "Right", "Left", "Bottom" ]).each(function(i, name) { p[i] = num(element.css("padding" + name)); });

			that.containerOffset = element.offset();
			that.containerPosition = element.position();
			that.containerSize = { height: (element.innerHeight() - p[3]), width: (element.innerWidth() - p[1]) };

			co = that.containerOffset;
			ch = that.containerSize.height;
			cw = that.containerSize.width;
			width = ($.ui.hasScroll(ce, "left") ? ce.scrollWidth : cw );
			height = ($.ui.hasScroll(ce) ? ce.scrollHeight : ch);

			that.parentData = {
				element: ce, left: co.left, top: co.top, width: width, height: height
			};
		}
	},

	resize: function( event ) {
		var woset, hoset, isParent, isOffsetRelative,
			that = $(this).data("ui-resizable"),
			o = that.options,
			co = that.containerOffset, cp = that.position,
			pRatio = that._aspectRatio || event.shiftKey,
			cop = { top:0, left:0 }, ce = that.containerElement;

		if (ce[0] !== document && (/static/).test(ce.css("position"))) {
			cop = co;
		}

		if (cp.left < (that._helper ? co.left : 0)) {
			that.size.width = that.size.width + (that._helper ? (that.position.left - co.left) : (that.position.left - cop.left));
			if (pRatio) {
				that.size.height = that.size.width / that.aspectRatio;
			}
			that.position.left = o.helper ? co.left : 0;
		}

		if (cp.top < (that._helper ? co.top : 0)) {
			that.size.height = that.size.height + (that._helper ? (that.position.top - co.top) : that.position.top);
			if (pRatio) {
				that.size.width = that.size.height * that.aspectRatio;
			}
			that.position.top = that._helper ? co.top : 0;
		}

		that.offset.left = that.parentData.left+that.position.left;
		that.offset.top = that.parentData.top+that.position.top;

		woset = Math.abs( (that._helper ? that.offset.left - cop.left : (that.offset.left - cop.left)) + that.sizeDiff.width );
		hoset = Math.abs( (that._helper ? that.offset.top - cop.top : (that.offset.top - co.top)) + that.sizeDiff.height );

		isParent = that.containerElement.get(0) === that.element.parent().get(0);
		isOffsetRelative = /relative|absolute/.test(that.containerElement.css("position"));

		if(isParent && isOffsetRelative) {
			woset -= that.parentData.left;
		}

		if (woset + that.size.width >= that.parentData.width) {
			that.size.width = that.parentData.width - woset;
			if (pRatio) {
				that.size.height = that.size.width / that.aspectRatio;
			}
		}

		if (hoset + that.size.height >= that.parentData.height) {
			that.size.height = that.parentData.height - hoset;
			if (pRatio) {
				that.size.width = that.size.height * that.aspectRatio;
			}
		}
	},

	stop: function(){
		var that = $(this).data("ui-resizable"),
			o = that.options,
			co = that.containerOffset,
			cop = that.containerPosition,
			ce = that.containerElement,
			helper = $(that.helper),
			ho = helper.offset(),
			w = helper.outerWidth() - that.sizeDiff.width,
			h = helper.outerHeight() - that.sizeDiff.height;

		if (that._helper && !o.animate && (/relative/).test(ce.css("position"))) {
			$(this).css({ left: ho.left - cop.left - co.left, width: w, height: h });
		}

		if (that._helper && !o.animate && (/static/).test(ce.css("position"))) {
			$(this).css({ left: ho.left - cop.left - co.left, width: w, height: h });
		}

	}
});

$.ui.plugin.add("resizable", "alsoResize", {

	start: function () {
		var that = $(this).data("ui-resizable"),
			o = that.options,
			_store = function (exp) {
				$(exp).each(function() {
					var el = $(this);
					el.data("ui-resizable-alsoresize", {
						width: parseInt(el.width(), 10), height: parseInt(el.height(), 10),
						left: parseInt(el.css("left"), 10), top: parseInt(el.css("top"), 10)
					});
				});
			};

		if (typeof(o.alsoResize) === "object" && !o.alsoResize.parentNode) {
			if (o.alsoResize.length) { o.alsoResize = o.alsoResize[0]; _store(o.alsoResize); }
			else { $.each(o.alsoResize, function (exp) { _store(exp); }); }
		}else{
			_store(o.alsoResize);
		}
	},

	resize: function (event, ui) {
		var that = $(this).data("ui-resizable"),
			o = that.options,
			os = that.originalSize,
			op = that.originalPosition,
			delta = {
				height: (that.size.height - os.height) || 0, width: (that.size.width - os.width) || 0,
				top: (that.position.top - op.top) || 0, left: (that.position.left - op.left) || 0
			},

			_alsoResize = function (exp, c) {
				$(exp).each(function() {
					var el = $(this), start = $(this).data("ui-resizable-alsoresize"), style = {},
						css = c && c.length ? c : el.parents(ui.originalElement[0]).length ? ["width", "height"] : ["width", "height", "top", "left"];

					$.each(css, function (i, prop) {
						var sum = (start[prop]||0) + (delta[prop]||0);
						if (sum && sum >= 0) {
							style[prop] = sum || null;
						}
					});

					el.css(style);
				});
			};

		if (typeof(o.alsoResize) === "object" && !o.alsoResize.nodeType) {
			$.each(o.alsoResize, function (exp, c) { _alsoResize(exp, c); });
		}else{
			_alsoResize(o.alsoResize);
		}
	},

	stop: function () {
		$(this).removeData("resizable-alsoresize");
	}
});

$.ui.plugin.add("resizable", "ghost", {

	start: function() {

		var that = $(this).data("ui-resizable"), o = that.options, cs = that.size;

		that.ghost = that.originalElement.clone();
		that.ghost
			.css({ opacity: 0.25, display: "block", position: "relative", height: cs.height, width: cs.width, margin: 0, left: 0, top: 0 })
			.addClass("ui-resizable-ghost")
			.addClass(typeof o.ghost === "string" ? o.ghost : "");

		that.ghost.appendTo(that.helper);

	},

	resize: function(){
		var that = $(this).data("ui-resizable");
		if (that.ghost) {
			that.ghost.css({ position: "relative", height: that.size.height, width: that.size.width });
		}
	},

	stop: function() {
		var that = $(this).data("ui-resizable");
		if (that.ghost && that.helper) {
			that.helper.get(0).removeChild(that.ghost.get(0));
		}
	}

});

$.ui.plugin.add("resizable", "grid", {

	resize: function() {
		var that = $(this).data("ui-resizable"),
			o = that.options,
			cs = that.size,
			os = that.originalSize,
			op = that.originalPosition,
			a = that.axis,
			grid = typeof o.grid === "number" ? [o.grid, o.grid] : o.grid,
			gridX = (grid[0]||1),
			gridY = (grid[1]||1),
			ox = Math.round((cs.width - os.width) / gridX) * gridX,
			oy = Math.round((cs.height - os.height) / gridY) * gridY,
			newWidth = os.width + ox,
			newHeight = os.height + oy,
			isMaxWidth = o.maxWidth && (o.maxWidth < newWidth),
			isMaxHeight = o.maxHeight && (o.maxHeight < newHeight),
			isMinWidth = o.minWidth && (o.minWidth > newWidth),
			isMinHeight = o.minHeight && (o.minHeight > newHeight);

		o.grid = grid;

		if (isMinWidth) {
			newWidth = newWidth + gridX;
		}
		if (isMinHeight) {
			newHeight = newHeight + gridY;
		}
		if (isMaxWidth) {
			newWidth = newWidth - gridX;
		}
		if (isMaxHeight) {
			newHeight = newHeight - gridY;
		}

		if (/^(se|s|e)$/.test(a)) {
			that.size.width = newWidth;
			that.size.height = newHeight;
		} else if (/^(ne)$/.test(a)) {
			that.size.width = newWidth;
			that.size.height = newHeight;
			that.position.top = op.top - oy;
		} else if (/^(sw)$/.test(a)) {
			that.size.width = newWidth;
			that.size.height = newHeight;
			that.position.left = op.left - ox;
		} else {
			that.size.width = newWidth;
			that.size.height = newHeight;
			that.position.top = op.top - oy;
			that.position.left = op.left - ox;
		}
	}

});

})(jQuery);

(function( $, undefined ) {

$.widget("ui.selectable", $.ui.mouse, {
	version: "1.10.3",
	options: {
		appendTo: "body",
		autoRefresh: true,
		distance: 0,
		filter: "*",
		tolerance: "touch",

		// callbacks
		selected: null,
		selecting: null,
		start: null,
		stop: null,
		unselected: null,
		unselecting: null
	},
	_create: function() {
		var selectees,
			that = this;

		this.element.addClass("ui-selectable");

		this.dragged = false;

		// cache selectee children based on filter
		this.refresh = function() {
			selectees = $(that.options.filter, that.element[0]);
			selectees.addClass("ui-selectee");
			selectees.each(function() {
				var $this = $(this),
					pos = $this.offset();
				$.data(this, "selectable-item", {
					element: this,
					$element: $this,
					left: pos.left,
					top: pos.top,
					right: pos.left + $this.outerWidth(),
					bottom: pos.top + $this.outerHeight(),
					startselected: false,
					selected: $this.hasClass("ui-selected"),
					selecting: $this.hasClass("ui-selecting"),
					unselecting: $this.hasClass("ui-unselecting")
				});
			});
		};
		this.refresh();

		this.selectees = selectees.addClass("ui-selectee");

		this._mouseInit();

		this.helper = $("<div class='ui-selectable-helper'></div>");
	},

	_destroy: function() {
		this.selectees
			.removeClass("ui-selectee")
			.removeData("selectable-item");
		this.element
			.removeClass("ui-selectable ui-selectable-disabled");
		this._mouseDestroy();
	},

	_mouseStart: function(event) {
		var that = this,
			options = this.options;

		this.opos = [event.pageX, event.pageY];

		if (this.options.disabled) {
			return;
		}

		this.selectees = $(options.filter, this.element[0]);

		this._trigger("start", event);

		$(options.appendTo).append(this.helper);
		// position helper (lasso)
		this.helper.css({
			"left": event.pageX,
			"top": event.pageY,
			"width": 0,
			"height": 0
		});

		if (options.autoRefresh) {
			this.refresh();
		}

		this.selectees.filter(".ui-selected").each(function() {
			var selectee = $.data(this, "selectable-item");
			selectee.startselected = true;
			if (!event.metaKey && !event.ctrlKey) {
				selectee.$element.removeClass("ui-selected");
				selectee.selected = false;
				selectee.$element.addClass("ui-unselecting");
				selectee.unselecting = true;
				// selectable UNSELECTING callback
				that._trigger("unselecting", event, {
					unselecting: selectee.element
				});
			}
		});

		$(event.target).parents().addBack().each(function() {
			var doSelect,
				selectee = $.data(this, "selectable-item");
			if (selectee) {
				doSelect = (!event.metaKey && !event.ctrlKey) || !selectee.$element.hasClass("ui-selected");
				selectee.$element
					.removeClass(doSelect ? "ui-unselecting" : "ui-selected")
					.addClass(doSelect ? "ui-selecting" : "ui-unselecting");
				selectee.unselecting = !doSelect;
				selectee.selecting = doSelect;
				selectee.selected = doSelect;
				// selectable (UN)SELECTING callback
				if (doSelect) {
					that._trigger("selecting", event, {
						selecting: selectee.element
					});
				} else {
					that._trigger("unselecting", event, {
						unselecting: selectee.element
					});
				}
				return false;
			}
		});

	},

	_mouseDrag: function(event) {

		this.dragged = true;

		if (this.options.disabled) {
			return;
		}

		var tmp,
			that = this,
			options = this.options,
			x1 = this.opos[0],
			y1 = this.opos[1],
			x2 = event.pageX,
			y2 = event.pageY;

		if (x1 > x2) { tmp = x2; x2 = x1; x1 = tmp; }
		if (y1 > y2) { tmp = y2; y2 = y1; y1 = tmp; }
		this.helper.css({left: x1, top: y1, width: x2-x1, height: y2-y1});

		this.selectees.each(function() {
			var selectee = $.data(this, "selectable-item"),
				hit = false;

			//prevent helper from being selected if appendTo: selectable
			if (!selectee || selectee.element === that.element[0]) {
				return;
			}

			if (options.tolerance === "touch") {
				hit = ( !(selectee.left > x2 || selectee.right < x1 || selectee.top > y2 || selectee.bottom < y1) );
			} else if (options.tolerance === "fit") {
				hit = (selectee.left > x1 && selectee.right < x2 && selectee.top > y1 && selectee.bottom < y2);
			}

			if (hit) {
				// SELECT
				if (selectee.selected) {
					selectee.$element.removeClass("ui-selected");
					selectee.selected = false;
				}
				if (selectee.unselecting) {
					selectee.$element.removeClass("ui-unselecting");
					selectee.unselecting = false;
				}
				if (!selectee.selecting) {
					selectee.$element.addClass("ui-selecting");
					selectee.selecting = true;
					// selectable SELECTING callback
					that._trigger("selecting", event, {
						selecting: selectee.element
					});
				}
			} else {
				// UNSELECT
				if (selectee.selecting) {
					if ((event.metaKey || event.ctrlKey) && selectee.startselected) {
						selectee.$element.removeClass("ui-selecting");
						selectee.selecting = false;
						selectee.$element.addClass("ui-selected");
						selectee.selected = true;
					} else {
						selectee.$element.removeClass("ui-selecting");
						selectee.selecting = false;
						if (selectee.startselected) {
							selectee.$element.addClass("ui-unselecting");
							selectee.unselecting = true;
						}
						// selectable UNSELECTING callback
						that._trigger("unselecting", event, {
							unselecting: selectee.element
						});
					}
				}
				if (selectee.selected) {
					if (!event.metaKey && !event.ctrlKey && !selectee.startselected) {
						selectee.$element.removeClass("ui-selected");
						selectee.selected = false;

						selectee.$element.addClass("ui-unselecting");
						selectee.unselecting = true;
						// selectable UNSELECTING callback
						that._trigger("unselecting", event, {
							unselecting: selectee.element
						});
					}
				}
			}
		});

		return false;
	},

	_mouseStop: function(event) {
		var that = this;

		this.dragged = false;

		$(".ui-unselecting", this.element[0]).each(function() {
			var selectee = $.data(this, "selectable-item");
			selectee.$element.removeClass("ui-unselecting");
			selectee.unselecting = false;
			selectee.startselected = false;
			that._trigger("unselected", event, {
				unselected: selectee.element
			});
		});
		$(".ui-selecting", this.element[0]).each(function() {
			var selectee = $.data(this, "selectable-item");
			selectee.$element.removeClass("ui-selecting").addClass("ui-selected");
			selectee.selecting = false;
			selectee.selected = true;
			selectee.startselected = true;
			that._trigger("selected", event, {
				selected: selectee.element
			});
		});
		this._trigger("stop", event);

		this.helper.remove();

		return false;
	}

});

})(jQuery);

(function( $, undefined ) {

/*jshint loopfunc: true */

function isOverAxis( x, reference, size ) {
	return ( x > reference ) && ( x < ( reference + size ) );
}

function isFloating(item) {
	return (/left|right/).test(item.css("float")) || (/inline|table-cell/).test(item.css("display"));
}

$.widget("ui.sortable", $.ui.mouse, {
	version: "1.10.3",
	widgetEventPrefix: "sort",
	ready: false,
	options: {
		appendTo: "parent",
		axis: false,
		connectWith: false,
		containment: false,
		cursor: "auto",
		cursorAt: false,
		dropOnEmpty: true,
		forcePlaceholderSize: false,
		forceHelperSize: false,
		grid: false,
		handle: false,
		helper: "original",
		items: "> *",
		opacity: false,
		placeholder: false,
		revert: false,
		scroll: true,
		scrollSensitivity: 20,
		scrollSpeed: 20,
		scope: "default",
		tolerance: "intersect",
		zIndex: 1000,

		// callbacks
		activate: null,
		beforeStop: null,
		change: null,
		deactivate: null,
		out: null,
		over: null,
		receive: null,
		remove: null,
		sort: null,
		start: null,
		stop: null,
		update: null
	},
	_create: function() {

		var o = this.options;
		this.containerCache = {};
		this.element.addClass("ui-sortable");

		//Get the items
		this.refresh();

		//Let's determine if the items are being displayed horizontally
		this.floating = this.items.length ? o.axis === "x" || isFloating(this.items[0].item) : false;

		//Let's determine the parent's offset
		this.offset = this.element.offset();

		//Initialize mouse events for interaction
		this._mouseInit();

		//We're ready to go
		this.ready = true;

	},

	_destroy: function() {
		this.element
			.removeClass("ui-sortable ui-sortable-disabled");
		this._mouseDestroy();

		for ( var i = this.items.length - 1; i >= 0; i-- ) {
			this.items[i].item.removeData(this.widgetName + "-item");
		}

		return this;
	},

	_setOption: function(key, value){
		if ( key === "disabled" ) {
			this.options[ key ] = value;

			this.widget().toggleClass( "ui-sortable-disabled", !!value );
		} else {
			// Don't call widget base _setOption for disable as it adds ui-state-disabled class
			$.Widget.prototype._setOption.apply(this, arguments);
		}
	},

	_mouseCapture: function(event, overrideHandle) {
		var currentItem = null,
			validHandle = false,
			that = this;

		if (this.reverting) {
			return false;
		}

		if(this.options.disabled || this.options.type === "static") {
			return false;
		}

		//We have to refresh the items data once first
		this._refreshItems(event);

		//Find out if the clicked node (or one of its parents) is a actual item in this.items
		$(event.target).parents().each(function() {
			if($.data(this, that.widgetName + "-item") === that) {
				currentItem = $(this);
				return false;
			}
		});
		if($.data(event.target, that.widgetName + "-item") === that) {
			currentItem = $(event.target);
		}

		if(!currentItem) {
			return false;
		}
		if(this.options.handle && !overrideHandle) {
			$(this.options.handle, currentItem).find("*").addBack().each(function() {
				if(this === event.target) {
					validHandle = true;
				}
			});
			if(!validHandle) {
				return false;
			}
		}

		this.currentItem = currentItem;
		this._removeCurrentsFromItems();
		return true;

	},

	_mouseStart: function(event, overrideHandle, noActivation) {

		var i, body,
			o = this.options;

		this.currentContainer = this;

		//We only need to call refreshPositions, because the refreshItems call has been moved to mouseCapture
		this.refreshPositions();

		//Create and append the visible helper
		this.helper = this._createHelper(event);

		//Cache the helper size
		this._cacheHelperProportions();

		/*
		 * - Position generation -
		 * This block generates everything position related - it's the core of draggables.
		 */

		//Cache the margins of the original element
		this._cacheMargins();

		//Get the next scrolling parent
		this.scrollParent = this.helper.scrollParent();

		//The element's absolute position on the page minus margins
		this.offset = this.currentItem.offset();
		this.offset = {
			top: this.offset.top - this.margins.top,
			left: this.offset.left - this.margins.left
		};

		$.extend(this.offset, {
			click: { //Where the click happened, relative to the element
				left: event.pageX - this.offset.left,
				top: event.pageY - this.offset.top
			},
			parent: this._getParentOffset(),
			relative: this._getRelativeOffset() //This is a relative to absolute position minus the actual position calculation - only used for relative positioned helper
		});

		// Only after we got the offset, we can change the helper's position to absolute
		// TODO: Still need to figure out a way to make relative sorting possible
		this.helper.css("position", "absolute");
		this.cssPosition = this.helper.css("position");

		//Generate the original position
		this.originalPosition = this._generatePosition(event);
		this.originalPageX = event.pageX;
		this.originalPageY = event.pageY;

		//Adjust the mouse offset relative to the helper if "cursorAt" is supplied
		(o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt));

		//Cache the former DOM position
		this.domPosition = { prev: this.currentItem.prev()[0], parent: this.currentItem.parent()[0] };

		//If the helper is not the original, hide the original so it's not playing any role during the drag, won't cause anything bad this way
		if(this.helper[0] !== this.currentItem[0]) {
			this.currentItem.hide();
		}

		//Create the placeholder
		this._createPlaceholder();

		//Set a containment if given in the options
		if(o.containment) {
			this._setContainment();
		}

		if( o.cursor && o.cursor !== "auto" ) { // cursor option
			body = this.document.find( "body" );

			// support: IE
			this.storedCursor = body.css( "cursor" );
			body.css( "cursor", o.cursor );

			this.storedStylesheet = $( "<style>*{ cursor: "+o.cursor+" !important; }</style>" ).appendTo( body );
		}

		if(o.opacity) { // opacity option
			if (this.helper.css("opacity")) {
				this._storedOpacity = this.helper.css("opacity");
			}
			this.helper.css("opacity", o.opacity);
		}

		if(o.zIndex) { // zIndex option
			if (this.helper.css("zIndex")) {
				this._storedZIndex = this.helper.css("zIndex");
			}
			this.helper.css("zIndex", o.zIndex);
		}

		//Prepare scrolling
		if(this.scrollParent[0] !== document && this.scrollParent[0].tagName !== "HTML") {
			this.overflowOffset = this.scrollParent.offset();
		}

		//Call callbacks
		this._trigger("start", event, this._uiHash());

		//Recache the helper size
		if(!this._preserveHelperProportions) {
			this._cacheHelperProportions();
		}


		//Post "activate" events to possible containers
		if( !noActivation ) {
			for ( i = this.containers.length - 1; i >= 0; i-- ) {
				this.containers[ i ]._trigger( "activate", event, this._uiHash( this ) );
			}
		}

		//Prepare possible droppables
		if($.ui.ddmanager) {
			$.ui.ddmanager.current = this;
		}

		if ($.ui.ddmanager && !o.dropBehaviour) {
			$.ui.ddmanager.prepareOffsets(this, event);
		}

		this.dragging = true;

		this.helper.addClass("ui-sortable-helper");
		this._mouseDrag(event); //Execute the drag once - this causes the helper not to be visible before getting its correct position
		return true;

	},

	_mouseDrag: function(event) {
		var i, item, itemElement, intersection,
			o = this.options,
			scrolled = false;

		//Compute the helpers position
		this.position = this._generatePosition(event);
		this.positionAbs = this._convertPositionTo("absolute");

		if (!this.lastPositionAbs) {
			this.lastPositionAbs = this.positionAbs;
		}

		//Do scrolling
		if(this.options.scroll) {
			if(this.scrollParent[0] !== document && this.scrollParent[0].tagName !== "HTML") {

				if((this.overflowOffset.top + this.scrollParent[0].offsetHeight) - event.pageY < o.scrollSensitivity) {
					this.scrollParent[0].scrollTop = scrolled = this.scrollParent[0].scrollTop + o.scrollSpeed;
				} else if(event.pageY - this.overflowOffset.top < o.scrollSensitivity) {
					this.scrollParent[0].scrollTop = scrolled = this.scrollParent[0].scrollTop - o.scrollSpeed;
				}

				if((this.overflowOffset.left + this.scrollParent[0].offsetWidth) - event.pageX < o.scrollSensitivity) {
					this.scrollParent[0].scrollLeft = scrolled = this.scrollParent[0].scrollLeft + o.scrollSpeed;
				} else if(event.pageX - this.overflowOffset.left < o.scrollSensitivity) {
					this.scrollParent[0].scrollLeft = scrolled = this.scrollParent[0].scrollLeft - o.scrollSpeed;
				}

			} else {

				if(event.pageY - $(document).scrollTop() < o.scrollSensitivity) {
					scrolled = $(document).scrollTop($(document).scrollTop() - o.scrollSpeed);
				} else if($(window).height() - (event.pageY - $(document).scrollTop()) < o.scrollSensitivity) {
					scrolled = $(document).scrollTop($(document).scrollTop() + o.scrollSpeed);
				}

				if(event.pageX - $(document).scrollLeft() < o.scrollSensitivity) {
					scrolled = $(document).scrollLeft($(document).scrollLeft() - o.scrollSpeed);
				} else if($(window).width() - (event.pageX - $(document).scrollLeft()) < o.scrollSensitivity) {
					scrolled = $(document).scrollLeft($(document).scrollLeft() + o.scrollSpeed);
				}

			}

			if(scrolled !== false && $.ui.ddmanager && !o.dropBehaviour) {
				$.ui.ddmanager.prepareOffsets(this, event);
			}
		}

		//Regenerate the absolute position used for position checks
		this.positionAbs = this._convertPositionTo("absolute");

		//Set the helper position
		if(!this.options.axis || this.options.axis !== "y") {
			this.helper[0].style.left = this.position.left+"px";
		}
		if(!this.options.axis || this.options.axis !== "x") {
			this.helper[0].style.top = this.position.top+"px";
		}

		//Rearrange
		for (i = this.items.length - 1; i >= 0; i--) {

			//Cache variables and intersection, continue if no intersection
			item = this.items[i];
			itemElement = item.item[0];
			intersection = this._intersectsWithPointer(item);
			if (!intersection) {
				continue;
			}

			// Only put the placeholder inside the current Container, skip all
			// items form other containers. This works because when moving
			// an item from one container to another the
			// currentContainer is switched before the placeholder is moved.
			//
			// Without this moving items in "sub-sortables" can cause the placeholder to jitter
			// beetween the outer and inner container.
			if (item.instance !== this.currentContainer) {
				continue;
			}

			// cannot intersect with itself
			// no useless actions that have been done before
			// no action if the item moved is the parent of the item checked
			if (itemElement !== this.currentItem[0] &&
				this.placeholder[intersection === 1 ? "next" : "prev"]()[0] !== itemElement &&
				!$.contains(this.placeholder[0], itemElement) &&
				(this.options.type === "semi-dynamic" ? !$.contains(this.element[0], itemElement) : true)
			) {

				this.direction = intersection === 1 ? "down" : "up";

				if (this.options.tolerance === "pointer" || this._intersectsWithSides(item)) {
					this._rearrange(event, item);
				} else {
					break;
				}

				this._trigger("change", event, this._uiHash());
				break;
			}
		}

		//Post events to containers
		this._contactContainers(event);

		//Interconnect with droppables
		if($.ui.ddmanager) {
			$.ui.ddmanager.drag(this, event);
		}

		//Call callbacks
		this._trigger("sort", event, this._uiHash());

		this.lastPositionAbs = this.positionAbs;
		return false;

	},

	_mouseStop: function(event, noPropagation) {

		if(!event) {
			return;
		}

		//If we are using droppables, inform the manager about the drop
		if ($.ui.ddmanager && !this.options.dropBehaviour) {
			$.ui.ddmanager.drop(this, event);
		}

		if(this.options.revert) {
			var that = this,
				cur = this.placeholder.offset(),
				axis = this.options.axis,
				animation = {};

			if ( !axis || axis === "x" ) {
				animation.left = cur.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollLeft);
			}
			if ( !axis || axis === "y" ) {
				animation.top = cur.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollTop);
			}
			this.reverting = true;
			$(this.helper).animate( animation, parseInt(this.options.revert, 10) || 500, function() {
				that._clear(event);
			});
		} else {
			this._clear(event, noPropagation);
		}

		return false;

	},

	cancel: function() {

		if(this.dragging) {

			this._mouseUp({ target: null });

			if(this.options.helper === "original") {
				this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");
			} else {
				this.currentItem.show();
			}

			//Post deactivating events to containers
			for (var i = this.containers.length - 1; i >= 0; i--){
				this.containers[i]._trigger("deactivate", null, this._uiHash(this));
				if(this.containers[i].containerCache.over) {
					this.containers[i]._trigger("out", null, this._uiHash(this));
					this.containers[i].containerCache.over = 0;
				}
			}

		}

		if (this.placeholder) {
			//$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately, it unbinds ALL events from the original node!
			if(this.placeholder[0].parentNode) {
				this.placeholder[0].parentNode.removeChild(this.placeholder[0]);
			}
			if(this.options.helper !== "original" && this.helper && this.helper[0].parentNode) {
				this.helper.remove();
			}

			$.extend(this, {
				helper: null,
				dragging: false,
				reverting: false,
				_noFinalSort: null
			});

			if(this.domPosition.prev) {
				$(this.domPosition.prev).after(this.currentItem);
			} else {
				$(this.domPosition.parent).prepend(this.currentItem);
			}
		}

		return this;

	},

	serialize: function(o) {

		var items = this._getItemsAsjQuery(o && o.connected),
			str = [];
		o = o || {};

		$(items).each(function() {
			var res = ($(o.item || this).attr(o.attribute || "id") || "").match(o.expression || (/(.+)[\-=_](.+)/));
			if (res) {
				str.push((o.key || res[1]+"[]")+"="+(o.key && o.expression ? res[1] : res[2]));
			}
		});

		if(!str.length && o.key) {
			str.push(o.key + "=");
		}

		return str.join("&");

	},

	toArray: function(o) {

		var items = this._getItemsAsjQuery(o && o.connected),
			ret = [];

		o = o || {};

		items.each(function() { ret.push($(o.item || this).attr(o.attribute || "id") || ""); });
		return ret;

	},

	/* Be careful with the following core functions */
	_intersectsWith: function(item) {

		var x1 = this.positionAbs.left,
			x2 = x1 + this.helperProportions.width,
			y1 = this.positionAbs.top,
			y2 = y1 + this.helperProportions.height,
			l = item.left,
			r = l + item.width,
			t = item.top,
			b = t + item.height,
			dyClick = this.offset.click.top,
			dxClick = this.offset.click.left,
			isOverElementHeight = ( this.options.axis === "x" ) || ( ( y1 + dyClick ) > t && ( y1 + dyClick ) < b ),
			isOverElementWidth = ( this.options.axis === "y" ) || ( ( x1 + dxClick ) > l && ( x1 + dxClick ) < r ),
			isOverElement = isOverElementHeight && isOverElementWidth;

		if ( this.options.tolerance === "pointer" ||
			this.options.forcePointerForContainers ||
			(this.options.tolerance !== "pointer" && this.helperProportions[this.floating ? "width" : "height"] > item[this.floating ? "width" : "height"])
		) {
			return isOverElement;
		} else {

			return (l < x1 + (this.helperProportions.width / 2) && // Right Half
				x2 - (this.helperProportions.width / 2) < r && // Left Half
				t < y1 + (this.helperProportions.height / 2) && // Bottom Half
				y2 - (this.helperProportions.height / 2) < b ); // Top Half

		}
	},

	_intersectsWithPointer: function(item) {

		var isOverElementHeight = (this.options.axis === "x") || isOverAxis(this.positionAbs.top + this.offset.click.top, item.top, item.height),
			isOverElementWidth = (this.options.axis === "y") || isOverAxis(this.positionAbs.left + this.offset.click.left, item.left, item.width),
			isOverElement = isOverElementHeight && isOverElementWidth,
			verticalDirection = this._getDragVerticalDirection(),
			horizontalDirection = this._getDragHorizontalDirection();

		if (!isOverElement) {
			return false;
		}

		return this.floating ?
			( ((horizontalDirection && horizontalDirection === "right") || verticalDirection === "down") ? 2 : 1 )
			: ( verticalDirection && (verticalDirection === "down" ? 2 : 1) );

	},

	_intersectsWithSides: function(item) {

		var isOverBottomHalf = isOverAxis(this.positionAbs.top + this.offset.click.top, item.top + (item.height/2), item.height),
			isOverRightHalf = isOverAxis(this.positionAbs.left + this.offset.click.left, item.left + (item.width/2), item.width),
			verticalDirection = this._getDragVerticalDirection(),
			horizontalDirection = this._getDragHorizontalDirection();

		if (this.floating && horizontalDirection) {
			return ((horizontalDirection === "right" && isOverRightHalf) || (horizontalDirection === "left" && !isOverRightHalf));
		} else {
			return verticalDirection && ((verticalDirection === "down" && isOverBottomHalf) || (verticalDirection === "up" && !isOverBottomHalf));
		}

	},

	_getDragVerticalDirection: function() {
		var delta = this.positionAbs.top - this.lastPositionAbs.top;
		return delta !== 0 && (delta > 0 ? "down" : "up");
	},

	_getDragHorizontalDirection: function() {
		var delta = this.positionAbs.left - this.lastPositionAbs.left;
		return delta !== 0 && (delta > 0 ? "right" : "left");
	},

	refresh: function(event) {
		this._refreshItems(event);
		this.refreshPositions();
		return this;
	},

	_connectWith: function() {
		var options = this.options;
		return options.connectWith.constructor === String ? [options.connectWith] : options.connectWith;
	},

	_getItemsAsjQuery: function(connected) {

		var i, j, cur, inst,
			items = [],
			queries = [],
			connectWith = this._connectWith();

		if(connectWith && connected) {
			for (i = connectWith.length - 1; i >= 0; i--){
				cur = $(connectWith[i]);
				for ( j = cur.length - 1; j >= 0; j--){
					inst = $.data(cur[j], this.widgetFullName);
					if(inst && inst !== this && !inst.options.disabled) {
						queries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element) : $(inst.options.items, inst.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), inst]);
					}
				}
			}
		}

		queries.push([$.isFunction(this.options.items) ? this.options.items.call(this.element, null, { options: this.options, item: this.currentItem }) : $(this.options.items, this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), this]);

		for (i = queries.length - 1; i >= 0; i--){
			queries[i][0].each(function() {
				items.push(this);
			});
		}

		return $(items);

	},

	_removeCurrentsFromItems: function() {

		var list = this.currentItem.find(":data(" + this.widgetName + "-item)");

		this.items = $.grep(this.items, function (item) {
			for (var j=0; j < list.length; j++) {
				if(list[j] === item.item[0]) {
					return false;
				}
			}
			return true;
		});

	},

	_refreshItems: function(event) {

		this.items = [];
		this.containers = [this];

		var i, j, cur, inst, targetData, _queries, item, queriesLength,
			items = this.items,
			queries = [[$.isFunction(this.options.items) ? this.options.items.call(this.element[0], event, { item: this.currentItem }) : $(this.options.items, this.element), this]],
			connectWith = this._connectWith();

		if(connectWith && this.ready) { //Shouldn't be run the first time through due to massive slow-down
			for (i = connectWith.length - 1; i >= 0; i--){
				cur = $(connectWith[i]);
				for (j = cur.length - 1; j >= 0; j--){
					inst = $.data(cur[j], this.widgetFullName);
					if(inst && inst !== this && !inst.options.disabled) {
						queries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element[0], event, { item: this.currentItem }) : $(inst.options.items, inst.element), inst]);
						this.containers.push(inst);
					}
				}
			}
		}

		for (i = queries.length - 1; i >= 0; i--) {
			targetData = queries[i][1];
			_queries = queries[i][0];

			for (j=0, queriesLength = _queries.length; j < queriesLength; j++) {
				item = $(_queries[j]);

				item.data(this.widgetName + "-item", targetData); // Data for target checking (mouse manager)

				items.push({
					item: item,
					instance: targetData,
					width: 0, height: 0,
					left: 0, top: 0
				});
			}
		}

	},

	refreshPositions: function(fast) {

		//This has to be redone because due to the item being moved out/into the offsetParent, the offsetParent's position will change
		if(this.offsetParent && this.helper) {
			this.offset.parent = this._getParentOffset();
		}

		var i, item, t, p;

		for (i = this.items.length - 1; i >= 0; i--){
			item = this.items[i];

			//We ignore calculating positions of all connected containers when we're not over them
			if(item.instance !== this.currentContainer && this.currentContainer && item.item[0] !== this.currentItem[0]) {
				continue;
			}

			t = this.options.toleranceElement ? $(this.options.toleranceElement, item.item) : item.item;

			if (!fast) {
				item.width = t.outerWidth();
				item.height = t.outerHeight();
			}

			p = t.offset();
			item.left = p.left;
			item.top = p.top;
		}

		if(this.options.custom && this.options.custom.refreshContainers) {
			this.options.custom.refreshContainers.call(this);
		} else {
			for (i = this.containers.length - 1; i >= 0; i--){
				p = this.containers[i].element.offset();
				this.containers[i].containerCache.left = p.left;
				this.containers[i].containerCache.top = p.top;
				this.containers[i].containerCache.width	= this.containers[i].element.outerWidth();
				this.containers[i].containerCache.height = this.containers[i].element.outerHeight();
			}
		}

		return this;
	},

	_createPlaceholder: function(that) {
		that = that || this;
		var className,
			o = that.options;

		if(!o.placeholder || o.placeholder.constructor === String) {
			className = o.placeholder;
			o.placeholder = {
				element: function() {

					var nodeName = that.currentItem[0].nodeName.toLowerCase(),
						element = $( "<" + nodeName + ">", that.document[0] )
							.addClass(className || that.currentItem[0].className+" ui-sortable-placeholder")
							.removeClass("ui-sortable-helper");

					if ( nodeName === "tr" ) {
						that.currentItem.children().each(function() {
							$( "<td>&#160;</td>", that.document[0] )
								.attr( "colspan", $( this ).attr( "colspan" ) || 1 )
								.appendTo( element );
						});
					} else if ( nodeName === "img" ) {
						element.attr( "src", that.currentItem.attr( "src" ) );
					}

					if ( !className ) {
						element.css( "visibility", "hidden" );
					}

					return element;
				},
				update: function(container, p) {

					// 1. If a className is set as 'placeholder option, we don't force sizes - the class is responsible for that
					// 2. The option 'forcePlaceholderSize can be enabled to force it even if a class name is specified
					if(className && !o.forcePlaceholderSize) {
						return;
					}

					//If the element doesn't have a actual height by itself (without styles coming from a stylesheet), it receives the inline height from the dragged item
					if(!p.height()) { p.height(that.currentItem.innerHeight() - parseInt(that.currentItem.css("paddingTop")||0, 10) - parseInt(that.currentItem.css("paddingBottom")||0, 10)); }
					if(!p.width()) { p.width(that.currentItem.innerWidth() - parseInt(that.currentItem.css("paddingLeft")||0, 10) - parseInt(that.currentItem.css("paddingRight")||0, 10)); }
				}
			};
		}

		//Create the placeholder
		that.placeholder = $(o.placeholder.element.call(that.element, that.currentItem));

		//Append it after the actual current item
		that.currentItem.after(that.placeholder);

		//Update the size of the placeholder (TODO: Logic to fuzzy, see line 316/317)
		o.placeholder.update(that, that.placeholder);

	},

	_contactContainers: function(event) {
		var i, j, dist, itemWithLeastDistance, posProperty, sizeProperty, base, cur, nearBottom, floating,
			innermostContainer = null,
			innermostIndex = null;

		// get innermost container that intersects with item
		for (i = this.containers.length - 1; i >= 0; i--) {

			// never consider a container that's located within the item itself
			if($.contains(this.currentItem[0], this.containers[i].element[0])) {
				continue;
			}

			if(this._intersectsWith(this.containers[i].containerCache)) {

				// if we've already found a container and it's more "inner" than this, then continue
				if(innermostContainer && $.contains(this.containers[i].element[0], innermostContainer.element[0])) {
					continue;
				}

				innermostContainer = this.containers[i];
				innermostIndex = i;

			} else {
				// container doesn't intersect. trigger "out" event if necessary
				if(this.containers[i].containerCache.over) {
					this.containers[i]._trigger("out", event, this._uiHash(this));
					this.containers[i].containerCache.over = 0;
				}
			}

		}

		// if no intersecting containers found, return
		if(!innermostContainer) {
			return;
		}

		// move the item into the container if it's not there already
		if(this.containers.length === 1) {
			if (!this.containers[innermostIndex].containerCache.over) {
				this.containers[innermostIndex]._trigger("over", event, this._uiHash(this));
				this.containers[innermostIndex].containerCache.over = 1;
			}
		} else {

			//When entering a new container, we will find the item with the least distance and append our item near it
			dist = 10000;
			itemWithLeastDistance = null;
			floating = innermostContainer.floating || isFloating(this.currentItem);
			posProperty = floating ? "left" : "top";
			sizeProperty = floating ? "width" : "height";
			base = this.positionAbs[posProperty] + this.offset.click[posProperty];
			for (j = this.items.length - 1; j >= 0; j--) {
				if(!$.contains(this.containers[innermostIndex].element[0], this.items[j].item[0])) {
					continue;
				}
				if(this.items[j].item[0] === this.currentItem[0]) {
					continue;
				}
				if (floating && !isOverAxis(this.positionAbs.top + this.offset.click.top, this.items[j].top, this.items[j].height)) {
					continue;
				}
				cur = this.items[j].item.offset()[posProperty];
				nearBottom = false;
				if(Math.abs(cur - base) > Math.abs(cur + this.items[j][sizeProperty] - base)){
					nearBottom = true;
					cur += this.items[j][sizeProperty];
				}

				if(Math.abs(cur - base) < dist) {
					dist = Math.abs(cur - base); itemWithLeastDistance = this.items[j];
					this.direction = nearBottom ? "up": "down";
				}
			}

			//Check if dropOnEmpty is enabled
			if(!itemWithLeastDistance && !this.options.dropOnEmpty) {
				return;
			}

			if(this.currentContainer === this.containers[innermostIndex]) {
				return;
			}

			itemWithLeastDistance ? this._rearrange(event, itemWithLeastDistance, null, true) : this._rearrange(event, null, this.containers[innermostIndex].element, true);
			this._trigger("change", event, this._uiHash());
			this.containers[innermostIndex]._trigger("change", event, this._uiHash(this));
			this.currentContainer = this.containers[innermostIndex];

			//Update the placeholder
			this.options.placeholder.update(this.currentContainer, this.placeholder);

			this.containers[innermostIndex]._trigger("over", event, this._uiHash(this));
			this.containers[innermostIndex].containerCache.over = 1;
		}


	},

	_createHelper: function(event) {

		var o = this.options,
			helper = $.isFunction(o.helper) ? $(o.helper.apply(this.element[0], [event, this.currentItem])) : (o.helper === "clone" ? this.currentItem.clone() : this.currentItem);

		//Add the helper to the DOM if that didn't happen already
		if(!helper.parents("body").length) {
			$(o.appendTo !== "parent" ? o.appendTo : this.currentItem[0].parentNode)[0].appendChild(helper[0]);
		}

		if(helper[0] === this.currentItem[0]) {
			this._storedCSS = { width: this.currentItem[0].style.width, height: this.currentItem[0].style.height, position: this.currentItem.css("position"), top: this.currentItem.css("top"), left: this.currentItem.css("left") };
		}

		if(!helper[0].style.width || o.forceHelperSize) {
			helper.width(this.currentItem.width());
		}
		if(!helper[0].style.height || o.forceHelperSize) {
			helper.height(this.currentItem.height());
		}

		return helper;

	},

	_adjustOffsetFromHelper: function(obj) {
		if (typeof obj === "string") {
			obj = obj.split(" ");
		}
		if ($.isArray(obj)) {
			obj = {left: +obj[0], top: +obj[1] || 0};
		}
		if ("left" in obj) {
			this.offset.click.left = obj.left + this.margins.left;
		}
		if ("right" in obj) {
			this.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;
		}
		if ("top" in obj) {
			this.offset.click.top = obj.top + this.margins.top;
		}
		if ("bottom" in obj) {
			this.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;
		}
	},

	_getParentOffset: function() {


		//Get the offsetParent and cache its position
		this.offsetParent = this.helper.offsetParent();
		var po = this.offsetParent.offset();

		// This is a special case where we need to modify a offset calculated on start, since the following happened:
		// 1. The position of the helper is absolute, so it's position is calculated based on the next positioned parent
		// 2. The actual offset parent is a child of the scroll parent, and the scroll parent isn't the document, which means that
		//    the scroll is included in the initial calculation of the offset of the parent, and never recalculated upon drag
		if(this.cssPosition === "absolute" && this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) {
			po.left += this.scrollParent.scrollLeft();
			po.top += this.scrollParent.scrollTop();
		}

		// This needs to be actually done for all browsers, since pageX/pageY includes this information
		// with an ugly IE fix
		if( this.offsetParent[0] === document.body || (this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() === "html" && $.ui.ie)) {
			po = { top: 0, left: 0 };
		}

		return {
			top: po.top + (parseInt(this.offsetParent.css("borderTopWidth"),10) || 0),
			left: po.left + (parseInt(this.offsetParent.css("borderLeftWidth"),10) || 0)
		};

	},

	_getRelativeOffset: function() {

		if(this.cssPosition === "relative") {
			var p = this.currentItem.position();
			return {
				top: p.top - (parseInt(this.helper.css("top"),10) || 0) + this.scrollParent.scrollTop(),
				left: p.left - (parseInt(this.helper.css("left"),10) || 0) + this.scrollParent.scrollLeft()
			};
		} else {
			return { top: 0, left: 0 };
		}

	},

	_cacheMargins: function() {
		this.margins = {
			left: (parseInt(this.currentItem.css("marginLeft"),10) || 0),
			top: (parseInt(this.currentItem.css("marginTop"),10) || 0)
		};
	},

	_cacheHelperProportions: function() {
		this.helperProportions = {
			width: this.helper.outerWidth(),
			height: this.helper.outerHeight()
		};
	},

	_setContainment: function() {

		var ce, co, over,
			o = this.options;
		if(o.containment === "parent") {
			o.containment = this.helper[0].parentNode;
		}
		if(o.containment === "document" || o.containment === "window") {
			this.containment = [
				0 - this.offset.relative.left - this.offset.parent.left,
				0 - this.offset.relative.top - this.offset.parent.top,
				$(o.containment === "document" ? document : window).width() - this.helperProportions.width - this.margins.left,
				($(o.containment === "document" ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top
			];
		}

		if(!(/^(document|window|parent)$/).test(o.containment)) {
			ce = $(o.containment)[0];
			co = $(o.containment).offset();
			over = ($(ce).css("overflow") !== "hidden");

			this.containment = [
				co.left + (parseInt($(ce).css("borderLeftWidth"),10) || 0) + (parseInt($(ce).css("paddingLeft"),10) || 0) - this.margins.left,
				co.top + (parseInt($(ce).css("borderTopWidth"),10) || 0) + (parseInt($(ce).css("paddingTop"),10) || 0) - this.margins.top,
				co.left+(over ? Math.max(ce.scrollWidth,ce.offsetWidth) : ce.offsetWidth) - (parseInt($(ce).css("borderLeftWidth"),10) || 0) - (parseInt($(ce).css("paddingRight"),10) || 0) - this.helperProportions.width - this.margins.left,
				co.top+(over ? Math.max(ce.scrollHeight,ce.offsetHeight) : ce.offsetHeight) - (parseInt($(ce).css("borderTopWidth"),10) || 0) - (parseInt($(ce).css("paddingBottom"),10) || 0) - this.helperProportions.height - this.margins.top
			];
		}

	},

	_convertPositionTo: function(d, pos) {

		if(!pos) {
			pos = this.position;
		}
		var mod = d === "absolute" ? 1 : -1,
			scroll = this.cssPosition === "absolute" && !(this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent,
			scrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName);

		return {
			top: (
				pos.top	+																// The absolute mouse position
				this.offset.relative.top * mod +										// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.top * mod -											// The offsetParent's offset without borders (offset + border)
				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : ( scrollIsRootNode ? 0 : scroll.scrollTop() ) ) * mod)
			),
			left: (
				pos.left +																// The absolute mouse position
				this.offset.relative.left * mod +										// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.left * mod	-										// The offsetParent's offset without borders (offset + border)
				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft() ) * mod)
			)
		};

	},

	_generatePosition: function(event) {

		var top, left,
			o = this.options,
			pageX = event.pageX,
			pageY = event.pageY,
			scroll = this.cssPosition === "absolute" && !(this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent, scrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName);

		// This is another very weird special case that only happens for relative elements:
		// 1. If the css position is relative
		// 2. and the scroll parent is the document or similar to the offset parent
		// we have to refresh the relative offset during the scroll so there are no jumps
		if(this.cssPosition === "relative" && !(this.scrollParent[0] !== document && this.scrollParent[0] !== this.offsetParent[0])) {
			this.offset.relative = this._getRelativeOffset();
		}

		/*
		 * - Position constraining -
		 * Constrain the position to a mix of grid, containment.
		 */

		if(this.originalPosition) { //If we are not dragging yet, we won't check for options

			if(this.containment) {
				if(event.pageX - this.offset.click.left < this.containment[0]) {
					pageX = this.containment[0] + this.offset.click.left;
				}
				if(event.pageY - this.offset.click.top < this.containment[1]) {
					pageY = this.containment[1] + this.offset.click.top;
				}
				if(event.pageX - this.offset.click.left > this.containment[2]) {
					pageX = this.containment[2] + this.offset.click.left;
				}
				if(event.pageY - this.offset.click.top > this.containment[3]) {
					pageY = this.containment[3] + this.offset.click.top;
				}
			}

			if(o.grid) {
				top = this.originalPageY + Math.round((pageY - this.originalPageY) / o.grid[1]) * o.grid[1];
				pageY = this.containment ? ( (top - this.offset.click.top >= this.containment[1] && top - this.offset.click.top <= this.containment[3]) ? top : ((top - this.offset.click.top >= this.containment[1]) ? top - o.grid[1] : top + o.grid[1])) : top;

				left = this.originalPageX + Math.round((pageX - this.originalPageX) / o.grid[0]) * o.grid[0];
				pageX = this.containment ? ( (left - this.offset.click.left >= this.containment[0] && left - this.offset.click.left <= this.containment[2]) ? left : ((left - this.offset.click.left >= this.containment[0]) ? left - o.grid[0] : left + o.grid[0])) : left;
			}

		}

		return {
			top: (
				pageY -																// The absolute mouse position
				this.offset.click.top -													// Click offset (relative to the element)
				this.offset.relative.top	-											// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.top +												// The offsetParent's offset without borders (offset + border)
				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : ( scrollIsRootNode ? 0 : scroll.scrollTop() ) ))
			),
			left: (
				pageX -																// The absolute mouse position
				this.offset.click.left -												// Click offset (relative to the element)
				this.offset.relative.left	-											// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.left +												// The offsetParent's offset without borders (offset + border)
				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft() ))
			)
		};

	},

	_rearrange: function(event, i, a, hardRefresh) {

		a ? a[0].appendChild(this.placeholder[0]) : i.item[0].parentNode.insertBefore(this.placeholder[0], (this.direction === "down" ? i.item[0] : i.item[0].nextSibling));

		//Various things done here to improve the performance:
		// 1. we create a setTimeout, that calls refreshPositions
		// 2. on the instance, we have a counter variable, that get's higher after every append
		// 3. on the local scope, we copy the counter variable, and check in the timeout, if it's still the same
		// 4. this lets only the last addition to the timeout stack through
		this.counter = this.counter ? ++this.counter : 1;
		var counter = this.counter;

		this._delay(function() {
			if(counter === this.counter) {
				this.refreshPositions(!hardRefresh); //Precompute after each DOM insertion, NOT on mousemove
			}
		});

	},

	_clear: function(event, noPropagation) {

		this.reverting = false;
		// We delay all events that have to be triggered to after the point where the placeholder has been removed and
		// everything else normalized again
		var i,
			delayedTriggers = [];

		// We first have to update the dom position of the actual currentItem
		// Note: don't do it if the current item is already removed (by a user), or it gets reappended (see #4088)
		if(!this._noFinalSort && this.currentItem.parent().length) {
			this.placeholder.before(this.currentItem);
		}
		this._noFinalSort = null;

		if(this.helper[0] === this.currentItem[0]) {
			for(i in this._storedCSS) {
				if(this._storedCSS[i] === "auto" || this._storedCSS[i] === "static") {
					this._storedCSS[i] = "";
				}
			}
			this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");
		} else {
			this.currentItem.show();
		}

		if(this.fromOutside && !noPropagation) {
			delayedTriggers.push(function(event) { this._trigger("receive", event, this._uiHash(this.fromOutside)); });
		}
		if((this.fromOutside || this.domPosition.prev !== this.currentItem.prev().not(".ui-sortable-helper")[0] || this.domPosition.parent !== this.currentItem.parent()[0]) && !noPropagation) {
			delayedTriggers.push(function(event) { this._trigger("update", event, this._uiHash()); }); //Trigger update callback if the DOM position has changed
		}

		// Check if the items Container has Changed and trigger appropriate
		// events.
		if (this !== this.currentContainer) {
			if(!noPropagation) {
				delayedTriggers.push(function(event) { this._trigger("remove", event, this._uiHash()); });
				delayedTriggers.push((function(c) { return function(event) { c._trigger("receive", event, this._uiHash(this)); };  }).call(this, this.currentContainer));
				delayedTriggers.push((function(c) { return function(event) { c._trigger("update", event, this._uiHash(this));  }; }).call(this, this.currentContainer));
			}
		}


		//Post events to containers
		for (i = this.containers.length - 1; i >= 0; i--){
			if(!noPropagation) {
				delayedTriggers.push((function(c) { return function(event) { c._trigger("deactivate", event, this._uiHash(this)); };  }).call(this, this.containers[i]));
			}
			if(this.containers[i].containerCache.over) {
				delayedTriggers.push((function(c) { return function(event) { c._trigger("out", event, this._uiHash(this)); };  }).call(this, this.containers[i]));
				this.containers[i].containerCache.over = 0;
			}
		}

		//Do what was originally in plugins
		if ( this.storedCursor ) {
			this.document.find( "body" ).css( "cursor", this.storedCursor );
			this.storedStylesheet.remove();
		}
		if(this._storedOpacity) {
			this.helper.css("opacity", this._storedOpacity);
		}
		if(this._storedZIndex) {
			this.helper.css("zIndex", this._storedZIndex === "auto" ? "" : this._storedZIndex);
		}

		this.dragging = false;
		if(this.cancelHelperRemoval) {
			if(!noPropagation) {
				this._trigger("beforeStop", event, this._uiHash());
				for (i=0; i < delayedTriggers.length; i++) {
					delayedTriggers[i].call(this, event);
				} //Trigger all delayed events
				this._trigger("stop", event, this._uiHash());
			}

			this.fromOutside = false;
			return false;
		}

		if(!noPropagation) {
			this._trigger("beforeStop", event, this._uiHash());
		}

		//$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately, it unbinds ALL events from the original node!
		this.placeholder[0].parentNode.removeChild(this.placeholder[0]);

		if(this.helper[0] !== this.currentItem[0]) {
			this.helper.remove();
		}
		this.helper = null;

		if(!noPropagation) {
			for (i=0; i < delayedTriggers.length; i++) {
				delayedTriggers[i].call(this, event);
			} //Trigger all delayed events
			this._trigger("stop", event, this._uiHash());
		}

		this.fromOutside = false;
		return true;

	},

	_trigger: function() {
		if ($.Widget.prototype._trigger.apply(this, arguments) === false) {
			this.cancel();
		}
	},

	_uiHash: function(_inst) {
		var inst = _inst || this;
		return {
			helper: inst.helper,
			placeholder: inst.placeholder || $([]),
			position: inst.position,
			originalPosition: inst.originalPosition,
			offset: inst.positionAbs,
			item: inst.currentItem,
			sender: _inst ? _inst.element : null
		};
	}

});

})(jQuery);

(function($, undefined) {

var dataSpace = "ui-effects-";

$.effects = {
	effect: {}
};

/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */
(function( jQuery, undefined ) {

	var stepHooks = "backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",

	// plusequals test for += 100 -= 100
	rplusequals = /^([\-+])=\s*(\d+\.?\d*)/,
	// a set of RE's that can match strings and generate color tuples.
	stringParsers = [{
			re: /rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
			parse: function( execResult ) {
				return [
					execResult[ 1 ],
					execResult[ 2 ],
					execResult[ 3 ],
					execResult[ 4 ]
				];
			}
		}, {
			re: /rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
			parse: function( execResult ) {
				return [
					execResult[ 1 ] * 2.55,
					execResult[ 2 ] * 2.55,
					execResult[ 3 ] * 2.55,
					execResult[ 4 ]
				];
			}
		}, {
			// this regex ignores A-F because it's compared against an already lowercased string
			re: /#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,
			parse: function( execResult ) {
				return [
					parseInt( execResult[ 1 ], 16 ),
					parseInt( execResult[ 2 ], 16 ),
					parseInt( execResult[ 3 ], 16 )
				];
			}
		}, {
			// this regex ignores A-F because it's compared against an already lowercased string
			re: /#([a-f0-9])([a-f0-9])([a-f0-9])/,
			parse: function( execResult ) {
				return [
					parseInt( execResult[ 1 ] + execResult[ 1 ], 16 ),
					parseInt( execResult[ 2 ] + execResult[ 2 ], 16 ),
					parseInt( execResult[ 3 ] + execResult[ 3 ], 16 )
				];
			}
		}, {
			re: /hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
			space: "hsla",
			parse: function( execResult ) {
				return [
					execResult[ 1 ],
					execResult[ 2 ] / 100,
					execResult[ 3 ] / 100,
					execResult[ 4 ]
				];
			}
		}],

	// jQuery.Color( )
	color = jQuery.Color = function( color, green, blue, alpha ) {
		return new jQuery.Color.fn.parse( color, green, blue, alpha );
	},
	spaces = {
		rgba: {
			props: {
				red: {
					idx: 0,
					type: "byte"
				},
				green: {
					idx: 1,
					type: "byte"
				},
				blue: {
					idx: 2,
					type: "byte"
				}
			}
		},

		hsla: {
			props: {
				hue: {
					idx: 0,
					type: "degrees"
				},
				saturation: {
					idx: 1,
					type: "percent"
				},
				lightness: {
					idx: 2,
					type: "percent"
				}
			}
		}
	},
	propTypes = {
		"byte": {
			floor: true,
			max: 255
		},
		"percent": {
			max: 1
		},
		"degrees": {
			mod: 360,
			floor: true
		}
	},
	support = color.support = {},

	// element for support tests
	supportElem = jQuery( "<p>" )[ 0 ],

	// colors = jQuery.Color.names
	colors,

	// local aliases of functions called often
	each = jQuery.each;

// determine rgba support immediately
supportElem.style.cssText = "background-color:rgba(1,1,1,.5)";
support.rgba = supportElem.style.backgroundColor.indexOf( "rgba" ) > -1;

// define cache name and alpha properties
// for rgba and hsla spaces
each( spaces, function( spaceName, space ) {
	space.cache = "_" + spaceName;
	space.props.alpha = {
		idx: 3,
		type: "percent",
		def: 1
	};
});

function clamp( value, prop, allowEmpty ) {
	var type = propTypes[ prop.type ] || {};

	if ( value == null ) {
		return (allowEmpty || !prop.def) ? null : prop.def;
	}

	// ~~ is an short way of doing floor for positive numbers
	value = type.floor ? ~~value : parseFloat( value );

	// IE will pass in empty strings as value for alpha,
	// which will hit this case
	if ( isNaN( value ) ) {
		return prop.def;
	}

	if ( type.mod ) {
		// we add mod before modding to make sure that negatives values
		// get converted properly: -10 -> 350
		return (value + type.mod) % type.mod;
	}

	// for now all property types without mod have min and max
	return 0 > value ? 0 : type.max < value ? type.max : value;
}

function stringParse( string ) {
	var inst = color(),
		rgba = inst._rgba = [];

	string = string.toLowerCase();

	each( stringParsers, function( i, parser ) {
		var parsed,
			match = parser.re.exec( string ),
			values = match && parser.parse( match ),
			spaceName = parser.space || "rgba";

		if ( values ) {
			parsed = inst[ spaceName ]( values );

			// if this was an rgba parse the assignment might happen twice
			// oh well....
			inst[ spaces[ spaceName ].cache ] = parsed[ spaces[ spaceName ].cache ];
			rgba = inst._rgba = parsed._rgba;

			// exit each( stringParsers ) here because we matched
			return false;
		}
	});

	// Found a stringParser that handled it
	if ( rgba.length ) {

		// if this came from a parsed string, force "transparent" when alpha is 0
		// chrome, (and maybe others) return "transparent" as rgba(0,0,0,0)
		if ( rgba.join() === "0,0,0,0" ) {
			jQuery.extend( rgba, colors.transparent );
		}
		return inst;
	}

	// named colors
	return colors[ string ];
}

color.fn = jQuery.extend( color.prototype, {
	parse: function( red, green, blue, alpha ) {
		if ( red === undefined ) {
			this._rgba = [ null, null, null, null ];
			return this;
		}
		if ( red.jquery || red.nodeType ) {
			red = jQuery( red ).css( green );
			green = undefined;
		}

		var inst = this,
			type = jQuery.type( red ),
			rgba = this._rgba = [];

		// more than 1 argument specified - assume ( red, green, blue, alpha )
		if ( green !== undefined ) {
			red = [ red, green, blue, alpha ];
			type = "array";
		}

		if ( type === "string" ) {
			return this.parse( stringParse( red ) || colors._default );
		}

		if ( type === "array" ) {
			each( spaces.rgba.props, function( key, prop ) {
				rgba[ prop.idx ] = clamp( red[ prop.idx ], prop );
			});
			return this;
		}

		if ( type === "object" ) {
			if ( red instanceof color ) {
				each( spaces, function( spaceName, space ) {
					if ( red[ space.cache ] ) {
						inst[ space.cache ] = red[ space.cache ].slice();
					}
				});
			} else {
				each( spaces, function( spaceName, space ) {
					var cache = space.cache;
					each( space.props, function( key, prop ) {

						// if the cache doesn't exist, and we know how to convert
						if ( !inst[ cache ] && space.to ) {

							// if the value was null, we don't need to copy it
							// if the key was alpha, we don't need to copy it either
							if ( key === "alpha" || red[ key ] == null ) {
								return;
							}
							inst[ cache ] = space.to( inst._rgba );
						}

						// this is the only case where we allow nulls for ALL properties.
						// call clamp with alwaysAllowEmpty
						inst[ cache ][ prop.idx ] = clamp( red[ key ], prop, true );
					});

					// everything defined but alpha?
					if ( inst[ cache ] && jQuery.inArray( null, inst[ cache ].slice( 0, 3 ) ) < 0 ) {
						// use the default of 1
						inst[ cache ][ 3 ] = 1;
						if ( space.from ) {
							inst._rgba = space.from( inst[ cache ] );
						}
					}
				});
			}
			return this;
		}
	},
	is: function( compare ) {
		var is = color( compare ),
			same = true,
			inst = this;

		each( spaces, function( _, space ) {
			var localCache,
				isCache = is[ space.cache ];
			if (isCache) {
				localCache = inst[ space.cache ] || space.to && space.to( inst._rgba ) || [];
				each( space.props, function( _, prop ) {
					if ( isCache[ prop.idx ] != null ) {
						same = ( isCache[ prop.idx ] === localCache[ prop.idx ] );
						return same;
					}
				});
			}
			return same;
		});
		return same;
	},
	_space: function() {
		var used = [],
			inst = this;
		each( spaces, function( spaceName, space ) {
			if ( inst[ space.cache ] ) {
				used.push( spaceName );
			}
		});
		return used.pop();
	},
	transition: function( other, distance ) {
		var end = color( other ),
			spaceName = end._space(),
			space = spaces[ spaceName ],
			startColor = this.alpha() === 0 ? color( "transparent" ) : this,
			start = startColor[ space.cache ] || space.to( startColor._rgba ),
			result = start.slice();

		end = end[ space.cache ];
		each( space.props, function( key, prop ) {
			var index = prop.idx,
				startValue = start[ index ],
				endValue = end[ index ],
				type = propTypes[ prop.type ] || {};

			// if null, don't override start value
			if ( endValue === null ) {
				return;
			}
			// if null - use end
			if ( startValue === null ) {
				result[ index ] = endValue;
			} else {
				if ( type.mod ) {
					if ( endValue - startValue > type.mod / 2 ) {
						startValue += type.mod;
					} else if ( startValue - endValue > type.mod / 2 ) {
						startValue -= type.mod;
					}
				}
				result[ index ] = clamp( ( endValue - startValue ) * distance + startValue, prop );
			}
		});
		return this[ spaceName ]( result );
	},
	blend: function( opaque ) {
		// if we are already opaque - return ourself
		if ( this._rgba[ 3 ] === 1 ) {
			return this;
		}

		var rgb = this._rgba.slice(),
			a = rgb.pop(),
			blend = color( opaque )._rgba;

		return color( jQuery.map( rgb, function( v, i ) {
			return ( 1 - a ) * blend[ i ] + a * v;
		}));
	},
	toRgbaString: function() {
		var prefix = "rgba(",
			rgba = jQuery.map( this._rgba, function( v, i ) {
				return v == null ? ( i > 2 ? 1 : 0 ) : v;
			});

		if ( rgba[ 3 ] === 1 ) {
			rgba.pop();
			prefix = "rgb(";
		}

		return prefix + rgba.join() + ")";
	},
	toHslaString: function() {
		var prefix = "hsla(",
			hsla = jQuery.map( this.hsla(), function( v, i ) {
				if ( v == null ) {
					v = i > 2 ? 1 : 0;
				}

				// catch 1 and 2
				if ( i && i < 3 ) {
					v = Math.round( v * 100 ) + "%";
				}
				return v;
			});

		if ( hsla[ 3 ] === 1 ) {
			hsla.pop();
			prefix = "hsl(";
		}
		return prefix + hsla.join() + ")";
	},
	toHexString: function( includeAlpha ) {
		var rgba = this._rgba.slice(),
			alpha = rgba.pop();

		if ( includeAlpha ) {
			rgba.push( ~~( alpha * 255 ) );
		}

		return "#" + jQuery.map( rgba, function( v ) {

			// default to 0 when nulls exist
			v = ( v || 0 ).toString( 16 );
			return v.length === 1 ? "0" + v : v;
		}).join("");
	},
	toString: function() {
		return this._rgba[ 3 ] === 0 ? "transparent" : this.toRgbaString();
	}
});
color.fn.parse.prototype = color.fn;

// hsla conversions adapted from:
// https://code.google.com/p/maashaack/source/browse/packages/graphics/trunk/src/graphics/colors/HUE2RGB.as?r=5021

function hue2rgb( p, q, h ) {
	h = ( h + 1 ) % 1;
	if ( h * 6 < 1 ) {
		return p + (q - p) * h * 6;
	}
	if ( h * 2 < 1) {
		return q;
	}
	if ( h * 3 < 2 ) {
		return p + (q - p) * ((2/3) - h) * 6;
	}
	return p;
}

spaces.hsla.to = function ( rgba ) {
	if ( rgba[ 0 ] == null || rgba[ 1 ] == null || rgba[ 2 ] == null ) {
		return [ null, null, null, rgba[ 3 ] ];
	}
	var r = rgba[ 0 ] / 255,
		g = rgba[ 1 ] / 255,
		b = rgba[ 2 ] / 255,
		a = rgba[ 3 ],
		max = Math.max( r, g, b ),
		min = Math.min( r, g, b ),
		diff = max - min,
		add = max + min,
		l = add * 0.5,
		h, s;

	if ( min === max ) {
		h = 0;
	} else if ( r === max ) {
		h = ( 60 * ( g - b ) / diff ) + 360;
	} else if ( g === max ) {
		h = ( 60 * ( b - r ) / diff ) + 120;
	} else {
		h = ( 60 * ( r - g ) / diff ) + 240;
	}

	// chroma (diff) == 0 means greyscale which, by definition, saturation = 0%
	// otherwise, saturation is based on the ratio of chroma (diff) to lightness (add)
	if ( diff === 0 ) {
		s = 0;
	} else if ( l <= 0.5 ) {
		s = diff / add;
	} else {
		s = diff / ( 2 - add );
	}
	return [ Math.round(h) % 360, s, l, a == null ? 1 : a ];
};

spaces.hsla.from = function ( hsla ) {
	if ( hsla[ 0 ] == null || hsla[ 1 ] == null || hsla[ 2 ] == null ) {
		return [ null, null, null, hsla[ 3 ] ];
	}
	var h = hsla[ 0 ] / 360,
		s = hsla[ 1 ],
		l = hsla[ 2 ],
		a = hsla[ 3 ],
		q = l <= 0.5 ? l * ( 1 + s ) : l + s - l * s,
		p = 2 * l - q;

	return [
		Math.round( hue2rgb( p, q, h + ( 1 / 3 ) ) * 255 ),
		Math.round( hue2rgb( p, q, h ) * 255 ),
		Math.round( hue2rgb( p, q, h - ( 1 / 3 ) ) * 255 ),
		a
	];
};


each( spaces, function( spaceName, space ) {
	var props = space.props,
		cache = space.cache,
		to = space.to,
		from = space.from;

	// makes rgba() and hsla()
	color.fn[ spaceName ] = function( value ) {

		// generate a cache for this space if it doesn't exist
		if ( to && !this[ cache ] ) {
			this[ cache ] = to( this._rgba );
		}
		if ( value === undefined ) {
			return this[ cache ].slice();
		}

		var ret,
			type = jQuery.type( value ),
			arr = ( type === "array" || type === "object" ) ? value : arguments,
			local = this[ cache ].slice();

		each( props, function( key, prop ) {
			var val = arr[ type === "object" ? key : prop.idx ];
			if ( val == null ) {
				val = local[ prop.idx ];
			}
			local[ prop.idx ] = clamp( val, prop );
		});

		if ( from ) {
			ret = color( from( local ) );
			ret[ cache ] = local;
			return ret;
		} else {
			return color( local );
		}
	};

	// makes red() green() blue() alpha() hue() saturation() lightness()
	each( props, function( key, prop ) {
		// alpha is included in more than one space
		if ( color.fn[ key ] ) {
			return;
		}
		color.fn[ key ] = function( value ) {
			var vtype = jQuery.type( value ),
				fn = ( key === "alpha" ? ( this._hsla ? "hsla" : "rgba" ) : spaceName ),
				local = this[ fn ](),
				cur = local[ prop.idx ],
				match;

			if ( vtype === "undefined" ) {
				return cur;
			}

			if ( vtype === "function" ) {
				value = value.call( this, cur );
				vtype = jQuery.type( value );
			}
			if ( value == null && prop.empty ) {
				return this;
			}
			if ( vtype === "string" ) {
				match = rplusequals.exec( value );
				if ( match ) {
					value = cur + parseFloat( match[ 2 ] ) * ( match[ 1 ] === "+" ? 1 : -1 );
				}
			}
			local[ prop.idx ] = value;
			return this[ fn ]( local );
		};
	});
});

// add cssHook and .fx.step function for each named hook.
// accept a space separated string of properties
color.hook = function( hook ) {
	var hooks = hook.split( " " );
	each( hooks, function( i, hook ) {
		jQuery.cssHooks[ hook ] = {
			set: function( elem, value ) {
				var parsed, curElem,
					backgroundColor = "";

				if ( value !== "transparent" && ( jQuery.type( value ) !== "string" || ( parsed = stringParse( value ) ) ) ) {
					value = color( parsed || value );
					if ( !support.rgba && value._rgba[ 3 ] !== 1 ) {
						curElem = hook === "backgroundColor" ? elem.parentNode : elem;
						while (
							(backgroundColor === "" || backgroundColor === "transparent") &&
							curElem && curElem.style
						) {
							try {
								backgroundColor = jQuery.css( curElem, "backgroundColor" );
								curElem = curElem.parentNode;
							} catch ( e ) {
							}
						}

						value = value.blend( backgroundColor && backgroundColor !== "transparent" ?
							backgroundColor :
							"_default" );
					}

					value = value.toRgbaString();
				}
				try {
					elem.style[ hook ] = value;
				} catch( e ) {
					// wrapped to prevent IE from throwing errors on "invalid" values like 'auto' or 'inherit'
				}
			}
		};
		jQuery.fx.step[ hook ] = function( fx ) {
			if ( !fx.colorInit ) {
				fx.start = color( fx.elem, hook );
				fx.end = color( fx.end );
				fx.colorInit = true;
			}
			jQuery.cssHooks[ hook ].set( fx.elem, fx.start.transition( fx.end, fx.pos ) );
		};
	});

};

color.hook( stepHooks );

jQuery.cssHooks.borderColor = {
	expand: function( value ) {
		var expanded = {};

		each( [ "Top", "Right", "Bottom", "Left" ], function( i, part ) {
			expanded[ "border" + part + "Color" ] = value;
		});
		return expanded;
	}
};

// Basic color names only.
// Usage of any of the other color names requires adding yourself or including
// jquery.color.svg-names.js.
colors = jQuery.Color.names = {
	// 4.1. Basic color keywords
	aqua: "#00ffff",
	black: "#000000",
	blue: "#0000ff",
	fuchsia: "#ff00ff",
	gray: "#808080",
	green: "#008000",
	lime: "#00ff00",
	maroon: "#800000",
	navy: "#000080",
	olive: "#808000",
	purple: "#800080",
	red: "#ff0000",
	silver: "#c0c0c0",
	teal: "#008080",
	white: "#ffffff",
	yellow: "#ffff00",

	// 4.2.3. "transparent" color keyword
	transparent: [ null, null, null, 0 ],

	_default: "#ffffff"
};

})( jQuery );


/******************************************************************************/
/****************************** CLASS ANIMATIONS ******************************/
/******************************************************************************/
(function() {

var classAnimationActions = [ "add", "remove", "toggle" ],
	shorthandStyles = {
		border: 1,
		borderBottom: 1,
		borderColor: 1,
		borderLeft: 1,
		borderRight: 1,
		borderTop: 1,
		borderWidth: 1,
		margin: 1,
		padding: 1
	};

$.each([ "borderLeftStyle", "borderRightStyle", "borderBottomStyle", "borderTopStyle" ], function( _, prop ) {
	$.fx.step[ prop ] = function( fx ) {
		if ( fx.end !== "none" && !fx.setAttr || fx.pos === 1 && !fx.setAttr ) {
			jQuery.style( fx.elem, prop, fx.end );
			fx.setAttr = true;
		}
	};
});

function getElementStyles( elem ) {
	var key, len,
		style = elem.ownerDocument.defaultView ?
			elem.ownerDocument.defaultView.getComputedStyle( elem, null ) :
			elem.currentStyle,
		styles = {};

	if ( style && style.length && style[ 0 ] && style[ style[ 0 ] ] ) {
		len = style.length;
		while ( len-- ) {
			key = style[ len ];
			if ( typeof style[ key ] === "string" ) {
				styles[ $.camelCase( key ) ] = style[ key ];
			}
		}
	// support: Opera, IE <9
	} else {
		for ( key in style ) {
			if ( typeof style[ key ] === "string" ) {
				styles[ key ] = style[ key ];
			}
		}
	}

	return styles;
}


function styleDifference( oldStyle, newStyle ) {
	var diff = {},
		name, value;

	for ( name in newStyle ) {
		value = newStyle[ name ];
		if ( oldStyle[ name ] !== value ) {
			if ( !shorthandStyles[ name ] ) {
				if ( $.fx.step[ name ] || !isNaN( parseFloat( value ) ) ) {
					diff[ name ] = value;
				}
			}
		}
	}

	return diff;
}

// support: jQuery <1.8
if ( !$.fn.addBack ) {
	$.fn.addBack = function( selector ) {
		return this.add( selector == null ?
			this.prevObject : this.prevObject.filter( selector )
		);
	};
}

$.effects.animateClass = function( value, duration, easing, callback ) {
	var o = $.speed( duration, easing, callback );

	return this.queue( function() {
		var animated = $( this ),
			baseClass = animated.attr( "class" ) || "",
			applyClassChange,
			allAnimations = o.children ? animated.find( "*" ).addBack() : animated;

		// map the animated objects to store the original styles.
		allAnimations = allAnimations.map(function() {
			var el = $( this );
			return {
				el: el,
				start: getElementStyles( this )
			};
		});

		// apply class change
		applyClassChange = function() {
			$.each( classAnimationActions, function(i, action) {
				if ( value[ action ] ) {
					animated[ action + "Class" ]( value[ action ] );
				}
			});
		};
		applyClassChange();

		// map all animated objects again - calculate new styles and diff
		allAnimations = allAnimations.map(function() {
			this.end = getElementStyles( this.el[ 0 ] );
			this.diff = styleDifference( this.start, this.end );
			return this;
		});

		// apply original class
		animated.attr( "class", baseClass );

		// map all animated objects again - this time collecting a promise
		allAnimations = allAnimations.map(function() {
			var styleInfo = this,
				dfd = $.Deferred(),
				opts = $.extend({}, o, {
					queue: false,
					complete: function() {
						dfd.resolve( styleInfo );
					}
				});

			this.el.animate( this.diff, opts );
			return dfd.promise();
		});

		// once all animations have completed:
		$.when.apply( $, allAnimations.get() ).done(function() {

			// set the final class
			applyClassChange();

			// for each animated element,
			// clear all css properties that were animated
			$.each( arguments, function() {
				var el = this.el;
				$.each( this.diff, function(key) {
					el.css( key, "" );
				});
			});

			// this is guarnteed to be there if you use jQuery.speed()
			// it also handles dequeuing the next anim...
			o.complete.call( animated[ 0 ] );
		});
	});
};

$.fn.extend({
	addClass: (function( orig ) {
		return function( classNames, speed, easing, callback ) {
			return speed ?
				$.effects.animateClass.call( this,
					{ add: classNames }, speed, easing, callback ) :
				orig.apply( this, arguments );
		};
	})( $.fn.addClass ),

	removeClass: (function( orig ) {
		return function( classNames, speed, easing, callback ) {
			return arguments.length > 1 ?
				$.effects.animateClass.call( this,
					{ remove: classNames }, speed, easing, callback ) :
				orig.apply( this, arguments );
		};
	})( $.fn.removeClass ),

	toggleClass: (function( orig ) {
		return function( classNames, force, speed, easing, callback ) {
			if ( typeof force === "boolean" || force === undefined ) {
				if ( !speed ) {
					// without speed parameter
					return orig.apply( this, arguments );
				} else {
					return $.effects.animateClass.call( this,
						(force ? { add: classNames } : { remove: classNames }),
						speed, easing, callback );
				}
			} else {
				// without force parameter
				return $.effects.animateClass.call( this,
					{ toggle: classNames }, force, speed, easing );
			}
		};
	})( $.fn.toggleClass ),

	switchClass: function( remove, add, speed, easing, callback) {
		return $.effects.animateClass.call( this, {
			add: add,
			remove: remove
		}, speed, easing, callback );
	}
});

})();

/******************************************************************************/
/*********************************** EFFECTS **********************************/
/******************************************************************************/

(function() {

$.extend( $.effects, {
	version: "1.10.3",

	// Saves a set of properties in a data storage
	save: function( element, set ) {
		for( var i=0; i < set.length; i++ ) {
			if ( set[ i ] !== null ) {
				element.data( dataSpace + set[ i ], element[ 0 ].style[ set[ i ] ] );
			}
		}
	},

	// Restores a set of previously saved properties from a data storage
	restore: function( element, set ) {
		var val, i;
		for( i=0; i < set.length; i++ ) {
			if ( set[ i ] !== null ) {
				val = element.data( dataSpace + set[ i ] );
				// support: jQuery 1.6.2
				// http://bugs.jquery.com/ticket/9917
				// jQuery 1.6.2 incorrectly returns undefined for any falsy value.
				// We can't differentiate between "" and 0 here, so we just assume
				// empty string since it's likely to be a more common value...
				if ( val === undefined ) {
					val = "";
				}
				element.css( set[ i ], val );
			}
		}
	},

	setMode: function( el, mode ) {
		if (mode === "toggle") {
			mode = el.is( ":hidden" ) ? "show" : "hide";
		}
		return mode;
	},

	// Translates a [top,left] array into a baseline value
	// this should be a little more flexible in the future to handle a string & hash
	getBaseline: function( origin, original ) {
		var y, x;
		switch ( origin[ 0 ] ) {
			case "top": y = 0; break;
			case "middle": y = 0.5; break;
			case "bottom": y = 1; break;
			default: y = origin[ 0 ] / original.height;
		}
		switch ( origin[ 1 ] ) {
			case "left": x = 0; break;
			case "center": x = 0.5; break;
			case "right": x = 1; break;
			default: x = origin[ 1 ] / original.width;
		}
		return {
			x: x,
			y: y
		};
	},

	// Wraps the element around a wrapper that copies position properties
	createWrapper: function( element ) {

		// if the element is already wrapped, return it
		if ( element.parent().is( ".ui-effects-wrapper" )) {
			return element.parent();
		}

		// wrap the element
		var props = {
				width: element.outerWidth(true),
				height: element.outerHeight(true),
				"float": element.css( "float" )
			},
			wrapper = $( "<div></div>" )
				.addClass( "ui-effects-wrapper" )
				.css({
					fontSize: "100%",
					background: "transparent",
					border: "none",
					margin: 0,
					padding: 0
				}),
			// Store the size in case width/height are defined in % - Fixes #5245
			size = {
				width: element.width(),
				height: element.height()
			},
			active = document.activeElement;

		// support: Firefox
		// Firefox incorrectly exposes anonymous content
		// https://bugzilla.mozilla.org/show_bug.cgi?id=561664
		try {
			active.id;
		} catch( e ) {
			active = document.body;
		}

		element.wrap( wrapper );

		// Fixes #7595 - Elements lose focus when wrapped.
		if ( element[ 0 ] === active || $.contains( element[ 0 ], active ) ) {
			$( active ).focus();
		}

		wrapper = element.parent(); //Hotfix for jQuery 1.4 since some change in wrap() seems to actually lose the reference to the wrapped element

		// transfer positioning properties to the wrapper
		if ( element.css( "position" ) === "static" ) {
			wrapper.css({ position: "relative" });
			element.css({ position: "relative" });
		} else {
			$.extend( props, {
				position: element.css( "position" ),
				zIndex: element.css( "z-index" )
			});
			$.each([ "top", "left", "bottom", "right" ], function(i, pos) {
				props[ pos ] = element.css( pos );
				if ( isNaN( parseInt( props[ pos ], 10 ) ) ) {
					props[ pos ] = "auto";
				}
			});
			element.css({
				position: "relative",
				top: 0,
				left: 0,
				right: "auto",
				bottom: "auto"
			});
		}
		element.css(size);

		return wrapper.css( props ).show();
	},

	removeWrapper: function( element ) {
		var active = document.activeElement;

		if ( element.parent().is( ".ui-effects-wrapper" ) ) {
			element.parent().replaceWith( element );

			// Fixes #7595 - Elements lose focus when wrapped.
			if ( element[ 0 ] === active || $.contains( element[ 0 ], active ) ) {
				$( active ).focus();
			}
		}


		return element;
	},

	setTransition: function( element, list, factor, value ) {
		value = value || {};
		$.each( list, function( i, x ) {
			var unit = element.cssUnit( x );
			if ( unit[ 0 ] > 0 ) {
				value[ x ] = unit[ 0 ] * factor + unit[ 1 ];
			}
		});
		return value;
	}
});

// return an effect options object for the given parameters:
function _normalizeArguments( effect, options, speed, callback ) {

	// allow passing all options as the first parameter
	if ( $.isPlainObject( effect ) ) {
		options = effect;
		effect = effect.effect;
	}

	// convert to an object
	effect = { effect: effect };

	// catch (effect, null, ...)
	if ( options == null ) {
		options = {};
	}

	// catch (effect, callback)
	if ( $.isFunction( options ) ) {
		callback = options;
		speed = null;
		options = {};
	}

	// catch (effect, speed, ?)
	if ( typeof options === "number" || $.fx.speeds[ options ] ) {
		callback = speed;
		speed = options;
		options = {};
	}

	// catch (effect, options, callback)
	if ( $.isFunction( speed ) ) {
		callback = speed;
		speed = null;
	}

	// add options to effect
	if ( options ) {
		$.extend( effect, options );
	}

	speed = speed || options.duration;
	effect.duration = $.fx.off ? 0 :
		typeof speed === "number" ? speed :
		speed in $.fx.speeds ? $.fx.speeds[ speed ] :
		$.fx.speeds._default;

	effect.complete = callback || options.complete;

	return effect;
}

function standardAnimationOption( option ) {
	// Valid standard speeds (nothing, number, named speed)
	if ( !option || typeof option === "number" || $.fx.speeds[ option ] ) {
		return true;
	}

	// Invalid strings - treat as "normal" speed
	if ( typeof option === "string" && !$.effects.effect[ option ] ) {
		return true;
	}

	// Complete callback
	if ( $.isFunction( option ) ) {
		return true;
	}

	// Options hash (but not naming an effect)
	if ( typeof option === "object" && !option.effect ) {
		return true;
	}

	// Didn't match any standard API
	return false;
}

$.fn.extend({
	effect: function( /* effect, options, speed, callback */ ) {
		var args = _normalizeArguments.apply( this, arguments ),
			mode = args.mode,
			queue = args.queue,
			effectMethod = $.effects.effect[ args.effect ];

		if ( $.fx.off || !effectMethod ) {
			// delegate to the original method (e.g., .show()) if possible
			if ( mode ) {
				return this[ mode ]( args.duration, args.complete );
			} else {
				return this.each( function() {
					if ( args.complete ) {
						args.complete.call( this );
					}
				});
			}
		}

		function run( next ) {
			var elem = $( this ),
				complete = args.complete,
				mode = args.mode;

			function done() {
				if ( $.isFunction( complete ) ) {
					complete.call( elem[0] );
				}
				if ( $.isFunction( next ) ) {
					next();
				}
			}

			// If the element already has the correct final state, delegate to
			// the core methods so the internal tracking of "olddisplay" works.
			if ( elem.is( ":hidden" ) ? mode === "hide" : mode === "show" ) {
				elem[ mode ]();
				done();
			} else {
				effectMethod.call( elem[0], args, done );
			}
		}

		return queue === false ? this.each( run ) : this.queue( queue || "fx", run );
	},

	show: (function( orig ) {
		return function( option ) {
			if ( standardAnimationOption( option ) ) {
				return orig.apply( this, arguments );
			} else {
				var args = _normalizeArguments.apply( this, arguments );
				args.mode = "show";
				return this.effect.call( this, args );
			}
		};
	})( $.fn.show ),

	hide: (function( orig ) {
		return function( option ) {
			if ( standardAnimationOption( option ) ) {
				return orig.apply( this, arguments );
			} else {
				var args = _normalizeArguments.apply( this, arguments );
				args.mode = "hide";
				return this.effect.call( this, args );
			}
		};
	})( $.fn.hide ),

	toggle: (function( orig ) {
		return function( option ) {
			if ( standardAnimationOption( option ) || typeof option === "boolean" ) {
				return orig.apply( this, arguments );
			} else {
				var args = _normalizeArguments.apply( this, arguments );
				args.mode = "toggle";
				return this.effect.call( this, args );
			}
		};
	})( $.fn.toggle ),

	// helper functions
	cssUnit: function(key) {
		var style = this.css( key ),
			val = [];

		$.each( [ "em", "px", "%", "pt" ], function( i, unit ) {
			if ( style.indexOf( unit ) > 0 ) {
				val = [ parseFloat( style ), unit ];
			}
		});
		return val;
	}
});

})();

/******************************************************************************/
/*********************************** EASING ***********************************/
/******************************************************************************/

(function() {

// based on easing equations from Robert Penner (http://www.robertpenner.com/easing)

var baseEasings = {};

$.each( [ "Quad", "Cubic", "Quart", "Quint", "Expo" ], function( i, name ) {
	baseEasings[ name ] = function( p ) {
		return Math.pow( p, i + 2 );
	};
});

$.extend( baseEasings, {
	Sine: function ( p ) {
		return 1 - Math.cos( p * Math.PI / 2 );
	},
	Circ: function ( p ) {
		return 1 - Math.sqrt( 1 - p * p );
	},
	Elastic: function( p ) {
		return p === 0 || p === 1 ? p :
			-Math.pow( 2, 8 * (p - 1) ) * Math.sin( ( (p - 1) * 80 - 7.5 ) * Math.PI / 15 );
	},
	Back: function( p ) {
		return p * p * ( 3 * p - 2 );
	},
	Bounce: function ( p ) {
		var pow2,
			bounce = 4;

		while ( p < ( ( pow2 = Math.pow( 2, --bounce ) ) - 1 ) / 11 ) {}
		return 1 / Math.pow( 4, 3 - bounce ) - 7.5625 * Math.pow( ( pow2 * 3 - 2 ) / 22 - p, 2 );
	}
});

$.each( baseEasings, function( name, easeIn ) {
	$.easing[ "easeIn" + name ] = easeIn;
	$.easing[ "easeOut" + name ] = function( p ) {
		return 1 - easeIn( 1 - p );
	};
	$.easing[ "easeInOut" + name ] = function( p ) {
		return p < 0.5 ?
			easeIn( p * 2 ) / 2 :
			1 - easeIn( p * -2 + 2 ) / 2;
	};
});

})();

})(jQuery);

(function( $, undefined ) {

var uid = 0,
	hideProps = {},
	showProps = {};

hideProps.height = hideProps.paddingTop = hideProps.paddingBottom =
	hideProps.borderTopWidth = hideProps.borderBottomWidth = "hide";
showProps.height = showProps.paddingTop = showProps.paddingBottom =
	showProps.borderTopWidth = showProps.borderBottomWidth = "show";

$.widget( "ui.accordion", {
	version: "1.10.3",
	options: {
		active: 0,
		animate: {},
		collapsible: false,
		event: "click",
		header: "> li > :first-child,> :not(li):even",
		heightStyle: "auto",
		icons: {
			activeHeader: "ui-icon-triangle-1-s",
			header: "ui-icon-triangle-1-e"
		},

		// callbacks
		activate: null,
		beforeActivate: null
	},

	_create: function() {
		var options = this.options;
		this.prevShow = this.prevHide = $();
		this.element.addClass( "ui-accordion ui-widget ui-helper-reset" )
			// ARIA
			.attr( "role", "tablist" );

		// don't allow collapsible: false and active: false / null
		if ( !options.collapsible && (options.active === false || options.active == null) ) {
			options.active = 0;
		}

		this._processPanels();
		// handle negative values
		if ( options.active < 0 ) {
			options.active += this.headers.length;
		}
		this._refresh();
	},

	_getCreateEventData: function() {
		return {
			header: this.active,
			panel: !this.active.length ? $() : this.active.next(),
			content: !this.active.length ? $() : this.active.next()
		};
	},

	_createIcons: function() {
		var icons = this.options.icons;
		if ( icons ) {
			$( "<span>" )
				.addClass( "ui-accordion-header-icon ui-icon " + icons.header )
				.prependTo( this.headers );
			this.active.children( ".ui-accordion-header-icon" )
				.removeClass( icons.header )
				.addClass( icons.activeHeader );
			this.headers.addClass( "ui-accordion-icons" );
		}
	},

	_destroyIcons: function() {
		this.headers
			.removeClass( "ui-accordion-icons" )
			.children( ".ui-accordion-header-icon" )
				.remove();
	},

	_destroy: function() {
		var contents;

		// clean up main element
		this.element
			.removeClass( "ui-accordion ui-widget ui-helper-reset" )
			.removeAttr( "role" );

		// clean up headers
		this.headers
			.removeClass( "ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top" )
			.removeAttr( "role" )
			.removeAttr( "aria-selected" )
			.removeAttr( "aria-controls" )
			.removeAttr( "tabIndex" )
			.each(function() {
				if ( /^ui-accordion/.test( this.id ) ) {
					this.removeAttribute( "id" );
				}
			});
		this._destroyIcons();

		// clean up content panels
		contents = this.headers.next()
			.css( "display", "" )
			.removeAttr( "role" )
			.removeAttr( "aria-expanded" )
			.removeAttr( "aria-hidden" )
			.removeAttr( "aria-labelledby" )
			.removeClass( "ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled" )
			.each(function() {
				if ( /^ui-accordion/.test( this.id ) ) {
					this.removeAttribute( "id" );
				}
			});
		if ( this.options.heightStyle !== "content" ) {
			contents.css( "height", "" );
		}
	},

	_setOption: function( key, value ) {
		if ( key === "active" ) {
			// _activate() will handle invalid values and update this.options
			this._activate( value );
			return;
		}

		if ( key === "event" ) {
			if ( this.options.event ) {
				this._off( this.headers, this.options.event );
			}
			this._setupEvents( value );
		}

		this._super( key, value );

		// setting collapsible: false while collapsed; open first panel
		if ( key === "collapsible" && !value && this.options.active === false ) {
			this._activate( 0 );
		}

		if ( key === "icons" ) {
			this._destroyIcons();
			if ( value ) {
				this._createIcons();
			}
		}

		// #5332 - opacity doesn't cascade to positioned elements in IE
		// so we need to add the disabled class to the headers and panels
		if ( key === "disabled" ) {
			this.headers.add( this.headers.next() )
				.toggleClass( "ui-state-disabled", !!value );
		}
	},

	_keydown: function( event ) {
		/*jshint maxcomplexity:15*/
		if ( event.altKey || event.ctrlKey ) {
			return;
		}

		var keyCode = $.ui.keyCode,
			length = this.headers.length,
			currentIndex = this.headers.index( event.target ),
			toFocus = false;

		switch ( event.keyCode ) {
			case keyCode.RIGHT:
			case keyCode.DOWN:
				toFocus = this.headers[ ( currentIndex + 1 ) % length ];
				break;
			case keyCode.LEFT:
			case keyCode.UP:
				toFocus = this.headers[ ( currentIndex - 1 + length ) % length ];
				break;
			case keyCode.SPACE:
			case keyCode.ENTER:
				this._eventHandler( event );
				break;
			case keyCode.HOME:
				toFocus = this.headers[ 0 ];
				break;
			case keyCode.END:
				toFocus = this.headers[ length - 1 ];
				break;
		}

		if ( toFocus ) {
			$( event.target ).attr( "tabIndex", -1 );
			$( toFocus ).attr( "tabIndex", 0 );
			toFocus.focus();
			event.preventDefault();
		}
	},

	_panelKeyDown : function( event ) {
		if ( event.keyCode === $.ui.keyCode.UP && event.ctrlKey ) {
			$( event.currentTarget ).prev().focus();
		}
	},

	refresh: function() {
		var options = this.options;
		this._processPanels();

		// was collapsed or no panel
		if ( ( options.active === false && options.collapsible === true ) || !this.headers.length ) {
			options.active = false;
			this.active = $();
		// active false only when collapsible is true
		} else if ( options.active === false ) {
			this._activate( 0 );
		// was active, but active panel is gone
		} else if ( this.active.length && !$.contains( this.element[ 0 ], this.active[ 0 ] ) ) {
			// all remaining panel are disabled
			if ( this.headers.length === this.headers.find(".ui-state-disabled").length ) {
				options.active = false;
				this.active = $();
			// activate previous panel
			} else {
				this._activate( Math.max( 0, options.active - 1 ) );
			}
		// was active, active panel still exists
		} else {
			// make sure active index is correct
			options.active = this.headers.index( this.active );
		}

		this._destroyIcons();

		this._refresh();
	},

	_processPanels: function() {
		this.headers = this.element.find( this.options.header )
			.addClass( "ui-accordion-header ui-helper-reset ui-state-default ui-corner-all" );

		this.headers.next()
			.addClass( "ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom" )
			.filter(":not(.ui-accordion-content-active)")
			.hide();
	},

	_refresh: function() {
		var maxHeight,
			options = this.options,
			heightStyle = options.heightStyle,
			parent = this.element.parent(),
			accordionId = this.accordionId = "ui-accordion-" +
				(this.element.attr( "id" ) || ++uid);

		this.active = this._findActive( options.active )
			.addClass( "ui-accordion-header-active ui-state-active ui-corner-top" )
			.removeClass( "ui-corner-all" );
		this.active.next()
			.addClass( "ui-accordion-content-active" )
			.show();

		this.headers
			.attr( "role", "tab" )
			.each(function( i ) {
				var header = $( this ),
					headerId = header.attr( "id" ),
					panel = header.next(),
					panelId = panel.attr( "id" );
				if ( !headerId ) {
					headerId = accordionId + "-header-" + i;
					header.attr( "id", headerId );
				}
				if ( !panelId ) {
					panelId = accordionId + "-panel-" + i;
					panel.attr( "id", panelId );
				}
				header.attr( "aria-controls", panelId );
				panel.attr( "aria-labelledby", headerId );
			})
			.next()
				.attr( "role", "tabpanel" );

		this.headers
			.not( this.active )
			.attr({
				"aria-selected": "false",
				tabIndex: -1
			})
			.next()
				.attr({
					"aria-expanded": "false",
					"aria-hidden": "true"
				})
				.hide();

		// make sure at least one header is in the tab order
		if ( !this.active.length ) {
			this.headers.eq( 0 ).attr( "tabIndex", 0 );
		} else {
			this.active.attr({
				"aria-selected": "true",
				tabIndex: 0
			})
			.next()
				.attr({
					"aria-expanded": "true",
					"aria-hidden": "false"
				});
		}

		this._createIcons();

		this._setupEvents( options.event );

		if ( heightStyle === "fill" ) {
			maxHeight = parent.height();
			this.element.siblings( ":visible" ).each(function() {
				var elem = $( this ),
					position = elem.css( "position" );

				if ( position === "absolute" || position === "fixed" ) {
					return;
				}
				maxHeight -= elem.outerHeight( true );
			});

			this.headers.each(function() {
				maxHeight -= $( this ).outerHeight( true );
			});

			this.headers.next()
				.each(function() {
					$( this ).height( Math.max( 0, maxHeight -
						$( this ).innerHeight() + $( this ).height() ) );
				})
				.css( "overflow", "auto" );
		} else if ( heightStyle === "auto" ) {
			maxHeight = 0;
			this.headers.next()
				.each(function() {
					maxHeight = Math.max( maxHeight, $( this ).css( "height", "" ).height() );
				})
				.height( maxHeight );
		}
	},

	_activate: function( index ) {
		var active = this._findActive( index )[ 0 ];

		// trying to activate the already active panel
		if ( active === this.active[ 0 ] ) {
			return;
		}

		// trying to collapse, simulate a click on the currently active header
		active = active || this.active[ 0 ];

		this._eventHandler({
			target: active,
			currentTarget: active,
			preventDefault: $.noop
		});
	},

	_findActive: function( selector ) {
		return typeof selector === "number" ? this.headers.eq( selector ) : $();
	},

	_setupEvents: function( event ) {
		var events = {
			keydown: "_keydown"
		};
		if ( event ) {
			$.each( event.split(" "), function( index, eventName ) {
				events[ eventName ] = "_eventHandler";
			});
		}

		this._off( this.headers.add( this.headers.next() ) );
		this._on( this.headers, events );
		this._on( this.headers.next(), { keydown: "_panelKeyDown" });
		this._hoverable( this.headers );
		this._focusable( this.headers );
	},

	_eventHandler: function( event ) {
		var options = this.options,
			active = this.active,
			clicked = $( event.currentTarget ),
			clickedIsActive = clicked[ 0 ] === active[ 0 ],
			collapsing = clickedIsActive && options.collapsible,
			toShow = collapsing ? $() : clicked.next(),
			toHide = active.next(),
			eventData = {
				oldHeader: active,
				oldPanel: toHide,
				newHeader: collapsing ? $() : clicked,
				newPanel: toShow
			};

		event.preventDefault();

		if (
				// click on active header, but not collapsible
				( clickedIsActive && !options.collapsible ) ||
				// allow canceling activation
				( this._trigger( "beforeActivate", event, eventData ) === false ) ) {
			return;
		}

		options.active = collapsing ? false : this.headers.index( clicked );

		// when the call to ._toggle() comes after the class changes
		// it causes a very odd bug in IE 8 (see #6720)
		this.active = clickedIsActive ? $() : clicked;
		this._toggle( eventData );

		// switch classes
		// corner classes on the previously active header stay after the animation
		active.removeClass( "ui-accordion-header-active ui-state-active" );
		if ( options.icons ) {
			active.children( ".ui-accordion-header-icon" )
				.removeClass( options.icons.activeHeader )
				.addClass( options.icons.header );
		}

		if ( !clickedIsActive ) {
			clicked
				.removeClass( "ui-corner-all" )
				.addClass( "ui-accordion-header-active ui-state-active ui-corner-top" );
			if ( options.icons ) {
				clicked.children( ".ui-accordion-header-icon" )
					.removeClass( options.icons.header )
					.addClass( options.icons.activeHeader );
			}

			clicked
				.next()
				.addClass( "ui-accordion-content-active" );
		}
	},

	_toggle: function( data ) {
		var toShow = data.newPanel,
			toHide = this.prevShow.length ? this.prevShow : data.oldPanel;

		// handle activating a panel during the animation for another activation
		this.prevShow.add( this.prevHide ).stop( true, true );
		this.prevShow = toShow;
		this.prevHide = toHide;

		if ( this.options.animate ) {
			this._animate( toShow, toHide, data );
		} else {
			toHide.hide();
			toShow.show();
			this._toggleComplete( data );
		}

		toHide.attr({
			"aria-expanded": "false",
			"aria-hidden": "true"
		});
		toHide.prev().attr( "aria-selected", "false" );
		// if we're switching panels, remove the old header from the tab order
		// if we're opening from collapsed state, remove the previous header from the tab order
		// if we're collapsing, then keep the collapsing header in the tab order
		if ( toShow.length && toHide.length ) {
			toHide.prev().attr( "tabIndex", -1 );
		} else if ( toShow.length ) {
			this.headers.filter(function() {
				return $( this ).attr( "tabIndex" ) === 0;
			})
			.attr( "tabIndex", -1 );
		}

		toShow
			.attr({
				"aria-expanded": "true",
				"aria-hidden": "false"
			})
			.prev()
				.attr({
					"aria-selected": "true",
					tabIndex: 0
				});
	},

	_animate: function( toShow, toHide, data ) {
		var total, easing, duration,
			that = this,
			adjust = 0,
			down = toShow.length &&
				( !toHide.length || ( toShow.index() < toHide.index() ) ),
			animate = this.options.animate || {},
			options = down && animate.down || animate,
			complete = function() {
				that._toggleComplete( data );
			};

		if ( typeof options === "number" ) {
			duration = options;
		}
		if ( typeof options === "string" ) {
			easing = options;
		}
		// fall back from options to animation in case of partial down settings
		easing = easing || options.easing || animate.easing;
		duration = duration || options.duration || animate.duration;

		if ( !toHide.length ) {
			return toShow.animate( showProps, duration, easing, complete );
		}
		if ( !toShow.length ) {
			return toHide.animate( hideProps, duration, easing, complete );
		}

		total = toShow.show().outerHeight();
		toHide.animate( hideProps, {
			duration: duration,
			easing: easing,
			step: function( now, fx ) {
				fx.now = Math.round( now );
			}
		});
		toShow
			.hide()
			.animate( showProps, {
				duration: duration,
				easing: easing,
				complete: complete,
				step: function( now, fx ) {
					fx.now = Math.round( now );
					if ( fx.prop !== "height" ) {
						adjust += fx.now;
					} else if ( that.options.heightStyle !== "content" ) {
						fx.now = Math.round( total - toHide.outerHeight() - adjust );
						adjust = 0;
					}
				}
			});
	},

	_toggleComplete: function( data ) {
		var toHide = data.oldPanel;

		toHide
			.removeClass( "ui-accordion-content-active" )
			.prev()
				.removeClass( "ui-corner-top" )
				.addClass( "ui-corner-all" );

		// Work around for rendering bug in IE (#5421)
		if ( toHide.length ) {
			toHide.parent()[0].className = toHide.parent()[0].className;
		}

		this._trigger( "activate", null, data );
	}
});

})( jQuery );

(function( $, undefined ) {

// used to prevent race conditions with remote data sources
var requestIndex = 0;

$.widget( "ui.autocomplete", {
	version: "1.10.3",
	defaultElement: "<input>",
	options: {
		appendTo: null,
		autoFocus: false,
		delay: 300,
		minLength: 1,
		position: {
			my: "left top",
			at: "left bottom",
			collision: "none"
		},
		source: null,

		// callbacks
		change: null,
		close: null,
		focus: null,
		open: null,
		response: null,
		search: null,
		select: null
	},

	pending: 0,

	_create: function() {
		// Some browsers only repeat keydown events, not keypress events,
		// so we use the suppressKeyPress flag to determine if we've already
		// handled the keydown event. #7269
		// Unfortunately the code for & in keypress is the same as the up arrow,
		// so we use the suppressKeyPressRepeat flag to avoid handling keypress
		// events when we know the keydown event was used to modify the
		// search term. #7799
		var suppressKeyPress, suppressKeyPressRepeat, suppressInput,
			nodeName = this.element[0].nodeName.toLowerCase(),
			isTextarea = nodeName === "textarea",
			isInput = nodeName === "input";

		this.isMultiLine =
			// Textareas are always multi-line
			isTextarea ? true :
			// Inputs are always single-line, even if inside a contentEditable element
			// IE also treats inputs as contentEditable
			isInput ? false :
			// All other element types are determined by whether or not they're contentEditable
			this.element.prop( "isContentEditable" );

		this.valueMethod = this.element[ isTextarea || isInput ? "val" : "text" ];
		this.isNewMenu = true;

		this.element
			.addClass( "ui-autocomplete-input" )
			.attr( "autocomplete", "off" );

		this._on( this.element, {
			keydown: function( event ) {
				/*jshint maxcomplexity:15*/
				if ( this.element.prop( "readOnly" ) ) {
					suppressKeyPress = true;
					suppressInput = true;
					suppressKeyPressRepeat = true;
					return;
				}

				suppressKeyPress = false;
				suppressInput = false;
				suppressKeyPressRepeat = false;
				var keyCode = $.ui.keyCode;
				switch( event.keyCode ) {
				case keyCode.PAGE_UP:
					suppressKeyPress = true;
					this._move( "previousPage", event );
					break;
				case keyCode.PAGE_DOWN:
					suppressKeyPress = true;
					this._move( "nextPage", event );
					break;
				case keyCode.UP:
					suppressKeyPress = true;
					this._keyEvent( "previous", event );
					break;
				case keyCode.DOWN:
					suppressKeyPress = true;
					this._keyEvent( "next", event );
					break;
				case keyCode.ENTER:
				case keyCode.NUMPAD_ENTER:
					// when menu is open and has focus
					if ( this.menu.active ) {
						// #6055 - Opera still allows the keypress to occur
						// which causes forms to submit
						suppressKeyPress = true;
						event.preventDefault();
						this.menu.select( event );
					}
					break;
				case keyCode.TAB:
					if ( this.menu.active ) {
						this.menu.select( event );
					}
					break;
				case keyCode.ESCAPE:
					if ( this.menu.element.is( ":visible" ) ) {
						this._value( this.term );
						this.close( event );
						// Different browsers have different default behavior for escape
						// Single press can mean undo or clear
						// Double press in IE means clear the whole form
						event.preventDefault();
					}
					break;
				default:
					suppressKeyPressRepeat = true;
					// search timeout should be triggered before the input value is changed
					this._searchTimeout( event );
					break;
				}
			},
			keypress: function( event ) {
				if ( suppressKeyPress ) {
					suppressKeyPress = false;
					if ( !this.isMultiLine || this.menu.element.is( ":visible" ) ) {
						event.preventDefault();
					}
					return;
				}
				if ( suppressKeyPressRepeat ) {
					return;
				}

				// replicate some key handlers to allow them to repeat in Firefox and Opera
				var keyCode = $.ui.keyCode;
				switch( event.keyCode ) {
				case keyCode.PAGE_UP:
					this._move( "previousPage", event );
					break;
				case keyCode.PAGE_DOWN:
					this._move( "nextPage", event );
					break;
				case keyCode.UP:
					this._keyEvent( "previous", event );
					break;
				case keyCode.DOWN:
					this._keyEvent( "next", event );
					break;
				}
			},
			input: function( event ) {
				if ( suppressInput ) {
					suppressInput = false;
					event.preventDefault();
					return;
				}
				this._searchTimeout( event );
			},
			focus: function() {
				this.selectedItem = null;
				this.previous = this._value();
			},
			blur: function( event ) {
				if ( this.cancelBlur ) {
					delete this.cancelBlur;
					return;
				}

				clearTimeout( this.searching );
				this.close( event );
				this._change( event );
			}
		});

		this._initSource();
		this.menu = $( "<ul>" )
			.addClass( "ui-autocomplete ui-front" )
			.appendTo( this._appendTo() )
			.menu({
				// disable ARIA support, the live region takes care of that
				role: null
			})
			.hide()
			.data( "ui-menu" );

		this._on( this.menu.element, {
			mousedown: function( event ) {
				// prevent moving focus out of the text field
				event.preventDefault();

				// IE doesn't prevent moving focus even with event.preventDefault()
				// so we set a flag to know when we should ignore the blur event
				this.cancelBlur = true;
				this._delay(function() {
					delete this.cancelBlur;
				});

				// clicking on the scrollbar causes focus to shift to the body
				// but we can't detect a mouseup or a click immediately afterward
				// so we have to track the next mousedown and close the menu if
				// the user clicks somewhere outside of the autocomplete
				var menuElement = this.menu.element[ 0 ];
				if ( !$( event.target ).closest( ".ui-menu-item" ).length ) {
					this._delay(function() {
						var that = this;
						this.document.one( "mousedown", function( event ) {
							if ( event.target !== that.element[ 0 ] &&
									event.target !== menuElement &&
									!$.contains( menuElement, event.target ) ) {
								that.close();
							}
						});
					});
				}
			},
			menufocus: function( event, ui ) {
				// support: Firefox
				// Prevent accidental activation of menu items in Firefox (#7024 #9118)
				if ( this.isNewMenu ) {
					this.isNewMenu = false;
					if ( event.originalEvent && /^mouse/.test( event.originalEvent.type ) ) {
						this.menu.blur();

						this.document.one( "mousemove", function() {
							$( event.target ).trigger( event.originalEvent );
						});

						return;
					}
				}

				var item = ui.item.data( "ui-autocomplete-item" );
				if ( false !== this._trigger( "focus", event, { item: item } ) ) {
					// use value to match what will end up in the input, if it was a key event
					if ( event.originalEvent && /^key/.test( event.originalEvent.type ) ) {
						this._value( item.value );
					}
				} else {
					// Normally the input is populated with the item's value as the
					// menu is navigated, causing screen readers to notice a change and
					// announce the item. Since the focus event was canceled, this doesn't
					// happen, so we update the live region so that screen readers can
					// still notice the change and announce it.
					this.liveRegion.text( item.value );
				}
			},
			menuselect: function( event, ui ) {
				var item = ui.item.data( "ui-autocomplete-item" ),
					previous = this.previous;

				// only trigger when focus was lost (click on menu)
				if ( this.element[0] !== this.document[0].activeElement ) {
					this.element.focus();
					this.previous = previous;
					// #6109 - IE triggers two focus events and the second
					// is asynchronous, so we need to reset the previous
					// term synchronously and asynchronously :-(
					this._delay(function() {
						this.previous = previous;
						this.selectedItem = item;
					});
				}

				if ( false !== this._trigger( "select", event, { item: item } ) ) {
					this._value( item.value );
				}
				// reset the term after the select event
				// this allows custom select handling to work properly
				this.term = this._value();

				this.close( event );
				this.selectedItem = item;
			}
		});

		this.liveRegion = $( "<span>", {
				role: "status",
				"aria-live": "polite"
			})
			.addClass( "ui-helper-hidden-accessible" )
			.insertBefore( this.element );

		// turning off autocomplete prevents the browser from remembering the
		// value when navigating through history, so we re-enable autocomplete
		// if the page is unloaded before the widget is destroyed. #7790
		this._on( this.window, {
			beforeunload: function() {
				this.element.removeAttr( "autocomplete" );
			}
		});
	},

	_destroy: function() {
		clearTimeout( this.searching );
		this.element
			.removeClass( "ui-autocomplete-input" )
			.removeAttr( "autocomplete" );
		this.menu.element.remove();
		this.liveRegion.remove();
	},

	_setOption: function( key, value ) {
		this._super( key, value );
		if ( key === "source" ) {
			this._initSource();
		}
		if ( key === "appendTo" ) {
			this.menu.element.appendTo( this._appendTo() );
		}
		if ( key === "disabled" && value && this.xhr ) {
			this.xhr.abort();
		}
	},

	_appendTo: function() {
		var element = this.options.appendTo;

		if ( element ) {
			element = element.jquery || element.nodeType ?
				$( element ) :
				this.document.find( element ).eq( 0 );
		}

		if ( !element ) {
			element = this.element.closest( ".ui-front" );
		}

		if ( !element.length ) {
			element = this.document[0].body;
		}

		return element;
	},

	_initSource: function() {
		var array, url,
			that = this;
		if ( $.isArray(this.options.source) ) {
			array = this.options.source;
			this.source = function( request, response ) {
				response( $.ui.autocomplete.filter( array, request.term ) );
			};
		} else if ( typeof this.options.source === "string" ) {
			url = this.options.source;
			this.source = function( request, response ) {
				if ( that.xhr ) {
					that.xhr.abort();
				}
				that.xhr = $.ajax({
					url: url,
					data: request,
					dataType: "json",
					success: function( data ) {
						response( data );
					},
					error: function() {
						response( [] );
					}
				});
			};
		} else {
			this.source = this.options.source;
		}
	},

	_searchTimeout: function( event ) {
		clearTimeout( this.searching );
		this.searching = this._delay(function() {
			// only search if the value has changed
			if ( this.term !== this._value() ) {
				this.selectedItem = null;
				this.search( null, event );
			}
		}, this.options.delay );
	},

	search: function( value, event ) {
		value = value != null ? value : this._value();

		// always save the actual value, not the one passed as an argument
		this.term = this._value();

		if ( value.length < this.options.minLength ) {
			return this.close( event );
		}

		if ( this._trigger( "search", event ) === false ) {
			return;
		}

		return this._search( value );
	},

	_search: function( value ) {
		this.pending++;
		this.element.addClass( "ui-autocomplete-loading" );
		this.cancelSearch = false;

		this.source( { term: value }, this._response() );
	},

	_response: function() {
		var that = this,
			index = ++requestIndex;

		return function( content ) {
			if ( index === requestIndex ) {
				that.__response( content );
			}

			that.pending--;
			if ( !that.pending ) {
				that.element.removeClass( "ui-autocomplete-loading" );
			}
		};
	},

	__response: function( content ) {
		if ( content ) {
			content = this._normalize( content );
		}
		this._trigger( "response", null, { content: content } );
		if ( !this.options.disabled && content && content.length && !this.cancelSearch ) {
			this._suggest( content );
			this._trigger( "open" );
		} else {
			// use ._close() instead of .close() so we don't cancel future searches
			this._close();
		}
	},

	close: function( event ) {
		this.cancelSearch = true;
		this._close( event );
	},

	_close: function( event ) {
		if ( this.menu.element.is( ":visible" ) ) {
			this.menu.element.hide();
			this.menu.blur();
			this.isNewMenu = true;
			this._trigger( "close", event );
		}
	},

	_change: function( event ) {
		if ( this.previous !== this._value() ) {
			this._trigger( "change", event, { item: this.selectedItem } );
		}
	},

	_normalize: function( items ) {
		// assume all items have the right format when the first item is complete
		if ( items.length && items[0].label && items[0].value ) {
			return items;
		}
		return $.map( items, function( item ) {
			if ( typeof item === "string" ) {
				return {
					label: item,
					value: item
				};
			}
			return $.extend({
				label: item.label || item.value,
				value: item.value || item.label
			}, item );
		});
	},

	_suggest: function( items ) {
		var ul = this.menu.element.empty();
		this._renderMenu( ul, items );
		this.isNewMenu = true;
		this.menu.refresh();

		// size and position menu
		ul.show();
		this._resizeMenu();
		ul.position( $.extend({
			of: this.element
		}, this.options.position ));

		if ( this.options.autoFocus ) {
			this.menu.next();
		}
	},

	_resizeMenu: function() {
		var ul = this.menu.element;
		ul.outerWidth( Math.max(
			// Firefox wraps long text (possibly a rounding bug)
			// so we add 1px to avoid the wrapping (#7513)
			ul.width( "" ).outerWidth() + 1,
			this.element.outerWidth()
		) );
	},

	_renderMenu: function( ul, items ) {
		var that = this;
		$.each( items, function( index, item ) {
			that._renderItemData( ul, item );
		});
	},

	_renderItemData: function( ul, item ) {
		return this._renderItem( ul, item ).data( "ui-autocomplete-item", item );
	},

	_renderItem: function( ul, item ) {
		return $( "<li>" )
			.append( $( "<a>" ).text( item.label ) )
			.appendTo( ul );
	},

	_move: function( direction, event ) {
		if ( !this.menu.element.is( ":visible" ) ) {
			this.search( null, event );
			return;
		}
		if ( this.menu.isFirstItem() && /^previous/.test( direction ) ||
				this.menu.isLastItem() && /^next/.test( direction ) ) {
			this._value( this.term );
			this.menu.blur();
			return;
		}
		this.menu[ direction ]( event );
	},

	widget: function() {
		return this.menu.element;
	},

	_value: function() {
		return this.valueMethod.apply( this.element, arguments );
	},

	_keyEvent: function( keyEvent, event ) {
		if ( !this.isMultiLine || this.menu.element.is( ":visible" ) ) {
			this._move( keyEvent, event );

			// prevents moving cursor to beginning/end of the text field in some browsers
			event.preventDefault();
		}
	}
});

$.extend( $.ui.autocomplete, {
	escapeRegex: function( value ) {
		return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&");
	},
	filter: function(array, term) {
		var matcher = new RegExp( $.ui.autocomplete.escapeRegex(term), "i" );
		return $.grep( array, function(value) {
			return matcher.test( value.label || value.value || value );
		});
	}
});


// live region extension, adding a `messages` option
// NOTE: This is an experimental API. We are still investigating
// a full solution for string manipulation and internationalization.
$.widget( "ui.autocomplete", $.ui.autocomplete, {
	options: {
		messages: {
			noResults: "No search results.",
			results: function( amount ) {
				return amount + ( amount > 1 ? " results are" : " result is" ) +
					" available, use up and down arrow keys to navigate.";
			}
		}
	},

	__response: function( content ) {
		var message;
		this._superApply( arguments );
		if ( this.options.disabled || this.cancelSearch ) {
			return;
		}
		if ( content && content.length ) {
			message = this.options.messages.results( content.length );
		} else {
			message = this.options.messages.noResults;
		}
		this.liveRegion.text( message );
	}
});

}( jQuery ));

(function( $, undefined ) {

var lastActive, startXPos, startYPos, clickDragged,
	baseClasses = "ui-button ui-widget ui-state-default ui-corner-all",
	stateClasses = "ui-state-hover ui-state-active ",
	typeClasses = "ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",
	formResetHandler = function() {
		var form = $( this );
		setTimeout(function() {
			form.find( ":ui-button" ).button( "refresh" );
		}, 1 );
	},
	radioGroup = function( radio ) {
		var name = radio.name,
			form = radio.form,
			radios = $( [] );
		if ( name ) {
			name = name.replace( /'/g, "\\'" );
			if ( form ) {
				radios = $( form ).find( "[name='" + name + "']" );
			} else {
				radios = $( "[name='" + name + "']", radio.ownerDocument )
					.filter(function() {
						return !this.form;
					});
			}
		}
		return radios;
	};

$.widget( "ui.button", {
	version: "1.10.3",
	defaultElement: "<button>",
	options: {
		disabled: null,
		text: true,
		label: null,
		icons: {
			primary: null,
			secondary: null
		}
	},
	_create: function() {
		this.element.closest( "form" )
			.unbind( "reset" + this.eventNamespace )
			.bind( "reset" + this.eventNamespace, formResetHandler );

		if ( typeof this.options.disabled !== "boolean" ) {
			this.options.disabled = !!this.element.prop( "disabled" );
		} else {
			this.element.prop( "disabled", this.options.disabled );
		}

		this._determineButtonType();
		this.hasTitle = !!this.buttonElement.attr( "title" );

		var that = this,
			options = this.options,
			toggleButton = this.type === "checkbox" || this.type === "radio",
			activeClass = !toggleButton ? "ui-state-active" : "",
			focusClass = "ui-state-focus";

		if ( options.label === null ) {
			options.label = (this.type === "input" ? this.buttonElement.val() : this.buttonElement.html());
		}

		this._hoverable( this.buttonElement );

		this.buttonElement
			.addClass( baseClasses )
			.attr( "role", "button" )
			.bind( "mouseenter" + this.eventNamespace, function() {
				if ( options.disabled ) {
					return;
				}
				if ( this === lastActive ) {
					$( this ).addClass( "ui-state-active" );
				}
			})
			.bind( "mouseleave" + this.eventNamespace, function() {
				if ( options.disabled ) {
					return;
				}
				$( this ).removeClass( activeClass );
			})
			.bind( "click" + this.eventNamespace, function( event ) {
				if ( options.disabled ) {
					event.preventDefault();
					event.stopImmediatePropagation();
				}
			});

		this.element
			.bind( "focus" + this.eventNamespace, function() {
				// no need to check disabled, focus won't be triggered anyway
				that.buttonElement.addClass( focusClass );
			})
			.bind( "blur" + this.eventNamespace, function() {
				that.buttonElement.removeClass( focusClass );
			});

		if ( toggleButton ) {
			this.element.bind( "change" + this.eventNamespace, function() {
				if ( clickDragged ) {
					return;
				}
				that.refresh();
			});
			// if mouse moves between mousedown and mouseup (drag) set clickDragged flag
			// prevents issue where button state changes but checkbox/radio checked state
			// does not in Firefox (see ticket #6970)
			this.buttonElement
				.bind( "mousedown" + this.eventNamespace, function( event ) {
					if ( options.disabled ) {
						return;
					}
					clickDragged = false;
					startXPos = event.pageX;
					startYPos = event.pageY;
				})
				.bind( "mouseup" + this.eventNamespace, function( event ) {
					if ( options.disabled ) {
						return;
					}
					if ( startXPos !== event.pageX || startYPos !== event.pageY ) {
						clickDragged = true;
					}
			});
		}

		if ( this.type === "checkbox" ) {
			this.buttonElement.bind( "click" + this.eventNamespace, function() {
				if ( options.disabled || clickDragged ) {
					return false;
				}
			});
		} else if ( this.type === "radio" ) {
			this.buttonElement.bind( "click" + this.eventNamespace, function() {
				if ( options.disabled || clickDragged ) {
					return false;
				}
				$( this ).addClass( "ui-state-active" );
				that.buttonElement.attr( "aria-pressed", "true" );

				var radio = that.element[ 0 ];
				radioGroup( radio )
					.not( radio )
					.map(function() {
						return $( this ).button( "widget" )[ 0 ];
					})
					.removeClass( "ui-state-active" )
					.attr( "aria-pressed", "false" );
			});
		} else {
			this.buttonElement
				.bind( "mousedown" + this.eventNamespace, function() {
					if ( options.disabled ) {
						return false;
					}
					$( this ).addClass( "ui-state-active" );
					lastActive = this;
					that.document.one( "mouseup", function() {
						lastActive = null;
					});
				})
				.bind( "mouseup" + this.eventNamespace, function() {
					if ( options.disabled ) {
						return false;
					}
					$( this ).removeClass( "ui-state-active" );
				})
				.bind( "keydown" + this.eventNamespace, function(event) {
					if ( options.disabled ) {
						return false;
					}
					if ( event.keyCode === $.ui.keyCode.SPACE || event.keyCode === $.ui.keyCode.ENTER ) {
						$( this ).addClass( "ui-state-active" );
					}
				})
				// see #8559, we bind to blur here in case the button element loses
				// focus between keydown and keyup, it would be left in an "active" state
				.bind( "keyup" + this.eventNamespace + " blur" + this.eventNamespace, function() {
					$( this ).removeClass( "ui-state-active" );
				});

			if ( this.buttonElement.is("a") ) {
				this.buttonElement.keyup(function(event) {
					if ( event.keyCode === $.ui.keyCode.SPACE ) {
						// TODO pass through original event correctly (just as 2nd argument doesn't work)
						$( this ).click();
					}
				});
			}
		}

		// TODO: pull out $.Widget's handling for the disabled option into
		// $.Widget.prototype._setOptionDisabled so it's easy to proxy and can
		// be overridden by individual plugins
		this._setOption( "disabled", options.disabled );
		this._resetButton();
	},

	_determineButtonType: function() {
		var ancestor, labelSelector, checked;

		if ( this.element.is("[type=checkbox]") ) {
			this.type = "checkbox";
		} else if ( this.element.is("[type=radio]") ) {
			this.type = "radio";
		} else if ( this.element.is("input") ) {
			this.type = "input";
		} else {
			this.type = "button";
		}

		if ( this.type === "checkbox" || this.type === "radio" ) {
			// we don't search against the document in case the element
			// is disconnected from the DOM
			ancestor = this.element.parents().last();
			labelSelector = "label[for='" + this.element.attr("id") + "']";
			this.buttonElement = ancestor.find( labelSelector );
			if ( !this.buttonElement.length ) {
				ancestor = ancestor.length ? ancestor.siblings() : this.element.siblings();
				this.buttonElement = ancestor.filter( labelSelector );
				if ( !this.buttonElement.length ) {
					this.buttonElement = ancestor.find( labelSelector );
				}
			}
			this.element.addClass( "ui-helper-hidden-accessible" );

			checked = this.element.is( ":checked" );
			if ( checked ) {
				this.buttonElement.addClass( "ui-state-active" );
			}
			this.buttonElement.prop( "aria-pressed", checked );
		} else {
			this.buttonElement = this.element;
		}
	},

	widget: function() {
		return this.buttonElement;
	},

	_destroy: function() {
		this.element
			.removeClass( "ui-helper-hidden-accessible" );
		this.buttonElement
			.removeClass( baseClasses + " " + stateClasses + " " + typeClasses )
			.removeAttr( "role" )
			.removeAttr( "aria-pressed" )
			.html( this.buttonElement.find(".ui-button-text").html() );

		if ( !this.hasTitle ) {
			this.buttonElement.removeAttr( "title" );
		}
	},

	_setOption: function( key, value ) {
		this._super( key, value );
		if ( key === "disabled" ) {
			if ( value ) {
				this.element.prop( "disabled", true );
			} else {
				this.element.prop( "disabled", false );
			}
			return;
		}
		this._resetButton();
	},

	refresh: function() {
		//See #8237 & #8828
		var isDisabled = this.element.is( "input, button" ) ? this.element.is( ":disabled" ) : this.element.hasClass( "ui-button-disabled" );

		if ( isDisabled !== this.options.disabled ) {
			this._setOption( "disabled", isDisabled );
		}
		if ( this.type === "radio" ) {
			radioGroup( this.element[0] ).each(function() {
				if ( $( this ).is( ":checked" ) ) {
					$( this ).button( "widget" )
						.addClass( "ui-state-active" )
						.attr( "aria-pressed", "true" );
				} else {
					$( this ).button( "widget" )
						.removeClass( "ui-state-active" )
						.attr( "aria-pressed", "false" );
				}
			});
		} else if ( this.type === "checkbox" ) {
			if ( this.element.is( ":checked" ) ) {
				this.buttonElement
					.addClass( "ui-state-active" )
					.attr( "aria-pressed", "true" );
			} else {
				this.buttonElement
					.removeClass( "ui-state-active" )
					.attr( "aria-pressed", "false" );
			}
		}
	},

	_resetButton: function() {
		if ( this.type === "input" ) {
			if ( this.options.label ) {
				this.element.val( this.options.label );
			}
			return;
		}
		var buttonElement = this.buttonElement.removeClass( typeClasses ),
			buttonText = $( "<span></span>", this.document[0] )
				.addClass( "ui-button-text" )
				.html( this.options.label )
				.appendTo( buttonElement.empty() )
				.text(),
			icons = this.options.icons,
			multipleIcons = icons.primary && icons.secondary,
			buttonClasses = [];

		if ( icons.primary || icons.secondary ) {
			if ( this.options.text ) {
				buttonClasses.push( "ui-button-text-icon" + ( multipleIcons ? "s" : ( icons.primary ? "-primary" : "-secondary" ) ) );
			}

			if ( icons.primary ) {
				buttonElement.prepend( "<span class='ui-button-icon-primary ui-icon " + icons.primary + "'></span>" );
			}

			if ( icons.secondary ) {
				buttonElement.append( "<span class='ui-button-icon-secondary ui-icon " + icons.secondary + "'></span>" );
			}

			if ( !this.options.text ) {
				buttonClasses.push( multipleIcons ? "ui-button-icons-only" : "ui-button-icon-only" );

				if ( !this.hasTitle ) {
					buttonElement.attr( "title", $.trim( buttonText ) );
				}
			}
		} else {
			buttonClasses.push( "ui-button-text-only" );
		}
		buttonElement.addClass( buttonClasses.join( " " ) );
	}
});

$.widget( "ui.buttonset", {
	version: "1.10.3",
	options: {
		items: "button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"
	},

	_create: function() {
		this.element.addClass( "ui-buttonset" );
	},

	_init: function() {
		this.refresh();
	},

	_setOption: function( key, value ) {
		if ( key === "disabled" ) {
			this.buttons.button( "option", key, value );
		}

		this._super( key, value );
	},

	refresh: function() {
		var rtl = this.element.css( "direction" ) === "rtl";

		this.buttons = this.element.find( this.options.items )
			.filter( ":ui-button" )
				.button( "refresh" )
			.end()
			.not( ":ui-button" )
				.button()
			.end()
			.map(function() {
				return $( this ).button( "widget" )[ 0 ];
			})
				.removeClass( "ui-corner-all ui-corner-left ui-corner-right" )
				.filter( ":first" )
					.addClass( rtl ? "ui-corner-right" : "ui-corner-left" )
				.end()
				.filter( ":last" )
					.addClass( rtl ? "ui-corner-left" : "ui-corner-right" )
				.end()
			.end();
	},

	_destroy: function() {
		this.element.removeClass( "ui-buttonset" );
		this.buttons
			.map(function() {
				return $( this ).button( "widget" )[ 0 ];
			})
				.removeClass( "ui-corner-left ui-corner-right" )
			.end()
			.button( "destroy" );
	}
});

}( jQuery ) );

(function( $, undefined ) {

$.extend($.ui, { datepicker: { version: "1.10.3" } });

var PROP_NAME = "datepicker",
	instActive;

/* Date picker manager.
   Use the singleton instance of this class, $.datepicker, to interact with the date picker.
   Settings for (groups of) date pickers are maintained in an instance object,
   allowing multiple different settings on the same page. */

function Datepicker() {
	this._curInst = null; // The current instance in use
	this._keyEvent = false; // If the last event was a key event
	this._disabledInputs = []; // List of date picker inputs that have been disabled
	this._datepickerShowing = false; // True if the popup picker is showing , false if not
	this._inDialog = false; // True if showing within a "dialog", false if not
	this._mainDivId = "ui-datepicker-div"; // The ID of the main datepicker division
	this._inlineClass = "ui-datepicker-inline"; // The name of the inline marker class
	this._appendClass = "ui-datepicker-append"; // The name of the append marker class
	this._triggerClass = "ui-datepicker-trigger"; // The name of the trigger marker class
	this._dialogClass = "ui-datepicker-dialog"; // The name of the dialog marker class
	this._disableClass = "ui-datepicker-disabled"; // The name of the disabled covering marker class
	this._unselectableClass = "ui-datepicker-unselectable"; // The name of the unselectable cell marker class
	this._currentClass = "ui-datepicker-current-day"; // The name of the current day marker class
	this._dayOverClass = "ui-datepicker-days-cell-over"; // The name of the day hover marker class
	this.regional = []; // Available regional settings, indexed by language code
	this.regional[""] = { // Default regional settings
		closeText: "Done", // Display text for close link
		prevText: "Prev", // Display text for previous month link
		nextText: "Next", // Display text for next month link
		currentText: "Today", // Display text for current month link
		monthNames: ["January","February","March","April","May","June",
			"July","August","September","October","November","December"], // Names of months for drop-down and formatting
		monthNamesShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"], // For formatting
		dayNames: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], // For formatting
		dayNamesShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], // For formatting
		dayNamesMin: ["Su","Mo","Tu","We","Th","Fr","Sa"], // Column headings for days starting at Sunday
		weekHeader: "Wk", // Column header for week of the year
		dateFormat: "mm/dd/yy", // See format options on parseDate
		firstDay: 0, // The first day of the week, Sun = 0, Mon = 1, ...
		isRTL: false, // True if right-to-left language, false if left-to-right
		showMonthAfterYear: false, // True if the year select precedes month, false for month then year
		yearSuffix: "" // Additional text to append to the year in the month headers
	};
	this._defaults = { // Global defaults for all the date picker instances
		showOn: "focus", // "focus" for popup on focus,
			// "button" for trigger button, or "both" for either
		showAnim: "fadeIn", // Name of jQuery animation for popup
		showOptions: {}, // Options for enhanced animations
		defaultDate: null, // Used when field is blank: actual date,
			// +/-number for offset from today, null for today
		appendText: "", // Display text following the input box, e.g. showing the format
		buttonText: "...", // Text for trigger button
		buttonImage: "", // URL for trigger button image
		buttonImageOnly: false, // True if the image appears alone, false if it appears on a button
		hideIfNoPrevNext: false, // True to hide next/previous month links
			// if not applicable, false to just disable them
		navigationAsDateFormat: false, // True if date formatting applied to prev/today/next links
		gotoCurrent: false, // True if today link goes back to current selection instead
		changeMonth: false, // True if month can be selected directly, false if only prev/next
		changeYear: false, // True if year can be selected directly, false if only prev/next
		yearRange: "c-10:c+10", // Range of years to display in drop-down,
			// either relative to today's year (-nn:+nn), relative to currently displayed year
			// (c-nn:c+nn), absolute (nnnn:nnnn), or a combination of the above (nnnn:-n)
		showOtherMonths: false, // True to show dates in other months, false to leave blank
		selectOtherMonths: false, // True to allow selection of dates in other months, false for unselectable
		showWeek: false, // True to show week of the year, false to not show it
		calculateWeek: this.iso8601Week, // How to calculate the week of the year,
			// takes a Date and returns the number of the week for it
		shortYearCutoff: "+10", // Short year values < this are in the current century,
			// > this are in the previous century,
			// string value starting with "+" for current year + value
		minDate: null, // The earliest selectable date, or null for no limit
		maxDate: null, // The latest selectable date, or null for no limit
		duration: "fast", // Duration of display/closure
		beforeShowDay: null, // Function that takes a date and returns an array with
			// [0] = true if selectable, false if not, [1] = custom CSS class name(s) or "",
			// [2] = cell title (optional), e.g. $.datepicker.noWeekends
		beforeShow: null, // Function that takes an input field and
			// returns a set of custom settings for the date picker
		onSelect: null, // Define a callback function when a date is selected
		onChangeMonthYear: null, // Define a callback function when the month or year is changed
		onClose: null, // Define a callback function when the datepicker is closed
		numberOfMonths: 1, // Number of months to show at a time
		showCurrentAtPos: 0, // The position in multipe months at which to show the current month (starting at 0)
		stepMonths: 1, // Number of months to step back/forward
		stepBigMonths: 12, // Number of months to step back/forward for the big links
		altField: "", // Selector for an alternate field to store selected dates into
		altFormat: "", // The date format to use for the alternate field
		constrainInput: true, // The input is constrained by the current date format
		showButtonPanel: false, // True to show button panel, false to not show it
		autoSize: false, // True to size the input for the date format, false to leave as is
		disabled: false // The initial disabled state
	};
	$.extend(this._defaults, this.regional[""]);
	this.dpDiv = bindHover($("<div id='" + this._mainDivId + "' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"));
}

$.extend(Datepicker.prototype, {
	/* Class name added to elements to indicate already configured with a date picker. */
	markerClassName: "hasDatepicker",

	//Keep track of the maximum number of rows displayed (see #7043)
	maxRows: 4,

	// TODO rename to "widget" when switching to widget factory
	_widgetDatepicker: function() {
		return this.dpDiv;
	},

	/* Override the default settings for all instances of the date picker.
	 * @param  settings  object - the new settings to use as defaults (anonymous object)
	 * @return the manager object
	 */
	setDefaults: function(settings) {
		extendRemove(this._defaults, settings || {});
		return this;
	},

	/* Attach the date picker to a jQuery selection.
	 * @param  target	element - the target input field or division or span
	 * @param  settings  object - the new settings to use for this date picker instance (anonymous)
	 */
	_attachDatepicker: function(target, settings) {
		var nodeName, inline, inst;
		nodeName = target.nodeName.toLowerCase();
		inline = (nodeName === "div" || nodeName === "span");
		if (!target.id) {
			this.uuid += 1;
			target.id = "dp" + this.uuid;
		}
		inst = this._newInst($(target), inline);
		inst.settings = $.extend({}, settings || {});
		if (nodeName === "input") {
			this._connectDatepicker(target, inst);
		} else if (inline) {
			this._inlineDatepicker(target, inst);
		}
	},

	/* Create a new instance object. */
	_newInst: function(target, inline) {
		var id = target[0].id.replace(/([^A-Za-z0-9_\-])/g, "\\\\$1"); // escape jQuery meta chars
		return {id: id, input: target, // associated target
			selectedDay: 0, selectedMonth: 0, selectedYear: 0, // current selection
			drawMonth: 0, drawYear: 0, // month being drawn
			inline: inline, // is datepicker inline or not
			dpDiv: (!inline ? this.dpDiv : // presentation div
			bindHover($("<div class='" + this._inlineClass + " ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")))};
	},

	/* Attach the date picker to an input field. */
	_connectDatepicker: function(target, inst) {
		var input = $(target);
		inst.append = $([]);
		inst.trigger = $([]);
		if (input.hasClass(this.markerClassName)) {
			return;
		}
		this._attachments(input, inst);
		input.addClass(this.markerClassName).keydown(this._doKeyDown).
			keypress(this._doKeyPress).keyup(this._doKeyUp);
		this._autoSize(inst);
		$.data(target, PROP_NAME, inst);
		//If disabled option is true, disable the datepicker once it has been attached to the input (see ticket #5665)
		if( inst.settings.disabled ) {
			this._disableDatepicker( target );
		}
	},

	/* Make attachments based on settings. */
	_attachments: function(input, inst) {
		var showOn, buttonText, buttonImage,
			appendText = this._get(inst, "appendText"),
			isRTL = this._get(inst, "isRTL");

		if (inst.append) {
			inst.append.remove();
		}
		if (appendText) {
			inst.append = $("<span class='" + this._appendClass + "'>" + appendText + "</span>");
			input[isRTL ? "before" : "after"](inst.append);
		}

		input.unbind("focus", this._showDatepicker);

		if (inst.trigger) {
			inst.trigger.remove();
		}

		showOn = this._get(inst, "showOn");
		if (showOn === "focus" || showOn === "both") { // pop-up date picker when in the marked field
			input.focus(this._showDatepicker);
		}
		if (showOn === "button" || showOn === "both") { // pop-up date picker when button clicked
			buttonText = this._get(inst, "buttonText");
			buttonImage = this._get(inst, "buttonImage");
			inst.trigger = $(this._get(inst, "buttonImageOnly") ?
				$("<img/>").addClass(this._triggerClass).
					attr({ src: buttonImage, alt: buttonText, title: buttonText }) :
				$("<button type='button'></button>").addClass(this._triggerClass).
					html(!buttonImage ? buttonText : $("<img/>").attr(
					{ src:buttonImage, alt:buttonText, title:buttonText })));
			input[isRTL ? "before" : "after"](inst.trigger);
			inst.trigger.click(function() {
				if ($.datepicker._datepickerShowing && $.datepicker._lastInput === input[0]) {
					$.datepicker._hideDatepicker();
				} else if ($.datepicker._datepickerShowing && $.datepicker._lastInput !== input[0]) {
					$.datepicker._hideDatepicker();
					$.datepicker._showDatepicker(input[0]);
				} else {
					$.datepicker._showDatepicker(input[0]);
				}
				return false;
			});
		}
	},

	/* Apply the maximum length for the date format. */
	_autoSize: function(inst) {
		if (this._get(inst, "autoSize") && !inst.inline) {
			var findMax, max, maxI, i,
				date = new Date(2009, 12 - 1, 20), // Ensure double digits
				dateFormat = this._get(inst, "dateFormat");

			if (dateFormat.match(/[DM]/)) {
				findMax = function(names) {
					max = 0;
					maxI = 0;
					for (i = 0; i < names.length; i++) {
						if (names[i].length > max) {
							max = names[i].length;
							maxI = i;
						}
					}
					return maxI;
				};
				date.setMonth(findMax(this._get(inst, (dateFormat.match(/MM/) ?
					"monthNames" : "monthNamesShort"))));
				date.setDate(findMax(this._get(inst, (dateFormat.match(/DD/) ?
					"dayNames" : "dayNamesShort"))) + 20 - date.getDay());
			}
			inst.input.attr("size", this._formatDate(inst, date).length);
		}
	},

	/* Attach an inline date picker to a div. */
	_inlineDatepicker: function(target, inst) {
		var divSpan = $(target);
		if (divSpan.hasClass(this.markerClassName)) {
			return;
		}
		divSpan.addClass(this.markerClassName).append(inst.dpDiv);
		$.data(target, PROP_NAME, inst);
		this._setDate(inst, this._getDefaultDate(inst), true);
		this._updateDatepicker(inst);
		this._updateAlternate(inst);
		//If disabled option is true, disable the datepicker before showing it (see ticket #5665)
		if( inst.settings.disabled ) {
			this._disableDatepicker( target );
		}
		// Set display:block in place of inst.dpDiv.show() which won't work on disconnected elements
		// http://bugs.jqueryui.com/ticket/7552 - A Datepicker created on a detached div has zero height
		inst.dpDiv.css( "display", "block" );
	},

	/* Pop-up the date picker in a "dialog" box.
	 * @param  input element - ignored
	 * @param  date	string or Date - the initial date to display
	 * @param  onSelect  function - the function to call when a date is selected
	 * @param  settings  object - update the dialog date picker instance's settings (anonymous object)
	 * @param  pos int[2] - coordinates for the dialog's position within the screen or
	 *					event - with x/y coordinates or
	 *					leave empty for default (screen centre)
	 * @return the manager object
	 */
	_dialogDatepicker: function(input, date, onSelect, settings, pos) {
		var id, browserWidth, browserHeight, scrollX, scrollY,
			inst = this._dialogInst; // internal instance

		if (!inst) {
			this.uuid += 1;
			id = "dp" + this.uuid;
			this._dialogInput = $("<input type='text' id='" + id +
				"' style='position: absolute; top: -100px; width: 0px;'/>");
			this._dialogInput.keydown(this._doKeyDown);
			$("body").append(this._dialogInput);
			inst = this._dialogInst = this._newInst(this._dialogInput, false);
			inst.settings = {};
			$.data(this._dialogInput[0], PROP_NAME, inst);
		}
		extendRemove(inst.settings, settings || {});
		date = (date && date.constructor === Date ? this._formatDate(inst, date) : date);
		this._dialogInput.val(date);

		this._pos = (pos ? (pos.length ? pos : [pos.pageX, pos.pageY]) : null);
		if (!this._pos) {
			browserWidth = document.documentElement.clientWidth;
			browserHeight = document.documentElement.clientHeight;
			scrollX = document.documentElement.scrollLeft || document.body.scrollLeft;
			scrollY = document.documentElement.scrollTop || document.body.scrollTop;
			this._pos = // should use actual width/height below
				[(browserWidth / 2) - 100 + scrollX, (browserHeight / 2) - 150 + scrollY];
		}

		// move input on screen for focus, but hidden behind dialog
		this._dialogInput.css("left", (this._pos[0] + 20) + "px").css("top", this._pos[1] + "px");
		inst.settings.onSelect = onSelect;
		this._inDialog = true;
		this.dpDiv.addClass(this._dialogClass);
		this._showDatepicker(this._dialogInput[0]);
		if ($.blockUI) {
			$.blockUI(this.dpDiv);
		}
		$.data(this._dialogInput[0], PROP_NAME, inst);
		return this;
	},

	/* Detach a datepicker from its control.
	 * @param  target	element - the target input field or division or span
	 */
	_destroyDatepicker: function(target) {
		var nodeName,
			$target = $(target),
			inst = $.data(target, PROP_NAME);

		if (!$target.hasClass(this.markerClassName)) {
			return;
		}

		nodeName = target.nodeName.toLowerCase();
		$.removeData(target, PROP_NAME);
		if (nodeName === "input") {
			inst.append.remove();
			inst.trigger.remove();
			$target.removeClass(this.markerClassName).
				unbind("focus", this._showDatepicker).
				unbind("keydown", this._doKeyDown).
				unbind("keypress", this._doKeyPress).
				unbind("keyup", this._doKeyUp);
		} else if (nodeName === "div" || nodeName === "span") {
			$target.removeClass(this.markerClassName).empty();
		}
	},

	/* Enable the date picker to a jQuery selection.
	 * @param  target	element - the target input field or division or span
	 */
	_enableDatepicker: function(target) {
		var nodeName, inline,
			$target = $(target),
			inst = $.data(target, PROP_NAME);

		if (!$target.hasClass(this.markerClassName)) {
			return;
		}

		nodeName = target.nodeName.toLowerCase();
		if (nodeName === "input") {
			target.disabled = false;
			inst.trigger.filter("button").
				each(function() { this.disabled = false; }).end().
				filter("img").css({opacity: "1.0", cursor: ""});
		} else if (nodeName === "div" || nodeName === "span") {
			inline = $target.children("." + this._inlineClass);
			inline.children().removeClass("ui-state-disabled");
			inline.find("select.ui-datepicker-month, select.ui-datepicker-year").
				prop("disabled", false);
		}
		this._disabledInputs = $.map(this._disabledInputs,
			function(value) { return (value === target ? null : value); }); // delete entry
	},

	/* Disable the date picker to a jQuery selection.
	 * @param  target	element - the target input field or division or span
	 */
	_disableDatepicker: function(target) {
		var nodeName, inline,
			$target = $(target),
			inst = $.data(target, PROP_NAME);

		if (!$target.hasClass(this.markerClassName)) {
			return;
		}

		nodeName = target.nodeName.toLowerCase();
		if (nodeName === "input") {
			target.disabled = true;
			inst.trigger.filter("button").
				each(function() { this.disabled = true; }).end().
				filter("img").css({opacity: "0.5", cursor: "default"});
		} else if (nodeName === "div" || nodeName === "span") {
			inline = $target.children("." + this._inlineClass);
			inline.children().addClass("ui-state-disabled");
			inline.find("select.ui-datepicker-month, select.ui-datepicker-year").
				prop("disabled", true);
		}
		this._disabledInputs = $.map(this._disabledInputs,
			function(value) { return (value === target ? null : value); }); // delete entry
		this._disabledInputs[this._disabledInputs.length] = target;
	},

	/* Is the first field in a jQuery collection disabled as a datepicker?
	 * @param  target	element - the target input field or division or span
	 * @return boolean - true if disabled, false if enabled
	 */
	_isDisabledDatepicker: function(target) {
		if (!target) {
			return false;
		}
		for (var i = 0; i < this._disabledInputs.length; i++) {
			if (this._disabledInputs[i] === target) {
				return true;
			}
		}
		return false;
	},

	/* Retrieve the instance data for the target control.
	 * @param  target  element - the target input field or division or span
	 * @return  object - the associated instance data
	 * @throws  error if a jQuery problem getting data
	 */
	_getInst: function(target) {
		try {
			return $.data(target, PROP_NAME);
		}
		catch (err) {
			throw "Missing instance data for this datepicker";
		}
	},

	/* Update or retrieve the settings for a date picker attached to an input field or division.
	 * @param  target  element - the target input field or division or span
	 * @param  name	object - the new settings to update or
	 *				string - the name of the setting to change or retrieve,
	 *				when retrieving also "all" for all instance settings or
	 *				"defaults" for all global defaults
	 * @param  value   any - the new value for the setting
	 *				(omit if above is an object or to retrieve a value)
	 */
	_optionDatepicker: function(target, name, value) {
		var settings, date, minDate, maxDate,
			inst = this._getInst(target);

		if (arguments.length === 2 && typeof name === "string") {
			return (name === "defaults" ? $.extend({}, $.datepicker._defaults) :
				(inst ? (name === "all" ? $.extend({}, inst.settings) :
				this._get(inst, name)) : null));
		}

		settings = name || {};
		if (typeof name === "string") {
			settings = {};
			settings[name] = value;
		}

		if (inst) {
			if (this._curInst === inst) {
				this._hideDatepicker();
			}

			date = this._getDateDatepicker(target, true);
			minDate = this._getMinMaxDate(inst, "min");
			maxDate = this._getMinMaxDate(inst, "max");
			extendRemove(inst.settings, settings);
			// reformat the old minDate/maxDate values if dateFormat changes and a new minDate/maxDate isn't provided
			if (minDate !== null && settings.dateFormat !== undefined && settings.minDate === undefined) {
				inst.settings.minDate = this._formatDate(inst, minDate);
			}
			if (maxDate !== null && settings.dateFormat !== undefined && settings.maxDate === undefined) {
				inst.settings.maxDate = this._formatDate(inst, maxDate);
			}
			if ( "disabled" in settings ) {
				if ( settings.disabled ) {
					this._disableDatepicker(target);
				} else {
					this._enableDatepicker(target);
				}
			}
			this._attachments($(target), inst);
			this._autoSize(inst);
			this._setDate(inst, date);
			this._updateAlternate(inst);
			this._updateDatepicker(inst);
		}
	},

	// change method deprecated
	_changeDatepicker: function(target, name, value) {
		this._optionDatepicker(target, name, value);
	},

	/* Redraw the date picker attached to an input field or division.
	 * @param  target  element - the target input field or division or span
	 */
	_refreshDatepicker: function(target) {
		var inst = this._getInst(target);
		if (inst) {
			this._updateDatepicker(inst);
		}
	},

	/* Set the dates for a jQuery selection.
	 * @param  target element - the target input field or division or span
	 * @param  date	Date - the new date
	 */
	_setDateDatepicker: function(target, date) {
		var inst = this._getInst(target);
		if (inst) {
			this._setDate(inst, date);
			this._updateDatepicker(inst);
			this._updateAlternate(inst);
		}
	},

	/* Get the date(s) for the first entry in a jQuery selection.
	 * @param  target element - the target input field or division or span
	 * @param  noDefault boolean - true if no default date is to be used
	 * @return Date - the current date
	 */
	_getDateDatepicker: function(target, noDefault) {
		var inst = this._getInst(target);
		if (inst && !inst.inline) {
			this._setDateFromField(inst, noDefault);
		}
		return (inst ? this._getDate(inst) : null);
	},

	/* Handle keystrokes. */
	_doKeyDown: function(event) {
		var onSelect, dateStr, sel,
			inst = $.datepicker._getInst(event.target),
			handled = true,
			isRTL = inst.dpDiv.is(".ui-datepicker-rtl");

		inst._keyEvent = true;
		if ($.datepicker._datepickerShowing) {
			switch (event.keyCode) {
				case 9: $.datepicker._hideDatepicker();
						handled = false;
						break; // hide on tab out
				case 13: sel = $("td." + $.datepicker._dayOverClass + ":not(." +
									$.datepicker._currentClass + ")", inst.dpDiv);
						if (sel[0]) {
							$.datepicker._selectDay(event.target, inst.selectedMonth, inst.selectedYear, sel[0]);
						}

						onSelect = $.datepicker._get(inst, "onSelect");
						if (onSelect) {
							dateStr = $.datepicker._formatDate(inst);

							// trigger custom callback
							onSelect.apply((inst.input ? inst.input[0] : null), [dateStr, inst]);
						} else {
							$.datepicker._hideDatepicker();
						}

						return false; // don't submit the form
				case 27: $.datepicker._hideDatepicker();
						break; // hide on escape
				case 33: $.datepicker._adjustDate(event.target, (event.ctrlKey ?
							-$.datepicker._get(inst, "stepBigMonths") :
							-$.datepicker._get(inst, "stepMonths")), "M");
						break; // previous month/year on page up/+ ctrl
				case 34: $.datepicker._adjustDate(event.target, (event.ctrlKey ?
							+$.datepicker._get(inst, "stepBigMonths") :
							+$.datepicker._get(inst, "stepMonths")), "M");
						break; // next month/year on page down/+ ctrl
				case 35: if (event.ctrlKey || event.metaKey) {
							$.datepicker._clearDate(event.target);
						}
						handled = event.ctrlKey || event.metaKey;
						break; // clear on ctrl or command +end
				case 36: if (event.ctrlKey || event.metaKey) {
							$.datepicker._gotoToday(event.target);
						}
						handled = event.ctrlKey || event.metaKey;
						break; // current on ctrl or command +home
				case 37: if (event.ctrlKey || event.metaKey) {
							$.datepicker._adjustDate(event.target, (isRTL ? +1 : -1), "D");
						}
						handled = event.ctrlKey || event.metaKey;
						// -1 day on ctrl or command +left
						if (event.originalEvent.altKey) {
							$.datepicker._adjustDate(event.target, (event.ctrlKey ?
								-$.datepicker._get(inst, "stepBigMonths") :
								-$.datepicker._get(inst, "stepMonths")), "M");
						}
						// next month/year on alt +left on Mac
						break;
				case 38: if (event.ctrlKey || event.metaKey) {
							$.datepicker._adjustDate(event.target, -7, "D");
						}
						handled = event.ctrlKey || event.metaKey;
						break; // -1 week on ctrl or command +up
				case 39: if (event.ctrlKey || event.metaKey) {
							$.datepicker._adjustDate(event.target, (isRTL ? -1 : +1), "D");
						}
						handled = event.ctrlKey || event.metaKey;
						// +1 day on ctrl or command +right
						if (event.originalEvent.altKey) {
							$.datepicker._adjustDate(event.target, (event.ctrlKey ?
								+$.datepicker._get(inst, "stepBigMonths") :
								+$.datepicker._get(inst, "stepMonths")), "M");
						}
						// next month/year on alt +right
						break;
				case 40: if (event.ctrlKey || event.metaKey) {
							$.datepicker._adjustDate(event.target, +7, "D");
						}
						handled = event.ctrlKey || event.metaKey;
						break; // +1 week on ctrl or command +down
				default: handled = false;
			}
		} else if (event.keyCode === 36 && event.ctrlKey) { // display the date picker on ctrl+home
			$.datepicker._showDatepicker(this);
		} else {
			handled = false;
		}

		if (handled) {
			event.preventDefault();
			event.stopPropagation();
		}
	},

	/* Filter entered characters - based on date format. */
	_doKeyPress: function(event) {
		var chars, chr,
			inst = $.datepicker._getInst(event.target);

		if ($.datepicker._get(inst, "constrainInput")) {
			chars = $.datepicker._possibleChars($.datepicker._get(inst, "dateFormat"));
			chr = String.fromCharCode(event.charCode == null ? event.keyCode : event.charCode);
			return event.ctrlKey || event.metaKey || (chr < " " || !chars || chars.indexOf(chr) > -1);
		}
	},

	/* Synchronise manual entry and field/alternate field. */
	_doKeyUp: function(event) {
		var date,
			inst = $.datepicker._getInst(event.target);

		if (inst.input.val() !== inst.lastVal) {
			try {
				date = $.datepicker.parseDate($.datepicker._get(inst, "dateFormat"),
					(inst.input ? inst.input.val() : null),
					$.datepicker._getFormatConfig(inst));

				if (date) { // only if valid
					$.datepicker._setDateFromField(inst);
					$.datepicker._updateAlternate(inst);
					$.datepicker._updateDatepicker(inst);
				}
			}
			catch (err) {
			}
		}
		return true;
	},

	/* Pop-up the date picker for a given input field.
	 * If false returned from beforeShow event handler do not show.
	 * @param  input  element - the input field attached to the date picker or
	 *					event - if triggered by focus
	 */
	_showDatepicker: function(input) {
		input = input.target || input;
		if (input.nodeName.toLowerCase() !== "input") { // find from button/image trigger
			input = $("input", input.parentNode)[0];
		}

		if ($.datepicker._isDisabledDatepicker(input) || $.datepicker._lastInput === input) { // already here
			return;
		}

		var inst, beforeShow, beforeShowSettings, isFixed,
			offset, showAnim, duration;

		inst = $.datepicker._getInst(input);
		if ($.datepicker._curInst && $.datepicker._curInst !== inst) {
			$.datepicker._curInst.dpDiv.stop(true, true);
			if ( inst && $.datepicker._datepickerShowing ) {
				$.datepicker._hideDatepicker( $.datepicker._curInst.input[0] );
			}
		}

		beforeShow = $.datepicker._get(inst, "beforeShow");
		beforeShowSettings = beforeShow ? beforeShow.apply(input, [input, inst]) : {};
		if(beforeShowSettings === false){
			return;
		}
		extendRemove(inst.settings, beforeShowSettings);

		inst.lastVal = null;
		$.datepicker._lastInput = input;
		$.datepicker._setDateFromField(inst);

		if ($.datepicker._inDialog) { // hide cursor
			input.value = "";
		}
		if (!$.datepicker._pos) { // position below input
			$.datepicker._pos = $.datepicker._findPos(input);
			$.datepicker._pos[1] += input.offsetHeight; // add the height
		}

		isFixed = false;
		$(input).parents().each(function() {
			isFixed |= $(this).css("position") === "fixed";
			return !isFixed;
		});

		offset = {left: $.datepicker._pos[0], top: $.datepicker._pos[1]};
		$.datepicker._pos = null;
		//to avoid flashes on Firefox
		inst.dpDiv.empty();
		// determine sizing offscreen
		inst.dpDiv.css({position: "absolute", display: "block", top: "-1000px"});
		$.datepicker._updateDatepicker(inst);
		// fix width for dynamic number of date pickers
		// and adjust position before showing
		offset = $.datepicker._checkOffset(inst, offset, isFixed);
		inst.dpDiv.css({position: ($.datepicker._inDialog && $.blockUI ?
			"static" : (isFixed ? "fixed" : "absolute")), display: "none",
			left: offset.left + "px", top: offset.top + "px"});

		if (!inst.inline) {
			showAnim = $.datepicker._get(inst, "showAnim");
			duration = $.datepicker._get(inst, "duration");
			inst.dpDiv.zIndex($(input).zIndex()+1);
			$.datepicker._datepickerShowing = true;

			if ( $.effects && $.effects.effect[ showAnim ] ) {
				inst.dpDiv.show(showAnim, $.datepicker._get(inst, "showOptions"), duration);
			} else {
				inst.dpDiv[showAnim || "show"](showAnim ? duration : null);
			}

			if ( $.datepicker._shouldFocusInput( inst ) ) {
				inst.input.focus();
			}

			$.datepicker._curInst = inst;
		}
	},

	/* Generate the date picker content. */
	_updateDatepicker: function(inst) {
		this.maxRows = 4; //Reset the max number of rows being displayed (see #7043)
		instActive = inst; // for delegate hover events
		inst.dpDiv.empty().append(this._generateHTML(inst));
		this._attachHandlers(inst);
		inst.dpDiv.find("." + this._dayOverClass + " a").mouseover();

		var origyearshtml,
			numMonths = this._getNumberOfMonths(inst),
			cols = numMonths[1],
			width = 17;

		inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");
		if (cols > 1) {
			inst.dpDiv.addClass("ui-datepicker-multi-" + cols).css("width", (width * cols) + "em");
		}
		inst.dpDiv[(numMonths[0] !== 1 || numMonths[1] !== 1 ? "add" : "remove") +
			"Class"]("ui-datepicker-multi");
		inst.dpDiv[(this._get(inst, "isRTL") ? "add" : "remove") +
			"Class"]("ui-datepicker-rtl");

		if (inst === $.datepicker._curInst && $.datepicker._datepickerShowing && $.datepicker._shouldFocusInput( inst ) ) {
			inst.input.focus();
		}

		// deffered render of the years select (to avoid flashes on Firefox)
		if( inst.yearshtml ){
			origyearshtml = inst.yearshtml;
			setTimeout(function(){
				//assure that inst.yearshtml didn't change.
				if( origyearshtml === inst.yearshtml && inst.yearshtml ){
					inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml);
				}
				origyearshtml = inst.yearshtml = null;
			}, 0);
		}
	},

	// #6694 - don't focus the input if it's already focused
	// this breaks the change event in IE
	// Support: IE and jQuery <1.9
	_shouldFocusInput: function( inst ) {
		return inst.input && inst.input.is( ":visible" ) && !inst.input.is( ":disabled" ) && !inst.input.is( ":focus" );
	},

	/* Check positioning to remain on screen. */
	_checkOffset: function(inst, offset, isFixed) {
		var dpWidth = inst.dpDiv.outerWidth(),
			dpHeight = inst.dpDiv.outerHeight(),
			inputWidth = inst.input ? inst.input.outerWidth() : 0,
			inputHeight = inst.input ? inst.input.outerHeight() : 0,
			viewWidth = document.documentElement.clientWidth + (isFixed ? 0 : $(document).scrollLeft()),
			viewHeight = document.documentElement.clientHeight + (isFixed ? 0 : $(document).scrollTop());

		offset.left -= (this._get(inst, "isRTL") ? (dpWidth - inputWidth) : 0);
		offset.left -= (isFixed && offset.left === inst.input.offset().left) ? $(document).scrollLeft() : 0;
		offset.top -= (isFixed && offset.top === (inst.input.offset().top + inputHeight)) ? $(document).scrollTop() : 0;

		// now check if datepicker is showing outside window viewport - move to a better place if so.
		offset.left -= Math.min(offset.left, (offset.left + dpWidth > viewWidth && viewWidth > dpWidth) ?
			Math.abs(offset.left + dpWidth - viewWidth) : 0);
		offset.top -= Math.min(offset.top, (offset.top + dpHeight > viewHeight && viewHeight > dpHeight) ?
			Math.abs(dpHeight + inputHeight) : 0);

		return offset;
	},

	/* Find an object's position on the screen. */
	_findPos: function(obj) {
		var position,
			inst = this._getInst(obj),
			isRTL = this._get(inst, "isRTL");

		while (obj && (obj.type === "hidden" || obj.nodeType !== 1 || $.expr.filters.hidden(obj))) {
			obj = obj[isRTL ? "previousSibling" : "nextSibling"];
		}

		position = $(obj).offset();
		return [position.left, position.top];
	},

	/* Hide the date picker from view.
	 * @param  input  element - the input field attached to the date picker
	 */
	_hideDatepicker: function(input) {
		var showAnim, duration, postProcess, onClose,
			inst = this._curInst;

		if (!inst || (input && inst !== $.data(input, PROP_NAME))) {
			return;
		}

		if (this._datepickerShowing) {
			showAnim = this._get(inst, "showAnim");
			duration = this._get(inst, "duration");
			postProcess = function() {
				$.datepicker._tidyDialog(inst);
			};

			// DEPRECATED: after BC for 1.8.x $.effects[ showAnim ] is not needed
			if ( $.effects && ( $.effects.effect[ showAnim ] || $.effects[ showAnim ] ) ) {
				inst.dpDiv.hide(showAnim, $.datepicker._get(inst, "showOptions"), duration, postProcess);
			} else {
				inst.dpDiv[(showAnim === "slideDown" ? "slideUp" :
					(showAnim === "fadeIn" ? "fadeOut" : "hide"))]((showAnim ? duration : null), postProcess);
			}

			if (!showAnim) {
				postProcess();
			}
			this._datepickerShowing = false;

			onClose = this._get(inst, "onClose");
			if (onClose) {
				onClose.apply((inst.input ? inst.input[0] : null), [(inst.input ? inst.input.val() : ""), inst]);
			}

			this._lastInput = null;
			if (this._inDialog) {
				this._dialogInput.css({ position: "absolute", left: "0", top: "-100px" });
				if ($.blockUI) {
					$.unblockUI();
					$("body").append(this.dpDiv);
				}
			}
			this._inDialog = false;
		}
	},

	/* Tidy up after a dialog display. */
	_tidyDialog: function(inst) {
		inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar");
	},

	/* Close date picker if clicked elsewhere. */
	_checkExternalClick: function(event) {
		if (!$.datepicker._curInst) {
			return;
		}

		var $target = $(event.target),
			inst = $.datepicker._getInst($target[0]);

		if ( ( ( $target[0].id !== $.datepicker._mainDivId &&
				$target.parents("#" + $.datepicker._mainDivId).length === 0 &&
				!$target.hasClass($.datepicker.markerClassName) &&
				!$target.closest("." + $.datepicker._triggerClass).length &&
				$.datepicker._datepickerShowing && !($.datepicker._inDialog && $.blockUI) ) ) ||
			( $target.hasClass($.datepicker.markerClassName) && $.datepicker._curInst !== inst ) ) {
				$.datepicker._hideDatepicker();
		}
	},

	/* Adjust one of the date sub-fields. */
	_adjustDate: function(id, offset, period) {
		var target = $(id),
			inst = this._getInst(target[0]);

		if (this._isDisabledDatepicker(target[0])) {
			return;
		}
		this._adjustInstDate(inst, offset +
			(period === "M" ? this._get(inst, "showCurrentAtPos") : 0), // undo positioning
			period);
		this._updateDatepicker(inst);
	},

	/* Action for current link. */
	_gotoToday: function(id) {
		var date,
			target = $(id),
			inst = this._getInst(target[0]);

		if (this._get(inst, "gotoCurrent") && inst.currentDay) {
			inst.selectedDay = inst.currentDay;
			inst.drawMonth = inst.selectedMonth = inst.currentMonth;
			inst.drawYear = inst.selectedYear = inst.currentYear;
		} else {
			date = new Date();
			inst.selectedDay = date.getDate();
			inst.drawMonth = inst.selectedMonth = date.getMonth();
			inst.drawYear = inst.selectedYear = date.getFullYear();
		}
		this._notifyChange(inst);
		this._adjustDate(target);
	},

	/* Action for selecting a new month/year. */
	_selectMonthYear: function(id, select, period) {
		var target = $(id),
			inst = this._getInst(target[0]);

		inst["selected" + (period === "M" ? "Month" : "Year")] =
		inst["draw" + (period === "M" ? "Month" : "Year")] =
			parseInt(select.options[select.selectedIndex].value,10);

		this._notifyChange(inst);
		this._adjustDate(target);
	},

	/* Action for selecting a day. */
	_selectDay: function(id, month, year, td) {
		var inst,
			target = $(id);

		if ($(td).hasClass(this._unselectableClass) || this._isDisabledDatepicker(target[0])) {
			return;
		}

		inst = this._getInst(target[0]);
		inst.selectedDay = inst.currentDay = $("a", td).html();
		inst.selectedMonth = inst.currentMonth = month;
		inst.selectedYear = inst.currentYear = year;
		this._selectDate(id, this._formatDate(inst,
			inst.currentDay, inst.currentMonth, inst.currentYear));
	},

	/* Erase the input field and hide the date picker. */
	_clearDate: function(id) {
		var target = $(id);
		this._selectDate(target, "");
	},

	/* Update the input field with the selected date. */
	_selectDate: function(id, dateStr) {
		var onSelect,
			target = $(id),
			inst = this._getInst(target[0]);

		dateStr = (dateStr != null ? dateStr : this._formatDate(inst));
		if (inst.input) {
			inst.input.val(dateStr);
		}
		this._updateAlternate(inst);

		onSelect = this._get(inst, "onSelect");
		if (onSelect) {
			onSelect.apply((inst.input ? inst.input[0] : null), [dateStr, inst]);  // trigger custom callback
		} else if (inst.input) {
			inst.input.trigger("change"); // fire the change event
		}

		if (inst.inline){
			this._updateDatepicker(inst);
		} else {
			this._hideDatepicker();
			this._lastInput = inst.input[0];
			if (typeof(inst.input[0]) !== "object") {
				inst.input.focus(); // restore focus
			}
			this._lastInput = null;
		}
	},

	/* Update any alternate field to synchronise with the main field. */
	_updateAlternate: function(inst) {
		var altFormat, date, dateStr,
			altField = this._get(inst, "altField");

		if (altField) { // update alternate field too
			altFormat = this._get(inst, "altFormat") || this._get(inst, "dateFormat");
			date = this._getDate(inst);
			dateStr = this.formatDate(altFormat, date, this._getFormatConfig(inst));
			$(altField).each(function() { $(this).val(dateStr); });
		}
	},

	/* Set as beforeShowDay function to prevent selection of weekends.
	 * @param  date  Date - the date to customise
	 * @return [boolean, string] - is this date selectable?, what is its CSS class?
	 */
	noWeekends: function(date) {
		var day = date.getDay();
		return [(day > 0 && day < 6), ""];
	},

	/* Set as calculateWeek to determine the week of the year based on the ISO 8601 definition.
	 * @param  date  Date - the date to get the week for
	 * @return  number - the number of the week within the year that contains this date
	 */
	iso8601Week: function(date) {
		var time,
			checkDate = new Date(date.getTime());

		// Find Thursday of this week starting on Monday
		checkDate.setDate(checkDate.getDate() + 4 - (checkDate.getDay() || 7));

		time = checkDate.getTime();
		checkDate.setMonth(0); // Compare with Jan 1
		checkDate.setDate(1);
		return Math.floor(Math.round((time - checkDate) / 86400000) / 7) + 1;
	},

	/* Parse a string value into a date object.
	 * See formatDate below for the possible formats.
	 *
	 * @param  format string - the expected format of the date
	 * @param  value string - the date in the above format
	 * @param  settings Object - attributes include:
	 *					shortYearCutoff  number - the cutoff year for determining the century (optional)
	 *					dayNamesShort	string[7] - abbreviated names of the days from Sunday (optional)
	 *					dayNames		string[7] - names of the days from Sunday (optional)
	 *					monthNamesShort string[12] - abbreviated names of the months (optional)
	 *					monthNames		string[12] - names of the months (optional)
	 * @return  Date - the extracted date value or null if value is blank
	 */
	parseDate: function (format, value, settings) {
		if (format == null || value == null) {
			throw "Invalid arguments";
		}

		value = (typeof value === "object" ? value.toString() : value + "");
		if (value === "") {
			return null;
		}

		var iFormat, dim, extra,
			iValue = 0,
			shortYearCutoffTemp = (settings ? settings.shortYearCutoff : null) || this._defaults.shortYearCutoff,
			shortYearCutoff = (typeof shortYearCutoffTemp !== "string" ? shortYearCutoffTemp :
				new Date().getFullYear() % 100 + parseInt(shortYearCutoffTemp, 10)),
			dayNamesShort = (settings ? settings.dayNamesShort : null) || this._defaults.dayNamesShort,
			dayNames = (settings ? settings.dayNames : null) || this._defaults.dayNames,
			monthNamesShort = (settings ? settings.monthNamesShort : null) || this._defaults.monthNamesShort,
			monthNames = (settings ? settings.monthNames : null) || this._defaults.monthNames,
			year = -1,
			month = -1,
			day = -1,
			doy = -1,
			literal = false,
			date,
			// Check whether a format character is doubled
			lookAhead = function(match) {
				var matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);
				if (matches) {
					iFormat++;
				}
				return matches;
			},
			// Extract a number from the string value
			getNumber = function(match) {
				var isDoubled = lookAhead(match),
					size = (match === "@" ? 14 : (match === "!" ? 20 :
					(match === "y" && isDoubled ? 4 : (match === "o" ? 3 : 2)))),
					digits = new RegExp("^\\d{1," + size + "}"),
					num = value.substring(iValue).match(digits);
				if (!num) {
					throw "Missing number at position " + iValue;
				}
				iValue += num[0].length;
				return parseInt(num[0], 10);
			},
			// Extract a name from the string value and convert to an index
			getName = function(match, shortNames, longNames) {
				var index = -1,
					names = $.map(lookAhead(match) ? longNames : shortNames, function (v, k) {
						return [ [k, v] ];
					}).sort(function (a, b) {
						return -(a[1].length - b[1].length);
					});

				$.each(names, function (i, pair) {
					var name = pair[1];
					if (value.substr(iValue, name.length).toLowerCase() === name.toLowerCase()) {
						index = pair[0];
						iValue += name.length;
						return false;
					}
				});
				if (index !== -1) {
					return index + 1;
				} else {
					throw "Unknown name at position " + iValue;
				}
			},
			// Confirm that a literal character matches the string value
			checkLiteral = function() {
				if (value.charAt(iValue) !== format.charAt(iFormat)) {
					throw "Unexpected literal at position " + iValue;
				}
				iValue++;
			};

		for (iFormat = 0; iFormat < format.length; iFormat++) {
			if (literal) {
				if (format.charAt(iFormat) === "'" && !lookAhead("'")) {
					literal = false;
				} else {
					checkLiteral();
				}
			} else {
				switch (format.charAt(iFormat)) {
					case "d":
						day = getNumber("d");
						break;
					case "D":
						getName("D", dayNamesShort, dayNames);
						break;
					case "o":
						doy = getNumber("o");
						break;
					case "m":
						month = getNumber("m");
						break;
					case "M":
						month = getName("M", monthNamesShort, monthNames);
						break;
					case "y":
						year = getNumber("y");
						break;
					case "@":
						date = new Date(getNumber("@"));
						year = date.getFullYear();
						month = date.getMonth() + 1;
						day = date.getDate();
						break;
					case "!":
						date = new Date((getNumber("!") - this._ticksTo1970) / 10000);
						year = date.getFullYear();
						month = date.getMonth() + 1;
						day = date.getDate();
						break;
					case "'":
						if (lookAhead("'")){
							checkLiteral();
						} else {
							literal = true;
						}
						break;
					default:
						checkLiteral();
				}
			}
		}

		if (iValue < value.length){
			extra = value.substr(iValue);
			if (!/^\s+/.test(extra)) {
				throw "Extra/unparsed characters found in date: " + extra;
			}
		}

		if (year === -1) {
			year = new Date().getFullYear();
		} else if (year < 100) {
			year += new Date().getFullYear() - new Date().getFullYear() % 100 +
				(year <= shortYearCutoff ? 0 : -100);
		}

		if (doy > -1) {
			month = 1;
			day = doy;
			do {
				dim = this._getDaysInMonth(year, month - 1);
				if (day <= dim) {
					break;
				}
				month++;
				day -= dim;
			} while (true);
		}

		date = this._daylightSavingAdjust(new Date(year, month - 1, day));
		if (date.getFullYear() !== year || date.getMonth() + 1 !== month || date.getDate() !== day) {
			throw "Invalid date"; // E.g. 31/02/00
		}
		return date;
	},

	/* Standard date formats. */
	ATOM: "yy-mm-dd", // RFC 3339 (ISO 8601)
	COOKIE: "D, dd M yy",
	ISO_8601: "yy-mm-dd",
	RFC_822: "D, d M y",
	RFC_850: "DD, dd-M-y",
	RFC_1036: "D, d M y",
	RFC_1123: "D, d M yy",
	RFC_2822: "D, d M yy",
	RSS: "D, d M y", // RFC 822
	TICKS: "!",
	TIMESTAMP: "@",
	W3C: "yy-mm-dd", // ISO 8601

	_ticksTo1970: (((1970 - 1) * 365 + Math.floor(1970 / 4) - Math.floor(1970 / 100) +
		Math.floor(1970 / 400)) * 24 * 60 * 60 * 10000000),

	/* Format a date object into a string value.
	 * The format can be combinations of the following:
	 * d  - day of month (no leading zero)
	 * dd - day of month (two digit)
	 * o  - day of year (no leading zeros)
	 * oo - day of year (three digit)
	 * D  - day name short
	 * DD - day name long
	 * m  - month of year (no leading zero)
	 * mm - month of year (two digit)
	 * M  - month name short
	 * MM - month name long
	 * y  - year (two digit)
	 * yy - year (four digit)
	 * @ - Unix timestamp (ms since 01/01/1970)
	 * ! - Windows ticks (100ns since 01/01/0001)
	 * "..." - literal text
	 * '' - single quote
	 *
	 * @param  format string - the desired format of the date
	 * @param  date Date - the date value to format
	 * @param  settings Object - attributes include:
	 *					dayNamesShort	string[7] - abbreviated names of the days from Sunday (optional)
	 *					dayNames		string[7] - names of the days from Sunday (optional)
	 *					monthNamesShort string[12] - abbreviated names of the months (optional)
	 *					monthNames		string[12] - names of the months (optional)
	 * @return  string - the date in the above format
	 */
	formatDate: function (format, date, settings) {
		if (!date) {
			return "";
		}

		var iFormat,
			dayNamesShort = (settings ? settings.dayNamesShort : null) || this._defaults.dayNamesShort,
			dayNames = (settings ? settings.dayNames : null) || this._defaults.dayNames,
			monthNamesShort = (settings ? settings.monthNamesShort : null) || this._defaults.monthNamesShort,
			monthNames = (settings ? settings.monthNames : null) || this._defaults.monthNames,
			// Check whether a format character is doubled
			lookAhead = function(match) {
				var matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);
				if (matches) {
					iFormat++;
				}
				return matches;
			},
			// Format a number, with leading zero if necessary
			formatNumber = function(match, value, len) {
				var num = "" + value;
				if (lookAhead(match)) {
					while (num.length < len) {
						num = "0" + num;
					}
				}
				return num;
			},
			// Format a name, short or long as requested
			formatName = function(match, value, shortNames, longNames) {
				return (lookAhead(match) ? longNames[value] : shortNames[value]);
			},
			output = "",
			literal = false;

		if (date) {
			for (iFormat = 0; iFormat < format.length; iFormat++) {
				if (literal) {
					if (format.charAt(iFormat) === "'" && !lookAhead("'")) {
						literal = false;
					} else {
						output += format.charAt(iFormat);
					}
				} else {
					switch (format.charAt(iFormat)) {
						case "d":
							output += formatNumber("d", date.getDate(), 2);
							break;
						case "D":
							output += formatName("D", date.getDay(), dayNamesShort, dayNames);
							break;
						case "o":
							output += formatNumber("o",
								Math.round((new Date(date.getFullYear(), date.getMonth(), date.getDate()).getTime() - new Date(date.getFullYear(), 0, 0).getTime()) / 86400000), 3);
							break;
						case "m":
							output += formatNumber("m", date.getMonth() + 1, 2);
							break;
						case "M":
							output += formatName("M", date.getMonth(), monthNamesShort, monthNames);
							break;
						case "y":
							output += (lookAhead("y") ? date.getFullYear() :
								(date.getYear() % 100 < 10 ? "0" : "") + date.getYear() % 100);
							break;
						case "@":
							output += date.getTime();
							break;
						case "!":
							output += date.getTime() * 10000 + this._ticksTo1970;
							break;
						case "'":
							if (lookAhead("'")) {
								output += "'";
							} else {
								literal = true;
							}
							break;
						default:
							output += format.charAt(iFormat);
					}
				}
			}
		}
		return output;
	},

	/* Extract all possible characters from the date format. */
	_possibleChars: function (format) {
		var iFormat,
			chars = "",
			literal = false,
			// Check whether a format character is doubled
			lookAhead = function(match) {
				var matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);
				if (matches) {
					iFormat++;
				}
				return matches;
			};

		for (iFormat = 0; iFormat < format.length; iFormat++) {
			if (literal) {
				if (format.charAt(iFormat) === "'" && !lookAhead("'")) {
					literal = false;
				} else {
					chars += format.charAt(iFormat);
				}
			} else {
				switch (format.charAt(iFormat)) {
					case "d": case "m": case "y": case "@":
						chars += "0123456789";
						break;
					case "D": case "M":
						return null; // Accept anything
					case "'":
						if (lookAhead("'")) {
							chars += "'";
						} else {
							literal = true;
						}
						break;
					default:
						chars += format.charAt(iFormat);
				}
			}
		}
		return chars;
	},

	/* Get a setting value, defaulting if necessary. */
	_get: function(inst, name) {
		return inst.settings[name] !== undefined ?
			inst.settings[name] : this._defaults[name];
	},

	/* Parse existing date and initialise date picker. */
	_setDateFromField: function(inst, noDefault) {
		if (inst.input.val() === inst.lastVal) {
			return;
		}

		var dateFormat = this._get(inst, "dateFormat"),
			dates = inst.lastVal = inst.input ? inst.input.val() : null,
			defaultDate = this._getDefaultDate(inst),
			date = defaultDate,
			settings = this._getFormatConfig(inst);

		try {
			date = this.parseDate(dateFormat, dates, settings) || defaultDate;
		} catch (event) {
			dates = (noDefault ? "" : dates);
		}
		inst.selectedDay = date.getDate();
		inst.drawMonth = inst.selectedMonth = date.getMonth();
		inst.drawYear = inst.selectedYear = date.getFullYear();
		inst.currentDay = (dates ? date.getDate() : 0);
		inst.currentMonth = (dates ? date.getMonth() : 0);
		inst.currentYear = (dates ? date.getFullYear() : 0);
		this._adjustInstDate(inst);
	},

	/* Retrieve the default date shown on opening. */
	_getDefaultDate: function(inst) {
		return this._restrictMinMax(inst,
			this._determineDate(inst, this._get(inst, "defaultDate"), new Date()));
	},

	/* A date may be specified as an exact value or a relative one. */
	_determineDate: function(inst, date, defaultDate) {
		var offsetNumeric = function(offset) {
				var date = new Date();
				date.setDate(date.getDate() + offset);
				return date;
			},
			offsetString = function(offset) {
				try {
					return $.datepicker.parseDate($.datepicker._get(inst, "dateFormat"),
						offset, $.datepicker._getFormatConfig(inst));
				}
				catch (e) {
					// Ignore
				}

				var date = (offset.toLowerCase().match(/^c/) ?
					$.datepicker._getDate(inst) : null) || new Date(),
					year = date.getFullYear(),
					month = date.getMonth(),
					day = date.getDate(),
					pattern = /([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,
					matches = pattern.exec(offset);

				while (matches) {
					switch (matches[2] || "d") {
						case "d" : case "D" :
							day += parseInt(matches[1],10); break;
						case "w" : case "W" :
							day += parseInt(matches[1],10) * 7; break;
						case "m" : case "M" :
							month += parseInt(matches[1],10);
							day = Math.min(day, $.datepicker._getDaysInMonth(year, month));
							break;
						case "y": case "Y" :
							year += parseInt(matches[1],10);
							day = Math.min(day, $.datepicker._getDaysInMonth(year, month));
							break;
					}
					matches = pattern.exec(offset);
				}
				return new Date(year, month, day);
			},
			newDate = (date == null || date === "" ? defaultDate : (typeof date === "string" ? offsetString(date) :
				(typeof date === "number" ? (isNaN(date) ? defaultDate : offsetNumeric(date)) : new Date(date.getTime()))));

		newDate = (newDate && newDate.toString() === "Invalid Date" ? defaultDate : newDate);
		if (newDate) {
			newDate.setHours(0);
			newDate.setMinutes(0);
			newDate.setSeconds(0);
			newDate.setMilliseconds(0);
		}
		return this._daylightSavingAdjust(newDate);
	},

	/* Handle switch to/from daylight saving.
	 * Hours may be non-zero on daylight saving cut-over:
	 * > 12 when midnight changeover, but then cannot generate
	 * midnight datetime, so jump to 1AM, otherwise reset.
	 * @param  date  (Date) the date to check
	 * @return  (Date) the corrected date
	 */
	_daylightSavingAdjust: function(date) {
		if (!date) {
			return null;
		}
		date.setHours(date.getHours() > 12 ? date.getHours() + 2 : 0);
		return date;
	},

	/* Set the date(s) directly. */
	_setDate: function(inst, date, noChange) {
		var clear = !date,
			origMonth = inst.selectedMonth,
			origYear = inst.selectedYear,
			newDate = this._restrictMinMax(inst, this._determineDate(inst, date, new Date()));

		inst.selectedDay = inst.currentDay = newDate.getDate();
		inst.drawMonth = inst.selectedMonth = inst.currentMonth = newDate.getMonth();
		inst.drawYear = inst.selectedYear = inst.currentYear = newDate.getFullYear();
		if ((origMonth !== inst.selectedMonth || origYear !== inst.selectedYear) && !noChange) {
			this._notifyChange(inst);
		}
		this._adjustInstDate(inst);
		if (inst.input) {
			inst.input.val(clear ? "" : this._formatDate(inst));
		}
	},

	/* Retrieve the date(s) directly. */
	_getDate: function(inst) {
		var startDate = (!inst.currentYear || (inst.input && inst.input.val() === "") ? null :
			this._daylightSavingAdjust(new Date(
			inst.currentYear, inst.currentMonth, inst.currentDay)));
			return startDate;
	},

	/* Attach the onxxx handlers.  These are declared statically so
	 * they work with static code transformers like Caja.
	 */
	_attachHandlers: function(inst) {
		var stepMonths = this._get(inst, "stepMonths"),
			id = "#" + inst.id.replace( /\\\\/g, "\\" );
		inst.dpDiv.find("[data-handler]").map(function () {
			var handler = {
				prev: function () {
					$.datepicker._adjustDate(id, -stepMonths, "M");
				},
				next: function () {
					$.datepicker._adjustDate(id, +stepMonths, "M");
				},
				hide: function () {
					$.datepicker._hideDatepicker();
				},
				today: function () {
					$.datepicker._gotoToday(id);
				},
				selectDay: function () {
					$.datepicker._selectDay(id, +this.getAttribute("data-month"), +this.getAttribute("data-year"), this);
					return false;
				},
				selectMonth: function () {
					$.datepicker._selectMonthYear(id, this, "M");
					return false;
				},
				selectYear: function () {
					$.datepicker._selectMonthYear(id, this, "Y");
					return false;
				}
			};
			$(this).bind(this.getAttribute("data-event"), handler[this.getAttribute("data-handler")]);
		});
	},

	/* Generate the HTML for the current state of the date picker. */
	_generateHTML: function(inst) {
		var maxDraw, prevText, prev, nextText, next, currentText, gotoDate,
			controls, buttonPanel, firstDay, showWeek, dayNames, dayNamesMin,
			monthNames, monthNamesShort, beforeShowDay, showOtherMonths,
			selectOtherMonths, defaultDate, html, dow, row, group, col, selectedDate,
			cornerClass, calender, thead, day, daysInMonth, leadDays, curRows, numRows,
			printDate, dRow, tbody, daySettings, otherMonth, unselectable,
			tempDate = new Date(),
			today = this._daylightSavingAdjust(
				new Date(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate())), // clear time
			isRTL = this._get(inst, "isRTL"),
			showButtonPanel = this._get(inst, "showButtonPanel"),
			hideIfNoPrevNext = this._get(inst, "hideIfNoPrevNext"),
			navigationAsDateFormat = this._get(inst, "navigationAsDateFormat"),
			numMonths = this._getNumberOfMonths(inst),
			showCurrentAtPos = this._get(inst, "showCurrentAtPos"),
			stepMonths = this._get(inst, "stepMonths"),
			isMultiMonth = (numMonths[0] !== 1 || numMonths[1] !== 1),
			currentDate = this._daylightSavingAdjust((!inst.currentDay ? new Date(9999, 9, 9) :
				new Date(inst.currentYear, inst.currentMonth, inst.currentDay))),
			minDate = this._getMinMaxDate(inst, "min"),
			maxDate = this._getMinMaxDate(inst, "max"),
			drawMonth = inst.drawMonth - showCurrentAtPos,
			drawYear = inst.drawYear;

		if (drawMonth < 0) {
			drawMonth += 12;
			drawYear--;
		}
		if (maxDate) {
			maxDraw = this._daylightSavingAdjust(new Date(maxDate.getFullYear(),
				maxDate.getMonth() - (numMonths[0] * numMonths[1]) + 1, maxDate.getDate()));
			maxDraw = (minDate && maxDraw < minDate ? minDate : maxDraw);
			while (this._daylightSavingAdjust(new Date(drawYear, drawMonth, 1)) > maxDraw) {
				drawMonth--;
				if (drawMonth < 0) {
					drawMonth = 11;
					drawYear--;
				}
			}
		}
		inst.drawMonth = drawMonth;
		inst.drawYear = drawYear;

		prevText = this._get(inst, "prevText");
		prevText = (!navigationAsDateFormat ? prevText : this.formatDate(prevText,
			this._daylightSavingAdjust(new Date(drawYear, drawMonth - stepMonths, 1)),
			this._getFormatConfig(inst)));

		prev = (this._canAdjustMonth(inst, -1, drawYear, drawMonth) ?
			"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'" +
			" title='" + prevText + "'><span class='ui-icon ui-icon-circle-triangle-" + ( isRTL ? "e" : "w") + "'>" + prevText + "</span></a>" :
			(hideIfNoPrevNext ? "" : "<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+ prevText +"'><span class='ui-icon ui-icon-circle-triangle-" + ( isRTL ? "e" : "w") + "'>" + prevText + "</span></a>"));

		nextText = this._get(inst, "nextText");
		nextText = (!navigationAsDateFormat ? nextText : this.formatDate(nextText,
			this._daylightSavingAdjust(new Date(drawYear, drawMonth + stepMonths, 1)),
			this._getFormatConfig(inst)));

		next = (this._canAdjustMonth(inst, +1, drawYear, drawMonth) ?
			"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'" +
			" title='" + nextText + "'><span class='ui-icon ui-icon-circle-triangle-" + ( isRTL ? "w" : "e") + "'>" + nextText + "</span></a>" :
			(hideIfNoPrevNext ? "" : "<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+ nextText + "'><span class='ui-icon ui-icon-circle-triangle-" + ( isRTL ? "w" : "e") + "'>" + nextText + "</span></a>"));

		currentText = this._get(inst, "currentText");
		gotoDate = (this._get(inst, "gotoCurrent") && inst.currentDay ? currentDate : today);
		currentText = (!navigationAsDateFormat ? currentText :
			this.formatDate(currentText, gotoDate, this._getFormatConfig(inst)));

		controls = (!inst.inline ? "<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>" +
			this._get(inst, "closeText") + "</button>" : "");

		buttonPanel = (showButtonPanel) ? "<div class='ui-datepicker-buttonpane ui-widget-content'>" + (isRTL ? controls : "") +
			(this._isInRange(inst, gotoDate) ? "<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'" +
			">" + currentText + "</button>" : "") + (isRTL ? "" : controls) + "</div>" : "";

		firstDay = parseInt(this._get(inst, "firstDay"),10);
		firstDay = (isNaN(firstDay) ? 0 : firstDay);

		showWeek = this._get(inst, "showWeek");
		dayNames = this._get(inst, "dayNames");
		dayNamesMin = this._get(inst, "dayNamesMin");
		monthNames = this._get(inst, "monthNames");
		monthNamesShort = this._get(inst, "monthNamesShort");
		beforeShowDay = this._get(inst, "beforeShowDay");
		showOtherMonths = this._get(inst, "showOtherMonths");
		selectOtherMonths = this._get(inst, "selectOtherMonths");
		defaultDate = this._getDefaultDate(inst);
		html = "";
		dow;
		for (row = 0; row < numMonths[0]; row++) {
			group = "";
			this.maxRows = 4;
			for (col = 0; col < numMonths[1]; col++) {
				selectedDate = this._daylightSavingAdjust(new Date(drawYear, drawMonth, inst.selectedDay));
				cornerClass = " ui-corner-all";
				calender = "";
				if (isMultiMonth) {
					calender += "<div class='ui-datepicker-group";
					if (numMonths[1] > 1) {
						switch (col) {
							case 0: calender += " ui-datepicker-group-first";
								cornerClass = " ui-corner-" + (isRTL ? "right" : "left"); break;
							case numMonths[1]-1: calender += " ui-datepicker-group-last";
								cornerClass = " ui-corner-" + (isRTL ? "left" : "right"); break;
							default: calender += " ui-datepicker-group-middle"; cornerClass = ""; break;
						}
					}
					calender += "'>";
				}
				calender += "<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix" + cornerClass + "'>" +
					(/all|left/.test(cornerClass) && row === 0 ? (isRTL ? next : prev) : "") +
					(/all|right/.test(cornerClass) && row === 0 ? (isRTL ? prev : next) : "") +
					this._generateMonthYearHeader(inst, drawMonth, drawYear, minDate, maxDate,
					row > 0 || col > 0, monthNames, monthNamesShort) + // draw month headers
					"</div><table class='ui-datepicker-calendar'><thead>" +
					"<tr>";
				thead = (showWeek ? "<th class='ui-datepicker-week-col'>" + this._get(inst, "weekHeader") + "</th>" : "");
				for (dow = 0; dow < 7; dow++) { // days of the week
					day = (dow + firstDay) % 7;
					thead += "<th" + ((dow + firstDay + 6) % 7 >= 5 ? " class='ui-datepicker-week-end'" : "") + ">" +
						"<span title='" + dayNames[day] + "'>" + dayNamesMin[day] + "</span></th>";
				}
				calender += thead + "</tr></thead><tbody>";
				daysInMonth = this._getDaysInMonth(drawYear, drawMonth);
				if (drawYear === inst.selectedYear && drawMonth === inst.selectedMonth) {
					inst.selectedDay = Math.min(inst.selectedDay, daysInMonth);
				}
				leadDays = (this._getFirstDayOfMonth(drawYear, drawMonth) - firstDay + 7) % 7;
				curRows = Math.ceil((leadDays + daysInMonth) / 7); // calculate the number of rows to generate
				numRows = (isMultiMonth ? this.maxRows > curRows ? this.maxRows : curRows : curRows); //If multiple months, use the higher number of rows (see #7043)
				this.maxRows = numRows;
				printDate = this._daylightSavingAdjust(new Date(drawYear, drawMonth, 1 - leadDays));
				for (dRow = 0; dRow < numRows; dRow++) { // create date picker rows
					calender += "<tr>";
					tbody = (!showWeek ? "" : "<td class='ui-datepicker-week-col'>" +
						this._get(inst, "calculateWeek")(printDate) + "</td>");
					for (dow = 0; dow < 7; dow++) { // create date picker days
						daySettings = (beforeShowDay ?
							beforeShowDay.apply((inst.input ? inst.input[0] : null), [printDate]) : [true, ""]);
						otherMonth = (printDate.getMonth() !== drawMonth);
						unselectable = (otherMonth && !selectOtherMonths) || !daySettings[0] ||
							(minDate && printDate < minDate) || (maxDate && printDate > maxDate);
						tbody += "<td class='" +
							((dow + firstDay + 6) % 7 >= 5 ? " ui-datepicker-week-end" : "") + // highlight weekends
							(otherMonth ? " ui-datepicker-other-month" : "") + // highlight days from other months
							((printDate.getTime() === selectedDate.getTime() && drawMonth === inst.selectedMonth && inst._keyEvent) || // user pressed key
							(defaultDate.getTime() === printDate.getTime() && defaultDate.getTime() === selectedDate.getTime()) ?
							// or defaultDate is current printedDate and defaultDate is selectedDate
							" " + this._dayOverClass : "") + // highlight selected day
							(unselectable ? " " + this._unselectableClass + " ui-state-disabled": "") +  // highlight unselectable days
							(otherMonth && !showOtherMonths ? "" : " " + daySettings[1] + // highlight custom dates
							(printDate.getTime() === currentDate.getTime() ? " " + this._currentClass : "") + // highlight selected day
							(printDate.getTime() === today.getTime() ? " ui-datepicker-today" : "")) + "'" + // highlight today (if different)
							((!otherMonth || showOtherMonths) && daySettings[2] ? " title='" + daySettings[2].replace(/'/g, "&#39;") + "'" : "") + // cell title
							(unselectable ? "" : " data-handler='selectDay' data-event='click' data-month='" + printDate.getMonth() + "' data-year='" + printDate.getFullYear() + "'") + ">" + // actions
							(otherMonth && !showOtherMonths ? "&#xa0;" : // display for other months
							(unselectable ? "<span class='ui-state-default'>" + printDate.getDate() + "</span>" : "<a class='ui-state-default" +
							(printDate.getTime() === today.getTime() ? " ui-state-highlight" : "") +
							(printDate.getTime() === currentDate.getTime() ? " ui-state-active" : "") + // highlight selected day
							(otherMonth ? " ui-priority-secondary" : "") + // distinguish dates from other months
							"' href='#'>" + printDate.getDate() + "</a>")) + "</td>"; // display selectable date
						printDate.setDate(printDate.getDate() + 1);
						printDate = this._daylightSavingAdjust(printDate);
					}
					calender += tbody + "</tr>";
				}
				drawMonth++;
				if (drawMonth > 11) {
					drawMonth = 0;
					drawYear++;
				}
				calender += "</tbody></table>" + (isMultiMonth ? "</div>" +
							((numMonths[0] > 0 && col === numMonths[1]-1) ? "<div class='ui-datepicker-row-break'></div>" : "") : "");
				group += calender;
			}
			html += group;
		}
		html += buttonPanel;
		inst._keyEvent = false;
		return html;
	},

	/* Generate the month and year header. */
	_generateMonthYearHeader: function(inst, drawMonth, drawYear, minDate, maxDate,
			secondary, monthNames, monthNamesShort) {

		var inMinYear, inMaxYear, month, years, thisYear, determineYear, year, endYear,
			changeMonth = this._get(inst, "changeMonth"),
			changeYear = this._get(inst, "changeYear"),
			showMonthAfterYear = this._get(inst, "showMonthAfterYear"),
			html = "<div class='ui-datepicker-title'>",
			monthHtml = "";

		// month selection
		if (secondary || !changeMonth) {
			monthHtml += "<span class='ui-datepicker-month'>" + monthNames[drawMonth] + "</span>";
		} else {
			inMinYear = (minDate && minDate.getFullYear() === drawYear);
			inMaxYear = (maxDate && maxDate.getFullYear() === drawYear);
			monthHtml += "<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";
			for ( month = 0; month < 12; month++) {
				if ((!inMinYear || month >= minDate.getMonth()) && (!inMaxYear || month <= maxDate.getMonth())) {
					monthHtml += "<option value='" + month + "'" +
						(month === drawMonth ? " selected='selected'" : "") +
						">" + monthNamesShort[month] + "</option>";
				}
			}
			monthHtml += "</select>";
		}

		if (!showMonthAfterYear) {
			html += monthHtml + (secondary || !(changeMonth && changeYear) ? "&#xa0;" : "");
		}

		// year selection
		if ( !inst.yearshtml ) {
			inst.yearshtml = "";
			if (secondary || !changeYear) {
				html += "<span class='ui-datepicker-year'>" + drawYear + "</span>";
			} else {
				// determine range of years to display
				years = this._get(inst, "yearRange").split(":");
				thisYear = new Date().getFullYear();
				determineYear = function(value) {
					var year = (value.match(/c[+\-].*/) ? drawYear + parseInt(value.substring(1), 10) :
						(value.match(/[+\-].*/) ? thisYear + parseInt(value, 10) :
						parseInt(value, 10)));
					return (isNaN(year) ? thisYear : year);
				};
				year = determineYear(years[0]);
				endYear = Math.max(year, determineYear(years[1] || ""));
				year = (minDate ? Math.max(year, minDate.getFullYear()) : year);
				endYear = (maxDate ? Math.min(endYear, maxDate.getFullYear()) : endYear);
				inst.yearshtml += "<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";
				for (; year <= endYear; year++) {
					inst.yearshtml += "<option value='" + year + "'" +
						(year === drawYear ? " selected='selected'" : "") +
						">" + year + "</option>";
				}
				inst.yearshtml += "</select>";

				html += inst.yearshtml;
				inst.yearshtml = null;
			}
		}

		html += this._get(inst, "yearSuffix");
		if (showMonthAfterYear) {
			html += (secondary || !(changeMonth && changeYear) ? "&#xa0;" : "") + monthHtml;
		}
		html += "</div>"; // Close datepicker_header
		return html;
	},

	/* Adjust one of the date sub-fields. */
	_adjustInstDate: function(inst, offset, period) {
		var year = inst.drawYear + (period === "Y" ? offset : 0),
			month = inst.drawMonth + (period === "M" ? offset : 0),
			day = Math.min(inst.selectedDay, this._getDaysInMonth(year, month)) + (period === "D" ? offset : 0),
			date = this._restrictMinMax(inst, this._daylightSavingAdjust(new Date(year, month, day)));

		inst.selectedDay = date.getDate();
		inst.drawMonth = inst.selectedMonth = date.getMonth();
		inst.drawYear = inst.selectedYear = date.getFullYear();
		if (period === "M" || period === "Y") {
			this._notifyChange(inst);
		}
	},

	/* Ensure a date is within any min/max bounds. */
	_restrictMinMax: function(inst, date) {
		var minDate = this._getMinMaxDate(inst, "min"),
			maxDate = this._getMinMaxDate(inst, "max"),
			newDate = (minDate && date < minDate ? minDate : date);
		return (maxDate && newDate > maxDate ? maxDate : newDate);
	},

	/* Notify change of month/year. */
	_notifyChange: function(inst) {
		var onChange = this._get(inst, "onChangeMonthYear");
		if (onChange) {
			onChange.apply((inst.input ? inst.input[0] : null),
				[inst.selectedYear, inst.selectedMonth + 1, inst]);
		}
	},

	/* Determine the number of months to show. */
	_getNumberOfMonths: function(inst) {
		var numMonths = this._get(inst, "numberOfMonths");
		return (numMonths == null ? [1, 1] : (typeof numMonths === "number" ? [1, numMonths] : numMonths));
	},

	/* Determine the current maximum date - ensure no time components are set. */
	_getMinMaxDate: function(inst, minMax) {
		return this._determineDate(inst, this._get(inst, minMax + "Date"), null);
	},

	/* Find the number of days in a given month. */
	_getDaysInMonth: function(year, month) {
		return 32 - this._daylightSavingAdjust(new Date(year, month, 32)).getDate();
	},

	/* Find the day of the week of the first of a month. */
	_getFirstDayOfMonth: function(year, month) {
		return new Date(year, month, 1).getDay();
	},

	/* Determines if we should allow a "next/prev" month display change. */
	_canAdjustMonth: function(inst, offset, curYear, curMonth) {
		var numMonths = this._getNumberOfMonths(inst),
			date = this._daylightSavingAdjust(new Date(curYear,
			curMonth + (offset < 0 ? offset : numMonths[0] * numMonths[1]), 1));

		if (offset < 0) {
			date.setDate(this._getDaysInMonth(date.getFullYear(), date.getMonth()));
		}
		return this._isInRange(inst, date);
	},

	/* Is the given date in the accepted range? */
	_isInRange: function(inst, date) {
		var yearSplit, currentYear,
			minDate = this._getMinMaxDate(inst, "min"),
			maxDate = this._getMinMaxDate(inst, "max"),
			minYear = null,
			maxYear = null,
			years = this._get(inst, "yearRange");
			if (years){
				yearSplit = years.split(":");
				currentYear = new Date().getFullYear();
				minYear = parseInt(yearSplit[0], 10);
				maxYear = parseInt(yearSplit[1], 10);
				if ( yearSplit[0].match(/[+\-].*/) ) {
					minYear += currentYear;
				}
				if ( yearSplit[1].match(/[+\-].*/) ) {
					maxYear += currentYear;
				}
			}

		return ((!minDate || date.getTime() >= minDate.getTime()) &&
			(!maxDate || date.getTime() <= maxDate.getTime()) &&
			(!minYear || date.getFullYear() >= minYear) &&
			(!maxYear || date.getFullYear() <= maxYear));
	},

	/* Provide the configuration settings for formatting/parsing. */
	_getFormatConfig: function(inst) {
		var shortYearCutoff = this._get(inst, "shortYearCutoff");
		shortYearCutoff = (typeof shortYearCutoff !== "string" ? shortYearCutoff :
			new Date().getFullYear() % 100 + parseInt(shortYearCutoff, 10));
		return {shortYearCutoff: shortYearCutoff,
			dayNamesShort: this._get(inst, "dayNamesShort"), dayNames: this._get(inst, "dayNames"),
			monthNamesShort: this._get(inst, "monthNamesShort"), monthNames: this._get(inst, "monthNames")};
	},

	/* Format the given date for display. */
	_formatDate: function(inst, day, month, year) {
		if (!day) {
			inst.currentDay = inst.selectedDay;
			inst.currentMonth = inst.selectedMonth;
			inst.currentYear = inst.selectedYear;
		}
		var date = (day ? (typeof day === "object" ? day :
			this._daylightSavingAdjust(new Date(year, month, day))) :
			this._daylightSavingAdjust(new Date(inst.currentYear, inst.currentMonth, inst.currentDay)));
		return this.formatDate(this._get(inst, "dateFormat"), date, this._getFormatConfig(inst));
	}
});

/*
 * Bind hover events for datepicker elements.
 * Done via delegate so the binding only occurs once in the lifetime of the parent div.
 * Global instActive, set by _updateDatepicker allows the handlers to find their way back to the active picker.
 */
function bindHover(dpDiv) {
	var selector = "button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";
	return dpDiv.delegate(selector, "mouseout", function() {
			$(this).removeClass("ui-state-hover");
			if (this.className.indexOf("ui-datepicker-prev") !== -1) {
				$(this).removeClass("ui-datepicker-prev-hover");
			}
			if (this.className.indexOf("ui-datepicker-next") !== -1) {
				$(this).removeClass("ui-datepicker-next-hover");
			}
		})
		.delegate(selector, "mouseover", function(){
			if (!$.datepicker._isDisabledDatepicker( instActive.inline ? dpDiv.parent()[0] : instActive.input[0])) {
				$(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");
				$(this).addClass("ui-state-hover");
				if (this.className.indexOf("ui-datepicker-prev") !== -1) {
					$(this).addClass("ui-datepicker-prev-hover");
				}
				if (this.className.indexOf("ui-datepicker-next") !== -1) {
					$(this).addClass("ui-datepicker-next-hover");
				}
			}
		});
}

/* jQuery extend now ignores nulls! */
function extendRemove(target, props) {
	$.extend(target, props);
	for (var name in props) {
		if (props[name] == null) {
			target[name] = props[name];
		}
	}
	return target;
}

/* Invoke the datepicker functionality.
   @param  options  string - a command, optionally followed by additional parameters or
					Object - settings for attaching new datepicker functionality
   @return  jQuery object */
$.fn.datepicker = function(options){

	/* Verify an empty collection wasn't passed - Fixes #6976 */
	if ( !this.length ) {
		return this;
	}

	/* Initialise the date picker. */
	if (!$.datepicker.initialized) {
		$(document).mousedown($.datepicker._checkExternalClick);
		$.datepicker.initialized = true;
	}

	/* Append datepicker main container to body if not exist. */
	if ($("#"+$.datepicker._mainDivId).length === 0) {
		$("body").append($.datepicker.dpDiv);
	}

	var otherArgs = Array.prototype.slice.call(arguments, 1);
	if (typeof options === "string" && (options === "isDisabled" || options === "getDate" || options === "widget")) {
		return $.datepicker["_" + options + "Datepicker"].
			apply($.datepicker, [this[0]].concat(otherArgs));
	}
	if (options === "option" && arguments.length === 2 && typeof arguments[1] === "string") {
		return $.datepicker["_" + options + "Datepicker"].
			apply($.datepicker, [this[0]].concat(otherArgs));
	}
	return this.each(function() {
		typeof options === "string" ?
			$.datepicker["_" + options + "Datepicker"].
				apply($.datepicker, [this].concat(otherArgs)) :
			$.datepicker._attachDatepicker(this, options);
	});
};

$.datepicker = new Datepicker(); // singleton instance
$.datepicker.initialized = false;
$.datepicker.uuid = new Date().getTime();
$.datepicker.version = "1.10.3";

})(jQuery);

(function( $, undefined ) {

var sizeRelatedOptions = {
		buttons: true,
		height: true,
		maxHeight: true,
		maxWidth: true,
		minHeight: true,
		minWidth: true,
		width: true
	},
	resizableRelatedOptions = {
		maxHeight: true,
		maxWidth: true,
		minHeight: true,
		minWidth: true
	};

$.widget( "ui.dialog", {
	version: "1.10.3",
	options: {
		appendTo: "body",
		autoOpen: true,
		buttons: [],
		closeOnEscape: true,
		closeText: "close",
		dialogClass: "",
		draggable: true,
		hide: null,
		height: "auto",
		maxHeight: null,
		maxWidth: null,
		minHeight: 150,
		minWidth: 150,
		modal: false,
		position: {
			my: "center",
			at: "center",
			of: window,
			collision: "fit",
			// Ensure the titlebar is always visible
			using: function( pos ) {
				var topOffset = $( this ).css( pos ).offset().top;
				if ( topOffset < 0 ) {
					$( this ).css( "top", pos.top - topOffset );
				}
			}
		},
		resizable: true,
		show: null,
		title: null,
		width: 300,

		// callbacks
		beforeClose: null,
		close: null,
		drag: null,
		dragStart: null,
		dragStop: null,
		focus: null,
		open: null,
		resize: null,
		resizeStart: null,
		resizeStop: null
	},

	_create: function() {
		this.originalCss = {
			display: this.element[0].style.display,
			width: this.element[0].style.width,
			minHeight: this.element[0].style.minHeight,
			maxHeight: this.element[0].style.maxHeight,
			height: this.element[0].style.height
		};
		this.originalPosition = {
			parent: this.element.parent(),
			index: this.element.parent().children().index( this.element )
		};
		this.originalTitle = this.element.attr("title");
		this.options.title = this.options.title || this.originalTitle;

		this._createWrapper();

		this.element
			.show()
			.removeAttr("title")
			.addClass("ui-dialog-content ui-widget-content")
			.appendTo( this.uiDialog );

		this._createTitlebar();
		this._createButtonPane();

		if ( this.options.draggable && $.fn.draggable ) {
			this._makeDraggable();
		}
		if ( this.options.resizable && $.fn.resizable ) {
			this._makeResizable();
		}

		this._isOpen = false;
	},

	_init: function() {
		if ( this.options.autoOpen ) {
			this.open();
		}
	},

	_appendTo: function() {
		var element = this.options.appendTo;
		if ( element && (element.jquery || element.nodeType) ) {
			return $( element );
		}
		return this.document.find( element || "body" ).eq( 0 );
	},

	_destroy: function() {
		var next,
			originalPosition = this.originalPosition;

		this._destroyOverlay();

		this.element
			.removeUniqueId()
			.removeClass("ui-dialog-content ui-widget-content")
			.css( this.originalCss )
			// Without detaching first, the following becomes really slow
			.detach();

		this.uiDialog.stop( true, true ).remove();

		if ( this.originalTitle ) {
			this.element.attr( "title", this.originalTitle );
		}

		next = originalPosition.parent.children().eq( originalPosition.index );
		// Don't try to place the dialog next to itself (#8613)
		if ( next.length && next[0] !== this.element[0] ) {
			next.before( this.element );
		} else {
			originalPosition.parent.append( this.element );
		}
	},

	widget: function() {
		return this.uiDialog;
	},

	disable: $.noop,
	enable: $.noop,

	close: function( event ) {
		var that = this;

		if ( !this._isOpen || this._trigger( "beforeClose", event ) === false ) {
			return;
		}

		this._isOpen = false;
		this._destroyOverlay();

		if ( !this.opener.filter(":focusable").focus().length ) {
			// Hiding a focused element doesn't trigger blur in WebKit
			// so in case we have nothing to focus on, explicitly blur the active element
			// https://bugs.webkit.org/show_bug.cgi?id=47182
			$( this.document[0].activeElement ).blur();
		}

		this._hide( this.uiDialog, this.options.hide, function() {
			that._trigger( "close", event );
		});
	},

	isOpen: function() {
		return this._isOpen;
	},

	moveToTop: function() {
		this._moveToTop();
	},

	_moveToTop: function( event, silent ) {
		var moved = !!this.uiDialog.nextAll(":visible").insertBefore( this.uiDialog ).length;
		if ( moved && !silent ) {
			this._trigger( "focus", event );
		}
		return moved;
	},

	open: function() {
		var that = this;
		if ( this._isOpen ) {
			if ( this._moveToTop() ) {
				this._focusTabbable();
			}
			return;
		}

		this._isOpen = true;
		this.opener = $( this.document[0].activeElement );

		this._size();
		this._position();
		this._createOverlay();
		this._moveToTop( null, true );
		this._show( this.uiDialog, this.options.show, function() {
			that._focusTabbable();
			that._trigger("focus");
		});

		this._trigger("open");
	},

	_focusTabbable: function() {
		// Set focus to the first match:
		// 1. First element inside the dialog matching [autofocus]
		// 2. Tabbable element inside the content element
		// 3. Tabbable element inside the buttonpane
		// 4. The close button
		// 5. The dialog itself
		var hasFocus = this.element.find("[autofocus]");
		if ( !hasFocus.length ) {
			hasFocus = this.element.find(":tabbable");
		}
		if ( !hasFocus.length ) {
			hasFocus = this.uiDialogButtonPane.find(":tabbable");
		}
		if ( !hasFocus.length ) {
			hasFocus = this.uiDialogTitlebarClose.filter(":tabbable");
		}
		if ( !hasFocus.length ) {
			hasFocus = this.uiDialog;
		}
		hasFocus.eq( 0 ).focus();
	},

	_keepFocus: function( event ) {
		function checkFocus() {
			var activeElement = this.document[0].activeElement,
				isActive = this.uiDialog[0] === activeElement ||
					$.contains( this.uiDialog[0], activeElement );
			if ( !isActive ) {
				this._focusTabbable();
			}
		}
		event.preventDefault();
		checkFocus.call( this );
		// support: IE
		// IE <= 8 doesn't prevent moving focus even with event.preventDefault()
		// so we check again later
		this._delay( checkFocus );
	},

	_createWrapper: function() {
		this.uiDialog = $("<div>")
			.addClass( "ui-dialog ui-widget ui-widget-content ui-corner-all ui-front " +
				this.options.dialogClass )
			.hide()
			.attr({
				// Setting tabIndex makes the div focusable
				tabIndex: -1,
				role: "dialog"
			})
			.appendTo( this._appendTo() );

		this._on( this.uiDialog, {
			keydown: function( event ) {
				if ( this.options.closeOnEscape && !event.isDefaultPrevented() && event.keyCode &&
						event.keyCode === $.ui.keyCode.ESCAPE ) {
					event.preventDefault();
					this.close( event );
					return;
				}

				// prevent tabbing out of dialogs
				if ( event.keyCode !== $.ui.keyCode.TAB ) {
					return;
				}
				var tabbables = this.uiDialog.find(":tabbable"),
					first = tabbables.filter(":first"),
					last  = tabbables.filter(":last");

				if ( ( event.target === last[0] || event.target === this.uiDialog[0] ) && !event.shiftKey ) {
					first.focus( 1 );
					event.preventDefault();
				} else if ( ( event.target === first[0] || event.target === this.uiDialog[0] ) && event.shiftKey ) {
					last.focus( 1 );
					event.preventDefault();
				}
			},
			mousedown: function( event ) {
				if ( this._moveToTop( event ) ) {
					this._focusTabbable();
				}
			}
		});

		// We assume that any existing aria-describedby attribute means
		// that the dialog content is marked up properly
		// otherwise we brute force the content as the description
		if ( !this.element.find("[aria-describedby]").length ) {
			this.uiDialog.attr({
				"aria-describedby": this.element.uniqueId().attr("id")
			});
		}
	},

	_createTitlebar: function() {
		var uiDialogTitle;

		this.uiDialogTitlebar = $("<div>")
			.addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix")
			.prependTo( this.uiDialog );
		this._on( this.uiDialogTitlebar, {
			mousedown: function( event ) {
				// Don't prevent click on close button (#8838)
				// Focusing a dialog that is partially scrolled out of view
				// causes the browser to scroll it into view, preventing the click event
				if ( !$( event.target ).closest(".ui-dialog-titlebar-close") ) {
					// Dialog isn't getting focus when dragging (#8063)
					this.uiDialog.focus();
				}
			}
		});

		this.uiDialogTitlebarClose = $("<button></button>")
			.button({
				label: this.options.closeText,
				icons: {
					primary: "ui-icon-closethick"
				},
				text: false
			})
			.addClass("ui-dialog-titlebar-close")
			.appendTo( this.uiDialogTitlebar );
		this._on( this.uiDialogTitlebarClose, {
			click: function( event ) {
				event.preventDefault();
				this.close( event );
			}
		});

		uiDialogTitle = $("<span>")
			.uniqueId()
			.addClass("ui-dialog-title")
			.prependTo( this.uiDialogTitlebar );
		this._title( uiDialogTitle );

		this.uiDialog.attr({
			"aria-labelledby": uiDialogTitle.attr("id")
		});
	},

	_title: function( title ) {
		if ( !this.options.title ) {
			title.html("&#160;");
		}
		title.text( this.options.title );
	},

	_createButtonPane: function() {
		this.uiDialogButtonPane = $("<div>")
			.addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");

		this.uiButtonSet = $("<div>")
			.addClass("ui-dialog-buttonset")
			.appendTo( this.uiDialogButtonPane );

		this._createButtons();
	},

	_createButtons: function() {
		var that = this,
			buttons = this.options.buttons;

		// if we already have a button pane, remove it
		this.uiDialogButtonPane.remove();
		this.uiButtonSet.empty();

		if ( $.isEmptyObject( buttons ) || ($.isArray( buttons ) && !buttons.length) ) {
			this.uiDialog.removeClass("ui-dialog-buttons");
			return;
		}

		$.each( buttons, function( name, props ) {
			var click, buttonOptions;
			props = $.isFunction( props ) ?
				{ click: props, text: name } :
				props;
			// Default to a non-submitting button
			props = $.extend( { type: "button" }, props );
			// Change the context for the click callback to be the main element
			click = props.click;
			props.click = function() {
				click.apply( that.element[0], arguments );
			};
			buttonOptions = {
				icons: props.icons,
				text: props.showText
			};
			delete props.icons;
			delete props.showText;
			$( "<button></button>", props )
				.button( buttonOptions )
				.appendTo( that.uiButtonSet );
		});
		this.uiDialog.addClass("ui-dialog-buttons");
		this.uiDialogButtonPane.appendTo( this.uiDialog );
	},

	_makeDraggable: function() {
		var that = this,
			options = this.options;

		function filteredUi( ui ) {
			return {
				position: ui.position,
				offset: ui.offset
			};
		}

		this.uiDialog.draggable({
			cancel: ".ui-dialog-content, .ui-dialog-titlebar-close",
			handle: ".ui-dialog-titlebar",
			containment: "document",
			start: function( event, ui ) {
				$( this ).addClass("ui-dialog-dragging");
				that._blockFrames();
				that._trigger( "dragStart", event, filteredUi( ui ) );
			},
			drag: function( event, ui ) {
				that._trigger( "drag", event, filteredUi( ui ) );
			},
			stop: function( event, ui ) {
				options.position = [
					ui.position.left - that.document.scrollLeft(),
					ui.position.top - that.document.scrollTop()
				];
				$( this ).removeClass("ui-dialog-dragging");
				that._unblockFrames();
				that._trigger( "dragStop", event, filteredUi( ui ) );
			}
		});
	},

	_makeResizable: function() {
		var that = this,
			options = this.options,
			handles = options.resizable,
			// .ui-resizable has position: relative defined in the stylesheet
			// but dialogs have to use absolute or fixed positioning
			position = this.uiDialog.css("position"),
			resizeHandles = typeof handles === "string" ?
				handles	:
				"n,e,s,w,se,sw,ne,nw";

		function filteredUi( ui ) {
			return {
				originalPosition: ui.originalPosition,
				originalSize: ui.originalSize,
				position: ui.position,
				size: ui.size
			};
		}

		this.uiDialog.resizable({
			cancel: ".ui-dialog-content",
			containment: "document",
			alsoResize: this.element,
			maxWidth: options.maxWidth,
			maxHeight: options.maxHeight,
			minWidth: options.minWidth,
			minHeight: this._minHeight(),
			handles: resizeHandles,
			start: function( event, ui ) {
				$( this ).addClass("ui-dialog-resizing");
				that._blockFrames();
				that._trigger( "resizeStart", event, filteredUi( ui ) );
			},
			resize: function( event, ui ) {
				that._trigger( "resize", event, filteredUi( ui ) );
			},
			stop: function( event, ui ) {
				options.height = $( this ).height();
				options.width = $( this ).width();
				$( this ).removeClass("ui-dialog-resizing");
				that._unblockFrames();
				that._trigger( "resizeStop", event, filteredUi( ui ) );
			}
		})
		.css( "position", position );
	},

	_minHeight: function() {
		var options = this.options;

		return options.height === "auto" ?
			options.minHeight :
			Math.min( options.minHeight, options.height );
	},

	_position: function() {
		// Need to show the dialog to get the actual offset in the position plugin
		var isVisible = this.uiDialog.is(":visible");
		if ( !isVisible ) {
			this.uiDialog.show();
		}
		this.uiDialog.position( this.options.position );
		if ( !isVisible ) {
			this.uiDialog.hide();
		}
	},

	_setOptions: function( options ) {
		var that = this,
			resize = false,
			resizableOptions = {};

		$.each( options, function( key, value ) {
			that._setOption( key, value );

			if ( key in sizeRelatedOptions ) {
				resize = true;
			}
			if ( key in resizableRelatedOptions ) {
				resizableOptions[ key ] = value;
			}
		});

		if ( resize ) {
			this._size();
			this._position();
		}
		if ( this.uiDialog.is(":data(ui-resizable)") ) {
			this.uiDialog.resizable( "option", resizableOptions );
		}
	},

	_setOption: function( key, value ) {
		/*jshint maxcomplexity:15*/
		var isDraggable, isResizable,
			uiDialog = this.uiDialog;

		if ( key === "dialogClass" ) {
			uiDialog
				.removeClass( this.options.dialogClass )
				.addClass( value );
		}

		if ( key === "disabled" ) {
			return;
		}

		this._super( key, value );

		if ( key === "appendTo" ) {
			this.uiDialog.appendTo( this._appendTo() );
		}

		if ( key === "buttons" ) {
			this._createButtons();
		}

		if ( key === "closeText" ) {
			this.uiDialogTitlebarClose.button({
				// Ensure that we always pass a string
				label: "" + value
			});
		}

		if ( key === "draggable" ) {
			isDraggable = uiDialog.is(":data(ui-draggable)");
			if ( isDraggable && !value ) {
				uiDialog.draggable("destroy");
			}

			if ( !isDraggable && value ) {
				this._makeDraggable();
			}
		}

		if ( key === "position" ) {
			this._position();
		}

		if ( key === "resizable" ) {
			// currently resizable, becoming non-resizable
			isResizable = uiDialog.is(":data(ui-resizable)");
			if ( isResizable && !value ) {
				uiDialog.resizable("destroy");
			}

			// currently resizable, changing handles
			if ( isResizable && typeof value === "string" ) {
				uiDialog.resizable( "option", "handles", value );
			}

			// currently non-resizable, becoming resizable
			if ( !isResizable && value !== false ) {
				this._makeResizable();
			}
		}

		if ( key === "title" ) {
			this._title( this.uiDialogTitlebar.find(".ui-dialog-title") );
		}
	},

	_size: function() {
		// If the user has resized the dialog, the .ui-dialog and .ui-dialog-content
		// divs will both have width and height set, so we need to reset them
		var nonContentHeight, minContentHeight, maxContentHeight,
			options = this.options;

		// Reset content sizing
		this.element.show().css({
			width: "auto",
			minHeight: 0,
			maxHeight: "none",
			height: 0
		});

		if ( options.minWidth > options.width ) {
			options.width = options.minWidth;
		}

		// reset wrapper sizing
		// determine the height of all the non-content elements
		nonContentHeight = this.uiDialog.css({
				height: "auto",
				width: options.width
			})
			.outerHeight();
		minContentHeight = Math.max( 0, options.minHeight - nonContentHeight );
		maxContentHeight = typeof options.maxHeight === "number" ?
			Math.max( 0, options.maxHeight - nonContentHeight ) :
			"none";

		if ( options.height === "auto" ) {
			this.element.css({
				minHeight: minContentHeight,
				maxHeight: maxContentHeight,
				height: "auto"
			});
		} else {
			this.element.height( Math.max( 0, options.height - nonContentHeight ) );
		}

		if (this.uiDialog.is(":data(ui-resizable)") ) {
			this.uiDialog.resizable( "option", "minHeight", this._minHeight() );
		}
	},

	_blockFrames: function() {
		this.iframeBlocks = this.document.find( "iframe" ).map(function() {
			var iframe = $( this );

			return $( "<div>" )
				.css({
					position: "absolute",
					width: iframe.outerWidth(),
					height: iframe.outerHeight()
				})
				.appendTo( iframe.parent() )
				.offset( iframe.offset() )[0];
		});
	},

	_unblockFrames: function() {
		if ( this.iframeBlocks ) {
			this.iframeBlocks.remove();
			delete this.iframeBlocks;
		}
	},

	_allowInteraction: function( event ) {
		if ( $( event.target ).closest(".ui-dialog").length ) {
			return true;
		}

		// TODO: Remove hack when datepicker implements
		// the .ui-front logic (#8989)
		return !!$( event.target ).closest(".ui-datepicker").length;
	},

	_createOverlay: function() {
		if ( !this.options.modal ) {
			return;
		}

		var that = this,
			widgetFullName = this.widgetFullName;
		if ( !$.ui.dialog.overlayInstances ) {
			// Prevent use of anchors and inputs.
			// We use a delay in case the overlay is created from an
			// event that we're going to be cancelling. (#2804)
			this._delay(function() {
				// Handle .dialog().dialog("close") (#4065)
				if ( $.ui.dialog.overlayInstances ) {
					this.document.bind( "focusin.dialog", function( event ) {
						if ( !that._allowInteraction( event ) ) {
							event.preventDefault();
							$(".ui-dialog:visible:last .ui-dialog-content")
								.data( widgetFullName )._focusTabbable();
						}
					});
				}
			});
		}

		this.overlay = $("<div>")
			.addClass("ui-widget-overlay ui-front")
			.appendTo( this._appendTo() );
		this._on( this.overlay, {
			mousedown: "_keepFocus"
		});
		$.ui.dialog.overlayInstances++;
	},

	_destroyOverlay: function() {
		if ( !this.options.modal ) {
			return;
		}

		if ( this.overlay ) {
			$.ui.dialog.overlayInstances--;

			if ( !$.ui.dialog.overlayInstances ) {
				this.document.unbind( "focusin.dialog" );
			}
			this.overlay.remove();
			this.overlay = null;
		}
	}
});

$.ui.dialog.overlayInstances = 0;

// DEPRECATED
if ( $.uiBackCompat !== false ) {
	// position option with array notation
	// just override with old implementation
	$.widget( "ui.dialog", $.ui.dialog, {
		_position: function() {
			var position = this.options.position,
				myAt = [],
				offset = [ 0, 0 ],
				isVisible;

			if ( position ) {
				if ( typeof position === "string" || (typeof position === "object" && "0" in position ) ) {
					myAt = position.split ? position.split(" ") : [ position[0], position[1] ];
					if ( myAt.length === 1 ) {
						myAt[1] = myAt[0];
					}

					$.each( [ "left", "top" ], function( i, offsetPosition ) {
						if ( +myAt[ i ] === myAt[ i ] ) {
							offset[ i ] = myAt[ i ];
							myAt[ i ] = offsetPosition;
						}
					});

					position = {
						my: myAt[0] + (offset[0] < 0 ? offset[0] : "+" + offset[0]) + " " +
							myAt[1] + (offset[1] < 0 ? offset[1] : "+" + offset[1]),
						at: myAt.join(" ")
					};
				}

				position = $.extend( {}, $.ui.dialog.prototype.options.position, position );
			} else {
				position = $.ui.dialog.prototype.options.position;
			}

			// need to show the dialog to get the actual offset in the position plugin
			isVisible = this.uiDialog.is(":visible");
			if ( !isVisible ) {
				this.uiDialog.show();
			}
			this.uiDialog.position( position );
			if ( !isVisible ) {
				this.uiDialog.hide();
			}
		}
	});
}

}( jQuery ) );

(function( $, undefined ) {

var rvertical = /up|down|vertical/,
	rpositivemotion = /up|left|vertical|horizontal/;

$.effects.effect.blind = function( o, done ) {
	// Create element
	var el = $( this ),
		props = [ "position", "top", "bottom", "left", "right", "height", "width" ],
		mode = $.effects.setMode( el, o.mode || "hide" ),
		direction = o.direction || "up",
		vertical = rvertical.test( direction ),
		ref = vertical ? "height" : "width",
		ref2 = vertical ? "top" : "left",
		motion = rpositivemotion.test( direction ),
		animation = {},
		show = mode === "show",
		wrapper, distance, margin;

	// if already wrapped, the wrapper's properties are my property. #6245
	if ( el.parent().is( ".ui-effects-wrapper" ) ) {
		$.effects.save( el.parent(), props );
	} else {
		$.effects.save( el, props );
	}
	el.show();
	wrapper = $.effects.createWrapper( el ).css({
		overflow: "hidden"
	});

	distance = wrapper[ ref ]();
	margin = parseFloat( wrapper.css( ref2 ) ) || 0;

	animation[ ref ] = show ? distance : 0;
	if ( !motion ) {
		el
			.css( vertical ? "bottom" : "right", 0 )
			.css( vertical ? "top" : "left", "auto" )
			.css({ position: "absolute" });

		animation[ ref2 ] = show ? margin : distance + margin;
	}

	// start at 0 if we are showing
	if ( show ) {
		wrapper.css( ref, 0 );
		if ( ! motion ) {
			wrapper.css( ref2, margin + distance );
		}
	}

	// Animate
	wrapper.animate( animation, {
		duration: o.duration,
		easing: o.easing,
		queue: false,
		complete: function() {
			if ( mode === "hide" ) {
				el.hide();
			}
			$.effects.restore( el, props );
			$.effects.removeWrapper( el );
			done();
		}
	});

};

})(jQuery);

(function( $, undefined ) {

$.effects.effect.bounce = function( o, done ) {
	var el = $( this ),
		props = [ "position", "top", "bottom", "left", "right", "height", "width" ],

		// defaults:
		mode = $.effects.setMode( el, o.mode || "effect" ),
		hide = mode === "hide",
		show = mode === "show",
		direction = o.direction || "up",
		distance = o.distance,
		times = o.times || 5,

		// number of internal animations
		anims = times * 2 + ( show || hide ? 1 : 0 ),
		speed = o.duration / anims,
		easing = o.easing,

		// utility:
		ref = ( direction === "up" || direction === "down" ) ? "top" : "left",
		motion = ( direction === "up" || direction === "left" ),
		i,
		upAnim,
		downAnim,

		// we will need to re-assemble the queue to stack our animations in place
		queue = el.queue(),
		queuelen = queue.length;

	// Avoid touching opacity to prevent clearType and PNG issues in IE
	if ( show || hide ) {
		props.push( "opacity" );
	}

	$.effects.save( el, props );
	el.show();
	$.effects.createWrapper( el ); // Create Wrapper

	// default distance for the BIGGEST bounce is the outer Distance / 3
	if ( !distance ) {
		distance = el[ ref === "top" ? "outerHeight" : "outerWidth" ]() / 3;
	}

	if ( show ) {
		downAnim = { opacity: 1 };
		downAnim[ ref ] = 0;

		// if we are showing, force opacity 0 and set the initial position
		// then do the "first" animation
		el.css( "opacity", 0 )
			.css( ref, motion ? -distance * 2 : distance * 2 )
			.animate( downAnim, speed, easing );
	}

	// start at the smallest distance if we are hiding
	if ( hide ) {
		distance = distance / Math.pow( 2, times - 1 );
	}

	downAnim = {};
	downAnim[ ref ] = 0;
	// Bounces up/down/left/right then back to 0 -- times * 2 animations happen here
	for ( i = 0; i < times; i++ ) {
		upAnim = {};
		upAnim[ ref ] = ( motion ? "-=" : "+=" ) + distance;

		el.animate( upAnim, speed, easing )
			.animate( downAnim, speed, easing );

		distance = hide ? distance * 2 : distance / 2;
	}

	// Last Bounce when Hiding
	if ( hide ) {
		upAnim = { opacity: 0 };
		upAnim[ ref ] = ( motion ? "-=" : "+=" ) + distance;

		el.animate( upAnim, speed, easing );
	}

	el.queue(function() {
		if ( hide ) {
			el.hide();
		}
		$.effects.restore( el, props );
		$.effects.removeWrapper( el );
		done();
	});

	// inject all the animations we just queued to be first in line (after "inprogress")
	if ( queuelen > 1) {
		queue.splice.apply( queue,
			[ 1, 0 ].concat( queue.splice( queuelen, anims + 1 ) ) );
	}
	el.dequeue();

};

})(jQuery);

(function( $, undefined ) {

$.effects.effect.clip = function( o, done ) {
	// Create element
	var el = $( this ),
		props = [ "position", "top", "bottom", "left", "right", "height", "width" ],
		mode = $.effects.setMode( el, o.mode || "hide" ),
		show = mode === "show",
		direction = o.direction || "vertical",
		vert = direction === "vertical",
		size = vert ? "height" : "width",
		position = vert ? "top" : "left",
		animation = {},
		wrapper, animate, distance;

	// Save & Show
	$.effects.save( el, props );
	el.show();

	// Create Wrapper
	wrapper = $.effects.createWrapper( el ).css({
		overflow: "hidden"
	});
	animate = ( el[0].tagName === "IMG" ) ? wrapper : el;
	distance = animate[ size ]();

	// Shift
	if ( show ) {
		animate.css( size, 0 );
		animate.css( position, distance / 2 );
	}

	// Create Animation Object:
	animation[ size ] = show ? distance : 0;
	animation[ position ] = show ? 0 : distance / 2;

	// Animate
	animate.animate( animation, {
		queue: false,
		duration: o.duration,
		easing: o.easing,
		complete: function() {
			if ( !show ) {
				el.hide();
			}
			$.effects.restore( el, props );
			$.effects.removeWrapper( el );
			done();
		}
	});

};

})(jQuery);

(function( $, undefined ) {

$.effects.effect.drop = function( o, done ) {

	var el = $( this ),
		props = [ "position", "top", "bottom", "left", "right", "opacity", "height", "width" ],
		mode = $.effects.setMode( el, o.mode || "hide" ),
		show = mode === "show",
		direction = o.direction || "left",
		ref = ( direction === "up" || direction === "down" ) ? "top" : "left",
		motion = ( direction === "up" || direction === "left" ) ? "pos" : "neg",
		animation = {
			opacity: show ? 1 : 0
		},
		distance;

	// Adjust
	$.effects.save( el, props );
	el.show();
	$.effects.createWrapper( el );

	distance = o.distance || el[ ref === "top" ? "outerHeight": "outerWidth" ]( true ) / 2;

	if ( show ) {
		el
			.css( "opacity", 0 )
			.css( ref, motion === "pos" ? -distance : distance );
	}

	// Animation
	animation[ ref ] = ( show ?
		( motion === "pos" ? "+=" : "-=" ) :
		( motion === "pos" ? "-=" : "+=" ) ) +
		distance;

	// Animate
	el.animate( animation, {
		queue: false,
		duration: o.duration,
		easing: o.easing,
		complete: function() {
			if ( mode === "hide" ) {
				el.hide();
			}
			$.effects.restore( el, props );
			$.effects.removeWrapper( el );
			done();
		}
	});
};

})(jQuery);

(function( $, undefined ) {

$.effects.effect.explode = function( o, done ) {

	var rows = o.pieces ? Math.round( Math.sqrt( o.pieces ) ) : 3,
		cells = rows,
		el = $( this ),
		mode = $.effects.setMode( el, o.mode || "hide" ),
		show = mode === "show",

		// show and then visibility:hidden the element before calculating offset
		offset = el.show().css( "visibility", "hidden" ).offset(),

		// width and height of a piece
		width = Math.ceil( el.outerWidth() / cells ),
		height = Math.ceil( el.outerHeight() / rows ),
		pieces = [],

		// loop
		i, j, left, top, mx, my;

	// children animate complete:
	function childComplete() {
		pieces.push( this );
		if ( pieces.length === rows * cells ) {
			animComplete();
		}
	}

	// clone the element for each row and cell.
	for( i = 0; i < rows ; i++ ) { // ===>
		top = offset.top + i * height;
		my = i - ( rows - 1 ) / 2 ;

		for( j = 0; j < cells ; j++ ) { // |||
			left = offset.left + j * width;
			mx = j - ( cells - 1 ) / 2 ;

			// Create a clone of the now hidden main element that will be absolute positioned
			// within a wrapper div off the -left and -top equal to size of our pieces
			el
				.clone()
				.appendTo( "body" )
				.wrap( "<div></div>" )
				.css({
					position: "absolute",
					visibility: "visible",
					left: -j * width,
					top: -i * height
				})

			// select the wrapper - make it overflow: hidden and absolute positioned based on
			// where the original was located +left and +top equal to the size of pieces
				.parent()
				.addClass( "ui-effects-explode" )
				.css({
					position: "absolute",
					overflow: "hidden",
					width: width,
					height: height,
					left: left + ( show ? mx * width : 0 ),
					top: top + ( show ? my * height : 0 ),
					opacity: show ? 0 : 1
				}).animate({
					left: left + ( show ? 0 : mx * width ),
					top: top + ( show ? 0 : my * height ),
					opacity: show ? 1 : 0
				}, o.duration || 500, o.easing, childComplete );
		}
	}

	function animComplete() {
		el.css({
			visibility: "visible"
		});
		$( pieces ).remove();
		if ( !show ) {
			el.hide();
		}
		done();
	}
};

})(jQuery);

(function( $, undefined ) {

$.effects.effect.fade = function( o, done ) {
	var el = $( this ),
		mode = $.effects.setMode( el, o.mode || "toggle" );

	el.animate({
		opacity: mode
	}, {
		queue: false,
		duration: o.duration,
		easing: o.easing,
		complete: done
	});
};

})( jQuery );

(function( $, undefined ) {

$.effects.effect.fold = function( o, done ) {

	// Create element
	var el = $( this ),
		props = [ "position", "top", "bottom", "left", "right", "height", "width" ],
		mode = $.effects.setMode( el, o.mode || "hide" ),
		show = mode === "show",
		hide = mode === "hide",
		size = o.size || 15,
		percent = /([0-9]+)%/.exec( size ),
		horizFirst = !!o.horizFirst,
		widthFirst = show !== horizFirst,
		ref = widthFirst ? [ "width", "height" ] : [ "height", "width" ],
		duration = o.duration / 2,
		wrapper, distance,
		animation1 = {},
		animation2 = {};

	$.effects.save( el, props );
	el.show();

	// Create Wrapper
	wrapper = $.effects.createWrapper( el ).css({
		overflow: "hidden"
	});
	distance = widthFirst ?
		[ wrapper.width(), wrapper.height() ] :
		[ wrapper.height(), wrapper.width() ];

	if ( percent ) {
		size = parseInt( percent[ 1 ], 10 ) / 100 * distance[ hide ? 0 : 1 ];
	}
	if ( show ) {
		wrapper.css( horizFirst ? {
			height: 0,
			width: size
		} : {
			height: size,
			width: 0
		});
	}

	// Animation
	animation1[ ref[ 0 ] ] = show ? distance[ 0 ] : size;
	animation2[ ref[ 1 ] ] = show ? distance[ 1 ] : 0;

	// Animate
	wrapper
		.animate( animation1, duration, o.easing )
		.animate( animation2, duration, o.easing, function() {
			if ( hide ) {
				el.hide();
			}
			$.effects.restore( el, props );
			$.effects.removeWrapper( el );
			done();
		});

};

})(jQuery);

(function( $, undefined ) {

$.effects.effect.highlight = function( o, done ) {
	var elem = $( this ),
		props = [ "backgroundImage", "backgroundColor", "opacity" ],
		mode = $.effects.setMode( elem, o.mode || "show" ),
		animation = {
			backgroundColor: elem.css( "backgroundColor" )
		};

	if (mode === "hide") {
		animation.opacity = 0;
	}

	$.effects.save( elem, props );

	elem
		.show()
		.css({
			backgroundImage: "none",
			backgroundColor: o.color || "#ffff99"
		})
		.animate( animation, {
			queue: false,
			duration: o.duration,
			easing: o.easing,
			complete: function() {
				if ( mode === "hide" ) {
					elem.hide();
				}
				$.effects.restore( elem, props );
				done();
			}
		});
};

})(jQuery);

(function( $, undefined ) {

$.effects.effect.pulsate = function( o, done ) {
	var elem = $( this ),
		mode = $.effects.setMode( elem, o.mode || "show" ),
		show = mode === "show",
		hide = mode === "hide",
		showhide = ( show || mode === "hide" ),

		// showing or hiding leaves of the "last" animation
		anims = ( ( o.times || 5 ) * 2 ) + ( showhide ? 1 : 0 ),
		duration = o.duration / anims,
		animateTo = 0,
		queue = elem.queue(),
		queuelen = queue.length,
		i;

	if ( show || !elem.is(":visible")) {
		elem.css( "opacity", 0 ).show();
		animateTo = 1;
	}

	// anims - 1 opacity "toggles"
	for ( i = 1; i < anims; i++ ) {
		elem.animate({
			opacity: animateTo
		}, duration, o.easing );
		animateTo = 1 - animateTo;
	}

	elem.animate({
		opacity: animateTo
	}, duration, o.easing);

	elem.queue(function() {
		if ( hide ) {
			elem.hide();
		}
		done();
	});

	// We just queued up "anims" animations, we need to put them next in the queue
	if ( queuelen > 1 ) {
		queue.splice.apply( queue,
			[ 1, 0 ].concat( queue.splice( queuelen, anims + 1 ) ) );
	}
	elem.dequeue();
};

})(jQuery);

(function( $, undefined ) {

$.effects.effect.puff = function( o, done ) {
	var elem = $( this ),
		mode = $.effects.setMode( elem, o.mode || "hide" ),
		hide = mode === "hide",
		percent = parseInt( o.percent, 10 ) || 150,
		factor = percent / 100,
		original = {
			height: elem.height(),
			width: elem.width(),
			outerHeight: elem.outerHeight(),
			outerWidth: elem.outerWidth()
		};

	$.extend( o, {
		effect: "scale",
		queue: false,
		fade: true,
		mode: mode,
		complete: done,
		percent: hide ? percent : 100,
		from: hide ?
			original :
			{
				height: original.height * factor,
				width: original.width * factor,
				outerHeight: original.outerHeight * factor,
				outerWidth: original.outerWidth * factor
			}
	});

	elem.effect( o );
};

$.effects.effect.scale = function( o, done ) {

	// Create element
	var el = $( this ),
		options = $.extend( true, {}, o ),
		mode = $.effects.setMode( el, o.mode || "effect" ),
		percent = parseInt( o.percent, 10 ) ||
			( parseInt( o.percent, 10 ) === 0 ? 0 : ( mode === "hide" ? 0 : 100 ) ),
		direction = o.direction || "both",
		origin = o.origin,
		original = {
			height: el.height(),
			width: el.width(),
			outerHeight: el.outerHeight(),
			outerWidth: el.outerWidth()
		},
		factor = {
			y: direction !== "horizontal" ? (percent / 100) : 1,
			x: direction !== "vertical" ? (percent / 100) : 1
		};

	// We are going to pass this effect to the size effect:
	options.effect = "size";
	options.queue = false;
	options.complete = done;

	// Set default origin and restore for show/hide
	if ( mode !== "effect" ) {
		options.origin = origin || ["middle","center"];
		options.restore = true;
	}

	options.from = o.from || ( mode === "show" ? {
		height: 0,
		width: 0,
		outerHeight: 0,
		outerWidth: 0
	} : original );
	options.to = {
		height: original.height * factor.y,
		width: original.width * factor.x,
		outerHeight: original.outerHeight * factor.y,
		outerWidth: original.outerWidth * factor.x
	};

	// Fade option to support puff
	if ( options.fade ) {
		if ( mode === "show" ) {
			options.from.opacity = 0;
			options.to.opacity = 1;
		}
		if ( mode === "hide" ) {
			options.from.opacity = 1;
			options.to.opacity = 0;
		}
	}

	// Animate
	el.effect( options );

};

$.effects.effect.size = function( o, done ) {

	// Create element
	var original, baseline, factor,
		el = $( this ),
		props0 = [ "position", "top", "bottom", "left", "right", "width", "height", "overflow", "opacity" ],

		// Always restore
		props1 = [ "position", "top", "bottom", "left", "right", "overflow", "opacity" ],

		// Copy for children
		props2 = [ "width", "height", "overflow" ],
		cProps = [ "fontSize" ],
		vProps = [ "borderTopWidth", "borderBottomWidth", "paddingTop", "paddingBottom" ],
		hProps = [ "borderLeftWidth", "borderRightWidth", "paddingLeft", "paddingRight" ],

		// Set options
		mode = $.effects.setMode( el, o.mode || "effect" ),
		restore = o.restore || mode !== "effect",
		scale = o.scale || "both",
		origin = o.origin || [ "middle", "center" ],
		position = el.css( "position" ),
		props = restore ? props0 : props1,
		zero = {
			height: 0,
			width: 0,
			outerHeight: 0,
			outerWidth: 0
		};

	if ( mode === "show" ) {
		el.show();
	}
	original = {
		height: el.height(),
		width: el.width(),
		outerHeight: el.outerHeight(),
		outerWidth: el.outerWidth()
	};

	if ( o.mode === "toggle" && mode === "show" ) {
		el.from = o.to || zero;
		el.to = o.from || original;
	} else {
		el.from = o.from || ( mode === "show" ? zero : original );
		el.to = o.to || ( mode === "hide" ? zero : original );
	}

	// Set scaling factor
	factor = {
		from: {
			y: el.from.height / original.height,
			x: el.from.width / original.width
		},
		to: {
			y: el.to.height / original.height,
			x: el.to.width / original.width
		}
	};

	// Scale the css box
	if ( scale === "box" || scale === "both" ) {

		// Vertical props scaling
		if ( factor.from.y !== factor.to.y ) {
			props = props.concat( vProps );
			el.from = $.effects.setTransition( el, vProps, factor.from.y, el.from );
			el.to = $.effects.setTransition( el, vProps, factor.to.y, el.to );
		}

		// Horizontal props scaling
		if ( factor.from.x !== factor.to.x ) {
			props = props.concat( hProps );
			el.from = $.effects.setTransition( el, hProps, factor.from.x, el.from );
			el.to = $.effects.setTransition( el, hProps, factor.to.x, el.to );
		}
	}

	// Scale the content
	if ( scale === "content" || scale === "both" ) {

		// Vertical props scaling
		if ( factor.from.y !== factor.to.y ) {
			props = props.concat( cProps ).concat( props2 );
			el.from = $.effects.setTransition( el, cProps, factor.from.y, el.from );
			el.to = $.effects.setTransition( el, cProps, factor.to.y, el.to );
		}
	}

	$.effects.save( el, props );
	el.show();
	$.effects.createWrapper( el );
	el.css( "overflow", "hidden" ).css( el.from );

	// Adjust
	if (origin) { // Calculate baseline shifts
		baseline = $.effects.getBaseline( origin, original );
		el.from.top = ( original.outerHeight - el.outerHeight() ) * baseline.y;
		el.from.left = ( original.outerWidth - el.outerWidth() ) * baseline.x;
		el.to.top = ( original.outerHeight - el.to.outerHeight ) * baseline.y;
		el.to.left = ( original.outerWidth - el.to.outerWidth ) * baseline.x;
	}
	el.css( el.from ); // set top & left

	// Animate
	if ( scale === "content" || scale === "both" ) { // Scale the children

		// Add margins/font-size
		vProps = vProps.concat([ "marginTop", "marginBottom" ]).concat(cProps);
		hProps = hProps.concat([ "marginLeft", "marginRight" ]);
		props2 = props0.concat(vProps).concat(hProps);

		el.find( "*[width]" ).each( function(){
			var child = $( this ),
				c_original = {
					height: child.height(),
					width: child.width(),
					outerHeight: child.outerHeight(),
					outerWidth: child.outerWidth()
				};
			if (restore) {
				$.effects.save(child, props2);
			}

			child.from = {
				height: c_original.height * factor.from.y,
				width: c_original.width * factor.from.x,
				outerHeight: c_original.outerHeight * factor.from.y,
				outerWidth: c_original.outerWidth * factor.from.x
			};
			child.to = {
				height: c_original.height * factor.to.y,
				width: c_original.width * factor.to.x,
				outerHeight: c_original.height * factor.to.y,
				outerWidth: c_original.width * factor.to.x
			};

			// Vertical props scaling
			if ( factor.from.y !== factor.to.y ) {
				child.from = $.effects.setTransition( child, vProps, factor.from.y, child.from );
				child.to = $.effects.setTransition( child, vProps, factor.to.y, child.to );
			}

			// Horizontal props scaling
			if ( factor.from.x !== factor.to.x ) {
				child.from = $.effects.setTransition( child, hProps, factor.from.x, child.from );
				child.to = $.effects.setTransition( child, hProps, factor.to.x, child.to );
			}

			// Animate children
			child.css( child.from );
			child.animate( child.to, o.duration, o.easing, function() {

				// Restore children
				if ( restore ) {
					$.effects.restore( child, props2 );
				}
			});
		});
	}

	// Animate
	el.animate( el.to, {
		queue: false,
		duration: o.duration,
		easing: o.easing,
		complete: function() {
			if ( el.to.opacity === 0 ) {
				el.css( "opacity", el.from.opacity );
			}
			if( mode === "hide" ) {
				el.hide();
			}
			$.effects.restore( el, props );
			if ( !restore ) {

				// we need to calculate our new positioning based on the scaling
				if ( position === "static" ) {
					el.css({
						position: "relative",
						top: el.to.top,
						left: el.to.left
					});
				} else {
					$.each([ "top", "left" ], function( idx, pos ) {
						el.css( pos, function( _, str ) {
							var val = parseInt( str, 10 ),
								toRef = idx ? el.to.left : el.to.top;

							// if original was "auto", recalculate the new value from wrapper
							if ( str === "auto" ) {
								return toRef + "px";
							}

							return val + toRef + "px";
						});
					});
				}
			}

			$.effects.removeWrapper( el );
			done();
		}
	});

};

})(jQuery);

(function( $, undefined ) {

$.effects.effect.shake = function( o, done ) {

	var el = $( this ),
		props = [ "position", "top", "bottom", "left", "right", "height", "width" ],
		mode = $.effects.setMode( el, o.mode || "effect" ),
		direction = o.direction || "left",
		distance = o.distance || 20,
		times = o.times || 3,
		anims = times * 2 + 1,
		speed = Math.round(o.duration/anims),
		ref = (direction === "up" || direction === "down") ? "top" : "left",
		positiveMotion = (direction === "up" || direction === "left"),
		animation = {},
		animation1 = {},
		animation2 = {},
		i,

		// we will need to re-assemble the queue to stack our animations in place
		queue = el.queue(),
		queuelen = queue.length;

	$.effects.save( el, props );
	el.show();
	$.effects.createWrapper( el );

	// Animation
	animation[ ref ] = ( positiveMotion ? "-=" : "+=" ) + distance;
	animation1[ ref ] = ( positiveMotion ? "+=" : "-=" ) + distance * 2;
	animation2[ ref ] = ( positiveMotion ? "-=" : "+=" ) + distance * 2;

	// Animate
	el.animate( animation, speed, o.easing );

	// Shakes
	for ( i = 1; i < times; i++ ) {
		el.animate( animation1, speed, o.easing ).animate( animation2, speed, o.easing );
	}
	el
		.animate( animation1, speed, o.easing )
		.animate( animation, speed / 2, o.easing )
		.queue(function() {
			if ( mode === "hide" ) {
				el.hide();
			}
			$.effects.restore( el, props );
			$.effects.removeWrapper( el );
			done();
		});

	// inject all the animations we just queued to be first in line (after "inprogress")
	if ( queuelen > 1) {
		queue.splice.apply( queue,
			[ 1, 0 ].concat( queue.splice( queuelen, anims + 1 ) ) );
	}
	el.dequeue();

};

})(jQuery);

(function( $, undefined ) {

$.effects.effect.slide = function( o, done ) {

	// Create element
	var el = $( this ),
		props = [ "position", "top", "bottom", "left", "right", "width", "height" ],
		mode = $.effects.setMode( el, o.mode || "show" ),
		show = mode === "show",
		direction = o.direction || "left",
		ref = (direction === "up" || direction === "down") ? "top" : "left",
		positiveMotion = (direction === "up" || direction === "left"),
		distance,
		animation = {};

	// Adjust
	$.effects.save( el, props );
	el.show();
	distance = o.distance || el[ ref === "top" ? "outerHeight" : "outerWidth" ]( true );

	$.effects.createWrapper( el ).css({
		overflow: "hidden"
	});

	if ( show ) {
		el.css( ref, positiveMotion ? (isNaN(distance) ? "-" + distance : -distance) : distance );
	}

	// Animation
	animation[ ref ] = ( show ?
		( positiveMotion ? "+=" : "-=") :
		( positiveMotion ? "-=" : "+=")) +
		distance;

	// Animate
	el.animate( animation, {
		queue: false,
		duration: o.duration,
		easing: o.easing,
		complete: function() {
			if ( mode === "hide" ) {
				el.hide();
			}
			$.effects.restore( el, props );
			$.effects.removeWrapper( el );
			done();
		}
	});
};

})(jQuery);

(function( $, undefined ) {

$.effects.effect.transfer = function( o, done ) {
	var elem = $( this ),
		target = $( o.to ),
		targetFixed = target.css( "position" ) === "fixed",
		body = $("body"),
		fixTop = targetFixed ? body.scrollTop() : 0,
		fixLeft = targetFixed ? body.scrollLeft() : 0,
		endPosition = target.offset(),
		animation = {
			top: endPosition.top - fixTop ,
			left: endPosition.left - fixLeft ,
			height: target.innerHeight(),
			width: target.innerWidth()
		},
		startPosition = elem.offset(),
		transfer = $( "<div class='ui-effects-transfer'></div>" )
			.appendTo( document.body )
			.addClass( o.className )
			.css({
				top: startPosition.top - fixTop ,
				left: startPosition.left - fixLeft ,
				height: elem.innerHeight(),
				width: elem.innerWidth(),
				position: targetFixed ? "fixed" : "absolute"
			})
			.animate( animation, o.duration, o.easing, function() {
				transfer.remove();
				done();
			});
};

})(jQuery);

(function( $, undefined ) {

$.widget( "ui.menu", {
	version: "1.10.3",
	defaultElement: "<ul>",
	delay: 300,
	options: {
		icons: {
			submenu: "ui-icon-carat-1-e"
		},
		menus: "ul",
		position: {
			my: "left top",
			at: "right top"
		},
		role: "menu",

		// callbacks
		blur: null,
		focus: null,
		select: null
	},

	_create: function() {
		this.activeMenu = this.element;
		// flag used to prevent firing of the click handler
		// as the event bubbles up through nested menus
		this.mouseHandled = false;
		this.element
			.uniqueId()
			.addClass( "ui-menu ui-widget ui-widget-content ui-corner-all" )
			.toggleClass( "ui-menu-icons", !!this.element.find( ".ui-icon" ).length )
			.attr({
				role: this.options.role,
				tabIndex: 0
			})
			// need to catch all clicks on disabled menu
			// not possible through _on
			.bind( "click" + this.eventNamespace, $.proxy(function( event ) {
				if ( this.options.disabled ) {
					event.preventDefault();
				}
			}, this ));

		if ( this.options.disabled ) {
			this.element
				.addClass( "ui-state-disabled" )
				.attr( "aria-disabled", "true" );
		}

		this._on({
			// Prevent focus from sticking to links inside menu after clicking
			// them (focus should always stay on UL during navigation).
			"mousedown .ui-menu-item > a": function( event ) {
				event.preventDefault();
			},
			"click .ui-state-disabled > a": function( event ) {
				event.preventDefault();
			},
			"click .ui-menu-item:has(a)": function( event ) {
				var target = $( event.target ).closest( ".ui-menu-item" );
				if ( !this.mouseHandled && target.not( ".ui-state-disabled" ).length ) {
					this.mouseHandled = true;

					this.select( event );
					// Open submenu on click
					if ( target.has( ".ui-menu" ).length ) {
						this.expand( event );
					} else if ( !this.element.is( ":focus" ) ) {
						// Redirect focus to the menu
						this.element.trigger( "focus", [ true ] );

						// If the active item is on the top level, let it stay active.
						// Otherwise, blur the active item since it is no longer visible.
						if ( this.active && this.active.parents( ".ui-menu" ).length === 1 ) {
							clearTimeout( this.timer );
						}
					}
				}
			},
			"mouseenter .ui-menu-item": function( event ) {
				var target = $( event.currentTarget );
				// Remove ui-state-active class from siblings of the newly focused menu item
				// to avoid a jump caused by adjacent elements both having a class with a border
				target.siblings().children( ".ui-state-active" ).removeClass( "ui-state-active" );
				this.focus( event, target );
			},
			mouseleave: "collapseAll",
			"mouseleave .ui-menu": "collapseAll",
			focus: function( event, keepActiveItem ) {
				// If there's already an active item, keep it active
				// If not, activate the first item
				var item = this.active || this.element.children( ".ui-menu-item" ).eq( 0 );

				if ( !keepActiveItem ) {
					this.focus( event, item );
				}
			},
			blur: function( event ) {
				this._delay(function() {
					if ( !$.contains( this.element[0], this.document[0].activeElement ) ) {
						this.collapseAll( event );
					}
				});
			},
			keydown: "_keydown"
		});

		this.refresh();

		// Clicks outside of a menu collapse any open menus
		this._on( this.document, {
			click: function( event ) {
				if ( !$( event.target ).closest( ".ui-menu" ).length ) {
					this.collapseAll( event );
				}

				// Reset the mouseHandled flag
				this.mouseHandled = false;
			}
		});
	},

	_destroy: function() {
		// Destroy (sub)menus
		this.element
			.removeAttr( "aria-activedescendant" )
			.find( ".ui-menu" ).addBack()
				.removeClass( "ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons" )
				.removeAttr( "role" )
				.removeAttr( "tabIndex" )
				.removeAttr( "aria-labelledby" )
				.removeAttr( "aria-expanded" )
				.removeAttr( "aria-hidden" )
				.removeAttr( "aria-disabled" )
				.removeUniqueId()
				.show();

		// Destroy menu items
		this.element.find( ".ui-menu-item" )
			.removeClass( "ui-menu-item" )
			.removeAttr( "role" )
			.removeAttr( "aria-disabled" )
			.children( "a" )
				.removeUniqueId()
				.removeClass( "ui-corner-all ui-state-hover" )
				.removeAttr( "tabIndex" )
				.removeAttr( "role" )
				.removeAttr( "aria-haspopup" )
				.children().each( function() {
					var elem = $( this );
					if ( elem.data( "ui-menu-submenu-carat" ) ) {
						elem.remove();
					}
				});

		// Destroy menu dividers
		this.element.find( ".ui-menu-divider" ).removeClass( "ui-menu-divider ui-widget-content" );
	},

	_keydown: function( event ) {
		/*jshint maxcomplexity:20*/
		var match, prev, character, skip, regex,
			preventDefault = true;

		function escape( value ) {
			return value.replace( /[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&" );
		}

		switch ( event.keyCode ) {
		case $.ui.keyCode.PAGE_UP:
			this.previousPage( event );
			break;
		case $.ui.keyCode.PAGE_DOWN:
			this.nextPage( event );
			break;
		case $.ui.keyCode.HOME:
			this._move( "first", "first", event );
			break;
		case $.ui.keyCode.END:
			this._move( "last", "last", event );
			break;
		case $.ui.keyCode.UP:
			this.previous( event );
			break;
		case $.ui.keyCode.DOWN:
			this.next( event );
			break;
		case $.ui.keyCode.LEFT:
			this.collapse( event );
			break;
		case $.ui.keyCode.RIGHT:
			if ( this.active && !this.active.is( ".ui-state-disabled" ) ) {
				this.expand( event );
			}
			break;
		case $.ui.keyCode.ENTER:
		case $.ui.keyCode.SPACE:
			this._activate( event );
			break;
		case $.ui.keyCode.ESCAPE:
			this.collapse( event );
			break;
		default:
			preventDefault = false;
			prev = this.previousFilter || "";
			character = String.fromCharCode( event.keyCode );
			skip = false;

			clearTimeout( this.filterTimer );

			if ( character === prev ) {
				skip = true;
			} else {
				character = prev + character;
			}

			regex = new RegExp( "^" + escape( character ), "i" );
			match = this.activeMenu.children( ".ui-menu-item" ).filter(function() {
				return regex.test( $( this ).children( "a" ).text() );
			});
			match = skip && match.index( this.active.next() ) !== -1 ?
				this.active.nextAll( ".ui-menu-item" ) :
				match;

			// If no matches on the current filter, reset to the last character pressed
			// to move down the menu to the first item that starts with that character
			if ( !match.length ) {
				character = String.fromCharCode( event.keyCode );
				regex = new RegExp( "^" + escape( character ), "i" );
				match = this.activeMenu.children( ".ui-menu-item" ).filter(function() {
					return regex.test( $( this ).children( "a" ).text() );
				});
			}

			if ( match.length ) {
				this.focus( event, match );
				if ( match.length > 1 ) {
					this.previousFilter = character;
					this.filterTimer = this._delay(function() {
						delete this.previousFilter;
					}, 1000 );
				} else {
					delete this.previousFilter;
				}
			} else {
				delete this.previousFilter;
			}
		}

		if ( preventDefault ) {
			event.preventDefault();
		}
	},

	_activate: function( event ) {
		if ( !this.active.is( ".ui-state-disabled" ) ) {
			if ( this.active.children( "a[aria-haspopup='true']" ).length ) {
				this.expand( event );
			} else {
				this.select( event );
			}
		}
	},

	refresh: function() {
		var menus,
			icon = this.options.icons.submenu,
			submenus = this.element.find( this.options.menus );

		// Initialize nested menus
		submenus.filter( ":not(.ui-menu)" )
			.addClass( "ui-menu ui-widget ui-widget-content ui-corner-all" )
			.hide()
			.attr({
				role: this.options.role,
				"aria-hidden": "true",
				"aria-expanded": "false"
			})
			.each(function() {
				var menu = $( this ),
					item = menu.prev( "a" ),
					submenuCarat = $( "<span>" )
						.addClass( "ui-menu-icon ui-icon " + icon )
						.data( "ui-menu-submenu-carat", true );

				item
					.attr( "aria-haspopup", "true" )
					.prepend( submenuCarat );
				menu.attr( "aria-labelledby", item.attr( "id" ) );
			});

		menus = submenus.add( this.element );

		// Don't refresh list items that are already adapted
		menus.children( ":not(.ui-menu-item):has(a)" )
			.addClass( "ui-menu-item" )
			.attr( "role", "presentation" )
			.children( "a" )
				.uniqueId()
				.addClass( "ui-corner-all" )
				.attr({
					tabIndex: -1,
					role: this._itemRole()
				});

		// Initialize unlinked menu-items containing spaces and/or dashes only as dividers
		menus.children( ":not(.ui-menu-item)" ).each(function() {
			var item = $( this );
			// hyphen, em dash, en dash
			if ( !/[^\-\u2014\u2013\s]/.test( item.text() ) ) {
				item.addClass( "ui-widget-content ui-menu-divider" );
			}
		});

		// Add aria-disabled attribute to any disabled menu item
		menus.children( ".ui-state-disabled" ).attr( "aria-disabled", "true" );

		// If the active item has been removed, blur the menu
		if ( this.active && !$.contains( this.element[ 0 ], this.active[ 0 ] ) ) {
			this.blur();
		}
	},

	_itemRole: function() {
		return {
			menu: "menuitem",
			listbox: "option"
		}[ this.options.role ];
	},

	_setOption: function( key, value ) {
		if ( key === "icons" ) {
			this.element.find( ".ui-menu-icon" )
				.removeClass( this.options.icons.submenu )
				.addClass( value.submenu );
		}
		this._super( key, value );
	},

	focus: function( event, item ) {
		var nested, focused;
		this.blur( event, event && event.type === "focus" );

		this._scrollIntoView( item );

		this.active = item.first();
		focused = this.active.children( "a" ).addClass( "ui-state-focus" );
		// Only update aria-activedescendant if there's a role
		// otherwise we assume focus is managed elsewhere
		if ( this.options.role ) {
			this.element.attr( "aria-activedescendant", focused.attr( "id" ) );
		}

		// Highlight active parent menu item, if any
		this.active
			.parent()
			.closest( ".ui-menu-item" )
			.children( "a:first" )
			.addClass( "ui-state-active" );

		if ( event && event.type === "keydown" ) {
			this._close();
		} else {
			this.timer = this._delay(function() {
				this._close();
			}, this.delay );
		}

		nested = item.children( ".ui-menu" );
		if ( nested.length && ( /^mouse/.test( event.type ) ) ) {
			this._startOpening(nested);
		}
		this.activeMenu = item.parent();

		this._trigger( "focus", event, { item: item } );
	},

	_scrollIntoView: function( item ) {
		var borderTop, paddingTop, offset, scroll, elementHeight, itemHeight;
		if ( this._hasScroll() ) {
			borderTop = parseFloat( $.css( this.activeMenu[0], "borderTopWidth" ) ) || 0;
			paddingTop = parseFloat( $.css( this.activeMenu[0], "paddingTop" ) ) || 0;
			offset = item.offset().top - this.activeMenu.offset().top - borderTop - paddingTop;
			scroll = this.activeMenu.scrollTop();
			elementHeight = this.activeMenu.height();
			itemHeight = item.height();

			if ( offset < 0 ) {
				this.activeMenu.scrollTop( scroll + offset );
			} else if ( offset + itemHeight > elementHeight ) {
				this.activeMenu.scrollTop( scroll + offset - elementHeight + itemHeight );
			}
		}
	},

	blur: function( event, fromFocus ) {
		if ( !fromFocus ) {
			clearTimeout( this.timer );
		}

		if ( !this.active ) {
			return;
		}

		this.active.children( "a" ).removeClass( "ui-state-focus" );
		this.active = null;

		this._trigger( "blur", event, { item: this.active } );
	},

	_startOpening: function( submenu ) {
		clearTimeout( this.timer );

		// Don't open if already open fixes a Firefox bug that caused a .5 pixel
		// shift in the submenu position when mousing over the carat icon
		if ( submenu.attr( "aria-hidden" ) !== "true" ) {
			return;
		}

		this.timer = this._delay(function() {
			this._close();
			this._open( submenu );
		}, this.delay );
	},

	_open: function( submenu ) {
		var position = $.extend({
			of: this.active
		}, this.options.position );

		clearTimeout( this.timer );
		this.element.find( ".ui-menu" ).not( submenu.parents( ".ui-menu" ) )
			.hide()
			.attr( "aria-hidden", "true" );

		submenu
			.show()
			.removeAttr( "aria-hidden" )
			.attr( "aria-expanded", "true" )
			.position( position );
	},

	collapseAll: function( event, all ) {
		clearTimeout( this.timer );
		this.timer = this._delay(function() {
			// If we were passed an event, look for the submenu that contains the event
			var currentMenu = all ? this.element :
				$( event && event.target ).closest( this.element.find( ".ui-menu" ) );

			// If we found no valid submenu ancestor, use the main menu to close all sub menus anyway
			if ( !currentMenu.length ) {
				currentMenu = this.element;
			}

			this._close( currentMenu );

			this.blur( event );
			this.activeMenu = currentMenu;
		}, this.delay );
	},

	// With no arguments, closes the currently active menu - if nothing is active
	// it closes all menus.  If passed an argument, it will search for menus BELOW
	_close: function( startMenu ) {
		if ( !startMenu ) {
			startMenu = this.active ? this.active.parent() : this.element;
		}

		startMenu
			.find( ".ui-menu" )
				.hide()
				.attr( "aria-hidden", "true" )
				.attr( "aria-expanded", "false" )
			.end()
			.find( "a.ui-state-active" )
				.removeClass( "ui-state-active" );
	},

	collapse: function( event ) {
		var newItem = this.active &&
			this.active.parent().closest( ".ui-menu-item", this.element );
		if ( newItem && newItem.length ) {
			this._close();
			this.focus( event, newItem );
		}
	},

	expand: function( event ) {
		var newItem = this.active &&
			this.active
				.children( ".ui-menu " )
				.children( ".ui-menu-item" )
				.first();

		if ( newItem && newItem.length ) {
			this._open( newItem.parent() );

			// Delay so Firefox will not hide activedescendant change in expanding submenu from AT
			this._delay(function() {
				this.focus( event, newItem );
			});
		}
	},

	next: function( event ) {
		this._move( "next", "first", event );
	},

	previous: function( event ) {
		this._move( "prev", "last", event );
	},

	isFirstItem: function() {
		return this.active && !this.active.prevAll( ".ui-menu-item" ).length;
	},

	isLastItem: function() {
		return this.active && !this.active.nextAll( ".ui-menu-item" ).length;
	},

	_move: function( direction, filter, event ) {
		var next;
		if ( this.active ) {
			if ( direction === "first" || direction === "last" ) {
				next = this.active
					[ direction === "first" ? "prevAll" : "nextAll" ]( ".ui-menu-item" )
					.eq( -1 );
			} else {
				next = this.active
					[ direction + "All" ]( ".ui-menu-item" )
					.eq( 0 );
			}
		}
		if ( !next || !next.length || !this.active ) {
			next = this.activeMenu.children( ".ui-menu-item" )[ filter ]();
		}

		this.focus( event, next );
	},

	nextPage: function( event ) {
		var item, base, height;

		if ( !this.active ) {
			this.next( event );
			return;
		}
		if ( this.isLastItem() ) {
			return;
		}
		if ( this._hasScroll() ) {
			base = this.active.offset().top;
			height = this.element.height();
			this.active.nextAll( ".ui-menu-item" ).each(function() {
				item = $( this );
				return item.offset().top - base - height < 0;
			});

			this.focus( event, item );
		} else {
			this.focus( event, this.activeMenu.children( ".ui-menu-item" )
				[ !this.active ? "first" : "last" ]() );
		}
	},

	previousPage: function( event ) {
		var item, base, height;
		if ( !this.active ) {
			this.next( event );
			return;
		}
		if ( this.isFirstItem() ) {
			return;
		}
		if ( this._hasScroll() ) {
			base = this.active.offset().top;
			height = this.element.height();
			this.active.prevAll( ".ui-menu-item" ).each(function() {
				item = $( this );
				return item.offset().top - base + height > 0;
			});

			this.focus( event, item );
		} else {
			this.focus( event, this.activeMenu.children( ".ui-menu-item" ).first() );
		}
	},

	_hasScroll: function() {
		return this.element.outerHeight() < this.element.prop( "scrollHeight" );
	},

	select: function( event ) {
		// TODO: It should never be possible to not have an active item at this
		// point, but the tests don't trigger mouseenter before click.
		this.active = this.active || $( event.target ).closest( ".ui-menu-item" );
		var ui = { item: this.active };
		if ( !this.active.has( ".ui-menu" ).length ) {
			this.collapseAll( event, true );
		}
		this._trigger( "select", event, ui );
	}
});

}( jQuery ));

(function( $, undefined ) {

$.ui = $.ui || {};

var cachedScrollbarWidth,
	max = Math.max,
	abs = Math.abs,
	round = Math.round,
	rhorizontal = /left|center|right/,
	rvertical = /top|center|bottom/,
	roffset = /[\+\-]\d+(\.[\d]+)?%?/,
	rposition = /^\w+/,
	rpercent = /%$/,
	_position = $.fn.position;

function getOffsets( offsets, width, height ) {
	return [
		parseFloat( offsets[ 0 ] ) * ( rpercent.test( offsets[ 0 ] ) ? width / 100 : 1 ),
		parseFloat( offsets[ 1 ] ) * ( rpercent.test( offsets[ 1 ] ) ? height / 100 : 1 )
	];
}

function parseCss( element, property ) {
	return parseInt( $.css( element, property ), 10 ) || 0;
}

function getDimensions( elem ) {
	var raw = elem[0];
	if ( raw.nodeType === 9 ) {
		return {
			width: elem.width(),
			height: elem.height(),
			offset: { top: 0, left: 0 }
		};
	}
	if ( $.isWindow( raw ) ) {
		return {
			width: elem.width(),
			height: elem.height(),
			offset: { top: elem.scrollTop(), left: elem.scrollLeft() }
		};
	}
	if ( raw.preventDefault ) {
		return {
			width: 0,
			height: 0,
			offset: { top: raw.pageY, left: raw.pageX }
		};
	}
	return {
		width: elem.outerWidth(),
		height: elem.outerHeight(),
		offset: elem.offset()
	};
}

$.position = {
	scrollbarWidth: function() {
		if ( cachedScrollbarWidth !== undefined ) {
			return cachedScrollbarWidth;
		}
		var w1, w2,
			div = $( "<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>" ),
			innerDiv = div.children()[0];

		$( "body" ).append( div );
		w1 = innerDiv.offsetWidth;
		div.css( "overflow", "scroll" );

		w2 = innerDiv.offsetWidth;

		if ( w1 === w2 ) {
			w2 = div[0].clientWidth;
		}

		div.remove();

		return (cachedScrollbarWidth = w1 - w2);
	},
	getScrollInfo: function( within ) {
		var overflowX = within.isWindow ? "" : within.element.css( "overflow-x" ),
			overflowY = within.isWindow ? "" : within.element.css( "overflow-y" ),
			hasOverflowX = overflowX === "scroll" ||
				( overflowX === "auto" && within.width < within.element[0].scrollWidth ),
			hasOverflowY = overflowY === "scroll" ||
				( overflowY === "auto" && within.height < within.element[0].scrollHeight );
		return {
			width: hasOverflowY ? $.position.scrollbarWidth() : 0,
			height: hasOverflowX ? $.position.scrollbarWidth() : 0
		};
	},
	getWithinInfo: function( element ) {
		var withinElement = $( element || window ),
			isWindow = $.isWindow( withinElement[0] );
		return {
			element: withinElement,
			isWindow: isWindow,
			offset: withinElement.offset() || { left: 0, top: 0 },
			scrollLeft: withinElement.scrollLeft(),
			scrollTop: withinElement.scrollTop(),
			width: isWindow ? withinElement.width() : withinElement.outerWidth(),
			height: isWindow ? withinElement.height() : withinElement.outerHeight()
		};
	}
};

$.fn.position = function( options ) {
	if ( !options || !options.of ) {
		return _position.apply( this, arguments );
	}

	// make a copy, we don't want to modify arguments
	options = $.extend( {}, options );

	var atOffset, targetWidth, targetHeight, targetOffset, basePosition, dimensions,
		target = $( options.of ),
		within = $.position.getWithinInfo( options.within ),
		scrollInfo = $.position.getScrollInfo( within ),
		collision = ( options.collision || "flip" ).split( " " ),
		offsets = {};

	dimensions = getDimensions( target );
	if ( target[0].preventDefault ) {
		// force left top to allow flipping
		options.at = "left top";
	}
	targetWidth = dimensions.width;
	targetHeight = dimensions.height;
	targetOffset = dimensions.offset;
	// clone to reuse original targetOffset later
	basePosition = $.extend( {}, targetOffset );

	// force my and at to have valid horizontal and vertical positions
	// if a value is missing or invalid, it will be converted to center
	$.each( [ "my", "at" ], function() {
		var pos = ( options[ this ] || "" ).split( " " ),
			horizontalOffset,
			verticalOffset;

		if ( pos.length === 1) {
			pos = rhorizontal.test( pos[ 0 ] ) ?
				pos.concat( [ "center" ] ) :
				rvertical.test( pos[ 0 ] ) ?
					[ "center" ].concat( pos ) :
					[ "center", "center" ];
		}
		pos[ 0 ] = rhorizontal.test( pos[ 0 ] ) ? pos[ 0 ] : "center";
		pos[ 1 ] = rvertical.test( pos[ 1 ] ) ? pos[ 1 ] : "center";

		// calculate offsets
		horizontalOffset = roffset.exec( pos[ 0 ] );
		verticalOffset = roffset.exec( pos[ 1 ] );
		offsets[ this ] = [
			horizontalOffset ? horizontalOffset[ 0 ] : 0,
			verticalOffset ? verticalOffset[ 0 ] : 0
		];

		// reduce to just the positions without the offsets
		options[ this ] = [
			rposition.exec( pos[ 0 ] )[ 0 ],
			rposition.exec( pos[ 1 ] )[ 0 ]
		];
	});

	// normalize collision option
	if ( collision.length === 1 ) {
		collision[ 1 ] = collision[ 0 ];
	}

	if ( options.at[ 0 ] === "right" ) {
		basePosition.left += targetWidth;
	} else if ( options.at[ 0 ] === "center" ) {
		basePosition.left += targetWidth / 2;
	}

	if ( options.at[ 1 ] === "bottom" ) {
		basePosition.top += targetHeight;
	} else if ( options.at[ 1 ] === "center" ) {
		basePosition.top += targetHeight / 2;
	}

	atOffset = getOffsets( offsets.at, targetWidth, targetHeight );
	basePosition.left += atOffset[ 0 ];
	basePosition.top += atOffset[ 1 ];

	return this.each(function() {
		var collisionPosition, using,
			elem = $( this ),
			elemWidth = elem.outerWidth(),
			elemHeight = elem.outerHeight(),
			marginLeft = parseCss( this, "marginLeft" ),
			marginTop = parseCss( this, "marginTop" ),
			collisionWidth = elemWidth + marginLeft + parseCss( this, "marginRight" ) + scrollInfo.width,
			collisionHeight = elemHeight + marginTop + parseCss( this, "marginBottom" ) + scrollInfo.height,
			position = $.extend( {}, basePosition ),
			myOffset = getOffsets( offsets.my, elem.outerWidth(), elem.outerHeight() );

		if ( options.my[ 0 ] === "right" ) {
			position.left -= elemWidth;
		} else if ( options.my[ 0 ] === "center" ) {
			position.left -= elemWidth / 2;
		}

		if ( options.my[ 1 ] === "bottom" ) {
			position.top -= elemHeight;
		} else if ( options.my[ 1 ] === "center" ) {
			position.top -= elemHeight / 2;
		}

		position.left += myOffset[ 0 ];
		position.top += myOffset[ 1 ];

		// if the browser doesn't support fractions, then round for consistent results
		if ( !$.support.offsetFractions ) {
			position.left = round( position.left );
			position.top = round( position.top );
		}

		collisionPosition = {
			marginLeft: marginLeft,
			marginTop: marginTop
		};

		$.each( [ "left", "top" ], function( i, dir ) {
			if ( $.ui.position[ collision[ i ] ] ) {
				$.ui.position[ collision[ i ] ][ dir ]( position, {
					targetWidth: targetWidth,
					targetHeight: targetHeight,
					elemWidth: elemWidth,
					elemHeight: elemHeight,
					collisionPosition: collisionPosition,
					collisionWidth: collisionWidth,
					collisionHeight: collisionHeight,
					offset: [ atOffset[ 0 ] + myOffset[ 0 ], atOffset [ 1 ] + myOffset[ 1 ] ],
					my: options.my,
					at: options.at,
					within: within,
					elem : elem
				});
			}
		});

		if ( options.using ) {
			// adds feedback as second argument to using callback, if present
			using = function( props ) {
				var left = targetOffset.left - position.left,
					right = left + targetWidth - elemWidth,
					top = targetOffset.top - position.top,
					bottom = top + targetHeight - elemHeight,
					feedback = {
						target: {
							element: target,
							left: targetOffset.left,
							top: targetOffset.top,
							width: targetWidth,
							height: targetHeight
						},
						element: {
							element: elem,
							left: position.left,
							top: position.top,
							width: elemWidth,
							height: elemHeight
						},
						horizontal: right < 0 ? "left" : left > 0 ? "right" : "center",
						vertical: bottom < 0 ? "top" : top > 0 ? "bottom" : "middle"
					};
				if ( targetWidth < elemWidth && abs( left + right ) < targetWidth ) {
					feedback.horizontal = "center";
				}
				if ( targetHeight < elemHeight && abs( top + bottom ) < targetHeight ) {
					feedback.vertical = "middle";
				}
				if ( max( abs( left ), abs( right ) ) > max( abs( top ), abs( bottom ) ) ) {
					feedback.important = "horizontal";
				} else {
					feedback.important = "vertical";
				}
				options.using.call( this, props, feedback );
			};
		}

		elem.offset( $.extend( position, { using: using } ) );
	});
};

$.ui.position = {
	fit: {
		left: function( position, data ) {
			var within = data.within,
				withinOffset = within.isWindow ? within.scrollLeft : within.offset.left,
				outerWidth = within.width,
				collisionPosLeft = position.left - data.collisionPosition.marginLeft,
				overLeft = withinOffset - collisionPosLeft,
				overRight = collisionPosLeft + data.collisionWidth - outerWidth - withinOffset,
				newOverRight;

			// element is wider than within
			if ( data.collisionWidth > outerWidth ) {
				// element is initially over the left side of within
				if ( overLeft > 0 && overRight <= 0 ) {
					newOverRight = position.left + overLeft + data.collisionWidth - outerWidth - withinOffset;
					position.left += overLeft - newOverRight;
				// element is initially over right side of within
				} else if ( overRight > 0 && overLeft <= 0 ) {
					position.left = withinOffset;
				// element is initially over both left and right sides of within
				} else {
					if ( overLeft > overRight ) {
						position.left = withinOffset + outerWidth - data.collisionWidth;
					} else {
						position.left = withinOffset;
					}
				}
			// too far left -> align with left edge
			} else if ( overLeft > 0 ) {
				position.left += overLeft;
			// too far right -> align with right edge
			} else if ( overRight > 0 ) {
				position.left -= overRight;
			// adjust based on position and margin
			} else {
				position.left = max( position.left - collisionPosLeft, position.left );
			}
		},
		top: function( position, data ) {
			var within = data.within,
				withinOffset = within.isWindow ? within.scrollTop : within.offset.top,
				outerHeight = data.within.height,
				collisionPosTop = position.top - data.collisionPosition.marginTop,
				overTop = withinOffset - collisionPosTop,
				overBottom = collisionPosTop + data.collisionHeight - outerHeight - withinOffset,
				newOverBottom;

			// element is taller than within
			if ( data.collisionHeight > outerHeight ) {
				// element is initially over the top of within
				if ( overTop > 0 && overBottom <= 0 ) {
					newOverBottom = position.top + overTop + data.collisionHeight - outerHeight - withinOffset;
					position.top += overTop - newOverBottom;
				// element is initially over bottom of within
				} else if ( overBottom > 0 && overTop <= 0 ) {
					position.top = withinOffset;
				// element is initially over both top and bottom of within
				} else {
					if ( overTop > overBottom ) {
						position.top = withinOffset + outerHeight - data.collisionHeight;
					} else {
						position.top = withinOffset;
					}
				}
			// too far up -> align with top
			} else if ( overTop > 0 ) {
				position.top += overTop;
			// too far down -> align with bottom edge
			} else if ( overBottom > 0 ) {
				position.top -= overBottom;
			// adjust based on position and margin
			} else {
				position.top = max( position.top - collisionPosTop, position.top );
			}
		}
	},
	flip: {
		left: function( position, data ) {
			var within = data.within,
				withinOffset = within.offset.left + within.scrollLeft,
				outerWidth = within.width,
				offsetLeft = within.isWindow ? within.scrollLeft : within.offset.left,
				collisionPosLeft = position.left - data.collisionPosition.marginLeft,
				overLeft = collisionPosLeft - offsetLeft,
				overRight = collisionPosLeft + data.collisionWidth - outerWidth - offsetLeft,
				myOffset = data.my[ 0 ] === "left" ?
					-data.elemWidth :
					data.my[ 0 ] === "right" ?
						data.elemWidth :
						0,
				atOffset = data.at[ 0 ] === "left" ?
					data.targetWidth :
					data.at[ 0 ] === "right" ?
						-data.targetWidth :
						0,
				offset = -2 * data.offset[ 0 ],
				newOverRight,
				newOverLeft;

			if ( overLeft < 0 ) {
				newOverRight = position.left + myOffset + atOffset + offset + data.collisionWidth - outerWidth - withinOffset;
				if ( newOverRight < 0 || newOverRight < abs( overLeft ) ) {
					position.left += myOffset + atOffset + offset;
				}
			}
			else if ( overRight > 0 ) {
				newOverLeft = position.left - data.collisionPosition.marginLeft + myOffset + atOffset + offset - offsetLeft;
				if ( newOverLeft > 0 || abs( newOverLeft ) < overRight ) {
					position.left += myOffset + atOffset + offset;
				}
			}
		},
		top: function( position, data ) {
			var within = data.within,
				withinOffset = within.offset.top + within.scrollTop,
				outerHeight = within.height,
				offsetTop = within.isWindow ? within.scrollTop : within.offset.top,
				collisionPosTop = position.top - data.collisionPosition.marginTop,
				overTop = collisionPosTop - offsetTop,
				overBottom = collisionPosTop + data.collisionHeight - outerHeight - offsetTop,
				top = data.my[ 1 ] === "top",
				myOffset = top ?
					-data.elemHeight :
					data.my[ 1 ] === "bottom" ?
						data.elemHeight :
						0,
				atOffset = data.at[ 1 ] === "top" ?
					data.targetHeight :
					data.at[ 1 ] === "bottom" ?
						-data.targetHeight :
						0,
				offset = -2 * data.offset[ 1 ],
				newOverTop,
				newOverBottom;
			if ( overTop < 0 ) {
				newOverBottom = position.top + myOffset + atOffset + offset + data.collisionHeight - outerHeight - withinOffset;
				if ( ( position.top + myOffset + atOffset + offset) > overTop && ( newOverBottom < 0 || newOverBottom < abs( overTop ) ) ) {
					position.top += myOffset + atOffset + offset;
				}
			}
			else if ( overBottom > 0 ) {
				newOverTop = position.top -  data.collisionPosition.marginTop + myOffset + atOffset + offset - offsetTop;
				if ( ( position.top + myOffset + atOffset + offset) > overBottom && ( newOverTop > 0 || abs( newOverTop ) < overBottom ) ) {
					position.top += myOffset + atOffset + offset;
				}
			}
		}
	},
	flipfit: {
		left: function() {
			$.ui.position.flip.left.apply( this, arguments );
			$.ui.position.fit.left.apply( this, arguments );
		},
		top: function() {
			$.ui.position.flip.top.apply( this, arguments );
			$.ui.position.fit.top.apply( this, arguments );
		}
	}
};

// fraction support test
(function () {
	var testElement, testElementParent, testElementStyle, offsetLeft, i,
		body = document.getElementsByTagName( "body" )[ 0 ],
		div = document.createElement( "div" );

	//Create a "fake body" for testing based on method used in jQuery.support
	testElement = document.createElement( body ? "div" : "body" );
	testElementStyle = {
		visibility: "hidden",
		width: 0,
		height: 0,
		border: 0,
		margin: 0,
		background: "none"
	};
	if ( body ) {
		$.extend( testElementStyle, {
			position: "absolute",
			left: "-1000px",
			top: "-1000px"
		});
	}
	for ( i in testElementStyle ) {
		testElement.style[ i ] = testElementStyle[ i ];
	}
	testElement.appendChild( div );
	testElementParent = body || document.documentElement;
	testElementParent.insertBefore( testElement, testElementParent.firstChild );

	div.style.cssText = "position: absolute; left: 10.7432222px;";

	offsetLeft = $( div ).offset().left;
	$.support.offsetFractions = offsetLeft > 10 && offsetLeft < 11;

	testElement.innerHTML = "";
	testElementParent.removeChild( testElement );
})();

}( jQuery ) );

(function( $, undefined ) {

$.widget( "ui.progressbar", {
	version: "1.10.3",
	options: {
		max: 100,
		value: 0,

		change: null,
		complete: null
	},

	min: 0,

	_create: function() {
		// Constrain initial value
		this.oldValue = this.options.value = this._constrainedValue();

		this.element
			.addClass( "ui-progressbar ui-widget ui-widget-content ui-corner-all" )
			.attr({
				// Only set static values, aria-valuenow and aria-valuemax are
				// set inside _refreshValue()
				role: "progressbar",
				"aria-valuemin": this.min
			});

		this.valueDiv = $( "<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>" )
			.appendTo( this.element );

		this._refreshValue();
	},

	_destroy: function() {
		this.element
			.removeClass( "ui-progressbar ui-widget ui-widget-content ui-corner-all" )
			.removeAttr( "role" )
			.removeAttr( "aria-valuemin" )
			.removeAttr( "aria-valuemax" )
			.removeAttr( "aria-valuenow" );

		this.valueDiv.remove();
	},

	value: function( newValue ) {
		if ( newValue === undefined ) {
			return this.options.value;
		}

		this.options.value = this._constrainedValue( newValue );
		this._refreshValue();
	},

	_constrainedValue: function( newValue ) {
		if ( newValue === undefined ) {
			newValue = this.options.value;
		}

		this.indeterminate = newValue === false;

		// sanitize value
		if ( typeof newValue !== "number" ) {
			newValue = 0;
		}

		return this.indeterminate ? false :
			Math.min( this.options.max, Math.max( this.min, newValue ) );
	},

	_setOptions: function( options ) {
		// Ensure "value" option is set after other values (like max)
		var value = options.value;
		delete options.value;

		this._super( options );

		this.options.value = this._constrainedValue( value );
		this._refreshValue();
	},

	_setOption: function( key, value ) {
		if ( key === "max" ) {
			// Don't allow a max less than min
			value = Math.max( this.min, value );
		}

		this._super( key, value );
	},

	_percentage: function() {
		return this.indeterminate ? 100 : 100 * ( this.options.value - this.min ) / ( this.options.max - this.min );
	},

	_refreshValue: function() {
		var value = this.options.value,
			percentage = this._percentage();

		this.valueDiv
			.toggle( this.indeterminate || value > this.min )
			.toggleClass( "ui-corner-right", value === this.options.max )
			.width( percentage.toFixed(0) + "%" );

		this.element.toggleClass( "ui-progressbar-indeterminate", this.indeterminate );

		if ( this.indeterminate ) {
			this.element.removeAttr( "aria-valuenow" );
			if ( !this.overlayDiv ) {
				this.overlayDiv = $( "<div class='ui-progressbar-overlay'></div>" ).appendTo( this.valueDiv );
			}
		} else {
			this.element.attr({
				"aria-valuemax": this.options.max,
				"aria-valuenow": value
			});
			if ( this.overlayDiv ) {
				this.overlayDiv.remove();
				this.overlayDiv = null;
			}
		}

		if ( this.oldValue !== value ) {
			this.oldValue = value;
			this._trigger( "change" );
		}
		if ( value === this.options.max ) {
			this._trigger( "complete" );
		}
	}
});

})( jQuery );

(function( $, undefined ) {

// number of pages in a slider
// (how many times can you page up/down to go through the whole range)
var numPages = 5;

$.widget( "ui.slider", $.ui.mouse, {
	version: "1.10.3",
	widgetEventPrefix: "slide",

	options: {
		animate: false,
		distance: 0,
		max: 100,
		min: 0,
		orientation: "horizontal",
		range: false,
		step: 1,
		value: 0,
		values: null,

		// callbacks
		change: null,
		slide: null,
		start: null,
		stop: null
	},

	_create: function() {
		this._keySliding = false;
		this._mouseSliding = false;
		this._animateOff = true;
		this._handleIndex = null;
		this._detectOrientation();
		this._mouseInit();

		this.element
			.addClass( "ui-slider" +
				" ui-slider-" + this.orientation +
				" ui-widget" +
				" ui-widget-content" +
				" ui-corner-all");

		this._refresh();
		this._setOption( "disabled", this.options.disabled );

		this._animateOff = false;
	},

	_refresh: function() {
		this._createRange();
		this._createHandles();
		this._setupEvents();
		this._refreshValue();
	},

	_createHandles: function() {
		var i, handleCount,
			options = this.options,
			existingHandles = this.element.find( ".ui-slider-handle" ).addClass( "ui-state-default ui-corner-all" ),
			handle = "<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",
			handles = [];

		handleCount = ( options.values && options.values.length ) || 1;

		if ( existingHandles.length > handleCount ) {
			existingHandles.slice( handleCount ).remove();
			existingHandles = existingHandles.slice( 0, handleCount );
		}

		for ( i = existingHandles.length; i < handleCount; i++ ) {
			handles.push( handle );
		}

		this.handles = existingHandles.add( $( handles.join( "" ) ).appendTo( this.element ) );

		this.handle = this.handles.eq( 0 );

		this.handles.each(function( i ) {
			$( this ).data( "ui-slider-handle-index", i );
		});
	},

	_createRange: function() {
		var options = this.options,
			classes = "";

		if ( options.range ) {
			if ( options.range === true ) {
				if ( !options.values ) {
					options.values = [ this._valueMin(), this._valueMin() ];
				} else if ( options.values.length && options.values.length !== 2 ) {
					options.values = [ options.values[0], options.values[0] ];
				} else if ( $.isArray( options.values ) ) {
					options.values = options.values.slice(0);
				}
			}

			if ( !this.range || !this.range.length ) {
				this.range = $( "<div></div>" )
					.appendTo( this.element );

				classes = "ui-slider-range" +
				// note: this isn't the most fittingly semantic framework class for this element,
				// but worked best visually with a variety of themes
				" ui-widget-header ui-corner-all";
			} else {
				this.range.removeClass( "ui-slider-range-min ui-slider-range-max" )
					// Handle range switching from true to min/max
					.css({
						"left": "",
						"bottom": ""
					});
			}

			this.range.addClass( classes +
				( ( options.range === "min" || options.range === "max" ) ? " ui-slider-range-" + options.range : "" ) );
		} else {
			this.range = $([]);
		}
	},

	_setupEvents: function() {
		var elements = this.handles.add( this.range ).filter( "a" );
		this._off( elements );
		this._on( elements, this._handleEvents );
		this._hoverable( elements );
		this._focusable( elements );
	},

	_destroy: function() {
		this.handles.remove();
		this.range.remove();

		this.element
			.removeClass( "ui-slider" +
				" ui-slider-horizontal" +
				" ui-slider-vertical" +
				" ui-widget" +
				" ui-widget-content" +
				" ui-corner-all" );

		this._mouseDestroy();
	},

	_mouseCapture: function( event ) {
		var position, normValue, distance, closestHandle, index, allowed, offset, mouseOverHandle,
			that = this,
			o = this.options;

		if ( o.disabled ) {
			return false;
		}

		this.elementSize = {
			width: this.element.outerWidth(),
			height: this.element.outerHeight()
		};
		this.elementOffset = this.element.offset();

		position = { x: event.pageX, y: event.pageY };
		normValue = this._normValueFromMouse( position );
		distance = this._valueMax() - this._valueMin() + 1;
		this.handles.each(function( i ) {
			var thisDistance = Math.abs( normValue - that.values(i) );
			if (( distance > thisDistance ) ||
				( distance === thisDistance &&
					(i === that._lastChangedValue || that.values(i) === o.min ))) {
				distance = thisDistance;
				closestHandle = $( this );
				index = i;
			}
		});

		allowed = this._start( event, index );
		if ( allowed === false ) {
			return false;
		}
		this._mouseSliding = true;

		this._handleIndex = index;

		closestHandle
			.addClass( "ui-state-active" )
			.focus();

		offset = closestHandle.offset();
		mouseOverHandle = !$( event.target ).parents().addBack().is( ".ui-slider-handle" );
		this._clickOffset = mouseOverHandle ? { left: 0, top: 0 } : {
			left: event.pageX - offset.left - ( closestHandle.width() / 2 ),
			top: event.pageY - offset.top -
				( closestHandle.height() / 2 ) -
				( parseInt( closestHandle.css("borderTopWidth"), 10 ) || 0 ) -
				( parseInt( closestHandle.css("borderBottomWidth"), 10 ) || 0) +
				( parseInt( closestHandle.css("marginTop"), 10 ) || 0)
		};

		if ( !this.handles.hasClass( "ui-state-hover" ) ) {
			this._slide( event, index, normValue );
		}
		this._animateOff = true;
		return true;
	},

	_mouseStart: function() {
		return true;
	},

	_mouseDrag: function( event ) {
		var position = { x: event.pageX, y: event.pageY },
			normValue = this._normValueFromMouse( position );

		this._slide( event, this._handleIndex, normValue );

		return false;
	},

	_mouseStop: function( event ) {
		this.handles.removeClass( "ui-state-active" );
		this._mouseSliding = false;

		this._stop( event, this._handleIndex );
		this._change( event, this._handleIndex );

		this._handleIndex = null;
		this._clickOffset = null;
		this._animateOff = false;

		return false;
	},

	_detectOrientation: function() {
		this.orientation = ( this.options.orientation === "vertical" ) ? "vertical" : "horizontal";
	},

	_normValueFromMouse: function( position ) {
		var pixelTotal,
			pixelMouse,
			percentMouse,
			valueTotal,
			valueMouse;

		if ( this.orientation === "horizontal" ) {
			pixelTotal = this.elementSize.width;
			pixelMouse = position.x - this.elementOffset.left - ( this._clickOffset ? this._clickOffset.left : 0 );
		} else {
			pixelTotal = this.elementSize.height;
			pixelMouse = position.y - this.elementOffset.top - ( this._clickOffset ? this._clickOffset.top : 0 );
		}

		percentMouse = ( pixelMouse / pixelTotal );
		if ( percentMouse > 1 ) {
			percentMouse = 1;
		}
		if ( percentMouse < 0 ) {
			percentMouse = 0;
		}
		if ( this.orientation === "vertical" ) {
			percentMouse = 1 - percentMouse;
		}

		valueTotal = this._valueMax() - this._valueMin();
		valueMouse = this._valueMin() + percentMouse * valueTotal;

		return this._trimAlignValue( valueMouse );
	},

	_start: function( event, index ) {
		var uiHash = {
			handle: this.handles[ index ],
			value: this.value()
		};
		if ( this.options.values && this.options.values.length ) {
			uiHash.value = this.values( index );
			uiHash.values = this.values();
		}
		return this._trigger( "start", event, uiHash );
	},

	_slide: function( event, index, newVal ) {
		var otherVal,
			newValues,
			allowed;

		if ( this.options.values && this.options.values.length ) {
			otherVal = this.values( index ? 0 : 1 );

			if ( ( this.options.values.length === 2 && this.options.range === true ) &&
					( ( index === 0 && newVal > otherVal) || ( index === 1 && newVal < otherVal ) )
				) {
				newVal = otherVal;
			}

			if ( newVal !== this.values( index ) ) {
				newValues = this.values();
				newValues[ index ] = newVal;
				// A slide can be canceled by returning false from the slide callback
				allowed = this._trigger( "slide", event, {
					handle: this.handles[ index ],
					value: newVal,
					values: newValues
				} );
				otherVal = this.values( index ? 0 : 1 );
				if ( allowed !== false ) {
					this.values( index, newVal, true );
				}
			}
		} else {
			if ( newVal !== this.value() ) {
				// A slide can be canceled by returning false from the slide callback
				allowed = this._trigger( "slide", event, {
					handle: this.handles[ index ],
					value: newVal
				} );
				if ( allowed !== false ) {
					this.value( newVal );
				}
			}
		}
	},

	_stop: function( event, index ) {
		var uiHash = {
			handle: this.handles[ index ],
			value: this.value()
		};
		if ( this.options.values && this.options.values.length ) {
			uiHash.value = this.values( index );
			uiHash.values = this.values();
		}

		this._trigger( "stop", event, uiHash );
	},

	_change: function( event, index ) {
		if ( !this._keySliding && !this._mouseSliding ) {
			var uiHash = {
				handle: this.handles[ index ],
				value: this.value()
			};
			if ( this.options.values && this.options.values.length ) {
				uiHash.value = this.values( index );
				uiHash.values = this.values();
			}

			//store the last changed value index for reference when handles overlap
			this._lastChangedValue = index;

			this._trigger( "change", event, uiHash );
		}
	},

	value: function( newValue ) {
		if ( arguments.length ) {
			this.options.value = this._trimAlignValue( newValue );
			this._refreshValue();
			this._change( null, 0 );
			return;
		}

		return this._value();
	},

	values: function( index, newValue ) {
		var vals,
			newValues,
			i;

		if ( arguments.length > 1 ) {
			this.options.values[ index ] = this._trimAlignValue( newValue );
			this._refreshValue();
			this._change( null, index );
			return;
		}

		if ( arguments.length ) {
			if ( $.isArray( arguments[ 0 ] ) ) {
				vals = this.options.values;
				newValues = arguments[ 0 ];
				for ( i = 0; i < vals.length; i += 1 ) {
					vals[ i ] = this._trimAlignValue( newValues[ i ] );
					this._change( null, i );
				}
				this._refreshValue();
			} else {
				if ( this.options.values && this.options.values.length ) {
					return this._values( index );
				} else {
					return this.value();
				}
			}
		} else {
			return this._values();
		}
	},

	_setOption: function( key, value ) {
		var i,
			valsLength = 0;

		if ( key === "range" && this.options.range === true ) {
			if ( value === "min" ) {
				this.options.value = this._values( 0 );
				this.options.values = null;
			} else if ( value === "max" ) {
				this.options.value = this._values( this.options.values.length-1 );
				this.options.values = null;
			}
		}

		if ( $.isArray( this.options.values ) ) {
			valsLength = this.options.values.length;
		}

		$.Widget.prototype._setOption.apply( this, arguments );

		switch ( key ) {
			case "orientation":
				this._detectOrientation();
				this.element
					.removeClass( "ui-slider-horizontal ui-slider-vertical" )
					.addClass( "ui-slider-" + this.orientation );
				this._refreshValue();
				break;
			case "value":
				this._animateOff = true;
				this._refreshValue();
				this._change( null, 0 );
				this._animateOff = false;
				break;
			case "values":
				this._animateOff = true;
				this._refreshValue();
				for ( i = 0; i < valsLength; i += 1 ) {
					this._change( null, i );
				}
				this._animateOff = false;
				break;
			case "min":
			case "max":
				this._animateOff = true;
				this._refreshValue();
				this._animateOff = false;
				break;
			case "range":
				this._animateOff = true;
				this._refresh();
				this._animateOff = false;
				break;
		}
	},

	//internal value getter
	// _value() returns value trimmed by min and max, aligned by step
	_value: function() {
		var val = this.options.value;
		val = this._trimAlignValue( val );

		return val;
	},

	//internal values getter
	// _values() returns array of values trimmed by min and max, aligned by step
	// _values( index ) returns single value trimmed by min and max, aligned by step
	_values: function( index ) {
		var val,
			vals,
			i;

		if ( arguments.length ) {
			val = this.options.values[ index ];
			val = this._trimAlignValue( val );

			return val;
		} else if ( this.options.values && this.options.values.length ) {
			// .slice() creates a copy of the array
			// this copy gets trimmed by min and max and then returned
			vals = this.options.values.slice();
			for ( i = 0; i < vals.length; i+= 1) {
				vals[ i ] = this._trimAlignValue( vals[ i ] );
			}

			return vals;
		} else {
			return [];
		}
	},

	// returns the step-aligned value that val is closest to, between (inclusive) min and max
	_trimAlignValue: function( val ) {
		if ( val <= this._valueMin() ) {
			return this._valueMin();
		}
		if ( val >= this._valueMax() ) {
			return this._valueMax();
		}
		var step = ( this.options.step > 0 ) ? this.options.step : 1,
			valModStep = (val - this._valueMin()) % step,
			alignValue = val - valModStep;

		if ( Math.abs(valModStep) * 2 >= step ) {
			alignValue += ( valModStep > 0 ) ? step : ( -step );
		}

		// Since JavaScript has problems with large floats, round
		// the final value to 5 digits after the decimal point (see #4124)
		return parseFloat( alignValue.toFixed(5) );
	},

	_valueMin: function() {
		return this.options.min;
	},

	_valueMax: function() {
		return this.options.max;
	},

	_refreshValue: function() {
		var lastValPercent, valPercent, value, valueMin, valueMax,
			oRange = this.options.range,
			o = this.options,
			that = this,
			animate = ( !this._animateOff ) ? o.animate : false,
			_set = {};

		if ( this.options.values && this.options.values.length ) {
			this.handles.each(function( i ) {
				valPercent = ( that.values(i) - that._valueMin() ) / ( that._valueMax() - that._valueMin() ) * 100;
				_set[ that.orientation === "horizontal" ? "left" : "bottom" ] = valPercent + "%";
				$( this ).stop( 1, 1 )[ animate ? "animate" : "css" ]( _set, o.animate );
				if ( that.options.range === true ) {
					if ( that.orientation === "horizontal" ) {
						if ( i === 0 ) {
							that.range.stop( 1, 1 )[ animate ? "animate" : "css" ]( { left: valPercent + "%" }, o.animate );
						}
						if ( i === 1 ) {
							that.range[ animate ? "animate" : "css" ]( { width: ( valPercent - lastValPercent ) + "%" }, { queue: false, duration: o.animate } );
						}
					} else {
						if ( i === 0 ) {
							that.range.stop( 1, 1 )[ animate ? "animate" : "css" ]( { bottom: ( valPercent ) + "%" }, o.animate );
						}
						if ( i === 1 ) {
							that.range[ animate ? "animate" : "css" ]( { height: ( valPercent - lastValPercent ) + "%" }, { queue: false, duration: o.animate } );
						}
					}
				}
				lastValPercent = valPercent;
			});
		} else {
			value = this.value();
			valueMin = this._valueMin();
			valueMax = this._valueMax();
			valPercent = ( valueMax !== valueMin ) ?
					( value - valueMin ) / ( valueMax - valueMin ) * 100 :
					0;
			_set[ this.orientation === "horizontal" ? "left" : "bottom" ] = valPercent + "%";
			this.handle.stop( 1, 1 )[ animate ? "animate" : "css" ]( _set, o.animate );

			if ( oRange === "min" && this.orientation === "horizontal" ) {
				this.range.stop( 1, 1 )[ animate ? "animate" : "css" ]( { width: valPercent + "%" }, o.animate );
			}
			if ( oRange === "max" && this.orientation === "horizontal" ) {
				this.range[ animate ? "animate" : "css" ]( { width: ( 100 - valPercent ) + "%" }, { queue: false, duration: o.animate } );
			}
			if ( oRange === "min" && this.orientation === "vertical" ) {
				this.range.stop( 1, 1 )[ animate ? "animate" : "css" ]( { height: valPercent + "%" }, o.animate );
			}
			if ( oRange === "max" && this.orientation === "vertical" ) {
				this.range[ animate ? "animate" : "css" ]( { height: ( 100 - valPercent ) + "%" }, { queue: false, duration: o.animate } );
			}
		}
	},

	_handleEvents: {
		keydown: function( event ) {
			/*jshint maxcomplexity:25*/
			var allowed, curVal, newVal, step,
				index = $( event.target ).data( "ui-slider-handle-index" );

			switch ( event.keyCode ) {
				case $.ui.keyCode.HOME:
				case $.ui.keyCode.END:
				case $.ui.keyCode.PAGE_UP:
				case $.ui.keyCode.PAGE_DOWN:
				case $.ui.keyCode.UP:
				case $.ui.keyCode.RIGHT:
				case $.ui.keyCode.DOWN:
				case $.ui.keyCode.LEFT:
					event.preventDefault();
					if ( !this._keySliding ) {
						this._keySliding = true;
						$( event.target ).addClass( "ui-state-active" );
						allowed = this._start( event, index );
						if ( allowed === false ) {
							return;
						}
					}
					break;
			}

			step = this.options.step;
			if ( this.options.values && this.options.values.length ) {
				curVal = newVal = this.values( index );
			} else {
				curVal = newVal = this.value();
			}

			switch ( event.keyCode ) {
				case $.ui.keyCode.HOME:
					newVal = this._valueMin();
					break;
				case $.ui.keyCode.END:
					newVal = this._valueMax();
					break;
				case $.ui.keyCode.PAGE_UP:
					newVal = this._trimAlignValue( curVal + ( (this._valueMax() - this._valueMin()) / numPages ) );
					break;
				case $.ui.keyCode.PAGE_DOWN:
					newVal = this._trimAlignValue( curVal - ( (this._valueMax() - this._valueMin()) / numPages ) );
					break;
				case $.ui.keyCode.UP:
				case $.ui.keyCode.RIGHT:
					if ( curVal === this._valueMax() ) {
						return;
					}
					newVal = this._trimAlignValue( curVal + step );
					break;
				case $.ui.keyCode.DOWN:
				case $.ui.keyCode.LEFT:
					if ( curVal === this._valueMin() ) {
						return;
					}
					newVal = this._trimAlignValue( curVal - step );
					break;
			}

			this._slide( event, index, newVal );
		},
		click: function( event ) {
			event.preventDefault();
		},
		keyup: function( event ) {
			var index = $( event.target ).data( "ui-slider-handle-index" );

			if ( this._keySliding ) {
				this._keySliding = false;
				this._stop( event, index );
				this._change( event, index );
				$( event.target ).removeClass( "ui-state-active" );
			}
		}
	}

});

}(jQuery));

(function( $ ) {

function modifier( fn ) {
	return function() {
		var previous = this.element.val();
		fn.apply( this, arguments );
		this._refresh();
		if ( previous !== this.element.val() ) {
			this._trigger( "change" );
		}
	};
}

$.widget( "ui.spinner", {
	version: "1.10.3",
	defaultElement: "<input>",
	widgetEventPrefix: "spin",
	options: {
		culture: null,
		icons: {
			down: "ui-icon-triangle-1-s",
			up: "ui-icon-triangle-1-n"
		},
		incremental: true,
		max: null,
		min: null,
		numberFormat: null,
		page: 10,
		step: 1,

		change: null,
		spin: null,
		start: null,
		stop: null
	},

	_create: function() {
		// handle string values that need to be parsed
		this._setOption( "max", this.options.max );
		this._setOption( "min", this.options.min );
		this._setOption( "step", this.options.step );

		// format the value, but don't constrain
		this._value( this.element.val(), true );

		this._draw();
		this._on( this._events );
		this._refresh();

		// turning off autocomplete prevents the browser from remembering the
		// value when navigating through history, so we re-enable autocomplete
		// if the page is unloaded before the widget is destroyed. #7790
		this._on( this.window, {
			beforeunload: function() {
				this.element.removeAttr( "autocomplete" );
			}
		});
	},

	_getCreateOptions: function() {
		var options = {},
			element = this.element;

		$.each( [ "min", "max", "step" ], function( i, option ) {
			var value = element.attr( option );
			if ( value !== undefined && value.length ) {
				options[ option ] = value;
			}
		});

		return options;
	},

	_events: {
		keydown: function( event ) {
			if ( this._start( event ) && this._keydown( event ) ) {
				event.preventDefault();
			}
		},
		keyup: "_stop",
		focus: function() {
			this.previous = this.element.val();
		},
		blur: function( event ) {
			if ( this.cancelBlur ) {
				delete this.cancelBlur;
				return;
			}

			this._stop();
			this._refresh();
			if ( this.previous !== this.element.val() ) {
				this._trigger( "change", event );
			}
		},
		mousewheel: function( event, delta ) {
			if ( !delta ) {
				return;
			}
			if ( !this.spinning && !this._start( event ) ) {
				return false;
			}

			this._spin( (delta > 0 ? 1 : -1) * this.options.step, event );
			clearTimeout( this.mousewheelTimer );
			this.mousewheelTimer = this._delay(function() {
				if ( this.spinning ) {
					this._stop( event );
				}
			}, 100 );
			event.preventDefault();
		},
		"mousedown .ui-spinner-button": function( event ) {
			var previous;

			// We never want the buttons to have focus; whenever the user is
			// interacting with the spinner, the focus should be on the input.
			// If the input is focused then this.previous is properly set from
			// when the input first received focus. If the input is not focused
			// then we need to set this.previous based on the value before spinning.
			previous = this.element[0] === this.document[0].activeElement ?
				this.previous : this.element.val();
			function checkFocus() {
				var isActive = this.element[0] === this.document[0].activeElement;
				if ( !isActive ) {
					this.element.focus();
					this.previous = previous;
					// support: IE
					// IE sets focus asynchronously, so we need to check if focus
					// moved off of the input because the user clicked on the button.
					this._delay(function() {
						this.previous = previous;
					});
				}
			}

			// ensure focus is on (or stays on) the text field
			event.preventDefault();
			checkFocus.call( this );

			// support: IE
			// IE doesn't prevent moving focus even with event.preventDefault()
			// so we set a flag to know when we should ignore the blur event
			// and check (again) if focus moved off of the input.
			this.cancelBlur = true;
			this._delay(function() {
				delete this.cancelBlur;
				checkFocus.call( this );
			});

			if ( this._start( event ) === false ) {
				return;
			}

			this._repeat( null, $( event.currentTarget ).hasClass( "ui-spinner-up" ) ? 1 : -1, event );
		},
		"mouseup .ui-spinner-button": "_stop",
		"mouseenter .ui-spinner-button": function( event ) {
			// button will add ui-state-active if mouse was down while mouseleave and kept down
			if ( !$( event.currentTarget ).hasClass( "ui-state-active" ) ) {
				return;
			}

			if ( this._start( event ) === false ) {
				return false;
			}
			this._repeat( null, $( event.currentTarget ).hasClass( "ui-spinner-up" ) ? 1 : -1, event );
		},
		// TODO: do we really want to consider this a stop?
		// shouldn't we just stop the repeater and wait until mouseup before
		// we trigger the stop event?
		"mouseleave .ui-spinner-button": "_stop"
	},

	_draw: function() {
		var uiSpinner = this.uiSpinner = this.element
			.addClass( "ui-spinner-input" )
			.attr( "autocomplete", "off" )
			.wrap( this._uiSpinnerHtml() )
			.parent()
				// add buttons
				.append( this._buttonHtml() );

		this.element.attr( "role", "spinbutton" );

		// button bindings
		this.buttons = uiSpinner.find( ".ui-spinner-button" )
			.attr( "tabIndex", -1 )
			.button()
			.removeClass( "ui-corner-all" );

		// IE 6 doesn't understand height: 50% for the buttons
		// unless the wrapper has an explicit height
		if ( this.buttons.height() > Math.ceil( uiSpinner.height() * 0.5 ) &&
				uiSpinner.height() > 0 ) {
			uiSpinner.height( uiSpinner.height() );
		}

		// disable spinner if element was already disabled
		if ( this.options.disabled ) {
			this.disable();
		}
	},

	_keydown: function( event ) {
		var options = this.options,
			keyCode = $.ui.keyCode;

		switch ( event.keyCode ) {
		case keyCode.UP:
			this._repeat( null, 1, event );
			return true;
		case keyCode.DOWN:
			this._repeat( null, -1, event );
			return true;
		case keyCode.PAGE_UP:
			this._repeat( null, options.page, event );
			return true;
		case keyCode.PAGE_DOWN:
			this._repeat( null, -options.page, event );
			return true;
		}

		return false;
	},

	_uiSpinnerHtml: function() {
		return "<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>";
	},

	_buttonHtml: function() {
		return "" +
			"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'>" +
				"<span class='ui-icon " + this.options.icons.up + "'>&#9650;</span>" +
			"</a>" +
			"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>" +
				"<span class='ui-icon " + this.options.icons.down + "'>&#9660;</span>" +
			"</a>";
	},

	_start: function( event ) {
		if ( !this.spinning && this._trigger( "start", event ) === false ) {
			return false;
		}

		if ( !this.counter ) {
			this.counter = 1;
		}
		this.spinning = true;
		return true;
	},

	_repeat: function( i, steps, event ) {
		i = i || 500;

		clearTimeout( this.timer );
		this.timer = this._delay(function() {
			this._repeat( 40, steps, event );
		}, i );

		this._spin( steps * this.options.step, event );
	},

	_spin: function( step, event ) {
		var value = this.value() || 0;

		if ( !this.counter ) {
			this.counter = 1;
		}

		value = this._adjustValue( value + step * this._increment( this.counter ) );

		if ( !this.spinning || this._trigger( "spin", event, { value: value } ) !== false) {
			this._value( value );
			this.counter++;
		}
	},

	_increment: function( i ) {
		var incremental = this.options.incremental;

		if ( incremental ) {
			return $.isFunction( incremental ) ?
				incremental( i ) :
				Math.floor( i*i*i/50000 - i*i/500 + 17*i/200 + 1 );
		}

		return 1;
	},

	_precision: function() {
		var precision = this._precisionOf( this.options.step );
		if ( this.options.min !== null ) {
			precision = Math.max( precision, this._precisionOf( this.options.min ) );
		}
		return precision;
	},

	_precisionOf: function( num ) {
		var str = num.toString(),
			decimal = str.indexOf( "." );
		return decimal === -1 ? 0 : str.length - decimal - 1;
	},

	_adjustValue: function( value ) {
		var base, aboveMin,
			options = this.options;

		// make sure we're at a valid step
		// - find out where we are relative to the base (min or 0)
		base = options.min !== null ? options.min : 0;
		aboveMin = value - base;
		// - round to the nearest step
		aboveMin = Math.round(aboveMin / options.step) * options.step;
		// - rounding is based on 0, so adjust back to our base
		value = base + aboveMin;

		// fix precision from bad JS floating point math
		value = parseFloat( value.toFixed( this._precision() ) );

		// clamp the value
		if ( options.max !== null && value > options.max) {
			return options.max;
		}
		if ( options.min !== null && value < options.min ) {
			return options.min;
		}

		return value;
	},

	_stop: function( event ) {
		if ( !this.spinning ) {
			return;
		}

		clearTimeout( this.timer );
		clearTimeout( this.mousewheelTimer );
		this.counter = 0;
		this.spinning = false;
		this._trigger( "stop", event );
	},

	_setOption: function( key, value ) {
		if ( key === "culture" || key === "numberFormat" ) {
			var prevValue = this._parse( this.element.val() );
			this.options[ key ] = value;
			this.element.val( this._format( prevValue ) );
			return;
		}

		if ( key === "max" || key === "min" || key === "step" ) {
			if ( typeof value === "string" ) {
				value = this._parse( value );
			}
		}
		if ( key === "icons" ) {
			this.buttons.first().find( ".ui-icon" )
				.removeClass( this.options.icons.up )
				.addClass( value.up );
			this.buttons.last().find( ".ui-icon" )
				.removeClass( this.options.icons.down )
				.addClass( value.down );
		}

		this._super( key, value );

		if ( key === "disabled" ) {
			if ( value ) {
				this.element.prop( "disabled", true );
				this.buttons.button( "disable" );
			} else {
				this.element.prop( "disabled", false );
				this.buttons.button( "enable" );
			}
		}
	},

	_setOptions: modifier(function( options ) {
		this._super( options );
		this._value( this.element.val() );
	}),

	_parse: function( val ) {
		if ( typeof val === "string" && val !== "" ) {
			val = window.Globalize && this.options.numberFormat ?
				Globalize.parseFloat( val, 10, this.options.culture ) : +val;
		}
		return val === "" || isNaN( val ) ? null : val;
	},

	_format: function( value ) {
		if ( value === "" ) {
			return "";
		}
		return window.Globalize && this.options.numberFormat ?
			Globalize.format( value, this.options.numberFormat, this.options.culture ) :
			value;
	},

	_refresh: function() {
		this.element.attr({
			"aria-valuemin": this.options.min,
			"aria-valuemax": this.options.max,
			// TODO: what should we do with values that can't be parsed?
			"aria-valuenow": this._parse( this.element.val() )
		});
	},

	// update the value without triggering change
	_value: function( value, allowAny ) {
		var parsed;
		if ( value !== "" ) {
			parsed = this._parse( value );
			if ( parsed !== null ) {
				if ( !allowAny ) {
					parsed = this._adjustValue( parsed );
				}
				value = this._format( parsed );
			}
		}
		this.element.val( value );
		this._refresh();
	},

	_destroy: function() {
		this.element
			.removeClass( "ui-spinner-input" )
			.prop( "disabled", false )
			.removeAttr( "autocomplete" )
			.removeAttr( "role" )
			.removeAttr( "aria-valuemin" )
			.removeAttr( "aria-valuemax" )
			.removeAttr( "aria-valuenow" );
		this.uiSpinner.replaceWith( this.element );
	},

	stepUp: modifier(function( steps ) {
		this._stepUp( steps );
	}),
	_stepUp: function( steps ) {
		if ( this._start() ) {
			this._spin( (steps || 1) * this.options.step );
			this._stop();
		}
	},

	stepDown: modifier(function( steps ) {
		this._stepDown( steps );
	}),
	_stepDown: function( steps ) {
		if ( this._start() ) {
			this._spin( (steps || 1) * -this.options.step );
			this._stop();
		}
	},

	pageUp: modifier(function( pages ) {
		this._stepUp( (pages || 1) * this.options.page );
	}),

	pageDown: modifier(function( pages ) {
		this._stepDown( (pages || 1) * this.options.page );
	}),

	value: function( newVal ) {
		if ( !arguments.length ) {
			return this._parse( this.element.val() );
		}
		modifier( this._value ).call( this, newVal );
	},

	widget: function() {
		return this.uiSpinner;
	}
});

}( jQuery ) );

(function( $, undefined ) {

var tabId = 0,
	rhash = /#.*$/;

function getNextTabId() {
	return ++tabId;
}

function isLocal( anchor ) {
	return anchor.hash.length > 1 &&
		decodeURIComponent( anchor.href.replace( rhash, "" ) ) ===
			decodeURIComponent( location.href.replace( rhash, "" ) );
}

$.widget( "ui.tabs", {
	version: "1.10.3",
	delay: 300,
	options: {
		active: null,
		collapsible: false,
		event: "click",
		heightStyle: "content",
		hide: null,
		show: null,

		// callbacks
		activate: null,
		beforeActivate: null,
		beforeLoad: null,
		load: null
	},

	_create: function() {
		var that = this,
			options = this.options;

		this.running = false;

		this.element
			.addClass( "ui-tabs ui-widget ui-widget-content ui-corner-all" )
			.toggleClass( "ui-tabs-collapsible", options.collapsible )
			// Prevent users from focusing disabled tabs via click
			.delegate( ".ui-tabs-nav > li", "mousedown" + this.eventNamespace, function( event ) {
				if ( $( this ).is( ".ui-state-disabled" ) ) {
					event.preventDefault();
				}
			})
			// support: IE <9
			// Preventing the default action in mousedown doesn't prevent IE
			// from focusing the element, so if the anchor gets focused, blur.
			// We don't have to worry about focusing the previously focused
			// element since clicking on a non-focusable element should focus
			// the body anyway.
			.delegate( ".ui-tabs-anchor", "focus" + this.eventNamespace, function() {
				if ( $( this ).closest( "li" ).is( ".ui-state-disabled" ) ) {
					this.blur();
				}
			});

		this._processTabs();
		options.active = this._initialActive();

		// Take disabling tabs via class attribute from HTML
		// into account and update option properly.
		if ( $.isArray( options.disabled ) ) {
			options.disabled = $.unique( options.disabled.concat(
				$.map( this.tabs.filter( ".ui-state-disabled" ), function( li ) {
					return that.tabs.index( li );
				})
			) ).sort();
		}

		// check for length avoids error when initializing empty list
		if ( this.options.active !== false && this.anchors.length ) {
			this.active = this._findActive( options.active );
		} else {
			this.active = $();
		}

		this._refresh();

		if ( this.active.length ) {
			this.load( options.active );
		}
	},

	_initialActive: function() {
		var active = this.options.active,
			collapsible = this.options.collapsible,
			locationHash = location.hash.substring( 1 );

		if ( active === null ) {
			// check the fragment identifier in the URL
			if ( locationHash ) {
				this.tabs.each(function( i, tab ) {
					if ( $( tab ).attr( "aria-controls" ) === locationHash ) {
						active = i;
						return false;
					}
				});
			}

			// check for a tab marked active via a class
			if ( active === null ) {
				active = this.tabs.index( this.tabs.filter( ".ui-tabs-active" ) );
			}

			// no active tab, set to false
			if ( active === null || active === -1 ) {
				active = this.tabs.length ? 0 : false;
			}
		}

		// handle numbers: negative, out of range
		if ( active !== false ) {
			active = this.tabs.index( this.tabs.eq( active ) );
			if ( active === -1 ) {
				active = collapsible ? false : 0;
			}
		}

		// don't allow collapsible: false and active: false
		if ( !collapsible && active === false && this.anchors.length ) {
			active = 0;
		}

		return active;
	},

	_getCreateEventData: function() {
		return {
			tab: this.active,
			panel: !this.active.length ? $() : this._getPanelForTab( this.active )
		};
	},

	_tabKeydown: function( event ) {
		/*jshint maxcomplexity:15*/
		var focusedTab = $( this.document[0].activeElement ).closest( "li" ),
			selectedIndex = this.tabs.index( focusedTab ),
			goingForward = true;

		if ( this._handlePageNav( event ) ) {
			return;
		}

		switch ( event.keyCode ) {
			case $.ui.keyCode.RIGHT:
			case $.ui.keyCode.DOWN:
				selectedIndex++;
				break;
			case $.ui.keyCode.UP:
			case $.ui.keyCode.LEFT:
				goingForward = false;
				selectedIndex--;
				break;
			case $.ui.keyCode.END:
				selectedIndex = this.anchors.length - 1;
				break;
			case $.ui.keyCode.HOME:
				selectedIndex = 0;
				break;
			case $.ui.keyCode.SPACE:
				// Activate only, no collapsing
				event.preventDefault();
				clearTimeout( this.activating );
				this._activate( selectedIndex );
				return;
			case $.ui.keyCode.ENTER:
				// Toggle (cancel delayed activation, allow collapsing)
				event.preventDefault();
				clearTimeout( this.activating );
				// Determine if we should collapse or activate
				this._activate( selectedIndex === this.options.active ? false : selectedIndex );
				return;
			default:
				return;
		}

		// Focus the appropriate tab, based on which key was pressed
		event.preventDefault();
		clearTimeout( this.activating );
		selectedIndex = this._focusNextTab( selectedIndex, goingForward );

		// Navigating with control key will prevent automatic activation
		if ( !event.ctrlKey ) {
			// Update aria-selected immediately so that AT think the tab is already selected.
			// Otherwise AT may confuse the user by stating that they need to activate the tab,
			// but the tab will already be activated by the time the announcement finishes.
			focusedTab.attr( "aria-selected", "false" );
			this.tabs.eq( selectedIndex ).attr( "aria-selected", "true" );

			this.activating = this._delay(function() {
				this.option( "active", selectedIndex );
			}, this.delay );
		}
	},

	_panelKeydown: function( event ) {
		if ( this._handlePageNav( event ) ) {
			return;
		}

		// Ctrl+up moves focus to the current tab
		if ( event.ctrlKey && event.keyCode === $.ui.keyCode.UP ) {
			event.preventDefault();
			this.active.focus();
		}
	},

	// Alt+page up/down moves focus to the previous/next tab (and activates)
	_handlePageNav: function( event ) {
		if ( event.altKey && event.keyCode === $.ui.keyCode.PAGE_UP ) {
			this._activate( this._focusNextTab( this.options.active - 1, false ) );
			return true;
		}
		if ( event.altKey && event.keyCode === $.ui.keyCode.PAGE_DOWN ) {
			this._activate( this._focusNextTab( this.options.active + 1, true ) );
			return true;
		}
	},

	_findNextTab: function( index, goingForward ) {
		var lastTabIndex = this.tabs.length - 1;

		function constrain() {
			if ( index > lastTabIndex ) {
				index = 0;
			}
			if ( index < 0 ) {
				index = lastTabIndex;
			}
			return index;
		}

		while ( $.inArray( constrain(), this.options.disabled ) !== -1 ) {
			index = goingForward ? index + 1 : index - 1;
		}

		return index;
	},

	_focusNextTab: function( index, goingForward ) {
		index = this._findNextTab( index, goingForward );
		this.tabs.eq( index ).focus();
		return index;
	},

	_setOption: function( key, value ) {
		if ( key === "active" ) {
			// _activate() will handle invalid values and update this.options
			this._activate( value );
			return;
		}

		if ( key === "disabled" ) {
			// don't use the widget factory's disabled handling
			this._setupDisabled( value );
			return;
		}

		this._super( key, value);

		if ( key === "collapsible" ) {
			this.element.toggleClass( "ui-tabs-collapsible", value );
			// Setting collapsible: false while collapsed; open first panel
			if ( !value && this.options.active === false ) {
				this._activate( 0 );
			}
		}

		if ( key === "event" ) {
			this._setupEvents( value );
		}

		if ( key === "heightStyle" ) {
			this._setupHeightStyle( value );
		}
	},

	_tabId: function( tab ) {
		return tab.attr( "aria-controls" ) || "ui-tabs-" + getNextTabId();
	},

	_sanitizeSelector: function( hash ) {
		return hash ? hash.replace( /[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g, "\\$&" ) : "";
	},

	refresh: function() {
		var options = this.options,
			lis = this.tablist.children( ":has(a[href])" );

		// get disabled tabs from class attribute from HTML
		// this will get converted to a boolean if needed in _refresh()
		options.disabled = $.map( lis.filter( ".ui-state-disabled" ), function( tab ) {
			return lis.index( tab );
		});

		this._processTabs();

		// was collapsed or no tabs
		if ( options.active === false || !this.anchors.length ) {
			options.active = false;
			this.active = $();
		// was active, but active tab is gone
		} else if ( this.active.length && !$.contains( this.tablist[ 0 ], this.active[ 0 ] ) ) {
			// all remaining tabs are disabled
			if ( this.tabs.length === options.disabled.length ) {
				options.active = false;
				this.active = $();
			// activate previous tab
			} else {
				this._activate( this._findNextTab( Math.max( 0, options.active - 1 ), false ) );
			}
		// was active, active tab still exists
		} else {
			// make sure active index is correct
			options.active = this.tabs.index( this.active );
		}

		this._refresh();
	},

	_refresh: function() {
		this._setupDisabled( this.options.disabled );
		this._setupEvents( this.options.event );
		this._setupHeightStyle( this.options.heightStyle );

		this.tabs.not( this.active ).attr({
			"aria-selected": "false",
			tabIndex: -1
		});
		this.panels.not( this._getPanelForTab( this.active ) )
			.hide()
			.attr({
				"aria-expanded": "false",
				"aria-hidden": "true"
			});

		// Make sure one tab is in the tab order
		if ( !this.active.length ) {
			this.tabs.eq( 0 ).attr( "tabIndex", 0 );
		} else {
			this.active
				.addClass( "ui-tabs-active ui-state-active" )
				.attr({
					"aria-selected": "true",
					tabIndex: 0
				});
			this._getPanelForTab( this.active )
				.show()
				.attr({
					"aria-expanded": "true",
					"aria-hidden": "false"
				});
		}
	},

	_processTabs: function() {
		var that = this;

		this.tablist = this._getList()
			.addClass( "ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all" )
			.attr( "role", "tablist" );

		this.tabs = this.tablist.find( "> li:has(a[href])" )
			.addClass( "ui-state-default ui-corner-top" )
			.attr({
				role: "tab",
				tabIndex: -1
			});

		this.anchors = this.tabs.map(function() {
				return $( "a", this )[ 0 ];
			})
			.addClass( "ui-tabs-anchor" )
			.attr({
				role: "presentation",
				tabIndex: -1
			});

		this.panels = $();

		this.anchors.each(function( i, anchor ) {
			var selector, panel, panelId,
				anchorId = $( anchor ).uniqueId().attr( "id" ),
				tab = $( anchor ).closest( "li" ),
				originalAriaControls = tab.attr( "aria-controls" );

			// inline tab
			if ( isLocal( anchor ) ) {
				selector = anchor.hash;
				panel = that.element.find( that._sanitizeSelector( selector ) );
			// remote tab
			} else {
				panelId = that._tabId( tab );
				selector = "#" + panelId;
				panel = that.element.find( selector );
				if ( !panel.length ) {
					panel = that._createPanel( panelId );
					panel.insertAfter( that.panels[ i - 1 ] || that.tablist );
				}
				panel.attr( "aria-live", "polite" );
			}

			if ( panel.length) {
				that.panels = that.panels.add( panel );
			}
			if ( originalAriaControls ) {
				tab.data( "ui-tabs-aria-controls", originalAriaControls );
			}
			tab.attr({
				"aria-controls": selector.substring( 1 ),
				"aria-labelledby": anchorId
			});
			panel.attr( "aria-labelledby", anchorId );
		});

		this.panels
			.addClass( "ui-tabs-panel ui-widget-content ui-corner-bottom" )
			.attr( "role", "tabpanel" );
	},

	// allow overriding how to find the list for rare usage scenarios (#7715)
	_getList: function() {
		return this.element.find( "ol,ul" ).eq( 0 );
	},

	_createPanel: function( id ) {
		return $( "<div>" )
			.attr( "id", id )
			.addClass( "ui-tabs-panel ui-widget-content ui-corner-bottom" )
			.data( "ui-tabs-destroy", true );
	},

	_setupDisabled: function( disabled ) {
		if ( $.isArray( disabled ) ) {
			if ( !disabled.length ) {
				disabled = false;
			} else if ( disabled.length === this.anchors.length ) {
				disabled = true;
			}
		}

		// disable tabs
		for ( var i = 0, li; ( li = this.tabs[ i ] ); i++ ) {
			if ( disabled === true || $.inArray( i, disabled ) !== -1 ) {
				$( li )
					.addClass( "ui-state-disabled" )
					.attr( "aria-disabled", "true" );
			} else {
				$( li )
					.removeClass( "ui-state-disabled" )
					.removeAttr( "aria-disabled" );
			}
		}

		this.options.disabled = disabled;
	},

	_setupEvents: function( event ) {
		var events = {
			click: function( event ) {
				event.preventDefault();
			}
		};
		if ( event ) {
			$.each( event.split(" "), function( index, eventName ) {
				events[ eventName ] = "_eventHandler";
			});
		}

		this._off( this.anchors.add( this.tabs ).add( this.panels ) );
		this._on( this.anchors, events );
		this._on( this.tabs, { keydown: "_tabKeydown" } );
		this._on( this.panels, { keydown: "_panelKeydown" } );

		this._focusable( this.tabs );
		this._hoverable( this.tabs );
	},

	_setupHeightStyle: function( heightStyle ) {
		var maxHeight,
			parent = this.element.parent();

		if ( heightStyle === "fill" ) {
			maxHeight = parent.height();
			maxHeight -= this.element.outerHeight() - this.element.height();

			this.element.siblings( ":visible" ).each(function() {
				var elem = $( this ),
					position = elem.css( "position" );

				if ( position === "absolute" || position === "fixed" ) {
					return;
				}
				maxHeight -= elem.outerHeight( true );
			});

			this.element.children().not( this.panels ).each(function() {
				maxHeight -= $( this ).outerHeight( true );
			});

			this.panels.each(function() {
				$( this ).height( Math.max( 0, maxHeight -
					$( this ).innerHeight() + $( this ).height() ) );
			})
			.css( "overflow", "auto" );
		} else if ( heightStyle === "auto" ) {
			maxHeight = 0;
			this.panels.each(function() {
				maxHeight = Math.max( maxHeight, $( this ).height( "" ).height() );
			}).height( maxHeight );
		}
	},

	_eventHandler: function( event ) {
		var options = this.options,
			active = this.active,
			anchor = $( event.currentTarget ),
			tab = anchor.closest( "li" ),
			clickedIsActive = tab[ 0 ] === active[ 0 ],
			collapsing = clickedIsActive && options.collapsible,
			toShow = collapsing ? $() : this._getPanelForTab( tab ),
			toHide = !active.length ? $() : this._getPanelForTab( active ),
			eventData = {
				oldTab: active,
				oldPanel: toHide,
				newTab: collapsing ? $() : tab,
				newPanel: toShow
			};

		event.preventDefault();

		if ( tab.hasClass( "ui-state-disabled" ) ||
				// tab is already loading
				tab.hasClass( "ui-tabs-loading" ) ||
				// can't switch durning an animation
				this.running ||
				// click on active header, but not collapsible
				( clickedIsActive && !options.collapsible ) ||
				// allow canceling activation
				( this._trigger( "beforeActivate", event, eventData ) === false ) ) {
			return;
		}

		options.active = collapsing ? false : this.tabs.index( tab );

		this.active = clickedIsActive ? $() : tab;
		if ( this.xhr ) {
			this.xhr.abort();
		}

		if ( !toHide.length && !toShow.length ) {
			$.error( "jQuery UI Tabs: Mismatching fragment identifier." );
		}

		if ( toShow.length ) {
			this.load( this.tabs.index( tab ), event );
		}
		this._toggle( event, eventData );
	},

	// handles show/hide for selecting tabs
	_toggle: function( event, eventData ) {
		var that = this,
			toShow = eventData.newPanel,
			toHide = eventData.oldPanel;

		this.running = true;

		function complete() {
			that.running = false;
			that._trigger( "activate", event, eventData );
		}

		function show() {
			eventData.newTab.closest( "li" ).addClass( "ui-tabs-active ui-state-active" );

			if ( toShow.length && that.options.show ) {
				that._show( toShow, that.options.show, complete );
			} else {
				toShow.show();
				complete();
			}
		}

		// start out by hiding, then showing, then completing
		if ( toHide.length && this.options.hide ) {
			this._hide( toHide, this.options.hide, function() {
				eventData.oldTab.closest( "li" ).removeClass( "ui-tabs-active ui-state-active" );
				show();
			});
		} else {
			eventData.oldTab.closest( "li" ).removeClass( "ui-tabs-active ui-state-active" );
			toHide.hide();
			show();
		}

		toHide.attr({
			"aria-expanded": "false",
			"aria-hidden": "true"
		});
		eventData.oldTab.attr( "aria-selected", "false" );
		// If we're switching tabs, remove the old tab from the tab order.
		// If we're opening from collapsed state, remove the previous tab from the tab order.
		// If we're collapsing, then keep the collapsing tab in the tab order.
		if ( toShow.length && toHide.length ) {
			eventData.oldTab.attr( "tabIndex", -1 );
		} else if ( toShow.length ) {
			this.tabs.filter(function() {
				return $( this ).attr( "tabIndex" ) === 0;
			})
			.attr( "tabIndex", -1 );
		}

		toShow.attr({
			"aria-expanded": "true",
			"aria-hidden": "false"
		});
		eventData.newTab.attr({
			"aria-selected": "true",
			tabIndex: 0
		});
	},

	_activate: function( index ) {
		var anchor,
			active = this._findActive( index );

		// trying to activate the already active panel
		if ( active[ 0 ] === this.active[ 0 ] ) {
			return;
		}

		// trying to collapse, simulate a click on the current active header
		if ( !active.length ) {
			active = this.active;
		}

		anchor = active.find( ".ui-tabs-anchor" )[ 0 ];
		this._eventHandler({
			target: anchor,
			currentTarget: anchor,
			preventDefault: $.noop
		});
	},

	_findActive: function( index ) {
		return index === false ? $() : this.tabs.eq( index );
	},

	_getIndex: function( index ) {
		// meta-function to give users option to provide a href string instead of a numerical index.
		if ( typeof index === "string" ) {
			index = this.anchors.index( this.anchors.filter( "[href$='" + index + "']" ) );
		}

		return index;
	},

	_destroy: function() {
		if ( this.xhr ) {
			this.xhr.abort();
		}

		this.element.removeClass( "ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible" );

		this.tablist
			.removeClass( "ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all" )
			.removeAttr( "role" );

		this.anchors
			.removeClass( "ui-tabs-anchor" )
			.removeAttr( "role" )
			.removeAttr( "tabIndex" )
			.removeUniqueId();

		this.tabs.add( this.panels ).each(function() {
			if ( $.data( this, "ui-tabs-destroy" ) ) {
				$( this ).remove();
			} else {
				$( this )
					.removeClass( "ui-state-default ui-state-active ui-state-disabled " +
						"ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel" )
					.removeAttr( "tabIndex" )
					.removeAttr( "aria-live" )
					.removeAttr( "aria-busy" )
					.removeAttr( "aria-selected" )
					.removeAttr( "aria-labelledby" )
					.removeAttr( "aria-hidden" )
					.removeAttr( "aria-expanded" )
					.removeAttr( "role" );
			}
		});

		this.tabs.each(function() {
			var li = $( this ),
				prev = li.data( "ui-tabs-aria-controls" );
			if ( prev ) {
				li
					.attr( "aria-controls", prev )
					.removeData( "ui-tabs-aria-controls" );
			} else {
				li.removeAttr( "aria-controls" );
			}
		});

		this.panels.show();

		if ( this.options.heightStyle !== "content" ) {
			this.panels.css( "height", "" );
		}
	},

	enable: function( index ) {
		var disabled = this.options.disabled;
		if ( disabled === false ) {
			return;
		}

		if ( index === undefined ) {
			disabled = false;
		} else {
			index = this._getIndex( index );
			if ( $.isArray( disabled ) ) {
				disabled = $.map( disabled, function( num ) {
					return num !== index ? num : null;
				});
			} else {
				disabled = $.map( this.tabs, function( li, num ) {
					return num !== index ? num : null;
				});
			}
		}
		this._setupDisabled( disabled );
	},

	disable: function( index ) {
		var disabled = this.options.disabled;
		if ( disabled === true ) {
			return;
		}

		if ( index === undefined ) {
			disabled = true;
		} else {
			index = this._getIndex( index );
			if ( $.inArray( index, disabled ) !== -1 ) {
				return;
			}
			if ( $.isArray( disabled ) ) {
				disabled = $.merge( [ index ], disabled ).sort();
			} else {
				disabled = [ index ];
			}
		}
		this._setupDisabled( disabled );
	},

	load: function( index, event ) {
		index = this._getIndex( index );
		var that = this,
			tab = this.tabs.eq( index ),
			anchor = tab.find( ".ui-tabs-anchor" ),
			panel = this._getPanelForTab( tab ),
			eventData = {
				tab: tab,
				panel: panel
			};

		// not remote
		if ( isLocal( anchor[ 0 ] ) ) {
			return;
		}

		this.xhr = $.ajax( this._ajaxSettings( anchor, event, eventData ) );

		// support: jQuery <1.8
		// jQuery <1.8 returns false if the request is canceled in beforeSend,
		// but as of 1.8, $.ajax() always returns a jqXHR object.
		if ( this.xhr && this.xhr.statusText !== "canceled" ) {
			tab.addClass( "ui-tabs-loading" );
			panel.attr( "aria-busy", "true" );

			this.xhr
				.success(function( response ) {
					// support: jQuery <1.8
					// http://bugs.jquery.com/ticket/11778
					setTimeout(function() {
						panel.html( response );
						that._trigger( "load", event, eventData );
					}, 1 );
				})
				.complete(function( jqXHR, status ) {
					// support: jQuery <1.8
					// http://bugs.jquery.com/ticket/11778
					setTimeout(function() {
						if ( status === "abort" ) {
							that.panels.stop( false, true );
						}

						tab.removeClass( "ui-tabs-loading" );
						panel.removeAttr( "aria-busy" );

						if ( jqXHR === that.xhr ) {
							delete that.xhr;
						}
					}, 1 );
				});
		}
	},

	_ajaxSettings: function( anchor, event, eventData ) {
		var that = this;
		return {
			url: anchor.attr( "href" ),
			beforeSend: function( jqXHR, settings ) {
				return that._trigger( "beforeLoad", event,
					$.extend( { jqXHR : jqXHR, ajaxSettings: settings }, eventData ) );
			}
		};
	},

	_getPanelForTab: function( tab ) {
		var id = $( tab ).attr( "aria-controls" );
		return this.element.find( this._sanitizeSelector( "#" + id ) );
	}
});

})( jQuery );

(function( $ ) {

var increments = 0;

function addDescribedBy( elem, id ) {
	var describedby = (elem.attr( "aria-describedby" ) || "").split( /\s+/ );
	describedby.push( id );
	elem
		.data( "ui-tooltip-id", id )
		.attr( "aria-describedby", $.trim( describedby.join( " " ) ) );
}

function removeDescribedBy( elem ) {
	var id = elem.data( "ui-tooltip-id" ),
		describedby = (elem.attr( "aria-describedby" ) || "").split( /\s+/ ),
		index = $.inArray( id, describedby );
	if ( index !== -1 ) {
		describedby.splice( index, 1 );
	}

	elem.removeData( "ui-tooltip-id" );
	describedby = $.trim( describedby.join( " " ) );
	if ( describedby ) {
		elem.attr( "aria-describedby", describedby );
	} else {
		elem.removeAttr( "aria-describedby" );
	}
}

$.widget( "ui.tooltip", {
	version: "1.10.3",
	options: {
		content: function() {
			// support: IE<9, Opera in jQuery <1.7
			// .text() can't accept undefined, so coerce to a string
			var title = $( this ).attr( "title" ) || "";
			// Escape title, since we're going from an attribute to raw HTML
			return $( "<a>" ).text( title ).html();
		},
		hide: true,
		// Disabled elements have inconsistent behavior across browsers (#8661)
		items: "[title]:not([disabled])",
		position: {
			my: "left top+15",
			at: "left bottom",
			collision: "flipfit flip"
		},
		show: true,
		tooltipClass: null,
		track: false,

		// callbacks
		close: null,
		open: null
	},

	_create: function() {
		this._on({
			mouseover: "open",
			focusin: "open"
		});

		// IDs of generated tooltips, needed for destroy
		this.tooltips = {};
		// IDs of parent tooltips where we removed the title attribute
		this.parents = {};

		if ( this.options.disabled ) {
			this._disable();
		}
	},

	_setOption: function( key, value ) {
		var that = this;

		if ( key === "disabled" ) {
			this[ value ? "_disable" : "_enable" ]();
			this.options[ key ] = value;
			// disable element style changes
			return;
		}

		this._super( key, value );

		if ( key === "content" ) {
			$.each( this.tooltips, function( id, element ) {
				that._updateContent( element );
			});
		}
	},

	_disable: function() {
		var that = this;

		// close open tooltips
		$.each( this.tooltips, function( id, element ) {
			var event = $.Event( "blur" );
			event.target = event.currentTarget = element[0];
			that.close( event, true );
		});

		// remove title attributes to prevent native tooltips
		this.element.find( this.options.items ).addBack().each(function() {
			var element = $( this );
			if ( element.is( "[title]" ) ) {
				element
					.data( "ui-tooltip-title", element.attr( "title" ) )
					.attr( "title", "" );
			}
		});
	},

	_enable: function() {
		// restore title attributes
		this.element.find( this.options.items ).addBack().each(function() {
			var element = $( this );
			if ( element.data( "ui-tooltip-title" ) ) {
				element.attr( "title", element.data( "ui-tooltip-title" ) );
			}
		});
	},

	open: function( event ) {
		var that = this,
			target = $( event ? event.target : this.element )
				// we need closest here due to mouseover bubbling,
				// but always pointing at the same event target
				.closest( this.options.items );

		// No element to show a tooltip for or the tooltip is already open
		if ( !target.length || target.data( "ui-tooltip-id" ) ) {
			return;
		}

		if ( target.attr( "title" ) ) {
			target.data( "ui-tooltip-title", target.attr( "title" ) );
		}

		target.data( "ui-tooltip-open", true );

		// kill parent tooltips, custom or native, for hover
		if ( event && event.type === "mouseover" ) {
			target.parents().each(function() {
				var parent = $( this ),
					blurEvent;
				if ( parent.data( "ui-tooltip-open" ) ) {
					blurEvent = $.Event( "blur" );
					blurEvent.target = blurEvent.currentTarget = this;
					that.close( blurEvent, true );
				}
				if ( parent.attr( "title" ) ) {
					parent.uniqueId();
					that.parents[ this.id ] = {
						element: this,
						title: parent.attr( "title" )
					};
					parent.attr( "title", "" );
				}
			});
		}

		this._updateContent( target, event );
	},

	_updateContent: function( target, event ) {
		var content,
			contentOption = this.options.content,
			that = this,
			eventType = event ? event.type : null;

		if ( typeof contentOption === "string" ) {
			return this._open( event, target, contentOption );
		}

		content = contentOption.call( target[0], function( response ) {
			// ignore async response if tooltip was closed already
			if ( !target.data( "ui-tooltip-open" ) ) {
				return;
			}
			// IE may instantly serve a cached response for ajax requests
			// delay this call to _open so the other call to _open runs first
			that._delay(function() {
				// jQuery creates a special event for focusin when it doesn't
				// exist natively. To improve performance, the native event
				// object is reused and the type is changed. Therefore, we can't
				// rely on the type being correct after the event finished
				// bubbling, so we set it back to the previous value. (#8740)
				if ( event ) {
					event.type = eventType;
				}
				this._open( event, target, response );
			});
		});
		if ( content ) {
			this._open( event, target, content );
		}
	},

	_open: function( event, target, content ) {
		var tooltip, events, delayedShow,
			positionOption = $.extend( {}, this.options.position );

		if ( !content ) {
			return;
		}

		// Content can be updated multiple times. If the tooltip already
		// exists, then just update the content and bail.
		tooltip = this._find( target );
		if ( tooltip.length ) {
			tooltip.find( ".ui-tooltip-content" ).html( content );
			return;
		}

		// if we have a title, clear it to prevent the native tooltip
		// we have to check first to avoid defining a title if none exists
		// (we don't want to cause an element to start matching [title])
		//
		// We use removeAttr only for key events, to allow IE to export the correct
		// accessible attributes. For mouse events, set to empty string to avoid
		// native tooltip showing up (happens only when removing inside mouseover).
		if ( target.is( "[title]" ) ) {
			if ( event && event.type === "mouseover" ) {
				target.attr( "title", "" );
			} else {
				target.removeAttr( "title" );
			}
		}

		tooltip = this._tooltip( target );
		addDescribedBy( target, tooltip.attr( "id" ) );
		tooltip.find( ".ui-tooltip-content" ).html( content );

		function position( event ) {
			positionOption.of = event;
			if ( tooltip.is( ":hidden" ) ) {
				return;
			}
			tooltip.position( positionOption );
		}
		if ( this.options.track && event && /^mouse/.test( event.type ) ) {
			this._on( this.document, {
				mousemove: position
			});
			// trigger once to override element-relative positioning
			position( event );
		} else {
			tooltip.position( $.extend({
				of: target
			}, this.options.position ) );
		}

		tooltip.hide();

		this._show( tooltip, this.options.show );
		// Handle tracking tooltips that are shown with a delay (#8644). As soon
		// as the tooltip is visible, position the tooltip using the most recent
		// event.
		if ( this.options.show && this.options.show.delay ) {
			delayedShow = this.delayedShow = setInterval(function() {
				if ( tooltip.is( ":visible" ) ) {
					position( positionOption.of );
					clearInterval( delayedShow );
				}
			}, $.fx.interval );
		}

		this._trigger( "open", event, { tooltip: tooltip } );

		events = {
			keyup: function( event ) {
				if ( event.keyCode === $.ui.keyCode.ESCAPE ) {
					var fakeEvent = $.Event(event);
					fakeEvent.currentTarget = target[0];
					this.close( fakeEvent, true );
				}
			},
			remove: function() {
				this._removeTooltip( tooltip );
			}
		};
		if ( !event || event.type === "mouseover" ) {
			events.mouseleave = "close";
		}
		if ( !event || event.type === "focusin" ) {
			events.focusout = "close";
		}
		this._on( true, target, events );
	},

	close: function( event ) {
		var that = this,
			target = $( event ? event.currentTarget : this.element ),
			tooltip = this._find( target );

		// disabling closes the tooltip, so we need to track when we're closing
		// to avoid an infinite loop in case the tooltip becomes disabled on close
		if ( this.closing ) {
			return;
		}

		// Clear the interval for delayed tracking tooltips
		clearInterval( this.delayedShow );

		// only set title if we had one before (see comment in _open())
		if ( target.data( "ui-tooltip-title" ) ) {
			target.attr( "title", target.data( "ui-tooltip-title" ) );
		}

		removeDescribedBy( target );

		tooltip.stop( true );
		this._hide( tooltip, this.options.hide, function() {
			that._removeTooltip( $( this ) );
		});

		target.removeData( "ui-tooltip-open" );
		this._off( target, "mouseleave focusout keyup" );
		// Remove 'remove' binding only on delegated targets
		if ( target[0] !== this.element[0] ) {
			this._off( target, "remove" );
		}
		this._off( this.document, "mousemove" );

		if ( event && event.type === "mouseleave" ) {
			$.each( this.parents, function( id, parent ) {
				$( parent.element ).attr( "title", parent.title );
				delete that.parents[ id ];
			});
		}

		this.closing = true;
		this._trigger( "close", event, { tooltip: tooltip } );
		this.closing = false;
	},

	_tooltip: function( element ) {
		var id = "ui-tooltip-" + increments++,
			tooltip = $( "<div>" )
				.attr({
					id: id,
					role: "tooltip"
				})
				.addClass( "ui-tooltip ui-widget ui-corner-all ui-widget-content " +
					( this.options.tooltipClass || "" ) );
		$( "<div>" )
			.addClass( "ui-tooltip-content" )
			.appendTo( tooltip );
		tooltip.appendTo( this.document[0].body );
		this.tooltips[ id ] = element;
		return tooltip;
	},

	_find: function( target ) {
		var id = target.data( "ui-tooltip-id" );
		return id ? $( "#" + id ) : $();
	},

	_removeTooltip: function( tooltip ) {
		tooltip.remove();
		delete this.tooltips[ tooltip.attr( "id" ) ];
	},

	_destroy: function() {
		var that = this;

		// close open tooltips
		$.each( this.tooltips, function( id, element ) {
			// Delegate to close method to handle common cleanup
			var event = $.Event( "blur" );
			event.target = event.currentTarget = element[0];
			that.close( event, true );

			// Remove immediately; destroying an open tooltip doesn't use the
			// hide animation
			$( "#" + id ).remove();

			// Restore the title
			if ( element.data( "ui-tooltip-title" ) ) {
				element.attr( "title", element.data( "ui-tooltip-title" ) );
				element.removeData( "ui-tooltip-title" );
			}
		});
	}
});

}( jQuery ) );
/* ========================================================================
 * Bootstrap: affix.js v3.1.0
 * http://getbootstrap.com/javascript/#affix
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */



+function ($) {
  'use strict';

  // AFFIX CLASS DEFINITION
  // ======================

  var Affix = function (element, options) {
    this.options = $.extend({}, Affix.DEFAULTS, options)
    this.$window = $(window)
      .on('scroll.bs.affix.data-api', $.proxy(this.checkPosition, this))
      .on('click.bs.affix.data-api',  $.proxy(this.checkPositionWithEventLoop, this))

    this.$element     = $(element)
    this.affixed      =
    this.unpin        =
    this.pinnedOffset = null

    this.checkPosition()
  }

  Affix.RESET = 'affix affix-top affix-bottom'

  Affix.DEFAULTS = {
    offset: 0
  }

  Affix.prototype.getPinnedOffset = function () {
    if (this.pinnedOffset) return this.pinnedOffset
    this.$element.removeClass(Affix.RESET).addClass('affix')
    var scrollTop = this.$window.scrollTop()
    var position  = this.$element.offset()
    return (this.pinnedOffset = position.top - scrollTop)
  }

  Affix.prototype.checkPositionWithEventLoop = function () {
    setTimeout($.proxy(this.checkPosition, this), 1)
  }

  Affix.prototype.checkPosition = function () {
    if (!this.$element.is(':visible')) return

    var scrollHeight = $(document).height()
    var scrollTop    = this.$window.scrollTop()
    var position     = this.$element.offset()
    var offset       = this.options.offset
    var offsetTop    = offset.top
    var offsetBottom = offset.bottom

    if (this.affixed == 'top') position.top += scrollTop

    if (typeof offset != 'object')         offsetBottom = offsetTop = offset
    if (typeof offsetTop == 'function')    offsetTop    = offset.top(this.$element)
    if (typeof offsetBottom == 'function') offsetBottom = offset.bottom(this.$element)

    var affix = this.unpin   != null && (scrollTop + this.unpin <= position.top) ? false :
                offsetBottom != null && (position.top + this.$element.height() >= scrollHeight - offsetBottom) ? 'bottom' :
                offsetTop    != null && (scrollTop <= offsetTop) ? 'top' : false

    if (this.affixed === affix) return
    if (this.unpin) this.$element.css('top', '')

    var affixType = 'affix' + (affix ? '-' + affix : '')
    var e         = $.Event(affixType + '.bs.affix')

    this.$element.trigger(e)

    if (e.isDefaultPrevented()) return

    this.affixed = affix
    this.unpin = affix == 'bottom' ? this.getPinnedOffset() : null

    this.$element
      .removeClass(Affix.RESET)
      .addClass(affixType)
      .trigger($.Event(affixType.replace('affix', 'affixed')))

    if (affix == 'bottom') {
      this.$element.offset({ top: scrollHeight - offsetBottom - this.$element.height() })
    }
  }


  // AFFIX PLUGIN DEFINITION
  // =======================

  var old = $.fn.affix

  $.fn.affix = function (option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.affix')
      var options = typeof option == 'object' && option

      if (!data) $this.data('bs.affix', (data = new Affix(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  $.fn.affix.Constructor = Affix


  // AFFIX NO CONFLICT
  // =================

  $.fn.affix.noConflict = function () {
    $.fn.affix = old
    return this
  }


  // AFFIX DATA-API
  // ==============

  $(window).on('load', function () {
    $('[data-spy="affix"]').each(function () {
      var $spy = $(this)
      var data = $spy.data()

      data.offset = data.offset || {}

      if (data.offsetBottom) data.offset.bottom = data.offsetBottom
      if (data.offsetTop)    data.offset.top    = data.offsetTop

      $spy.affix(data)
    })
  })

}(jQuery);
/* ========================================================================
 * Bootstrap: alert.js v3.1.0
 * http://getbootstrap.com/javascript/#alerts
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */



+function ($) {
  'use strict';

  // ALERT CLASS DEFINITION
  // ======================

  var dismiss = '[data-dismiss="alert"]'
  var Alert   = function (el) {
    $(el).on('click', dismiss, this.close)
  }

  Alert.prototype.close = function (e) {
    var $this    = $(this)
    var selector = $this.attr('data-target')

    if (!selector) {
      selector = $this.attr('href')
      selector = selector && selector.replace(/.*(?=#[^\s]*$)/, '') // strip for ie7
    }

    var $parent = $(selector)

    if (e) e.preventDefault()

    if (!$parent.length) {
      $parent = $this.hasClass('alert') ? $this : $this.parent()
    }

    $parent.trigger(e = $.Event('close.bs.alert'))

    if (e.isDefaultPrevented()) return

    $parent.removeClass('in')

    function removeElement() {
      $parent.trigger('closed.bs.alert').remove()
    }

    $.support.transition && $parent.hasClass('fade') ?
      $parent
        .one($.support.transition.end, removeElement)
        .emulateTransitionEnd(150) :
      removeElement()
  }


  // ALERT PLUGIN DEFINITION
  // =======================

  var old = $.fn.alert

  $.fn.alert = function (option) {
    return this.each(function () {
      var $this = $(this)
      var data  = $this.data('bs.alert')

      if (!data) $this.data('bs.alert', (data = new Alert(this)))
      if (typeof option == 'string') data[option].call($this)
    })
  }

  $.fn.alert.Constructor = Alert


  // ALERT NO CONFLICT
  // =================

  $.fn.alert.noConflict = function () {
    $.fn.alert = old
    return this
  }


  // ALERT DATA-API
  // ==============

  $(document).on('click.bs.alert.data-api', dismiss, Alert.prototype.close)

}(jQuery);
/* ========================================================================
 * Bootstrap: button.js v3.1.0
 * http://getbootstrap.com/javascript/#buttons
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */



+function ($) {
  'use strict';

  // BUTTON PUBLIC CLASS DEFINITION
  // ==============================

  var Button = function (element, options) {
    this.$element  = $(element)
    this.options   = $.extend({}, Button.DEFAULTS, options)
    this.isLoading = false
  }

  Button.DEFAULTS = {
    loadingText: 'loading...'
  }

  Button.prototype.setState = function (state) {
    var d    = 'disabled'
    var $el  = this.$element
    var val  = $el.is('input') ? 'val' : 'html'
    var data = $el.data()

    state = state + 'Text'

    if (!data.resetText) $el.data('resetText', $el[val]())

    $el[val](data[state] || this.options[state])

    // push to event loop to allow forms to submit
    setTimeout($.proxy(function () {
      if (state == 'loadingText') {
        this.isLoading = true
        $el.addClass(d).attr(d, d)
      } else if (this.isLoading) {
        this.isLoading = false
        $el.removeClass(d).removeAttr(d)
      }
    }, this), 0)
  }

  Button.prototype.toggle = function () {
    var changed = true
    var $parent = this.$element.closest('[data-toggle="buttons"]')

    if ($parent.length) {
      var $input = this.$element.find('input')
      if ($input.prop('type') == 'radio') {
        if ($input.prop('checked') && this.$element.hasClass('active')) changed = false
        else $parent.find('.active').removeClass('active')
      }
      if (changed) $input.prop('checked', !this.$element.hasClass('active')).trigger('change')
    }

    if (changed) this.$element.toggleClass('active')
  }


  // BUTTON PLUGIN DEFINITION
  // ========================

  var old = $.fn.button

  $.fn.button = function (option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.button')
      var options = typeof option == 'object' && option

      if (!data) $this.data('bs.button', (data = new Button(this, options)))

      if (option == 'toggle') data.toggle()
      else if (option) data.setState(option)
    })
  }

  $.fn.button.Constructor = Button


  // BUTTON NO CONFLICT
  // ==================

  $.fn.button.noConflict = function () {
    $.fn.button = old
    return this
  }


  // BUTTON DATA-API
  // ===============

  $(document).on('click.bs.button.data-api', '[data-toggle^=button]', function (e) {
    var $btn = $(e.target)
    if (!$btn.hasClass('btn')) $btn = $btn.closest('.btn')
    $btn.button('toggle')
    e.preventDefault()
  })

}(jQuery);
/* ========================================================================
 * Bootstrap: carousel.js v3.1.0
 * http://getbootstrap.com/javascript/#carousel
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */



+function ($) {
  'use strict';

  // CAROUSEL CLASS DEFINITION
  // =========================

  var Carousel = function (element, options) {
    this.$element    = $(element)
    this.$indicators = this.$element.find('.carousel-indicators')
    this.options     = options
    this.paused      =
    this.sliding     =
    this.interval    =
    this.$active     =
    this.$items      = null

    this.options.pause == 'hover' && this.$element
      .on('mouseenter', $.proxy(this.pause, this))
      .on('mouseleave', $.proxy(this.cycle, this))
  }

  Carousel.DEFAULTS = {
    interval: 5000,
    pause: 'hover',
    wrap: true
  }

  Carousel.prototype.cycle =  function (e) {
    e || (this.paused = false)

    this.interval && clearInterval(this.interval)

    this.options.interval
      && !this.paused
      && (this.interval = setInterval($.proxy(this.next, this), this.options.interval))

    return this
  }

  Carousel.prototype.getActiveIndex = function () {
    this.$active = this.$element.find('.item.active')
    this.$items  = this.$active.parent().children()

    return this.$items.index(this.$active)
  }

  Carousel.prototype.to = function (pos) {
    var that        = this
    var activeIndex = this.getActiveIndex()

    if (pos > (this.$items.length - 1) || pos < 0) return

    if (this.sliding)       return this.$element.one('slid.bs.carousel', function () { that.to(pos) })
    if (activeIndex == pos) return this.pause().cycle()

    return this.slide(pos > activeIndex ? 'next' : 'prev', $(this.$items[pos]))
  }

  Carousel.prototype.pause = function (e) {
    e || (this.paused = true)

    if (this.$element.find('.next, .prev').length && $.support.transition) {
      this.$element.trigger($.support.transition.end)
      this.cycle(true)
    }

    this.interval = clearInterval(this.interval)

    return this
  }

  Carousel.prototype.next = function () {
    if (this.sliding) return
    return this.slide('next')
  }

  Carousel.prototype.prev = function () {
    if (this.sliding) return
    return this.slide('prev')
  }

  Carousel.prototype.slide = function (type, next) {
    var $active   = this.$element.find('.item.active')
    var $next     = next || $active[type]()
    var isCycling = this.interval
    var direction = type == 'next' ? 'left' : 'right'
    var fallback  = type == 'next' ? 'first' : 'last'
    var that      = this

    if (!$next.length) {
      if (!this.options.wrap) return
      $next = this.$element.find('.item')[fallback]()
    }

    if ($next.hasClass('active')) return this.sliding = false

    var e = $.Event('slide.bs.carousel', { relatedTarget: $next[0], direction: direction })
    this.$element.trigger(e)
    if (e.isDefaultPrevented()) return

    this.sliding = true

    isCycling && this.pause()

    if (this.$indicators.length) {
      this.$indicators.find('.active').removeClass('active')
      this.$element.one('slid.bs.carousel', function () {
        var $nextIndicator = $(that.$indicators.children()[that.getActiveIndex()])
        $nextIndicator && $nextIndicator.addClass('active')
      })
    }

    if ($.support.transition && this.$element.hasClass('slide')) {
      $next.addClass(type)
      $next[0].offsetWidth // force reflow
      $active.addClass(direction)
      $next.addClass(direction)
      $active
        .one($.support.transition.end, function () {
          $next.removeClass([type, direction].join(' ')).addClass('active')
          $active.removeClass(['active', direction].join(' '))
          that.sliding = false
          setTimeout(function () { that.$element.trigger('slid.bs.carousel') }, 0)
        })
        .emulateTransitionEnd($active.css('transition-duration').slice(0, -1) * 1000)
    } else {
      $active.removeClass('active')
      $next.addClass('active')
      this.sliding = false
      this.$element.trigger('slid.bs.carousel')
    }

    isCycling && this.cycle()

    return this
  }


  // CAROUSEL PLUGIN DEFINITION
  // ==========================

  var old = $.fn.carousel

  $.fn.carousel = function (option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.carousel')
      var options = $.extend({}, Carousel.DEFAULTS, $this.data(), typeof option == 'object' && option)
      var action  = typeof option == 'string' ? option : options.slide

      if (!data) $this.data('bs.carousel', (data = new Carousel(this, options)))
      if (typeof option == 'number') data.to(option)
      else if (action) data[action]()
      else if (options.interval) data.pause().cycle()
    })
  }

  $.fn.carousel.Constructor = Carousel


  // CAROUSEL NO CONFLICT
  // ====================

  $.fn.carousel.noConflict = function () {
    $.fn.carousel = old
    return this
  }


  // CAROUSEL DATA-API
  // =================

  $(document).on('click.bs.carousel.data-api', '[data-slide], [data-slide-to]', function (e) {
    var $this   = $(this), href
    var $target = $($this.attr('data-target') || (href = $this.attr('href')) && href.replace(/.*(?=#[^\s]+$)/, '')) //strip for ie7
    var options = $.extend({}, $target.data(), $this.data())
    var slideIndex = $this.attr('data-slide-to')
    if (slideIndex) options.interval = false

    $target.carousel(options)

    if (slideIndex = $this.attr('data-slide-to')) {
      $target.data('bs.carousel').to(slideIndex)
    }

    e.preventDefault()
  })

  $(window).on('load', function () {
    $('[data-ride="carousel"]').each(function () {
      var $carousel = $(this)
      $carousel.carousel($carousel.data())
    })
  })

}(jQuery);
/* ========================================================================
 * Bootstrap: collapse.js v3.1.0
 * http://getbootstrap.com/javascript/#collapse
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */



+function ($) {
  'use strict';

  // COLLAPSE PUBLIC CLASS DEFINITION
  // ================================

  var Collapse = function (element, options) {
    this.$element      = $(element)
    this.options       = $.extend({}, Collapse.DEFAULTS, options)
    this.transitioning = null

    if (this.options.parent) this.$parent = $(this.options.parent)
    if (this.options.toggle) this.toggle()
  }

  Collapse.DEFAULTS = {
    toggle: true
  }

  Collapse.prototype.dimension = function () {
    var hasWidth = this.$element.hasClass('width')
    return hasWidth ? 'width' : 'height'
  }

  Collapse.prototype.show = function () {
    if (this.transitioning || this.$element.hasClass('in')) return

    var startEvent = $.Event('show.bs.collapse')
    this.$element.trigger(startEvent)
    if (startEvent.isDefaultPrevented()) return

    var actives = this.$parent && this.$parent.find('> .panel > .in')

    if (actives && actives.length) {
      var hasData = actives.data('bs.collapse')
      if (hasData && hasData.transitioning) return
      actives.collapse('hide')
      hasData || actives.data('bs.collapse', null)
    }

    var dimension = this.dimension()

    this.$element
      .removeClass('collapse')
      .addClass('collapsing')
      [dimension](0)

    this.transitioning = 1

    var complete = function () {
      this.$element
        .removeClass('collapsing')
        .addClass('collapse in')
        [dimension]('auto')
      this.transitioning = 0
      this.$element.trigger('shown.bs.collapse')
    }

    if (!$.support.transition) return complete.call(this)

    var scrollSize = $.camelCase(['scroll', dimension].join('-'))

    this.$element
      .one($.support.transition.end, $.proxy(complete, this))
      .emulateTransitionEnd(350)
      [dimension](this.$element[0][scrollSize])
  }

  Collapse.prototype.hide = function () {
    if (this.transitioning || !this.$element.hasClass('in')) return

    var startEvent = $.Event('hide.bs.collapse')
    this.$element.trigger(startEvent)
    if (startEvent.isDefaultPrevented()) return

    var dimension = this.dimension()

    this.$element
      [dimension](this.$element[dimension]())
      [0].offsetHeight

    this.$element
      .addClass('collapsing')
      .removeClass('collapse')
      .removeClass('in')

    this.transitioning = 1

    var complete = function () {
      this.transitioning = 0
      this.$element
        .trigger('hidden.bs.collapse')
        .removeClass('collapsing')
        .addClass('collapse')
    }

    if (!$.support.transition) return complete.call(this)

    this.$element
      [dimension](0)
      .one($.support.transition.end, $.proxy(complete, this))
      .emulateTransitionEnd(350)
  }

  Collapse.prototype.toggle = function () {
    this[this.$element.hasClass('in') ? 'hide' : 'show']()
  }


  // COLLAPSE PLUGIN DEFINITION
  // ==========================

  var old = $.fn.collapse

  $.fn.collapse = function (option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.collapse')
      var options = $.extend({}, Collapse.DEFAULTS, $this.data(), typeof option == 'object' && option)

      if (!data && options.toggle && option == 'show') option = !option
      if (!data) $this.data('bs.collapse', (data = new Collapse(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  $.fn.collapse.Constructor = Collapse


  // COLLAPSE NO CONFLICT
  // ====================

  $.fn.collapse.noConflict = function () {
    $.fn.collapse = old
    return this
  }


  // COLLAPSE DATA-API
  // =================

  $(document).on('click.bs.collapse.data-api', '[data-toggle=collapse]', function (e) {
    var $this   = $(this), href
    var target  = $this.attr('data-target')
        || e.preventDefault()
        || (href = $this.attr('href')) && href.replace(/.*(?=#[^\s]+$)/, '') //strip for ie7
    var $target = $(target)
    var data    = $target.data('bs.collapse')
    var option  = data ? 'toggle' : $this.data()
    var parent  = $this.attr('data-parent')
    var $parent = parent && $(parent)

    if (!data || !data.transitioning) {
      if ($parent) $parent.find('[data-toggle=collapse][data-parent="' + parent + '"]').not($this).addClass('collapsed')
      $this[$target.hasClass('in') ? 'addClass' : 'removeClass']('collapsed')
    }

    $target.collapse(option)
  })

}(jQuery);
/* ========================================================================
 * Bootstrap: dropdown.js v3.1.0
 * http://getbootstrap.com/javascript/#dropdowns
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */



+function ($) {
  'use strict';

  // DROPDOWN CLASS DEFINITION
  // =========================

  var backdrop = '.dropdown-backdrop'
  var toggle   = '[data-toggle=dropdown]'
  var Dropdown = function (element) {
    $(element).on('click.bs.dropdown', this.toggle)
  }

  Dropdown.prototype.toggle = function (e) {
    var $this = $(this)

    if ($this.is('.disabled, :disabled')) return

    var $parent  = getParent($this)
    var isActive = $parent.hasClass('open')

    clearMenus()

    if (!isActive) {
      if ('ontouchstart' in document.documentElement && !$parent.closest('.navbar-nav').length) {
        // if mobile we use a backdrop because click events don't delegate
        $('<div class="dropdown-backdrop"/>').insertAfter($(this)).on('click', clearMenus)
      }

      var relatedTarget = { relatedTarget: this }
      $parent.trigger(e = $.Event('show.bs.dropdown', relatedTarget))

      if (e.isDefaultPrevented()) return

      $parent
        .toggleClass('open')
        .trigger('shown.bs.dropdown', relatedTarget)

      $this.focus()
    }

    return false
  }

  Dropdown.prototype.keydown = function (e) {
    if (!/(38|40|27)/.test(e.keyCode)) return

    var $this = $(this)

    e.preventDefault()
    e.stopPropagation()

    if ($this.is('.disabled, :disabled')) return

    var $parent  = getParent($this)
    var isActive = $parent.hasClass('open')

    if (!isActive || (isActive && e.keyCode == 27)) {
      if (e.which == 27) $parent.find(toggle).focus()
      return $this.click()
    }

    var desc = ' li:not(.divider):visible a'
    var $items = $parent.find('[role=menu]' + desc + ', [role=listbox]' + desc)

    if (!$items.length) return

    var index = $items.index($items.filter(':focus'))

    if (e.keyCode == 38 && index > 0)                 index--                        // up
    if (e.keyCode == 40 && index < $items.length - 1) index++                        // down
    if (!~index)                                      index = 0

    $items.eq(index).focus()
  }

  function clearMenus(e) {
    $(backdrop).remove()
    $(toggle).each(function () {
      var $parent = getParent($(this))
      var relatedTarget = { relatedTarget: this }
      if (!$parent.hasClass('open')) return
      $parent.trigger(e = $.Event('hide.bs.dropdown', relatedTarget))
      if (e.isDefaultPrevented()) return
      $parent.removeClass('open').trigger('hidden.bs.dropdown', relatedTarget)
    })
  }

  function getParent($this) {
    var selector = $this.attr('data-target')

    if (!selector) {
      selector = $this.attr('href')
      selector = selector && /#[A-Za-z]/.test(selector) && selector.replace(/.*(?=#[^\s]*$)/, '') //strip for ie7
    }

    var $parent = selector && $(selector)

    return $parent && $parent.length ? $parent : $this.parent()
  }


  // DROPDOWN PLUGIN DEFINITION
  // ==========================

  var old = $.fn.dropdown

  $.fn.dropdown = function (option) {
    return this.each(function () {
      var $this = $(this)
      var data  = $this.data('bs.dropdown')

      if (!data) $this.data('bs.dropdown', (data = new Dropdown(this)))
      if (typeof option == 'string') data[option].call($this)
    })
  }

  $.fn.dropdown.Constructor = Dropdown


  // DROPDOWN NO CONFLICT
  // ====================

  $.fn.dropdown.noConflict = function () {
    $.fn.dropdown = old
    return this
  }


  // APPLY TO STANDARD DROPDOWN ELEMENTS
  // ===================================

  $(document)
    .on('click.bs.dropdown.data-api', clearMenus)
    .on('click.bs.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() })
    .on('click.bs.dropdown.data-api', toggle, Dropdown.prototype.toggle)
    .on('keydown.bs.dropdown.data-api', toggle + ', [role=menu], [role=listbox]', Dropdown.prototype.keydown)

}(jQuery);
/* ========================================================================
 * Bootstrap: tab.js v3.1.0
 * http://getbootstrap.com/javascript/#tabs
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */



+function ($) {
  'use strict';

  // TAB CLASS DEFINITION
  // ====================

  var Tab = function (element) {
    this.element = $(element)
  }

  Tab.prototype.show = function () {
    var $this    = this.element
    var $ul      = $this.closest('ul:not(.dropdown-menu)')
    var selector = $this.data('target')

    if (!selector) {
      selector = $this.attr('href')
      selector = selector && selector.replace(/.*(?=#[^\s]*$)/, '') //strip for ie7
    }

    if ($this.parent('li').hasClass('active')) return

    var previous = $ul.find('.active:last a')[0]
    var e        = $.Event('show.bs.tab', {
      relatedTarget: previous
    })

    $this.trigger(e)

    if (e.isDefaultPrevented()) return

    var $target = $(selector)

    this.activate($this.parent('li'), $ul)
    this.activate($target, $target.parent(), function () {
      $this.trigger({
        type: 'shown.bs.tab',
        relatedTarget: previous
      })
    })
  }

  Tab.prototype.activate = function (element, container, callback) {
    var $active    = container.find('> .active')
    var transition = callback
      && $.support.transition
      && $active.hasClass('fade')

    function next() {
      $active
        .removeClass('active')
        .find('> .dropdown-menu > .active')
        .removeClass('active')

      element.addClass('active')

      if (transition) {
        element[0].offsetWidth // reflow for transition
        element.addClass('in')
      } else {
        element.removeClass('fade')
      }

      if (element.parent('.dropdown-menu')) {
        element.closest('li.dropdown').addClass('active')
      }

      callback && callback()
    }

    transition ?
      $active
        .one($.support.transition.end, next)
        .emulateTransitionEnd(150) :
      next()

    $active.removeClass('in')
  }


  // TAB PLUGIN DEFINITION
  // =====================

  var old = $.fn.tab

  $.fn.tab = function ( option ) {
    return this.each(function () {
      var $this = $(this)
      var data  = $this.data('bs.tab')

      if (!data) $this.data('bs.tab', (data = new Tab(this)))
      if (typeof option == 'string') data[option]()
    })
  }

  $.fn.tab.Constructor = Tab


  // TAB NO CONFLICT
  // ===============

  $.fn.tab.noConflict = function () {
    $.fn.tab = old
    return this
  }


  // TAB DATA-API
  // ============

  $(document).on('click.bs.tab.data-api', '[data-toggle="tab"], [data-toggle="pill"]', function (e) {
    e.preventDefault()
    $(this).tab('show')
  })

}(jQuery);
/* ========================================================================
 * Bootstrap: transition.js v3.1.0
 * http://getbootstrap.com/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */



+function ($) {
  'use strict';

  // CSS TRANSITION SUPPORT (Shoutout: http://www.modernizr.com/)
  // ============================================================

  function transitionEnd() {
    var el = document.createElement('bootstrap')

    var transEndEventNames = {
      'WebkitTransition' : 'webkitTransitionEnd',
      'MozTransition'    : 'transitionend',
      'OTransition'      : 'oTransitionEnd otransitionend',
      'transition'       : 'transitionend'
    }

    for (var name in transEndEventNames) {
      if (el.style[name] !== undefined) {
        return { end: transEndEventNames[name] }
      }
    }

    return false // explicit for ie8 (  ._.)
  }

  // http://blog.alexmaccaw.com/css-transitions
  $.fn.emulateTransitionEnd = function (duration) {
    var called = false, $el = this
    $(this).one($.support.transition.end, function () { called = true })
    var callback = function () { if (!called) $($el).trigger($.support.transition.end) }
    setTimeout(callback, duration)
    return this
  }

  $(function () {
    $.support.transition = transitionEnd()
  })

}(jQuery);
/* ========================================================================
 * Bootstrap: scrollspy.js v3.1.0
 * http://getbootstrap.com/javascript/#scrollspy
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */



+function ($) {
  'use strict';

  // SCROLLSPY CLASS DEFINITION
  // ==========================

  function ScrollSpy(element, options) {
    var href
    var process  = $.proxy(this.process, this)

    this.$element       = $(element).is('body') ? $(window) : $(element)
    this.$body          = $('body')
    this.$scrollElement = this.$element.on('scroll.bs.scroll-spy.data-api', process)
    this.options        = $.extend({}, ScrollSpy.DEFAULTS, options)
    this.selector       = (this.options.target
      || ((href = $(element).attr('href')) && href.replace(/.*(?=#[^\s]+$)/, '')) //strip for ie7
      || '') + ' .nav li > a'
    this.offsets        = $([])
    this.targets        = $([])
    this.activeTarget   = null

    this.refresh()
    this.process()
  }

  ScrollSpy.DEFAULTS = {
    offset: 10
  }

  ScrollSpy.prototype.refresh = function () {
    var offsetMethod = this.$element[0] == window ? 'offset' : 'position'

    this.offsets = $([])
    this.targets = $([])

    var self     = this
    var $targets = this.$body
      .find(this.selector)
      .map(function () {
        var $el   = $(this)
        var href  = $el.data('target') || $el.attr('href')
        var $href = /^#./.test(href) && $(href)

        return ($href
          && $href.length
          && $href.is(':visible')
          && [[ $href[offsetMethod]().top + (!$.isWindow(self.$scrollElement.get(0)) && self.$scrollElement.scrollTop()), href ]]) || null
      })
      .sort(function (a, b) { return a[0] - b[0] })
      .each(function () {
        self.offsets.push(this[0])
        self.targets.push(this[1])
      })
  }

  ScrollSpy.prototype.process = function () {
    var scrollTop    = this.$scrollElement.scrollTop() + this.options.offset
    var scrollHeight = this.$scrollElement[0].scrollHeight || this.$body[0].scrollHeight
    var maxScroll    = scrollHeight - this.$scrollElement.height()
    var offsets      = this.offsets
    var targets      = this.targets
    var activeTarget = this.activeTarget
    var i

    if (scrollTop >= maxScroll) {
      return activeTarget != (i = targets.last()[0]) && this.activate(i)
    }

    if (activeTarget && scrollTop <= offsets[0]) {
      return activeTarget != (i = targets[0]) && this.activate(i)
    }

    for (i = offsets.length; i--;) {
      activeTarget != targets[i]
        && scrollTop >= offsets[i]
        && (!offsets[i + 1] || scrollTop <= offsets[i + 1])
        && this.activate( targets[i] )
    }
  }

  ScrollSpy.prototype.activate = function (target) {
    this.activeTarget = target

    $(this.selector)
      .parentsUntil(this.options.target, '.active')
      .removeClass('active')

    var selector = this.selector +
        '[data-target="' + target + '"],' +
        this.selector + '[href="' + target + '"]'

    var active = $(selector)
      .parents('li')
      .addClass('active')

    if (active.parent('.dropdown-menu').length) {
      active = active
        .closest('li.dropdown')
        .addClass('active')
    }

    active.trigger('activate.bs.scrollspy')
  }


  // SCROLLSPY PLUGIN DEFINITION
  // ===========================

  var old = $.fn.scrollspy

  $.fn.scrollspy = function (option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.scrollspy')
      var options = typeof option == 'object' && option

      if (!data) $this.data('bs.scrollspy', (data = new ScrollSpy(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  $.fn.scrollspy.Constructor = ScrollSpy


  // SCROLLSPY NO CONFLICT
  // =====================

  $.fn.scrollspy.noConflict = function () {
    $.fn.scrollspy = old
    return this
  }


  // SCROLLSPY DATA-API
  // ==================

  $(window).on('load', function () {
    $('[data-spy="scroll"]').each(function () {
      var $spy = $(this)
      $spy.scrollspy($spy.data())
    })
  })

}(jQuery);
/* ========================================================================
 * Bootstrap: modal.js v3.1.0
 * http://getbootstrap.com/javascript/#modals
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */



+function ($) {
  'use strict';

  // MODAL CLASS DEFINITION
  // ======================

  var Modal = function (element, options) {
    this.options   = options
    this.$element  = $(element)
    this.$backdrop =
    this.isShown   = null

    if (this.options.remote) {
      this.$element
        .find('.modal-content')
        .load(this.options.remote, $.proxy(function () {
          this.$element.trigger('loaded.bs.modal')
        }, this))
    }
  }

  Modal.DEFAULTS = {
    backdrop: true,
    keyboard: true,
    show: true
  }

  Modal.prototype.toggle = function (_relatedTarget) {
    return this[!this.isShown ? 'show' : 'hide'](_relatedTarget)
  }

  Modal.prototype.show = function (_relatedTarget) {
    var that = this
    var e    = $.Event('show.bs.modal', { relatedTarget: _relatedTarget })

    this.$element.trigger(e)

    if (this.isShown || e.isDefaultPrevented()) return

    this.isShown = true

    this.escape()

    this.$element.on('click.dismiss.bs.modal', '[data-dismiss="modal"]', $.proxy(this.hide, this))

    this.backdrop(function () {
      var transition = $.support.transition && that.$element.hasClass('fade')

      if (!that.$element.parent().length) {
        that.$element.appendTo(document.body) // don't move modals dom position
      }

      that.$element
        .show()
        .scrollTop(0)

      if (transition) {
        that.$element[0].offsetWidth // force reflow
      }

      that.$element
        .addClass('in')
        .attr('aria-hidden', false)

      that.enforceFocus()

      var e = $.Event('shown.bs.modal', { relatedTarget: _relatedTarget })

      transition ?
        that.$element.find('.modal-dialog') // wait for modal to slide in
          .one($.support.transition.end, function () {
            that.$element.focus().trigger(e)
          })
          .emulateTransitionEnd(300) :
        that.$element.focus().trigger(e)
    })
  }

  Modal.prototype.hide = function (e) {
    if (e) e.preventDefault()

    e = $.Event('hide.bs.modal')

    this.$element.trigger(e)

    if (!this.isShown || e.isDefaultPrevented()) return

    this.isShown = false

    this.escape()

    $(document).off('focusin.bs.modal')

    this.$element
      .removeClass('in')
      .attr('aria-hidden', true)
      .off('click.dismiss.bs.modal')

    $.support.transition && this.$element.hasClass('fade') ?
      this.$element
        .one($.support.transition.end, $.proxy(this.hideModal, this))
        .emulateTransitionEnd(300) :
      this.hideModal()
  }

  Modal.prototype.enforceFocus = function () {
    $(document)
      .off('focusin.bs.modal') // guard against infinite focus loop
      .on('focusin.bs.modal', $.proxy(function (e) {
        if (this.$element[0] !== e.target && !this.$element.has(e.target).length) {
          this.$element.focus()
        }
      }, this))
  }

  Modal.prototype.escape = function () {
    if (this.isShown && this.options.keyboard) {
      this.$element.on('keyup.dismiss.bs.modal', $.proxy(function (e) {
        e.which == 27 && this.hide()
      }, this))
    } else if (!this.isShown) {
      this.$element.off('keyup.dismiss.bs.modal')
    }
  }

  Modal.prototype.hideModal = function () {
    var that = this
    this.$element.hide()
    this.backdrop(function () {
      that.removeBackdrop()
      that.$element.trigger('hidden.bs.modal')
    })
  }

  Modal.prototype.removeBackdrop = function () {
    this.$backdrop && this.$backdrop.remove()
    this.$backdrop = null
  }

  Modal.prototype.backdrop = function (callback) {
    var animate = this.$element.hasClass('fade') ? 'fade' : ''

    if (this.isShown && this.options.backdrop) {
      var doAnimate = $.support.transition && animate

      this.$backdrop = $('<div class="modal-backdrop ' + animate + '" />')
        .appendTo(document.body)

      this.$element.on('click.dismiss.bs.modal', $.proxy(function (e) {
        if (e.target !== e.currentTarget) return
        this.options.backdrop == 'static'
          ? this.$element[0].focus.call(this.$element[0])
          : this.hide.call(this)
      }, this))

      if (doAnimate) this.$backdrop[0].offsetWidth // force reflow

      this.$backdrop.addClass('in')

      if (!callback) return

      doAnimate ?
        this.$backdrop
          .one($.support.transition.end, callback)
          .emulateTransitionEnd(150) :
        callback()

    } else if (!this.isShown && this.$backdrop) {
      this.$backdrop.removeClass('in')

      $.support.transition && this.$element.hasClass('fade') ?
        this.$backdrop
          .one($.support.transition.end, callback)
          .emulateTransitionEnd(150) :
        callback()

    } else if (callback) {
      callback()
    }
  }


  // MODAL PLUGIN DEFINITION
  // =======================

  var old = $.fn.modal

  $.fn.modal = function (option, _relatedTarget) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.modal')
      var options = $.extend({}, Modal.DEFAULTS, $this.data(), typeof option == 'object' && option)

      if (!data) $this.data('bs.modal', (data = new Modal(this, options)))
      if (typeof option == 'string') data[option](_relatedTarget)
      else if (options.show) data.show(_relatedTarget)
    })
  }

  $.fn.modal.Constructor = Modal


  // MODAL NO CONFLICT
  // =================

  $.fn.modal.noConflict = function () {
    $.fn.modal = old
    return this
  }


  // MODAL DATA-API
  // ==============

  $(document).on('click.bs.modal.data-api', '[data-toggle="modal"]', function (e) {
    var $this   = $(this)
    var href    = $this.attr('href')
    var $target = $($this.attr('data-target') || (href && href.replace(/.*(?=#[^\s]+$)/, ''))) //strip for ie7
    var option  = $target.data('bs.modal') ? 'toggle' : $.extend({ remote: !/#/.test(href) && href }, $target.data(), $this.data())

    if ($this.is('a')) e.preventDefault()

    $target
      .modal(option, this)
      .one('hide', function () {
        $this.is(':visible') && $this.focus()
      })
  })

  $(document)
    .on('show.bs.modal', '.modal', function () { $(document.body).addClass('modal-open') })
    .on('hidden.bs.modal', '.modal', function () { $(document.body).removeClass('modal-open') })

}(jQuery);
/* ========================================================================
 * Bootstrap: tooltip.js v3.1.0
 * http://getbootstrap.com/javascript/#tooltip
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */



+function ($) {
  'use strict';

  // TOOLTIP PUBLIC CLASS DEFINITION
  // ===============================

  var Tooltip = function (element, options) {
    this.type       =
    this.options    =
    this.enabled    =
    this.timeout    =
    this.hoverState =
    this.$element   = null

    this.init('tooltip', element, options)
  }

  Tooltip.DEFAULTS = {
    animation: true,
    placement: 'top',
    selector: false,
    template: '<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
    trigger: 'hover focus',
    title: '',
    delay: 0,
    html: false,
    container: false
  }

  Tooltip.prototype.init = function (type, element, options) {
    this.enabled  = true
    this.type     = type
    this.$element = $(element)
    this.options  = this.getOptions(options)

    var triggers = this.options.trigger.split(' ')

    for (var i = triggers.length; i--;) {
      var trigger = triggers[i]

      if (trigger == 'click') {
        this.$element.on('click.' + this.type, this.options.selector, $.proxy(this.toggle, this))
      } else if (trigger != 'manual') {
        var eventIn  = trigger == 'hover' ? 'mouseenter' : 'focusin'
        var eventOut = trigger == 'hover' ? 'mouseleave' : 'focusout'

        this.$element.on(eventIn  + '.' + this.type, this.options.selector, $.proxy(this.enter, this))
        this.$element.on(eventOut + '.' + this.type, this.options.selector, $.proxy(this.leave, this))
      }
    }

    this.options.selector ?
      (this._options = $.extend({}, this.options, { trigger: 'manual', selector: '' })) :
      this.fixTitle()
  }

  Tooltip.prototype.getDefaults = function () {
    return Tooltip.DEFAULTS
  }

  Tooltip.prototype.getOptions = function (options) {
    options = $.extend({}, this.getDefaults(), this.$element.data(), options)

    if (options.delay && typeof options.delay == 'number') {
      options.delay = {
        show: options.delay,
        hide: options.delay
      }
    }

    return options
  }

  Tooltip.prototype.getDelegateOptions = function () {
    var options  = {}
    var defaults = this.getDefaults()

    this._options && $.each(this._options, function (key, value) {
      if (defaults[key] != value) options[key] = value
    })

    return options
  }

  Tooltip.prototype.enter = function (obj) {
    var self = obj instanceof this.constructor ?
      obj : $(obj.currentTarget)[this.type](this.getDelegateOptions()).data('bs.' + this.type)

    clearTimeout(self.timeout)

    self.hoverState = 'in'

    if (!self.options.delay || !self.options.delay.show) return self.show()

    self.timeout = setTimeout(function () {
      if (self.hoverState == 'in') self.show()
    }, self.options.delay.show)
  }

  Tooltip.prototype.leave = function (obj) {
    var self = obj instanceof this.constructor ?
      obj : $(obj.currentTarget)[this.type](this.getDelegateOptions()).data('bs.' + this.type)

    clearTimeout(self.timeout)

    self.hoverState = 'out'

    if (!self.options.delay || !self.options.delay.hide) return self.hide()

    self.timeout = setTimeout(function () {
      if (self.hoverState == 'out') self.hide()
    }, self.options.delay.hide)
  }

  Tooltip.prototype.show = function () {
    var e = $.Event('show.bs.' + this.type)

    if (this.hasContent() && this.enabled) {
      this.$element.trigger(e)

      if (e.isDefaultPrevented()) return
      var that = this;

      var $tip = this.tip()

      this.setContent()

      if (this.options.animation) $tip.addClass('fade')

      var placement = typeof this.options.placement == 'function' ?
        this.options.placement.call(this, $tip[0], this.$element[0]) :
        this.options.placement

      var autoToken = /\s?auto?\s?/i
      var autoPlace = autoToken.test(placement)
      if (autoPlace) placement = placement.replace(autoToken, '') || 'top'

      $tip
        .detach()
        .css({ top: 0, left: 0, display: 'block' })
        .addClass(placement)

      this.options.container ? $tip.appendTo(this.options.container) : $tip.insertAfter(this.$element)

      var pos          = this.getPosition()
      var actualWidth  = $tip[0].offsetWidth
      var actualHeight = $tip[0].offsetHeight

      if (autoPlace) {
        var $parent = this.$element.parent()

        var orgPlacement = placement
        var docScroll    = document.documentElement.scrollTop || document.body.scrollTop
        var parentWidth  = this.options.container == 'body' ? window.innerWidth  : $parent.outerWidth()
        var parentHeight = this.options.container == 'body' ? window.innerHeight : $parent.outerHeight()
        var parentLeft   = this.options.container == 'body' ? 0 : $parent.offset().left

        placement = placement == 'bottom' && pos.top   + pos.height  + actualHeight - docScroll > parentHeight  ? 'top'    :
                    placement == 'top'    && pos.top   - docScroll   - actualHeight < 0                         ? 'bottom' :
                    placement == 'right'  && pos.right + actualWidth > parentWidth                              ? 'left'   :
                    placement == 'left'   && pos.left  - actualWidth < parentLeft                               ? 'right'  :
                    placement

        $tip
          .removeClass(orgPlacement)
          .addClass(placement)
      }

      var calculatedOffset = this.getCalculatedOffset(placement, pos, actualWidth, actualHeight)

      this.applyPlacement(calculatedOffset, placement)
      this.hoverState = null

      var complete = function() {
        that.$element.trigger('shown.bs.' + that.type)
      }

      $.support.transition && this.$tip.hasClass('fade') ?
        $tip
          .one($.support.transition.end, complete)
          .emulateTransitionEnd(150) :
        complete()
    }
  }

  Tooltip.prototype.applyPlacement = function (offset, placement) {
    var replace
    var $tip   = this.tip()
    var width  = $tip[0].offsetWidth
    var height = $tip[0].offsetHeight

    // manually read margins because getBoundingClientRect includes difference
    var marginTop = parseInt($tip.css('margin-top'), 10)
    var marginLeft = parseInt($tip.css('margin-left'), 10)

    // we must check for NaN for ie 8/9
    if (isNaN(marginTop))  marginTop  = 0
    if (isNaN(marginLeft)) marginLeft = 0

    offset.top  = offset.top  + marginTop
    offset.left = offset.left + marginLeft

    // $.fn.offset doesn't round pixel values
    // so we use setOffset directly with our own function B-0
    $.offset.setOffset($tip[0], $.extend({
      using: function (props) {
        $tip.css({
          top: Math.round(props.top),
          left: Math.round(props.left)
        })
      }
    }, offset), 0)

    $tip.addClass('in')

    // check to see if placing tip in new offset caused the tip to resize itself
    var actualWidth  = $tip[0].offsetWidth
    var actualHeight = $tip[0].offsetHeight

    if (placement == 'top' && actualHeight != height) {
      replace = true
      offset.top = offset.top + height - actualHeight
    }

    if (/bottom|top/.test(placement)) {
      var delta = 0

      if (offset.left < 0) {
        delta       = offset.left * -2
        offset.left = 0

        $tip.offset(offset)

        actualWidth  = $tip[0].offsetWidth
        actualHeight = $tip[0].offsetHeight
      }

      this.replaceArrow(delta - width + actualWidth, actualWidth, 'left')
    } else {
      this.replaceArrow(actualHeight - height, actualHeight, 'top')
    }

    if (replace) $tip.offset(offset)
  }

  Tooltip.prototype.replaceArrow = function (delta, dimension, position) {
    this.arrow().css(position, delta ? (50 * (1 - delta / dimension) + '%') : '')
  }

  Tooltip.prototype.setContent = function () {
    var $tip  = this.tip()
    var title = this.getTitle()

    $tip.find('.tooltip-inner')[this.options.html ? 'html' : 'text'](title)
    $tip.removeClass('fade in top bottom left right')
  }

  Tooltip.prototype.hide = function () {
    var that = this
    var $tip = this.tip()
    var e    = $.Event('hide.bs.' + this.type)

    function complete() {
      if (that.hoverState != 'in') $tip.detach()
      that.$element.trigger('hidden.bs.' + that.type)
    }

    this.$element.trigger(e)

    if (e.isDefaultPrevented()) return

    $tip.removeClass('in')

    $.support.transition && this.$tip.hasClass('fade') ?
      $tip
        .one($.support.transition.end, complete)
        .emulateTransitionEnd(150) :
      complete()

    this.hoverState = null

    return this
  }

  Tooltip.prototype.fixTitle = function () {
    var $e = this.$element
    if ($e.attr('title') || typeof($e.attr('data-original-title')) != 'string') {
      $e.attr('data-original-title', $e.attr('title') || '').attr('title', '')
    }
  }

  Tooltip.prototype.hasContent = function () {
    return this.getTitle()
  }

  Tooltip.prototype.getPosition = function () {
    var el = this.$element[0]
    return $.extend({}, (typeof el.getBoundingClientRect == 'function') ? el.getBoundingClientRect() : {
      width: el.offsetWidth,
      height: el.offsetHeight
    }, this.$element.offset())
  }

  Tooltip.prototype.getCalculatedOffset = function (placement, pos, actualWidth, actualHeight) {
    return placement == 'bottom' ? { top: pos.top + pos.height,   left: pos.left + pos.width / 2 - actualWidth / 2  } :
           placement == 'top'    ? { top: pos.top - actualHeight, left: pos.left + pos.width / 2 - actualWidth / 2  } :
           placement == 'left'   ? { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left - actualWidth } :
        /* placement == 'right' */ { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left + pos.width   }
  }

  Tooltip.prototype.getTitle = function () {
    var title
    var $e = this.$element
    var o  = this.options

    title = $e.attr('data-original-title')
      || (typeof o.title == 'function' ? o.title.call($e[0]) :  o.title)

    return title
  }

  Tooltip.prototype.tip = function () {
    return this.$tip = this.$tip || $(this.options.template)
  }

  Tooltip.prototype.arrow = function () {
    return this.$arrow = this.$arrow || this.tip().find('.tooltip-arrow')
  }

  Tooltip.prototype.validate = function () {
    if (!this.$element[0].parentNode) {
      this.hide()
      this.$element = null
      this.options  = null
    }
  }

  Tooltip.prototype.enable = function () {
    this.enabled = true
  }

  Tooltip.prototype.disable = function () {
    this.enabled = false
  }

  Tooltip.prototype.toggleEnabled = function () {
    this.enabled = !this.enabled
  }

  Tooltip.prototype.toggle = function (e) {
    var self = e ? $(e.currentTarget)[this.type](this.getDelegateOptions()).data('bs.' + this.type) : this
    self.tip().hasClass('in') ? self.leave(self) : self.enter(self)
  }

  Tooltip.prototype.destroy = function () {
    clearTimeout(this.timeout)
    this.hide().$element.off('.' + this.type).removeData('bs.' + this.type)
  }


  // TOOLTIP PLUGIN DEFINITION
  // =========================

  var old = $.fn.tooltip

  $.fn.tooltip = function (option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.tooltip')
      var options = typeof option == 'object' && option

      if (!data && option == 'destroy') return
      if (!data) $this.data('bs.tooltip', (data = new Tooltip(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  $.fn.tooltip.Constructor = Tooltip


  // TOOLTIP NO CONFLICT
  // ===================

  $.fn.tooltip.noConflict = function () {
    $.fn.tooltip = old
    return this
  }

}(jQuery);
/* ========================================================================
 * Bootstrap: popover.js v3.1.0
 * http://getbootstrap.com/javascript/#popovers
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */



+function ($) {
  'use strict';

  // POPOVER PUBLIC CLASS DEFINITION
  // ===============================

  var Popover = function (element, options) {
    this.init('popover', element, options)
  }

  if (!$.fn.tooltip) throw new Error('Popover requires tooltip.js')

  Popover.DEFAULTS = $.extend({}, $.fn.tooltip.Constructor.DEFAULTS, {
    placement: 'right',
    trigger: 'click',
    content: '',
    template: '<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'
  })


  // NOTE: POPOVER EXTENDS tooltip.js
  // ================================

  Popover.prototype = $.extend({}, $.fn.tooltip.Constructor.prototype)

  Popover.prototype.constructor = Popover

  Popover.prototype.getDefaults = function () {
    return Popover.DEFAULTS
  }

  Popover.prototype.setContent = function () {
    var $tip    = this.tip()
    var title   = this.getTitle()
    var content = this.getContent()

    $tip.find('.popover-title')[this.options.html ? 'html' : 'text'](title)
    $tip.find('.popover-content')[ // we use append for html objects to maintain js events
      this.options.html ? (typeof content == 'string' ? 'html' : 'append') : 'text'
    ](content)

    $tip.removeClass('fade top bottom left right in')

    // IE8 doesn't accept hiding via the `:empty` pseudo selector, we have to do
    // this manually by checking the contents.
    if (!$tip.find('.popover-title').html()) $tip.find('.popover-title').hide()
  }

  Popover.prototype.hasContent = function () {
    return this.getTitle() || this.getContent()
  }

  Popover.prototype.getContent = function () {
    var $e = this.$element
    var o  = this.options

    return $e.attr('data-content')
      || (typeof o.content == 'function' ?
            o.content.call($e[0]) :
            o.content)
  }

  Popover.prototype.arrow = function () {
    return this.$arrow = this.$arrow || this.tip().find('.arrow')
  }

  Popover.prototype.tip = function () {
    if (!this.$tip) this.$tip = $(this.options.template)
    return this.$tip
  }


  // POPOVER PLUGIN DEFINITION
  // =========================

  var old = $.fn.popover

  $.fn.popover = function (option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.popover')
      var options = typeof option == 'object' && option

      if (!data && option == 'destroy') return
      if (!data) $this.data('bs.popover', (data = new Popover(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  $.fn.popover.Constructor = Popover


  // POPOVER NO CONFLICT
  // ===================

  $.fn.popover.noConflict = function () {
    $.fn.popover = old
    return this
  }

}(jQuery);












/*! jQuery UI - v1.11.0 - 2014-07-01
* http://jqueryui.com
* Includes: core.js, widget.js, mouse.js, position.js, datepicker.js, slider.js, effect.js, effect-slide.js
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */


(function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)})(function(e){function t(t,s){var a,n,o,r=t.nodeName.toLowerCase();return"area"===r?(a=t.parentNode,n=a.name,t.href&&n&&"map"===a.nodeName.toLowerCase()?(o=e("img[usemap=#"+n+"]")[0],!!o&&i(o)):!1):(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r?t.href||s:s)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}function s(e){for(var t,i;e.length&&e[0]!==document;){if(t=e.css("position"),("absolute"===t||"relative"===t||"fixed"===t)&&(i=parseInt(e.css("zIndex"),10),!isNaN(i)&&0!==i))return i;e=e.parent()}return 0}function a(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=n(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){e.datepicker._isDisabledDatepicker(u.inline?t.parent()[0]:u.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))})}function o(t,i){e.extend(t,i);for(var s in i)null==i[s]&&(t[s]=i[s]);return t}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(){var t=this.css("position"),i="absolute"===t,s=this.parents().filter(function(){var t=e(this);return i&&"static"===t.css("position")?!1:/(auto|scroll)/.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==t&&s.length?s:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(i){return t(i,!isNaN(e.attr(i,"tabindex")))},tabbable:function(i){var s=e.attr(i,"tabindex"),a=isNaN(s);return(a||s>=0)&&t(i,!a)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){function s(t,i,s,n){return e.each(a,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),n&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var a="Width"===i?["Left","Right"]:["Top","Bottom"],n=i.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?o["inner"+i].call(this):this.each(function(){e(this).css(n,s(this,t)+"px")})},e.fn["outer"+i]=function(t,a){return"number"!=typeof t?o["outer"+i].call(this,t):this.each(function(){e(this).css(n,s(this,t,!0,a)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(i,s){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,s,a=e(this[0]);a.length&&a[0]!==document;){if(i=a.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(s=parseInt(a.css("zIndex"),10),!isNaN(s)&&0!==s))return s;a=a.parent()}return 0}}),e.ui.plugin={add:function(t,i,s){var a,n=e.ui[t].prototype;for(a in s)n.plugins[a]=n.plugins[a]||[],n.plugins[a].push([i,s[a]])},call:function(e,t,i,s){var a,n=e.plugins[t];if(n&&(s||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(a=0;n.length>a;a++)e.options[n[a][0]]&&n[a][1].apply(e.element,i)}};var r=0,h=Array.prototype.slice;e.cleanData=function(t){return function(i){for(var s,a=0;null!=(s=i[a]);a++)try{e(s).triggerHandler("remove")}catch(n){}t(i)}}(e.cleanData),e.widget=function(t,i,s){var a,n,o,r,h={},l=t.split(".")[0];return t=t.split(".")[1],a=l+"-"+t,s||(s=i,i=e.Widget),e.expr[":"][a.toLowerCase()]=function(t){return!!e.data(t,a)},e[l]=e[l]||{},n=e[l][t],o=e[l][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new o(e,t)},e.extend(o,n,{version:s.version,_proto:e.extend({},s),_childConstructors:[]}),r=new i,r.options=e.widget.extend({},r.options),e.each(s,function(t,s){return e.isFunction(s)?(h[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},a=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,n=this._superApply;return this._super=e,this._superApply=a,t=s.apply(this,arguments),this._super=i,this._superApply=n,t}}(),void 0):(h[t]=s,void 0)}),o.prototype=e.widget.extend(r,{widgetEventPrefix:n?r.widgetEventPrefix||t:t},h,{constructor:o,namespace:l,widgetName:t,widgetFullName:a}),n?(e.each(n._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete n._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var i,s,a=h.call(arguments,1),n=0,o=a.length;o>n;n++)for(i in a[n])s=a[n][i],a[n].hasOwnProperty(i)&&void 0!==s&&(t[i]=e.isPlainObject(s)?e.isPlainObject(t[i])?e.widget.extend({},t[i],s):e.widget.extend({},s):s);return t},e.widget.bridge=function(t,i){var s=i.prototype.widgetFullName||t;e.fn[t]=function(a){var n="string"==typeof a,o=h.call(arguments,1),r=this;return a=!n&&o.length?e.widget.extend.apply(null,[a].concat(o)):a,n?this.each(function(){var i,n=e.data(this,s);return"instance"===a?(r=n,!1):n?e.isFunction(n[a])&&"_"!==a.charAt(0)?(i=n[a].apply(n,o),i!==n&&void 0!==i?(r=i&&i.jquery?r.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+a+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+a+"'")}):this.each(function(){var t=e.data(this,s);t?(t.option(a||{}),t._init&&t._init()):e.data(this,s,new i(a,this))}),r}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=r++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var s,a,n,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},s=t.split("."),t=s.shift(),s.length){for(a=o[t]=e.widget.extend({},this.options[t]),n=0;s.length-1>n;n++)a[s[n]]=a[s[n]]||{},a=a[s[n]];if(t=s.pop(),1===arguments.length)return void 0===a[t]?null:a[t];a[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=i}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,s){var a,n=this;"boolean"!=typeof t&&(s=i,i=t,t=!1),s?(i=a=e(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,a=this.widget()),e.each(s,function(s,o){function r(){return t||n.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?n[o]:o).apply(n,arguments):void 0}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var h=s.match(/^([\w:-]*)\s*(.*)$/),l=h[1]+n.eventNamespace,u=h[2];u?a.delegate(u,l,r):i.bind(l,r)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var a,n,o=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],n=i.originalEvent)for(a in n)a in i||(i[a]=n[a]);return this.element.trigger(i,s),!(e.isFunction(o)&&o.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,a,n){"string"==typeof a&&(a={effect:a});var o,r=a?a===!0||"number"==typeof a?i:a.effect||i:t;a=a||{},"number"==typeof a&&(a={duration:a}),o=!e.isEmptyObject(a),a.complete=n,a.delay&&s.delay(a.delay),o&&e.effects&&e.effects.effect[r]?s[t](a):r!==t&&s[r]?s[r](a.duration,a.easing,n):s.queue(function(i){e(this)[t](),n&&n.call(s[0]),i()})}}),e.widget;var l=!1;e(document).mouseup(function(){l=!1}),e.widget("ui.mouse",{version:"1.11.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!l){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,s=1===t.which,a="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return s&&!a&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),l=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button?this._mouseUp(t):t.which?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),l=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),function(){function t(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function i(t,i){return parseInt(e.css(t,i),10)||0}function s(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var a,n,o=Math.max,r=Math.abs,h=Math.round,l=/left|center|right/,u=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==a)return a;var t,i,s=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),n=s.children()[0];return e("body").append(s),t=n.offsetWidth,s.css("overflow","scroll"),i=n.offsetWidth,t===i&&(i=s[0].clientWidth),s.remove(),a=t-i},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),s=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),a="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,n="scroll"===s||"auto"===s&&t.height<t.element[0].scrollHeight;return{width:n?e.position.scrollbarWidth():0,height:a?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),s=e.isWindow(i[0]),a=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:s,isDocument:a,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s?i.width():i.outerWidth(),height:s?i.height():i.outerHeight()}}},e.fn.position=function(a){if(!a||!a.of)return f.apply(this,arguments);a=e.extend({},a);var p,m,g,v,y,b,_=e(a.of),x=e.position.getWithinInfo(a.within),w=e.position.getScrollInfo(x),k=(a.collision||"flip").split(" "),T={};return b=s(_),_[0].preventDefault&&(a.at="left top"),m=b.width,g=b.height,v=b.offset,y=e.extend({},v),e.each(["my","at"],function(){var e,t,i=(a[this]||"").split(" ");1===i.length&&(i=l.test(i[0])?i.concat(["center"]):u.test(i[0])?["center"].concat(i):["center","center"]),i[0]=l.test(i[0])?i[0]:"center",i[1]=u.test(i[1])?i[1]:"center",e=d.exec(i[0]),t=d.exec(i[1]),T[this]=[e?e[0]:0,t?t[0]:0],a[this]=[c.exec(i[0])[0],c.exec(i[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===a.at[0]?y.left+=m:"center"===a.at[0]&&(y.left+=m/2),"bottom"===a.at[1]?y.top+=g:"center"===a.at[1]&&(y.top+=g/2),p=t(T.at,m,g),y.left+=p[0],y.top+=p[1],this.each(function(){var s,l,u=e(this),d=u.outerWidth(),c=u.outerHeight(),f=i(this,"marginLeft"),b=i(this,"marginTop"),D=d+f+i(this,"marginRight")+w.width,S=c+b+i(this,"marginBottom")+w.height,N=e.extend({},y),M=t(T.my,u.outerWidth(),u.outerHeight());"right"===a.my[0]?N.left-=d:"center"===a.my[0]&&(N.left-=d/2),"bottom"===a.my[1]?N.top-=c:"center"===a.my[1]&&(N.top-=c/2),N.left+=M[0],N.top+=M[1],n||(N.left=h(N.left),N.top=h(N.top)),s={marginLeft:f,marginTop:b},e.each(["left","top"],function(t,i){e.ui.position[k[t]]&&e.ui.position[k[t]][i](N,{targetWidth:m,targetHeight:g,elemWidth:d,elemHeight:c,collisionPosition:s,collisionWidth:D,collisionHeight:S,offset:[p[0]+M[0],p[1]+M[1]],my:a.my,at:a.at,within:x,elem:u})}),a.using&&(l=function(e){var t=v.left-N.left,i=t+m-d,s=v.top-N.top,n=s+g-c,h={target:{element:_,left:v.left,top:v.top,width:m,height:g},element:{element:u,left:N.left,top:N.top,width:d,height:c},horizontal:0>i?"left":t>0?"right":"center",vertical:0>n?"top":s>0?"bottom":"middle"};d>m&&m>r(t+i)&&(h.horizontal="center"),c>g&&g>r(s+n)&&(h.vertical="middle"),h.important=o(r(t),r(i))>o(r(s),r(n))?"horizontal":"vertical",a.using.call(this,e,h)}),u.offset(e.extend(N,{using:l}))})},e.ui.position={fit:{left:function(e,t){var i,s=t.within,a=s.isWindow?s.scrollLeft:s.offset.left,n=s.width,r=e.left-t.collisionPosition.marginLeft,h=a-r,l=r+t.collisionWidth-n-a;t.collisionWidth>n?h>0&&0>=l?(i=e.left+h+t.collisionWidth-n-a,e.left+=h-i):e.left=l>0&&0>=h?a:h>l?a+n-t.collisionWidth:a:h>0?e.left+=h:l>0?e.left-=l:e.left=o(e.left-r,e.left)},top:function(e,t){var i,s=t.within,a=s.isWindow?s.scrollTop:s.offset.top,n=t.within.height,r=e.top-t.collisionPosition.marginTop,h=a-r,l=r+t.collisionHeight-n-a;t.collisionHeight>n?h>0&&0>=l?(i=e.top+h+t.collisionHeight-n-a,e.top+=h-i):e.top=l>0&&0>=h?a:h>l?a+n-t.collisionHeight:a:h>0?e.top+=h:l>0?e.top-=l:e.top=o(e.top-r,e.top)}},flip:{left:function(e,t){var i,s,a=t.within,n=a.offset.left+a.scrollLeft,o=a.width,h=a.isWindow?a.scrollLeft:a.offset.left,l=e.left-t.collisionPosition.marginLeft,u=l-h,d=l+t.collisionWidth-o-h,c="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>u?(i=e.left+c+p+f+t.collisionWidth-o-n,(0>i||r(u)>i)&&(e.left+=c+p+f)):d>0&&(s=e.left-t.collisionPosition.marginLeft+c+p+f-h,(s>0||d>r(s))&&(e.left+=c+p+f))},top:function(e,t){var i,s,a=t.within,n=a.offset.top+a.scrollTop,o=a.height,h=a.isWindow?a.scrollTop:a.offset.top,l=e.top-t.collisionPosition.marginTop,u=l-h,d=l+t.collisionHeight-o-h,c="top"===t.my[1],p=c?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>u?(s=e.top+p+f+m+t.collisionHeight-o-n,e.top+p+f+m>u&&(0>s||r(u)>s)&&(e.top+=p+f+m)):d>0&&(i=e.top-t.collisionPosition.marginTop+p+f+m-h,e.top+p+f+m>d&&(i>0||d>r(i))&&(e.top+=p+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,s,a,o,r=document.getElementsByTagName("body")[0],h=document.createElement("div");t=document.createElement(r?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&e.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in s)t.style[o]=s[o];t.appendChild(h),i=r||document.documentElement,i.insertBefore(t,i.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",a=e(h).offset().left,n=a>10&&11>a,t.innerHTML="",i.removeChild(t)}()}(),e.ui.position,e.extend(e.ui,{datepicker:{version:"1.11.0"}});var u;e.extend(a.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return o(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var s,a,n;s=t.nodeName.toLowerCase(),a="div"===s||"span"===s,t.id||(this.uuid+=1,t.id="dp"+this.uuid),n=this._newInst(e(t),a),n.settings=e.extend({},i||{}),"input"===s?this._connectDatepicker(t,n):a&&this._inlineDatepicker(t,n)},_newInst:function(t,i){var s=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:s,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?n(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var s=e(t);i.append=e([]),i.trigger=e([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,"datepicker",i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var s,a,n,o=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),o&&(i.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[r?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),("focus"===s||"both"===s)&&t.focus(this._showDatepicker),("button"===s||"both"===s)&&(a=this._get(i,"buttonText"),n=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:n,alt:a,title:a}):e("<button type='button'></button>").addClass(this._triggerClass).html(n?e("<img/>").attr({src:n,alt:a,title:a}):a)),t[r?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,s,a,n=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(i=0,s=0,a=0;e.length>a;a++)e[a].length>i&&(i=e[a].length,s=a);return s},n.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),n.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-n.getDay())),e.input.attr("size",this._formatDate(e,n).length)}},_inlineDatepicker:function(t,i){var s=e(t);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),e.data(t,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,s,a,n){var r,h,l,u,d,c=this._dialogInst;return c||(this.uuid+=1,r="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+r+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),c=this._dialogInst=this._newInst(this._dialogInput,!1),c.settings={},e.data(this._dialogInput[0],"datepicker",c)),o(c.settings,a||{}),i=i&&i.constructor===Date?this._formatDate(c,i):i,this._dialogInput.val(i),this._pos=n?n.length?n:[n.pageX,n.pageY]:null,this._pos||(h=document.documentElement.clientWidth,l=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[h/2-100+u,l/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),c.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",c),this},_destroyDatepicker:function(t){var i,s=e(t),a=e.data(t,"datepicker");s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,"datepicker"),"input"===i?(a.append.remove(),a.trigger.remove(),s.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var i,s,a=e(t),n=e.data(t,"datepicker");a.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(s=a.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,s,a=e(t),n=e.data(t,"datepicker");a.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(s=a.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,i,s){var a,n,r,h,l=this._getInst(t);return 2===arguments.length&&"string"==typeof i?"defaults"===i?e.extend({},e.datepicker._defaults):l?"all"===i?e.extend({},l.settings):this._get(l,i):null:(a=i||{},"string"==typeof i&&(a={},a[i]=s),l&&(this._curInst===l&&this._hideDatepicker(),n=this._getDateDatepicker(t,!0),r=this._getMinMaxDate(l,"min"),h=this._getMinMaxDate(l,"max"),o(l.settings,a),null!==r&&void 0!==a.dateFormat&&void 0===a.minDate&&(l.settings.minDate=this._formatDate(l,r)),null!==h&&void 0!==a.dateFormat&&void 0===a.maxDate&&(l.settings.maxDate=this._formatDate(l,h)),"disabled"in a&&(a.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),l),this._autoSize(l),this._setDate(l,n),this._updateAlternate(l),this._updateDatepicker(l)),void 0)},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,s,a,n=e.datepicker._getInst(t.target),o=!0,r=n.dpDiv.is(".ui-datepicker-rtl");if(n._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return a=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",n.dpDiv),a[0]&&e.datepicker._selectDay(t.target,n.selectedMonth,n.selectedYear,a[0]),i=e.datepicker._get(n,"onSelect"),i?(s=e.datepicker._formatDate(n),i.apply(n.input?n.input[0]:null,[s,n])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(n,"stepBigMonths"):-e.datepicker._get(n,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(n,"stepBigMonths"):+e.datepicker._get(n,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(n,"stepBigMonths"):-e.datepicker._get(n,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(n,"stepBigMonths"):+e.datepicker._get(n,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,s,a=e.datepicker._getInst(t.target);return e.datepicker._get(a,"constrainInput")?(i=e.datepicker._possibleChars(e.datepicker._get(a,"dateFormat")),s=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">s||!i||i.indexOf(s)>-1):void 0},_doKeyUp:function(t){var i,s=e.datepicker._getInst(t.target);if(s.input.val()!==s.lastVal)try{i=e.datepicker.parseDate(e.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,e.datepicker._getFormatConfig(s)),i&&(e.datepicker._setDateFromField(s),e.datepicker._updateAlternate(s),e.datepicker._updateDatepicker(s))}catch(a){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,a,n,r,h,l,u;
i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),a=e.datepicker._get(i,"beforeShow"),n=a?a.apply(t,[t,i]):{},n!==!1&&(o(i.settings,n),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),r=!1,e(t).parents().each(function(){return r|="fixed"===e(this).css("position"),!r}),h={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),h=e.datepicker._checkOffset(i,h,r),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":r?"fixed":"absolute",display:"none",left:h.left+"px",top:h.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),u=e.datepicker._get(i,"duration"),i.dpDiv.css("z-index",s(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),u):i.dpDiv[l||"show"](l?u:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,u=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a");var i,s=this._getNumberOfMonths(t),a=s[1],n=17;t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),a>1&&t.dpDiv.addClass("ui-datepicker-multi-"+a).css("width",n*a+"em"),t.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,s){var a=t.dpDiv.outerWidth(),n=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,r=t.input?t.input.outerHeight():0,h=document.documentElement.clientWidth+(s?0:e(document).scrollLeft()),l=document.documentElement.clientHeight+(s?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?a-o:0,i.left-=s&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=s&&i.top===t.input.offset().top+r?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+a>h&&h>a?Math.abs(i.left+a-h):0),i.top-=Math.min(i.top,i.top+n>l&&l>n?Math.abs(n+r):0),i},_findPos:function(t){for(var i,s=this._getInst(t),a=this._get(s,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[a?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,s,a,n,o=this._curInst;!o||t&&o!==e.data(t,"datepicker")||this._datepickerShowing&&(i=this._get(o,"showAnim"),s=this._get(o,"duration"),a=function(){e.datepicker._tidyDialog(o)},e.effects&&(e.effects.effect[i]||e.effects[i])?o.dpDiv.hide(i,e.datepicker._get(o,"showOptions"),s,a):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,a),i||a(),this._datepickerShowing=!1,n=this._get(o,"onClose"),n&&n.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),s=e.datepicker._getInst(i[0]);(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==s)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,s){var a=e(t),n=this._getInst(a[0]);this._isDisabledDatepicker(a[0])||(this._adjustInstDate(n,i+("M"===s?this._get(n,"showCurrentAtPos"):0),s),this._updateDatepicker(n))},_gotoToday:function(t){var i,s=e(t),a=this._getInst(s[0]);this._get(a,"gotoCurrent")&&a.currentDay?(a.selectedDay=a.currentDay,a.drawMonth=a.selectedMonth=a.currentMonth,a.drawYear=a.selectedYear=a.currentYear):(i=new Date,a.selectedDay=i.getDate(),a.drawMonth=a.selectedMonth=i.getMonth(),a.drawYear=a.selectedYear=i.getFullYear()),this._notifyChange(a),this._adjustDate(s)},_selectMonthYear:function(t,i,s){var a=e(t),n=this._getInst(a[0]);n["selected"+("M"===s?"Month":"Year")]=n["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(n),this._adjustDate(a)},_selectDay:function(t,i,s,a){var n,o=e(t);e(a).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(n=this._getInst(o[0]),n.selectedDay=n.currentDay=e("a",a).html(),n.selectedMonth=n.currentMonth=i,n.selectedYear=n.currentYear=s,this._selectDate(t,this._formatDate(n,n.currentDay,n.currentMonth,n.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var s,a=e(t),n=this._getInst(a[0]);i=null!=i?i:this._formatDate(n),n.input&&n.input.val(i),this._updateAlternate(n),s=this._get(n,"onSelect"),s?s.apply(n.input?n.input[0]:null,[i,n]):n.input&&n.input.trigger("change"),n.inline?this._updateDatepicker(n):(this._hideDatepicker(),this._lastInput=n.input[0],"object"!=typeof n.input[0]&&n.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,s,a,n=this._get(t,"altField");n&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),s=this._getDate(t),a=this.formatDate(i,s,this._getFormatConfig(t)),e(n).each(function(){e(this).val(a)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,s){if(null==t||null==i)throw"Invalid arguments";if(i="object"==typeof i?""+i:i+"",""===i)return null;var a,n,o,r,h=0,l=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),d=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,c=(s?s.dayNames:null)||this._defaults.dayNames,p=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,f=(s?s.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,y=-1,b=!1,_=function(e){var i=t.length>a+1&&t.charAt(a+1)===e;return i&&a++,i},x=function(e){var t=_(e),s="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,a=RegExp("^\\d{1,"+s+"}"),n=i.substring(h).match(a);if(!n)throw"Missing number at position "+h;return h+=n[0].length,parseInt(n[0],10)},w=function(t,s,a){var n=-1,o=e.map(_(t)?a:s,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(o,function(e,t){var s=t[1];return i.substr(h,s.length).toLowerCase()===s.toLowerCase()?(n=t[0],h+=s.length,!1):void 0}),-1!==n)return n+1;throw"Unknown name at position "+h},k=function(){if(i.charAt(h)!==t.charAt(a))throw"Unexpected literal at position "+h;h++};for(a=0;t.length>a;a++)if(b)"'"!==t.charAt(a)||_("'")?k():b=!1;else switch(t.charAt(a)){case"d":v=x("d");break;case"D":w("D",d,c);break;case"o":y=x("o");break;case"m":g=x("m");break;case"M":g=w("M",p,f);break;case"y":m=x("y");break;case"@":r=new Date(x("@")),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"!":r=new Date((x("!")-this._ticksTo1970)/1e4),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"'":_("'")?k():b=!0;break;default:k()}if(i.length>h&&(o=i.substr(h),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=m?0:-100)),y>-1)for(g=1,v=y;;){if(n=this._getDaysInMonth(m,g-1),n>=v)break;g++,v-=n}if(r=this._daylightSavingAdjust(new Date(m,g-1,v)),r.getFullYear()!==m||r.getMonth()+1!==g||r.getDate()!==v)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";var s,a=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,n=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,h=function(t){var i=e.length>s+1&&e.charAt(s+1)===t;return i&&s++,i},l=function(e,t,i){var s=""+t;if(h(e))for(;i>s.length;)s="0"+s;return s},u=function(e,t,i,s){return h(e)?s[t]:i[t]},d="",c=!1;if(t)for(s=0;e.length>s;s++)if(c)"'"!==e.charAt(s)||h("'")?d+=e.charAt(s):c=!1;else switch(e.charAt(s)){case"d":d+=l("d",t.getDate(),2);break;case"D":d+=u("D",t.getDay(),a,n);break;case"o":d+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=l("m",t.getMonth()+1,2);break;case"M":d+=u("M",t.getMonth(),o,r);break;case"y":d+=h("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":h("'")?d+="'":c=!0;break;default:d+=e.charAt(s)}return d},_possibleChars:function(e){var t,i="",s=!1,a=function(i){var s=e.length>t+1&&e.charAt(t+1)===i;return s&&t++,s};for(t=0;e.length>t;t++)if(s)"'"!==e.charAt(t)||a("'")?i+=e.charAt(t):s=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":a("'")?i+="'":s=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),s=e.lastVal=e.input?e.input.val():null,a=this._getDefaultDate(e),n=a,o=this._getFormatConfig(e);try{n=this.parseDate(i,s,o)||a}catch(r){s=t?"":s}e.selectedDay=n.getDate(),e.drawMonth=e.selectedMonth=n.getMonth(),e.drawYear=e.selectedYear=n.getFullYear(),e.currentDay=s?n.getDate():0,e.currentMonth=s?n.getMonth():0,e.currentYear=s?n.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,s){var a=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},n=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(s){}for(var a=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,n=a.getFullYear(),o=a.getMonth(),r=a.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=h.exec(i);l;){switch(l[2]||"d"){case"d":case"D":r+=parseInt(l[1],10);break;case"w":case"W":r+=7*parseInt(l[1],10);break;case"m":case"M":o+=parseInt(l[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(n,o));break;case"y":case"Y":n+=parseInt(l[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(n,o))}l=h.exec(i)}return new Date(n,o,r)},o=null==i||""===i?s:"string"==typeof i?n(i):"number"==typeof i?isNaN(i)?s:a(i):new Date(i.getTime());return o=o&&"Invalid Date"==""+o?s:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var s=!t,a=e.selectedMonth,n=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),a===e.selectedMonth&&n===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(s?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),s="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(s,-i,"M")},next:function(){e.datepicker._adjustDate(s,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(s)},selectDay:function(){return e.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(s,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,s,a,n,o,r,h,l,u,d,c,p,f,m,g,v,y,b,_,x,w,k,T,D,S,N,M,C,A,P,I,z,H,F,E,W,L,j,O=new Date,R=this._daylightSavingAdjust(new Date(O.getFullYear(),O.getMonth(),O.getDate())),Y=this._get(e,"isRTL"),J=this._get(e,"showButtonPanel"),B=this._get(e,"hideIfNoPrevNext"),K=this._get(e,"navigationAsDateFormat"),V=this._getNumberOfMonths(e),U=this._get(e,"showCurrentAtPos"),q=this._get(e,"stepMonths"),G=1!==V[0]||1!==V[1],X=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),Q=this._getMinMaxDate(e,"min"),$=this._getMinMaxDate(e,"max"),Z=e.drawMonth-U,et=e.drawYear;if(0>Z&&(Z+=12,et--),$)for(t=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-V[0]*V[1]+1,$.getDate())),t=Q&&Q>t?Q:t;this._daylightSavingAdjust(new Date(et,Z,1))>t;)Z--,0>Z&&(Z=11,et--);for(e.drawMonth=Z,e.drawYear=et,i=this._get(e,"prevText"),i=K?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z-q,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>":B?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>",a=this._get(e,"nextText"),a=K?this.formatDate(a,this._daylightSavingAdjust(new Date(et,Z+q,1)),this._getFormatConfig(e)):a,n=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+a+"</span></a>":B?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+a+"</span></a>",o=this._get(e,"currentText"),r=this._get(e,"gotoCurrent")&&e.currentDay?X:R,o=K?this.formatDate(o,r,this._getFormatConfig(e)):o,h=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",l=J?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Y?h:"")+(this._isInRange(e,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(Y?"":h)+"</div>":"",u=parseInt(this._get(e,"firstDay"),10),u=isNaN(u)?0:u,d=this._get(e,"showWeek"),c=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),_="",w=0;V[0]>w;w++){for(k="",this.maxRows=4,T=0;V[1]>T;T++){if(D=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),S=" ui-corner-all",N="",G){if(N+="<div class='ui-datepicker-group",V[1]>1)switch(T){case 0:N+=" ui-datepicker-group-first",S=" ui-corner-"+(Y?"right":"left");break;case V[1]-1:N+=" ui-datepicker-group-last",S=" ui-corner-"+(Y?"left":"right");break;default:N+=" ui-datepicker-group-middle",S=""}N+="'>"}for(N+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+S+"'>"+(/all|left/.test(S)&&0===w?Y?n:s:"")+(/all|right/.test(S)&&0===w?Y?s:n:"")+this._generateMonthYearHeader(e,Z,et,Q,$,w>0||T>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",M=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",x=0;7>x;x++)C=(x+u)%7,M+="<th scope='col'"+((x+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+c[C]+"'>"+p[C]+"</span></th>";for(N+=M+"</tr></thead><tbody>",A=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,A)),P=(this._getFirstDayOfMonth(et,Z)-u+7)%7,I=Math.ceil((P+A)/7),z=G?this.maxRows>I?this.maxRows:I:I,this.maxRows=z,H=this._daylightSavingAdjust(new Date(et,Z,1-P)),F=0;z>F;F++){for(N+="<tr>",E=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(H)+"</td>":"",x=0;7>x;x++)W=g?g.apply(e.input?e.input[0]:null,[H]):[!0,""],L=H.getMonth()!==Z,j=L&&!y||!W[0]||Q&&Q>H||$&&H>$,E+="<td class='"+((x+u+6)%7>=5?" ui-datepicker-week-end":"")+(L?" ui-datepicker-other-month":"")+(H.getTime()===D.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===H.getTime()&&b.getTime()===D.getTime()?" "+this._dayOverClass:"")+(j?" "+this._unselectableClass+" ui-state-disabled":"")+(L&&!v?"":" "+W[1]+(H.getTime()===X.getTime()?" "+this._currentClass:"")+(H.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+(L&&!v||!W[2]?"":" title='"+W[2].replace(/'/g,"&#39;")+"'")+(j?"":" data-handler='selectDay' data-event='click' data-month='"+H.getMonth()+"' data-year='"+H.getFullYear()+"'")+">"+(L&&!v?"&#xa0;":j?"<span class='ui-state-default'>"+H.getDate()+"</span>":"<a class='ui-state-default"+(H.getTime()===R.getTime()?" ui-state-highlight":"")+(H.getTime()===X.getTime()?" ui-state-active":"")+(L?" ui-priority-secondary":"")+"' href='#'>"+H.getDate()+"</a>")+"</td>",H.setDate(H.getDate()+1),H=this._daylightSavingAdjust(H);N+=E+"</tr>"}Z++,Z>11&&(Z=0,et++),N+="</tbody></table>"+(G?"</div>"+(V[0]>0&&T===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),k+=N}_+=k}return _+=l,e._keyEvent=!1,_},_generateMonthYearHeader:function(e,t,i,s,a,n,o,r){var h,l,u,d,c,p,f,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",_="";if(n||!g)_+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(h=s&&s.getFullYear()===i,l=a&&a.getFullYear()===i,_+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;12>u;u++)(!h||u>=s.getMonth())&&(!l||a.getMonth()>=u)&&(_+="<option value='"+u+"'"+(u===t?" selected='selected'":"")+">"+r[u]+"</option>");_+="</select>"}if(y||(b+=_+(!n&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",n||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(d=this._get(e,"yearRange").split(":"),c=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?c+parseInt(e,10):parseInt(e,10);return isNaN(t)?c:t},f=p(d[0]),m=Math.max(f,p(d[1]||"")),f=s?Math.max(f,s.getFullYear()):f,m=a?Math.min(m,a.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)e.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),y&&(b+=(!n&&g&&v?"":"&#xa0;")+_),b+="</div>"},_adjustInstDate:function(e,t,i){var s=e.drawYear+("Y"===i?t:0),a=e.drawMonth+("M"===i?t:0),n=Math.min(e.selectedDay,this._getDaysInMonth(s,a))+("D"===i?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(s,a,n)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),a=i&&i>t?i:t;return s&&a>s?s:a},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,s){var a=this._getNumberOfMonths(e),n=this._daylightSavingAdjust(new Date(i,s+(0>t?t:a[0]*a[1]),1));return 0>t&&n.setDate(this._getDaysInMonth(n.getFullYear(),n.getMonth())),this._isInRange(e,n)},_isInRange:function(e,t){var i,s,a=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),o=null,r=null,h=this._get(e,"yearRange");return h&&(i=h.split(":"),s=(new Date).getFullYear(),o=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(o+=s),i[1].match(/[+\-].*/)&&(r+=s)),(!a||t.getTime()>=a.getTime())&&(!n||t.getTime()<=n.getTime())&&(!o||t.getFullYear()>=o)&&(!r||r>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,s){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var a=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(s,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),a,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new a,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.11.0",e.datepicker,e.widget("ui.slider",e.ui.mouse,{version:"1.11.0",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,s=this.options,a=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),n="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",o=[];for(i=s.values&&s.values.length||1,a.length>i&&(a.slice(i).remove(),a=a.slice(0,i)),t=a.length;i>t;t++)o.push(n);this.handles=a.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,s,a,n,o,r,h,l,u=this,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},s=this._normValueFromMouse(i),a=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(s-u.values(t));(a>i||a===i&&(t===u._lastChangedValue||u.values(t)===d.min))&&(a=i,n=e(this),o=t)}),r=this._start(t,o),r===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,n.addClass("ui-state-active").focus(),h=n.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-h.left-n.width()/2,top:t.pageY-h.top-n.height()/2-(parseInt(n.css("borderTopWidth"),10)||0)-(parseInt(n.css("borderBottomWidth"),10)||0)+(parseInt(n.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,s,a,n;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/t,s>1&&(s=1),0>s&&(s=0),"vertical"===this.orientation&&(s=1-s),a=this._valueMax()-this._valueMin(),n=this._valueMin()+s*a,this._trimAlignValue(n)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var s,a,n;this.options.values&&this.options.values.length?(s=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>s||1===t&&s>i)&&(i=s),i!==this.values(t)&&(a=this.values(),a[t]=i,n=this._trigger("slide",e,{handle:this.handles[t],value:i,values:a}),s=this.values(t?0:1),n!==!1&&this.values(t,i))):i!==this.value()&&(n=this._trigger("slide",e,{handle:this.handles[t],value:i}),n!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,i){var s,a,n;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),this._change(null,t),void 0;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(s=this.options.values,a=arguments[0],n=0;s.length>n;n+=1)s[n]=this._trimAlignValue(a[n]),this._change(null,n);this._refreshValue()},_setOption:function(t,i){var s,a=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(a=this.options.values.length),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!i),this._super(t,i),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;a>s;s+=1)this._change(null,s);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,s;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(e){if(this._valueMin()>=e)return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,s=e-i;return 2*Math.abs(i)>=t&&(s+=i>0?t:-t),parseFloat(s.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,s,a,n,o=this.options.range,r=this.options,h=this,l=this._animateOff?!1:r.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(s){i=100*((h.values(s)-h._valueMin())/(h._valueMax()-h._valueMin())),u["horizontal"===h.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[l?"animate":"css"](u,r.animate),h.options.range===!0&&("horizontal"===h.orientation?(0===s&&h.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:r.animate})):(0===s&&h.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:r.animate}))),t=i}):(s=this.value(),a=this._valueMin(),n=this._valueMax(),i=n!==a?100*((s-a)/(n-a)):0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](u,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(t){var i,s,a,n,o=e(t.target).data("ui-slider-handle-index");
switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),i=this._start(t,o),i===!1))return}switch(n=this.options.step,s=a=this.options.values&&this.options.values.length?this.values(o):this.value(),t.keyCode){case e.ui.keyCode.HOME:a=this._valueMin();break;case e.ui.keyCode.END:a=this._valueMax();break;case e.ui.keyCode.PAGE_UP:a=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:a=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(s===this._valueMax())return;a=this._trimAlignValue(s+n);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(s===this._valueMin())return;a=this._trimAlignValue(s-n)}this._slide(t,o,a)},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}});var d="ui-effects-";e.effects={effect:{}},function(e,t){function i(e,t,i){var s=d[t.type]||{};return null==e?i||!t.def?null:t.def:(e=s.floor?~~e:parseFloat(e),isNaN(e)?t.def:s.mod?(e+s.mod)%s.mod:0>e?0:e>s.max?s.max:e)}function s(i){var s=l(),a=s._rgba=[];return i=i.toLowerCase(),f(h,function(e,n){var o,r=n.re.exec(i),h=r&&n.parse(r),l=n.space||"rgba";return h?(o=s[l](h),s[u[l].cache]=o[u[l].cache],a=s._rgba=o._rgba,!1):t}),a.length?("0,0,0,0"===a.join()&&e.extend(a,n.transparent),s):n[i]}function a(e,t,i){return i=(i+1)%1,1>6*i?e+6*(t-e)*i:1>2*i?t:2>3*i?e+6*(t-e)*(2/3-i):e}var n,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,h=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],l=e.Color=function(t,i,s,a){return new e.Color.fn.parse(t,i,s,a)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},c=l.support={},p=e("<p>")[0],f=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",c.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(u,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),l.fn=e.extend(l.prototype,{parse:function(a,o,r,h){if(a===t)return this._rgba=[null,null,null,null],this;(a.jquery||a.nodeType)&&(a=e(a).css(o),o=t);var d=this,c=e.type(a),p=this._rgba=[];return o!==t&&(a=[a,o,r,h],c="array"),"string"===c?this.parse(s(a)||n._default):"array"===c?(f(u.rgba.props,function(e,t){p[t.idx]=i(a[t.idx],t)}),this):"object"===c?(a instanceof l?f(u,function(e,t){a[t.cache]&&(d[t.cache]=a[t.cache].slice())}):f(u,function(t,s){var n=s.cache;f(s.props,function(e,t){if(!d[n]&&s.to){if("alpha"===e||null==a[e])return;d[n]=s.to(d._rgba)}d[n][t.idx]=i(a[e],t,!0)}),d[n]&&0>e.inArray(null,d[n].slice(0,3))&&(d[n][3]=1,s.from&&(d._rgba=s.from(d[n])))}),this):t},is:function(e){var i=l(e),s=!0,a=this;return f(u,function(e,n){var o,r=i[n.cache];return r&&(o=a[n.cache]||n.to&&n.to(a._rgba)||[],f(n.props,function(e,i){return null!=r[i.idx]?s=r[i.idx]===o[i.idx]:t})),s}),s},_space:function(){var e=[],t=this;return f(u,function(i,s){t[s.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var s=l(e),a=s._space(),n=u[a],o=0===this.alpha()?l("transparent"):this,r=o[n.cache]||n.to(o._rgba),h=r.slice();return s=s[n.cache],f(n.props,function(e,a){var n=a.idx,o=r[n],l=s[n],u=d[a.type]||{};null!==l&&(null===o?h[n]=l:(u.mod&&(l-o>u.mod/2?o+=u.mod:o-l>u.mod/2&&(o-=u.mod)),h[n]=i((l-o)*t+o,a)))}),this[a](h)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),a=l(t)._rgba;return l(e.map(i,function(e,t){return(1-s)*a[t]+s*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),s=i.pop();return t&&i.push(~~(255*s)),"#"+e.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,u.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,s=e[0]/255,a=e[1]/255,n=e[2]/255,o=e[3],r=Math.max(s,a,n),h=Math.min(s,a,n),l=r-h,u=r+h,d=.5*u;return t=h===r?0:s===r?60*(a-n)/l+360:a===r?60*(n-s)/l+120:60*(s-a)/l+240,i=0===l?0:.5>=d?l/u:l/(2-u),[Math.round(t)%360,i,d,null==o?1:o]},u.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],s=e[2],n=e[3],o=.5>=s?s*(1+i):s+i-s*i,r=2*s-o;return[Math.round(255*a(r,o,t+1/3)),Math.round(255*a(r,o,t)),Math.round(255*a(r,o,t-1/3)),n]},f(u,function(s,a){var n=a.props,o=a.cache,h=a.to,u=a.from;l.fn[s]=function(s){if(h&&!this[o]&&(this[o]=h(this._rgba)),s===t)return this[o].slice();var a,r=e.type(s),d="array"===r||"object"===r?s:arguments,c=this[o].slice();return f(n,function(e,t){var s=d["object"===r?e:t.idx];null==s&&(s=c[t.idx]),c[t.idx]=i(s,t)}),u?(a=l(u(c)),a[o]=c,a):l(c)},f(n,function(t,i){l.fn[t]||(l.fn[t]=function(a){var n,o=e.type(a),h="alpha"===t?this._hsla?"hsla":"rgba":s,l=this[h](),u=l[i.idx];return"undefined"===o?u:("function"===o&&(a=a.call(this,u),o=e.type(a)),null==a&&i.empty?this:("string"===o&&(n=r.exec(a),n&&(a=u+parseFloat(n[2])*("+"===n[1]?1:-1))),l[i.idx]=a,this[h](l)))})})}),l.hook=function(t){var i=t.split(" ");f(i,function(t,i){e.cssHooks[i]={set:function(t,a){var n,o,r="";if("transparent"!==a&&("string"!==e.type(a)||(n=s(a)))){if(a=l(n||a),!c.rgba&&1!==a._rgba[3]){for(o="backgroundColor"===i?t.parentNode:t;(""===r||"transparent"===r)&&o&&o.style;)try{r=e.css(o,"backgroundColor"),o=o.parentNode}catch(h){}a=a.blend(r&&"transparent"!==r?r:"_default")}a=a.toRgbaString()}try{t.style[i]=a}catch(h){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=l(t.elem,i),t.end=l(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},l.hook(o),e.cssHooks.borderColor={expand:function(e){var t={};return f(["Top","Right","Bottom","Left"],function(i,s){t["border"+s+"Color"]=e}),t}},n=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function t(t){var i,s,a=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,n={};if(a&&a.length&&a[0]&&a[a[0]])for(s=a.length;s--;)i=a[s],"string"==typeof a[i]&&(n[e.camelCase(i)]=a[i]);else for(i in a)"string"==typeof a[i]&&(n[i]=a[i]);return n}function i(t,i){var s,n,o={};for(s in i)n=i[s],t[s]!==n&&(a[s]||(e.fx.step[s]||!isNaN(parseFloat(n)))&&(o[s]=n));return o}var s=["add","remove","toggle"],a={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,i,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(a,n,o,r){var h=e.speed(n,o,r);return this.queue(function(){var n,o=e(this),r=o.attr("class")||"",l=h.children?o.find("*").addBack():o;l=l.map(function(){var i=e(this);return{el:i,start:t(this)}}),n=function(){e.each(s,function(e,t){a[t]&&o[t+"Class"](a[t])})},n(),l=l.map(function(){return this.end=t(this.el[0]),this.diff=i(this.start,this.end),this}),o.attr("class",r),l=l.map(function(){var t=this,i=e.Deferred(),s=e.extend({},h,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,s),i.promise()}),e.when.apply(e,l.get()).done(function(){n(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),h.complete.call(o[0])})})},e.fn.extend({addClass:function(t){return function(i,s,a,n){return s?e.effects.animateClass.call(this,{add:i},s,a,n):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,s,a,n){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},s,a,n):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(i,s,a,n,o){return"boolean"==typeof s||void 0===s?a?e.effects.animateClass.call(this,s?{add:i}:{remove:i},a,n,o):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},s,a,n)}}(e.fn.toggleClass),switchClass:function(t,i,s,a,n){return e.effects.animateClass.call(this,{add:i,remove:t},s,a,n)}})}(),function(){function t(t,i,s,a){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(a=i,s=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(a=s,s=i,i={}),e.isFunction(s)&&(a=s,s=null),i&&e.extend(t,i),s=s||i.duration,t.duration=e.fx.off?0:"number"==typeof s?s:s in e.fx.speeds?e.fx.speeds[s]:e.fx.speeds._default,t.complete=a||i.complete,t}function i(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.11.0",save:function(e,t){for(var i=0;t.length>i;i++)null!==t[i]&&e.data(d+t[i],e[0].style[t[i]])},restore:function(e,t){var i,s;for(s=0;t.length>s;s++)null!==t[s]&&(i=e.data(d+t[s]),void 0===i&&(i=""),e.css(t[s],i))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,s;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=e[1]/t.width}return{x:s,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},s=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),a={width:t.width(),height:t.height()},n=document.activeElement;try{n.id}catch(o){n=document.body}return t.wrap(s),(t[0]===n||e.contains(t[0],n))&&e(n).focus(),s=t.parent(),"static"===t.css("position")?(s.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,s){i[s]=t.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(a),s.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,s,a){return a=a||{},e.each(i,function(e,i){var n=t.cssUnit(i);n[0]>0&&(a[i]=n[0]*s+n[1])}),a}}),e.fn.extend({effect:function(){function i(t){function i(){e.isFunction(n)&&n.call(a[0]),e.isFunction(t)&&t()}var a=e(this),n=s.complete,r=s.mode;(a.is(":hidden")?"hide"===r:"show"===r)?(a[r](),i()):o.call(a[0],s,i)}var s=t.apply(this,arguments),a=s.mode,n=s.queue,o=e.effects.effect[s.effect];return e.fx.off||!o?a?this[a](s.duration,s.complete):this.each(function(){s.complete&&s.complete.call(this)}):n===!1?this.each(i):this.queue(n||"fx",i)},show:function(e){return function(s){if(i(s))return e.apply(this,arguments);var a=t.apply(this,arguments);return a.mode="show",this.effect.call(this,a)}}(e.fn.show),hide:function(e){return function(s){if(i(s))return e.apply(this,arguments);var a=t.apply(this,arguments);return a.mode="hide",this.effect.call(this,a)}}(e.fn.hide),toggle:function(e){return function(s){if(i(s)||"boolean"==typeof s)return e.apply(this,arguments);var a=t.apply(this,arguments);return a.mode="toggle",this.effect.call(this,a)}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),s=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(s=[parseFloat(i),t])}),s}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;((t=Math.pow(2,--i))-1)/11>e;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?i(2*e)/2:1-i(-2*e+2)/2}})}(),e.effects,e.effects.effect.slide=function(t,i){var s,a=e(this),n=["position","top","bottom","left","right","width","height"],o=e.effects.setMode(a,t.mode||"show"),r="show"===o,h=t.direction||"left",l="up"===h||"down"===h?"top":"left",u="up"===h||"left"===h,d={};e.effects.save(a,n),a.show(),s=t.distance||a["top"===l?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(a).css({overflow:"hidden"}),r&&a.css(l,u?isNaN(s)?"-"+s:-s:s),d[l]=(r?u?"+=":"-=":u?"-=":"+=")+s,a.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&a.hide(),e.effects.restore(a,n),e.effects.removeWrapper(a),i()}})}});
/*!
 * jQuery Form Plugin
 * version: 3.20 (20-NOV-2012)
 * @requires jQuery v1.5 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses:
 *    http://malsup.github.com/mit-license.txt
 *    http://malsup.github.com/gpl-license-v2.txt
 */
/*global ActiveXObject alert */

;(function($) {
"use strict";

/*
    Usage Note:
    -----------
    Do not use both ajaxSubmit and ajaxForm on the same form.  These
    functions are mutually exclusive.  Use ajaxSubmit if you want
    to bind your own submit handler to the form.  For example,

    $(document).ready(function() {
        $('#myForm').on('submit', function(e) {
            e.preventDefault(); // <-- important
            $(this).ajaxSubmit({
                target: '#output'
            });
        });
    });

    Use ajaxForm when you want the plugin to manage all the event binding
    for you.  For example,

    $(document).ready(function() {
        $('#myForm').ajaxForm({
            target: '#output'
        });
    });

    You can also use ajaxForm with delegation (requires jQuery v1.7+), so the
    form does not have to exist when you invoke ajaxForm:

    $('#myForm').ajaxForm({
        delegation: true,
        target: '#output'
    });

    When using ajaxForm, the ajaxSubmit function will be invoked for you
    at the appropriate time.
*/

/**
 * Feature detection
 */
var feature = {};
feature.fileapi = $("<input type='file'/>").get(0).files !== undefined;
feature.formdata = window.FormData !== undefined;

/**
 * ajaxSubmit() provides a mechanism for immediately submitting
 * an HTML form using AJAX.
 */
$.fn.ajaxSubmit = function(options) {
    /*jshint scripturl:true */

    // fast fail if nothing selected (http://dev.jquery.com/ticket/2752)
    if (!this.length) {
        log('ajaxSubmit: skipping submit process - no element selected');
        return this;
    }

    var method, action, url, $form = this;

    if (typeof options == 'function') {
        options = { success: options };
    }

    method = this.attr('method');
    action = this.attr('action');
    url = (typeof action === 'string') ? $.trim(action) : '';
    url = url || window.location.href || '';
    if (url) {
        // clean url (don't include hash vaue)
        url = (url.match(/^([^#]+)/)||[])[1];
    }

    options = $.extend(true, {
        url:  url,
        success: $.ajaxSettings.success,
        type: method || 'GET',
        iframeSrc: /^https/i.test(window.location.href || '') ? 'javascript:false' : 'about:blank'
    }, options);

    // hook for manipulating the form data before it is extracted;
    // convenient for use with rich editors like tinyMCE or FCKEditor
    var veto = {};
    this.trigger('form-pre-serialize', [this, options, veto]);
    if (veto.veto) {
        log('ajaxSubmit: submit vetoed via form-pre-serialize trigger');
        return this;
    }

    // provide opportunity to alter form data before it is serialized
    if (options.beforeSerialize && options.beforeSerialize(this, options) === false) {
        log('ajaxSubmit: submit aborted via beforeSerialize callback');
        return this;
    }

    var traditional = options.traditional;
    if ( traditional === undefined ) {
        traditional = $.ajaxSettings.traditional;
    }

    var elements = [];
    var qx, a = this.formToArray(options.semantic, elements);
    if (options.data) {
        options.extraData = options.data;
        qx = $.param(options.data, traditional);
    }

    // give pre-submit callback an opportunity to abort the submit
    if (options.beforeSubmit && options.beforeSubmit(a, this, options) === false) {
        log('ajaxSubmit: submit aborted via beforeSubmit callback');
        return this;
    }

    // fire vetoable 'validate' event
    this.trigger('form-submit-validate', [a, this, options, veto]);
    if (veto.veto) {
        log('ajaxSubmit: submit vetoed via form-submit-validate trigger');
        return this;
    }

    var q = $.param(a, traditional);
    if (qx) {
        q = ( q ? (q + '&' + qx) : qx );
    }
    if (options.type.toUpperCase() == 'GET') {
        options.url += (options.url.indexOf('?') >= 0 ? '&' : '?') + q;
        options.data = null;  // data is null for 'get'
    }
    else {
        options.data = q; // data is the query string for 'post'
    }

    var callbacks = [];
    if (options.resetForm) {
        callbacks.push(function() { $form.resetForm(); });
    }
    if (options.clearForm) {
        callbacks.push(function() { $form.clearForm(options.includeHidden); });
    }

    // perform a load on the target only if dataType is not provided
    if (!options.dataType && options.target) {
        var oldSuccess = options.success || function(){};
        callbacks.push(function(data) {
            var fn = options.replaceTarget ? 'replaceWith' : 'html';
            $(options.target)[fn](data).each(oldSuccess, arguments);
        });
    }
    else if (options.success) {
        callbacks.push(options.success);
    }

    options.success = function(data, status, xhr) { // jQuery 1.4+ passes xhr as 3rd arg
        var context = options.context || this ;    // jQuery 1.4+ supports scope context
        for (var i=0, max=callbacks.length; i < max; i++) {
            callbacks[i].apply(context, [data, status, xhr || $form, $form]);
        }
    };

    // are there files to upload?

    // [value] (issue #113), also see comment:
    // https://github.com/malsup/form/commit/588306aedba1de01388032d5f42a60159eea9228#commitcomment-2180219
    var fileInputs = $('input[type=file]:enabled[value!=""]', this);

    var hasFileInputs = fileInputs.length > 0;
    var mp = 'multipart/form-data';
    var multipart = ($form.attr('enctype') == mp || $form.attr('encoding') == mp);

    var fileAPI = feature.fileapi && feature.formdata;
    log("fileAPI :" + fileAPI);
    var shouldUseFrame = (hasFileInputs || multipart) && !fileAPI;

    var jqxhr;

    // options.iframe allows user to force iframe mode
    // 06-NOV-09: now defaulting to iframe mode if file input is detected
    if (options.iframe !== false && (options.iframe || shouldUseFrame)) {
        // hack to fix Safari hang (thanks to Tim Molendijk for this)
        // see:  http://groups.google.com/group/jquery-dev/browse_thread/thread/36395b7ab510dd5d
        if (options.closeKeepAlive) {
            $.get(options.closeKeepAlive, function() {
                jqxhr = fileUploadIframe(a);
            });
        }
        else {
            jqxhr = fileUploadIframe(a);
        }
    }
    else if ((hasFileInputs || multipart) && fileAPI) {
        jqxhr = fileUploadXhr(a);
    }
    else {
        jqxhr = $.ajax(options);
    }

    $form.removeData('jqxhr').data('jqxhr', jqxhr);

    // clear element array
    for (var k=0; k < elements.length; k++)
        elements[k] = null;

    // fire 'notify' event
    this.trigger('form-submit-notify', [this, options]);
    return this;

    // utility fn for deep serialization
    function deepSerialize(extraData){
        var serialized = $.param(extraData).split('&');
        var len = serialized.length;
        var result = {};
        var i, part;
        for (i=0; i < len; i++) {
            part = serialized[i].split('=');
            result[decodeURIComponent(part[0])] = decodeURIComponent(part[1]);
        }
        return result;
    }

     // XMLHttpRequest Level 2 file uploads (big hat tip to francois2metz)
    function fileUploadXhr(a) {
        var formdata = new FormData();

        for (var i=0; i < a.length; i++) {
            formdata.append(a[i].name, a[i].value);
        }

        if (options.extraData) {
            var serializedData = deepSerialize(options.extraData);
            for (var p in serializedData)
                if (serializedData.hasOwnProperty(p))
                    formdata.append(p, serializedData[p]);
        }

        options.data = null;

        var s = $.extend(true, {}, $.ajaxSettings, options, {
            contentType: false,
            processData: false,
            cache: false,
            type: method || 'POST'
        });

        if (options.uploadProgress) {
            // workaround because jqXHR does not expose upload property
            s.xhr = function() {
                var xhr = jQuery.ajaxSettings.xhr();
                if (xhr.upload) {
                    xhr.upload.onprogress = function(event) {
                        var percent = 0;
                        var position = event.loaded || event.position; /*event.position is deprecated*/
                        var total = event.total;
                        if (event.lengthComputable) {
                            percent = Math.ceil(position / total * 100);
                        }
                        options.uploadProgress(event, position, total, percent);
                    };
                }
                return xhr;
            };
        }

        s.data = null;
            var beforeSend = s.beforeSend;
            s.beforeSend = function(xhr, o) {
                o.data = formdata;
                if(beforeSend)
                    beforeSend.call(this, xhr, o);
        };
        return $.ajax(s);
    }

    // private function for handling file uploads (hat tip to YAHOO!)
    function fileUploadIframe(a) {
        var form = $form[0], el, i, s, g, id, $io, io, xhr, sub, n, timedOut, timeoutHandle;
        var useProp = !!$.fn.prop;
        var deferred = $.Deferred();

        if ($('[name=submit],[id=submit]', form).length) {
            // if there is an input with a name or id of 'submit' then we won't be
            // able to invoke the submit fn on the form (at least not x-browser)
            alert('Error: Form elements must not have name or id of "submit".');
            deferred.reject();
            return deferred;
        }

        if (a) {
            // ensure that every serialized input is still enabled
            for (i=0; i < elements.length; i++) {
                el = $(elements[i]);
                if ( useProp )
                    el.prop('disabled', false);
                else
                    el.removeAttr('disabled');
            }
        }

        s = $.extend(true, {}, $.ajaxSettings, options);
        s.context = s.context || s;
        id = 'jqFormIO' + (new Date().getTime());
        if (s.iframeTarget) {
            $io = $(s.iframeTarget);
            n = $io.attr('name');
            if (!n)
                 $io.attr('name', id);
            else
                id = n;
        }
        else {
            $io = $('<iframe name="' + id + '" src="'+ s.iframeSrc +'" />');
            $io.css({ position: 'absolute', top: '-1000px', left: '-1000px' });
        }
        io = $io[0];


        xhr = { // mock object
            aborted: 0,
            responseText: null,
            responseXML: null,
            status: 0,
            statusText: 'n/a',
            getAllResponseHeaders: function() {},
            getResponseHeader: function() {},
            setRequestHeader: function() {},
            abort: function(status) {
                var e = (status === 'timeout' ? 'timeout' : 'aborted');
                log('aborting upload... ' + e);
                this.aborted = 1;
                // #214
                if (io.contentWindow.document.execCommand) {
                    try { // #214
                        io.contentWindow.document.execCommand('Stop');
                    } catch(ignore) {}
                }
                $io.attr('src', s.iframeSrc); // abort op in progress
                xhr.error = e;
                if (s.error)
                    s.error.call(s.context, xhr, e, status);
                if (g)
                    $.event.trigger("ajaxError", [xhr, s, e]);
                if (s.complete)
                    s.complete.call(s.context, xhr, e);
            }
        };

        g = s.global;
        // trigger ajax global events so that activity/block indicators work like normal
        if (g && 0 === $.active++) {
            $.event.trigger("ajaxStart");
        }
        if (g) {
            $.event.trigger("ajaxSend", [xhr, s]);
        }

        if (s.beforeSend && s.beforeSend.call(s.context, xhr, s) === false) {
            if (s.global) {
                $.active--;
            }
            deferred.reject();
            return deferred;
        }
        if (xhr.aborted) {
            deferred.reject();
            return deferred;
        }

        // add submitting element to data if we know it
        sub = form.clk;
        if (sub) {
            n = sub.name;
            if (n && !sub.disabled) {
                s.extraData = s.extraData || {};
                s.extraData[n] = sub.value;
                if (sub.type == "image") {
                    s.extraData[n+'.x'] = form.clk_x;
                    s.extraData[n+'.y'] = form.clk_y;
                }
            }
        }

        var CLIENT_TIMEOUT_ABORT = 1;
        var SERVER_ABORT = 2;

        function getDoc(frame) {
            var doc = frame.contentWindow ? frame.contentWindow.document : frame.contentDocument ? frame.contentDocument : frame.document;
            return doc;
        }

        // Rails CSRF hack (thanks to Yvan Barthelemy)
        var csrf_token = $('meta[name=csrf-token]').attr('content');
        var csrf_param = $('meta[name=csrf-param]').attr('content');
        if (csrf_param && csrf_token) {
            s.extraData = s.extraData || {};
            s.extraData[csrf_param] = csrf_token;
        }

        // take a breath so that pending repaints get some cpu time before the upload starts
        function doSubmit() {
            // make sure form attrs are set
            var t = $form.attr('target'), a = $form.attr('action');

            // update form attrs in IE friendly way
            form.setAttribute('target',id);
            if (!method) {
                form.setAttribute('method', 'POST');
            }
            if (a != s.url) {
                form.setAttribute('action', s.url);
            }

            // ie borks in some cases when setting encoding
            if (! s.skipEncodingOverride && (!method || /post/i.test(method))) {
                $form.attr({
                    encoding: 'multipart/form-data',
                    enctype:  'multipart/form-data'
                });
            }

            // support timout
            if (s.timeout) {
                timeoutHandle = setTimeout(function() { timedOut = true; cb(CLIENT_TIMEOUT_ABORT); }, s.timeout);
            }

            // look for server aborts
            function checkState() {
                try {
                    var state = getDoc(io).readyState;
                    log('state = ' + state);
                    if (state && state.toLowerCase() == 'uninitialized')
                        setTimeout(checkState,50);
                }
                catch(e) {
                    log('Server abort: ' , e, ' (', e.name, ')');
                    cb(SERVER_ABORT);
                    if (timeoutHandle)
                        clearTimeout(timeoutHandle);
                    timeoutHandle = undefined;
                }
            }

            // add "extra" data to form if provided in options
            var extraInputs = [];
            try {
                if (s.extraData) {
                    for (var n in s.extraData) {
                        if (s.extraData.hasOwnProperty(n)) {
                           // if using the $.param format that allows for multiple values with the same name
                           if($.isPlainObject(s.extraData[n]) && s.extraData[n].hasOwnProperty('name') && s.extraData[n].hasOwnProperty('value')) {
                               extraInputs.push(
                               $('<input type="hidden" name="'+s.extraData[n].name+'">').attr('value',s.extraData[n].value)
                                   .appendTo(form)[0]);
                           } else {
                               extraInputs.push(
                               $('<input type="hidden" name="'+n+'">').attr('value',s.extraData[n])
                                   .appendTo(form)[0]);
                           }
                        }
                    }
                }

                if (!s.iframeTarget) {
                    // add iframe to doc and submit the form
                    $io.appendTo('body');
                    if (io.attachEvent)
                        io.attachEvent('onload', cb);
                    else
                        io.addEventListener('load', cb, false);
                }
                setTimeout(checkState,15);
                form.submit();
            }
            finally {
                // reset attrs and remove "extra" input elements
                form.setAttribute('action',a);
                if(t) {
                    form.setAttribute('target', t);
                } else {
                    $form.removeAttr('target');
                }
                $(extraInputs).remove();
            }
        }

        if (s.forceSync) {
            doSubmit();
        }
        else {
            setTimeout(doSubmit, 10); // this lets dom updates render
        }

        var data, doc, domCheckCount = 50, callbackProcessed;

        function cb(e) {
            if (xhr.aborted || callbackProcessed) {
                return;
            }
            try {
                doc = getDoc(io);
            }
            catch(ex) {
                log('cannot access response document: ', ex);
                e = SERVER_ABORT;
            }
            if (e === CLIENT_TIMEOUT_ABORT && xhr) {
                xhr.abort('timeout');
                deferred.reject(xhr, 'timeout');
                return;
            }
            else if (e == SERVER_ABORT && xhr) {
                xhr.abort('server abort');
                deferred.reject(xhr, 'error', 'server abort');
                return;
            }

            if (!doc || doc.location.href == s.iframeSrc) {
                // response not received yet
                if (!timedOut)
                    return;
            }
            if (io.detachEvent)
                io.detachEvent('onload', cb);
            else
                io.removeEventListener('load', cb, false);

            var status = 'success', errMsg;
            try {
                if (timedOut) {
                    throw 'timeout';
                }

                var isXml = s.dataType == 'xml' || doc.XMLDocument || $.isXMLDoc(doc);
                log('isXml='+isXml);
                if (!isXml && window.opera && (doc.body === null || !doc.body.innerHTML)) {
                    if (--domCheckCount) {
                        // in some browsers (Opera) the iframe DOM is not always traversable when
                        // the onload callback fires, so we loop a bit to accommodate
                        log('requeing onLoad callback, DOM not available');
                        setTimeout(cb, 250);
                        return;
                    }
                    // let this fall through because server response could be an empty document
                    //log('Could not access iframe DOM after mutiple tries.');
                    //throw 'DOMException: not available';
                }

                //log('response detected');
                var docRoot = doc.body ? doc.body : doc.documentElement;
                xhr.responseText = docRoot ? docRoot.innerHTML : null;
                xhr.responseXML = doc.XMLDocument ? doc.XMLDocument : doc;
                if (isXml)
                    s.dataType = 'xml';
                xhr.getResponseHeader = function(header){
                    var headers = {'content-type': s.dataType};
                    return headers[header];
                };
                // support for XHR 'status' & 'statusText' emulation :
                if (docRoot) {
                    xhr.status = Number( docRoot.getAttribute('status') ) || xhr.status;
                    xhr.statusText = docRoot.getAttribute('statusText') || xhr.statusText;
                }

                var dt = (s.dataType || '').toLowerCase();
                var scr = /(json|script|text)/.test(dt);
                if (scr || s.textarea) {
                    // see if user embedded response in textarea
                    var ta = doc.getElementsByTagName('textarea')[0];
                    if (ta) {
                        xhr.responseText = ta.value;
                        // support for XHR 'status' & 'statusText' emulation :
                        xhr.status = Number( ta.getAttribute('status') ) || xhr.status;
                        xhr.statusText = ta.getAttribute('statusText') || xhr.statusText;
                    }
                    else if (scr) {
                        // account for browsers injecting pre around json response
                        var pre = doc.getElementsByTagName('pre')[0];
                        var b = doc.getElementsByTagName('body')[0];
                        if (pre) {
                            xhr.responseText = pre.textContent ? pre.textContent : pre.innerText;
                        }
                        else if (b) {
                            xhr.responseText = b.textContent ? b.textContent : b.innerText;
                        }
                    }
                }
                else if (dt == 'xml' && !xhr.responseXML && xhr.responseText) {
                    xhr.responseXML = toXml(xhr.responseText);
                }

                try {
                    data = httpData(xhr, dt, s);
                }
                catch (e) {
                    status = 'parsererror';
                    xhr.error = errMsg = (e || status);
                }
            }
            catch (e) {
                log('error caught: ',e);
                status = 'error';
                xhr.error = errMsg = (e || status);
            }

            if (xhr.aborted) {
                log('upload aborted');
                status = null;
            }

            if (xhr.status) { // we've set xhr.status
                status = (xhr.status >= 200 && xhr.status < 300 || xhr.status === 304) ? 'success' : 'error';
            }

            // ordering of these callbacks/triggers is odd, but that's how $.ajax does it
            if (status === 'success') {
                if (s.success)
                    s.success.call(s.context, data, 'success', xhr);
                deferred.resolve(xhr.responseText, 'success', xhr);
                if (g)
                    $.event.trigger("ajaxSuccess", [xhr, s]);
            }
            else if (status) {
                if (errMsg === undefined)
                    errMsg = xhr.statusText;
                if (s.error)
                    s.error.call(s.context, xhr, status, errMsg);
                deferred.reject(xhr, 'error', errMsg);
                if (g)
                    $.event.trigger("ajaxError", [xhr, s, errMsg]);
            }

            if (g)
                $.event.trigger("ajaxComplete", [xhr, s]);

            if (g && ! --$.active) {
                $.event.trigger("ajaxStop");
            }

            if (s.complete)
                s.complete.call(s.context, xhr, status);

            callbackProcessed = true;
            if (s.timeout)
                clearTimeout(timeoutHandle);

            // clean up
            setTimeout(function() {
                if (!s.iframeTarget)
                    $io.remove();
                xhr.responseXML = null;
            }, 100);
        }

        var toXml = $.parseXML || function(s, doc) { // use parseXML if available (jQuery 1.5+)
            if (window.ActiveXObject) {
                doc = new ActiveXObject('Microsoft.XMLDOM');
                doc.async = 'false';
                doc.loadXML(s);
            }
            else {
                doc = (new DOMParser()).parseFromString(s, 'text/xml');
            }
            return (doc && doc.documentElement && doc.documentElement.nodeName != 'parsererror') ? doc : null;
        };
        var parseJSON = $.parseJSON || function(s) {
            /*jslint evil:true */
            return window['eval']('(' + s + ')');
        };

        var httpData = function( xhr, type, s ) { // mostly lifted from jq1.4.4

            var ct = xhr.getResponseHeader('content-type') || '',
                xml = type === 'xml' || !type && ct.indexOf('xml') >= 0,
                data = xml ? xhr.responseXML : xhr.responseText;

            if (xml && data.documentElement.nodeName === 'parsererror') {
                if ($.error)
                    $.error('parsererror');
            }
            if (s && s.dataFilter) {
                data = s.dataFilter(data, type);
            }
            if (typeof data === 'string') {
                if (type === 'json' || !type && ct.indexOf('json') >= 0) {
                    data = parseJSON(data);
                } else if (type === "script" || !type && ct.indexOf("javascript") >= 0) {
                    $.globalEval(data);
                }
            }
            return data;
        };

        return deferred;
    }
};

/**
 * ajaxForm() provides a mechanism for fully automating form submission.
 *
 * The advantages of using this method instead of ajaxSubmit() are:
 *
 * 1: This method will include coordinates for <input type="image" /> elements (if the element
 *    is used to submit the form).
 * 2. This method will include the submit element's name/value data (for the element that was
 *    used to submit the form).
 * 3. This method binds the submit() method to the form for you.
 *
 * The options argument for ajaxForm works exactly as it does for ajaxSubmit.  ajaxForm merely
 * passes the options argument along after properly binding events for submit elements and
 * the form itself.
 */
$.fn.ajaxForm = function(options) {
    options = options || {};
    options.delegation = options.delegation && $.isFunction($.fn.on);

    // in jQuery 1.3+ we can fix mistakes with the ready state
    if (!options.delegation && this.length === 0) {
        var o = { s: this.selector, c: this.context };
        if (!$.isReady && o.s) {
            log('DOM not ready, queuing ajaxForm');
            $(function() {
                $(o.s,o.c).ajaxForm(options);
            });
            return this;
        }
        // is your DOM ready?  http://docs.jquery.com/Tutorials:Introducing_$(document).ready()
        log('terminating; zero elements found by selector' + ($.isReady ? '' : ' (DOM not ready)'));
        return this;
    }

    if ( options.delegation ) {
        $(document)
            .off('submit.form-plugin', this.selector, doAjaxSubmit)
            .off('click.form-plugin', this.selector, captureSubmittingElement)
            .on('submit.form-plugin', this.selector, options, doAjaxSubmit)
            .on('click.form-plugin', this.selector, options, captureSubmittingElement);
        return this;
    }

    return this.ajaxFormUnbind()
        .bind('submit.form-plugin', options, doAjaxSubmit)
        .bind('click.form-plugin', options, captureSubmittingElement);
};

// private event handlers
function doAjaxSubmit(e) {
    /*jshint validthis:true */
    var options = e.data;
    if (!e.isDefaultPrevented()) { // if event has been canceled, don't proceed
        e.preventDefault();
        $(this).ajaxSubmit(options);
    }
}

function captureSubmittingElement(e) {
    /*jshint validthis:true */
    var target = e.target;
    var $el = $(target);
    if (!($el.is("[type=submit],[type=image]"))) {
        // is this a child element of the submit el?  (ex: a span within a button)
        var t = $el.closest('[type=submit]');
        if (t.length === 0) {
            return;
        }
        target = t[0];
    }
    var form = this;
    form.clk = target;
    if (target.type == 'image') {
        if (e.offsetX !== undefined) {
            form.clk_x = e.offsetX;
            form.clk_y = e.offsetY;
        } else if (typeof $.fn.offset == 'function') {
            var offset = $el.offset();
            form.clk_x = e.pageX - offset.left;
            form.clk_y = e.pageY - offset.top;
        } else {
            form.clk_x = e.pageX - target.offsetLeft;
            form.clk_y = e.pageY - target.offsetTop;
        }
    }
    // clear form vars
    setTimeout(function() { form.clk = form.clk_x = form.clk_y = null; }, 100);
}


// ajaxFormUnbind unbinds the event handlers that were bound by ajaxForm
$.fn.ajaxFormUnbind = function() {
    return this.unbind('submit.form-plugin click.form-plugin');
};

/**
 * formToArray() gathers form element data into an array of objects that can
 * be passed to any of the following ajax functions: $.get, $.post, or load.
 * Each object in the array has both a 'name' and 'value' property.  An example of
 * an array for a simple login form might be:
 *
 * [ { name: 'username', value: 'jresig' }, { name: 'password', value: 'secret' } ]
 *
 * It is this array that is passed to pre-submit callback functions provided to the
 * ajaxSubmit() and ajaxForm() methods.
 */
$.fn.formToArray = function(semantic, elements) {
    var a = [];
    if (this.length === 0) {
        return a;
    }

    var form = this[0];
    var els = semantic ? form.getElementsByTagName('*') : form.elements;
    if (!els) {
        return a;
    }

    var i,j,n,v,el,max,jmax;
    for(i=0, max=els.length; i < max; i++) {
        el = els[i];
        n = el.name;
        if (!n) {
            continue;
        }

        if (semantic && form.clk && el.type == "image") {
            // handle image inputs on the fly when semantic == true
            if(!el.disabled && form.clk == el) {
                a.push({name: n, value: $(el).val(), type: el.type });
                a.push({name: n+'.x', value: form.clk_x}, {name: n+'.y', value: form.clk_y});
            }
            continue;
        }

        v = $.fieldValue(el, true);
        if (v && v.constructor == Array) {
            if (elements)
                elements.push(el);
            for(j=0, jmax=v.length; j < jmax; j++) {
                a.push({name: n, value: v[j]});
            }
        }
        else if (feature.fileapi && el.type == 'file' && !el.disabled) {
            if (elements)
                elements.push(el);
            var files = el.files;
            if (files.length) {
                for (j=0; j < files.length; j++) {
                    a.push({name: n, value: files[j], type: el.type});
                }
            }
            else {
                // #180
                a.push({ name: n, value: '', type: el.type });
            }
        }
        else if (v !== null && typeof v != 'undefined') {
            if (elements)
                elements.push(el);
            a.push({name: n, value: v, type: el.type, required: el.required});
        }
    }

    if (!semantic && form.clk) {
        // input type=='image' are not found in elements array! handle it here
        var $input = $(form.clk), input = $input[0];
        n = input.name;
        if (n && !input.disabled && input.type == 'image') {
            a.push({name: n, value: $input.val()});
            a.push({name: n+'.x', value: form.clk_x}, {name: n+'.y', value: form.clk_y});
        }
    }
    return a;
};

/**
 * Serializes form data into a 'submittable' string. This method will return a string
 * in the format: name1=value1&amp;name2=value2
 */
$.fn.formSerialize = function(semantic) {
    //hand off to jQuery.param for proper encoding
    return $.param(this.formToArray(semantic));
};

/**
 * Serializes all field elements in the jQuery object into a query string.
 * This method will return a string in the format: name1=value1&amp;name2=value2
 */
$.fn.fieldSerialize = function(successful) {
    var a = [];
    this.each(function() {
        var n = this.name;
        if (!n) {
            return;
        }
        var v = $.fieldValue(this, successful);
        if (v && v.constructor == Array) {
            for (var i=0,max=v.length; i < max; i++) {
                a.push({name: n, value: v[i]});
            }
        }
        else if (v !== null && typeof v != 'undefined') {
            a.push({name: this.name, value: v});
        }
    });
    //hand off to jQuery.param for proper encoding
    return $.param(a);
};

/**
 * Returns the value(s) of the element in the matched set.  For example, consider the following form:
 *
 *  <form><fieldset>
 *      <input name="A" type="text" />
 *      <input name="A" type="text" />
 *      <input name="B" type="checkbox" value="B1" />
 *      <input name="B" type="checkbox" value="B2"/>
 *      <input name="C" type="radio" value="C1" />
 *      <input name="C" type="radio" value="C2" />
 *  </fieldset></form>
 *
 *  var v = $('input[type=text]').fieldValue();
 *  // if no values are entered into the text inputs
 *  v == ['','']
 *  // if values entered into the text inputs are 'foo' and 'bar'
 *  v == ['foo','bar']
 *
 *  var v = $('input[type=checkbox]').fieldValue();
 *  // if neither checkbox is checked
 *  v === undefined
 *  // if both checkboxes are checked
 *  v == ['B1', 'B2']
 *
 *  var v = $('input[type=radio]').fieldValue();
 *  // if neither radio is checked
 *  v === undefined
 *  // if first radio is checked
 *  v == ['C1']
 *
 * The successful argument controls whether or not the field element must be 'successful'
 * (per http://www.w3.org/TR/html4/interact/forms.html#successful-controls).
 * The default value of the successful argument is true.  If this value is false the value(s)
 * for each element is returned.
 *
 * Note: This method *always* returns an array.  If no valid value can be determined the
 *    array will be empty, otherwise it will contain one or more values.
 */
$.fn.fieldValue = function(successful) {
    for (var val=[], i=0, max=this.length; i < max; i++) {
        var el = this[i];
        var v = $.fieldValue(el, successful);
        if (v === null || typeof v == 'undefined' || (v.constructor == Array && !v.length)) {
            continue;
        }
        if (v.constructor == Array)
            $.merge(val, v);
        else
            val.push(v);
    }
    return val;
};

/**
 * Returns the value of the field element.
 */
$.fieldValue = function(el, successful) {
    var n = el.name, t = el.type, tag = el.tagName.toLowerCase();
    if (successful === undefined) {
        successful = true;
    }

    if (successful && (!n || el.disabled || t == 'reset' || t == 'button' ||
        (t == 'checkbox' || t == 'radio') && !el.checked ||
        (t == 'submit' || t == 'image') && el.form && el.form.clk != el ||
        tag == 'select' && el.selectedIndex == -1)) {
            return null;
    }

    if (tag == 'select') {
        var index = el.selectedIndex;
        if (index < 0) {
            return null;
        }
        var a = [], ops = el.options;
        var one = (t == 'select-one');
        var max = (one ? index+1 : ops.length);
        for(var i=(one ? index : 0); i < max; i++) {
            var op = ops[i];
            if (op.selected) {
                var v = op.value;
                if (!v) { // extra pain for IE...
                    v = (op.attributes && op.attributes['value'] && !(op.attributes['value'].specified)) ? op.text : op.value;
                }
                if (one) {
                    return v;
                }
                a.push(v);
            }
        }
        return a;
    }
    return $(el).val();
};

/**
 * Clears the form data.  Takes the following actions on the form's input fields:
 *  - input text fields will have their 'value' property set to the empty string
 *  - select elements will have their 'selectedIndex' property set to -1
 *  - checkbox and radio inputs will have their 'checked' property set to false
 *  - inputs of type submit, button, reset, and hidden will *not* be effected
 *  - button elements will *not* be effected
 */
$.fn.clearForm = function(includeHidden) {
    return this.each(function() {
        $('input,select,textarea', this).clearFields(includeHidden);
    });
};

/**
 * Clears the selected form elements.
 */
$.fn.clearFields = $.fn.clearInputs = function(includeHidden) {
    var re = /^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i; // 'hidden' is not in this list
    return this.each(function() {
        var t = this.type, tag = this.tagName.toLowerCase();
        if (re.test(t) || tag == 'textarea') {
            this.value = '';
        }
        else if (t == 'checkbox' || t == 'radio') {
            this.checked = false;
        }
        else if (tag == 'select') {
            this.selectedIndex = -1;
        }
        else if (includeHidden) {
            // includeHidden can be the value true, or it can be a selector string
            // indicating a special test; for example:
            //  $('#myForm').clearForm('.special:hidden')
            // the above would clean hidden inputs that have the class of 'special'
            if ( (includeHidden === true && /hidden/.test(t)) ||
                 (typeof includeHidden == 'string' && $(this).is(includeHidden)) )
                this.value = '';
        }
    });
};

/**
 * Resets the form data.  Causes all form elements to be reset to their original value.
 */
$.fn.resetForm = function() {
    return this.each(function() {
        // guard against an input with the name of 'reset'
        // note that IE reports the reset function as an 'object'
        if (typeof this.reset == 'function' || (typeof this.reset == 'object' && !this.reset.nodeType)) {
            this.reset();
        }
    });
};

/**
 * Enables or disables any matching elements.
 */
$.fn.enable = function(b) {
    if (b === undefined) {
        b = true;
    }
    return this.each(function() {
        this.disabled = !b;
    });
};

/**
 * Checks/unchecks any matching checkboxes or radio buttons and
 * selects/deselects and matching option elements.
 */
$.fn.selected = function(select) {
    if (select === undefined) {
        select = true;
    }
    return this.each(function() {
        var t = this.type;
        if (t == 'checkbox' || t == 'radio') {
            this.checked = select;
        }
        else if (this.tagName.toLowerCase() == 'option') {
            var $sel = $(this).parent('select');
            if (select && $sel[0] && $sel[0].type == 'select-one') {
                // deselect all other options
                $sel.find('option').selected(false);
            }
            this.selected = select;
        }
    });
};

// expose debug var
$.fn.ajaxSubmit.debug = false;

// helper fn for console logging
function log() {
    if (!$.fn.ajaxSubmit.debug)
        return;
    var msg = '[jquery.form] ' + Array.prototype.join.call(arguments,'');
    if (window.console && window.console.log) {
        window.console.log(msg);
    }
    else if (window.opera && window.opera.postError) {
        window.opera.postError(msg);
    }
}

})(jQuery);
/*!
 * jQuery Validation Plugin 1.11.1
 *
 * http://bassistance.de/jquery-plugins/jquery-plugin-validation/
 * http://docs.jquery.com/Plugins/Validation
 *
 * Copyright 2013 Jörn Zaefferer
 * Released under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 */

 
(function($) {

$.extend($.fn, {
	// http://docs.jquery.com/Plugins/Validation/validate
	validate: function( options ) {

		// if nothing is selected, return nothing; can't chain anyway
		if ( !this.length ) {
			if ( options && options.debug && window.console ) {
				console.warn( "Nothing selected, can't validate, returning nothing." );
			}
			return;
		}

		// check if a validator for this form was already created
		var validator = $.data( this[0], "validator" );
		if ( validator ) {
			return validator;
		}

		// Add novalidate tag if HTML5.
		this.attr( "novalidate", "novalidate" );

		validator = new $.validator( options, this[0] );
		$.data( this[0], "validator", validator );

		if ( validator.settings.onsubmit ) {

			this.validateDelegate( ":submit", "click", function( event ) {
				if ( validator.settings.submitHandler ) {
					validator.submitButton = event.target;
				}
				// allow suppressing validation by adding a cancel class to the submit button
				if ( $(event.target).hasClass("cancel") ) {
					validator.cancelSubmit = true;
				}

				// allow suppressing validation by adding the html5 formnovalidate attribute to the submit button
				if ( $(event.target).attr("formnovalidate") !== undefined ) {
					validator.cancelSubmit = true;
				}
			});

			// validate the form on submit
			this.submit( function( event ) {
				if ( validator.settings.debug ) {
					// prevent form submit to be able to see console output
					event.preventDefault();
				}
				function handle() {
					var hidden;
					if ( validator.settings.submitHandler ) {
						if ( validator.submitButton ) {
							// insert a hidden input as a replacement for the missing submit button
							hidden = $("<input type='hidden'/>").attr("name", validator.submitButton.name).val( $(validator.submitButton).val() ).appendTo(validator.currentForm);
						}
						validator.settings.submitHandler.call( validator, validator.currentForm, event );
						if ( validator.submitButton ) {
							// and clean up afterwards; thanks to no-block-scope, hidden can be referenced
							hidden.remove();
						}
						return false;
					}
					return true;
				}

				// prevent submit for invalid forms or custom submit handlers
				if ( validator.cancelSubmit ) {
					validator.cancelSubmit = false;
					return handle();
				}
				if ( validator.form() ) {
					if ( validator.pendingRequest ) {
						validator.formSubmitted = true;
						return false;
					}
					return handle();
				} else {
					validator.focusInvalid();
					return false;
				}
			});
		}

		return validator;
	},
	// http://docs.jquery.com/Plugins/Validation/valid
	valid: function() {
		if ( $(this[0]).is("form")) {
			return this.validate().form();
		} else {
			var valid = true;
			var validator = $(this[0].form).validate();
			this.each(function() {
				valid = valid && validator.element(this);
			});
			return valid;
		}
	},
	// attributes: space seperated list of attributes to retrieve and remove
	removeAttrs: function( attributes ) {
		var result = {},
			$element = this;
		$.each(attributes.split(/\s/), function( index, value ) {
			result[value] = $element.attr(value);
			$element.removeAttr(value);
		});
		return result;
	},
	// http://docs.jquery.com/Plugins/Validation/rules
	rules: function( command, argument ) {
		var element = this[0];

		if ( command ) {
			var settings = $.data(element.form, "validator").settings;
			var staticRules = settings.rules;
			var existingRules = $.validator.staticRules(element);
			switch(command) {
			case "add":
				$.extend(existingRules, $.validator.normalizeRule(argument));
				// remove messages from rules, but allow them to be set separetely
				delete existingRules.messages;
				staticRules[element.name] = existingRules;
				if ( argument.messages ) {
					settings.messages[element.name] = $.extend( settings.messages[element.name], argument.messages );
				}
				break;
			case "remove":
				if ( !argument ) {
					delete staticRules[element.name];
					return existingRules;
				}
				var filtered = {};
				$.each(argument.split(/\s/), function( index, method ) {
					filtered[method] = existingRules[method];
					delete existingRules[method];
				});
				return filtered;
			}
		}

		var data = $.validator.normalizeRules(
		$.extend(
			{},
			$.validator.classRules(element),
			$.validator.attributeRules(element),
			$.validator.dataRules(element),
			$.validator.staticRules(element)
		), element);

		// make sure required is at front
		if ( data.required ) {
			var param = data.required;
			delete data.required;
			data = $.extend({required: param}, data);
		}

		return data;
	}
});

// Custom selectors
$.extend($.expr[":"], {
	// http://docs.jquery.com/Plugins/Validation/blank
	blank: function( a ) { return !$.trim("" + $(a).val()); },
	// http://docs.jquery.com/Plugins/Validation/filled
	filled: function( a ) { return !!$.trim("" + $(a).val()); },
	// http://docs.jquery.com/Plugins/Validation/unchecked
	unchecked: function( a ) { return !$(a).prop("checked"); }
});

// constructor for validator
$.validator = function( options, form ) {
	this.settings = $.extend( true, {}, $.validator.defaults, options );
	this.currentForm = form;
	this.init();
};

$.validator.format = function( source, params ) {
	if ( arguments.length === 1 ) {
		return function() {
			var args = $.makeArray(arguments);
			args.unshift(source);
			return $.validator.format.apply( this, args );
		};
	}
	if ( arguments.length > 2 && params.constructor !== Array  ) {
		params = $.makeArray(arguments).slice(1);
	}
	if ( params.constructor !== Array ) {
		params = [ params ];
	}
	$.each(params, function( i, n ) {
		source = source.replace( new RegExp("\\{" + i + "\\}", "g"), function() {
			return n;
		});
	});
	return source;
};

$.extend($.validator, {

	defaults: {
		messages: {},
		groups: {},
		rules: {},
		errorClass: "error",
		validClass: "valid",
		errorElement: "label",
		focusInvalid: true,
		errorContainer: $([]),
		errorLabelContainer: $([]),
		onsubmit: true,
		ignore: ":hidden",
		ignoreTitle: false,
		onfocusin: function( element, event ) {
			this.lastActive = element;

			// hide error label and remove error class on focus if enabled
			if ( this.settings.focusCleanup && !this.blockFocusCleanup ) {
				if ( this.settings.unhighlight ) {
					this.settings.unhighlight.call( this, element, this.settings.errorClass, this.settings.validClass );
				}
				this.addWrapper(this.errorsFor(element)).hide();
			}
		},
		onfocusout: function( element, event ) {
			if ( !this.checkable(element) && (element.name in this.submitted || !this.optional(element)) ) {
				this.element(element);
			}
		},
		onkeyup: function( element, event ) {
			if ( event.which === 9 && this.elementValue(element) === "" ) {
				return;
			} else if ( element.name in this.submitted || element === this.lastElement ) {
				this.element(element);
			}
		},
		onclick: function( element, event ) {
			// click on selects, radiobuttons and checkboxes
			if ( element.name in this.submitted ) {
				this.element(element);
			}
			// or option elements, check parent select in that case
			else if ( element.parentNode.name in this.submitted ) {
				this.element(element.parentNode);
			}
		},
		highlight: function( element, errorClass, validClass ) {
			if ( element.type === "radio" ) {
				this.findByName(element.name).addClass(errorClass).removeClass(validClass);
			} else {
				$(element).addClass(errorClass).removeClass(validClass);
			}
		},
		unhighlight: function( element, errorClass, validClass ) {
			if ( element.type === "radio" ) {
				this.findByName(element.name).removeClass(errorClass).addClass(validClass);
			} else {
				$(element).removeClass(errorClass).addClass(validClass);
			}
		}
	},

	// http://docs.jquery.com/Plugins/Validation/Validator/setDefaults
	setDefaults: function( settings ) {
		$.extend( $.validator.defaults, settings );
	},

	messages: {
		required: "This field is required.",
		remote: "Please fix this field.",
		email: "Please enter a valid email address.",
		url: "Please enter a valid URL.",
		date: "Please enter a valid date.",
		dateISO: "Please enter a valid date (ISO).",
		number: "Please enter a valid number.",
		digits: "Please enter only digits.",
		creditcard: "Please enter a valid credit card number.",
		equalTo: "Please enter the same value again.",
		maxlength: $.validator.format("Please enter no more than {0} characters."),
		minlength: $.validator.format("Please enter at least {0} characters."),
		rangelength: $.validator.format("Please enter a value between {0} and {1} characters long."),
		range: $.validator.format("Please enter a value between {0} and {1}."),
		max: $.validator.format("Please enter a value less than or equal to {0}."),
		min: $.validator.format("Please enter a value greater than or equal to {0}.")
	},

	autoCreateRanges: false,

	prototype: {

		init: function() {
			this.labelContainer = $(this.settings.errorLabelContainer);
			this.errorContext = this.labelContainer.length && this.labelContainer || $(this.currentForm);
			this.containers = $(this.settings.errorContainer).add( this.settings.errorLabelContainer );
			this.submitted = {};
			this.valueCache = {};
			this.pendingRequest = 0;
			this.pending = {};
			this.invalid = {};
			this.reset();

			var groups = (this.groups = {});
			$.each(this.settings.groups, function( key, value ) {
				if ( typeof value === "string" ) {
					value = value.split(/\s/);
				}
				$.each(value, function( index, name ) {
					groups[name] = key;
				});
			});
			var rules = this.settings.rules;
			$.each(rules, function( key, value ) {
				rules[key] = $.validator.normalizeRule(value);
			});

			function delegate(event) {
				var validator = $.data(this[0].form, "validator"),
					eventType = "on" + event.type.replace(/^validate/, "");
				if ( validator.settings[eventType] ) {
					validator.settings[eventType].call(validator, this[0], event);
				}
			}
			$(this.currentForm)
				.validateDelegate(":text, [type='password'], [type='file'], select, textarea, " +
					"[type='number'], [type='search'] ,[type='tel'], [type='url'], " +
					"[type='email'], [type='datetime'], [type='date'], [type='month'], " +
					"[type='week'], [type='time'], [type='datetime-local'], " +
					"[type='range'], [type='color'] ",
					"focusin focusout keyup", delegate)
				.validateDelegate("[type='radio'], [type='checkbox'], select, option", "click", delegate);

			if ( this.settings.invalidHandler ) {
				$(this.currentForm).bind("invalid-form.validate", this.settings.invalidHandler);
			}
		},

		// http://docs.jquery.com/Plugins/Validation/Validator/form
		form: function() {
			this.checkForm();
			$.extend(this.submitted, this.errorMap);
			this.invalid = $.extend({}, this.errorMap);
			if ( !this.valid() ) {
				$(this.currentForm).triggerHandler("invalid-form", [this]);
			}
			this.showErrors();
			return this.valid();
		},

		checkForm: function() {
			this.prepareForm();
			for ( var i = 0, elements = (this.currentElements = this.elements()); elements[i]; i++ ) {
				this.check( elements[i] );
			}
			return this.valid();
		},

		// http://docs.jquery.com/Plugins/Validation/Validator/element
		element: function( element ) {
			element = this.validationTargetFor( this.clean( element ) );
			this.lastElement = element;
			this.prepareElement( element );
			this.currentElements = $(element);
			var result = this.check( element ) !== false;
			if ( result ) {
				delete this.invalid[element.name];
			} else {
				this.invalid[element.name] = true;
			}
			if ( !this.numberOfInvalids() ) {
				// Hide error containers on last error
				this.toHide = this.toHide.add( this.containers );
			}
			this.showErrors();
			return result;
		},

		// http://docs.jquery.com/Plugins/Validation/Validator/showErrors
		showErrors: function( errors ) {
			if ( errors ) {
				// add items to error list and map
				$.extend( this.errorMap, errors );
				this.errorList = [];
				for ( var name in errors ) {
					this.errorList.push({
						message: errors[name],
						element: this.findByName(name)[0]
					});
				}
				// remove items from success list
				this.successList = $.grep( this.successList, function( element ) {
					return !(element.name in errors);
				});
			}
			if ( this.settings.showErrors ) {
				this.settings.showErrors.call( this, this.errorMap, this.errorList );
			} else {
				this.defaultShowErrors();
			}
		},

		// http://docs.jquery.com/Plugins/Validation/Validator/resetForm
		resetForm: function() {
			if ( $.fn.resetForm ) {
				$(this.currentForm).resetForm();
			}
			this.submitted = {};
			this.lastElement = null;
			this.prepareForm();
			this.hideErrors();
			this.elements().removeClass( this.settings.errorClass ).removeData( "previousValue" );
		},

		numberOfInvalids: function() {
			return this.objectLength(this.invalid);
		},

		objectLength: function( obj ) {
			var count = 0;
			for ( var i in obj ) {
				count++;
			}
			return count;
		},

		hideErrors: function() {
			this.addWrapper( this.toHide ).hide();
		},

		valid: function() {
			return this.size() === 0;
		},

		size: function() {
			return this.errorList.length;
		},

		focusInvalid: function() {
			if ( this.settings.focusInvalid ) {
				try {
					$(this.findLastActive() || this.errorList.length && this.errorList[0].element || [])
					.filter(":visible")
					.focus()
					// manually trigger focusin event; without it, focusin handler isn't called, findLastActive won't have anything to find
					.trigger("focusin");
				} catch(e) {
					// ignore IE throwing errors when focusing hidden elements
				}
			}
		},

		findLastActive: function() {
			var lastActive = this.lastActive;
			return lastActive && $.grep(this.errorList, function( n ) {
				return n.element.name === lastActive.name;
			}).length === 1 && lastActive;
		},

		elements: function() {
			var validator = this,
				rulesCache = {};

			// select all valid inputs inside the form (no submit or reset buttons)
			return $(this.currentForm)
			.find("input, select, textarea")
			.not(":submit, :reset, :image, [disabled]")
			.not( this.settings.ignore )
			.filter(function() {
				if ( !this.name && validator.settings.debug && window.console ) {
					console.error( "%o has no name assigned", this);
				}

				// select only the first element for each name, and only those with rules specified
				if ( this.name in rulesCache || !validator.objectLength($(this).rules()) ) {
					return false;
				}

				rulesCache[this.name] = true;
				return true;
			});
		},

		clean: function( selector ) {
			return $(selector)[0];
		},

		errors: function() {
			var errorClass = this.settings.errorClass.replace(" ", ".");
			return $(this.settings.errorElement + "." + errorClass, this.errorContext);
		},

		reset: function() {
			this.successList = [];
			this.errorList = [];
			this.errorMap = {};
			this.toShow = $([]);
			this.toHide = $([]);
			this.currentElements = $([]);
		},

		prepareForm: function() {
			this.reset();
			this.toHide = this.errors().add( this.containers );
		},

		prepareElement: function( element ) {
			this.reset();
			this.toHide = this.errorsFor(element);
		},

		elementValue: function( element ) {
			var type = $(element).attr("type"),
				val = $(element).val();

			if ( type === "radio" || type === "checkbox" ) {
				return $("input[name='" + $(element).attr("name") + "']:checked").val();
			}

			if ( typeof val === "string" ) {
				return val.replace(/\r/g, "");
			}
			return val;
		},

		check: function( element ) {
			element = this.validationTargetFor( this.clean( element ) );

			var rules = $(element).rules();
			var dependencyMismatch = false;
			var val = this.elementValue(element);
			var result;

			for (var method in rules ) {
				var rule = { method: method, parameters: rules[method] };
				try {

					result = $.validator.methods[method].call( this, val, element, rule.parameters );

					// if a method indicates that the field is optional and therefore valid,
					// don't mark it as valid when there are no other rules
					if ( result === "dependency-mismatch" ) {
						dependencyMismatch = true;
						continue;
					}
					dependencyMismatch = false;

					if ( result === "pending" ) {
						this.toHide = this.toHide.not( this.errorsFor(element) );
						return;
					}

					if ( !result ) {
						this.formatAndAdd( element, rule );
						return false;
					}
				} catch(e) {
					if ( this.settings.debug && window.console ) {
						console.log( "Exception occurred when checking element " + element.id + ", check the '" + rule.method + "' method.", e );
					}
					throw e;
				}
			}
			if ( dependencyMismatch ) {
				return;
			}
			if ( this.objectLength(rules) ) {
				this.successList.push(element);
			}
			return true;
		},

		// return the custom message for the given element and validation method
		// specified in the element's HTML5 data attribute
		customDataMessage: function( element, method ) {
			return $(element).data("msg-" + method.toLowerCase()) || (element.attributes && $(element).attr("data-msg-" + method.toLowerCase()));
		},

		// return the custom message for the given element name and validation method
		customMessage: function( name, method ) {
			var m = this.settings.messages[name];
			return m && (m.constructor === String ? m : m[method]);
		},

		// return the first defined argument, allowing empty strings
		findDefined: function() {
			for(var i = 0; i < arguments.length; i++) {
				if ( arguments[i] !== undefined ) {
					return arguments[i];
				}
			}
			return undefined;
		},

		defaultMessage: function( element, method ) {
			return this.findDefined(
				this.customMessage( element.name, method ),
				this.customDataMessage( element, method ),
				// title is never undefined, so handle empty string as undefined
				!this.settings.ignoreTitle && element.title || undefined,
				$.validator.messages[method],
				"<strong>Warning: No message defined for " + element.name + "</strong>"
			);
		},

		formatAndAdd: function( element, rule ) {
			var message = this.defaultMessage( element, rule.method ),
				theregex = /\$?\{(\d+)\}/g;
			if ( typeof message === "function" ) {
				message = message.call(this, rule.parameters, element);
			} else if (theregex.test(message)) {
				message = $.validator.format(message.replace(theregex, "{$1}"), rule.parameters);
			}
			this.errorList.push({
				message: message,
				element: element
			});

			this.errorMap[element.name] = message;
			this.submitted[element.name] = message;
		},

		addWrapper: function( toToggle ) {
			if ( this.settings.wrapper ) {
				toToggle = toToggle.add( toToggle.parent( this.settings.wrapper ) );
			}
			return toToggle;
		},

		defaultShowErrors: function() {
			var i, elements;
			for ( i = 0; this.errorList[i]; i++ ) {
				var error = this.errorList[i];
				if ( this.settings.highlight ) {
					this.settings.highlight.call( this, error.element, this.settings.errorClass, this.settings.validClass );
				}
				this.showLabel( error.element, error.message );
			}
			if ( this.errorList.length ) {
				this.toShow = this.toShow.add( this.containers );
			}
			if ( this.settings.success ) {
				for ( i = 0; this.successList[i]; i++ ) {
					this.showLabel( this.successList[i] );
				}
			}
			if ( this.settings.unhighlight ) {
				for ( i = 0, elements = this.validElements(); elements[i]; i++ ) {
					this.settings.unhighlight.call( this, elements[i], this.settings.errorClass, this.settings.validClass );
				}
			}
			this.toHide = this.toHide.not( this.toShow );
			this.hideErrors();
			this.addWrapper( this.toShow ).show();
		},

		validElements: function() {
			return this.currentElements.not(this.invalidElements());
		},

		invalidElements: function() {
			return $(this.errorList).map(function() {
				return this.element;
			});
		},

		showLabel: function( element, message ) {
			var label = this.errorsFor( element );
			if ( label.length ) {
				// refresh error/success class
				label.removeClass( this.settings.validClass ).addClass( this.settings.errorClass );
				// replace message on existing label
				label.html(message);
			} else {
				// create label
				label = $("<" + this.settings.errorElement + ">")
					.attr("for", this.idOrName(element))
					.addClass(this.settings.errorClass)
					.html(message || "");
				if ( this.settings.wrapper ) {
					// make sure the element is visible, even in IE
					// actually showing the wrapped element is handled elsewhere
					label = label.hide().show().wrap("<" + this.settings.wrapper + "/>").parent();
				}
				if ( !this.labelContainer.append(label).length ) {
					if ( this.settings.errorPlacement ) {
						this.settings.errorPlacement(label, $(element) );
					} else {
						label.insertAfter(element);
					}
				}
			}
			if ( !message && this.settings.success ) {
				label.text("");
				if ( typeof this.settings.success === "string" ) {
					label.addClass( this.settings.success );
				} else {
					this.settings.success( label, element );
				}
			}
			this.toShow = this.toShow.add(label);
		},

		errorsFor: function( element ) {
			var name = this.idOrName(element);
			return this.errors().filter(function() {
				return $(this).attr("for") === name;
			});
		},

		idOrName: function( element ) {
			return this.groups[element.name] || (this.checkable(element) ? element.name : element.id || element.name);
		},

		validationTargetFor: function( element ) {
			// if radio/checkbox, validate first element in group instead
			if ( this.checkable(element) ) {
				element = this.findByName( element.name ).not(this.settings.ignore)[0];
			}
			return element;
		},

		checkable: function( element ) {
			return (/radio|checkbox/i).test(element.type);
		},

		findByName: function( name ) {
			return $(this.currentForm).find("[name='" + name + "']");
		},

		getLength: function( value, element ) {
			switch( element.nodeName.toLowerCase() ) {
			case "select":
				return $("option:selected", element).length;
			case "input":
				if ( this.checkable( element) ) {
					return this.findByName(element.name).filter(":checked").length;
				}
			}
			return value.length;
		},

		depend: function( param, element ) {
			return this.dependTypes[typeof param] ? this.dependTypes[typeof param](param, element) : true;
		},

		dependTypes: {
			"boolean": function( param, element ) {
				return param;
			},
			"string": function( param, element ) {
				return !!$(param, element.form).length;
			},
			"function": function( param, element ) {
				return param(element);
			}
		},

		optional: function( element ) {
			var val = this.elementValue(element);
			return !$.validator.methods.required.call(this, val, element) && "dependency-mismatch";
		},

		startRequest: function( element ) {
			if ( !this.pending[element.name] ) {
				this.pendingRequest++;
				this.pending[element.name] = true;
			}
		},

		stopRequest: function( element, valid ) {
			this.pendingRequest--;
			// sometimes synchronization fails, make sure pendingRequest is never < 0
			if ( this.pendingRequest < 0 ) {
				this.pendingRequest = 0;
			}
			delete this.pending[element.name];
			if ( valid && this.pendingRequest === 0 && this.formSubmitted && this.form() ) {
				$(this.currentForm).submit();
				this.formSubmitted = false;
			} else if (!valid && this.pendingRequest === 0 && this.formSubmitted) {
				$(this.currentForm).triggerHandler("invalid-form", [this]);
				this.formSubmitted = false;
			}
		},

		previousValue: function( element ) {
			return $.data(element, "previousValue") || $.data(element, "previousValue", {
				old: null,
				valid: true,
				message: this.defaultMessage( element, "remote" )
			});
		}

	},

	classRuleSettings: {
		required: {required: true},
		email: {email: true},
		url: {url: true},
		date: {date: true},
		dateISO: {dateISO: true},
		number: {number: true},
		digits: {digits: true},
		creditcard: {creditcard: true}
	},

	addClassRules: function( className, rules ) {
		if ( className.constructor === String ) {
			this.classRuleSettings[className] = rules;
		} else {
			$.extend(this.classRuleSettings, className);
		}
	},

	classRules: function( element ) {
		var rules = {};
		var classes = $(element).attr("class");
		if ( classes ) {
			$.each(classes.split(" "), function() {
				if ( this in $.validator.classRuleSettings ) {
					$.extend(rules, $.validator.classRuleSettings[this]);
				}
			});
		}
		return rules;
	},

	attributeRules: function( element ) {
		var rules = {};
		var $element = $(element);
		var type = $element[0].getAttribute("type");

		for (var method in $.validator.methods) {
			var value;

			// support for <input required> in both html5 and older browsers
			if ( method === "required" ) {
				value = $element.get(0).getAttribute(method);
				// Some browsers return an empty string for the required attribute
				// and non-HTML5 browsers might have required="" markup
				if ( value === "" ) {
					value = true;
				}
				// force non-HTML5 browsers to return bool
				value = !!value;
			} else {
				value = $element.attr(method);
			}

			// convert the value to a number for number inputs, and for text for backwards compability
			// allows type="date" and others to be compared as strings
			if ( /min|max/.test( method ) && ( type === null || /number|range|text/.test( type ) ) ) {
				value = Number(value);
			}

			if ( value ) {
				rules[method] = value;
			} else if ( type === method && type !== 'range' ) {
				// exception: the jquery validate 'range' method
				// does not test for the html5 'range' type
				rules[method] = true;
			}
		}

		// maxlength may be returned as -1, 2147483647 (IE) and 524288 (safari) for text inputs
		if ( rules.maxlength && /-1|2147483647|524288/.test(rules.maxlength) ) {
			delete rules.maxlength;
		}

		return rules;
	},

	dataRules: function( element ) {
		var method, value,
			rules = {}, $element = $(element);
		for (method in $.validator.methods) {
			value = $element.data("rule-" + method.toLowerCase());
			if ( value !== undefined ) {
				rules[method] = value;
			}
		}
		return rules;
	},

	staticRules: function( element ) {
		var rules = {};
		var validator = $.data(element.form, "validator");
		if ( validator.settings.rules ) {
			rules = $.validator.normalizeRule(validator.settings.rules[element.name]) || {};
		}
		return rules;
	},

	normalizeRules: function( rules, element ) {
		// handle dependency check
		$.each(rules, function( prop, val ) {
			// ignore rule when param is explicitly false, eg. required:false
			if ( val === false ) {
				delete rules[prop];
				return;
			}
			if ( val.param || val.depends ) {
				var keepRule = true;
				switch (typeof val.depends) {
				case "string":
					keepRule = !!$(val.depends, element.form).length;
					break;
				case "function":
					keepRule = val.depends.call(element, element);
					break;
				}
				if ( keepRule ) {
					rules[prop] = val.param !== undefined ? val.param : true;
				} else {
					delete rules[prop];
				}
			}
		});

		// evaluate parameters
		$.each(rules, function( rule, parameter ) {
			rules[rule] = $.isFunction(parameter) ? parameter(element) : parameter;
		});

		// clean number parameters
		$.each(['minlength', 'maxlength'], function() {
			if ( rules[this] ) {
				rules[this] = Number(rules[this]);
			}
		});
		$.each(['rangelength', 'range'], function() {
			var parts;
			if ( rules[this] ) {
				if ( $.isArray(rules[this]) ) {
					rules[this] = [Number(rules[this][0]), Number(rules[this][1])];
				} else if ( typeof rules[this] === "string" ) {
					parts = rules[this].split(/[\s,]+/);
					rules[this] = [Number(parts[0]), Number(parts[1])];
				}
			}
		});

		if ( $.validator.autoCreateRanges ) {
			// auto-create ranges
			if ( rules.min && rules.max ) {
				rules.range = [rules.min, rules.max];
				delete rules.min;
				delete rules.max;
			}
			if ( rules.minlength && rules.maxlength ) {
				rules.rangelength = [rules.minlength, rules.maxlength];
				delete rules.minlength;
				delete rules.maxlength;
			}
		}

		return rules;
	},

	// Converts a simple string to a {string: true} rule, e.g., "required" to {required:true}
	normalizeRule: function( data ) {
		if ( typeof data === "string" ) {
			var transformed = {};
			$.each(data.split(/\s/), function() {
				transformed[this] = true;
			});
			data = transformed;
		}
		return data;
	},

	// http://docs.jquery.com/Plugins/Validation/Validator/addMethod
	addMethod: function( name, method, message ) {
		$.validator.methods[name] = method;
		$.validator.messages[name] = message !== undefined ? message : $.validator.messages[name];
		if ( method.length < 3 ) {
			$.validator.addClassRules(name, $.validator.normalizeRule(name));
		}
	},

	methods: {

		// http://docs.jquery.com/Plugins/Validation/Methods/required
		required: function( value, element, param ) {
			// check if dependency is met
			if ( !this.depend(param, element) ) {
				return "dependency-mismatch";
			}
			if ( element.nodeName.toLowerCase() === "select" ) {
				// could be an array for select-multiple or a string, both are fine this way
				var val = $(element).val();
				return val && val.length > 0;
			}
			if ( this.checkable(element) ) {
				return this.getLength(value, element) > 0;
			}
			return $.trim(value).length > 0;
		},

		// http://docs.jquery.com/Plugins/Validation/Methods/email
		email: function( value, element ) {
			// contributed by Scott Gonzalez: http://projects.scottsplayground.com/email_address_validation/
			return this.optional(element) || /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(value);
		},

		// http://docs.jquery.com/Plugins/Validation/Methods/url
		url: function( value, element ) {
			// contributed by Scott Gonzalez: http://projects.scottsplayground.com/iri/
			return this.optional(element) || /^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value);
		},

		// http://docs.jquery.com/Plugins/Validation/Methods/date
		date: function( value, element ) {
			return this.optional(element) || !/Invalid|NaN/.test(new Date(value).toString());
		},

		// http://docs.jquery.com/Plugins/Validation/Methods/dateISO
		dateISO: function( value, element ) {
			return this.optional(element) || /^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(value);
		},

		// http://docs.jquery.com/Plugins/Validation/Methods/number
		number: function( value, element ) {
			return this.optional(element) || /^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(value);
		},

		// http://docs.jquery.com/Plugins/Validation/Methods/digits
		digits: function( value, element ) {
			return this.optional(element) || /^\d+$/.test(value);
		},

		// http://docs.jquery.com/Plugins/Validation/Methods/creditcard
		// based on http://en.wikipedia.org/wiki/Luhn
		creditcard: function( value, element ) {
			if ( this.optional(element) ) {
				return "dependency-mismatch";
			}
			// accept only spaces, digits and dashes
			if ( /[^0-9 \-]+/.test(value) ) {
				return false;
			}
			var nCheck = 0,
				nDigit = 0,
				bEven = false;

			value = value.replace(/\D/g, "");

			for (var n = value.length - 1; n >= 0; n--) {
				var cDigit = value.charAt(n);
				nDigit = parseInt(cDigit, 10);
				if ( bEven ) {
					if ( (nDigit *= 2) > 9 ) {
						nDigit -= 9;
					}
				}
				nCheck += nDigit;
				bEven = !bEven;
			}

			return (nCheck % 10) === 0;
		},

		// http://docs.jquery.com/Plugins/Validation/Methods/minlength
		minlength: function( value, element, param ) {
			var length = $.isArray( value ) ? value.length : this.getLength($.trim(value), element);
			return this.optional(element) || length >= param;
		},

		// http://docs.jquery.com/Plugins/Validation/Methods/maxlength
		maxlength: function( value, element, param ) {
			var length = $.isArray( value ) ? value.length : this.getLength($.trim(value), element);
			return this.optional(element) || length <= param;
		},

		// http://docs.jquery.com/Plugins/Validation/Methods/rangelength
		rangelength: function( value, element, param ) {
			var length = $.isArray( value ) ? value.length : this.getLength($.trim(value), element);
			return this.optional(element) || ( length >= param[0] && length <= param[1] );
		},

		// http://docs.jquery.com/Plugins/Validation/Methods/min
		min: function( value, element, param ) {
			return this.optional(element) || value >= param;
		},

		// http://docs.jquery.com/Plugins/Validation/Methods/max
		max: function( value, element, param ) {
			return this.optional(element) || value <= param;
		},

		// http://docs.jquery.com/Plugins/Validation/Methods/range
		range: function( value, element, param ) {
			return this.optional(element) || ( value >= param[0] && value <= param[1] );
		},

		// http://docs.jquery.com/Plugins/Validation/Methods/equalTo
		equalTo: function( value, element, param ) {
			// bind to the blur event of the target in order to revalidate whenever the target field is updated
			// TODO find a way to bind the event just once, avoiding the unbind-rebind overhead
			var target = $(param);
			if ( this.settings.onfocusout ) {
				target.unbind(".validate-equalTo").bind("blur.validate-equalTo", function() {
					$(element).valid();
				});
			}
			return value === target.val();
		},

		// http://docs.jquery.com/Plugins/Validation/Methods/remote
		remote: function( value, element, param ) {
			if ( this.optional(element) ) {
				return "dependency-mismatch";
			}

			var previous = this.previousValue(element);
			if (!this.settings.messages[element.name] ) {
				this.settings.messages[element.name] = {};
			}
			previous.originalMessage = this.settings.messages[element.name].remote;
			this.settings.messages[element.name].remote = previous.message;

			param = typeof param === "string" && {url:param} || param;

			if ( previous.old === value ) {
				return previous.valid;
			}

			previous.old = value;
			var validator = this;
			this.startRequest(element);
			var data = {};
			data[element.name] = value;
			$.ajax($.extend(true, {
				url: param,
				mode: "abort",
				port: "validate" + element.name,
				dataType: "json",
				data: data,
				success: function( response ) {
					validator.settings.messages[element.name].remote = previous.originalMessage;
					var valid = response === true || response === "true";
					if ( valid ) {
						var submitted = validator.formSubmitted;
						validator.prepareElement(element);
						validator.formSubmitted = submitted;
						validator.successList.push(element);
						delete validator.invalid[element.name];
						validator.showErrors();
					} else {
						var errors = {};
						var message = response || validator.defaultMessage( element, "remote" );
						errors[element.name] = previous.message = $.isFunction(message) ? message(value) : message;
						validator.invalid[element.name] = true;
						validator.showErrors(errors);
					}
					previous.valid = valid;
					validator.stopRequest(element, valid);
				}
			}, param));
			return "pending";
		}

	}

});

// deprecated, use $.validator.format instead
$.format = $.validator.format;

}(jQuery));

// ajax mode: abort
// usage: $.ajax({ mode: "abort"[, port: "uniqueport"]});
// if mode:"abort" is used, the previous request on that port (port can be undefined) is aborted via XMLHttpRequest.abort()
(function($) {
	var pendingRequests = {};
	// Use a prefilter if available (1.5+)
	if ( $.ajaxPrefilter ) {
		$.ajaxPrefilter(function( settings, _, xhr ) {
			var port = settings.port;
			if ( settings.mode === "abort" ) {
				if ( pendingRequests[port] ) {
					pendingRequests[port].abort();
				}
				pendingRequests[port] = xhr;
			}
		});
	} else {
		// Proxy ajax
		var ajax = $.ajax;
		$.ajax = function( settings ) {
			var mode = ( "mode" in settings ? settings : $.ajaxSettings ).mode,
				port = ( "port" in settings ? settings : $.ajaxSettings ).port;
			if ( mode === "abort" ) {
				if ( pendingRequests[port] ) {
					pendingRequests[port].abort();
				}
				pendingRequests[port] = ajax.apply(this, arguments);
				return pendingRequests[port];
			}
			return ajax.apply(this, arguments);
		};
	}
}(jQuery));

// provides delegate(type: String, delegate: Selector, handler: Callback) plugin for easier event delegation
// handler is only called when $(event.target).is(delegate), in the scope of the jquery-object for event.target
(function($) {
	$.extend($.fn, {
		validateDelegate: function( delegate, type, handler ) {
			return this.bind(type, function( event ) {
				var target = $(event.target);
				if ( target.is(delegate) ) {
					return handler.apply(target, arguments);
				}
			});
		}
	});
}(jQuery));
/* jQuery UI Touch Punch 0.2.3
 *
 * Copyright 2011–2014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */

!function(a){function f(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if(a.support.touch="ontouchend"in document,a.support.touch){var e,b=a.ui.mouse.prototype,c=b._mouseInit,d=b._mouseDestroy;b._touchStart=function(a){var b=this;!e&&b._mouseCapture(a.originalEvent.changedTouches[0])&&(e=!0,b._touchMoved=!1,f(a,"mouseover"),f(a,"mousemove"),f(a,"mousedown"))},b._touchMove=function(a){e&&(this._touchMoved=!0,f(a,"mousemove"))},b._touchEnd=function(a){e&&(f(a,"mouseup"),f(a,"mouseout"),this._touchMoved||f(a,"click"),e=!1)},b._mouseInit=function(){var b=this;b.element.bind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),c.call(b)},b._mouseDestroy=function(){var b=this;b.element.unbind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),d.call(b)}}}(jQuery);
/*! jCarousel - v0.3.1 - 2014-04-26
* http://sorgalla.com/jcarousel
* Copyright (c) 2014 Jan Sorgalla; Licensed MIT */

(function($) {
    'use strict';

    var jCarousel = $.jCarousel = {};

    jCarousel.version = '0.3.1';

    var rRelativeTarget = /^([+\-]=)?(.+)$/;

    jCarousel.parseTarget = function(target) {
        var relative = false,
            parts    = typeof target !== 'object' ?
                           rRelativeTarget.exec(target) :
                           null;

        if (parts) {
            target = parseInt(parts[2], 10) || 0;

            if (parts[1]) {
                relative = true;
                if (parts[1] === '-=') {
                    target *= -1;
                }
            }
        } else if (typeof target !== 'object') {
            target = parseInt(target, 10) || 0;
        }

        return {
            target: target,
            relative: relative
        };
    };

    jCarousel.detectCarousel = function(element) {
        var carousel;

        while (element.length > 0) {
            carousel = element.filter('[data-jcarousel]');

            if (carousel.length > 0) {
                return carousel;
            }

            carousel = element.find('[data-jcarousel]');

            if (carousel.length > 0) {
                return carousel;
            }

            element = element.parent();
        }

        return null;
    };

    jCarousel.base = function(pluginName) {
        return {
            version:  jCarousel.version,
            _options:  {},
            _element:  null,
            _carousel: null,
            _init:     $.noop,
            _create:   $.noop,
            _destroy:  $.noop,
            _reload:   $.noop,
            create: function() {
                this._element
                    .attr('data-' + pluginName.toLowerCase(), true)
                    .data(pluginName, this);

                if (false === this._trigger('create')) {
                    return this;
                }

                this._create();

                this._trigger('createend');

                return this;
            },
            destroy: function() {
                if (false === this._trigger('destroy')) {
                    return this;
                }

                this._destroy();

                this._trigger('destroyend');

                this._element
                    .removeData(pluginName)
                    .removeAttr('data-' + pluginName.toLowerCase());

                return this;
            },
            reload: function(options) {
                if (false === this._trigger('reload')) {
                    return this;
                }

                if (options) {
                    this.options(options);
                }

                this._reload();

                this._trigger('reloadend');

                return this;
            },
            element: function() {
                return this._element;
            },
            options: function(key, value) {
                if (arguments.length === 0) {
                    return $.extend({}, this._options);
                }

                if (typeof key === 'string') {
                    if (typeof value === 'undefined') {
                        return typeof this._options[key] === 'undefined' ?
                                null :
                                this._options[key];
                    }

                    this._options[key] = value;
                } else {
                    this._options = $.extend({}, this._options, key);
                }

                return this;
            },
            carousel: function() {
                if (!this._carousel) {
                    this._carousel = jCarousel.detectCarousel(this.options('carousel') || this._element);

                    if (!this._carousel) {
                        $.error('Could not detect carousel for plugin "' + pluginName + '"');
                    }
                }

                return this._carousel;
            },
            _trigger: function(type, element, data) {
                var event,
                    defaultPrevented = false;

                data = [this].concat(data || []);

                (element || this._element).each(function() {
                    event = $.Event((pluginName + ':' + type).toLowerCase());

                    $(this).trigger(event, data);

                    if (event.isDefaultPrevented()) {
                        defaultPrevented = true;
                    }
                });

                return !defaultPrevented;
            }
        };
    };

    jCarousel.plugin = function(pluginName, pluginPrototype) {
        var Plugin = $[pluginName] = function(element, options) {
            this._element = $(element);
            this.options(options);

            this._init();
            this.create();
        };

        Plugin.fn = Plugin.prototype = $.extend(
            {},
            jCarousel.base(pluginName),
            pluginPrototype
        );

        $.fn[pluginName] = function(options) {
            var args        = Array.prototype.slice.call(arguments, 1),
                returnValue = this;

            if (typeof options === 'string') {
                this.each(function() {
                    var instance = $(this).data(pluginName);

                    if (!instance) {
                        return $.error(
                            'Cannot call methods on ' + pluginName + ' prior to initialization; ' +
                            'attempted to call method "' + options + '"'
                        );
                    }

                    if (!$.isFunction(instance[options]) || options.charAt(0) === '_') {
                        return $.error(
                            'No such method "' + options + '" for ' + pluginName + ' instance'
                        );
                    }

                    var methodValue = instance[options].apply(instance, args);

                    if (methodValue !== instance && typeof methodValue !== 'undefined') {
                        returnValue = methodValue;
                        return false;
                    }
                });
            } else {
                this.each(function() {
                    var instance = $(this).data(pluginName);

                    if (instance instanceof Plugin) {
                        instance.reload(options);
                    } else {
                        new Plugin(this, options);
                    }
                });
            }

            return returnValue;
        };

        return Plugin;
    };
}(jQuery));

(function($, window) {
    'use strict';

    var toFloat = function(val) {
        return parseFloat(val) || 0;
    };

    $.jCarousel.plugin('jcarousel', {
        animating:   false,
        tail:        0,
        inTail:      false,
        resizeTimer: null,
        lt:          null,
        vertical:    false,
        rtl:         false,
        circular:    false,
        underflow:   false,
        relative:    false,

        _options: {
            list: function() {
                return this.element().children().eq(0);
            },
            items: function() {
                return this.list().children();
            },
            animation:   400,
            transitions: false,
            wrap:        null,
            vertical:    null,
            rtl:         null,
            center:      false
        },

        // Protected, don't access directly
        _list:         null,
        _items:        null,
        _target:       null,
        _first:        null,
        _last:         null,
        _visible:      null,
        _fullyvisible: null,
        _init: function() {
            var self = this;

            this.onWindowResize = function() {
                if (self.resizeTimer) {
                    clearTimeout(self.resizeTimer);
                }

                self.resizeTimer = setTimeout(function() {
                    self.reload();
                }, 100);
            };

            return this;
        },
        _create: function() {
            this._reload();

            $(window).on('resize.jcarousel', this.onWindowResize);
        },
        _destroy: function() {
            $(window).off('resize.jcarousel', this.onWindowResize);
        },
        _reload: function() {
            this.vertical = this.options('vertical');

            if (this.vertical == null) {
                this.vertical = this.list().height() > this.list().width();
            }

            this.rtl = this.options('rtl');

            if (this.rtl == null) {
                this.rtl = (function(element) {
                    if (('' + element.attr('dir')).toLowerCase() === 'rtl') {
                        return true;
                    }

                    var found = false;

                    element.parents('[dir]').each(function() {
                        if ((/rtl/i).test($(this).attr('dir'))) {
                            found = true;
                            return false;
                        }
                    });

                    return found;
                }(this._element));
            }

            this.lt = this.vertical ? 'top' : 'left';

            // Ensure before closest() call
            this.relative = this.list().css('position') === 'relative';

            // Force list and items reload
            this._list  = null;
            this._items = null;

            var item = this._target && this.index(this._target) >= 0 ?
                           this._target :
                           this.closest();

            // _prepare() needs this here
            this.circular  = this.options('wrap') === 'circular';
            this.underflow = false;

            var props = {'left': 0, 'top': 0};

            if (item.length > 0) {
                this._prepare(item);
                this.list().find('[data-jcarousel-clone]').remove();

                // Force items reload
                this._items = null;

                this.underflow = this._fullyvisible.length >= this.items().length;
                this.circular  = this.circular && !this.underflow;

                props[this.lt] = this._position(item) + 'px';
            }

            this.move(props);

            return this;
        },
        list: function() {
            if (this._list === null) {
                var option = this.options('list');
                this._list = $.isFunction(option) ? option.call(this) : this._element.find(option);
            }

            return this._list;
        },
        items: function() {
            if (this._items === null) {
                var option = this.options('items');
                this._items = ($.isFunction(option) ? option.call(this) : this.list().find(option)).not('[data-jcarousel-clone]');
            }

            return this._items;
        },
        index: function(item) {
            return this.items().index(item);
        },
        closest: function() {
            var self    = this,
                pos     = this.list().position()[this.lt],
                closest = $(), // Ensure we're returning a jQuery instance
                stop    = false,
                lrb     = this.vertical ? 'bottom' : (this.rtl && !this.relative ? 'left' : 'right'),
                width;

            if (this.rtl && this.relative && !this.vertical) {
                pos += this.list().width() - this.clipping();
            }

            this.items().each(function() {
                closest = $(this);

                if (stop) {
                    return false;
                }

                var dim = self.dimension(closest);

                pos += dim;

                if (pos >= 0) {
                    width = dim - toFloat(closest.css('margin-' + lrb));

                    if ((Math.abs(pos) - dim + (width / 2)) <= 0) {
                        stop = true;
                    } else {
                        return false;
                    }
                }
            });


            return closest;
        },
        target: function() {
            return this._target;
        },
        first: function() {
            return this._first;
        },
        last: function() {
            return this._last;
        },
        visible: function() {
            return this._visible;
        },
        fullyvisible: function() {
            return this._fullyvisible;
        },
        hasNext: function() {
            if (false === this._trigger('hasnext')) {
                return true;
            }

            var wrap = this.options('wrap'),
                end = this.items().length - 1;

            return end >= 0 && !this.underflow &&
                ((wrap && wrap !== 'first') ||
                    (this.index(this._last) < end) ||
                    (this.tail && !this.inTail)) ? true : false;
        },
        hasPrev: function() {
            if (false === this._trigger('hasprev')) {
                return true;
            }

            var wrap = this.options('wrap');

            return this.items().length > 0 && !this.underflow &&
                ((wrap && wrap !== 'last') ||
                    (this.index(this._first) > 0) ||
                    (this.tail && this.inTail)) ? true : false;
        },
        clipping: function() {
            return this._element['inner' + (this.vertical ? 'Height' : 'Width')]();
        },
        dimension: function(element) {
            return element['outer' + (this.vertical ? 'Height' : 'Width')](true);
        },
        scroll: function(target, animate, callback) {
            if (this.animating) {
                return this;
            }

            if (false === this._trigger('scroll', null, [target, animate])) {
                return this;
            }

            if ($.isFunction(animate)) {
                callback = animate;
                animate  = true;
            }

            var parsed = $.jCarousel.parseTarget(target);

            if (parsed.relative) {
                var end    = this.items().length - 1,
                    scroll = Math.abs(parsed.target),
                    wrap   = this.options('wrap'),
                    current,
                    first,
                    index,
                    start,
                    curr,
                    isVisible,
                    props,
                    i;

                if (parsed.target > 0) {
                    var last = this.index(this._last);

                    if (last >= end && this.tail) {
                        if (!this.inTail) {
                            this._scrollTail(animate, callback);
                        } else {
                            if (wrap === 'both' || wrap === 'last') {
                                this._scroll(0, animate, callback);
                            } else {
                                if ($.isFunction(callback)) {
                                    callback.call(this, false);
                                }
                            }
                        }
                    } else {
                        current = this.index(this._target);

                        if ((this.underflow && current === end && (wrap === 'circular' || wrap === 'both' || wrap === 'last')) ||
                            (!this.underflow && last === end && (wrap === 'both' || wrap === 'last'))) {
                            this._scroll(0, animate, callback);
                        } else {
                            index = current + scroll;

                            if (this.circular && index > end) {
                                i = end;
                                curr = this.items().get(-1);

                                while (i++ < index) {
                                    curr = this.items().eq(0);
                                    isVisible = this._visible.index(curr) >= 0;

                                    if (isVisible) {
                                        curr.after(curr.clone(true).attr('data-jcarousel-clone', true));
                                    }

                                    this.list().append(curr);

                                    if (!isVisible) {
                                        props = {};
                                        props[this.lt] = this.dimension(curr);
                                        this.moveBy(props);
                                    }

                                    // Force items reload
                                    this._items = null;
                                }

                                this._scroll(curr, animate, callback);
                            } else {
                                this._scroll(Math.min(index, end), animate, callback);
                            }
                        }
                    }
                } else {
                    if (this.inTail) {
                        this._scroll(Math.max((this.index(this._first) - scroll) + 1, 0), animate, callback);
                    } else {
                        first  = this.index(this._first);
                        current = this.index(this._target);
                        start  = this.underflow ? current : first;
                        index  = start - scroll;

                        if (start <= 0 && ((this.underflow && wrap === 'circular') || wrap === 'both' || wrap === 'first')) {
                            this._scroll(end, animate, callback);
                        } else {
                            if (this.circular && index < 0) {
                                i    = index;
                                curr = this.items().get(0);

                                while (i++ < 0) {
                                    curr = this.items().eq(-1);
                                    isVisible = this._visible.index(curr) >= 0;

                                    if (isVisible) {
                                        curr.after(curr.clone(true).attr('data-jcarousel-clone', true));
                                    }

                                    this.list().prepend(curr);

                                    // Force items reload
                                    this._items = null;

                                    var dim = this.dimension(curr);

                                    props = {};
                                    props[this.lt] = -dim;
                                    this.moveBy(props);

                                }

                                this._scroll(curr, animate, callback);
                            } else {
                                this._scroll(Math.max(index, 0), animate, callback);
                            }
                        }
                    }
                }
            } else {
                this._scroll(parsed.target, animate, callback);
            }

            this._trigger('scrollend');

            return this;
        },
        moveBy: function(properties, opts) {
            var position = this.list().position(),
                multiplier = 1,
                correction = 0;

            if (this.rtl && !this.vertical) {
                multiplier = -1;

                if (this.relative) {
                    correction = this.list().width() - this.clipping();
                }
            }

            if (properties.left) {
                properties.left = (position.left + correction + toFloat(properties.left) * multiplier) + 'px';
            }

            if (properties.top) {
                properties.top = (position.top + correction + toFloat(properties.top) * multiplier) + 'px';
            }

            return this.move(properties, opts);
        },
        move: function(properties, opts) {
            opts = opts || {};

            var option       = this.options('transitions'),
                transitions  = !!option,
                transforms   = !!option.transforms,
                transforms3d = !!option.transforms3d,
                duration     = opts.duration || 0,
                list         = this.list();

            if (!transitions && duration > 0) {
                list.animate(properties, opts);
                return;
            }

            var complete = opts.complete || $.noop,
                css = {};

            if (transitions) {
                var backup = list.css(['transitionDuration', 'transitionTimingFunction', 'transitionProperty']),
                    oldComplete = complete;

                complete = function() {
                    $(this).css(backup);
                    oldComplete.call(this);
                };
                css = {
                    transitionDuration: (duration > 0 ? duration / 1000 : 0) + 's',
                    transitionTimingFunction: option.easing || opts.easing,
                    transitionProperty: duration > 0 ? (function() {
                        if (transforms || transforms3d) {
                            // We have to use 'all' because jQuery doesn't prefix
                            // css values, like transition-property: transform;
                            return 'all';
                        }

                        return properties.left ? 'left' : 'top';
                    })() : 'none',
                    transform: 'none'
                };
            }

            if (transforms3d) {
                css.transform = 'translate3d(' + (properties.left || 0) + ',' + (properties.top || 0) + ',0)';
            } else if (transforms) {
                css.transform = 'translate(' + (properties.left || 0) + ',' + (properties.top || 0) + ')';
            } else {
                $.extend(css, properties);
            }

            if (transitions && duration > 0) {
                list.one('transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd', complete);
            }

            list.css(css);

            if (duration <= 0) {
                list.each(function() {
                    complete.call(this);
                });
            }
        },
        _scroll: function(item, animate, callback) {
            if (this.animating) {
                if ($.isFunction(callback)) {
                    callback.call(this, false);
                }

                return this;
            }

            if (typeof item !== 'object') {
                item = this.items().eq(item);
            } else if (typeof item.jquery === 'undefined') {
                item = $(item);
            }

            if (item.length === 0) {
                if ($.isFunction(callback)) {
                    callback.call(this, false);
                }

                return this;
            }

            this.inTail = false;

            this._prepare(item);

            var pos     = this._position(item),
                currPos = this.list().position()[this.lt];

            if (pos === currPos) {
                if ($.isFunction(callback)) {
                    callback.call(this, false);
                }

                return this;
            }

            var properties = {};
            properties[this.lt] = pos + 'px';

            this._animate(properties, animate, callback);

            return this;
        },
        _scrollTail: function(animate, callback) {
            if (this.animating || !this.tail) {
                if ($.isFunction(callback)) {
                    callback.call(this, false);
                }

                return this;
            }

            var pos = this.list().position()[this.lt];

            if (this.rtl && this.relative && !this.vertical) {
                pos += this.list().width() - this.clipping();
            }

            if (this.rtl && !this.vertical) {
                pos += this.tail;
            } else {
                pos -= this.tail;
            }

            this.inTail = true;

            var properties = {};
            properties[this.lt] = pos + 'px';

            this._update({
                target:       this._target.next(),
                fullyvisible: this._fullyvisible.slice(1).add(this._visible.last())
            });

            this._animate(properties, animate, callback);

            return this;
        },
        _animate: function(properties, animate, callback) {
            callback = callback || $.noop;

            if (false === this._trigger('animate')) {
                callback.call(this, false);
                return this;
            }

            this.animating = true;

            var animation = this.options('animation'),
                complete  = $.proxy(function() {
                    this.animating = false;

                    var c = this.list().find('[data-jcarousel-clone]');

                    if (c.length > 0) {
                        c.remove();
                        this._reload();
                    }

                    this._trigger('animateend');

                    callback.call(this, true);
                }, this);

            var opts = typeof animation === 'object' ?
                           $.extend({}, animation) :
                           {duration: animation},
                oldComplete = opts.complete || $.noop;

            if (animate === false) {
                opts.duration = 0;
            } else if (typeof $.fx.speeds[opts.duration] !== 'undefined') {
                opts.duration = $.fx.speeds[opts.duration];
            }

            opts.complete = function() {
                complete();
                oldComplete.call(this);
            };

            this.move(properties, opts);

            return this;
        },
        _prepare: function(item) {
            var index  = this.index(item),
                idx    = index,
                wh     = this.dimension(item),
                clip   = this.clipping(),
                lrb    = this.vertical ? 'bottom' : (this.rtl ? 'left'  : 'right'),
                center = this.options('center'),
                update = {
                    target:       item,
                    first:        item,
                    last:         item,
                    visible:      item,
                    fullyvisible: wh <= clip ? item : $()
                },
                curr,
                isVisible,
                margin,
                dim;

            if (center) {
                wh /= 2;
                clip /= 2;
            }

            if (wh < clip) {
                while (true) {
                    curr = this.items().eq(++idx);

                    if (curr.length === 0) {
                        if (!this.circular) {
                            break;
                        }

                        curr = this.items().eq(0);

                        if (item.get(0) === curr.get(0)) {
                            break;
                        }

                        isVisible = this._visible.index(curr) >= 0;

                        if (isVisible) {
                            curr.after(curr.clone(true).attr('data-jcarousel-clone', true));
                        }

                        this.list().append(curr);

                        if (!isVisible) {
                            var props = {};
                            props[this.lt] = this.dimension(curr);
                            this.moveBy(props);
                        }

                        // Force items reload
                        this._items = null;
                    }

                    dim = this.dimension(curr);

                    if (dim === 0) {
                        break;
                    }

                    wh += dim;

                    update.last    = curr;
                    update.visible = update.visible.add(curr);

                    // Remove right/bottom margin from total width
                    margin = toFloat(curr.css('margin-' + lrb));

                    if ((wh - margin) <= clip) {
                        update.fullyvisible = update.fullyvisible.add(curr);
                    }

                    if (wh >= clip) {
                        break;
                    }
                }
            }

            if (!this.circular && !center && wh < clip) {
                idx = index;

                while (true) {
                    if (--idx < 0) {
                        break;
                    }

                    curr = this.items().eq(idx);

                    if (curr.length === 0) {
                        break;
                    }

                    dim = this.dimension(curr);

                    if (dim === 0) {
                        break;
                    }

                    wh += dim;

                    update.first   = curr;
                    update.visible = update.visible.add(curr);

                    // Remove right/bottom margin from total width
                    margin = toFloat(curr.css('margin-' + lrb));

                    if ((wh - margin) <= clip) {
                        update.fullyvisible = update.fullyvisible.add(curr);
                    }

                    if (wh >= clip) {
                        break;
                    }
                }
            }

            this._update(update);

            this.tail = 0;

            if (!center &&
                this.options('wrap') !== 'circular' &&
                this.options('wrap') !== 'custom' &&
                this.index(update.last) === (this.items().length - 1)) {

                // Remove right/bottom margin from total width
                wh -= toFloat(update.last.css('margin-' + lrb));

                if (wh > clip) {
                    this.tail = wh - clip;
                }
            }

            return this;
        },
        _position: function(item) {
            var first  = this._first,
                pos    = first.position()[this.lt],
                center = this.options('center'),
                centerOffset = center ? (this.clipping() / 2) - (this.dimension(first) / 2) : 0;

            if (this.rtl && !this.vertical) {
                if (this.relative) {
                    pos -= this.list().width() - this.dimension(first);
                } else {
                    pos -= this.clipping() - this.dimension(first);
                }

                pos += centerOffset;
            } else {
                pos -= centerOffset;
            }

            if (!center &&
                (this.index(item) > this.index(first) || this.inTail) &&
                this.tail) {
                pos = this.rtl && !this.vertical ? pos - this.tail : pos + this.tail;
                this.inTail = true;
            } else {
                this.inTail = false;
            }

            return -pos;
        },
        _update: function(update) {
            var self = this,
                current = {
                    target:       this._target || $(),
                    first:        this._first || $(),
                    last:         this._last || $(),
                    visible:      this._visible || $(),
                    fullyvisible: this._fullyvisible || $()
                },
                back = this.index(update.first || current.first) < this.index(current.first),
                key,
                doUpdate = function(key) {
                    var elIn  = [],
                        elOut = [];

                    update[key].each(function() {
                        if (current[key].index(this) < 0) {
                            elIn.push(this);
                        }
                    });

                    current[key].each(function() {
                        if (update[key].index(this) < 0) {
                            elOut.push(this);
                        }
                    });

                    if (back) {
                        elIn = elIn.reverse();
                    } else {
                        elOut = elOut.reverse();
                    }

                    self._trigger(key + 'in', $(elIn));
                    self._trigger(key + 'out', $(elOut));

                    self['_' + key] = update[key];
                };

            for (key in update) {
                doUpdate(key);
            }

            return this;
        }
    });
}(jQuery, window));

(function($) {
    'use strict';

    $.jcarousel.fn.scrollIntoView = function(target, animate, callback) {
        var parsed = $.jCarousel.parseTarget(target),
            first  = this.index(this._fullyvisible.first()),
            last   = this.index(this._fullyvisible.last()),
            index;

        if (parsed.relative) {
            index = parsed.target < 0 ? Math.max(0, first + parsed.target) : last + parsed.target;
        } else {
            index = typeof parsed.target !== 'object' ? parsed.target : this.index(parsed.target);
        }

        if (index < first) {
            return this.scroll(index, animate, callback);
        }

        if (index >= first && index <= last) {
            if ($.isFunction(callback)) {
                callback.call(this, false);
            }

            return this;
        }

        var items = this.items(),
            clip = this.clipping(),
            lrb  = this.vertical ? 'bottom' : (this.rtl ? 'left'  : 'right'),
            wh   = 0,
            curr;

        while (true) {
            curr = items.eq(index);

            if (curr.length === 0) {
                break;
            }

            wh += this.dimension(curr);

            if (wh >= clip) {
                var margin = parseFloat(curr.css('margin-' + lrb)) || 0;
                if ((wh - margin) !== clip) {
                    index++;
                }
                break;
            }

            if (index <= 0) {
                break;
            }

            index--;
        }

        return this.scroll(index, animate, callback);
    };
}(jQuery));

(function($) {
    'use strict';

    $.jCarousel.plugin('jcarouselControl', {
        _options: {
            target: '+=1',
            event:  'click',
            method: 'scroll'
        },
        _active: null,
        _init: function() {
            this.onDestroy = $.proxy(function() {
                this._destroy();
                this.carousel()
                    .one('jcarousel:createend', $.proxy(this._create, this));
            }, this);
            this.onReload = $.proxy(this._reload, this);
            this.onEvent = $.proxy(function(e) {
                e.preventDefault();

                var method = this.options('method');

                if ($.isFunction(method)) {
                    method.call(this);
                } else {
                    this.carousel()
                        .jcarousel(this.options('method'), this.options('target'));
                }
            }, this);
        },
        _create: function() {
            this.carousel()
                .one('jcarousel:destroy', this.onDestroy)
                .on('jcarousel:reloadend jcarousel:scrollend', this.onReload);

            this._element
                .on(this.options('event') + '.jcarouselcontrol', this.onEvent);

            this._reload();
        },
        _destroy: function() {
            this._element
                .off('.jcarouselcontrol', this.onEvent);

            this.carousel()
                .off('jcarousel:destroy', this.onDestroy)
                .off('jcarousel:reloadend jcarousel:scrollend', this.onReload);
        },
        _reload: function() {
            var parsed   = $.jCarousel.parseTarget(this.options('target')),
                carousel = this.carousel(),
                active;

            if (parsed.relative) {
                active = carousel
                    .jcarousel(parsed.target > 0 ? 'hasNext' : 'hasPrev');
            } else {
                var target = typeof parsed.target !== 'object' ?
                                carousel.jcarousel('items').eq(parsed.target) :
                                parsed.target;

                active = carousel.jcarousel('target').index(target) >= 0;
            }

            if (this._active !== active) {
                this._trigger(active ? 'active' : 'inactive');
                this._active = active;
            }

            return this;
        }
    });
}(jQuery));

(function($) {
    'use strict';

    $.jCarousel.plugin('jcarouselPagination', {
        _options: {
            perPage: null,
            item: function(page) {
                return '<a href="#' + page + '">' + page + '</a>';
            },
            event:  'click',
            method: 'scroll'
        },
        _carouselItems: null,
        _pages: {},
        _items: {},
        _currentPage: null,
        _init: function() {
            this.onDestroy = $.proxy(function() {
                this._destroy();
                this.carousel()
                    .one('jcarousel:createend', $.proxy(this._create, this));
            }, this);
            this.onReload = $.proxy(this._reload, this);
            this.onScroll = $.proxy(this._update, this);
        },
        _create: function() {
            this.carousel()
                .one('jcarousel:destroy', this.onDestroy)
                .on('jcarousel:reloadend', this.onReload)
                .on('jcarousel:scrollend', this.onScroll);

            this._reload();
        },
        _destroy: function() {
            this._clear();

            this.carousel()
                .off('jcarousel:destroy', this.onDestroy)
                .off('jcarousel:reloadend', this.onReload)
                .off('jcarousel:scrollend', this.onScroll);

            this._carouselItems = null;
        },
        _reload: function() {
            var perPage = this.options('perPage');

            this._pages = {};
            this._items = {};

            // Calculate pages
            if ($.isFunction(perPage)) {
                perPage = perPage.call(this);
            }

            if (perPage == null) {
                this._pages = this._calculatePages();
            } else {
                var pp    = parseInt(perPage, 10) || 0,
                    items = this._getCarouselItems(),
                    page  = 1,
                    i     = 0,
                    curr;

                while (true) {
                    curr = items.eq(i++);

                    if (curr.length === 0) {
                        break;
                    }

                    if (!this._pages[page]) {
                        this._pages[page] = curr;
                    } else {
                        this._pages[page] = this._pages[page].add(curr);
                    }

                    if (i % pp === 0) {
                        page++;
                    }
                }
            }

            this._clear();

            var self     = this,
                carousel = this.carousel().data('jcarousel'),
                element  = this._element,
                item     = this.options('item'),
                numCarouselItems = this._getCarouselItems().length;

            $.each(this._pages, function(page, carouselItems) {
                var currItem = self._items[page] = $(item.call(self, page, carouselItems));

                currItem.on(self.options('event') + '.jcarouselpagination', $.proxy(function() {
                    var target = carouselItems.eq(0);

                    // If circular wrapping enabled, ensure correct scrolling direction
                    if (carousel.circular) {
                        var currentIndex = carousel.index(carousel.target()),
                            newIndex     = carousel.index(target);

                        if (parseFloat(page) > parseFloat(self._currentPage)) {
                            if (newIndex < currentIndex) {
                                target = '+=' + (numCarouselItems - currentIndex + newIndex);
                            }
                        } else {
                            if (newIndex > currentIndex) {
                                target = '-=' + (currentIndex + (numCarouselItems - newIndex));
                            }
                        }
                    }

                    carousel[this.options('method')](target);
                }, self));

                element.append(currItem);
            });

            this._update();
        },
        _update: function() {
            var target = this.carousel().jcarousel('target'),
                currentPage;

            $.each(this._pages, function(page, carouselItems) {
                carouselItems.each(function() {
                    if (target.is(this)) {
                        currentPage = page;
                        return false;
                    }
                });

                if (currentPage) {
                    return false;
                }
            });

            if (this._currentPage !== currentPage) {
                this._trigger('inactive', this._items[this._currentPage]);
                this._trigger('active', this._items[currentPage]);
            }

            this._currentPage = currentPage;
        },
        items: function() {
            return this._items;
        },
        reloadCarouselItems: function() {
            this._carouselItems = null;
            return this;
        },
        _clear: function() {
            this._element.empty();
            this._currentPage = null;
        },
        _calculatePages: function() {
            var carousel = this.carousel().data('jcarousel'),
                items    = this._getCarouselItems(),
                clip     = carousel.clipping(),
                wh       = 0,
                idx      = 0,
                page     = 1,
                pages    = {},
                curr;

            while (true) {
                curr = items.eq(idx++);

                if (curr.length === 0) {
                    break;
                }

                if (!pages[page]) {
                    pages[page] = curr;
                } else {
                    pages[page] = pages[page].add(curr);
                }

                wh += carousel.dimension(curr);

                if (wh >= clip) {
                    page++;
                    wh = 0;
                }
            }

            return pages;
        },
        _getCarouselItems: function() {
            if (!this._carouselItems) {
                this._carouselItems = this.carousel().jcarousel('items');
            }

            return this._carouselItems;
        }
    });
}(jQuery));

(function($) {
    'use strict';

    $.jCarousel.plugin('jcarouselAutoscroll', {
        _options: {
            target:    '+=1',
            interval:  3000,
            autostart: true
        },
        _timer: null,
        _init: function () {
            this.onDestroy = $.proxy(function() {
                this._destroy();
                this.carousel()
                    .one('jcarousel:createend', $.proxy(this._create, this));
            }, this);

            this.onAnimateEnd = $.proxy(this.start, this);
        },
        _create: function() {
            this.carousel()
                .one('jcarousel:destroy', this.onDestroy);

            if (this.options('autostart')) {
                this.start();
            }
        },
        _destroy: function() {
            this.stop();
            this.carousel()
                .off('jcarousel:destroy', this.onDestroy);
        },
        start: function() {
            this.stop();

            this.carousel()
                .one('jcarousel:animateend', this.onAnimateEnd);

            this._timer = setTimeout($.proxy(function() {
                this.carousel().jcarousel('scroll', this.options('target'));
            }, this), this.options('interval'));

            return this;
        },
        stop: function() {
            if (this._timer) {
                this._timer = clearTimeout(this._timer);
            }

            this.carousel()
                .off('jcarousel:animateend', this.onAnimateEnd);

            return this;
        }
    });
}(jQuery));
var g,k=this,l=function(a,b){var c=a.split("."),d=k;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b},m=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&
!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a.call)return"object";return b};Math.random();Math.random();var n=Array.prototype,p=function(a){return n.concat.apply(n,arguments)},q=function(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]};var r;t:{var s=k.navigator;if(s){var u=s.userAgent;if(u){r=u;break t}}r=""};var w=-1!=r.indexOf("Opera")||-1!=r.indexOf("OPR"),x=-1!=r.indexOf("Trident")||-1!=r.indexOf("MSIE"),y=-1!=r.indexOf("Gecko")&&-1==r.toLowerCase().indexOf("webkit")&&!(-1!=r.indexOf("Trident")||-1!=r.indexOf("MSIE")),A=-1!=r.toLowerCase().indexOf("webkit"),aa=A&&-1!=r.indexOf("Mobile");
(function(){var a="",b;if(w&&k.opera)return a=k.opera.version,"function"==m(a)?a():a;y?b=/rv\:([^\);]+)(\)|;)/:x?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:A&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(r))?a[1]:"");return x&&(b=(b=k.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a})();var B;B=!1;var C=r;C&&(-1!=C.indexOf("Firefox")||-1!=C.indexOf("Camino")||-1!=C.indexOf("iPhone")||-1!=C.indexOf("iPod")||-1!=C.indexOf("iPad")||-1!=C.indexOf("Chrome")||-1!=C.indexOf("Android")||-1!=C.indexOf("Safari")&&(B=!0));var ba=B;var D=function(a){var b=window;if(aa&&ba&&a){a.focus();var c=0,d=null,d=a.setInterval(function(){b.closed||5==c?a.clearInterval(d):(b.close(),c++)},150)}else b.close()};var E="StopIteration"in k?k.StopIteration:Error("StopIteration"),G=function(){};G.prototype.next=function(){throw E;};G.prototype.s=function(){return this};var H=function(a,b){this.g={};this.c=[];this.m=this.b=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){var e;if(a instanceof H)e=a.j(),d=a.h();else{var c=[],f=0;for(e in a)c[f++]=e;e=c;c=[];f=0;for(d in a)c[f++]=a[d];d=c}for(c=0;c<e.length;c++)this.set(e[c],d[c])}};H.prototype.h=function(){I(this);for(var a=[],b=0;b<this.c.length;b++)a.push(this.g[this.c[b]]);return a};
H.prototype.j=function(){I(this);return this.c.concat()};H.prototype.k=function(a){return J(this.g,a)};H.prototype.remove=function(a){return J(this.g,a)?(delete this.g[a],this.b--,this.m++,this.c.length>2*this.b&&I(this),!0):!1};var I=function(a){if(a.b!=a.c.length){for(var b=0,c=0;b<a.c.length;){var d=a.c[b];J(a.g,d)&&(a.c[c++]=d);b++}a.c.length=c}if(a.b!=a.c.length){for(var e={},c=b=0;b<a.c.length;)d=a.c[b],J(e,d)||(a.c[c++]=d,e[d]=1),b++;a.c.length=c}};g=H.prototype;
g.get=function(a,b){return J(this.g,a)?this.g[a]:b};g.set=function(a,b){J(this.g,a)||(this.b++,this.c.push(a),this.m++);this.g[a]=b};g.forEach=function(a,b){for(var c=this.j(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};g.clone=function(){return new H(this)};
g.s=function(a){I(this);var b=0,c=this.c,d=this.g,e=this.m,f=this,h=new G;h.next=function(){for(;;){if(e!=f.m)throw Error("The map has changed since the iterator was created");if(b>=c.length)throw E;var h=c[b++];return a?h:d[h]}};return h};var J=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};var ca=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/,L=function(a){if(K){K=!1;var b=k.location;if(b){var c=b.href;if(c&&(c=(c=L(c)[3]||null)&&decodeURIComponent(c))&&c!=b.hostname)throw K=!0,Error();}}return a.match(ca)},K=A;var M=function(a,b){var c;if(a instanceof M)this.d=void 0!==b?b:a.d,N(this,a.i),c=a.q,O(this),this.q=c,c=a.l,O(this),this.l=c,P(this,a.p),c=a.o,O(this),this.o=c,Q(this,a.f.clone()),c=a.n,O(this),this.n=c;else if(a&&(c=L(String(a)))){this.d=!!b;N(this,c[1]||"",!0);var d=c[2]||"";O(this);this.q=d?decodeURIComponent(d):"";d=c[3]||"";O(this);this.l=d?decodeURIComponent(d):"";P(this,c[4]);d=c[5]||"";O(this);this.o=d?decodeURIComponent(d):"";Q(this,c[6]||"",!0);c=c[7]||"";O(this);this.n=c?decodeURIComponent(c):
""}else this.d=!!b,this.f=new R(null,0,this.d)};g=M.prototype;g.i="";g.q="";g.l="";g.p=null;g.o="";g.n="";g.t=!1;g.d=!1;g.toString=function(){var a=[],b=this.i;b&&a.push(S(b,T),":");if(b=this.l){a.push("//");var c=this.q;c&&a.push(S(c,T),"@");a.push(encodeURIComponent(String(b)));b=this.p;null!=b&&a.push(":",String(b))}if(b=this.o)this.l&&"/"!=b.charAt(0)&&a.push("/"),a.push(S(b,"/"==b.charAt(0)?da:ea));(b=this.f.toString())&&a.push("?",b);(b=this.n)&&a.push("#",S(b,fa));return a.join("")};
g.clone=function(){return new M(this)};var N=function(a,b,c){O(a);a.i=c?b?decodeURIComponent(b):"":b;a.i&&(a.i=a.i.replace(/:$/,""))},P=function(a,b){O(a);if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.p=b}else a.p=null},Q=function(a,b,c){O(a);b instanceof R?(a.f=b,a.f.r(a.d)):(c||(b=S(b,ga)),a.f=new R(b,0,a.d))},O=function(a){if(a.t)throw Error("Tried to modify a read-only Uri");};M.prototype.r=function(a){this.d=a;this.f&&this.f.r(a);return this};
var S=function(a,b){return"string"==typeof a?encodeURI(a).replace(b,ha):null},ha=function(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)},T=/[#\/\?@]/g,ea=/[\#\?:]/g,da=/[\#\?]/g,ga=/[\#\?@]/g,fa=/#/g,R=function(a,b,c){this.e=a||null;this.d=!!c},V=function(a){if(!a.a&&(a.a=new H,a.b=0,a.e))for(var b=a.e.split("&"),c=0;c<b.length;c++){var d=b[c].indexOf("="),e=null,f=null;0<=d?(e=b[c].substring(0,d),f=b[c].substring(d+1)):e=b[c];e=decodeURIComponent(e.replace(/\+/g," "));
e=U(a,e);a.add(e,f?decodeURIComponent(f.replace(/\+/g," ")):"")}};g=R.prototype;g.a=null;g.b=null;g.add=function(a,b){V(this);this.e=null;a=U(this,a);var c=this.a.get(a);c||this.a.set(a,c=[]);c.push(b);this.b++;return this};g.remove=function(a){V(this);a=U(this,a);return this.a.k(a)?(this.e=null,this.b-=this.a.get(a).length,this.a.remove(a)):!1};g.k=function(a){V(this);a=U(this,a);return this.a.k(a)};
g.j=function(){V(this);for(var a=this.a.h(),b=this.a.j(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};g.h=function(a){V(this);var b=[];if("string"==typeof a)this.k(a)&&(b=p(b,this.a.get(U(this,a))));else{a=this.a.h();for(var c=0;c<a.length;c++)b=p(b,a[c])}return b};g.set=function(a,b){V(this);this.e=null;a=U(this,a);this.k(a)&&(this.b-=this.a.get(a).length);this.a.set(a,[b]);this.b++;return this};
g.get=function(a,b){var c=a?this.h(a):[];return 0<c.length?String(c[0]):b};g.toString=function(){if(this.e)return this.e;if(!this.a)return"";for(var a=[],b=this.a.j(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.h(d),f=0;f<d.length;f++){var h=e;""!==d[f]&&(h+="="+encodeURIComponent(String(d[f])));a.push(h)}return this.e=a.join("&")};g.clone=function(){var a=new R;a.e=this.e;this.a&&(a.a=this.a.clone(),a.b=this.b);return a};
var U=function(a,b){var c=String(b);a.d&&(c=c.toLowerCase());return c};R.prototype.r=function(a){a&&!this.d&&(V(this),this.e=null,this.a.forEach(function(a,c){var d=c.toLowerCase();c!=d&&(this.remove(c),this.remove(d),0<a.length&&(this.e=null,this.a.set(U(this,d),q(a)),this.b+=a.length))},this));this.d=a};var X=function(a){a=new M(a);var b="&"+window.name;O(a);a.f.set(b,!0);b=a.f.h("parent");O(a);a.f.remove("parent");1==b.length&&(b=gadgets.rpc.getOrigin(String(b[0])),O(a),a.f.set("parent",b));b="&"+window.name;O(a);a.f.remove(b);return a.toString()},Y=function(a,b,c,d,e,f,h){if(!d||!d.document.domain)return!1;var t=X(String(d.document.location.href));if(t.substr(0,c.length)!=c)return!1;c=gadgets.util.getUrlParameters(t);if(!b||!c.parent||b!=gadgets.rpc.getOrigin(String(c.parent)))return!1;if(!e)return l("oauth2callbackUrl",
a),d.oauth2verify.call(d,String(window.name),h)?!0:!1;d.oauth2callback.call(d,a);try{f()}catch(v){}return!0},Z=function(){try{return window.parent!=window}catch(a){}return!0},$=function(){try{return!!window.opener}catch(a){}return!0},ia=function(a,b,c,d,e){try{var f=Z(),h=!f&&$(),t=!0,v=null,F=function(){t&&D(v)};if(!f&&!h)return;var t=(h||!f)&&"keep_open"!==e,v=h?window.opener:window.parent,W=X(b);try{var z;if(d&&(z=v.frames[d],Y(a,c,W,z,!h,F,e)))return;for(b=0;b<v.frames.length;++b)if(z=v.frames[b],
Y(a,c,W,z,!h,F,e)){t=!1;break}}catch(ja){}}catch(ka){}F()};
l("postmessage.onLoad",function(){window.name="pmh"+String(2147483647*shindig.random()|0);var a=document.createElement("div"),b="true"==document.getElementById("error").value,c=gadgets.rpc.getOrigin(document.getElementById("origin").value),b=c+(b?"?":"#")+document.getElementById("response-form-encoded").value,d=document.getElementById("relay-endpoint").value,e=null,f=document.getElementById("proxy");f&&f.value&&(e=f.value);var f=document.getElementById("after-redirect"),h=null;f&&f.value&&(h=f.value);
a.appendChild(document.createTextNode(b));a.setAttribute("id","postmessage-hello");ia(b,d,c,e,h)});l("postmessage.closePopup",function(){var a=null;try{var b=Z(),c=!b&&$();if(!b&&!c)return;a=c?window.opener:window.parent}catch(d){}D(a)});
var f=this,g=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b};Math.random();var h=function(a,b){var c=a.split("."),d=f;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b};Math.random();var l;i:{var m=f.navigator;if(m){var n=m.userAgent;if(n){l=n;break i}}l=""};var p=-1!=l.indexOf("Opera")||-1!=l.indexOf("OPR"),r=-1!=l.indexOf("Trident")||-1!=l.indexOf("MSIE"),s=-1!=l.indexOf("Gecko")&&-1==l.toLowerCase().indexOf("webkit")&&!(-1!=l.indexOf("Trident")||-1!=l.indexOf("MSIE")),t=-1!=l.toLowerCase().indexOf("webkit"),u=t&&-1!=l.indexOf("Mobile");
(function(){var a="",b;if(p&&f.opera)return a=f.opera.version,"function"==g(a)?a():a;s?b=/rv\:([^\);]+)(\)|;)/:r?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:t&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(l))?a[1]:"");return r&&(b=(b=f.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a})();var v;v=!1;var x=l;x&&(-1!=x.indexOf("Firefox")||-1!=x.indexOf("Camino")||-1!=x.indexOf("iPhone")||-1!=x.indexOf("iPod")||-1!=x.indexOf("iPad")||-1!=x.indexOf("Chrome")||-1!=x.indexOf("Android")||-1!=x.indexOf("Safari")&&(v=!0));var y=v;var z=function(a){var b=window;if(u&&y&&b){b.focus();var c=0,d=null,d=b.setInterval(function(){a.closed||5==c?b.clearInterval(d):(a.close(),c++)},150)}else a.close()};var B,C=function(a){a=a||[];for(var b=[],c=0,d=a.length;c<d;++c){var e=String(a[c]||"");e&&b.push(e)}if(!b.length)return null;B?B.reset.call(B):B=shindig.sha1();B.update.call(B,b.join(" "));return B.digestString.call(B).toLowerCase()},D=function(a,b,c){this.i=String(a||"");this.e=String(b||"");this.a=String(c||"");this.d={};this.g=this.k=this.f=this.h="";this.c=null};
D.prototype.evaluate=function(){var a={},b="";try{b=String(document.cookie||"")}catch(c){}for(var b=b.split("; ").join(";").split(";"),d=0,e=b.length;d<e;++d){var k=b[d],w=k.indexOf("=");-1!=w?a[k.substr(0,w)]=k.substr(w+1):a[k]=null}this.d=a;if(this.d.SID)if(this.e=this.e.split(".")[0].split("@")[0],a="",a=0==this.i.indexOf("https://")?"SAPISID":"APISID",this.f=String(this.d[a]||""))if(a="",a=0==gadgets.rpc.getOrigin(String(window.location.href)).indexOf("https://")?"SAPISID":"APISID",this.h=String(this.d[a]||
"")){b=String(this.d.LSOLH||"").split(":");d=b.length;if(1==d||4==d)this.k=b[0];if(3==d||4==d)a=String(b[d-3]||""),b=String(b[d-1]||""),(d=C([a,this.h]).substr(0,4))&&d==b&&(this.g=a);this.a&&(a=this.a.indexOf("."),-1!=a&&(a=this.a.substr(0,a)||"",this.a=a+"."+C([this.f,this.i,this.e,this.k,this.g,a]).substr(0,4)));a=C([this.f,this.i,this.e,this.a]);this.a&&(a=a+"."+this.a);this.c=a}else this.c="";else this.c=""};
var E=function(a,b,c){a=new D(a,b,c);a.evaluate();return a},G=function(a,b,c){c=c||F(this);var d=null;if(a){a=String(a);var e=a.indexOf(".");-1!=e&&(d=a.substr(e+1))}b=E(c,b,d).c;if(null==a||""==a)a=b==a;else if(null==b||b.length!=a.length)a=!1;else{d=c=0;for(e=a.length;d<e;++d)c|=a.charCodeAt(d)^b.charCodeAt(d);a=0==c}return a},H=function(a,b,c){c=c||F(this);c=E(c);if(String(a)!=c.c)throw Error("Unauthorized request");b=String(b);a=parseInt(b,10);String(a)==b&&0<=a?(b=c.g)?(b=b.split("|"),a=b.length<=
a?null:b[a]||null):a=null:a=null;return a},F=function(a){a=String(a.origin||"");if(!a)throw Error("RPC has no origin.");return a};h("checkSessionState",G);h("getVersionInfo",H);var I,J,K,L,M,N,O=window,P=(window.location.href||O.location.href).match(/.*(\?|#|&)usegapi=([^&#]+)/)||[];
"1"===decodeURIComponent(P[P.length-1]||"")?(K=function(a,b,c,d,e,k){I.send(b,e,d,k||gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)},L=function(a,b){I.register(a,b,gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)},M=function(a){var b=gapi.iframes.makeWhiteListIframesFilter([a.substr(0,a.indexOf("?"))]);K("..","oauth2callback",gadgets.rpc.getAuthToken(".."),void 0,a,b)},J=function(){Q()},N=function(){K("..","oauth2relayReady",gadgets.rpc.getAuthToken(".."));L("check_session_state",R);L("get_versioninfo",S)}):
(K=function(a,b,c,d,e){gadgets.rpc.call(a,b+":"+c,d,e)},L=function(a,b){gadgets.rpc.register(a,b)},M=function(a){gadgets.rpc.getTargetOrigin("..")==gadgets.rpc.getOrigin(a)&&K("..","oauth2callback",gadgets.rpc.getAuthToken(".."),void 0,a)},J=function(){N()},N=function(){K("..","oauth2relayReady",gadgets.rpc.getAuthToken(".."));L("check_session_state",G);L("get_versioninfo",H)});
var Q=function(){var a=N;window.gapi.load("gapi.iframes",function(){I=gapi.iframes.getContext().getParentIframe();a()})},T=function(a){window.setTimeout(function(){M(a)},1)},R=function(a){var b,c;a&&(b=a.session_state,c=a.client_id);return G(b,c,I.getOrigin())},S=function(a){return H(a.xapisidHash,a.sessionIndex,I.getOrigin())};h("oauth2callback",T);
h("oauth2verify",function(a,b){var c=window.open("javascript:void(0);",a),d;if(c&&!c.closed&&(d=c.oauth2callbackUrl))return window.b=window.b||{},window.j=window.j||window.setTimeout,window.setTimeout=function(a,b){try{var d=a,A=!1,q;a=function(){if(!A){A=!0;try{window.b[String(q)]=void 0,delete window.b[String(q)]}catch(a){}return d.call(this)}};var U=c.setTimeout(a,b);q=window.j(a,b);window.b[String(q)]=U;return q}catch(V){}return window.j(a,b)},window.l=window.l||window.clearTimeout,window.clearTimeout=
function(a){try{var b=window.b[String(a)];b&&c.clearTimeout(b)}catch(d){}try{window.b[String(a)]=void 0,delete window.b[String(a)]}catch(A){}window.l(a)},T(String(d)),"keep_open"!=b&&z(c),!0;c&&!c.closed&&z(c);return!1});window.addEventListener?window.addEventListener("load",J,!1):window.attachEvent("onload",J);
/*

 Sizzle CSS Selector Engine v1.10.16
 http://sizzlejs.com/

 Copyright 2013 jQuery Foundation, Inc. and other contributors
 Released under the MIT license
 http://jquery.org/license

 Date: 2014-01-13

 jQuery JavaScript Library v2.1.0
 http://jquery.com/

 Includes Sizzle.js
 http://sizzlejs.com/

 Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 Released under the MIT license
 http://jquery.org/license

 Date: 2014-01-23T21:10Z

 jQuery UI Core 1.10.3
 http://jqueryui.com

 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/category/ui-core/

 jQuery UI Widget 1.10.3
 http://jqueryui.com

 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/jQuery.widget/

 jQuery UI Mouse 1.10.3
 http://jqueryui.com

 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/mouse/

 Depends:
 jquery.ui.widget.js

 jQuery UI Position 1.10.3
 http://jqueryui.com

 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/position/

 jQuery UI Draggable 1.10.3
 http://jqueryui.com

 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/draggable/

 Depends:
 jquery.ui.core.js
 jquery.ui.mouse.js
 jquery.ui.widget.js

 jQuery UI Droppable 1.10.3
 http://jqueryui.com

 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/droppable/

 Depends:
 jquery.ui.core.js
 jquery.ui.widget.js
 jquery.ui.mouse.js
 jquery.ui.draggable.js

 jQuery UI Sortable 1.10.3
 http://jqueryui.com

 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/sortable/

 Depends:
 jquery.ui.core.js
 jquery.ui.mouse.js
 jquery.ui.widget.js

 jQuery UI Datepicker 1.10.3
 http://jqueryui.com

 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/datepicker/

 Depends:
 jquery.ui.core.js
 Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 Licensed under the MIT License (LICENSE.txt).

 Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 Thanks to: Seamus Leahy for adding deltaX and deltaY

 Version: 3.0.6

 Requires: 1.2.2+
: Copyright (c) 2006-2008, Coolite Inc. (http://www.coolite.com/). All rights reserved.
 @license: Licensed under The MIT License. See license.txt and http://www.datejs.com/license/. 
 @website: http://www.datejs.com/

  Copyright 2011 Twitter, Inc.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.

  Trello modification note: we have modified this version of the Hogan library
  to treat the empty string as False for the purposes of section rendering.
  See https://github.com/twitter/hogan.js/issues/search?q=48 for the issue and
  patch.


 This application uses other third-party javascript components
 distributed under appropriate licenses. For more information,
 see the following:
      backbone.js   http://backbonejs.org/
      json2.js      https://github.com/douglascrockford/JSON-js
      markdown.js   https://github.com/evilstreak/markdown-js
      socket.io.js  http://socket.io/
      underscore.js http://underscorejs.org/
*/

(function(){var Zc,$c,ad;window.clientVersion={head:"crossorigin",version:"7",patch:0};window.require=null;window.attachmentsDomain="https://trello-attachments.s3.amazonaws.com";window.avatarDomain="https://trello-avatars.s3.amazonaws.com";window.backgroundDomain="https://trello-backgrounds.s3.amazonaws.com";window.logoDomain="https://trello-logos.s3.amazonaws.com";window.siteDomain=location.origin||/^[^/]+?[/]{2}[^/]+/.exec(location.href)[0];window.googleDrive={publicAPIKey:"AIzaSyDcHmdn94AmewycScWCBNeAMz0nbT8HQ_c",
clientId:"908467292589.apps.googleusercontent.com"};var v={action:function(c,b,d){this.b(d=d||"");this.s(this.f("member",c,b,1),c,b,0,11,77,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="creator member js-show-mem-menu"> ');f.b(f.rp("member",b,d,""));f.b(" </div> ")}),c.pop());this.b(" ");this.s(this.f("member",c,b,1),c,b,1,0,0,"")||this.b(' <div class="creator member member-no-menu"><span class="member-initials quiet">?</span></div> ');this.b(' <div class="phenom-desc" ');this.s(this.f("type",
c,b,1),c,b,0,241,262,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('actionType="');f.b(f.v(f.f("type",b,d,0)));f.b('"')}),c.pop());this.b("> ");this.s(this.f("member",c,b,1),c,b,0,284,357,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<a class="inline-object js-show-mem-menu" href="');f.b(f.v(f.f("url",b,d,0)));f.b('">');f.b(f.v(f.f("fullName",b,d,0)));f.b("</a>")}),c.pop());this.b(" ");this.s(this.f("member",c,b,1),c,b,1,0,0,"")||this.b('<span class="quiet">[deleted account]</span>');this.b(" ");this.s(this.f("entities",
c,b,1),c,b,0,449,462,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.b(f.rp("entity",b,d,""));f.b(" ")}),c.pop());this.b(" ");this.s(this.f("hasMoreThanOneChild",c,b,1),c,b,1,0,0,"")||(this.b(" "),this.s(this.f("children",c,b,1),c,b,0,514,553,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("entities",b,d,1),b,d,0,528,539,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(e.rp("entity",b,d,""))}),b.pop());f.b(" ")}),c.pop()),this.b(" "));this.b(" ");this.s(this.f("hasMoreThanOneChild",c,b,1),c,b,0,
616,703,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" <ul> ");f.s(f.f("children",b,d,1),b,d,0,635,683,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" <li>");e.s(e.f("entities",b,d,1),b,d,0,653,664,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b(e.rp("entity",b,d,""))}),b.pop());e.b("</li> ")}),b.pop());f.b(" </ul> ")}),c.pop());this.b(" ");this.s(this.f("useEmbedly",c,b,1),c,b,0,743,788,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="hide embedly js-embedly"></div> ')}),c.pop());this.b(" ");this.s(this.f("usePreviews",
c,b,1),c,b,0,820,867,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="hide previews js-previews"></div> ')}),c.pop());this.b(' </div> <p class="phenom-meta quiet"> ');this.s(this.f("saved",c,b,1),c,b,0,931,984,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<span class="date js-hide-on-sending" dt="');f.b(f.v(f.f("date",b,d,0)));f.b('"/>')}),c.pop());this.b(" ");this.s(this.f("dateLastEdited",c,b,1),c,b,0,1014,1108,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<span class="js-hide-on-sending"> - edited <span class="date" dt="');
f.b(f.v(f.f("dateLastEdited",b,d,0)));f.b('"/></span>')}),c.pop());this.b(' <span class="js-spinner');this.s(this.f("saved",c,b,1),c,b,0,1161,1166,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" hide")}),c.pop());this.b('"><span class="spinner small left" style="margin-right: 4px;"/> Sending\u2026</span> ');this.s(this.f("board",c,b,1),c,b,0,1266,1407,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' - on board <a class="bold" href="');f.b(f.v(f.f("url",b,d,0)));f.b('">');f.b(f.v(f.f("name",b,d,0)));f.b('</a> <span title="');
f.b(f.v(f.f("boardPLevelAltText",b,d,0)));f.b('" class="icon-sm icon-');f.b(f.v(f.f("boardPLevelIconClass",b,d,0)));f.b('"/> ')}),c.pop());this.b(" ");this.s(this.f("organization",c,b,1),c,b,0,1435,1579,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' - on organization <a class="bold" href="');f.b(f.v(f.f("url",b,d,0)));f.b('">');f.b(f.v(f.f("name",b,d,0)));f.b('</a> <span title="');f.b(f.v(f.f("orgPLevelAltText",b,d,0)));f.b('" class="icon-sm icon-');f.b(f.v(f.f("orgPLevelIconClass",b,d,0)));f.b('"/> ')}),
c.pop());this.b(' <span class="js-hide-on-sending"> ');this.s(this.f("canEdit",c,b,1),c,b,0,1643,1690,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' - <a href="#" class="js-edit-action">Edit</a> ')}),c.pop());this.b(" ");this.s(this.f("canDelete",c,b,1),c,b,0,1717,1776,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' - <a href="#" class="js-confirm-delete-action">Delete</a> ')}),c.pop());this.b(" ");this.s(this.f("canPromoteToCard",c,b,1),c,b,0,1812,1874,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' - <a href="#" class="js-promote-to-card">Promote to Card</a> ')}),
c.pop());this.b(" </span> </p> ");return this.fl()},actions_empty:function(c,b,d){this.b(d=d||"");this.b('<p class="empty-list">No actions');this.s(this.f("daysBack",c,b,1),c,b,0,45,76,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" in the last ");f.b(f.v(f.f("daysBack",b,d,0)));f.b(" days ")}),c.pop());this.b("</p> ");return this.fl()},ad_bc_banner:function(c,b,d){this.b(d||"");this.b('<a class="bc-pitch js-bc-ad" href="');this.b(this.v(this.f("url",c,b,0)));this.b('"> <span class="mark business-class-mark" alt="Trello Business Class Logo"/> <span class="title">Get Business Class</span> <span class="pitchlet"> Supercharge your organization. </span> </a> ');
return this.fl()},ad_bc_banner_upgrade:function(c,b,d){this.b(d||"");this.b('<a class="bc-pitch-upgrade js-bc-ad" href="');this.b(this.v(this.f("url",c,b,0)));this.b('"> <span class="title">There\u2019s a new Business Class update available!</span> <span class="pitchlet"> Check out the new features and upgrade! </span> </a> ');return this.fl()},ad_business_class:function(c,b,d){this.b(d||"");this.b('<span class="title"> Trello Business Class </span> <span class="pitchlet">Add features to supercharge your organization.</span> <span class="features">Google Apps Integration \u00b7 Bulk Export \u00b7 Read-only Observers</span> <span class="learn-more"><a href="#">Learn More\u2026</a></span> ');
return this.fl()},ad_business_class_google_apps:function(c,b,d){this.b(d||"");this.b('<span class="title"> Using Google Apps? </span> <span class="learn-more"><a href="#">Learn about Business Class\u2026</a></span> ');return this.fl()},ad_business_class_manage_any_board:function(c,b,d){this.b(d||"");this.b('<span class="title"> Want to manage all ');this.b(this.v(this.d("organization.displayName",c,b,0)));this.b(' boards? </span> <span class="learn-more"><a href="#">Learn about Business Class\u2026</a></span> ');
return this.fl()},ad_business_class_observers:function(c,b,d){this.b(d||"");this.b('<span class="title"> Want to add observers? </span> <span class="learn-more"><a href="#">Learn about Business Class\u2026</a></span> ');return this.fl()},ad_gold_banner:function(c,b,d){this.b(d||"");this.b('<a class="gold-pitch js-gold-ad" href="/gold"> <span class="mark gold-mark" alt="Trello Gold Logo"/> <span class="title">Get Trello Gold</span> <span class="pitchlet"> Support Trello and get extra fun and functionality. </span> </a> ');
return this.fl()},"admin/channelAccess.entry":function(c,b,d){this.b(d=d||"");this.b("<td>");this.b(this.v(this.f("fullName",c,b,0)));this.b("</td> <td>");this.b(this.v(this.f("email",c,b,0)));this.b("</td> <td>");this.b(this.v(this.d("channels.active",c,b,0)));this.b("</td> <td> ");this.s(this.d("channels.allowed",c,b,1),c,b,0,96,205,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" <div class='allowance' data-key='");f.b(f.v(f.d(".",b,d,0)));f.b("'> ");f.b(f.v(f.d(".",b,d,0)));f.b(" <div class='close js-remove-allowance'>&#10006;</div> </div> ")}),
c.pop());this.b(" <div class='allowance new-allowance'> <input type='text' class='js-input-allowance' placeholder='add permission'> <div class='add js-add-allowance'>+</div> </div> </td> ");return this.fl()},"admin/manage.entry":function(c,b,d){this.b(d=d||"");this.b("<td>");this.b(this.v(this.f("fullName",c,b,0)));this.b("</td> <td>");this.b(this.v(this.f("email",c,b,0)));this.b("</td> <td> ");this.s(this.f("allow",c,b,1),c,b,0,56,165,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" <div class='allowance' data-key='");
f.b(f.v(f.d(".",b,d,0)));f.b("'> ");f.b(f.v(f.d(".",b,d,0)));f.b(" <div class='close js-remove-allowance'>&#10006;</div> </div> ")}),c.pop());this.b(" <div class='allowance new-allowance'> <input type='text' class='js-input-allowance' placeholder='add permission'> <div class='add js-add-allowance'>+</div> </div> </td> ");return this.fl()},"admin/release.channel":function(c,b,d){this.b(d=d||"");this.b('<div class="channel"> <h3>');this.b(this.v(this.f("name",c,b,0)));this.b("</h3> <table> <tr> ");
this.s(this.f("editable",c,b,1),c,b,0,66,77,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" <th></th> ")}),c.pop());this.b(" <th>Head</th> <th>Version (max)</th> <th>Percent</th> ");this.s(this.f("editable",c,b,1),c,b,0,158,169,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" <th></th> ")}),c.pop());this.b(" </tr> ");this.s(this.f("editable",c,b,1),c,b,0,202,486,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("message",b,d,1),b,d,0,215,307,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <tr> <td colspan="5" align="center" class="message ');
e.b(e.v(e.f("className",b,d,0)));e.b('"> ');e.b(e.v(e.f("message",b,d,0)));e.b(" </td> </tr> ")}),b.pop());f.b(' <tr> <td colspan="5" align="center"> <input type="button" class="js-add-head" value="Add" /> <input type="button" class="js-save-channel" value="Save" /> </td> </tr> ')}),c.pop());this.b(" </table> </div> <hr> ");return this.fl()},"admin/release.deployment":function(c,b,d){this.b(d||"");this.b(this.v(this.f("head",c,b,0)));this.b("-");this.b(this.v(this.f("version",c,b,0)));this.b(".");
this.b(this.v(this.f("patch",c,b,0)));this.b(" ");return this.fl()},"admin/release.deploymentList":function(c,b,d){this.b(d||"");this.b("<label>");this.b(this.v(this.f("head",c,b,0)));this.b("</label> <ul></ul> ");return this.fl()},"admin/release.head":function(c,b,d){this.b(d=d||"");this.s(this.f("editable",c,b,1),c,b,0,13,135,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <td> <a href="#" class="js-move-up change-head">&uarr;</a> <a href="#" class="js-move-down change-head">&darr;</a> </td> ')}),
c.pop());this.b(" <td> ");this.s(this.f("editable",c,b,1),c,b,0,167,219,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <input name="name" type="text" value="');f.b(f.v(f.f("name",b,d,0)));f.b('" /> ')}),c.pop());this.b(" ");this.s(this.f("editable",c,b,1),c,b,1,0,0,"")||(this.b(" "),this.b(this.v(this.f("name",c,b,0))),this.b(" "));this.b(" </td> <td> ");this.s(this.f("editable",c,b,1),c,b,0,294,361,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <input name="version" size="5" type="text" value="');f.b(f.v(f.f("version",
b,d,0)));f.b('" /> ')}),c.pop());this.b(" ");this.s(this.f("editable",c,b,1),c,b,1,0,0,"")||(this.b(" "),this.b(this.v(this.f("version",c,b,0))),this.b(" "));this.b(" </td> <td> ");this.s(this.f("editable",c,b,1),c,b,0,439,506,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <input name="percent" size="5" type="text" value="');f.b(f.v(f.f("percent",b,d,0)));f.b('" /> ')}),c.pop());this.b(" ");this.s(this.f("editable",c,b,1),c,b,1,0,0,"")||(this.b(" "),this.b(this.v(this.f("percent",c,b,0))),this.b(" "));
this.b(" </td> ");this.s(this.f("editable",c,b,1),c,b,0,579,645,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <td> <a href="#" class="js-remove change-head">&times;</a> </td> ')}),c.pop());this.b(" ");return this.fl()},announcement:function(c,b,d){this.b(d=d||"");this.b('<div class="announcement');this.s(this.f("type",c,b,1),c,b,0,33,55,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" announcement-");f.b(f.v(f.f("type",b,d,0)))}),c.pop());this.b('"> <h3 class="announcement-header"> ');this.s(this.f("url",
c,b,1),c,b,0,108,188,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<a class="announcement-header-link" target="_blank" href="');f.b(f.v(f.f("url",b,d,0)));f.b('">');f.b(f.v(f.f("title",b,d,0)));f.b("</a>")}),c.pop());this.b(" ");this.s(this.f("url",c,b,1),c,b,1,0,0,"")||this.b(this.v(this.f("title",c,b,0)));this.b(" </h3> <p>");this.b(this.t(this.f("html",c,b,0)));this.b("</p> ");this.s(this.f("url",c,b,1),c,b,0,255,349,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <p class="quiet"> <a href="');f.b(f.v(f.f("url",
b,d,0)));f.b('" target="_blank" class="js-real-link">Read more\u2026</a> </p> ')}),c.pop());this.b(" </div> ");return this.fl()},archive_dropzone_dropped:function(c,b,d){this.b(d||"");this.b('<p> The card has been archived. <a href="#" style="margin-left: 8px;" class="js-open-archive">View archive?</a> <a href="#" style="margin-left: 8px;" class="js-close-dropzone">Close.</a> </p> ');return this.fl()},archive_dropzone_text:function(c,b,d){this.b(d||"");this.b(' <div class="bottom-archive-dropzone js-bottom-archive-dropzone"><p>Drop here to archive card.</p></div> ');
return this.fl()},archive_item:function(c,b,d){this.b(d=d||"");this.b('<p class="item-name"> ');this.s(this.f("url",c,b,1),c,b,0,30,62,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <a href="');f.b(f.v(f.f("url",b,d,0)));f.b('">');f.b(f.v(f.f("name",b,d,0)));f.b("</a> ")}),c.pop());this.b(" ");this.s(this.f("url",c,b,1),c,b,1,0,0,"")||(this.b(" <span>"),this.b(this.v(this.f("name",c,b,0))),this.b("</span> "));this.b(" </p> ");this.s(this.f("__ed",c,b,1),c,b,0,125,382,"{{ }}")&&(this.rs(c,b,function(b,
d,f){f.b(' <div class="options"> <a href="#" class="button-link js-reopen"> <span class="icon-sm icon-reopen"/> ');f.b(f.v(f.f("reOpenText",b,d,0)));f.b(" </a> ");f.s(f.f("canDelete",b,d,1),b,d,0,261,360,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <a href="#" class="button-link negate js-delete"> <span class="icon-sm icon-remove"/> Delete </a> ')}),b.pop());f.b(" </div> ")}),c.pop());this.b(" ");return this.fl()},archive_items:function(c,b,d){this.b(d=d||"");this.s(this.f("empty",c,b,1),c,b,1,0,0,"")||
(this.b(' <div class="clearfix"> '),this.s(this.f("section_lists",c,b,1),c,b,0,52,101,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <ul class="archive-list js-archive-items"></ul> ')}),c.pop()),this.b(" "),this.s(this.f("section_cards",c,b,1),c,b,0,138,212,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="js-archive-items');f.s(f.f("__ed",b,d,1),b,d,0,176,194,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" js-archived-cards")}),b.pop());f.b('"></div> ')}),c.pop()),this.b(" </div> "));this.b(" ");
this.s(this.f("loading",c,b,1),c,b,0,261,298,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="spinner loading"></div> ')}),c.pop());this.b(" ");this.s(this.f("empty",c,b,1),c,b,0,321,365,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <p class="empty-list">');f.b(f.v(f.f("emptyMessage",b,d,0)));f.b("</p> ")}),c.pop());this.b(" ");return this.fl()},archived_card_options:function(c,b,d){this.b(d=d||"");this.s(this.f("__ed",c,b,1),c,b,0,9,181,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <p class="quiet" style="margin-left: 8px;"> <a href="#" class="js-reopen">');
f.b(f.v(f.f("reOpenText",b,d,0)));f.b("</a> ");f.s(f.f("canDelete",b,d,1),b,d,0,117,161,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' - <a href="#" class="js-delete">Delete</a> ')}),b.pop());f.b(" </p> ")}),c.pop());this.b(" ");return this.fl()},atMention:function(c,b,d){this.b(d=d||"");this.b('<span class="atMention');this.s(this.f("isMe",c,b,1),c,b,0,31,34,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" me")}),c.pop());this.b('" title="');this.b(this.v(this.f("fullName",c,b,0)));this.b('">');this.b(this.v(this.f("atMention",
c,b,0)));this.b("</span> ");return this.fl()},attachment_detail:function(c,b,d){this.b(d=d||"");this.b('<div class="window-header clearfix"> <span class="window-header-icon icon-lg icon-attachment"/> <div class="window-title"> <h2 class="window-title-text">');this.b(this.v(this.f("name",c,b,0)));this.b('</h2> </div> </div> <div class="window-main-col"> <div class="window-module gutter clearfix"> ');this.s(this.f("date",c,b,1),c,b,0,264,310,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<span class="date quiet" dt="');
f.b(f.v(f.f("date",b,d,0)));f.b('"></span>')}),c.pop());this.b(" ");this.s(this.f("size",c,b,1),c,b,0,329,367,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<span class="quiet"> - ');f.b(f.v(f.f("size",b,d,0)));f.b("</span>")}),c.pop());this.b(" ");this.s(this.f("__ed",c,b,1),c,b,0,386,682,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="block quiet"> ');f.s(f.f("isImage",b,d,1),b,d,0,426,496,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b('<a href="#" class="inline-block quiet js-make-cover">Make Cover</a> - ')}),
b.pop());f.b(' <a href="');f.b(f.v(f.f("url",b,d,0)));f.b('" class="inline-block quiet js-real-link" target="_blank">View Original</a> - <a href="#" class="inline-block quiet js-delete-attachment">Delete</a> </span> ')}),c.pop());this.b(' </div> <div class="window-module center clearfix" style="margin: 16px 0 0;"> <img src="');this.b(this.v(this.f("url",c,b,0)));this.b('"> </div> </div> ');return this.fl()},attachment_thumb:function(c,b,d){this.b(d=d||"");this.b('<a href="');this.b(this.v(this.f("url",
c,b,0)));this.b('" class="attachment-thumbnail-preview ');this.s(this.f("canUseViewer",c,b,1),c,b,0,71,86,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" js-open-viewer")}),c.pop());this.b(" ");this.s(this.f("canUseViewer",c,b,1),c,b,1,0,0,"")||this.b(" js-real-link");this.b(" ");this.s(this.f("isCover",c,b,1),c,b,0,164,202,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" attachment-thumbnail-preview-is-cover")}),c.pop());this.b('" target="_blank" title="');this.b(this.v(this.f("name",c,b,0)));this.b('" ');
this.s(this.f("imgSrc",c,b,1),c,b,0,260,304,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" style=\"background-image:url('");f.b(f.v(f.f("imgSrc",b,d,0)));f.b("');\"")}),c.pop());this.b(" ");this.s(this.f("edgeColor",c,b,1),c,b,0,330,370,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' style="background-color:');f.b(f.v(f.f("edgeColor",b,d,0)));f.b(';"')}),c.pop());this.b("> ");this.s(this.f("isKnownService",c,b,1),c,b,1,0,0,"")||(this.b(" "),this.s(this.f("ext",c,b,1),c,b,1,0,0,"")||(this.b(" "),this.s(this.f("isImage",
c,b,1),c,b,1,0,0,"")||(this.b(" "),this.s(this.f("isKnownService",c,b,1),c,b,1,0,0,"")||this.b(' <span class="icon-lg icon-attachment attachment-thumbnail-preview-attachment-icon"></span> '),this.b(" ")),this.b(" ")),this.b(" "),this.s(this.f("ext",c,b,1),c,b,0,589,652,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="attachment-thumbnail-preview-ext">');f.b(f.v(f.f("ext",b,d,0)));f.b("</span> ")}),c.pop()),this.b(" "));this.b(" ");this.s(this.f("isKnownService",c,b,1),c,b,0,700,782,"{{ }}")&&
(this.rs(c,b,function(b,d,f){f.b(' <span class="attachment-thumbnail-preview-service-logo ');f.b(f.v(f.f("previewClass",b,d,0)));f.b('"></span> ')}),c.pop());this.b(' </a> <p class="attachment-thumbnail-details ');this.s(this.f("canUseViewer",c,b,1),c,b,0,863,878,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" js-open-viewer")}),c.pop());this.b('"> <a href="');this.b(this.v(this.f("url",c,b,0)));this.b('" class="attachment-thumbnail-details-title js-attachment-thumbnail-details ');this.s(this.f("canUseViewer",
c,b,1),c,b,1,0,0,"")||this.b(" js-real-link");this.b(' " ');this.s(this.f("idName",c,b,1),c,b,0,1051,1067,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' id="');f.b(f.v(f.f("idName",b,d,0)));f.b('"')}),c.pop());this.b(' title="');this.b(this.v(this.f("name",c,b,0)));this.b('" target="_blank"> ');this.b(this.v(this.f("name",c,b,0)));this.b(" ");this.s(this.f("date",c,b,1),c,b,0,1131,1210,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<span class="block quiet">Added <span class="date" dt="');f.b(f.v(f.f("date",
b,d,0)));f.b('"></span></span>')}),c.pop());this.b(" ");this.s(this.f("source",c,b,1),c,b,0,1231,1255,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" <span>");f.b(f.v(f.f("source",b,d,0)));f.b("</span>")}),c.pop());this.b(' </a> <span class="quiet attachment-thumbnail-details-options"> <a class="attachment-thumbnail-details-options-item dark-hover');this.s(this.f("doDownload",c,b,1),c,b,0,1407,1419,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" js-download")}),c.pop());this.b('" href="');this.b(this.v(this.f("url",
c,b,0)));this.b('" target="_blank" ');this.s(this.f("doDownload",c,b,1),c,b,0,1482,1501,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('download="');f.b(f.v(f.f("name",b,d,0)));f.b('"')}),c.pop());this.b(' > <span class="icon-sm icon-');this.b(this.v(this.f("openIconClass",c,b,0)));this.b('"></span> <span class="attachment-thumbnail-details-options-item-text">');this.b(this.v(this.f("openText",c,b,0)));this.b("</span> </a> ");this.s(this.f("__ed",c,b,1),c,b,0,1667,2370,"{{ }}")&&(this.rs(c,b,function(b,
d,f){f.b(' <a href="#" class="attachment-thumbnail-details-options-item dark-hover hide js-make-cover"> <span class="icon-sm icon-cover"></span> <span class="attachment-thumbnail-details-options-item-text">Make Cover</span> </a> <a href="#" class="attachment-thumbnail-details-options-item dark-hover hide js-remove-cover"> <span class="icon-sm icon-cover"></span> <span class="attachment-thumbnail-details-options-item-text">Remove Cover</span> </a> <a href="#" class="attachment-thumbnail-details-options-item attachment-thumbnail-details-options-item-delete dark-hover js-confirm-delete"> <span class="icon-sm icon-close"></span> <span class="attachment-thumbnail-details-options-item-text">Delete</span> </a> ')}),
c.pop());this.b(" </span> </p> ");return this.fl()},attachment_thumb_processing:function(c,b,d){this.b(d||"");this.b('<div class="attachment-thumbnail attachment-thumbnail-processing js-attachment-thumb-processing"> <span class="spinner small"></span> Processing\u2026 </div> ');return this.fl()},attachment_type_picker:function(c,b,d){this.b(d=d||"");this.b('<div class="error js-file-too-large" style="margin: 12px 0 6px; display:none;"> ');this.s(this.f("hasLargeAttachments",c,b,1),c,b,0,104,145,"{{ }}")&&
(this.rs(c,b,function(b,d,f){f.b(" That file size exceeds the 250MB limit. ")}),c.pop());this.b(" ");this.s(this.f("hasLargeAttachments",c,b,1),c,b,1,0,0,"")||this.b(' <div class="gold-promo js-gold-promo"> That file size exceeds the 10MB limit, but if you upgrade to <span class="icon-sm icon-crown icon-color"></span> <a href="/gold">Trello Gold</a>, you can upload files up to 250MB! </div> ');this.b(' </div> <ul class="pop-over-list"> <li class="uploader"> <a class="js-trello-attachment fakefile js-fakefile" href="#">Computer</a> <form class="realfile" action="/1/card/');
this.b(this.v(this.f("id",c,b,0)));this.b('/attachments" method="post" enctype="multipart/form-data"> <input type="hidden" name="token" value="" /> <input type="hidden" name="format" value="http" /> <input type="file" name="file" class="js-attach-file" tabindex="-1" multiple=""/> </form> </li> <li> <a class="js-google-drive-attachment ');this.s(this.f("googleDriveReady",c,b,1),c,b,1,0,0,"")||this.b("disabled");this.b('" href="#">Google Drive</a> </li> <li> <a class="js-dropbox-attachment" href="#">Dropbox</a> </li> <li> <a class="js-box-attachment" href="#">Box</a> </li> <li> <a class="js-one-drive-attachment" href="#">OneDrive</a> </li> </ul> <hr> <label for="addLink">Attach a link</label> <input type="text" id="addLink" class="attachment-add-link-input js-attachment-url" placeholder="Paste any link here\u2026"> <input type="submit" class="attachment-add-link-submit js-add-attachment-url" value="Add"> <hr> <p class="quiet bottom"> Tip: You can drag and drop files and links onto cards to upload them. </p> ');
return this.fl()},attachment_viewer:function(c,b,d){this.b(d||"");this.b('<div class="attachment-viewer-header js-close-viewer"> <span class="icon-lg icon-close attachment-viewer-header-close-icon"></span> </div> <div class="attachment-viewer-underlay js-close-viewer"></div> <div class="attachment-viewer-frames js-frames"></div> <div class="attachment-viewer-overlay"> <div class="attachment-viewer-frame-details js-display-frame-details"></div> </div> <a class="attachment-viewer-next-frame-btn js-show-next-frame"> <span class="icon-lg icon-rightarrow light attachment-viewer-next-frame-btn-icon"></span> </a> <a class="attachment-viewer-prev-frame-btn js-show-prev-frame"> <span class="icon-lg icon-leftarrow light attachment-viewer-prev-frame-btn-icon"></span> </a> ');
return this.fl()},attachment_viewer_frame:function(c,b,d){this.b(d=d||"");this.b('<div class="attachment-viewer-frame js-close-viewer ');this.b(this.v(this.f("directionClass",c,b,0)));this.b('" data-idAttachment="');this.b(this.v(this.f("id",c,b,0)));this.b('"> <div class="attachment-viewer-frame-preview-wrapper"> <div class="attachment-viewer-frame-preview');this.s(this.f("isImage",c,b,1),c,b,0,209,255,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" attachment-viewer-frame-preview-image-wrapper")}),
c.pop());this.b('"> ');this.s(this.f("isImage",c,b,1),c,b,0,282,372,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <img class="attachment-viewer-frame-preview-image js-stop" src="');f.b(f.v(f.f("url",b,d,0)));f.b('" alt="');f.b(f.v(f.f("name",b,d,0)));f.b('"> ')}),c.pop());this.b(" ");this.s(this.f("isAudio",c,b,1),c,b,0,397,538,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <audio controls name="');f.b(f.v(f.f("name",b,d,0)));f.b('" class="attachment-viewer-frame-preview-audio js-stop"> <source src="');
f.b(f.v(f.f("url",b,d,0)));f.b('" type="audio/');f.b(f.v(f.f("ext",b,d,0)));f.b('"> </audio> ')}),c.pop());this.b(" ");this.s(this.f("isVideo",c,b,1),c,b,0,563,674,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <video controls name="');f.b(f.v(f.f("name",b,d,0)));f.b('" src="');f.b(f.v(f.f("url",b,d,0)));f.b('" class="attachment-viewer-frame-preview-video js-stop"> </video> ')}),c.pop());this.b(" ");this.s(this.f("isIFrameable",c,b,1),c,b,0,704,792,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <iframe class="attachment-viewer-frame-preview-iframe js-stop" src="');
f.b(f.v(f.f("url",b,d,0)));f.b('"></iframe> ')}),c.pop());this.b(" ");this.s(this.f("isPlaceholder",c,b,1),c,b,0,828,1062,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <p class="attachment-viewer-frame-preview-placeholder"> There is no preview available for this attachment. <a href="');f.b(f.v(f.f("url",b,d,0)));f.b('" class="attachment-viewer-frame-preview-placeholder-link js-real-link" target="_blank">');f.b(f.v(f.f("openText",b,d,0)));f.b("</a> </p> ")}),c.pop());this.b(" </div> </div> </div> ");
return this.fl()},attachment_viewer_frame_details:function(c,b,d){this.b(d=d||"");this.b('<div class="attachment-viewer-frame-details"> <h2 class="attachment-viewer-frame-details-title">');this.b(this.v(this.f("name",c,b,0)));this.b("</h2> <p> ");this.s(this.f("date",c,b,1),c,b,0,123,169,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('Added <span class="date" dt="');f.b(f.v(f.f("date",b,d,0)));f.b('"></span>')}),c.pop());this.b(" ");this.s(this.f("meta",c,b,1),c,b,0,188,199,"{{ }}")&&(this.rs(c,b,function(b,
d,f){f.b(" - ");f.b(f.v(f.f("meta",b,d,0)))}),c.pop());this.b(' </p> <p> <span class="js-meta"> <a href="');this.b(this.v(this.f("url",c,b,0)));this.b('" target="_blank" ');this.s(this.f("doDownload",c,b,1),c,b,0,290,309,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('download="');f.b(f.v(f.f("name",b,d,0)));f.b('"')}),c.pop());this.b(' > <span class="icon-sm icon-');this.b(this.v(this.f("openIconClass",c,b,0)));this.b(' light" style="margin: 0 3px 0 0"></span>');this.b(this.v(this.f("openText",c,b,0)));
this.b(" </a> ");this.s(this.f("__ed",c,b,1),c,b,0,438,1045,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="js-cover-options');f.s(f.f("canMakeCover",b,d,1),b,d,1,0,0,"")||f.b(" hide");f.b('"> <span class="js-make-cover-box');f.s(f.f("isCover",b,d,1),b,d,0,552,557,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" hide")}),b.pop());f.b('"><a href="#" class="js-make-cover"><span class="icon-sm icon-cover light" style="margin: 0 3px 0 14px"></span>Make Cover</a></span> <span class="js-remove-cover-box');
f.s(f.f("isCover",b,d,1),b,d,1,0,0,"")||f.b(" hide");f.b('"><a href="#" class="js-remove-cover"><span class="icon-sm icon-cover light" style="margin: 0 3px 0 14px"></span>Remove Cover</a></span> </span> <a href="#" class="js-open-delete-confirm"><span class="icon-sm icon-close light" style="margin: 0 3px 0 10px"></span>');f.b(f.v(f.f("removeText",b,d,0)));f.b("</a> ")}),c.pop());this.b(' </span> <span class="js-confirm-delete hide"> Are you sure you want to <span class="lowercase">');this.b(this.v(this.f("removeText",
c,b,0)));this.b('</span>? There is no undo. <a href="#" class="js-delete" style="margin: 0 4px;">');this.b(this.v(this.f("removeText",c,b,0)));this.b(' forever.</a> <a href="#" class="js-close-delete-confirm">Never mind.</a> </span> </p> </div> ');return this.fl()},avatar_change:function(c,b,d){this.b(d=d||"");this.s(this.f("uploadedAvatarHash",c,b,1),c,b,0,23,300,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <a class="avatar-option js-use-uploaded-avatar ');f.s(f.f("avatarSource_upload",b,d,1),b,
d,0,95,101,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b("active")}),b.pop());f.b('" href="#"> <img class="pic" src="');f.b(f.v(f.f("__avatarDomain",b,d,0)));f.b("/");f.b(f.v(f.f("uploadedAvatarHash",b,d,0)));f.b('/50.png"> <span class="text"> Uploaded Picture <span class="icon-sm icon-check"/> </span> </a> <hr> ')}),c.pop());this.b(' <div class="js-grav hide"> <a class="avatar-option js-use-gravatar ');this.s(this.f("avatarSource_gravatar",c,b,1),c,b,0,417,423,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("active")}),
c.pop());this.b('" href="#"> <img class="pic" src="https://secure.gravatar.com/avatar/');this.b(this.v(this.f("gravatarHash",c,b,0)));this.b('.png?s=50&r=PG&d=404"> <span class="text"> Gravatar <span class="icon-sm icon-check"/> </span> </a> <hr> </div> <a class="avatar-option js-no-avatar ');this.s(this.f("avatarSource_none",c,b,1),c,b,0,705,711,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("active")}),c.pop());this.b('" href="#"> <span class="pic member"> <span class="member-initials">');this.b(this.v(this.f("initials",
c,b,0)));this.b('</span> </span> <span class="text"> Initials (no avatar) <span class="icon-sm icon-check"/> </span> </a> <hr> ');this.s(this.f("canTakePhoto",c,b,1),c,b,0,940,1094,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <a class="button-link js-take-photo" href="#" style="margin: 12px 4px 12px;"> <span class="icon-sm icon-camera"></span> Take Photo With Camera </a> <hr> ')}),c.pop());this.b(' <p class="error hide js-error"></p> <div class="uploader" style="margin: 12px 4px 8px;"> <form class="realfile" action="/1/member/');
this.b(this.v(this.f("id",c,b,0)));this.b('/avatar" method="post" enctype="multipart/form-data"> <input type="hidden" name="token" value="" /> <input type="hidden" name="format" value="http" /> <input type="file" name="file" class="js-upload-avatar" style="margin-bottom: 0;" tabindex="-1" accept="image/*;capture=camera"/> </form> <a class="button-link fakefile js-fakefile"> <span class="icon-sm icon-attachment"></span> Upload a ');this.s(this.f("uploadedAvatarHash",c,b,1),c,b,0,1660,1665,"{{ }}")&&
(this.rs(c,b,function(b,d,f){f.b(" new ")}),c.pop());this.b(" picture </a> </div> ");return this.fl()},badge:function(c,b,d){this.b(d=d||"");this.b('<span class="badge-icon icon-sm icon-');this.b(this.v(this.f("icon",c,b,0)));this.b('"></span> ');this.s(this.f("text",c,b,1),c,b,0,64,104,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<span class="badge-text">');f.b(f.v(f.f("text",b,d,0)));f.b("</span>")}),c.pop());this.b(" ");return this.fl()},billing:function(c,b,d){this.b(d=d||"");this.b('<div class="window-module gutter"> ');
this.s(this.f("activeAccount",c,b,1),c,b,0,53,812,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("problemAccount",b,d,1),b,d,1,0,0,"")||(f.b(' <p class="bc-active-status active'),f.s(f.f("processingAccount",b,d,1),b,d,0,129,137,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" warning")}),b.pop()),f.b('"> <span class="icon-lg icon-'),f.b(f.v(f.f("productIconClass",b,d,0))),f.b('"/>'),f.b(f.v(f.f("productName",b,d,0))),f.b(" is "),f.s(f.f("processingAccount",b,d,1),b,d,0,252,258,"{{ }}")&&(f.rs(b,
d,function(b,d,e){e.b("ALMOST")}),b.pop()),f.b(" active! </p> "),f.s(f.f("processingAccount",b,d,1),b,d,0,316,400,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b('<p class="quiet" style="margin-left: 46px;">Your credit card is being processed.</p>')}),b.pop()),f.b(" "));f.b(" ");f.s(f.f("problemAccount",b,d,1),b,d,0,462,792,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <p class="bc-active-status error"> <span class="icon-lg icon-');e.b(e.v(e.f("productIconClass",b,d,0)));e.b("\"/>There's an issue with ");e.b(e.v(e.f("productName",
b,d,0)));e.b('! </p> <a class="emphasis-button js-resolve-billing-issue" href="');e.b(e.v(e.f("urlBase",b,d,0)));e.b('/billing/card">You are overdue and we are having trouble processing your credit card. Enter a credit card to resolve the issue.</a> ')}),b.pop());f.b(" ")}),c.pop());this.b(" ");this.s(this.f("cancelledAccount",c,b,1),c,b,0,852,1270,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("processingReactivation",b,d,1),b,d,1,0,0,"")||(f.b(' <p class="bc-active-status error"> <span class="icon-lg icon-'),
f.b(f.v(f.f("productIconClass",b,d,0))),f.b('"/>'),f.b(f.v(f.f("productName",b,d,0))),f.b(" is cancelled. </p> "));f.b(" ");f.s(f.f("processingReactivation",b,d,1),b,d,0,1055,1242,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <p class="bc-active-status warning"> <span class="icon-lg icon-');e.b(e.v(e.f("productIconClass",b,d,0)));e.b('"/>Your account is being processed for reactivation. </p> <p class="quiet center">Check back soon!</p> ')}),b.pop());f.b(" ")}),c.pop());this.b(" ");this.s(this.f("needCC",
c,b,1),c,b,0,1303,1561,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <p class="bc-active-status error"> <span class="icon-lg icon-');f.b(f.v(f.f("productIconClass",b,d,0)));f.b('"/>');f.b(f.v(f.f("productName",b,d,0)));f.b(' is NOT active! </p> <a class="emphasis-button js-enter-new-credit-card" href="');f.b(f.v(f.f("urlBase",b,d,0)));f.b('/billing/card">Enter a credit card to activate ');f.b(f.v(f.f("productName",b,d,0)));f.b(".</a> ")}),c.pop());this.b(" </div> ");this.s(this.f("activeAccount",c,
b,1),c,b,0,1598,3447,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="window-module center"> <div class="gutter"> ');f.s(f.f("willExpire",b,d,1),b,d,1,0,0,"")||(f.b(" "),f.s(f.f("paidAccount_cardType",b,d,1),b,d,0,1696,2612,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" ");e.s(e.f("nextChargeAmount",b,d,1),b,d,0,1718,2037,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b(" ");e.s(e.f("nextBillingDate",b,d,1),b,d,0,1739,2016,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b(' <p class="next-charge"> You will be billed ');
e.s(e.f("isPerUser",b,d,1),b,d,0,1797,1886,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b(" <strong>$");e.b(e.v(e.f("nextChargeAmount",b,d,0)));e.b("</strong> ($");e.b(e.v(e.f("price",b,d,0)));e.b(" per ");e.b(e.v(e.f("billableMemberCount",b,d,0)));e.b(" members) ")}),b.pop());e.b(" ");e.s(e.f("isPerUser",b,d,1),b,d,1,0,0,"")||(e.b(" <strong>$"),e.b(e.v(e.f("nextChargeAmount",b,d,0))),e.b("</strong> "));e.b(" on <strong>");e.b(e.v(e.f("nextBillingDate",b,d,0)));e.b("</strong>. </p> ")}),b.pop());e.b(" ")}),
b.pop());e.b(" ");e.s(e.f("canSwitchToYearly",b,d,1),b,d,0,2081,2589,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b(" ");e.s(e.f("yearlyIsDiscount",b,d,1),b,d,0,2103,2567,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b(' <p> <a href="#" class="button-link inline-block js-switch-to-yearly-billing" style="padding-left: 24px; padding-right: 24px;"> Switch to Yearly Billing! </a> </p> <p> Yearly billing will be ');e.s(e.f("isPerUser",b,d,1),b,d,0,2308,2403,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b(" <strong>$");e.b(e.v(e.f("totalYearlyPrice",
b,d,0)));e.b("</strong> ($");e.b(e.v(e.f("yearlyPrice",b,d,0)));e.b(" per ");e.b(e.v(e.f("billableMemberCount",b,d,0)));e.b(" members) ")}),b.pop());e.b(" ");e.s(e.f("isPerUser",b,d,1),b,d,1,0,0,"")||(e.b(" <strong>$"),e.b(e.v(e.f("totalYearlyPrice",b,d,0))),e.b("</strong> "));e.b(" per year. <br> That\u2019s ");e.b(e.v(e.f("yearlyDiscount",b,d,0)));e.b(" less compared to monthly billing! </p> ")}),b.pop());e.b(" ")}),b.pop());e.b(" ")}),b.pop()),f.b(" "),f.s(f.f("paidAccount_cardType",b,d,1),b,d,
1,0,0,"")||(f.b(' <p class="next-charge"> Your credits will expire on <strong>'),f.b(f.v(f.f("nextBillingDate",b,d,0))),f.b('</strong>. </p> <p> <a href="'),f.b(f.v(f.f("changeCardUrl",b,d,0))),f.b('" class="button-link inline-block js-change-cc" style="padding-left: 24px; padding-right: 24px;"> Add Billing Information </a> </p> <p> Keep using Trello in style, even after your credits expire! </p> ')),f.b(" "));f.b(" ");f.s(f.f("willExpire",b,d,1),b,d,0,3047,3417,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <p class="quiet"> You\'ve cancelled ');
e.b(e.v(e.f("productName",b,d,0)));e.b(", but you can use the premium features until <strong>");e.b(e.v(e.f("expirationDate",b,d,0)));e.b('</strong>. </p> <p> <a href="#" class="button-link inline-block js-renew" style="padding-left: 24px; padding-right: 24px;"> Renew Your Subscription? </a> </p> <p class="quiet"> When you renew, you won\'t be charged until the date listed above. </p> ')}),b.pop());f.b(" </div> </div> ")}),c.pop());this.b(" ");this.s(this.f("cancelledAccount",c,b,1),c,b,0,3487,4368,
"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("processingReactivation",b,d,1),b,d,1,0,0,"")||(f.b(' <div class="window-module"> <div class="window-module-title"> <h3>Reactivate '),f.b(f.v(f.f("productName",b,d,0))),f.b('</h3> </div> <div class="gutter"> <div class="billing-option-buttons clearfix"> <a href="#" class="js-reactivate-monthly"> <span class="name">Charge Monthly</span> <span class="price"> '),f.s(f.f("isPerUser",b,d,1),b,d,0,3807,3904,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" <strong>$");
e.b(e.v(e.f("totalMonthlyPrice",b,d,0)));e.b("</strong> ($");e.b(e.v(e.f("monthlyPrice",b,d,0)));e.b(" per ");e.b(e.v(e.f("billableMemberCount",b,d,0)));e.b(" members) ")}),b.pop()),f.b(" "),f.s(f.f("isPerUser",b,d,1),b,d,1,0,0,"")||(f.b(" <strong>$"),f.b(f.v(f.f("totalMonthlyPrice",b,d,0))),f.b("</strong> ")),f.b(' </span> </a> <a href="#" class="js-reactivate-yearly"> <span class="name">Charge Yearly (Save!)</span> <span class="price"> '),f.s(f.f("isPerUser",b,d,1),b,d,0,4127,4222,"{{ }}")&&(f.rs(b,
d,function(b,d,e){e.b(" <strong>$");e.b(e.v(e.f("totalYearlyPrice",b,d,0)));e.b("</strong> ($");e.b(e.v(e.f("yearlyPrice",b,d,0)));e.b(" per ");e.b(e.v(e.f("billableMemberCount",b,d,0)));e.b(" members) ")}),b.pop()),f.b(" "),f.s(f.f("isPerUser",b,d,1),b,d,1,0,0,"")||(f.b(" <strong>$"),f.b(f.v(f.f("totalYearlyPrice",b,d,0))),f.b("</strong> ")),f.b(" </span> </a> </div> </div> </div> "));f.b(" ")}),c.pop());this.b(" ");this.s(this.f("paidAccount_cardType",c,b,1),c,b,0,4415,5184,"{{ }}")&&(this.rs(c,
b,function(b,d,f){f.b(' <div class="window-module"> <div class="window-module-title"> <h3>Billing Contact</h3> </div> <div class="gutter"> <p> ');f.b(f.v(f.f("paidAccount_contactFullName",b,d,0)));f.b(" - ");f.b(f.v(f.f("paidAccount_contactEmail",b,d,0)));f.b(' <a class="quiet js-change-billing-contact" href="#" style="margin-left: 8px;">Change</a> </p> </div> </div> ');f.s(f.f("activeAccount",b,d,1),b,d,0,4724,5165,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <div class="window-module"> <div class="window-module-title"> <h3 class="inline">Payment Method</h3> <p class="inline quiet" style="margin-left: 4px;"> Account standing: ');
e.b(e.v(e.f("accountStandingDisplay",b,d,0)));e.b(' </p> </div> <div class="gutter"> <p> ');e.b(e.v(e.f("paidAccount_cardType",b,d,0)));e.b("<br /> ");e.b(e.v(e.f("paidAccount_cardName",b,d,0)));e.b("<br /> \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 ");e.b(e.v(e.f("paidAccount_cardLast4",b,d,0)));e.b('<br /> <a class="quiet js-change-cc" href="');e.b(e.v(e.f("changeCardUrl",b,d,0)));e.b('">Change credit card</a> </p> </div> </div> ')}),b.pop());f.b(" ")}),c.pop());
this.b(' <div class="window-module"> <div class="window-module-title"> <h3>Billing History</h3> </div> <div id="billing-statement" class="gutter js-billing-activity"> <div class="spinner loading" /> </div> </div> ');this.s(this.f("activeAccount",c,b,1),c,b,0,5432,7132,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("willExpire",b,d,1),b,d,1,0,0,"")||(f.b(' <div class="window-module gutter"> <a href="#" class="quiet dark-hover js-start-cancel"><span class="icon-sm icon-close"/>Cancel '),f.b(f.v(f.f("productName",
b,d,0))),f.b('\u2026</a> <div class="js-cancel-feedback hide"> <p> Thanks for trying '),f.b(f.v(f.f("productName",b,d,0))),f.b(". We're sorry to see you go. </p> <p>Clicking the button below will cancel your subscription and you will not be billed again. Of course, we'll keep your data safe and your account will remain usable. If you'd like, you can reinstate "),f.b(f.v(f.f("productName",b,d,0))),f.b(" at any time by re-entering your credit card information. </p> <p> We're working hard to make Trello better every day and would really appreciate any feedback you have on "),
f.b(f.v(f.f("productName",b,d,0))),f.b('. </p> <p> <b>Please let us know why you are cancelling\u2026</b> </p> <div class="js-random-reasons"> <label><input name="why" type="radio" value="missing functionality"> It\'s missing functionality </label> <label><input name="why" type="radio" value="not using it"> I\'m not using it </label> <label><input name="why" type="radio" value="too expensive"> It\'s too expensive </label> </div> <label><input name="why" type="radio" value="other"> Other </label> <textarea class="js-long-feedback hide" placeholder="Tell us more\u2026"></textarea> <div> <input type="submit" class="button js-cancel" value="Cancel '),
f.b(f.v(f.f("productName",b,d,0))),f.b('"> <a href="#" class="quiet js-cancel-cancel">Never Mind</a> </div> </div> <div class="js-cancelled hide"> <p> <b>Your '),f.b(f.v(f.f("productName",b,d,0))),f.b(" subscription has been cancelled.</b> </p> <p> We'll keep your data safe and your account will remain usable. If you'd like, you can reinstate "),f.b(f.v(f.f("productName",b,d,0))),f.b(" at any time by re-entering your credit card information. </p> <p>-The Trello Team</p> </div> </div> "));f.b(" ")}),
c.pop());this.b(" ");return this.fl()},billing_contact:function(c,b,d){this.b(d||"");this.b('<div class="error" style="display:hidden"></div> <form> <label for="billingContactFullName">Name:</label> <input name="billingContactFullName" type="text" id="billingContactFullName" class="text" value="');this.b(this.v(this.f("billingFullName",c,b,0)));this.b('" maxlength="50"> <label for="billingContactEmail">Email:</label> <input name="billingContactEmail" type="text" id="billingContactEmail" class="text" value="');
this.b(this.v(this.f("billingEmail",c,b,0)));this.b('"> <input type="submit" value="Save" class="primary js-submit"> </form> ');return this.fl()},billing_statement:function(c,b,d){this.b(d=d||"");this.s(this.f("statement",c,b,1),c,b,0,14,652,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" <div> <p> <strong>");f.b(f.v(f.f("date",b,d,0)));f.b("</strong> - ");f.b(f.v(f.f("item",b,d,0)));f.b(' </p> <p style="text-align:right;"> ');f.s(f.f("return",b,d,1),b,d,0,108,252,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" Credited: $");
e.b(e.v(e.f("return",b,d,0)));e.b(" ");e.s(e.f("statementUrl",b,d,1),b,d,0,148,234,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b('- <a href="');e.b(e.v(e.f("statementUrl",b,d,0)));e.b('" class="js-view-statement-pdf" target="_blank">Receipt</a>')}),b.pop());e.b(" ")}),b.pop());f.b(" ");f.s(f.f("credit",b,d,1),b,d,0,275,415,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" Paid: $");e.b(e.v(e.f("credit",b,d,0)));e.b(" ");e.s(e.f("statementUrl",b,d,1),b,d,0,311,397,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b('- <a href="');
e.b(e.v(e.f("statementUrl",b,d,0)));e.b('" class="js-view-statement-pdf" target="_blank">Receipt</a>')}),b.pop());e.b(" ")}),b.pop());f.b(" ");f.s(f.f("debit",b,d,1),b,d,0,437,578,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" Billed: $");e.b(e.v(e.f("debit",b,d,0)));e.b(" ");e.s(e.f("statementUrl",b,d,1),b,d,0,474,560,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b('- <a href="');e.b(e.v(e.f("statementUrl",b,d,0)));e.b('" class="js-view-statement-pdf" target="_blank">Invoice</a>')}),b.pop());e.b(" ")}),b.pop());
f.b(" ");f.s(f.f("refund",b,d,1),b,d,0,600,623,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" Refunded: $");e.b(e.v(e.f("refund",b,d,0)));e.b(" ")}),b.pop());f.b(" </p> </div> <hr> ")}),c.pop());this.b(" ");return this.fl()},board:function(c,b,d){this.b(d=d||"");this.b('<div class="board-header clearfix js-board-header"></div> <a href="#" class="sidebar-show-btn dark-hover js-show-sidebar"> <span class="icon-sm icon-leftarrow"/> <span class="text">Show sidebar</span> </a> <div class="board-widgets"></div> <div class="board-canvas"> <div id="board" class="fancy-scrollbar js-no-higher-edits');
this.s(this.f("__ed",c,b,1),c,b,1,0,0,"")||this.b(" permission-public");this.b(" ");this.s(this.f("__ed",c,b,1),c,b,0,370,388,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" js-list-sortable ")}),c.pop());this.b('"> </div> </div> ');return this.fl()},board_activity:function(c,b,d){this.b(d||"");this.b('<div class="window-header clearfix"> <span class="window-header-icon icon-lg icon-activity"/> <div class="window-title"> <h2 class="window-title-text"> Board Activity </h2> </div> </div> <div class="window-main-col"> <div class="list-activity"></div> <a class="show-more js-more-actions" href="#">Load More Activity</a> </div> ');
return this.fl()},board_archive:function(c,b,d){this.b(d||"");this.b('<div class="archive-controls clearfix"> <div class="archive-search search-with-spinner"> <input class="js-search js-autofocus" type="text" placeholder="Search archived cards"> <div class="spinner small hide js-search-loading"></div> </div> <a class="archive-switch quiet-button js-switch-section" href="#">Switch to <span class="js-new-section"></span>.</a> </div> <div class="js-archive-content"> ');this.b(this.t(this.f("content",
c,b,0)));this.b(" </div> ");return this.fl()},board_background_options:function(c,b,d){this.b(d=d||"");this.b('<p class="bold quiet">Display Type</p> <ul class="pop-over-list"> <li> <a href="#" class="js-select-option" data-background-display-type="cover"> Cover ');this.s(this.f("tile",c,b,1),c,b,1,0,0,"")||this.b(' <span class="icon-sm icon-check"></span> ');this.b(' </a> </li> <li> <a href="#" class="js-select-option" data-background-display-type="tile"> Tile ');this.s(this.f("tile",c,b,1),c,b,
0,317,359,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="icon-sm icon-check"></span> ')}),c.pop());this.b(' </a> </li> </ul> <hr> <p class="bold quiet">Board Text</p> <ul class="pop-over-list"> <li> <a href="#" class="js-select-option" data-board-brightness="dark"> Light ');this.s(this.f("brightnessDark",c,b,1),c,b,0,552,594,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="icon-sm icon-check"></span> ')}),c.pop());this.b(' </a> </li> <li> <a href="#" class="js-select-option" data-board-brightness="light"> Dark ');
this.s(this.f("brightnessLight",c,b,1),c,b,0,723,765,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="icon-sm icon-check"></span> ')}),c.pop());this.b(' </a> </li> </ul> <hr> <a href="#" class="quiet-button js-delete-background">Delete background.</a> ');return this.fl()},board_background_selection:function(c,b,d){this.b(d=d||"");this.b('<span class="background-box ');this.s(this.f("pending",c,b,1),c,b,0,40,67,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("background-box-unselectable")}),c.pop());
this.s(this.f("tile",c,b,1),c,b,0,88,104,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" background-tile")}),c.pop());this.b('" style=" ');this.s(this.f("backgroundImageThumbnail",c,b,1),c,b,0,152,215,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("background-image: url(&quot;");f.b(f.v(f.f("backgroundImageThumbnail",b,d,0)));f.b("&quot;)")}),c.pop());this.b("; ");this.s(this.f("color",c,b,1),c,b,0,256,284,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("background-color: ");f.b(f.v(f.f("color",b,d,0)));f.b(";")}),
c.pop());this.b(' "> ');this.s(this.f("attribution",c,b,1),c,b,0,314,662,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <a class="background-option js-background-attribution" href="');f.b(f.v(f.f("url",b,d,0)));f.b('" target="_blank" title="');f.b(f.v(f.f("url",b,d,0)));f.b('"> <img src="https://d78fikflryjgj.cloudfront.net/images/d906fe5c1274c56c5571d49705547587/cc.png" style="height: 14px; width: 14px; vertical-align: text-top;" title="');f.b(f.v(f.f("license",b,d,0)));f.b('"/> <span class="text" style="margin-left: 2px;">');
f.b(f.v(f.f("name",b,d,0)));f.b("</span> </a> ")}),c.pop());this.b(" ");this.s(this.f("id",c,b,1),c,b,0,686,845,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <a class="background-option js-options"> <span class="icon-sm icon-menu light" style="vertical-align: bottom;"></span> <span class="text">Options</span> </a> ')}),c.pop());this.b(" ");this.s(this.f("error",c,b,1),c,b,0,863,939,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="background-info"> <span class="text">');f.b(f.v(f.f("error",
b,d,0)));f.b("</span> </span> ")}),c.pop());this.b(" ");this.s(this.f("pending",c,b,1),c,b,0,962,1107,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="background-info"> <span class="spinner small left" style="margin-right: 4px;"></span> <span class="text">Uploading\u2026</span> </span> ')}),c.pop());this.b(" </span> ");return this.fl()},board_change_background:function(c,b,d){this.b(d||"");this.b('<div class="board-backgrounds-list clearfix js-default-list"></div> <h2 class="clear">Photos</h2> <div class="board-backgrounds-list relative clearfix js-gold-photos-list');
this.s(this.f("enabled_additionalBackgrounds",c,b,1),c,b,1,0,0,"")||this.b(" disabled");this.b('"></div> <h2 class="clear">Patterns and Textures</h2> <div class="board-backgrounds-list relative clearfix js-gold-patterns-list');this.s(this.f("enabled_additionalBackgrounds",c,b,1),c,b,1,0,0,"")||this.b(" disabled");this.b('"></div> <h2 class="clear">Custom</h2> <div class="board-backgrounds-list relative clearfix js-custom-list');this.s(this.f("enabled_customBoardBackgrounds",c,b,1),c,b,1,0,0,"")||
this.b(" disabled");this.b('"> <div class="board-background-select board-background-select-upload js-uploader"> <form action="/1/member/');this.b(this.v(this.f("idMember",c,b,0)));this.b('/customBoardBackgrounds" method="post" enctype="multipart/form-data"> <input type="hidden" name="token" value="" /> <input type="hidden" name="format" value="http" /> <span class="background-box"> <span class="icon-lg icon-add"></span> </span> <input type="file" name="file" class="upload-background js-upload-image" multiple="multiple" accept="image/*" /> </form> </div> </div> ');
return this.fl()},board_closed:function(c,b,d){this.b(d=d||"");this.b('<div class="big-message quiet"> <h1> ');this.b(this.v(this.f("name",c,b,0)));this.b(" is closed. </h1> ");this.s(this.f("__own",c,b,1),c,b,0,73,145,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <p> <a href="#" class="js-reopen"> Click here to re-open it. </a> </p> ')}),c.pop());this.b(" ");this.s(this.f("__own",c,b,1),c,b,1,0,0,"")||(this.b(" "),this.s(this.f("__ed",c,b,1),c,b,0,176,263,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" <p> You\u2019re a member of this board, but only board admins are able to re-open it. </p> ")}),
c.pop()),this.b(" "));this.b(" </div> ");return this.fl()},board_desc:function(c,b,d){this.b(d=d||"");this.b('<div class="window-header clearfix"> <span class="window-header-icon icon-lg icon-board"/> <div class="window-title non-empty inline ');this.s(this.f("__own",c,b,1),c,b,0,143,153,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" editable ")}),c.pop());this.b(' " attr="name"> <h2 class="window-title-text current hide-on-edit"> ');this.b(this.v(this.f("name",c,b,0)));this.b(" </h2> ");this.s(this.f("__own",
c,b,1),c,b,0,256,529,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" <p class=\"edits-warning quiet\">You have unsaved edits on this field. <a href='#' class='js-view-edits'>View edits</a> or <a href='#' class='js-discard-edits'>discard</a>.</p> <div class=\"edit edit-heavy\"> <textarea type=\"text\" class=\"field single-line\"></textarea> </div> ")}),c.pop());this.b(' </div> </div> <div class="window-main-col"> <div class="board-description clearfix');this.s(this.f("__ed",c,b,1),c,b,0,631,640,"{{ }}")&&
(this.rs(c,b,function(b,d,f){f.b(" editable")}),c.pop());this.b('" attr="desc"> <div class="current markeddown hide-on-edit bottom"> ');this.s(this.f("hasDesc",c,b,1),c,b,1,0,0,"")||(this.b(' <p class="bottom"> '),this.s(this.f("__ed",c,b,1),c,b,0,758,850,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<a class=\'quiet empty\' style="padding: 100px 0;" href="#">No description. Click to edit.</a>')}),c.pop()),this.b(" "),this.s(this.f("__ed",c,b,1),c,b,1,0,0,"")||this.b("<span class='quiet empty' style=\"padding: 100px 0;\">No description.</span>"),
this.b(" </p> "));this.b(" </div> ");this.s(this.f("__ed",c,b,1),c,b,0,987,1540,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("hasDesc",b,d,1),b,d,0,1E3,1155,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <p class="bottom js-edit-desc"> <a class="quiet-button hide-on-edit w-img" href="#"><span class="icon-sm icon-edit"/>Edit the board description.</a> </p> ')}),b.pop());f.b(' <p class="edits-warning quiet">You have unsaved edits on this field. <a href=\'#\' class=\'js-view-edits\'>View edits</a> or <a href=\'#\' class=\'js-discard-edits\'>discard</a>.</p> <div class="board-description-edit edit"> <p class="helper"><a href="http://daringfireball.net/projects/markdown/syntax" target="_blank">Markdown</a> accepted</p> <textarea class="field" /> </div> ')}),
c.pop());this.b(" </div> </div> ");return this.fl()},board_header:function(c,b,d){this.b(d=d||"");this.b('<a href="#" class="board-header-btn board-header-btn-name');this.s(this.f("canRename",c,b,1),c,b,0,71,87,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" js-rename-board")}),c.pop());this.s(this.f("canRename",c,b,1),c,b,1,0,0,"")||this.b(" no-edit");this.s(this.f("orgLogoUrl",c,b,1),c,b,0,152,188,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" board-header-btn-name-with-org-logo")}),c.pop());this.b('" ');
this.s(this.f("canRename",c,b,1),c,b,0,219,245,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' title="Rename the board."')}),c.pop());this.b("> ");this.s(this.f("orgLogoUrl",c,b,1),c,b,0,276,373,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <img class="board-header-btn-name-org-logo" src="');f.b(f.v(f.f("orgLogoUrl",b,d,0)));f.b('" alt="');f.b(f.v(f.f("orgDisplayName",b,d,0)));f.b(' logo"> ')}),c.pop());this.b(' <span class="board-header-btn-text"> ');this.b(this.v(this.f("name",c,b,0)));this.b(" </span> </a> ");
this.s(this.f("orgDisplayName",c,b,1),c,b,0,467,899,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <a href="/');f.b(f.v(f.f("orgName",b,d,0)));f.b('" class="board-header-btn board-header-btn-org-name js-open-org-menu');f.s(f.f("hasBusinessClass",b,d,1),b,d,1,0,0,"")||f.b(" board-header-btn-without-icon");f.b('" title="This board is part of the ');f.b(f.v(f.f("orgDisplayName",b,d,0)));f.b(' organization."> ');f.s(f.f("hasBusinessClass",b,d,1),b,d,0,720,810,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b('<span class="board-header-btn-icon icon-sm icon-briefcase icon-briefcase-bc-color"></span>')}),
b.pop());f.b(' <span class="board-header-btn-text">');f.b(f.v(f.f("orgDisplayName",b,d,0)));f.b("</span> </a> ")}),c.pop());this.b(' <div class="board-header-btns left"> ');this.s(this.f("__loggedIn",c,b,1),c,b,0,971,1209,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <a href="#" class="board-header-btn js-star-board" title="Click to star or unstar this board. Starred boards show up at the top of your boards list."> <span class="board-header-btn-icon icon-sm icon-star js-star-board-icon"></span> </a> ')}),
c.pop());this.b(' <a href="#" class="board-header-btn hide js-open-desc js-fill-desc"> <span class="board-header-btn-icon icon-sm icon-desc"></span> </a> <a href="#" class="board-header-btn perms-btn js-change-vis" id="permission-level"></a> </div> <div class="board-header-btns right"> <a href="#" class="board-header-btn board-header-btn-filter-indicator hide js-filter-cards-indicator" title="You are filtering cards on this board. Click here to edit filter."> <span class="board-header-btn-icon icon-sm icon-filter"/> <span class="board-header-btn-text underline">Filtering is on.</span> <span class="board-header-btn-icon-close icon-sm icon-close js-filter-card-clear" title="Clear filter."/> </a> <div class="board-header-btn sub-btn hide js-board-header-subscribed" title="You are subscribed to this board. You\'ll get notifications about changes."> <span class="board-header-btn-icon icon-sm icon-follow"/> <span class="board-header-btn-text underline">Subscribed</span> </div> <a href="#" class="board-header-btn calendar-btn hide js-calendar" title="View all your cards with due dates in a calendar view."> <span class="board-header-btn-icon icon-sm icon-cal"/> <span class="board-header-btn-text underline">Calendar</span> </a> </div> ');
return this.fl()},board_header_permissions:function(c,b,d){this.b(d||"");this.b('<span class="board-header-btn-icon icon-sm icon-');this.b(this.v(this.f("permissionLevel",c,b,0)));this.b('"/> <span class="board-header-btn-text">');this.b(this.v(this.f("permText",c,b,0)));this.b("</span> ");return this.fl()},board_inline:function(c,b,d){this.b(d||"");this.b('<span>the board</span> <a href="');this.b(this.v(this.f("boardUrl",c,b,0)));this.b('" class="inline-object"> ');this.b(this.v(this.f("name",c,
b,0)));this.b(" </a> ");return this.fl()},board_labels:function(c,b,d){this.b(d=d||"");this.s(this.f("labelNames",c,b,1),c,b,0,15,1060,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="relative"> <div class="card-label card-label-green"></div> <input type="text" class="js-label-title" name="green" value="');f.b(f.v(f.f("green",b,d,0)));f.b('" placeholder="No name"> </div> <div class="relative"> <div class="card-label card-label-yellow"></div> <input type="text" class="js-label-title" name="yellow" value="');
f.b(f.v(f.f("yellow",b,d,0)));f.b('" placeholder="No name"> </div> <div class="relative"> <div class="card-label card-label-orange"></div> <input type="text" class="js-label-title" name="orange" value="');f.b(f.v(f.f("orange",b,d,0)));f.b('" placeholder="No name"> </div> <div class="relative"> <div class="card-label card-label-red"></div> <input type="text" class="js-label-title" name="red" value="');f.b(f.v(f.f("red",b,d,0)));f.b('" placeholder="No name"> </div> <div class="relative"> <div class="card-label card-label-purple"></div> <input type="text" class="js-label-title" name="purple" value="');
f.b(f.v(f.f("purple",b,d,0)));f.b('" placeholder="No name"> </div> <div class="relative"> <div class="card-label card-label-blue"></div> <input type="text" class="js-label-title" name="blue" value="');f.b(f.v(f.f("blue",b,d,0)));f.b('" placeholder="No name"> </div> ')}),c.pop());this.b(' <input type="submit" class="primary wide js-save" value="Save"> ');return this.fl()},board_list:function(c,b,d){this.b(d=d||"");this.b('<div class="window-module-title window-module-title-no-divider"> <span class="icon-lg window-module-title-icon icon-');
this.b(this.v(this.f("iconClass",c,b,0)));this.s(this.f("logoHash",c,b,1),c,b,0,142,155,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" custom-image")}),c.pop());this.b('"> ');this.s(this.f("logoHash",c,b,1),c,b,0,184,259,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<img src="');f.b(f.v(f.f("__logoDomain",b,d,0)));f.b("/");f.b(f.v(f.f("logoHash",b,d,0)));f.b('/30.png" alt="');f.b(f.v(f.f("displayName",b,d,0)));f.b(' logo">')}),c.pop());this.b(" </span> <h3>");this.b(this.v(this.f("title",c,b,0)));this.b("</h3> ");
this.s(this.f("hasBusinessClass",c,b,1),c,b,0,321,446,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="window-title-extra bc"> <span class="business-class-mark" title="Business Class Mark"/> Business Class </span> ')}),c.pop());this.b(" ");this.s(this.f("url",c,b,1),c,b,0,476,663,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <a class="inline-block quiet dark-hover js-view-org-profile" href="');f.b(f.v(f.f("url",b,d,0)));f.b('" style="margin: 2px 6px 0 0;"> <span class="icon-sm icon-info" style="margin-right: 2px;"></span>Overview </a> ')}),
c.pop());this.b(' </div> <ul class="board-list gutter js-board-list clearfix"></ul> ');return this.fl()},board_list_item:function(c,b,d){this.b(d=d||"");this.b('<a class="js-open-board highlight-icon ');this.s(this.f("current",c,b,1),c,b,0,51,58,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("current")}),c.pop());this.b(" ");this.s(this.f("backgroundTile",c,b,1),c,b,0,90,95,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" tile")}),c.pop());this.b(" ");this.s(this.f("backgroundBrightness",c,b,1),c,b,0,140,
165,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.b(f.v(f.f("backgroundBrightness",b,d,0)))}),c.pop());this.b('" href="');this.b(this.v(this.f("url",c,b,0)));this.b('" style=" ');this.s(this.f("backgroundImageThumbnail",c,b,1),c,b,0,244,308,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("background-image: url(&quot;");f.b(f.v(f.f("backgroundImageThumbnail",b,d,0)));f.b("&quot;);")}),c.pop());this.b(" ");this.s(this.f("backgroundColor",c,b,1),c,b,0,358,396,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("background-color: ");
f.b(f.v(f.f("backgroundColor",b,d,0)));f.b(";")}),c.pop());this.b(' " > <span class="thumbnail" style=" ');this.s(this.f("backgroundImageThumbnail",c,b,1),c,b,0,482,545,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("background-image: url(&quot;");f.b(f.v(f.f("backgroundImageThumbnail",b,d,0)));f.b("&quot;)")}),c.pop());this.b("; ");this.s(this.f("backgroundColor",c,b,1),c,b,0,596,634,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("background-color: ");f.b(f.v(f.f("backgroundColor",b,d,0)));f.b(";")}),c.pop());
this.b(' " ></span> <span class="fade"></span> <span class="details');this.s(this.f("orgname",c,b,1),c,b,0,725,738,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" has-sub-name")}),c.pop());this.b('"> <span class="board-list-item-name" title="');this.b(this.v(this.f("name",c,b,0)));this.b('">');this.b(this.v(this.f("name",c,b,0)));this.b("</span> ");this.s(this.f("orgname",c,b,1),c,b,0,833,912,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="board-list-item-sub-name" title="');f.b(f.v(f.f("orgname",
b,d,0)));f.b('">');f.b(f.v(f.f("orgname",b,d,0)));f.b("</span> ")}),c.pop());this.b(" ");this.s(this.f("__loggedIn",c,b,1),c,b,0,940,1167,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="unread-indicator js-unread" title="There is new activity on this board."></span> <span class="icon-sm icon-star js-star-board" title="Click to star this board. It will show up at top of your boards list."></span> ')}),c.pop());this.b(" </span> </a> ");return this.fl()},board_member_profile:function(c,b,d){this.b(d||
"");this.b('<div class="window-header clearfix"> <span class="window-header-icon icon-lg icon-activity"/> <h2 class="window-title"> ');this.b(this.v(this.f("fullName",c,b,0)));this.b(' <span class="quiet" style="margin-left: 3px">(');this.b(this.v(this.f("username",c,b,0)));this.b(')</span> </h2> </div> <div class="window-main-col clearfix"> <div class="list-actions"> <p class="js-board-member-profile-no-activity">This member has no board activity</p> </div> <a class="show-more js-more-actions" href="#">Load More Activity</a> </div> ');
return this.fl()},board_menu_commenting:function(c,b,d){this.b(d=d||"");this.b('<li> <a href="#" class="js-select" name="disabled"> Disabled ');this.s(this.f("comments_disabled",c,b,1),c,b,0,83,125,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="icon-sm icon-check"></span> ')}),c.pop());this.b(' <span class="sub-name"> No one is allowed to comment. </span> </a> </li> <li> <a href="#" class="js-select" name="members"> Members ');this.s(this.f("comments_members",c,b,1),c,b,0,301,337,"{{ }}")&&
(this.rs(c,b,function(b,d,f){f.b(' <span class="icon-sm icon-check"/> ')}),c.pop());this.b(' <span class="sub-name"> Allow admins and normal members to comment. </span> </a> </li> <li> <a href="#" class="js-select');this.s(this.f("comments_showObservers",c,b,1),c,b,1,0,0,"")||this.b(" disabled");this.b('" name="observers"> Members and Observers ');this.s(this.f("comments_observers",c,b,1),c,b,0,607,643,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="icon-sm icon-check"/> ')}),c.pop());this.b(' <span class="sub-name"> Allow admins, normal members, and observers to comment. </span> </a> </li> <li> <a href="#" class="js-select');
this.s(this.f("orgCanSee",c,b,1),c,b,1,0,0,"")||this.b(" disabled");this.b('" name="org"> Organization members ');this.s(this.f("comments_org",c,b,1),c,b,0,888,924,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="icon-sm icon-check"/> ')}),c.pop());this.b(' <span class="sub-name"> Allow admins, normal members, observers, and org members to comment. </span> </a> </li> <li> <a href="#" class="js-select');this.s(this.f("permissionLevel_public",c,b,1),c,b,1,0,0,"")||this.b(" disabled");this.b('" name="public"> Public members ');
this.s(this.f("comments_public",c,b,1),c,b,0,1202,1238,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="icon-sm icon-check"/> ')}),c.pop());this.b(' <span class="sub-name"> Allow any Trello member to comment. </span> </a> </li> ');return this.fl()},board_menu_email:function(c,b,d){this.b(d=d||"");this.b('<label for="boardEmail">Your email address for this board</label> <input id="boardEmail" type="text" name="boardEmail" readonly="readonly" class="non-empty js-autofocus" placeholder="Loading\u2026" value="');
this.b(this.v(this.f("email",c,b,0)));this.b('" style="margin: 4px 0 8px;"> <a href="#" class="quiet-button js-generate-address">Generate a new email address.</a> <a href="#" class="quiet-button js-send-address">Email me this address.</a> <hr> <label>Your emailed cards appear in\u2026</label> <div class="form-grid"> <div class="button-link setting form-grid-child form-grid-child-threequarters"> <span class="label">List</span> <span class="value js-list-value">');this.b(this.v(this.f("listName",c,
b,0)));this.b('</span> <label>List</label> <select class="js-select-list"> ');this.s(this.f("lists",c,b,1),c,b,0,704,792,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <option value="');f.b(f.v(f.f("id",b,d,0)));f.b('"');f.s(f.f("selected",b,d,1),b,d,0,740,760,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' selected="selected"')}),b.pop());f.b(">");f.b(f.v(f.f("name",b,d,0)));f.b("</option> ")}),c.pop());this.b(' </select> </div> <div class="button-link setting form-grid-child form-grid-child-quarter"> <span class="label">Position</span> <span class="value js-pos-value">');
this.b(this.v(this.f("positionName",c,b,0)));this.b('</span> <label>Position</label> <select class="js-select-position"> <option value="top"');this.s(this.f("position_top",c,b,1),c,b,0,1083,1103,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' selected="selected"')}),c.pop());this.b('>Top</option> <option value="bottom"');this.s(this.f("position_bottom",c,b,1),c,b,0,1176,1196,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' selected="selected"')}),c.pop());this.b('>Bottom</option> </select> </div> </div> <hr> <p class="bottom quiet"> <strong>Tip:</strong> Don\'t share this email address. Anyone who has it can add cards as you. When composing emails, the card title goes in the subject and the card description in the body. <a href="http://help.trello.com/customer/portal/articles/1216141-creating-cards-by-email#formattingTips" target="_blank">More email formatting tips.</a> </p> ');
return this.fl()},board_menu_invitations:function(c,b,d){this.b(d=d||"");this.b('<li> <a href="#" class="js-select" name="admins"> Admins ');this.s(this.f("invitations_admins",c,b,1),c,b,0,80,116,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="icon-sm icon-check"/> ')}),c.pop());this.b(' <span class="sub-name"> Allow only admins to add and invite others. </span> </a> </li> <li> <a href="#" class="js-select" name="members"> All Members ');this.s(this.f("invitations_members",c,b,1),c,b,0,
314,350,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="icon-sm icon-check"/> ')}),c.pop());this.b(' <span class="sub-name"> Allow members and admins to add and invite others. </span> </a> </li> ');return this.fl()},board_menu_settings:function(c,b,d){this.b(d=d||"");this.b('<ul class="pop-over-list inset"> <li> <a class="js-change-labels');this.s(this.f("__ed",c,b,1),c,b,1,0,0,"")||this.b(" disabled");this.b('" href="#"> Edit Label Names </a> </li> <hr> <li> <a class="js-change-org');this.s(this.f("canChangeOrg",
c,b,1),c,b,1,0,0,"")||this.b(" disabled");this.b('" href="#"> ');this.s(this.f("setOrgNull",c,b,1),c,b,0,234,260,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" Remove From Organization ")}),c.pop());this.b(" ");this.s(this.f("setOrgNull",c,b,1),c,b,1,0,0,"")||this.b(" Change Organization\u2026 ");this.b(" ");this.s(this.f("orgDisplayName",c,b,1),c,b,0,348,398,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="sub-name">');f.b(f.v(f.f("orgDisplayName",b,d,0)));f.b("</span> ")}),c.pop());this.b(' </a> </li> <hr> <li> <a class="');
this.s(this.f("__own",c,b,1),c,b,0,459,475,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("js-toggle-covers")}),c.pop());this.s(this.f("__own",c,b,1),c,b,1,0,0,"")||this.b(" disabled");this.b('" href="#"> ');this.s(this.f("cardCovers",c,b,1),c,b,1,0,0,"")||this.b(" Enable Card Cover Images ");this.b(" ");this.s(this.f("cardCovers",c,b,1),c,b,0,598,660,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' Card Cover Images Enabled <span class="icon-sm icon-check"/> ')}),c.pop());this.b(' <span class="sub-name">Show images on front of cards.</span> </a> </li> <hr> <li> <a class="');
this.s(this.f("__own",c,b,1),c,b,0,778,796,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("js-change-comments")}),c.pop());this.s(this.f("__own",c,b,1),c,b,1,0,0,"")||this.b(" disabled");this.b('" href="#"> Commenting Permissions\u2026 <span class="sub-name">');this.b(this.v(this.f("commentsDisplay",c,b,0)));this.b('</span> </a> </li> <li> <a class="');this.s(this.f("__own",c,b,1),c,b,0,957,978,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("js-change-add-members")}),c.pop());this.s(this.f("__own",c,b,1),
c,b,1,0,0,"")||this.b(" disabled");this.b('" href="#"> Invitations Permissions\u2026 <span class="sub-name">');this.b(this.v(this.f("invitationsDisplay",c,b,0)));this.b('</span> </a> </li> <hr> <li> <a class=" ');this.s(this.f("__own",c,b,1),c,b,0,1149,1173,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" js-toggle-org-mem-join ")}),c.pop());this.b(" ");this.s(this.f("__own",c,b,1),c,b,1,0,0,"")||this.b(" disabled ");this.b(" ");this.s(this.f("hasOrg",c,b,1),c,b,1,0,0,"")||this.b(" disabled ");this.b(" ");
this.s(this.f("permissionLevel_private",c,b,1),c,b,0,1276,1286,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" disabled ")}),c.pop());this.b(' " href="#"> Allow Org Members to Join ');this.s(this.f("selfJoin_true",c,b,1),c,b,0,1371,1407,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="icon-sm icon-check"/> ')}),c.pop());this.b(' <span class="sub-name"> Any org member can join this board without being invited. ');this.s(this.f("hasOrg",c,b,1),c,b,1,0,0,"")||this.b(" To enable this, the board has to be a part of an org. ");
this.b(" ");this.s(this.f("permissionLevel_private",c,b,1),c,b,0,1614,1659,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" To enable this, the board can't be private. ")}),c.pop());this.b(" </span> </a> </li> </ul> ");return this.fl()},board_menu_subscribed_state:function(c,b,d){this.b(d=d||"");this.b("Subscribe");this.s(this.f("subscribed",c,b,1),c,b,0,24,60,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('d <span class="icon-sm icon-check"/>')}),c.pop());this.b(" ");return this.fl()},board_menu_vis:function(c,
b,d){this.b(d=d||"");this.s(this.f("explanationText",c,b,1),c,b,0,20,64,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <p class="quiet"> ');f.b(f.v(f.f("explanationText",b,d,0)));f.b(" </p> ")}),c.pop());this.b(' <li> <a class="js-select');this.s(this.f("disabledVis_private",c,b,1),c,b,1,0,0,"")||this.b(" light-hover");this.b(" ");this.s(this.f("disabledVis_private",c,b,1),c,b,0,194,203,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" disabled")}),c.pop());this.b(' " href="#" name="private"> <span class="icon-sm icon-');
this.b(this.v(this.f("iconClass_private",c,b,0)));this.b(' vis-icon"/> Private ');this.s(this.f("permissionLevel_private",c,b,1),c,b,0,351,387,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="icon-sm icon-check"/> ')}),c.pop());this.b(' <span class="sub-name"> ');this.b(this.v(this.f("permText_private",c,b,0)));this.b(" ");this.s(this.f("showVisRestriction_private",c,b,1),c,b,0,492,543,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="error">');f.b(f.v(f.f("visRestrictionText",b,
d,0)));f.b("</span> ")}),c.pop());this.b(' </span> </a> </li> <li> <a class="js-select ');this.s(this.f("disabledVis_org",c,b,1),c,b,1,0,0,"")||this.b(" light-hover");this.b(" ");this.s(this.f("disabledVis_org",c,b,1),c,b,0,692,701,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" disabled")}),c.pop());this.b(' " href="#" name="org"> <span class="icon-sm icon-');this.b(this.v(this.f("iconClass_org",c,b,0)));this.b(' vis-icon"/> Organization ');this.s(this.f("permissionLevel_org",c,b,1),c,b,0,838,874,"{{ }}")&&
(this.rs(c,b,function(b,d,f){f.b(' <span class="icon-sm icon-check"/> ')}),c.pop());this.b(' <span class="sub-name"> ');this.b(this.v(this.f("permText_org",c,b,0)));this.b(" ");this.s(this.f("disabledVis_org",c,b,1),c,b,0,960,1062,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.s(f.f("hasOrg",b,d,1),b,d,1,0,0,"")||f.b(' <span class="error"> The board must be added to an org to enable this. </span> ')}),c.pop());this.b(" ");this.s(this.f("showVisRestriction_org",c,b,1),c,b,0,1110,1161,"{{ }}")&&(this.rs(c,
b,function(b,d,f){f.b(' <span class="error">');f.b(f.v(f.f("visRestrictionText",b,d,0)));f.b("</span> ")}),c.pop());this.b(' </span> </a> </li> <li> <a class="js-select');this.s(this.f("disabledVis_public",c,b,1),c,b,1,0,0,"")||this.b(" light-hover");this.b(" ");this.s(this.f("disabledVis_public",c,b,1),c,b,0,1314,1323,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" disabled")}),c.pop());this.b(' " href="#" name="public"> <span class="icon-sm icon-');this.b(this.v(this.f("iconClass_public",c,b,0)));
this.b(' vis-icon"/> Public ');this.s(this.f("permissionLevel_public",c,b,1),c,b,0,1466,1502,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="icon-sm icon-check"/> ')}),c.pop());this.b(' <span class="sub-name"> ');this.b(this.v(this.f("permText_public",c,b,0)));this.b(" ");this.s(this.f("showVisRestriction_public",c,b,1),c,b,0,1604,1655,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="error">');f.b(f.v(f.f("visRestrictionText",b,d,0)));f.b("</span> ")}),c.pop());this.b(" </span> </a> </li> ");
return this.fl()},board_new:function(c,b,d){this.b(d=d||"");this.b('<form> <label for="boardNewTitle">Title</label> <input id="boardNewTitle" type="text" name="name" class="non-empty js-autofocus" placeholder="Untitled Board"> <div');this.s(this.f("hideOrg",c,b,1),c,b,0,175,188,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' class="hide"')}),c.pop());this.b('> <div class="clearfix"> <label class="left" style="margin-right: 8px;">Organization</label> ');this.s(this.f("canAddToOrgs",c,b,1),c,b,0,310,383,
"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <a href="#" class="icon-sm icon-info dark-hover js-helper-add-org"></a> ')}),c.pop());this.b(" </div> ");this.s(this.f("canAddToOrgs",c,b,1),c,b,1,0,0,"")||this.b(' <p style="margin-bottom: 16px;" class="quiet"> Organizations make sharing and working within a group even easier. It doesn\u2019t look like you are a member of any organizations. <a href="#" class=\'js-create-org\'>Create an organization.</a> </p> ');this.b(' <select name="org-id"');this.s(this.f("canAddToOrgs",
c,b,1),c,b,1,0,0,"")||this.b(' class="hide"');this.b('> <option value="">(none)</option> ');this.s(this.f("orgs",c,b,1),c,b,0,797,883,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <option value="');f.b(f.v(f.f("id",b,d,0)));f.b('"');f.s(f.f("selectOrg",b,d,1),b,d,0,834,843,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" selected")}),b.pop());f.b(">");f.b(f.v(f.f("displayName",b,d,0)));f.b("</option> ")}),c.pop());this.b(' </select> </div> <input type="hidden" name="permissionLevel" value="');this.b(this.v(this.f("pLevel",
c,b,0)));this.b('"> <p class="quiet js-vis-display"/> <ul class="pop-over-list js-vis-chooser hide"/> <p class="error bottom js-no-valid-org-privs clearfix hide"> Due to<span class="js-not-admin-text"> admin</span> restrictions, you are not allowed to create new boards in this organization. To change this, <span class="js-not-admin-text">get an organization admin to </span> change the Board Creation Restrictions <span class="js-not-admin-text">on the organization\u2019s settings page.</span> <span class="js-admin-text hide">on the <a class="js-org-account-url">organization\u2019s settings page</a>.</span> </p> ');
this.s(this.f("isCopyBoard",c,b,1),c,b,0,1578,1751,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="check-div clearfix" style="margin-top: 10px;"> <input type="checkbox" id="idKeepCards" name="cards" checked> <label for="idKeepCards">Keep Cards</label> </div> ')}),c.pop());this.b(' <input type="submit" class="primary wide js-submit disabled" value="Create"> </form> ');return this.fl()},board_new_vis:function(c,b,d){this.b(d||"");this.b('<span class="icon-sm icon-');this.b(this.v(this.f("visIconClass",
c,b,0)));this.b('"/>This board will be <strong>');this.b(this.v(this.f("visDisplayText",c,b,0)));this.b('</strong>. <a href="#" class="js-change-vis">Change.</a> ');return this.fl()},board_observer_count:function(c,b,d){this.b(d||"");this.b('<a href="#" class="quiet-button js-show-observers" style="margin: 4px 0 0;">');this.b(this.v(this.f("count",c,b,0)));this.b("</a> ");return this.fl()},board_sidebar:function(c,b,d){this.b(d||"");this.b('<a href="#" class="sidebar-hide-btn dark-hover js-hide-sidebar" title="Close the board sidebar."> <span class="icon-sm icon-rightarrow"/> </a> <div class="board-widgets-title clearfix"> <a href="#" class="board-sidebar-back-btn js-pop-widget-view"><span class="left-arrow"/>Back</a> <h3 class="text js-widget-title"></h3> <hr> </div> <div class="board-widgets-content-wrapper"></div> <div class="sidebar-archive-dropzone js-sidebar-archive-dropzone"><p>Drop here to archive.</p></div> ');
return this.fl()},board_watchers:function(c,b,d){this.b(d=d||"");this.s(this.f("showWatchers",c,b,1),c,b,0,17,49,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.b(f.v(f.f("nWatchers",b,d,0)));f.b(" people watching. ")}),c.pop());this.b(" ");return this.fl()},board_widget_default:function(c,b,d){this.b(d=d||"");this.b('<p class="error js-file-too-large" style="margin: 12px 0 6px; display:none;">File too large. 10mb limit.</p> <div class="board-widget board-widget-nav clearfix');this.s(this.f("collapseWidgetNav",
c,b,1),c,b,0,181,191,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" collapsed")}),c.pop());this.b('"> <h3 class="dark-hover toggle-widget-nav js-toggle-widget-nav" title="Click here to see more board options."> Menu <span class="icon-sm icon-menu toggle-menu-icon"></span> </h3> <ul class="nav-list"> <hr style="margin-top: 0;"> ');this.s(this.f("__ed",c,b,1),c,b,0,452,702,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <li> <a href="#" class="nav-list-item js-open-power-ups"> <span class="icon-sm icon-rocket icon-type"/> Power-Ups </a> </li> <li> <a href="#" class="nav-list-item js-open-stickers"> <span class="icon-sm icon-sticker icon-type"/> Stickers </a> </li> ')}),
c.pop());this.b(' <li> <a href="#" class="nav-list-item js-open-card-filter"> <span class="icon-sm icon-filter icon-type"/> Filter Cards </a> </li> <li> <a href="#" class="nav-list-item js-open-archive"> <span class="icon-sm icon-archive icon-type"/> Archived Items </a> </li> <hr> ');this.s(this.f("__ed",c,b,1),c,b,0,985,1381,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <li> <a class="nav-list-item nav-list-sub-item board-settings-background js-change-background');f.s(f.f("__ed",b,d,1),b,d,1,0,0,
"")||f.b(" disabled");f.b('" href="#"> <span class="board-settings-background-preview" style="');f.s(f.f("backgroundImageUrl",b,d,1),b,d,0,1196,1242,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b("background-image: url(");e.b(e.v(e.f("backgroundImageUrl",b,d,0)));e.b(");")}),b.pop());f.s(f.f("backgroundColor",b,d,1),b,d,0,1285,1321,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b("background-color:");e.b(e.v(e.f("backgroundColor",b,d,0)))}),b.pop());f.b('"></span> Change Background\u2026 </a> </li> ')}),c.pop());
this.b(" ");this.s(this.f("__ed",c,b,1),c,b,0,1400,1504,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <li> <a href="#" class="nav-list-item nav-list-sub-item js-email"> Email-to-board Settings\u2026 </a> </li> ')}),c.pop());this.b(" ");this.s(this.f("__loggedIn",c,b,1),c,b,0,1529,1749,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <li> <a class="nav-list-item nav-list-sub-item js-board-subscribe" href="#"> <span class="js-subscribed-state"/> </a> </li> <li> <a class="nav-list-item nav-list-sub-item js-copy-board" href="#"> Copy Board\u2026 </a> </li> ')}),
c.pop());this.b(' <li> <a class="nav-list-item nav-list-sub-item js-share" href="#"> Share, Print, and Export\u2026 </a> </li> ');this.s(this.f("canCloseBoard",c,b,1),c,b,0,1887,2097,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <hr> <li> <a href="#" class="nav-list-item nav-list-sub-item js-open-settings"> Additional Settings\u2026 </a> </li> <li> <a class="nav-list-item nav-list-sub-item js-close-board" href="#"> Close Board\u2026 </a> </li> ')}),c.pop());this.b(" ");this.s(this.f("canLeaveBoard",
c,b,1),c,b,0,2134,2275,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("canCloseBoard",b,d,1),b,d,1,0,0,"")||f.b(" <hr> ");f.b(' <li> <a class="nav-list-item nav-list-sub-item js-leave-board" href="#"> Leave Board\u2026 </a> </li> ')}),c.pop());this.b(' </ul> </div> <div class="js-ad"></div> <hr> ');this.s(this.f("canJoin",c,b,1),c,b,0,2350,2594,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="board-widget clearfix"> <a href="#" class="button js-join-board" style="margin: 0;"> Join Board </a> ');
f.s(f.f("selfJoin_true",b,d,1),b,d,0,2482,2563,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <p class="helper" style="margin-top: 8px;">Org members can join this board.</p> ')}),b.pop());f.b(" </div> <hr> ")}),c.pop());this.b(' <div class="board-widget board-widget-members clearfix"> <div class="board-widget-title"> <h3>Members</h3> </div> <div class="board-widget-content"> <div class="board-widget-members js-list-board-members clearfix');this.s(this.f("__ed",c,b,1),c,b,0,2828,2860,"{{ }}")&&(this.rs(c,
b,function(b,d,f){f.b(" js-list-draggable-board-members")}),c.pop());this.b('"></div> <div class="js-list-observers"></div> ');this.s(this.f("canInviteMembers",c,b,1),c,b,0,2937,3060,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <a href="#" class="button-link js-open-manage-board-members"> <span class="icon-sm icon-member"></span> Add Members\u2026 </a> ')}),c.pop());this.b(' </div> </div> <hr> <div class="board-widget board-widget-activity bottom clearfix"> <div class="board-widget-title"> <h3>Activity</h3> </div> <div class="board-widget-content"> <div class="activity-gradient-t"></div> <div class="activity-gradient-b"></div> <div class="board-actions-list fancy-scrollbar"> <div class="js-sidebar-list-actions"></div> <a class="show-more js-view-all-activity-list" href="#"> View all activity\u2026 </a> </div> </div> </div> ');
return this.fl()},boards_sidebar_section:function(c,b,d){this.b(d=d||"");this.b('<p class="sidebar-section-header quiet js-sidebar-section-header"> ');this.s(this.f("isOrg",c,b,1),c,b,1,0,0,"")||(this.b(" "),this.s(this.f("title",c,b,1),c,b,0,88,228,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("iconClass",b,d,1),b,d,0,103,153,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <span class="icon-sm icon-');e.b(e.v(e.f("iconClass",b,d,0)));e.b('"></span> ')}),b.pop());f.b(' <span class="sidebar-section-header-title">');
f.b(f.v(f.f("title",b,d,0)));f.b("</span> ")}),c.pop()),this.b(" "));this.b(" ");this.s(this.f("isOrg",c,b,1),c,b,0,260,662,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <a class="dark-hover" href="');f.b(f.v(f.f("url",b,d,0)));f.b('"> <span class="icon-sm ');f.s(f.f("orgLogoUrl",b,d,1),b,d,1,0,0,"")||f.b("icon-org");f.s(f.f("orgLogoUrl",b,d,1),b,d,0,373,385,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b("custom-image")}),b.pop());f.b('"> ');f.s(f.f("orgLogoUrl",b,d,1),b,d,0,418,471,"{{ }}")&&(f.rs(b,d,function(b,
d,e){e.b('<img src="');e.b(e.v(e.f("orgLogoUrl",b,d,0)));e.b('" alt="');e.b(e.v(e.f("displayName",b,d,0)));e.b(' logo">')}),b.pop());f.b(' </span> <span class="sidebar-section-header-title">');f.b(f.v(f.f("displayName",b,d,0)));f.b('</span> <span class="icon-sm icon-briefcase icon-briefcase-bc-color hide js-has-business-class"></span> </a> ')}),c.pop());this.b(" ");this.s(this.f("sectionId",c,b,1),c,b,0,687,961,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="sidebar-section-header-toggle-icon icon-sm icon-remove dark-hover js-collapse-section hide" title="Collapse section."> </span> <span class="sidebar-section-header-toggle-icon icon-sm icon-add dark-hover js-expand-section hide" title="Expand section."> </span> ')}),
c.pop());this.b(' </p> <ul class="sidebar-boards-list js-board-list"></ul> ');return this.fl()},calendar_day:function(c,b,d){this.b(d=d||"");this.b(" ");this.s(this.f("monthView",c,b,1),c,b,0,17,54,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<div class="calendar-day-spacer-div">')}),c.pop());this.b(' <div class="calendar-day js-expand-day ');this.s(this.f("isToday",c,b,1),c,b,0,124,129,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("today")}),c.pop());this.b('"> <div class="day-header clearfix js-toggle-day"> <h3 class="date"> <div class=\'day-month-header\'>');
this.b(this.v(this.f("month",c,b,0)));this.b("</div> <div class='day-full-month-header'>");this.b(this.v(this.f("fullMonth",c,b,0)));this.b("</div> <div class='day-date-header'>");this.b(this.v(this.f("date",c,b,0)));this.b('</div> </h3> <div class="quiet num-cards"> <div class="day-number-header"></div> <div class="day-cards-header"></div> </div> <a class="close-button icon-sm icon-close dark-hover"></a> </div> <div class="calendar-day-list js-calendar-sortable fancy-scrollbar"></div> ');this.s(this.f("__ed",
c,b,1),c,b,0,625,696,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <a class="open-card-composer js-open-card-composer">Add a card...</a> ')}),c.pop());this.b(" </div> ");this.s(this.f("monthView",c,b,1),c,b,0,729,735,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("</div>")}),c.pop());this.b(" ");return this.fl()},calendar_day_list_header:function(c,b,d){this.b(d||"");this.b("<span class='calendar-list-header' name='");this.b(this.v(this.f("listID",c,b,0)));this.b('\'> <span class="icon-sm icon-list"></span>');
this.b(this.v(this.f("listName",c,b,0)));this.b(" </span> ");return this.fl()},calendar_month:function(c,b,d){this.b(d||"");this.b('<table class="calendar-table"></table> ');return this.fl()},calendar_toolbar:function(c,b,d){this.b(d=d||"");this.b('<div class="calendar-header"> <div class="calendar-header-toolbar"> <h2 class="calendar-header-toolbar-title js-calendar-header"></h2> <div class="calendar-header-toolbar-today"> <a class="button-link today-button js-today" href="#"> Today </a> </div> <div class="calendar-header-toolbar-nav"> <a class="button-link js-left-arrow left-arrow" href="#"> <span class="icon-sm icon-leftarrow"/> </a> <a class="button-link js-right-arrow right-arrow" href="#"> <span class="icon-sm icon-rightarrow"/> </a> </div> <div class="calendar-header-toolbar-close"> <a class="icon-lg icon-close dark-hover js-close-calendar" href="#" title="Close the calendar"/> </div> <div class="calendar-header-toolbar-type"> <a class="button-link js-week-view week-button" href="#"> Week </a> <a class="button-link js-month-view month-button" href="#"> Month </a> </div> </div> <div class="days-of-week"> ');
this.s(this.f("days",c,b,1),c,b,0,888,920,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="quiet">');f.b(f.v(f.d(".",b,d,0)));f.b("</div> ")}),c.pop());this.b(' </div> </div> <div class="calendar-content"></div> ');return this.fl()},calendar_week:function(c,b,d){this.b(d||"");this.b("<div class='week-horizontal-canvas'></div> ");return this.fl()},cant_add_board_to_org:function(c,b,d){this.b(d=d||"");this.b('<p class="quiet"> ');this.s(this.f("organization",c,b,1),c,b,0,35,50,"{{ }}")&&(this.rs(c,
b,function(b,d,f){f.b(f.v(f.f("displayName",b,d,0)))}),c.pop());this.b(" does not allow new boards. ");this.s(this.f("isOrgAdmin",c,b,1),c,b,0,110,239,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' You can change this in the <a href="');f.b(f.v(f.f("orgSettingsUrl",b,d,0)));f.b('">organization settings</a> by clicking on "Board Creation Restrictions". ')}),c.pop());this.b(" ");this.s(this.f("isOrgAdmin",c,b,1),c,b,1,0,0,"")||this.b(' An org admin can change this on the organization settings page by clicking on "Board Creation Restrictions". ');
this.b(" </p> ");return this.fl()},cardLink:function(c,b,d){this.b(d=d||"");this.b('<a href="');this.b(this.v(this.f("url",c,b,0)));this.b('"');this.s(this.f("name",c,b,1),c,b,0,26,43,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' title="');f.b(f.v(f.f("name",b,d,0)));f.b('"')}),c.pop());this.b(">#");this.b(this.v(this.f("idShort",c,b,0)));this.b("</a> ");return this.fl()},card_composer_inline:function(c,b,d){this.b(d||"");this.b('<div class="list-card js-composer"> <div class="list-card-labels clearfix js-list-card-composer-labels"></div> <div class="list-card-details clearfix"> <textarea class="list-card-composer-textarea js-card-title">');
this.b(this.v(this.f("title",c,b,0)));this.b('</textarea> <div class="list-card-members js-list-card-composer-members"></div> </div> </div> <div class="cc-controls clearfix"> <input type="submit" class="primary confirm js-add-card" value="Add"> <a class="icon-lg icon-close dark-hover js-cancel" href="#"/> <a class="cc-opt icon-lg icon-menu dark-hover js-cc-menu" href="#"/> </div> ');return this.fl()},card_copy:function(c,b,d){this.b(d=d||"");this.s(this.f("loading",c,b,1),c,b,0,12,73,"{{ }}")&&(this.rs(c,
b,function(b,d,f){f.b(' <div class="spinner loading js-loading-card-actions"></div> ')}),c.pop());this.b(" ");this.s(this.f("loading",c,b,1),c,b,1,0,0,"")||(this.b(' <form> <label>Title</label> <textarea name="name" class="js-autofocus" style="margin-bottom: 12px;">'),this.b(this.v(this.f("name",c,b,0))),this.b("</textarea> "),this.s(this.f("hasStuff",c,b,1),c,b,0,232,1703,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <p style="margin-bottom: 4px;"><strong>Keep\u2026</strong></p> ');f.s(f.f("hasChecklists",
b,d,1),b,d,0,309,518,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <div class="check-div clearfix"> <input id="idKeepChecklists" type="checkbox" name="checklists" checked> <label for="idKeepChecklists">Checklists <span class="quiet">(');e.b(e.v(e.f("numChecklists",b,d,0)));e.b(")</span></label> </div> ")}),b.pop());f.b(" ");f.s(f.f("hasLabels",b,d,1),b,d,0,551,740,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <div class="check-div clearfix"> <input id="idKeepLabels" type="checkbox" name="labels" checked> <label for="idKeepLabels">Labels <span class="quiet">(');
e.b(e.v(e.f("numLabels",b,d,0)));e.b(")</span></label> </div> ")}),b.pop());f.b(" ");f.s(f.f("hasMembers",b,d,1),b,d,0,770,964,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <div class="check-div clearfix"> <input id="idKeepMembers" type="checkbox" name="members" checked> <label for="idKeepMembers">Members <span class="quiet">(');e.b(e.v(e.f("numMembers",b,d,0)));e.b(")</span></label> </div> ")}),b.pop());f.b(" ");f.s(f.f("hasAttachments",b,d,1),b,d,0,999,1215,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <div class="check-div clearfix"> <input id="idKeepAttachments" type="checkbox" name="attachments" checked> <label for="idKeepAttachments">Attachments <span class="quiet">(');
e.b(e.v(e.f("numAttachments",b,d,0)));e.b(")</span></label> </div> ")}),b.pop());f.b(" ");f.s(f.f("hasComments",b,d,1),b,d,0,1251,1452,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <div class="check-div clearfix"> <input id="idKeepComments" type="checkbox" name="comments" checked> <label for="idKeepComments">Comments <span class="quiet">(');e.b(e.v(e.f("numComments",b,d,0)));e.b(")</span></label> </div> ")}),b.pop());f.b(" ");f.s(f.f("hasStickers",b,d,1),b,d,0,1485,1686,"{{ }}")&&(f.rs(b,d,function(b,
d,e){e.b(' <div class="check-div clearfix"> <input id="idKeepStickers" type="checkbox" name="stickers" checked> <label for="idKeepStickers">Stickers <span class="quiet">(');e.b(e.v(e.f("numStickers",b,d,0)));e.b(")</span></label> </div> ")}),b.pop());f.b(" ")}),c.pop()),this.b(" <br> <label>Copy to\u2026</label> "),this.b(this.rp("move_card_controls",c,b,"")),this.b(' <input type="submit" class="primary wide js-submit" value="Create Card"> </form> '));this.b(" ");return this.fl()},card_copy_from:function(c,
b,d){this.b(d=d||"");this.s(this.f("showInput",c,b,1),c,b,0,14,103,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<input class="js-input js-autofocus" type="text" placeholder="Search for a card to copy">')}),c.pop());this.b(' <div class="js-card-results"></div> ');return this.fl()},card_detail:function(c,b,d){this.b(d=d||"");this.b('<div class="window-cover hide js-card-cover-box js-open-card-cover-in-viewer"> <div class="window-cover-stickers js-display-stickers"></div> </div> <div class="window-archive-banner hide js-archive-banner"> <span class="icon-lg icon-archive window-archive-banner-icon"></span> <p class="window-archive-banner-text"> This card is archived.</p> </div> <div class="window-header clearfix"> <span class="window-header-icon icon-lg icon-card"></span> <div class="window-title card-detail-title non-empty inline ');
this.s(this.f("__ed",c,b,1),c,b,0,515,525,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" editable ")}),c.pop());this.b(' " attr="name"> <h2 class="window-title-text current hide-on-edit js-card-title"> ');this.b(this.v(this.f("name",c,b,0)));this.b(" </h2> ");this.s(this.f("__ed",c,b,1),c,b,0,640,913,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" <p class=\"edits-warning quiet\">You have unsaved edits on this field. <a href='#' class='js-view-edits'>View edits</a> or <a href='#' class='js-discard-edits'>discard</a>.</p> <div class=\"edit edit-heavy\"> <textarea type=\"text\" class=\"field single-line\"></textarea> </div> ")}),
c.pop());this.b(' <div class="hide quiet hide-on-edit window-header-inline-content js-current-list"></div> <div class="hide hide-on-edit window-header-inline-content js-subscribed-indicator-header"><span class="icon-sm icon-follow"></span></div> </div> </div> <div class="window-main-col clearfix"> <div class="card-detail-data gutter clearfix"> <div class="card-detail-item card-detail-item-members clearfix hide js-card-detail-members"> <h3 class="card-detail-item-header">Members</h3> <div class="js-card-detail-members-list clearfix"></div> </div> <div class="card-detail-item card-detail-item-labels clearfix hide js-card-detail-labels"> <h3 class="card-detail-item-header">Labels</h3> <div class="js-card-detail-labels-list clearfix"></div> </div> <div class="card-detail-item card-detail-item-due-date clearfix hide js-card-detail-due-date"> <h3 class="card-detail-item-header">Due Date</h3> <a href="#" class="card-detail-badge card-detail-due-date-badge js-card-detail-due-date-badge"></a> </div> <div class="card-detail-item card-detail-item-votes clearfix hide js-card-detail-votes"> <h3 class="card-detail-item-header">Votes</h3> <a href="#" class="card-detail-badge card-detail-vote-badge badge-state-clickable js-card-detail-votes-badge js-show-votes"></a> </div> <div class="card-detail-item clearfix hide js-card-detail-age"> <h3 class="card-detail-item-header">Last Updated</h3> <div class="card-detail-badge card-detail-badge-aging date js-card-detail-age-badge clearfix"></div> </div> <div class="card-detail-item card-detail-item-block clear clearfix');
this.s(this.f("__ed",c,b,1),c,b,0,2484,2493,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" editable")}),c.pop());this.b('" attr="desc"> <h3 class="card-detail-item-header hide js-show-with-desc">Description</h3> ');this.s(this.f("__ed",c,b,1),c,b,0,2602,2696,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <a class="card-detail-item-header-edit hide-on-edit js-show-with-desc js-edit-desc">Edit</a> ')}),c.pop());this.b(' <div class="current markeddown hide-on-edit js-card-desc js-show-with-desc hide"></div> ');
this.s(this.f("__ed",c,b,1),c,b,0,2803,3324,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <p class="bottom"><a class="hide-on-edit quiet-button w-img js-edit-desc js-hide-with-desc" href="#"><span class="icon-sm icon-desc"/>Edit the description\u2026</a></p> <div class="card-detail-edit edit"> <a href="#" class="helper js-format-help">Formatting help</a> <textarea class="field" /> </div> <p class="edits-warning quiet">You have unsaved edits on this field. <a href=\'#\' class=\'js-view-edits\'>View edits</a> or <a href=\'#\' class=\'js-discard-edits\'>discard</a>.</p> <p class="edits-error error">Edit not saved.</p> ')}),
c.pop());this.b(' </div> </div> <div class="window-module js-attachments-section clearfix hide"> <div class="window-module-title window-module-title-no-divider"> <span class="window-module-title-icon icon-lg icon-attachment"/> <h3 class="inline-block">Attachments</h3> </div> <div class="gutter"> <div class="clearfix js-attachment-list"></div> <p class="js-show-fewer-attachments hide"> <a class="quiet-button js-view-some-attachments" href="#">Show fewer attachments.</a> </p> <p class="js-show-more-attachments hide"> <a class="quiet-button js-view-all-attachments" href="#">View all attachments (<span class="js-num-attachments"/> hidden)</a> </p> ');
this.s(this.f("__ed",c,b,1),c,b,0,3977,4204,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <p> <a href="#" class="quiet-button js-attach" title="Attach files from your computer, Google Drive, Dropbox, and other services. You can also drag\'n\'drop files from your desktop to upload them."> Add an attachment\u2026 </a> </p> ')}),c.pop());this.b(' </div> </div> <div class="checklist-list window-module js-checklist-list js-no-higher-edits"></div> <div class="window-module"> <div class="window-module-title window-module-title-no-divider"> <span class="window-module-title-icon icon-lg icon-activity"/> <h3>Activity</h3> <a href="#" class="quiet js-show-extra-actions hide">Show details</a> <a href="#" class="quiet js-hide-extra-actions hide">Hide details</a> <span class="editing-members js-editing-members hide"></span> </div> ');
this.s(this.f("canComment",c,b,1),c,b,0,4712,5329,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="new-comment js-new-comment"> ');f.s(f.f("me",b,d,1),b,d,0,4761,4817,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <div class="member member-no-menu"> ');e.b(e.rp("member",b,d,""));e.b(" </div> ")}),b.pop());f.b(' <textarea class="new-comment-input js-new-comment-input js-no-ie-placeholder" placeholder="Write a comment\u2026" tabindex="1" /> <div class="add-controls clearfix"> ');f.b(f.rp("comment_options",
b,d,""));f.b(' <input type="submit" class="primary confirm clear js-add-comment" value="Comment" tabindex="2"> </div> <div class="too-long hide"> <div>Your comment is too long</div> <input type="submit" class="js-attach-comment" value="Add as attachment"> <input type="submit" class="js-truncate-comment" value="Truncate"> </div> </div> ')}),c.pop());this.b(' <div class="hide-extra-actions js-list-actions"></div> ');this.s(this.f("loading",c,b,1),c,b,0,5412,5473,"{{ }}")&&(this.rs(c,b,function(b,d,
f){f.b(' <div class="spinner loading js-loading-card-actions"></div> ')}),c.pop());this.b(' <p class="bottom"> <a class="show-more hide js-show-all-actions" href="#">Show all actions\u2026</a> </p> </div> </div> <div class="window-sidebar"> ');this.s(this.f("__ed",c,b,1),c,b,0,5639,6553,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="window-module clearfix"> <h3>Add</h3> <div class="clearfix"> <a class="button-link js-change-card-members" title="Add or remove members of the board from the card."> <span class="icon-sm icon-member"/> Members </a> <a class="button-link js-edit-labels" title="Change the labels for the card."> <span class="icon-sm icon-label"/> Labels </a> <a class="button-link js-add-checklist-menu" title="Add a checklist and divide the card into subtasks."> <span class="icon-sm icon-checklist"/> Checklist </a> <a class="button-link js-add-due-date" title="Add a due date for the card and get notifications when it is almost due."> <span class="icon-sm icon-clock"/> Due date </a> <a class="button-link js-attach" title="Attach files from your computer or from Google Drive. You can also drag\'n\'drop files from your desktop to upload them."> <span class="icon-sm icon-attachment"/> Attachment </a> </div> </div> ')}),
c.pop());this.b(" ");this.s(this.f("__ed",c,b,1),c,b,1,0,0,"")||(this.b(" "),this.s(this.f("showActions",c,b,1),c,b,0,6589,6808,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("canSubscribe",b,d,1),b,d,0,6607,6790,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <div class="window-module clearfix"> <h3>Actions</h3> <div class="clearfix"> <div class="js-subscribe-sidebar-button"></div> <div class="js-vote-sidebar-button"></div> </div> </div> ')}),b.pop());f.b(" ")}),c.pop()),this.b(" "));this.b(" ");
this.s(this.f("__ed",c,b,1),c,b,0,6844,7869,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="window-module other-actions clearfix"> <h3>Actions</h3> <div class="clearfix"> <a class="button-link js-move-card" title="Move the card to another board, another list, or a new position in a list"> <span class="icon-sm icon-move"></span> Move </a> <a class="button-link js-copy-card" title="Make a copy of this card, optionally include checklist, labels, members, attachments, etc."> <span class="icon-sm icon-card"></span> Copy </a> <div class="js-subscribe-sidebar-button"></div> <div class="js-vote-sidebar-button"></div> <hr> <a class="button-link js-archive-card" title="Remove the card from the board."> <span class="icon-sm icon-archive"></span> Archive </a> <a class="button-link js-unarchive-card" title="Send the card back to the board."> <span class="icon-sm icon-reopen"></span> Send to board </a> <a class="button-link negate hide js-delete-card" title="Delete the card and all history associated with it. It can\u2019t be retrieved."> <span class="icon-sm icon-remove"></span> Delete </a> </div> </div> ')}),
c.pop());this.b(' <div class="window-module clearfix"> <p class="quiet bottom"> <a class="quiet-button js-more-menu" href="#" title="More options share, print, export');this.s(this.f("__ed",c,b,1),c,b,0,8036,8048,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(", and delete")}),c.pop());this.b('.">Share and more\u2026</a> </p> </div> </div> <p class="dropzone">Drop files to upload.</p> ');return this.fl()},card_detail_add_button:function(c,b,d){this.b(d||"");this.b('<a class="card-detail-item-add-button dark-hover ');
this.b(this.v(this.f("classes",c,b,0)));this.b('"><span class="icon-sm icon-add"></span></a> ');return this.fl()},card_detail_list:function(c,b,d){this.b(d=d||"");this.b('<p class="inline-block bottom">in list <a href="#" class="');this.s(this.f("__ed",c,b,1),c,b,0,67,91,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("js-open-move-from-header")}),c.pop());this.s(this.f("__ed",c,b,1),c,b,1,0,0,"")||this.b("disabled");this.b('"><strong>');this.b(this.v(this.f("listName",c,b,0)));this.b("</strong></a></p> ");
return this.fl()},card_detail_more_menu:function(c,b,d){this.b(d||"");this.b('<ul class="pop-over-list"> <li> <a class="js-print" href="#" title="Use the browser\u2019s print function. You can use \u201cFile\u201d > \u201cPrint\u201d or \u201ccmd + P\u201d (Mac) or \u201ccontrol + P\u201d (Windows)">Print\u2026</a> </li> <li> <a class="js-export-json js-real-link" href="');this.b(this.v(this.f("jsonURL",c,b,0)));this.b('" title="Export the card data in JSON format">Export JSON</a> </li> </ul> ');
this.b(this.rp("meta",c,b,""));this.b(" ");return this.fl()},card_detail_subscribe:function(c,b,d){this.b(d=d||"");this.b('<a class="button-link ');this.s(this.f("subscribed",c,b,1),c,b,0,37,43,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("is-on ")}),c.pop());this.b(" js-");this.s(this.f("subscribed",c,b,1),c,b,0,77,79,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("un")}),c.pop());this.b('subscribe" title="Subscribe to the card to get notifications when something changes."> <span class="icon-sm icon-follow"></span> Subscribe <span class="on"><span class="icon-sm icon-check light"/></span> </a> ');
return this.fl()},card_detail_vote_badge:function(c,b,d){this.b(d=d||"");this.b('<a class="badge vote-badge js-show-votes clickable');this.s(this.f("voted",c,b,1),c,b,0,60,66,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" voted")}),c.pop());this.b('" href="#"> <span class="icon-sm icon-vote"/> <span class="badge-text">');this.s(this.f("nVotes",c,b,1),c,b,0,158,206,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(f.v(f.f("nVotes",b,d,0)));f.b(" vote");f.s(f.f("singleVote",b,d,1),b,d,1,0,0,"")||f.b("s ");f.b(" ")}),
c.pop());this.b(" ");this.s(this.f("voted",c,b,1),c,b,0,228,316,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("justYourVote",b,d,1),b,d,1,0,0,"")||f.b(" (with you)");f.b(" ");f.s(f.f("justYourVote",b,d,1),b,d,0,292,298,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" (you)")}),b.pop());f.b(" ")}),c.pop());this.b(" </span> </a> ");return this.fl()},card_detail_vote_btn_sidebar:function(c,b,d){this.b(d=d||"");this.s(this.f("canVote",c,b,1),c,b,0,12,203,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <a class="button-link ');
f.s(f.f("voted",b,d,1),b,d,0,45,51,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b("is-on ")}),b.pop());f.b(" js-");f.s(f.f("voted",b,d,1),b,d,0,75,77,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b("un")}),b.pop());f.b('vote"> <span class="icon-sm icon-vote"/> Vote <span class="on"><span class="icon-sm icon-check light"/></span> </a> ')}),c.pop());this.b(" ");return this.fl()},card_in_list:function(c,b,d){this.b(d=d||"");this.b('<div class="list-card-labels clearfix js-card-labels">');this.s(this.f("labels",c,b,
1),c,b,0,65,75,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(f.rp("label",b,d,""))}),c.pop());this.b('</div> <div class="list-card-cover js-card-cover');this.s(this.f("showCover",c,b,1),c,b,1,0,0,"")||this.b(" hide");this.b('"></div> ');this.s(this.f("showEditor",c,b,1),c,b,0,191,300,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<span class="list-card-operation icon-sm icon-edit dark-hover js-open-quick-card-editor js-card-menu"></span>')}),c.pop());this.b(' <div class="list-card-stickers-area clearfix');
this.s(this.f("hasStickers",c,b,1),c,b,1,0,0,"")||this.b(" hide");this.b('"> <div class="stickers js-card-stickers"></div> </div> <div class="list-card-details clearfix"> ');this.s(this.f("quickEdit",c,b,1),c,b,1,0,0,"")||(this.b('<a class="list-card-title clear js-card-name'),this.s(this.f("realLink",c,b,1),c,b,0,565,578,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" js-real-link")}),c.pop()),this.b('"><span class="card-short-id hide">#'),this.b(this.v(this.f("idShort",c,b,0))),this.b(" </span>"),
this.b(this.v(this.f("name",c,b,0))),this.b("</a>"));this.b(" ");this.s(this.f("quickEdit",c,b,1),c,b,0,687,764,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<textarea class="list-card-edit-title js-edit-card-title">');f.b(f.v(f.f("name",b,d,0)));f.b("</textarea>")}),c.pop());this.b(' <div class="badges"></div> <div class="list-card-members js-list-card-members">');this.s(this.f("members",c,b,1),c,b,0,870,889,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(f.rp("member_on_card",b,d,""))}),c.pop());this.b("</div> ");
this.s(this.f("detailsOverlay",c,b,1),c,b,0,927,972,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<div class="list-card-details-overlay"></div>')}),c.pop());this.b(' </div> <p class="list-card-dropzone">Drop files to upload.</p> ');return this.fl()},card_inline:function(c,b,d){this.b(d=d||"");this.b('<a href="');this.b(this.v(this.f("cardUrl",c,b,0)));this.b('" class="inline-object"');this.s(this.f("nameTruncated",c,b,1),c,b,0,61,78,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' title="');f.b(f.v(f.f("name",
b,d,0)));f.b('"')}),c.pop());this.b("> ");this.s(this.f("nameTruncated",c,b,1),c,b,0,116,134,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(f.v(f.f("nameTruncated",b,d,0)));f.b("\u2026")}),c.pop());this.b(" ");this.s(this.f("nameTruncated",c,b,1),c,b,1,0,0,"")||this.b(this.v(this.f("name",c,b,0)));this.b(" </a> ");return this.fl()},card_menu_meta:function(c,b,d){this.b(d=d||"");this.b('<hr> <p class="quiet bottom" style="padding: 6px 6px 4px;"> <span class="clearfix" style="display:block; margin-bottom: 6px;"> Card #');
this.b(this.v(this.f("idShort",c,b,0)));this.b(' </span> <span class="clearfix" style="display:block;"> <span>Link to this card</span> <span class="icon-sm icon-');this.b(this.v(this.f("pLevelClass",c,b,0)));this.b('" title="');this.b(this.v(this.f("pLevelAltText",c,b,0)));this.b('"></span> <input class="js-url js-autofocus inline-input" type="text" readonly="readonly" value="');this.b(this.v(this.f("shortUrl",c,b,0)));this.b('"> </span> ');this.s(this.f("dateAdded",c,b,1),c,b,0,432,487,"{{ }}")&&
(this.rs(c,b,function(b,d,f){f.b(' Added <span class="date" dt="');f.b(f.v(f.f("dateAdded",b,d,0)));f.b('"></span> - ')}),c.pop());this.b(" ");this.s(this.f("__ed",c,b,1),c,b,0,511,637,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <a class="js-delete" href="#" title="Deleting is permanent. You will lose all actions associated with this card.">Delete</a> ')}),c.pop());this.b(" </p> ");return this.fl()},card_title_on_card_front:function(c,b,d){this.b(d||"");this.b('<span class="card-short-id hide">#');
this.b(this.v(this.f("idShort",c,b,0)));this.b(" </span>");this.b(this.v(this.f("name",c,b,0)));this.b(" ");return this.fl()},change_org_board_invite_restrict:function(c,b,d){this.b(d=d||"");this.b('<li> <a class="highlight-icon js-');this.s(this.f("externalMembersDisabled",c,b,1),c,b,1,0,0,"")||this.b("enable");this.s(this.f("externalMembersDisabled",c,b,1),c,b,0,123,130,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("disable")}),c.pop());this.b('-restrict" href="#"> Disable invites ');this.s(this.f("externalMembersDisabled",
c,b,1),c,b,0,223,258,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="icon-sm icon-check"/>')}),c.pop());this.b(' <span class="sub-name">If disabled, organization members won\u2019t be able to invite others outside of the organization. Org members wil still be able to add other org members to org boards.</span> </a> </li> ');return this.fl()},change_org_vis:function(c,b,d){this.b(d=d||"");this.b('<li> <a class="highlight-icon js-select-members" href="#"> Private');this.s(this.f("permissionLevel_private",
c,b,1),c,b,0,94,129,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="icon-sm icon-check"/>')}),c.pop());this.b(' <span class="sub-name">');this.b(this.v(this.f("privateText",c,b,0)));this.b('</span> </a> </li> <li> <a class="highlight-icon js-select-public" href="#"> Public');this.s(this.f("permissionLevel_public",c,b,1),c,b,0,306,341,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="icon-sm icon-check"/>')}),c.pop());this.b(' <span class="sub-name">');this.b(this.v(this.f("publicText",
c,b,0)));this.b("</span> </a> </li> ");return this.fl()},checkitem_inline:function(c,b,d){this.b(d||"");this.b(' checklist item "');this.b(this.v(this.f("name",c,b,0)));this.b('" ');return this.fl()},checklist:function(c,b,d){this.b(d=d||"");this.b('<div class="window-module-title window-module-title-no-divider clearfix');this.s(this.f("__ed",c,b,1),c,b,0,80,88,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ed grab")}),c.pop());this.b('"> <span class="window-module-title-icon icon-lg icon-checklist"></span> ');
this.s(this.f("__ed",c,b,1),c,b,0,179,719,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="editable non-empty checklist-title" attr="name"> <h3 class="current hide-on-edit"');f.s(f.f("__ed",b,d,1),b,d,0,282,310,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' style="margin-right: 40px;"')}),b.pop());f.b(">");f.b(f.v(f.f("name",b,d,0)));f.b('</h3> <div class="edit edit-heavy"> <input type="text" class="field full single-line"/> </div> <p class="edits-warning quiet">You have unsaved edits on this field. <a href=\'#\' class=\'js-view-edits\'>View edits</a> or <a href=\'#\' class=\'js-discard-edits\'>discard</a>.</p> <span class="window-module-title-option icon-sm icon-menu dark-hover hide-on-edit js-open-checklist-menu"></span> </div> ')}),
c.pop());this.b(" ");this.s(this.f("__ed",c,b,1),c,b,1,0,0,"")||(this.b(" <h3>"),this.b(this.v(this.f("name",c,b,0))),this.b("</h3> "));this.b(' </div> <div class="checklist-progress"> <span class="checklist-progress-percentage js-checklist-progress-percent">0%</span> <div class="checklist-progress-bar"> <div class="checklist-progress-bar-current js-checklist-progress-bar"></div> </div> </div> <div class="checklist-items-list js-checklist-items-list js-no-higher-edits"></div> ');this.s(this.f("__ed",
c,b,1),c,b,0,1112,1615,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="checklist-new-item gutter js-new-checklist-item"> <textarea class="checklist-new-item-text js-new-checklist-item-input" placeholder="Add item"></textarea> <div class="add-controls clearfix"> <input type="submit" class="primary confirm js-add-checklist-item" value="Add"> <a href="#" class="icon-lg icon-close dark-hover cancel js-cancel-checklist-item"></a> <a class="option options-menu dark-hover js-open-editing-menu" href="#"> <span class="icon-lg icon-menu"></span> </a> </div> </div> ')}),
c.pop());this.b(" ");return this.fl()},checklist_add_menu:function(c,b,d){this.b(d=d||"");this.b('<form> <label for="id-checklist">Title</label> <input class="js-checklist-title js-autofocus" type="text" id="id-checklist" value="Checklist"> ');this.s(this.f("hasChecklistCards",c,b,1),c,b,0,165,530,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="js-copy-checklist"> <label for="js-checklist-copy-source">Copy Items From\u2026</label> <select class="js-checklist-copy-source"> <option value="" selected>(none)</option> ');
f.s(f.f("checklistCards",b,d,1),b,d,0,365,492,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <optgroup label="');e.b(e.v(e.f("name",b,d,0)));e.b('"> ');e.s(e.f("checklists",b,d,1),b,d,0,409,464,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b(' <option value="');e.b(e.v(e.f("id",b,d,0)));e.b('">');e.b(e.v(e.f("name",b,d,0)));e.b(" (");e.b(e.v(e.f("length",b,d,0)));e.b(")</option> ")}),b.pop());e.b(" </optgroup> ")}),b.pop());f.b(" </select> </span> ")}),c.pop());this.b(' <input type="submit" class="primary wide confirm js-add-checklist" value="Add"> </form> ');
return this.fl()},checklist_inline:function(c,b,d){this.b(d||"");this.b(' checklist "');this.b(this.v(this.f("name",c,b,0)));this.b('" ');return this.fl()},checklist_item:function(c,b,d){this.b(d=d||"");this.b('<div class="checklist-item-checkbox ');this.s(this.f("__ed",c,b,1),c,b,0,45,77,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("enabled js-toggle-checklist-item")}),c.pop());this.b('">&#x2713;</div> <div class="checklist-item-details non-empty ');this.s(this.f("__ed",c,b,1),c,b,0,157,165,"{{ }}")&&
(this.rs(c,b,function(b,d,f){f.b("editable")}),c.pop());this.b('" attr="name"> <p class="checklist-item-details-text current hide-on-edit markeddown">');this.b(this.t(this.f("nameHtml",c,b,0)));this.b("</p> ");this.s(this.f("__ed",c,b,1),c,b,0,288,602,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" <div class=\"edit delete convert options-menu\"> <textarea type=\"text\" class=\"field full single-line js-checkitem-input\"></textarea> </div> <p class=\"edits-warning quiet\">You have unsaved edits on this field. <a href='#' class='js-view-edits'>View edits</a> or <a href='#' class='js-discard-edits'>discard</a>.</p> ")}),
c.pop());this.b(" </div> ");return this.fl()},closed_boards:function(c,b,d){this.b(d=d||"");this.b('<div class="window-header"> <span class="window-header-icon icon-lg icon-archive"/> <h2 class="window-title">Closed Boards</h2> </div> <div class="window-main-col"> ');this.s(this.f("empty",c,b,1),c,b,1,0,0,"")||this.b(' <div class="window-module clearfix"> <ul class="archive-list gutter js-archive-items"/> </div> ');this.b(" ");this.s(this.f("empty",c,b,1),c,b,0,292,346,"{{ }}")&&(this.rs(c,b,function(b,
d,f){f.b(' <p class="empty-list">No boards have been closed</p> ')}),c.pop());this.b(' </div> <div class="window-sidebar"> <p class="helper">You have to have been a board admin to re-open a closed board.</p> </div> ');return this.fl()},comment_edit_controls:function(c,b,d){this.b(d||"");this.b('<div class="edit-controls clearfix"> ');this.b(this.rp("comment_options",c,b,""));this.b(' <input type="submit" class="primary confirm js-save-edit" value="Save"> </div> ');return this.fl()},comment_options:function(c,
b,d){this.b(d||"");this.b('<div class="clearfix" style="margin-bottom: 6px;"> <a href="#" class="quiet-button left js-comment-add-attachment" title="Attach files from your computer, Google Drive, Dropbox, and other services. You can also drag\'n\'drop files from your desktop to upload them.">Add an attachment\u2026</a> <a href="#" class="quiet-button left js-comment-mention-member" title="Make sure a member gets a notification about this comment.">Mention a member\u2026</a> <a href="#" class="quiet-button left js-comment-add-emoji" title="Add emoji to this comment.">Add emoji\u2026</a> </div> ');
return this.fl()},confirm:function(c,b,d){this.b(d=d||"");this.b("<p> ");this.b(this.v(this.f("text",c,b,0)));this.b(' </p> <input type="submit" class="js-confirm ');this.b(this.v(this.f("confirmBtnClass",c,b,0)));this.s(this.f("cancelText",c,b,1),c,b,1,0,0,"")||this.b(" full");this.b('" value="');this.b(this.v(this.f("confirmText",c,b,0)));this.b('"> ');this.s(this.f("cancelText",c,b,1),c,b,0,153,217,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <input type="submit" class="js-cancel" value="');f.b(f.v(f.f("cancelText",
b,d,0)));f.b('"> ')}),c.pop());this.b(" ");return this.fl()},confirm_merge:function(c,b,d){this.b(d||"");this.b('<p> You are about to add the email address <span class="bold">');this.b(this.v(this.f("ghostEmail",c,b,0)));this.b('</span> to the account </p> <ul class="pop-over-member-list js-member"> </ul> <input type="submit" class="js-confirm full" value="');this.b(this.v(this.f("confirmText",c,b,0)));this.b('"> ');return this.fl()},connect_failed:function(c,b,d){this.b(d=d||"");this.b(this.v(this.f("msg",
c,b,0)));this.b("<br /> ");this.s(this.f("allowReset",c,b,1),c,b,0,29,101,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <a href="#" onclick="window.ajaxQueueReset(); return false;">Retry</a> ')}),c.pop());this.b(' <a href="#" onclick="window.location.reload()">Reload page</a> ');return this.fl()},credit_card:function(c,b,d){this.b(d=d||"");this.b(" ");this.s(this.f("formAreas_subscribingTo",c,b,1),c,b,0,29,106,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <p class="gutter quiet">Subscribing to <strong>');
f.b(f.v(f.f("productName",b,d,0)));f.b("</strong></p> ")}),c.pop());this.b(' <form class="credit-card-form" method="POST"> <p class="gutter error hidden"></p> <input name="products" type="hidden" maxlength="50" size="30" id="products" value="');this.b(this.v(this.f("productNumber",c,b,0)));this.b('"> ');this.s(this.f("formAreas_billingOptions",c,b,1),c,b,0,349,1475,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="window-module"> <div class="window-module-title"> <h3>Billing</h3> </div> <div class="gutter clearfix"> ');
f.s(f.f("productOptions",b,d,1),b,d,0,485,1254,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <div class="radio-div clear clearfix" style="margin-bottom: 4px;"> <input type="radio" name="product" value="');e.b(e.v(e.f("id",b,d,0)));e.b('" id="product-');e.b(e.v(e.f("id",b,d,0)));e.b('"');e.s(e.f("checked",b,d,1),b,d,0,634,642,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b(" checked")}),b.pop());e.b('> <label for="product-');e.b(e.v(e.f("id",b,d,0)));e.b('"> ');e.s(e.f("isMonthly",b,d,1),b,d,0,699,931,"{{ }}")&&
(e.rs(b,d,function(b,d,e){e.b(" Monthly ");e.s(e.f("isPerUser",b,d,1),b,d,0,722,863,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b(" ");e.s(e.f("totalPerUserPrice",b,d,1),b,d,0,745,781,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b(" - $");e.b(e.v(e.f("totalPerUserPrice",b,d,0)));e.b(" per month ")}),b.pop());e.b(" ($");e.b(e.v(e.f("price",b,d,0)));e.b(" per ");e.b(e.v(e.f("billableMemberCount",b,d,0)));e.b(" members per month) ")}),b.pop());e.b(" ");e.s(e.f("isPerUser",b,d,1),b,d,1,0,0,"")||(e.b(" ($"),e.b(e.v(e.f("price",
b,d,0))),e.b(" per month) "));e.b(" ")}),b.pop());e.b(" ");e.s(e.f("isYearly",b,d,1),b,d,0,959,1224,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b(" Yearly ");e.s(e.f("isPerUser",b,d,1),b,d,0,981,1120,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b(" ");e.s(e.f("totalPerUserPrice",b,d,1),b,d,0,1004,1039,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b(" - $");e.b(e.v(e.f("totalPerUserPrice",b,d,0)));e.b(" per year ")}),b.pop());e.b(" ($");e.b(e.v(e.f("price",b,d,0)));e.b(" per ");e.b(e.v(e.f("billableMemberCount",b,d,0)));
e.b(" members per year) ")}),b.pop());e.b(" ");e.s(e.f("isPerUser",b,d,1),b,d,1,0,0,"")||(e.b(" ($"),e.b(e.v(e.f("price",b,d,0))),e.b(" per year) "));e.b(" ");e.s(e.f("save",b,d,1),b,d,0,1196,1214,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b(" (Save ");e.b(e.v(e.f("save",b,d,0)));e.b("!) ")}),b.pop());e.b(" ")}),b.pop());e.b(" </label> </div> ")}),b.pop());f.b(" ");f.s(f.f("showRecommend",b,d,1),b,d,0,1292,1442,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <div class="recommend" style="margin-top: 16px;"> \u2026or get ');
e.b(e.v(e.f("productName",b,d,0)));e.b(' for free by <a href="/recommend">inviting new members to Trello</a> </div> ')}),b.pop());f.b(" </div> </div> ")}),c.pop());this.b(" ");this.s(this.f("formAreas_creditCard",c,b,1),c,b,0,1530,13885,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="window-module"> <div class="window-module-title"> <h3>Credit Card for account</h3> </div> <div class="gutter" style="margin-top: 12px;"> <label for="name"> Name: <span class="quiet">(as it appears on the credit card)</span></label> <input name="name" type="text" maxlength="50" size="30" id="name" class="text"> <label for="name" class="form-error hide">Please provide your full name, as shown on the card, for credit card verification.</label> <div class="left"> <label for="cardNumber">Card Number:</label> <input name="cardNumber" type="text" maxlength="19" size="16" id="cardNumber" autocomplete="off" style="width:190px;margin-right:16px;"> <label for="cardNumber" class="form-error hide" style="width:190px;margin-right:16px;">Please provide your full card number for credit card verification.</label> </div> <div class="left"> <label for="cvv">CVV:</label> <input name="cvv" type="text" maxlength="4" size="4" id="cvv" style="width:45px;"> </div> <br class="clear"> <label for="expMonth"> Expiration date: </label> <div class="clearfix"> <select name="expMonth" style="width:120px;margin-right:8px;display:inline;"> <option value="01">01 - January</option> <option value="02">02 - February</option> <option value="03">03 - March</option> <option value="04">04 - April</option> <option value="05">05 - May</option> <option value="06">06 - June</option> <option value="07">07 - July</option> <option value="08">08 - August</option> <option value="09">09 - September</option> <option value="10">10 - October</option> <option value="11">11 - November</option> <option value="12">12 - December</option> </select> <select name="expYear" style="width:100px;display:inline;"> <option value="14" selected="selected">2014</option> <option value="15">2015</option> <option value="16">2016</option> <option value="17">2017</option> <option value="18">2018</option> <option value="19">2019</option> <option value="20">2020</option> <option value="21">2021</option> <option value="22">2022</option> <option value="23">2023</option> <option value="24">2024</option> <option value="25">2025</option> <option value="26">2026</option> <option value="27">2027</option> <option value="28">2028</option> <option value="29">2029</option> <option value="30">2030</option> <option value="31">2031</option> <option value="32">2032</option> <option value="33">2033</option> <option value="34">2034</option> <option value="35">2035</option> <option value="36">2036</option> <option value="37">2037</option> <option value="38">2038</option> </select> </div> <br class="clear"> </div> <div class="window-module"> <div class="window-module-title"> <h3>Billing Address</h3> </div> <div class="gutter" style="margin-top: 12px;"> <label for="companyName" class="quiet">Company Name:</label> <input name="companyName" type="text" maxlength="50" size="30" id="companyName" class="text"> <label for="streetAddress1">Street Address 1:</label> <input name="streetAddress1" type="text" maxlength="255" size="30" id="streetAddress1" class="text"> <label for="streetAddress1" class="form-error hide">Please enter your address.</label> <label for="streetAddress2" class="quiet">Street Address 2:</label> <input name="streetAddress2" type="text" maxlength="255" size="30" id="streetAddress2" class="text"> <label for="city">City:</label> <input name="city" type="text" maxlength="30" size="30" id="city" class="text"> <label for="city" class="form-error hide">Please enter your city.</label> <label for="state">State/Province/Region:</label> <input name="state" type="text" maxlength="20" size="30" id="state" class="text"> <label for="state" class="form-error hide">U.S. and Canada addresses require a two-letter abbreviation.</label> <label for="zipCode">ZIP/Postal Code:</label> <input name="zipCode" type="text" maxlength="10" size="30" id="zipCode" class="text"> <label for="zipCode" class="form-error hide">U.S. addresses require a 5 or 9 digit zip code.</label> <label for="country">Country:</label> <select name="country" id="country"> <option selected="selected" value="US">United States</option> <option value="GB">United Kingdom</option> <option value="CA">Canada</option> <option value="AU">Australia</option> <option value="DE">Germany</option> <option value="NL">Netherlands</option> <option value="AF">Afghanistan</option> <option value="AL">Albania</option> <option value="DZ">Algeria</option> <option value="AS">American Samoa</option> <option value="AD">Andorra</option> <option value="AI">Anguilla</option> <option value="AG">Antiqua and Barbuda</option> <option value="AR">Argentina</option> <option value="AM">Armenia</option> <option value="AW">Aruba</option> <option value="AU">Australia</option> <option value="AT">Austria</option> <option value="AZ">Azerbaijan</option> <option value="BS">Bahamas</option> <option value="BH">Bahrain</option> <option value="BD">Bangladesh</option> <option value="BB">Barbados</option> <option value="BY">Belarus</option> <option value="BE">Belgium</option> <option value="BZ">Belize</option> <option value="BJ">Benin</option> <option value="BM">Bermuda</option> <option value="BT">Bhutan</option> <option value="BO">Bolivia</option> <option value="BV">Bouvet Islands</option> <option value="BR">Brazil</option> <option value="IO">British Indian Ocean Territory</option> <option value="VI">British Virgin Islands</option> <option value="BN">Brunei</option> <option value="BG">Bulgaria</option> <option value="BF">Burkina Faso</option> <option value="BI">Burundi</option> <option value="KH">Cambodia</option> <option value="CM">Cameroon</option> <option value="CA">Canada</option> <option value="CV">Cape Verde</option> <option value="KY">Cayman Islands</option> <option value="CF">Central African Republic</option> <option value="TD">Chad</option> <option value="CL">Chile</option> <option value="CN">China</option> <option value="CO">Colombia</option> <option value="KM">Comoros</option> <option value="CG">Congo</option> <option value="CR">Costa Rica</option> <option value="CI">Cote D\u2019Ivoire</option> <option value="HR">Croatia</option> <option value="CY">Cyprus</option> <option value="CZ">Czech Republic</option> <option value="DK">Denmark</option> <option value="DJ">Djibouti</option> <option value="DM">Dominica</option> <option value="DO">Dominican Republic</option> <option value="EG">Egypt</option> <option value="SV">El Salvador</option> <option value="EC">Equador</option> <option value="GQ">Equatorial Guinea</option> <option value="ER">Eritrea</option> <option value="EE">Estonia</option> <option value="ET">Ethiopia</option> <option value="FK">Falkland Islands</option> <option value="FO">Faroe Islands</option> <option value="FM">Federated States of Micronesia</option> <option value="FJ">Fiji</option> <option value="FI">Finland</option> <option value="FR">France</option> <option value="GF">French Guiana</option> <option value="PF">French Polynesia</option> <option value="GA">Gabon</option> <option value="GM">Gambia</option> <option value="GE">Georgia</option> <option value="DE">Germany</option> <option value="GH">Ghana</option> <option value="GI">Gibraltar</option> <option value="GR">Greece</option> <option value="GL">Greenland</option> <option value="GD">Grenada</option> <option value="GP">Guadeloupe</option> <option value="GU">Guam</option> <option value="GT">Guatemala</option> <option value="GN">Guinea</option> <option value="GW">Guinea-Bissau</option> <option value="GY">Guyana</option> <option value="HT">Haiti</option> <option value="HN">Honduras</option> <option value="HK">Hong Kong</option> <option value="HU">Hungary</option> <option value="IS">Iceland</option> <option value="IN">India</option> <option value="ID">Indonesia</option> <option value="IE">Ireland</option> <option value="IL">Israel</option> <option value="IT">Italy</option> <option value="JM">Jamaica</option> <option value="JP">Japan</option> <option value="JO">Jordan</option> <option value="KZ">Kazakhstan</option> <option value="KE">Kenya</option> <option value="KI">Kiribati</option> <option value="KW">Kuwait</option> <option value="KG">Kyrgyzstan</option> <option value="LA">Laos</option> <option value="LV">Latvia</option> <option value="LB">Lebanon</option> <option value="LS">Lesotho</option> <option value="LR">Liberia</option> <option value="LI">Liechtenstein</option> <option value="LT">Lithuania</option> <option value="LU">Luxembourg</option> <option value="MO">Macau</option> <option value="MG">Madagascar</option> <option value="MW">Malawi</option> <option value="MY">Malaysia</option> <option value="MV">Maldives</option> <option value="ML">Mali</option> <option value="MT">Malta</option> <option value="MH">Marshall Islands</option> <option value="MQ">Martinique</option> <option value="MR">Mauritania</option> <option value="MU">Mauritius</option> <option value="YT">Mayotte</option> <option value="FX">Metropolitan France</option> <option value="MX">Mexico</option> <option value="MD">Moldova</option> <option value="MN">Mongolia</option> <option value="MA">Morocco</option> <option value="MZ">Mozambique</option> <option value="NA">Namibia</option> <option value="NR">Nauru</option> <option value="NP">Nepal</option> <option value="AN">Netherlands Antilles</option> <option value="NL">Netherlands</option> <option value="NC">New Caledonia</option> <option value="NZ">New Zealand</option> <option value="NI">Nicaragua</option> <option value="NE">Niger</option> <option value="NG">Nigeria</option> <option value="MP">Northern Mariana Islands</option> <option value="NO">Norway</option> <option value="OM">Oman</option> <option value="PK">Pakistan</option> <option value="PW">Palau</option> <option value="PA">Panama</option> <option value="PG">Papua New Guinea</option> <option value="PY">Paraguay</option> <option value="PE">Peru</option> <option value="PE">Peru</option> <option value="PH">Philippines</option> <option value="PN">Pitcairn</option> <option value="PL">Poland</option> <option value="PT">Portugal</option> <option value="PR">Puerto Rico</option> <option value="QA">Qatar</option> <option value="KR">Republic of Korea</option> <option value="RE">Reunion</option> <option value="RO">Romania</option> <option value="RU">Russia</option> <option value="ST">Sao Tome and Principe</option> <option value="SA">Saudi Arabia</option> <option value="SN">Senegal</option> <option value="SC">Seychelles</option> <option value="SL">Sierra Leone</option> <option value="SG">Singapore</option> <option value="SK">Slovakia</option> <option value="SI">Slovenia</option> <option value="SB">Solomon Islands</option> <option value="SO">Somalia</option> <option value="ZA">South Africa</option> <option value="ES">Spain</option> <option value="LK">Sri Lanka</option> <option value="SH">St. Helena</option> <option value="KN">St. Kitts and Nevis</option> <option value="LC">St. Lucia</option> <option value="VC">St. Vincent and the Grenadines</option> <option value="SD">Sudan</option> <option value="SR">Suriname</option> <option value="SJ">Svalbard and Jan Mayen Islands</option> <option value="SZ">Swaziland</option> <option value="SE">Sweden</option> <option value="CH">Switzerland</option> <option value="SY">Syria</option> <option value="TW">Taiwan</option> <option value="TJ">Tajikistan</option> <option value="TZ">Tanzania</option> <option value="TH">Thailand</option> <option value="MK">The former Yugoslav Republic of Macedonia</option> <option value="TG">Togo</option> <option value="TO">Tonga</option> <option value="TT">Trinidad and Tobago</option> <option value="TR">Turkey</option> <option value="TM">Turkmenistan</option> <option value="TC">Turks and Caicos Islands</option> <option value="TV">Tuvalu</option> <option value="UG">Uganda</option> <option value="UA">Ukraine</option> <option value="AE">United Arab Emirates</option> <option value="GB">United Kingdom</option> <option value="US">United States</option> <option value="UY">Uruguay</option> <option value="UZ">Uzbekistan</option> <option value="VU">Vanuatu</option> <option value="VA">Vatican City</option> <option value="VE">Venezuela</option> <option value="VN">Vietnam</option> <option value="EH">Western Sahara</option> <option value="YE">Yemen</option> <option value="YU">Yugoslavia</option> <option value="ZR">Zaire</option> <option value="ZM">Zambia</option> <option value="ZW">Zimbabwe</option> </select> </div> </div> ')}),
c.pop());this.b(" ");this.s(this.f("formAreas_billingContactHidden",c,b,1),c,b,0,13946,14195,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <input name="billingContactFullName" type="hidden" id="billingContactFullName" class="text" value="');f.b(f.v(f.f("billingFullName",b,d,0)));f.b('" maxlength="50"> <input name="billingContactEmail" type="hidden" id="billingContactEmail" class="text" value="');f.b(f.v(f.f("billingEmail",b,d,0)));f.b('"> ')}),c.pop());this.b(' <hr class="gutter"> ');this.s(this.f("formAreas_creditCard",
c,b,1),c,b,0,14276,14840,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div id="divAcceptTOS" class="gutter"> <p class="js-tos-error error hide">You must accept the Terms of Service and Privacy Policy</p> <div class="check-div clearfix"> <input id="acceptTOS" class="inline bottom" type="checkbox" name="acceptTOS" value="true"> <label for="acceptTOS" class="inline bottom">I accept the <a href="https://trello.com/legal/" target="_blank" rel="popup" title="Terms of Service">Terms of Service</a> and the <a href="https://trello.com/privacy" target="_blank" rel="popup" title="Privacy Policy">Privacy Policy</a></label> </div> </div> ')}),
c.pop());this.b(' <hr class="gutter"> <div class="gutter"> <input type="submit" name="');this.b(this.v(this.f("action",c,b,0)));this.b('" value="Continue" id="save" class="primary ');this.b(this.v(this.f("action",c,b,0)));this.b('"> </div> </form> ');return this.fl()},crop_photo:function(c,b,d){this.b(d||"");this.b('<img class="crop-image"> <button class="primary js-done">Looks good!</button> <button class="js-back">Try again\u2026</button> ');return this.fl()},date_picker:function(c,b,d){this.b(d=
d||"");this.b('<div class="datepicker-select clearfix"> <div class="datepicker-select-date"> <label class="datepicker-select-label"> Date </label> <input type="text" class="datepicker-select-input js-dpicker-date-input js-autofocus" placeholder="Enter date" tabindex=1> </div> <div class="datepicker-select-time"> <label class="datepicker-select-label"> Time </label> <input type="text" class="datepicker-select-input js-dpicker-time-input" placeholder="Enter time" value="12:00pm" tabindex=2> <select class="js-dpicker-time-select"></select> </div> </div> <div class="pickers clear js-dpicker-cal"></div> <div class="datepicker-confirm-btns"> <input type="submit" class="primary wide confirm js-save-edit" value="Save" tabindex=3> ');
this.s(this.f("hasDueDate",c,b,1),c,b,0,732,816,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <a href="#" class="button negate remove-date js-remove-date" tabindex=4>Remove</a> ')}),c.pop());this.b(' </div> <div class="js-enable-cal hide"> <hr> <p> <a href="#" class="quiet-button w-img js-enable-calendar-powerup"><span class="icon-sm icon-rocket"></span>Enable the Calendar Power-Up!</a> </p> <p class="bottom quiet"> You\u2019ll get a calendar view of your cards and an iCal feed. Woo! </p> </div> <div class="js-cal-enabled hide"> <hr> <p class="helper"> Click the \u201cCalendar\u201d button in the board header to open the calendar. ');
this.s(this.f("__own",c,b,1),c,b,0,1266,1339,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("To change calendar settings, click \u201cPower-Ups\u201d in the board sidebar menu.")}),c.pop());this.b(" </p> </div> ");return this.fl()},dialog_close_button:function(c,b,d){this.b(d||"");this.b('<a class="icon-lg icon-close dialog-close-button js-close-window" href="#" title="Close this dialog window."></a> ');return this.fl()},early_version_feedback_form:function(c,b,d){this.b(d||"");this.b('<div class="early-feedback-section-background"></div> <div class="early-feedback-section markeddown"> <h1 class="early-feedback-section-header">Ahoy, Explorer!</h1> <p class="early-feedback-section-intro-text"> You\u2019re sailing the uncharted seas of a new, exploratory version of Trello. Not everyone has this version yet and your feedback could determine what stays, goes, or changes. </p> <p class="early-feedback-section-intro-text"> What\u2019s new in this version? There\u2019s a whole new card back! </p> <ul class="early-feedback-section-intro-text"> <li>You can see <strong>card covers and stickers</strong> on the back.</li> <li><strong>Attachments display in Trello</strong> and have bigger, nicer previews.</li> <li>The card is <strong>wider and more streamlined</strong>, making more room for your stuff.</li> </ul> <p class="early-feedback-section-intro-text"> In the form below, let us know if you loved something new, found something confusing, or noticed something strange. This will go to our inbox. Although we can\u2019t promise to respond, we\u2019ll definitely read it. <strong>Please keep it related to the changes to the card back!</strong> Thanks! </p> <p class="early-feedback-section-intro-text"> Safe travels,<br> The Trello Team </p> <hr> <p class="quiet hide js-submitted-feedback"> Thanks! Your feedback has been submitted. You\u2019ll be able to see this form for a while so please send us more feedback in the future if you have it. </p> <form class="js-feedback-form"> <p>Dear Trello Team,</p> <textarea name="bodytext" class="js-autofocus js-feedback-form-text"></textarea> <input class="wide primary js-feedback-form-submit" type="submit" value="Send"> </form> </div> ');
return this.fl()},edit_controls:function(c,b,d){this.b(d||"");this.b('<div class="edit-controls clearfix"> <input type="submit" class="primary confirm js-save-edit" value="Save"> <a href="#" class="icon-lg icon-close dark-hover cancel js-cancel-edit"></a> <a href="#" class="option delete js-delete-item">Delete</a> <a href="#" class="option convert js-convert-item-to-card">Convert to Card</a> <a class="option options-menu dark-hover js-open-editing-menu" href="#"> <span class="icon-lg icon-menu"> </a> </div> ');
return this.fl()},edit_in_progress:function(c,b,d){this.b(d=d||"");this.s(this.f("members",c,b,1),c,b,0,12,451,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="edit-in-progress"> <span class="inline-member"> ');f.s(f.f("avatarHash",b,d,1),b,d,0,89,238,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b('<img class="inline-member-av" src="');e.b(e.v(e.f("__avatarDomain",b,d,0)));e.b("/");e.b(e.v(e.f("avatarHash",b,d,0)));e.b('/30.png" alt="');e.b(e.v(e.f("fullName",b,d,0)));e.b(" (");e.b(e.v(e.f("username",
b,d,0)));e.b(')" title="');e.b(e.v(e.f("fullName",b,d,0)));e.b(" (");e.b(e.v(e.f("username",b,d,0)));e.b(')" />')}),b.pop());f.b(" ");f.s(f.f("avatarHash",b,d,1),b,d,1,0,0,"")||(f.b('<span class="quiet initials" title="'),f.b(f.v(f.f("fullName",b,d,0))),f.b(" ("),f.b(f.v(f.f("username",b,d,0))),f.b(')">'),f.b(f.v(f.f("initials",b,d,0))),f.b("</span>"));f.b(" </span>");f.s(f.f("icon",b,d,1),b,d,0,385,433,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b('<span class="icon icon-sm icon-');e.b(e.v(e.f("icon",
b,d,0)));e.b('"></span>')}),b.pop());f.b(" </span> ")}),c.pop());return this.fl()},embedly:function(c,b,d){this.b(d=d||"");this.b('<div class="embed embed-');this.b(this.v(this.f("type",c,b,0)));this.b(" embed-provider-");this.b(this.v(this.f("provider_name",c,b,0)));this.b('"> ');this.s(this.f("type_photo",c,b,1),c,b,1,0,0,"")||(this.b(" "),this.s(this.f("requireHttps",c,b,1),c,b,0,101,116,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(f.t(f.f("htmlHttps",b,d,0)))}),c.pop()),this.s(this.f("requireHttps",
c,b,1),c,b,1,0,0,"")||this.b(this.t(this.f("html",c,b,0))),this.b(" "));this.b(" ");this.s(this.f("type_photo",c,b,1),c,b,0,209,278,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <a href="');f.b(f.v(f.f("originalUrl",b,d,0)));f.b('" target="_blank"><img src="');f.b(f.v(f.f("url",b,d,0)));f.b('" /></a> ')}),c.pop());this.b(" </div> ");return this.fl()},emoji_upgrade_ad:function(c,b,d){this.b(d||"");this.s(this.f("hasGold",c,b,1),c,b,1,0,0,"")||this.b(' <p> You can upload custom emoji with <a href="/gold">Trello Gold</a>. </p> ');
this.b(" ");this.s(this.f("hasJPS",c,b,1),c,b,1,0,0,"")||this.b(' <p> Looking to get custom emoji for your entire organization? <a href="/business-class">Check out Business Class.</a> </p> ');this.b(" ");this.s(this.f("hasOldBC",c,b,1),c,b,1,0,0,"")||this.b(' <p> Looking to get custom emoji for your entire organization? <a href="/business-class">Check out Business Class.</a> </p> ');this.b(" ");return this.fl()},empty_list:function(c,b,d){this.b(d||"");this.b('<p class="empty-list ');this.b(this.v(this.f("classes",
c,b,0)));this.b('" style="');this.b(this.v(this.f("style",c,b,0)));this.b('">');this.b(this.v(this.f("message",c,b,0)));this.b("</p> ");return this.fl()},entity:function(c,b,d){this.b(d=d||"");this.s(this.f("textType",c,b,1),c,b,0,13,130,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("isContext",b,d,1),b,d,0,28,76,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" ");e.s(e.f("hideIfContext",b,d,1),b,d,1,0,0,"")||(e.b(" "),e.b(e.v(e.f("text",b,d,0))),e.b(" "));e.b(" ")}),b.pop());f.b(" ");f.s(f.f("isContext",
b,d,1),b,d,1,0,0,"")||(f.b(" "),f.b(f.v(f.f("text",b,d,0))),f.b(" "));f.b(" ")}),c.pop());this.b(" ");this.s(this.f("cardType",c,b,1),c,b,0,157,331,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("isContext",b,d,1),b,d,0,172,221,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" ");e.s(e.f("hideIfContext",b,d,1),b,d,1,0,0,"")||e.b(" this card ");e.b(" ")}),b.pop());f.b(" ");f.s(f.f("isContext",b,d,1),b,d,1,0,0,"")||(f.b(' <a href="'),f.b(f.v(f.f("url",b,d,0))),f.b('" class="inline-object action-card">'),
f.b(f.v(f.f("name",b,d,0))),f.b("</a> "));f.b(" ")}),c.pop());this.b(" ");this.s(this.f("boardType",c,b,1),c,b,0,359,484,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("isContext",b,d,1),b,d,0,374,386,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" this board ")}),b.pop());f.b(" ");f.s(f.f("isContext",b,d,1),b,d,1,0,0,"")||(f.b(' <a href="'),f.b(f.v(f.f("url",b,d,0))),f.b('" class="inline-object">'),f.b(f.v(f.f("name",b,d,0))),f.b("</a> "));f.b(" ")}),c.pop());this.b(" ");this.s(this.f("organizationType",
c,b,1),c,b,0,520,832,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("isContext",b,d,1),b,d,0,535,554,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" this organization ")}),b.pop());f.b(" ");f.s(f.f("isContext",b,d,1),b,d,1,0,0,"")||(f.b(" "),f.s(f.f("url",b,d,1),b,d,0,592,774,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" ");e.s(e.f("displayName",b,d,1),b,d,0,609,670,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b(' <a href="');e.b(e.v(e.f("url",b,d,0)));e.b('" class="inline-object">');e.b(e.v(e.f("displayName",
b,d,0)));e.b("</a> ")}),b.pop());e.b(" ");e.s(e.f("displayName",b,d,1),b,d,1,0,0,"")||(e.b(' <a href="'),e.b(e.v(e.f("url",b,d,0))),e.b('" class="inline-object">'),e.b(e.v(e.f("name",b,d,0))),e.b("</a> "));e.b(" ")}),b.pop()),f.b(" "),f.s(f.f("url",b,d,1),b,d,1,0,0,"")||f.b(" an organization "),f.b(" "));f.b(" ")}),c.pop());this.b(" ");this.s(this.f("listType",c,b,1),c,b,0,867,877,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.b(f.v(f.f("name",b,d,0)));f.b(" ")}),c.pop());this.b(" ");this.s(this.f("checklistType",
c,b,1),c,b,0,909,919,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.b(f.v(f.f("name",b,d,0)));f.b(" ")}),c.pop());this.b(" ");this.s(this.f("checkItemType",c,b,1),c,b,0,956,1033,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("nameHtml",b,d,1),b,d,0,970,984,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(e.t(e.f("nameHtml",b,d,0)))}),b.pop());f.b(" ");f.s(f.f("nameHtml",b,d,1),b,d,1,0,0,"")||f.b(f.v(f.f("name",b,d,0)));f.b(" ")}),c.pop());this.b(" ");this.s(this.f("commentType",c,b,1),c,b,0,1068,
1277,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="action-comment markeddown"> ');f.s(f.f("canEdit",b,d,1),b,d,1,0,0,"")||f.b(f.t(f.f("textHtml",b,d,0)));f.b(" ");f.s(f.f("canEdit",b,d,1),b,d,0,1160,1257,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <div class="current-comment">');e.b(e.t(e.f("textHtml",b,d,0)));e.b('</div> <textarea class="js-text">');e.b(e.v(e.f("text",b,d,0)));e.b("</textarea> ")}),b.pop());f.b(" </div> ")}),c.pop());this.b(" ");this.s(this.f("labelType",c,b,1),c,b,0,1308,
1489,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="card-label ');f.b(f.v(f.f("color",b,d,0)));f.b('-label" title="');f.s(f.f("text",b,d,1),b,d,0,1366,1374,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(e.v(e.f("text",b,d,0)))}),b.pop());f.s(f.f("text",b,d,1),b,d,1,0,0,"")||(f.b(f.v(f.f("color",b,d,0))),f.b(" label (default)"));f.b('"> ');f.s(f.f("text",b,d,1),b,d,0,1438,1446,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(e.v(e.f("text",b,d,0)))}),b.pop());f.b(" ");f.s(f.f("text",b,d,1),b,d,1,0,0,"")||
f.b("&nbsp;");f.b(" </span> ")}),c.pop());this.b(" ");this.s(this.f("attachmentType",c,b,1),c,b,0,1523,1926,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("known",b,d,1),b,d,0,1534,1696,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <a href="');e.b(e.v(e.f("url",b,d,0)));e.b('" target="_blank" class="known-service-link"><img class="known-service-icon" src="');e.b(e.v(e.f("icon",b,d,0)));e.b('" alt="');e.b(e.v(e.f("name",b,d,0)));e.b('"><span id="');e.b(e.v(e.f("id",b,d,0)));e.b('">');e.b(e.v(e.f("text",
b,d,0)));e.b("</span></a> ")}),b.pop());f.b(" ");f.s(f.f("known",b,d,1),b,d,1,0,0,"")||(f.b(" "),f.s(f.f("link",b,d,1),b,d,0,1727,1836,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <a href="');e.b(e.v(e.f("url",b,d,0)));e.b('" class="js-open-attachment-viewer" data-idattachment="');e.b(e.v(e.f("id",b,d,0)));e.b('" target="_blank">');e.b(e.v(e.f("name",b,d,0)));e.b("</a> ")}),b.pop()),f.b(" "),f.s(f.f("link",b,d,1),b,d,1,0,0,"")||(f.b(' <span class="attachment-deleted">'),f.b(f.v(f.f("name",b,d,0))),f.b("</span> ")),
f.b(" "));f.b(" ")}),c.pop());this.b(" ");this.s(this.f("attachmentPreviewType",c,b,1),c,b,0,1972,2339,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("showAttachmentPreview",b,d,1),b,d,0,1999,2312,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" ");e.s(e.f("canPreview",b,d,1),b,d,0,2015,2296,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b(" ");e.s(e.f("isImage",b,d,1),b,d,0,2028,2189,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b('<a class="js-open-attachment-viewer" href="');e.b(e.v(e.f("originalUrl",b,d,0)));
e.b('" target="_blank" data-idattachment="');e.b(e.v(e.f("id",b,d,0)));e.b('"><img class="attachment-image-preview" src="');e.b(e.v(e.f("url",b,d,0)));e.b('" /></a>')}),b.pop());e.b(" ");e.s(e.f("isImage",b,d,1),b,d,1,0,0,"")||(e.b('<iframe class="attachment-non-image-preview" src="'),e.b(e.v(e.f("url",b,d,0))),e.b('" ></iframe>'));e.b(" ")}),b.pop());e.b(" ")}),b.pop());f.b(" ")}),c.pop());this.b(" ");this.s(this.f("memberType",c,b,1),c,b,0,2381,2675,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="inline-member js-show-mem-menu" idMember="');
f.b(f.v(f.f("id",b,d,0)));f.b('"> ');f.s(f.f("avatarHash",b,d,1),b,d,0,2461,2612,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <img class="inline-member-av" src="');e.b(e.v(e.f("__avatarDomain",b,d,0)));e.b("/");e.b(e.v(e.f("avatarHash",b,d,0)));e.b('/30.png" alt="');e.b(e.v(e.f("fullName",b,d,0)));e.b(" (");e.b(e.v(e.f("username",b,d,0)));e.b(')" title="');e.b(e.v(e.f("fullName",b,d,0)));e.b(" (");e.b(e.v(e.f("username",b,d,0)));e.b(')" /> ')}),b.pop());f.b(' <span class="bold">');f.b(f.v(f.f("fullName",
b,d,0)));f.b("</span> </span> ")}),c.pop());this.b(" ");this.s(this.f("relDateType",c,b,1),c,b,0,2707,2782,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="rel-date" dt="');f.b(f.v(f.f("date",b,d,0)));f.b('" text="');f.b(f.v(f.f("text",b,d,0)));f.b('"> ');f.b(f.v(f.f("current",b,d,0)));f.b(" </span> ")}),c.pop());this.b(" ");return this.fl()},error:function(c,b,d){this.b(d=d||"");this.s(this.f("notFound",c,b,1),c,b,0,13,416,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="big-message quiet"> <h1> Page not found. </h1> ');
f.s(f.f("__loggedIn",b,d,1),b,d,1,0,0,"")||(f.b(' <p> This page may be private. You may be able to view it by <a class="js-real-link" href="/login?returnUrl='),f.b(f.v(f.f("url",b,d,0))),f.b('">logging in</a>. </p> '));f.b(" ");f.s(f.f("__loggedIn",b,d,1),b,d,0,257,393,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" <p> This page may be private. If someone gave you this link, they may need to invite you to one of their boards or organizations. </p> ")}),b.pop());f.b(" </div> ")}),c.pop());this.b(" ");this.s(this.f("boardNotFound",
c,b,1),c,b,0,448,854,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="big-message quiet"> <h1> Board not found. </h1> ');f.s(f.f("__loggedIn",b,d,1),b,d,1,0,0,"")||(f.b(' <p> This board may be private. You may be able to view it by <a class="js-real-link" href="/login?returnUrl='),f.b(f.v(f.f("url",b,d,0))),f.b('">logging in</a>. </p> '));f.b(" ");f.s(f.f("__loggedIn",b,d,1),b,d,0,694,831,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" <p> This board may be private. If someone gave you this link, they may need to invite you to one of their boards or organizations. </p> ")}),
b.pop());f.b(" </div> ")}),c.pop());this.b(" ");this.s(this.f("cardNotFound",c,b,1),c,b,0,890,1315,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="big-message quiet"> <h1> Card not found. </h1> ');f.s(f.f("__loggedIn",b,d,1),b,d,1,0,0,"")||(f.b(' <p> This card may be on a private board. You may be able to view it by <a class="js-real-link" href="/login?returnUrl='),f.b(f.v(f.f("url",b,d,0))),f.b('">logging in</a>. </p> '));f.b(" ");f.s(f.f("__loggedIn",b,d,1),b,d,0,1145,1292,"{{ }}")&&(f.rs(b,
d,function(b,d,e){e.b(" <p> This card may be on a private board. If someone gave you this link, they may need to invite you to one of their boards or organizations. </p> ")}),b.pop());f.b(" </div> ")}),c.pop());this.b(" ");this.s(this.f("unconfirmedNotFound",c,b,1),c,b,0,1357,2044,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="big-message with-picture quiet"> <img src="https://d78fikflryjgj.cloudfront.net/images/656dc3a1db8d11cde974d7402898fb75/TacoBouncer.png" width="459" height="238" alt="Bouncer Taco" title="Bouncer Taco" /> <h1> Roooooo are you? </h1> <p>Please confirm your email address to view this ');
f.b(f.v(f.f("modelType",b,d,0)));f.b('.</p> <div class="callout"> <ol> <li>Check your email at <strong>');f.b(f.v(f.f("email",b,d,0)));f.b('</strong>.</li> <li>Look for an email with the subject "Trello Account Confirmation."</li> <li>Click on the confirmation link. Done!</li> </ol> </div> <p>Don\'t see anything from us? <a class="quiet js-resend-confirmation-email" href="#" style="margin-left: 3px;">Resend confirmation link.</a></p> </div> ')}),c.pop());this.b(" ");return this.fl()},filter_cards:function(c,
b,d){this.b(d||"");this.b('<input type="text" class="js-input js-autofocus" attr="title" value="');this.b(this.v(this.f("title",c,b,0)));this.b('" style="margin-bottom: 0;"> <div class="js-filter-search-results"/> ');return this.fl()},filter_cards_search_results:function(c,b,d){this.b(d=d||"");this.s(this.f("showHelper",c,b,1),c,b,0,15,156,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <p class="quiet" style="padding: 10px 8px 2px; margin-bottom: 0;"> Type to filter by term or search for labels, members, or due times. </p> ')}),
c.pop());this.b(" ");this.s(this.f("showLabels",c,b,1),c,b,0,187,725,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <hr> <ul class="pop-over-label-list checkable');f.s(f.f("filtering",b,d,1),b,d,0,247,256,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" filtered")}),b.pop());f.b('"> ');f.s(f.f("labels",b,d,1),b,d,0,284,707,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <li class="item');e.s(e.f("isActive",b,d,1),b,d,0,313,320,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b(" active")}),b.pop());e.s(e.f("matchesFilter",
b,d,1),b,d,0,351,366,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b(" matches-filter")}),b.pop());e.b('"> <a href="#" class="name js-toggle-label-filter" name="');e.b(e.v(e.f("color",b,d,0)));e.b('"> <span class="card-label card-label-');e.b(e.v(e.f("color",b,d,0)));e.b('"/> <span class="full-name"> ');e.s(e.f("labelName",b,d,1),b,d,0,540,555,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b(" ");e.b(e.v(e.f("labelName",b,d,0)));e.b(" ")}),b.pop());e.b(" ");e.s(e.f("labelName",b,d,1),b,d,1,0,0,"")||(e.b(' <span class="quiet">'),
e.b(e.v(e.f("color",b,d,0))),e.b(" label (default)</span> "));e.b(' </span> <span class="icon-sm icon-check"/> </a> </li> ')}),b.pop());f.b(" </ul> ")}),c.pop());this.b(" ");this.s(this.f("showMembers",c,b,1),c,b,0,757,1215,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <hr> <ul class="pop-over-member-list checkable js-mem-list');f.s(f.f("filtering",b,d,1),b,d,0,830,839,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" filtered")}),b.pop());f.s(f.f("limitMembers",b,d,1),b,d,0,870,878,"{{ }}")&&(f.rs(b,d,function(b,
d,e){e.b(" limited")}),b.pop());f.b('"> ');f.s(f.f("members",b,d,1),b,d,0,910,930,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" ");e.b(e.rp("select_member",b,d,""));e.b(" ")}),b.pop());f.b(" </ul> ");f.s(f.f("limitMembers",b,d,1),b,d,0,966,1197,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <ul class="pop-over-list inset js-show-all-members-elem"> <li> <a href="#" class="name quiet js-show-all-members" style="padding-left: 50px; font-weight: normal;"> Show all members (');e.b(e.v(e.f("remainingMemsCount",
b,d,0)));e.b(" hidden) </a> </li> </ul> ")}),b.pop());f.b(" ")}),c.pop());this.b(" ");this.s(this.f("showDueTimes",c,b,1),c,b,0,1249,1559,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <hr> <ul class="pop-over-list checkable navigable inset normal-weight js-date-list"> ');f.s(f.f("dueOptions",b,d,1),b,d,0,1350,1537,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <li class="item ');e.s(e.f("isActive",b,d,1),b,d,0,1380,1387,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b(" active")}),b.pop());e.b('"> <a href="#" class="js-due-filter" time="');
e.b(e.v(e.f("time",b,d,0)));e.b('" style="padding-left: 40px;"> ');e.b(e.v(e.f("desc",b,d,0)));e.b(' <span class="icon-sm icon-check"/> </a> </li> ')}),b.pop());f.b(" </ul> ")}),c.pop());this.b(' <hr> <ul class="pop-over-list inset normal-weight"> <li> <a href="#" class="js-clear-all');this.s(this.f("isFiltering",c,b,1),c,b,1,0,0,"")||this.b(" disabled");this.b('" style="padding-left: 40px;"> Clear Filter </a> </li> </ul> ');return this.fl()},formatting_help:function(c,b,d){this.b(d||"");this.b('<p> Trello uses Markdown for formatting. Here are the basics. See the <a href="http://daringfireball.net/projects/markdown/syntax" target="_blank">complete syntax</a>. </p> <hr> <p class="quiet">First Level Header</p> <code> Making Scrambled Eggs: A Primer<br> =============================== </code> <hr> <p class="quiet">Second Level Header</p> <code> 1.1: Preparation<br> ---------------- </code> <hr> <p class="quiet">Paragraphs</p> <code> Add two new lines to start a new paragraph. Crack two eggs into the bowl and whisk. </code> <hr> <p class="quiet">Bold</p> <code> **Carefully** crack the eggs. </code> <hr> <p class="quiet">Emphasis</p> <code> Whisk the eggs *vigorously*. </code> <hr> <p class="quiet">Lists</p> <code> Ingredients:<br><br> - Eggs<br> - Oil<br> - *Optional:* milk </code> <hr> <p class="quiet">Links</p> <code> To download a PDF version of the recipe, [click here](https://example.com/scrambled-eggs.pdf). </code> <hr> <p class="quiet">Images</p> <code> ![The Finished Dish](https://example.com/eggs.png) </code> ');
return this.fl()},header_account_menu:function(c,b,d){this.b(d=d||"");this.b('<ul class="pop-over-list"> <li> <a class="js-change-name-and-bio" href="#"> Change Name, Initials, or Bio </a> </li> <li> <a class="js-change-email" href="#"> Change Email Address </a> </li> <li> <a class="js-change-avatar" href="#"> Change Avatar </a> </li> <li> <a class="js-change-password" href="#"> ');this.s(this.f("hasPassword",c,b,1),c,b,0,320,335,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("Change Password")}),c.pop());
this.s(this.f("hasPassword",c,b,1),c,b,1,0,0,"")||this.b("Set Password");this.b(' </a> </li> </ul> <hr> <ul class="pop-over-list"> <li> <a class="js-change-email-freq" href="#"> Change Notification Email Frequency </a> </li> ');this.s(this.f("canAllowDesktopNotifications",c,b,1),c,b,0,572,667,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <li> <a class="js-allow-desktop-notifications" href="#">Allow Desktop Notifications</a> </li> ')}),c.pop());this.b(' </ul> <hr> <ul class="pop-over-list"> <li> <a class="js-toggle-cb-mode" href="#"> ');
this.s(this.f("cbEnabled",c,b,1),c,b,0,797,805,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("Disable ")}),c.pop());this.s(this.f("cbEnabled",c,b,1),c,b,1,0,0,"")||this.b("Enable ");this.b('Color Blind Friendly Mode </a> </li> </ul> <hr> <p class="bottom"> <a class="quiet-button" href="');this.b(this.v(this.f("memberAccountUrl",c,b,0)));this.b('">See all options</a> </p> ');return this.fl()},header_add_menu:function(c,b,d){this.b(d||"");this.b('<ul class="pop-over-list"> <li> <a class="js-new-board" href="#"> New Board\u2026 <span class="sub-name"> A board is a collection of cards ordered in a list of lists. Use it to manage a project, track a collection, or organize anything. </span> </a> </li> <li> <a class="js-new-org" href="#"> New Organization\u2026 <span class="sub-name"> An organization is a group of boards and people. Use it to group boards in your company, team, or family. </span> </a> </li> </ul> ');
return this.fl()},header_announcements:function(c,b,d){this.b(d=d||"");this.s(this.f("announcements",c,b,1),c,b,0,18,37,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.b(f.rp("announcement",b,d,""));f.b(" ")}),c.pop());this.b(' <div class="announcement-elsewhere"> <p class="quiet" style="margin: 0 4px 5px;"> For more updates, check out\u2026 </p> <a target="_blank" class="announcement-elsewhere-blog js-real-link js-blog" href="http://blog.trello.com" title="Trello Blog"> <span class="announcement-elsewhere-blog-icon icon-lg icon-board"/> <span class="underline">Trello Blog</span> </a> <a target="_blank" class="announcement-elsewhere-social js-real-link js-t" href="https://www.twitter.com/trello" title="@trello on Twitter"> <span class="icon-lg icon-twitter"/> </a> <a target="_blank" class="announcement-elsewhere-social js-real-link js-fb" href="https://www.facebook.com/TrelloApp" title="Trello on Facebook"> <span class="icon-lg icon-facebook"/> </a> <a target="_blank" class="announcement-elsewhere-social js-real-link js-g" href="https://plus.google.com/103127084407107005900/posts" title="Trello on Google+"> <span class="icon-lg icon-google"/> </a> </div> ');
return this.fl()},header_boards_menu_button:function(c,b,d){this.b(d||"");this.b('<a class="header-btn header-boards js-boards-menu" title="View list of boards" href="#"> <span class="header-btn-icon icon-lg icon-board light"/> <span class="header-btn-text">Boards</span> </a> ');return this.fl()},header_channel_picker:function(c,b,d){this.b(d=d||"");this.s(this.f("cookie",c,b,1),c,b,0,11,238,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <p>You have a version cookie set. This is a feature intended for client developers and testers and will prevent you from changing channels.</p> <input type="button" class="js-remove-cookie wide primary" value="Remove cookie"> ')}),
c.pop());this.b(" ");this.s(this.f("cookie",c,b,1),c,b,1,0,0,"")||(this.b(' <ul class="pop-over-list"> '),this.s(this.f("channels",c,b,1),c,b,0,302,447,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <li> <a class="js-select" href="#" name="');f.b(f.v(f.f("name",b,d,0)));f.b('"> ');f.b(f.v(f.f("displayName",b,d,0)));f.b(" ");f.s(f.f("active",b,d,1),b,d,0,382,424,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <span class="icon-sm icon-check"></span> ')}),b.pop());f.b(" </a> </li> ")}),c.pop()),this.b(" <hr> "),
this.s(this.f("dev",c,b,1),c,b,0,474,560,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <li> <a class="js-select-dev" href="#" name="');f.b(f.v(f.f("name",b,d,0)));f.b('"> Pick a version... </a> </li> ')}),c.pop()),this.b(" </ul> "));this.b(" ");return this.fl()},header_invite:function(c,b,d){this.b(d=d||"");this.b('<div class="invited-message js-invited"> <a href="#" class="js-ignore-invite icon-lg icon-close dialog-close-button"></a> <h1> ');this.s(this.f("isInviter",c,b,1),c,b,0,141,287,"{{ }}")&&
(this.rs(c,b,function(b,d,f){f.b(" You invited ");f.b(f.v(f.d("ghost.fullName",b,d,0)));f.b(" to collaborate on <strong>");f.s(f.f("board",b,d,1),b,d,0,209,217,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(e.v(e.f("name",b,d,0)))}),b.pop());f.s(f.f("organization",b,d,1),b,d,0,244,259,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(e.v(e.f("displayName",b,d,0)))}),b.pop());f.b("</strong>. ")}),c.pop());this.b(" ");this.s(this.f("isInviter",c,b,1),c,b,1,0,0,"")||(this.b(" "),this.s(this.f("memberAdder",c,b,1),c,
b,0,333,364,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(f.v(f.f("fullName",b,d,0)));f.b(" has invited you to")}),c.pop()),this.s(this.f("memberAdder",c,b,1),c,b,1,0,0,"")||this.b("You've been invited to"),this.b(" collaborate on <strong>"),this.s(this.f("board",c,b,1),c,b,0,468,476,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(f.v(f.f("name",b,d,0)))}),c.pop()),this.s(this.f("organization",c,b,1),c,b,0,503,518,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(f.v(f.f("displayName",b,d,0)))}),c.pop()),this.b("</strong>. "));
this.b(" </h1> ");this.s(this.f("isLoggedIn",c,b,1),c,b,0,582,1301,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("isInviter",b,d,1),b,d,1,0,0,"")||(f.b(' <p style="min-height: 20px;"> '),f.s(f.d("ghost.email",b,d,1),b,d,0,644,924,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" Your account ");e.s(e.f("avatarHash",b,d,1),b,d,0,673,824,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b(' <img class="inline-member-av" src="');e.b(e.v(e.f("__avatarDomain",b,d,0)));e.b("/");e.b(e.v(e.f("avatarHash",b,d,0)));
e.b('/30.png" alt="');e.b(e.v(e.f("fullName",b,d,0)));e.b(" (");e.b(e.v(e.f("username",b,d,0)));e.b(')" title="');e.b(e.v(e.f("fullName",b,d,0)));e.b(" (");e.b(e.v(e.f("username",b,d,0)));e.b(')" /> ')}),b.pop());e.b(" <strong>");e.b(e.v(e.f("fullName",b,d,0)));e.b(" (");e.b(e.v(e.f("username",b,d,0)));e.b(")</strong> hasn't logged in with ");e.b(e.v(e.d("ghost.email",b,d,0)));e.b(". ")}),b.pop()),f.b(" </p> "));f.b(" ");f.s(f.f("isInviter",b,d,1),b,d,0,975,1079,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <a href="#" class="button js-create-new-account primary">Create New Account for ');
e.b(e.v(e.d("ghost.fullName",b,d,0)));e.b("</a> ")}),b.pop());f.b(" ");f.s(f.f("isInviter",b,d,1),b,d,1,0,0,"")||(f.b(' <a href="#" class="button js-join-model primary">Add This Email to My Account and Join '),f.b(f.v(f.f("modelType",b,d,0))),f.b('</a> <a href="#" class="button js-create-new-account">Create New Account</a> '));f.b(" ")}),c.pop());this.b(" ");this.s(this.f("isLoggedIn",c,b,1),c,b,1,0,0,"")||(this.b(' <a href="#" class="button primary js-join-model">Join '),this.b(this.v(this.f("modelType",
c,b,0))),this.b("</a> "));this.b(" </div> ");return this.fl()},header_logo:function(c,b,d){this.b(d||"");this.b('<a class="header-logo js-home-via-logo" href="/" title="Go back to your boards page."> <span class="header-logo-loading"></span> <span class="header-logo-default"></span> </a> ');return this.fl()},header_member_menu:function(c,b,d){this.b(d=d||"");this.b('<ul class="pop-over-list"> <li><a class="js-profile" href="');this.b(this.v(this.f("profileUrl",c,b,0)));this.b('">Profile</a></li> <li><a class="js-cards" href="');
this.b(this.v(this.f("cardsUrl",c,b,0)));this.b('">Cards</a></li> ');this.s(this.f("hasAccount",c,b,1),c,b,0,166,230,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<li><a class="js-billing" href="');f.b(f.v(f.f("billingUrl",b,d,0)));f.b('">Billing</a></li>')}),c.pop());this.b(' <li><a class="js-account" href="');this.b(this.v(this.f("accountUrl",c,b,0)));this.b('">Settings</a></li> </ul> <hr> <ul class="pop-over-list"> <li><a class="js-help" href="http://help.trello.com/" target="_blank">Help</a></li> <li><a class="js-platforms" href="/platforms">Apps</a></li> <li><a class="js-shortcuts" href="/shortcuts">Shortcuts</a></li> <li><a class="js-reco" href="/recommend">Share Trello</a></li> </ul> <hr> <ul class="pop-over-list"> <li><a class="js-logout" href="#">Log Out');
this.s(this.f("canLogOut",c,b,1),c,b,1,0,0,"")||this.b("<br>(You\u2019ll need to set a password first!)");this.b("</a></li> </ul> ");return this.fl()},header_notification_list_menu:function(c,b,d){this.b(d=d||"");this.s(this.f("hasNotifications",c,b,1),c,b,1,0,0,"")||this.b(' <p class="empty" style="padding: 24px 6px;">No Notifications</p> ');this.b(" ");this.s(this.f("hasNotifications",c,b,1),c,b,0,130,530,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <ul class="pop-over-list"> <li> <a class="js-view-all-notifications" href="');
f.b(f.v(f.f("noteUrl",b,d,0)));f.b('">See All Notifications');f.b(f.v(f.f("unreadText",b,d,0)));f.b('</a> </li> <li> <a class="js-change-email-frequency" href="#">Change Notification Email Frequency</a> </li> ');f.s(f.f("canAllowDesktopNotifications",b,d,1),b,d,0,395,490,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <li> <a class="js-allow-desktop-notifications" href="#">Allow Desktop Notifications</a> </li> ')}),b.pop());f.b(" </ul> ")}),c.pop());this.b(" ");return this.fl()},header_promo_nav:function(c,
b,d){this.b(d||"");this.b('<nav class="promo-nav"> <a href="/landing" id="navLanding">Home</a> <a href="/tour" id="navTour">Tour</a> <a href="/gold" id="navTrelloGold">Gold</a> <a href="/business-class" id="navBusinessClass">Business Class</a> <a href="http://blog.trello.com" target="_blank">Blog</a> </nav> ');return this.fl()},header_public_board:function(c,b,d){this.b(d=d||"");this.b('<p class="bottom"> ');this.s(this.f("interactions",c,b,1),c,b,0,36,109,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="inline-block">Want to ');
f.b(f.v(f.f("interactions",b,d,0)));f.b(" these cards?</span> ")}),c.pop());this.b(' <span class="inline-block"> <a class="button primary js-real-link" href="');this.b(this.v(this.f("signupUrl",c,b,0)));this.b('" style="margin: 0 4px;">Sign up for free</a> or <a class="quiet js-real-link" href="');this.b(this.v(this.f("tourUrl",c,b,0)));this.b('">learn more about Trello</a> </span> </p> ');return this.fl()},header_search:function(c,b,d){this.b(d||"");this.b('<a href="/search" class="header-btn open-search-btn js-open-search-page" title="Search for boards, cards, members, and organizations."> <span class="header-btn-icon icon-lg icon-search light"></span> </a> <div class="header-search js-search-box"> <input class="header-search-input js-search-input" type="text" autocomplete="off" autocorrect="off" spellcheck="false" value="');
this.b(this.v(this.f("query",c,b,0)));this.b('"> <span class="header-search-icon icon-lg icon-search light js-search-icon js-search-focus"></span> <span class="header-search-icon header-search-icon-close icon-lg icon-close light hide js-close-icon js-search-close"></span> </div> ');return this.fl()},header_signup_login:function(c,b,d){this.b(d||"");this.b('<a class="header-btn header-signup" href="/signup">Sign Up</a> <a class="header-btn header-login js-toggle-login-popover no-right-margin" href="/login">Log In</a> ');
return this.fl()},header_user:function(c,b,d){this.b(d=d||"");this.s(this.f("__loggedIn",c,b,1),c,b,0,15,1491,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("is_promo",b,d,1),b,d,1,0,0,"")||(f.b(' <a class="header-btn header-btn-feedback js-open-feedback hide" title="You are seeing an early, experimental version of Trello. We would love your feedback!" href="#"> <span class="header-btn-icon icon-lg icon-comment light"></span> <span class="header-btn-text">Give us feedback.</span> </a> <a class="header-btn hide upgrade" href="#", onclick="window.location.reload();"><span class="icon-sm icon-reopen light"/><span class="header-btn-text">Update Available</span></a> <a class="header-btn js-open-add-menu" href="#" title="Add a new board or organization."> <span class="header-btn-icon icon-lg icon-add light"></span> </a> <a class="header-btn header-member js-open-header-member-menu" href="#" title="Get access to your profile, help, and log out."> <span class="member'),
f.s(f.f("hasCrown",b,d,1),b,d,0,819,829,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" has-crown")}),b.pop()),f.b('"></span> <span class="header-btn-text js-member-name"></span> </a> <a class="header-btn header-notifications js-open-header-notifications-menu" href="#"> <span class="header-btn-icon icon-lg icon-notification light"></span> </a> '),f.s(f.f("showChannelPicker",b,d,1),b,d,0,1094,1275,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <a class="header-btn header-btn-channel-picker js-open-channel-picker" href="#" title="Select release channel."> <span class="header-btn-icon icon-lg icon-gear light"></span> </a> ')}),
b.pop()),f.b(" "));f.b(" ");f.s(f.f("is_promo",b,d,1),b,d,0,1325,1477,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <a class="header-btn header-go-to-boards no-right-margin" href="/" title="Get back to the app."> <span class="member"></span> Go to Boards &rarr; </a> ')}),b.pop());f.b(" ")}),c.pop());this.b(" ");this.s(this.f("__loggedIn",c,b,1),c,b,1,0,0,"")||(this.b(" "),this.b(this.rp("header_signup_login",c,b,"")),this.b(" "));this.b(" ");return this.fl()},header_version_picker:function(c,b,d){this.b(d=
d||"");this.b('<div class="form-grid"> <div class="button-link setting form-grid-child form-grid-child-full"> <span class="label">Head</span> <span class="value">');this.b(this.v(this.d("active.name",c,b,0)));this.b('</span> <label>Head</label> <select class="js-select-head"> ');this.s(this.f("heads",c,b,1),c,b,0,232,368,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <option value="');f.b(f.v(f.f("value",b,d,0)));f.b('"');f.s(f.f("selected",b,d,1),b,d,0,271,291,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' selected="selected"')}),
b.pop());f.b("> ");f.b(f.v(f.f("displayName",b,d,0)));f.s(f.f("selected",b,d,1),b,d,0,334,344,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" (current)")}),b.pop());f.b(" </option> ")}),c.pop());this.b(" </select> </div> ");this.s(this.d("versions.2.value",c,b,1),c,b,0,417,841,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="button-link setting form-grid-child form-grid-child-full"> <span class="label">Version</span> <span class="value">');f.b(f.v(f.d("active.version",b,d,0)));f.b('</span> <label>Version</label> <select class="js-select-version"> ');
f.s(f.f("versions",b,d,1),b,d,0,641,810,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <option value="');e.b(e.v(e.f("value",b,d,0)));e.b('"');e.s(e.f("selected",b,d,1),b,d,0,680,700,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b(' selected="selected"')}),b.pop());e.b("> ");e.b(e.v(e.f("displayName",b,d,0)));e.s(e.f("active",b,d,1),b,d,1,0,0,"")||e.b(" (disabled)");e.s(e.f("selected",b,d,1),b,d,0,776,786,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b(" (current)")}),b.pop());e.b(" </option> ")}),b.pop());f.b(" </select> </div> ")}),
c.pop());this.b(" </div> ");return this.fl()},header_warning_banner:function(c,b,d){this.b(d=d||"");this.b('<p class="bottom"> Please confirm your email address: ');this.b(this.v(this.f("email",c,b,0)));this.b(". ");this.s(this.f("knownEmailProvider",c,b,1),c,b,0,88,178,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<a href="');f.b(f.v(f.f("emailInboxUrl",b,d,0)));f.b('" class="quiet" style="margin-left: 6px;">Check your inbox.</a> ')}),c.pop());this.b(' <a class="quiet js-resend-confirmation-email" href="#" style="margin-left: 3px;">Resend email.</a> </p> ');
return this.fl()},header_warning_password:function(c,b,d){this.b(d||"");this.b('<p class="bottom"> We\u2019ve automatically created an account for ');this.b(this.v(this.f("email",c,b,0)));this.b(" with the username ");this.b(this.v(this.f("username",c,b,0)));this.b('. Please <a class="quiet js-change-password" href="/my/account">add a password</a>. </p> ');return this.fl()},hybrid_signup_login:function(c,b,d){this.b(d=d||"");this.b('<div class="form-parts-container clearfix"> <div class="form-tabs js-tabs"> <a class="signup-form-tab js-tab active" data-content="signup-form">Sign Up</a> <a class="login-form-tab js-tab" data-content="login-form">Log In</a> </div> <div class="signup-form js-signup-form-pos js-form-part js-tab-content');
this.s(this.f("hasAccount",c,b,1),c,b,1,0,0,"")||this.b(" js-default-active");this.b('" data-id="signup-form"> <h1>New to Trello?</h1> <p>Create an account to edit this board, create new boards, and more.</p> <div class="tooltip js-insert-tooltip"></div> <form action="/signup-invitation" method="post"> <div class="quiet js-bad-full-name hide"> Your name must be at least 4 characters. </div> <label for="display-name-create"> Full Name </label> <input type="text" name="fullName" id="display-name-create" value="');
this.b(this.v(this.f("fullName",c,b,0)));this.b('"> <div class="js-use-diff-email"> <div class="quiet js-bad-email hide"> You must enter a valid email address. </div> <div class="quiet js-used-email hide"> That email address is in use. </div> <label for="email-create"> Email </label> <input type="email" name="email" id="email-create" value="');this.b(this.v(this.f("email",c,b,0)));this.b('" autocomplete="off" autocorrect="off" spellcheck="false" autocapitalize="off"> </div> <div class="quiet js-bad-password hide"> Your password must be at least 4 characters. </div> <label for="password-create"> Password </label> <input type="password" name="password" id="password-create"> <input type="hidden" name="returnUrl" value="');
this.b(this.v(this.f("returnUrl",c,b,0)));this.b('"> <input type="hidden" name="idModel" value=""> <input type="hidden" name="type" value=""> <input type="hidden" name="token" value=""> <input type="submit" class="primary js-create-account" value="Okay, Let\'s Go!"> </form> </div> <div class="login-form js-login-form-pos js-form-part js-tab-content');this.s(this.f("hasAccount",c,b,1),c,b,0,1755,1773,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" js-default-active")}),c.pop());this.b('" data-id="login-form"> <h1>Hello, old friend!</h1> <p>Log in with your: </p> <form action="/authenticate_openid" method="post"> <input type="hidden" name="openid_identifier" value="https://www.google.com/accounts/o8/id"> <input type="hidden" name="returnUrl" value="');
this.b(this.v(this.f("returnUrl",c,b,0)));this.b('"> <input type="hidden" name="mode" value=""> <input type="hidden" name="login" value=""> <input type="hidden" name="immediate" value=""> <input type="hidden" name="confirmNew" value="true"> <a class="button primary google js-google-login" href=""> <span class="icon-lg icon-google light"></span> Google Account </a> ');this.s(this.f("openidAccount",c,b,1),c,b,0,2403,2538,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" <p>It looks like you haven't set a password yet. You can do this from the Account page after logging in with your Google Account.</p> ")}),
c.pop());this.b(' </form> <p>Or the old-fashioned way:</p> <form action="/authenticate" method="post" novalidate> ');this.s(this.f("badLogin",c,b,1),c,b,0,2666,2725,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <p class="error">The email or password was incorrect.</p> ')}),c.pop());this.b(" ");this.s(this.f("unconfirmed",c,b,1),c,b,0,2755,2862,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <p class="error">You can\'t sign in until you <a href="/resendValidate">verify your email address</a>.</p> ')}),
c.pop());this.b(' <label for="email-login"> Email </label> <input type="email" name="user" id="email-login" value="');this.b(this.v(this.f("email",c,b,0)));this.b('" autocomplete="off" autocorrect="off" spellcheck="false" autocapitalize="off"> <label for="password-login"> Password </label> <input type="password" name="password" id="password-login"> <input type="submit" class="primary wide js-password-login" value="Log In"> <p class="quiet"> <a href="/forgot"><strong>Forgot password?</strong></a> </p> <input type="hidden" name="returnUrl" value="');
this.b(this.v(this.f("returnUrl",c,b,0)));this.b('"> </form> </div> <div class="active-box js-active-box start"></div> </div> ');return this.fl()},"import/status":function(c,b,d){this.b(d=d||"");this.s(this.f("workspaces",c,b,1),c,b,0,15,150,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("total",b,d,1),b,d,0,26,139,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <div> <span class="import-type">Groups:</span> <span class="import-progress">');e.b(e.v(e.f("done",b,d,0)));e.b(" / ");e.b(e.v(e.f("total",
b,d,0)));e.b("</span> </div> ")}),b.pop());f.b(" ")}),c.pop());this.b(" ");this.s(this.f("projects",c,b,1),c,b,0,179,316,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("total",b,d,1),b,d,0,190,305,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <div> <span class="import-type">Projects:</span> <span class="import-progress">');e.b(e.v(e.f("done",b,d,0)));e.b(" / ");e.b(e.v(e.f("total",b,d,0)));e.b("</span> </div> ")}),b.pop());f.b(" ")}),c.pop());this.b(" ");this.s(this.f("tasks",c,b,1),c,b,0,340,
474,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("total",b,d,1),b,d,0,351,463,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <div> <span class="import-type">Tasks:</span> <span class="import-progress">');e.b(e.v(e.f("done",b,d,0)));e.b(" / ");e.b(e.v(e.f("total",b,d,0)));e.b("</span> </div> ")}),b.pop());f.b(" ")}),c.pop());this.b(" ");this.s(this.f("done",c,b,1),c,b,0,494,514,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" <div> Done! </div> ")}),c.pop());this.b(" ");return this.fl()},invitation:function(c,
b,d){this.b(d=d||"");this.b('<div class="phenom invitation"> ');this.s(this.f("MemberInviter",c,b,1),c,b,0,50,107,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="creator member no-menu"> ');f.b(f.rp("member",b,d,""));f.b(" </div> ")}),c.pop());this.b(' <div class="phenom-desc"> <p> ');this.s(this.f("MemberInviter",c,b,1),c,b,0,174,232,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" <strong> ");f.b(f.v(f.f("fullName",b,d,0)));f.b(" </strong> created an invitation to ")}),c.pop());this.b(' <span class="invitee"> ');
this.s(this.f("MemberInvited",c,b,1),c,b,0,292,310,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(f.rp("member_inline",b,d,""))}),c.pop());this.b(" ");this.s(this.f("MemberInvited",c,b,1),c,b,1,0,0,"")||(this.b(this.v(this.f("email",c,b,0))),this.s(this.f("email",c,b,1),c,b,1,0,0,"")||this.b("someone new"));this.b(' </span> </p> </div> <p class="phenom-meta quiet"> ');this.s(this.f("dateExpires",c,b,1),c,b,0,472,566,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="expiration-date">Expires <span class="date" dt="');
f.b(f.v(f.f("dateExpires",b,d,0)));f.b('"></span></span> ')}),c.pop());this.b(" ");this.s(this.f("canRemove",c,b,1),c,b,0,597,676,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' - <a href="#" class="inline-block js-remove-invitation">Delete Invitation</a> ')}),c.pop());this.b(" </p> </div> ");return this.fl()},invite_add_name:function(c,b,d){this.b(d=d||"");this.b('<p class="quiet"> <strong>');this.b(this.v(this.f("email",c,b,0)));this.b('</strong>? We don\u2019t know that person. Add a name and click \u201cSend\u201d and we\u2019ll add a virtual member and send them an invite email. They\'ll automatically receive access to the board once they sign up and confirm their email address. </p> <p class="error hide js-name-error">Full name must be more than 4 characters.</p> <form class="js-email-data"> <label> Full Name </label> <input type="text" class="js-autofocus js-full-name" value="');
this.b(this.v(this.f("fullName",c,b,0)));this.b('"> <input type="hidden" class="js-email" value="');this.b(this.v(this.f("email",c,b,0)));this.b('"> ');this.s(this.f("canAddAsObserver",c,b,1),c,b,0,560,832,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="check-div quiet js-add-as-observer clearfix" style="margin-left: 24px; padding-top: 2px; font-size: 12px; line-height: 15px;"> <input type="checkbox" id="addAsObserver"> <label for="addAsObserver">Include this member as a view-only observer?</label> </span> ')}),
c.pop());this.b(' <input type="submit" class="wide primary js-send-email-invite" value="Send"> </form> ');return this.fl()},jps_upgrade_banner:function(c,b,d){this.b(d=d||"");this.b('<div class="billing-upgrade-banner markeddown"> <h2 class="billing-upgrade-banner-header"> There\u2019s an update to Business Class available with lots of new features! </h2> <p> The available update includes\u2026 </p> <ul> <li> </p> Everyone in your organization will get <a href="/gold">Trello Gold</a>. That means more <strong>board backgrounds and stickers</strong> and the ability to upload your own, <strong>250MB attachments</strong>, and <strong>custom emoji</strong>. </p> </li> <li> <p> We\u2019ve also updated exports. You can now export as <strong>CSV</strong> as well as JSON. You\u2019ll also get a <strong>history of past bulk exports</strong>. </p> </li> </ul> <div class="billing-upgrade-banner-price-section"> <p> There\u2019s also new pricing. The price for the upgrade will be $5 per user per month or $45 per user per year. When you upgrade, your price will be\u2026 </p> ');
this.s(this.f("monthlyUpgrade",c,b,1),c,b,0,883,992,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <h3 class="billing-upgrade-price-emphasis">$');f.b(f.v(f.f("price",b,d,0)));f.b(" per month</h3> <p>$5 per ");f.b(f.v(f.f("formattedMemberCount",b,d,0)));f.b("</p> ")}),c.pop());this.b(" ");this.s(this.f("yearlyUpgrade",c,b,1),c,b,0,1030,1139,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <h3 class="billing-upgrade-price-emphasis">$');f.b(f.v(f.f("price",b,d,0)));f.b(" per year</h3> <p>$45 per ");f.b(f.v(f.f("formattedMemberCount",
b,d,0)));f.b("</p> ")}),c.pop());this.b(" ");this.s(this.f("yearlyCheaperUpgrade",c,b,1),c,b,0,1183,1331,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <h3 class="billing-upgrade-price-emphasis">$');f.b(f.v(f.f("price",b,d,0)));f.b(" per year</h3> <p>$45 per ");f.b(f.v(f.f("formattedMemberCount",b,d,0)));f.b("</p> <p>You will get three months free.</p> ")}),c.pop());this.b(' </div> <div class="center"> <a href="#" class="billing-upgrade-banner-button button primary js-open-confirm-jps-upgrade"> Upgrade Your Organization </a> </div> <p class="quiet center"> We still support your version of Business Class, but it is no longer being sold and won\u2019t receive future updates. </p> </div> ');
return this.fl()},kiln_changeset_preview:function(c,b,d){this.b(d=d||"");this.b('<div class="attachment-extra-info-header"> Changeset <a href="');this.b(this.v(this.f("url",c,b,0)));this.b('" target="_blank">');this.b(this.v(this.f("shortHash",c,b,0)));this.b("</a> by ");this.b(this.v(this.f("author",c,b,0)));this.b(" - ");this.s(this.f("reviews",c,b,1),c,b,1,0,0,"")||this.b(' <span class="quiet">No Review</span> ');this.b(" ");this.s(this.f("reviews",c,b,1),c,b,0,196,275,"{{ }}")&&(this.rs(c,b,function(b,
d,f){f.b(' <span class="quiet"> <a href="');f.b(f.v(f.f("url",b,d,0)));f.b('" target="_blank">');f.b(f.v(f.f("status",b,d,0)));f.b("</a> </span> ")}),c.pop());this.b(' </div> <div class="attachment-extra-info-details markeddown"> ');this.b(this.t(this.f("commitMessageHtml",c,b,0)));this.b(" </div> ");return this.fl()},kiln_changeset_thumbnail:function(c,b,d){this.b(d=d||"");this.b('<span title="');this.b(this.v(this.f("commitMessage",c,b,0)));this.b('">');this.b(this.v(this.f("shortCommitMessage",
c,b,0)));this.b('</span> <span class="block quiet"> ');this.s(this.f("date",c,b,1),c,b,0,98,157,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<span>Added <span class="date" dt="');f.b(f.v(f.f("date",b,d,0)));f.b('"></span></span>')}),c.pop());this.b(" - ");this.s(this.f("reviews",c,b,1),c,b,1,0,0,"")||this.b(" <span>No Review</span> ");this.b(" ");this.s(this.f("reviews",c,b,1),c,b,0,230,295,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span> <a href="');f.b(f.v(f.f("url",b,d,0)));f.b('" target="_blank">');
f.b(f.v(f.f("status",b,d,0)));f.b("</a> </span> ")}),c.pop());this.b(" </span> ");return this.fl()},label:function(c,b,d){this.b(d=d||"");this.b('<span class="card-label card-label-');this.b(this.v(this.f("color",c,b,0)));this.b('" title="');this.s(this.f("name",c,b,1),c,b,0,62,70,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(f.v(f.f("name",b,d,0)))}),c.pop());this.s(this.f("name",c,b,1),c,b,1,0,0,"")||(this.b(this.v(this.f("color",c,b,0))),this.b(" label (default)"));this.b('"> ');this.s(this.f("name",
c,b,1),c,b,0,134,142,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(f.v(f.f("name",b,d,0)))}),c.pop());this.b(" ");this.s(this.f("name",c,b,1),c,b,1,0,0,"")||this.b("&nbsp;");this.b(" </span> ");return this.fl()},list:function(c,b,d){this.b(d=d||"");this.b('<div class="list-header js-list-header non-empty clearfix" attr="name"> <h2 class="list-header-name hide-on-edit js-list-name current">');this.b(this.v(this.f("name",c,b,0)));this.b('</h2> <p class="list-header-num-cards hide js-num-cards"></p> <span class="list-header-subscribe-icon icon-sm icon-follow js-list-subscribed');
this.s(this.f("subscribed",c,b,1),c,b,1,0,0,"")||this.b(" hide");this.b('"/> <div class="edit edit-heavy clearfix"> <textarea type="text" class="field single-line"></textarea> </div> ');this.s(this.f("__loggedIn",c,b,1),c,b,0,443,538,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <a href="#" class="list-header-menu-icon icon-sm icon-menu dark-hover js-open-list-menu"></a> ')}),c.pop());this.b(' </div> <div class="list-cards fancy-scrollbar clearfix js-list-cards');this.s(this.f("__ed",c,b,1),c,b,0,
631,643,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" js-sortable")}),c.pop());this.b('"></div> <a class="open-card-composer js-open-card-composer" href="#">Add a card\u2026</a> ');return this.fl()},list_add:function(c,b,d){this.b(d||"");this.b('<form> <span class="placeholder js-open-add-list">Add a list\u2026</span> <input type="text" class="list-name-input" name="name" placeholder="Add a list\u2026" autocomplete="off"/> <div class="edit-controls keep clearfix"> <input type="submit" class="primary confirm js-save-edit" value="Save"> <a href="#" class="icon-lg icon-close dark-hover cancel js-cancel-edit"></a> </div> </form> ');
return this.fl()},list_bulk_card_move:function(c,b,d){this.b(d=d||"");this.b('<form> <ul class="pop-over-list js-list-list"> ');this.s(this.f("lists",c,b,1),c,b,0,57,216,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <li> <a href="#" class="js-select-list highlight-icon ');f.s(f.f("current",b,d,1),b,d,0,124,133,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" disabled")}),b.pop());f.b('" name="');f.b(f.v(f.f("id",b,d,0)));f.b('"> ');f.b(f.v(f.f("name",b,d,0)));f.s(f.f("current",b,d,1),b,d,0,182,192,"{{ }}")&&
(f.rs(b,d,function(b,d,e){e.b(" (current)")}),b.pop());f.b(" </a> </li> ")}),c.pop());this.b(" </ul> </form> ");return this.fl()},list_copy:function(c,b,d){this.b(d||"");this.b('<label>Name</label> <textarea name="name" class="js-autofocus">');this.b(this.v(this.f("name",c,b,0)));this.b('</textarea> <input type="submit" class="primary wide js-submit" value="Create List"> ');return this.fl()},list_guide_link:function(c,b,d){this.b(d||"");this.b('<p class="list-link"> <strong>');this.b(this.v(this.f("name",
c,b,0)));this.b('</strong><br> <span class="list-link-sub">');this.b(this.v(this.f("countStr",c,b,0)));this.b("</span> </p> ");return this.fl()},list_inline:function(c,b,d){this.b(d||"");this.b(' list "');this.b(this.v(this.f("name",c,b,0)));this.b('" ');return this.fl()},list_menu:function(c,b,d){this.b(d=d||"");this.b('<ul class="pop-over-list"> ');this.s(this.f("__ed",c,b,1),c,b,0,36,206,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <li><a class="js-add-card" href="#">Add Card\u2026</a></li> <li><a class="js-copy-list" href="#">Copy List\u2026</a></li> <li><a class="js-move-list" href="#">Move List\u2026</a></li> ')}),
c.pop());this.b(' <li><a class="highlight-icon js-list-subscribe" href="#">Subscribe');this.s(this.f("subscribed",c,b,1),c,b,0,297,333,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('d <span class="icon-sm icon-check"/>')}),c.pop());this.b("</a></li> </ul> ");this.s(this.f("__ed",c,b,1),c,b,0,373,570,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <hr> <ul class="pop-over-list"> <li><a class="js-move-cards" href="#">Move All Cards in This List\u2026</a></li> <li><a class="js-archive-cards" href="#">Archive All Cards in This List\u2026</a></li> </ul> ')}),
c.pop());this.b(" ");this.s(this.f("__ed",c,b,1),c,b,0,589,693,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <hr> <ul class="pop-over-list"> <li><a class="js-close-list" href="#">Archive This List</a></li> </ul> ')}),c.pop());this.b(" ");return this.fl()},login_popover:function(c,b,d){this.b(d=d||"");this.b('<form action="/authenticate" method="post" novalidate> ');this.s(this.f("badLogin",c,b,1),c,b,0,68,127,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <p class="error">The email or password was incorrect.</p> ')}),
c.pop());this.b(" ");this.s(this.f("unconfirmed",c,b,1),c,b,0,157,264,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <p class="error">You can\u2019t sign in until you <a href="/resendValidate">verify your email address</a>.</p> ')}),c.pop());this.b(' <label for="email-login"> Email </label> <input type="email" name="user" id="email-login" value="');this.b(this.v(this.f("email",c,b,0)));this.b('" class="js-autofocus" autocomplete="off" autocorrect="off" spellcheck="false" autocapitalize="off"> <label for="password-login"> Password </label> <input type="password" name="password" id="password-login"> <input type="submit" class="primary wide js-password-login" value="Log In"> <p class="quiet" style="margin-top: 16px;"> <a href="/forgot"><strong>Forgot password?</strong></a> </p> <p class="quiet"> New? <a href="/signup');
this.s(this.f("returnUrl",c,b,1),c,b,0,829,853,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("?returnUrl=");f.b(f.v(f.f("returnUrl",b,d,0)))}),c.pop());this.b('"><strong>Create an Account.</strong></a> </p> <input type="hidden" name="returnUrl" value="');this.b(this.v(this.f("returnUrl",c,b,0)));this.b('"> </form> <form action="/authenticate_openid" method="post" style="margin-top: 16px;"> <label> Or log in with: </label> <input type="hidden" name="openid_identifier" value="https://www.google.com/accounts/o8/id"> <input type="hidden" name="returnUrl" value="');
this.b(this.v(this.f("returnUrl",c,b,0)));this.b('"> <input type="hidden" name="mode" value=""> <input type="hidden" name="login" value=""> <input type="hidden" name="immediate" value=""> <input type="hidden" name="confirmNew" value="true"> <a class="button with-icon primary google js-google-login" href=""> <span class="icon-sm icon-google light"/> Google Account </a> ');this.s(this.f("openidAccount",c,b,1),c,b,0,1583,1718,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" <p>It looks like you haven\u2019t set a password yet. You can do this from the Account page after logging in with your Google Account.</p> ")}),
c.pop());this.b(" </form> ");return this.fl()},manage_members:function(c,b,d){this.b(d=d||"");this.s(this.f("canInviteMembers",c,b,1),c,b,0,21,424,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="search-with-spinner js-search-section"> <input type="text" class="js-search-input js-autofocus" style="margin-bottom: 0;"> <div class="spinner small hide js-loading"></div> </div> <div class="manage-member-section js-helper"> <p class="bottom quiet" style="padding: 6px;"> Search for a person in Trello by name or email address, or enter an email address to invite someone new. </p> </div> ')}),
c.pop());this.b(" ");this.s(this.f("disableAddingExternalMembers",c,b,1),c,b,0,479,1014,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="search-with-spinner js-search-section"> <input type="text" class="js-search-input js-autofocus" style="margin-bottom: 0;"> <div class="spinner small hide js-loading"></div> </div> <p class="warning"> Only organization members can be added to this board. ');f.s(f.f("isBCOrgAdmin",b,d,1),b,d,0,763,898,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' To change this, visit the <a href="');
e.b(e.v(e.f("orgSettingsURL",b,d,0)));e.b('">Organization Settings page</a> and click \u201cInviting Non-Org Members to Boards\u201d. ')}),b.pop());f.b(" ");f.s(f.f("isBCOrgAdmin",b,d,1),b,d,1,0,0,"")||f.b(" Check with an organization admin to change this setting. ");f.b(" </p> ")}),c.pop());this.b(' <div class="manage-member-section hide js-board-members"> <ul class="pop-over-member-list options js-list"></ul> </div> <div class="manage-member-section hide"> <h4>Error</h4> <p class="error">The user or email could not be invited due to an organization restriction.</p> </div> <div class="manage-member-section hide js-error"> <p class="error" style="margin: 16px 8px 6px;"/> </div> ');
this.s(this.f("canAddMembers",c,b,1),c,b,0,1451,2515,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="manage-member-section hide js-uninvited-search-results"></div> <div class="manage-member-section hide js-search-results"> <h4>Select to add.</h4> <ul class="pop-over-member-list options js-list"></ul> </div> <div class="manage-member-section hide js-no-results"> <p class="quiet center" style="padding: 16px 4px;">No results</p> </div> <div class="manage-member-section hide js-org-members"> <h4>');
f.b(f.v(f.f("orgName",b,d,0)));f.b(' Members</h4> <ul class="pop-over-member-list options clearfix js-list');f.s(f.f("orgMemsView",b,d,1),b,d,0,1957,1967,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" collapsed")}),b.pop());f.b('" ');f.s(f.f("orgMemsView",b,d,1),b,d,0,2001,2028,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b('style="margin-bottom: 8px;"')}),b.pop());f.b('></ul> <a href="#" class="quiet-button js-add-all-org-members" style="margin-top: 8px;">Add All Organization Members (<span class="js-num-org-mem"></span>)</a> <a href="#" class="quiet-button js-more-org-members hide" style="margin-top: 8px;">View All Members</a> ');
f.s(f.f("permissionLevel_private",b,d,1),b,d,1,0,0,"")||(f.b(" "),f.s(f.f("selfJoin_false",b,d,1),b,d,0,2356,2459,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b('<a href="#" class="quiet-button js-enable-self-join" style="margin-top: 8px;">Allow Members to Join</a>')}),b.pop()),f.b(" "));f.b(" </div> ")}),c.pop());this.b(" ");this.s(this.f("canInviteMembers",c,b,1),c,b,0,2555,2582,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="js-ad"></div> ')}),c.pop());this.b(" ");return this.fl()},manage_members_select_role:function(c,
b,d){this.b(d=d||"");this.b('<ul class="pop-over-list"> ');this.s(this.f("showAdmin",c,b,1),c,b,0,41,160,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <li> <a href="#" class="js-invite js-select-admin"> Admin <span class="sub-name">');f.b(f.v(f.f("roleText_admin",b,d,0)));f.b("</span> </a> </li> ")}),c.pop());this.b(' <li> <a href="#" class="js-invite js-select-member"> Normal <span class="sub-name">');this.b(this.v(this.f("roleText_normal",c,b,0)));this.b("</span> </a> </li> ");this.s(this.f("showObserver",
c,b,1),c,b,0,313,510,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <li> <a href="#" class="js-invite js-select-observer"> Observer <span class="icon-sm icon-briefcase icon-briefcase-bc-color"></span> <span class="sub-name">');f.b(f.v(f.f("roleText_observer",b,d,0)));f.b("</span> </a> </li> ")}),c.pop());this.b(" </ul> ");return this.fl()},member:function(c,b,d){this.b(d=d||"");this.s(this.f("avatarHash",c,b,1),c,b,0,15,356,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <img class="member-avatar" height="30" width="30" src="');
f.b(f.v(f.f("__avatarDomain",b,d,0)));f.b("/");f.b(f.v(f.f("avatarHash",b,d,0)));f.b('/30.png" alt="');f.s(f.f("deleted",b,d,1),b,d,0,130,167,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b("This member has deleted their account")}),b.pop());f.s(f.f("deleted",b,d,1),b,d,1,0,0,"")||(f.b(f.v(f.f("fullName",b,d,0))),f.b(" ("),f.b(f.v(f.f("username",b,d,0))),f.b(")"));f.b('" title="');f.s(f.f("deleted",b,d,1),b,d,0,251,288,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b("This member has deleted their account")}),b.pop());
f.s(f.f("deleted",b,d,1),b,d,1,0,0,"")||(f.b(f.v(f.f("fullName",b,d,0))),f.b(" ("),f.b(f.v(f.f("username",b,d,0))),f.b(")"));f.b('" /> ')}),c.pop());this.b(" ");this.s(this.f("avatarHash",c,b,1),c,b,1,0,0,"")||(this.b(' <span class="member-initials" title="'),this.s(this.f("deleted",c,b,1),c,b,0,437,474,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("This member has deleted their account")}),c.pop()),this.s(this.f("deleted",c,b,1),c,b,1,0,0,"")||(this.b(this.v(this.f("fullName",c,b,0))),this.b(" ("),
this.b(this.v(this.f("username",c,b,0))),this.b(")")),this.b('"> '),this.s(this.f("deleted",c,b,1),c,b,1,0,0,"")||this.b(this.v(this.f("initials",c,b,0))),this.b(" "),this.s(this.f("deleted",c,b,1),c,b,0,589,590,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("?")}),c.pop()),this.b(" </span> "));this.b(" ");this.s(this.f("isDeactivated",c,b,1),c,b,1,0,0,"")||(this.b(" "),this.s(this.f("showStatus",c,b,1),c,b,0,661,959,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<span class="member-status ');f.b(f.v(f.f("status",
b,d,0)));f.b('" title="');f.s(f.f("status_active",b,d,1),b,d,0,725,766,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b("This member is online and viewing Trello.")}),b.pop());f.s(f.f("status_idle",b,d,1),b,d,0,800,869,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b("This member is idle. They have Trello open but are not looking at it.")}),b.pop());f.s(f.f("status_disconnected",b,d,1),b,d,0,909,932,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b("This member is offline.")}),b.pop());f.b('"/>')}),c.pop()),this.b(" "),this.s(this.f("isBoardAdmin",
c,b,1),c,b,0,992,1072,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<span class="member-type admin" title="This member is an admin of this board."/>')}),c.pop()),this.b(" "),this.s(this.f("isOrganizationAdmin",c,b,1),c,b,0,1114,1201,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<span class="member-type admin" title="This member is an admin of this organization."/>')}),c.pop()),this.b(" "));this.b(' <span class="member-gold-badge" title="This member has Trello Gold."></span> ');return this.fl()},member_account:function(c,
b,d){this.b(d=d||"");this.b('<div class="window-module clearfix"> <div class="window-module-title"> <h3>Account Details</h3> </div> <a class="big-link js-change-name-and-bio" href="#"> <span class="text">Change Name, Initials, or Bio</span> </a> <a class="big-link js-change-email" href="#"> <span class="text">Change Email Address</span> </a> <a class="big-link js-change-avatar" href="#"> <span class="text">Change Avatar</span> </a> <a class="big-link js-change-password" href="#"> <span class="text">');
this.s(this.f("hasPassword",c,b,1),c,b,0,491,498,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("Change ")}),c.pop());this.s(this.f("hasPassword",c,b,1),c,b,1,0,0,"")||this.b("Set ");this.b('Password</span> </a> </div> <div class="window-module clearfix"> <div class="window-module-title"> <h3>Notifications</h3> </div> <a class="big-link js-change-email-freq" href="#"> <span class="text">Change Notification Email Frequency</span> </a> ');this.s(this.f("canAllowDesktopNotifications",c,b,1),c,b,0,830,951,
"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <a class="big-link js-allow-desktop-notifications" href="#"> <span class="text">Allow Desktop Notifications</span> </a> ')}),c.pop());this.b(' </div> <div class="window-module clearfix"> <div class="window-module-title"> <h3>Accessibility</h3> </div> <a class="big-link js-toggle-cb-mode" href="#"> <span class="text">');this.s(this.f("cbEnabled",c,b,1),c,b,0,1174,1182,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("Disable ")}),c.pop());this.s(this.f("cbEnabled",
c,b,1),c,b,1,0,0,"")||this.b("Enable ");this.b('Color Blind Friendly Mode</span> </a> </div> <div class="window-module"> <div class="window-module-title"> <h3>Applications</h3> </div> <div class="js-member-applications"> <div class="spinner loading"></div> </div> </div> <div class="window-module"> <div class="window-module-title"> <h3>Sessions</h3> </div> <div class="js-member-sessions gutter"> <div class="spinner loading"></div> </div> </div> <div class="window-module js-credentials-section"> <div class="window-module-title"> <h3>Credentials</h3> </div> <div class="js-credentials-list gutter"> <div class="spinner loading"></div> </div> </div> <div class="window-module"> <a class="quiet-button gutter js-confirm-delete-member" href="#" style="margin-top: 32px;">Permanently delete your entire account forever?</a> </div> ');
return this.fl()},member_application:function(c,b,d){this.b(d=d||"");this.b('<div class="details"> <h5> ');this.s(this.f("identifier",c,b,1),c,b,0,42,56,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(f.v(f.f("identifier",b,d,0)))}),c.pop());this.b(" ");this.s(this.f("identifier",c,b,1),c,b,1,0,0,"")||this.b("Unknown Application");this.b(' </h5> <p class="quiet"> ');this.b(this.v(this.f("permissions",c,b,0)));this.b(' </p> <p class="quiet"> Approved: ');this.b(this.v(this.f("dateApproved",c,b,0)));this.b("<br> ");
this.s(this.f("neverExpires",c,b,1),c,b,0,233,248,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" Never Expires ")}),c.pop());this.b(" ");this.s(this.f("neverExpires",c,b,1),c,b,1,0,0,"")||(this.b(" Expires: "),this.b(this.v(this.f("dateExpires",c,b,0))),this.b(" "));this.b(' </p> </div> <input type="button" class="js-revoke" value="Revoke"> ');return this.fl()},member_application_list:function(c,b,d){this.b(d=d||"");this.s(this.f("hasTokens",c,b,1),c,b,1,0,0,"")||this.b(' <p class="big-link none"> No applications are using your Trello account. </p> ');
this.b(" ");this.s(this.f("hasTokens",c,b,1),c,b,0,122,170,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="member-applications gutter"></div> ')}),c.pop());this.b(" ");return this.fl()},member_avatar:function(c,b,d){this.b(d=d||"");this.b('<div class="member"> ');this.s(this.f("avatarHash",c,b,1),c,b,0,36,131,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <img class="member-avatar" src="');f.b(f.v(f.f("__avatarDomain",b,d,0)));f.b("/");f.b(f.v(f.f("avatarHash",b,d,0)));f.b('/30.png" alt="');
f.b(f.v(f.f("fullName",b,d,0)));f.b('"> ')}),c.pop());this.b(" ");this.s(this.f("avatarHash",c,b,1),c,b,1,0,0,"")||(this.b(' <p class="member-initials">'),this.b(this.v(this.f("initials",c,b,0))),this.b("</p> "));this.b(" </div> ");return this.fl()},member_boards_list_ad:function(c,b,d){this.b(d=d||"");this.b('<a href="#" class="icon-lg icon-close dark-hover ad-close js-close-ad"></a> ');this.s(this.f("iconClass",c,b,1),c,b,0,90,135,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="ad-icon ');
f.b(f.v(f.f("iconClass",b,d,0)));f.b('"></span> ')}),c.pop());this.b(' <div class="ad-copy">');this.b(this.t(this.f("copyHtml",c,b,0)));this.b("</div>");return this.fl()},member_cards_base:function(c,b,d){this.b(d||"");this.b('<div class="window-module gutter"> <a href="#" class="quiet-button w-img js-toggle-sort"><span class=\'icon-sm icon-menu\'/><span class="js-sort-text"/></a> </div> <div class="js-cards-content"></div> ');return this.fl()},member_cards_board:function(c,b,d){this.b(d=d||"");this.b('<div class="window-module-title"> <span class="window-module-title-icon icon-lg icon-board"/> <h3><a href="');
this.b(this.v(this.f("boardUrl",c,b,0)));this.b('">');this.b(this.v(this.f("name",c,b,0)));this.b("</a></h3> ");this.s(this.f("org",c,b,1),c,b,0,147,251,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <a style="margin: 0 2px;" class="inline-block quiet js-real-link" href="/');f.b(f.v(f.f("name",b,d,0)));f.b('">');f.b(f.v(f.f("displayName",b,d,0)));f.b("</a> ")}),c.pop());this.b(' <span class="icon-sm icon-');this.b(this.v(this.f("permissionLevel",c,b,0)));this.b('"/> <span class=\'quiet js-card-total\'/> </div> <div class="gutter float-cards clearfix js-list"></div> ');
return this.fl()},member_cards_card:function(c,b,d){this.b(d=d||"");this.b("<div class=\"js-card\"></div> <p class='list-card-position quiet'> in <strong>");this.b(this.v(this.f("listName",c,b,0)));this.b("</strong> ");this.s(this.f("showBoard",c,b,1),c,b,0,112,147,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" on <strong>");f.b(f.v(f.f("boardName",b,d,0)));f.b("</strong> ")}),c.pop());this.b(" </p> ");return this.fl()},member_cards_date:function(c,b,d){this.b(d=d||"");this.b('<div class="window-module-title"> <span class="window-module-title-icon icon-lg icon-');
this.b(this.v(this.f("iconType",c,b,0)));this.s(this.f("isOverdue",c,b,1),c,b,0,111,125,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" overdue light")}),c.pop());this.s(this.f("isDueSoon",c,b,1),c,b,0,153,164,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" soon light")}),c.pop());this.b('"/> <h3>');this.b(this.v(this.f("header",c,b,0)));this.b("</h3> <span class='quiet js-card-total'/> </div> <div class=\"gutter float-cards clearfix js-list\"></div> ");return this.fl()},member_cards_filter:function(c,
b,d){this.b(d=d||"");this.b('<ul class="pop-over-list checkable"> <li class="');this.s(this.f("board",c,b,1),c,b,0,58,64,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("active")}),c.pop());this.b('"> <a href="#" class="highlight-icon js-sort-by-board"> Sort by board ');this.s(this.f("board",c,b,1),c,b,0,154,190,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="icon-sm icon-check"/> ')}),c.pop());this.b(' </a> </li> <li class="');this.s(this.f("date",c,b,1),c,b,0,232,238,"{{ }}")&&(this.rs(c,b,
function(b,d,f){f.b("active")}),c.pop());this.b('"> <a href="#" class="highlight-icon js-sort-by-due-date"> Sort by due date ');this.s(this.f("date",c,b,1),c,b,0,332,368,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="icon-sm icon-check"/> ')}),c.pop());this.b(" </a> </li> </ul> ");return this.fl()},member_detail:function(c,b,d){this.b(d=d||"");this.b('<div class="tabbed-pane-header"> <div class="tabbed-pane-header-wrapper clearfix"> <a class="tabbed-pane-header-image profile-image ');this.s(this.f("__ed",
c,b,1),c,b,0,141,168,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("ed js-change-avatar-profile")}),c.pop());this.s(this.f("hasCrown",c,b,1),c,b,0,190,200,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" has-crown")}),c.pop());this.b('" href="#"> ');this.s(this.f("avatarHash",c,b,1),c,b,0,240,342,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <img class="profile-image-image" src="');f.b(f.v(f.f("__avatarDomain",b,d,0)));f.b("/");f.b(f.v(f.f("avatarHash",b,d,0)));f.b('/170.png" alt="');f.b(f.v(f.f("fullName",
b,d,0)));f.b('"> ')}),c.pop());this.b(" ");this.s(this.f("avatarHash",c,b,1),c,b,1,0,0,"")||(this.b(' <span class="profile-image-initials">'),this.b(this.v(this.f("initials",c,b,0))),this.b("</span> "));this.b(' <span class="change-text"> Change Avatar </span> </a> <div class="tabbed-pane-header-details"> <div class="js-current-details"></div> ');this.s(this.f("__ed",c,b,1),c,b,0,590,634,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <form class="js-profile-form hide"></form> ')}),c.pop());this.b(' </div> <div class="tabbed-pane-header-ad js-header-ad"></div> </div> </div> <div class="tabbed-pane-nav clearfix"> <ul> <li class="tabbed-pane-nav-item"> <a class="tabbed-pane-nav-item-button js-member-profile" href="/');
this.b(this.v(this.f("username",c,b,0)));this.b('">Profile</a> </li> <li class="tabbed-pane-nav-item"> <a class="tabbed-pane-nav-item-button js-member-cards" href="/');this.b(this.v(this.f("username",c,b,0)));this.b('/cards">Cards</a> </li> ');this.s(this.f("hasAccount",c,b,1),c,b,0,1041,1213,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("accountProblem",b,d,1),b,d,1,0,0,"")||(f.b(' <li class="tabbed-pane-nav-item"> <a class="tabbed-pane-nav-item-button js-billing" href="/'),f.b(f.v(f.f("username",
b,d,0))),f.b('/billing">Billing</a> </li> '));f.b(" ")}),c.pop());this.b(" ");this.s(this.f("accountProblem",c,b,1),c,b,0,1248,1415,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <li class="tabbed-pane-nav-item"> <a class="tabbed-pane-nav-item-button js-billing" href="/');f.b(f.v(f.f("username",b,d,0)));f.b('/billing">Billing <span class="option">Issue!</span></a> </li> ')}),c.pop());this.b(" ");this.s(this.f("isMe",c,b,1),c,b,0,1444,1584,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <li class="tabbed-pane-nav-item"> <a class="tabbed-pane-nav-item-button js-member-account" href="/');
f.b(f.v(f.f("username",b,d,0)));f.b('/account">Settings</a> </li> ')}),c.pop());this.b(' </ul> </div> <div class="tabbed-pane-main-col clearfix"> <div class="tabbed-pane-main-col-loading hide js-loading-page"> <span class="tabbed-pane-main-col-loading-spinner spinner"></span> </div> <div class="tabbed-pane-main-col-wrapper js-content"></div> </div> ');return this.fl()},member_detail_profile_edit:function(c,b,d){this.b(d||"");this.b('<p class="error js-profile-form-error hide"></p> <label>Full Name</label> <input type="text" name="fullName" value="');
this.b(this.v(this.f("fullName",c,b,0)));this.b('"/> <label>Username</label> <input type="text" name="username" value="');this.b(this.v(this.f("username",c,b,0)));this.b('"/> <label>Initials</label> <input type="text" name="initials" value="');this.b(this.v(this.f("initials",c,b,0)));this.b('"/> <label>Bio <span class="quiet">(optional)</span></label> <textarea name="bio">');this.b(this.v(this.f("bio",c,b,0)));this.b('</textarea> <input type="submit" class="primary wide js-submit-profile" value="Save"/> <input type="button" class="js-cancel-edit-profile" value="Cancel"/> ');
return this.fl()},member_detail_profile_info:function(c,b,d){this.b(d=d||"");this.b('<div class="tabbed-pane-header-details-name"> <h1 class="inline"> ');this.b(this.v(this.f("fullName",c,b,0)));this.b(' </h1> <p class="window-title-extra quiet"> @');this.b(this.v(this.f("username",c,b,0)));this.b(" </p> ");this.s(this.f("hasCrown",c,b,1),c,b,0,154,352,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="member-profile-gold-badge"> <span class="icon-sm icon-crown member-profile-gold-badge-icon"></span> ');
f.s(f.f("__ed",b,d,1),b,d,0,277,300,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b("You\u2019ve got Trello Gold!")}),b.pop());f.b(" ");f.s(f.f("__ed",b,d,1),b,d,1,0,0,"")||f.b("Has Trello Gold");f.b(" </span> ")}),c.pop());this.b(' </div> <div class="tabbed-pane-header-details-content"> ');this.s(this.f("bioHtml",c,b,1),c,b,0,434,447,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(f.t(f.f("bioHtml",b,d,0)))}),c.pop());this.b(" </div> ");this.s(this.f("__ed",c,b,1),c,b,0,476,614,"{{ }}")&&(this.rs(c,b,function(b,
d,f){f.b(' <a class="button-link tabbed-pane-header-details-edit js-edit-profile" href="#"><span class="icon-sm icon-edit"></span> Edit profile</a> ')}),c.pop());this.b(" ");return this.fl()},member_email_freq:function(c,b,d){this.b(d=d||"");this.s(this.f("minutesBetweenSummaries_-1",c,b,1),c,b,0,31,51,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" Don't send emails. ")}),c.pop());this.b(" ");this.s(this.f("minutesBetweenSummaries_60",c,b,1),c,b,0,114,141,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" Send emails periodically. ")}),
c.pop());this.b(" ");this.s(this.f("minutesBetweenSummaries_1",c,b,1),c,b,0,203,227,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" Send emails instantly. ")}),c.pop());this.b(" (change) ");return this.fl()},member_gold_earned:function(c,b,d){this.b(d=d||"");this.b('<div class="window-module gold-earned-modal js-earned-gold-modal gutter"> <img src="https://d78fikflryjgj.cloudfront.net/images/gold/3cbf48993d46484c5d82cc9c1844a54b/TrelloGoldIcon.png" class="gold-earned-modal-image"/> <h1>You\u2019ve ');
this.s(this.f("hasInvitations",c,b,1),c,b,0,250,256,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("earned")}),c.pop());this.s(this.f("hasInvitations",c,b,1),c,b,1,0,0,"")||this.b("got");this.b(" Trello Gold!</h1> <p> Awww yeah! ");this.s(this.f("hasInvitations",c,b,1),c,b,0,369,491,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.b(f.v(f.f("joinedNames",b,d,0)));f.b(" joined Trello on your recommendation or invite! That means you\u2019ve earned ");f.b(f.v(f.f("countMonths",b,d,0)));f.b(" of Trello Gold! ")}),
c.pop());this.b(" ");this.s(this.f("hasInvitations",c,b,1),c,b,1,0,0,"")||(this.b(" You received "),this.b(this.v(this.f("countMonths",c,b,0))),this.b(" of Trello Gold! "));this.b(' </p> <p class="gold-earned-modal-learn-more quiet"> <a href="/gold">Learn more about Trello Gold.</a> </p> ');this.s(this.f("__gold",c,b,1),c,b,1,0,0,"")||this.b(' <a class="gold-earned-modal-button button primary js-start-using-gold" href="#">Start using Trello Gold!</a> ');this.b(" ");this.s(this.f("showClose",c,b,1),
c,b,0,850,1051,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <p class="quiet" style="margin-top: 16px;"> You can visit your "Account Settings" page later to redeem your credits. <a class="js-close-modal" href="#">Okay, thanks! Close this header thing.</a> </p> ')}),c.pop());this.b(" <hr> </div> ");return this.fl()},member_gold_intro:function(c,b,d){this.b(d||"");this.b('<div class="product-intro-modal gold-intro"> <a href="#" class="icon-lg icon-close dark-hover product-intro-close js-close-intro-helper"></a> <div class="product-intro-header"> <img class="product-intro-logo" src="https://d78fikflryjgj.cloudfront.net/images/gold/6d243fedef388195ac2dd4bf3f6fcfa5/TrelloGoldLogo.png" alt="Trello Gold" /> </div> <hr> <h2>Yessssss... You\'ve got Trello Gold!</h2> <p> Here\u2019s what you need to know to get started\u2026 </p> <div class="product-intro-section"> <span class="product-intro-number">1</span> <h3>Stickers</h3> <p> Check out the \u201cStickers\u201d pane on the sidebar of any board. You can view and stick additional stickers and upload your own from there. </p> </div> <div class="product-intro-section"> <span class="product-intro-number">2</span> <h3>Board backgrounds</h3> <p> Check out the \u201cSettings\u201d pane in the sidebar of any board and select \u201cChange Board Background\u201d. From there, you can view and use additional backgrounds and upload your own. </p> </div> <div class="product-intro-section"> <span class="product-intro-number">3</span> <h3>Larger attachments</h3> <p> You can now upload files up to 250MB! Just select a file via \u201cAttach File\u2026\u201d on the back of the card, or drag and drop from your desktop. </p> </div> <div class="product-intro-section"> <span class="product-intro-number">4</span> <h3>Uploading custom emoji</h3> <p> While on a card, open the comment field, click the menu button in the bottom right hand corner, and select \u201cUpload Emoji\u201d. You can upload images and name the the emoji from there. </p> </div> <div class="product-intro-section"> <span class="product-intro-number">5</span> <h3>Billing page</h3> <p> Check out the \u201cBilling\u201d tab for future reference. You can see when your account will renew, update your credit card info, see billing history and so on. If you signed up via credits, you can check when your credits expire and you can enter a credit card and sign up for a subscription. </p> </div> <p> This will be in the <a href="http://help.trello.com/customer/portal/articles/1350088-trello-gold-user-guide"><strong>Trello Gold User Guide</strong></a> for future reference. Enjoy! And thanks for upgrading! </p> <p class="product-intro-close-bottom center quiet"> <a href="#" class="js-close-intro-helper dark-hover"> <span class="icon-sm icon-close dark-hover"/>Got it! Close this helper. </a> </p> </div> ');
return this.fl()},member_inline:function(c,b,d){this.b(d=d||"");this.s(this.f("avatarHash",c,b,1),c,b,0,15,166,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <img class="inline-member-av" src="');f.b(f.v(f.f("__avatarDomain",b,d,0)));f.b("/");f.b(f.v(f.f("avatarHash",b,d,0)));f.b('/30.png" alt="');f.b(f.v(f.f("fullName",b,d,0)));f.b(" (");f.b(f.v(f.f("username",b,d,0)));f.b(')" title="');f.b(f.v(f.f("fullName",b,d,0)));f.b(" (");f.b(f.v(f.f("username",b,d,0)));f.b(')" /> ')}),c.pop());this.b(' <span class="bold">');
this.b(this.v(this.f("fullName",c,b,0)));this.b("</span> ");return this.fl()},member_large_avatar:function(c,b,d){this.b(d=d||"");this.b('<div class="mem-info"> <h3 class="bottom"><a class="js-profile" href="/');this.b(this.v(this.f("username",c,b,0)));this.b('">');this.b(this.v(this.f("fullName",c,b,0)));this.b('</a></h3> <p class="quiet">@');this.b(this.v(this.f("username",c,b,0)));this.b('</p> </div> <img src="');this.b(this.v(this.f("__avatarDomain",c,b,0)));this.b("/");this.b(this.v(this.f("avatarHash",
c,b,0)));this.b('/original.png" alt="');this.s(this.f("deleted",c,b,1),c,b,0,224,261,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("This member has deleted their account")}),c.pop());this.s(this.f("deleted",c,b,1),c,b,1,0,0,"")||(this.b(this.v(this.f("fullName",c,b,0))),this.b(" ("),this.b(this.v(this.f("username",c,b,0))),this.b(")"));this.b('" title="');this.s(this.f("deleted",c,b,1),c,b,0,345,382,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("This member has deleted their account")}),c.pop());this.s(this.f("deleted",
c,b,1),c,b,1,0,0,"")||(this.b(this.v(this.f("fullName",c,b,0))),this.b(" ("),this.b(this.v(this.f("username",c,b,0))),this.b(")"));this.b('" /> ');return this.fl()},member_list_item_detail:function(c,b,d){this.b(d=d||"");this.b('<div class="member member-no-menu');this.s(this.f("isVirtual",c,b,1),c,b,0,47,62,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" member-virtual")}),c.pop());this.s(this.f("isDeactivated",c,b,1),c,b,0,94,113,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" member-deactivated")}),
c.pop());this.b('"> ');this.b(this.rp("member",c,b,""));this.b(' </div> <div class="details"> <p class="name-line"> <span class="full-name">');this.b(this.v(this.f("fullName",c,b,0)));this.b('</span> </p> <p class="bottom quiet"> ');this.s(this.f("username",c,b,1),c,b,0,284,337,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<span class="quiet inline-block">@');f.b(f.v(f.f("username",b,d,0)));f.b("</span>")}),c.pop());this.b(" ");this.s(this.f("showGoogleApps",c,b,1),c,b,0,370,466,"{{ }}")&&(this.rs(c,
b,function(b,d,f){f.b(" ");f.s(f.f("gMail",b,d,1),b,d,0,381,455,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" ");e.s(e.f("username",b,d,1),b,d,0,395,397,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b("- ")}),b.pop());e.b('<span class="icon-sm icon-google"/>');e.b(e.v(e.f("gMail",b,d,0)));e.b(" ")}),b.pop());f.b(" ")}),c.pop());this.b(' </p> </div> <div class="options"> ');this.s(this.f("isOrgMember",c,b,1),c,b,0,536,1432,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("showActivity",b,d,1),b,d,0,554,
625,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <a class="option quiet-button js-view-activity" href="#">Activity</a> ')}),b.pop());f.b(" ");f.s(f.f("allowTypeChange",b,d,1),b,d,0,663,788,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <a class="option button-link role-button js-change-role" href="#"> ');e.b(e.v(e.f("orgMemberType",b,d,0)));e.b(' <span class="icon-sm icon-menu"/> </a> ')}),b.pop());f.b(" ");f.s(f.f("allowTypeChange",b,d,1),b,d,1,0,0,"")||(f.b(' <p class="option status quiet">'),f.b(f.v(f.f("orgMemberType",
b,d,0))),f.b("</p> "));f.b(" ");f.s(f.f("allowReactivate",b,d,1),b,d,0,924,996,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <a class="option quiet-button js-reactivate" href="#"> Reactivate </a> ')}),b.pop());f.b(" ");f.s(f.f("isMe",b,d,1),b,d,0,1026,1213,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <a class="option button-link remove-button js-remove-or-deactivate ');e.s(e.f("canRemove",b,d,1),b,d,1,0,0,"")||e.b("disabled");e.b('" href="#"> <span class="icon-sm icon-close"/> Leave');e.s(e.f("orgIsBC",
b,d,1),b,d,0,1194,1195,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b("\u2026")}),b.pop());e.b(" </a> ")}),b.pop());f.b(" ");f.s(f.f("isMe",b,d,1),b,d,1,0,0,"")||(f.b(" "),f.s(f.f("ownsOrg",b,d,1),b,d,0,1245,1409,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <a class="option button-link remove-button js-remove-or-deactivate ');e.s(e.f("canRemove",b,d,1),b,d,1,0,0,"")||e.b("disabled");e.b('" href="#"> <span class="icon-sm icon-close"/> Remove\u2026 </a> ')}),b.pop()),f.b(" "));f.b(" ")}),c.pop());this.b(" ");
this.s(this.f("isOrgMember",c,b,1),c,b,1,0,0,"")||(this.b(" "),this.s(this.f("showGoogleApps",c,b,1),c,b,0,1485,1792,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("hidden",b,d,1),b,d,1,0,0,"")||f.b(' <a class="option quiet-button js-hide-member" href="#"> Dismiss </a> ');f.b(" ");f.s(f.f("hidden",b,d,1),b,d,0,1590,1666,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <a class="option quiet-button js-unhide-member" href="#"> Always Show </a> ')}),b.pop());f.b(' <a class="option button-link primary js-invite-to-org" href="#"> <span class="icon-sm icon-add"/> Add Member </a> ')}),
c.pop()),this.b(" "));this.b(" </div> ");return this.fl()},member_login:function(c,b,d){this.b(d=d||"");this.b('<p class="member-login-email bottom"> ');this.b(this.v(this.f("email",c,b,0)));this.b(" </p> ");this.s(this.f("primary",c,b,1),c,b,0,65,110,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <p class="bottom quiet"> Primary email </p> ')}),c.pop());this.b(" ");this.s(this.f("primary",c,b,1),c,b,1,0,0,"")||this.b(' <a class="js-primary bottom quiet" href="#"> Set as primary email </a> ');this.b(' <p class="member-login-date-added bottom quiet"> Added: <span class="date" dt="');
this.b(this.v(this.f("dateAdded",c,b,0)));this.b('"></span> </p> ');this.s(this.f("primary",c,b,1),c,b,1,0,0,"")||this.b(' <span class="member-login-remove icon-sm icon-close dark-hover js-remove"></span> ');this.b(" ");return this.fl()},member_notifications:function(c,b,d){this.b(d=d||"");this.b('<div class="window-module-title"> <span class="window-module-title-icon icon-lg icon-notification"/> <h3>Notifications</h3> </div> ');this.s(this.f("empty",c,b,1),c,b,0,141,187,"{{ }}")&&(this.rs(c,b,function(b,
d,f){f.b('<div class="empty-list">No Notifications</div>')}),c.pop());this.b(' <div class="js-list-notifications"></div> <a class="show-more js-more-notifications" href="#">Load More Notifications</a> ');return this.fl()},member_on_board_menu:function(c,b,d){this.b(d=d||"");this.b('<li> <a class="');this.s(this.f("canChangeRole",c,b,1),c,b,0,33,47,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("js-change-role")}),c.pop());this.s(this.f("canChangeRole",c,b,1),c,b,1,0,0,"")||this.b("disabled");this.b('" href="#"> Change permissions\u2026 ');
this.s(this.f("type",c,b,1),c,b,0,150,216,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<span class="quiet" style="font-weight: normal;">(');f.b(f.v(f.f("type",b,d,0)));f.b(")</span>")}),c.pop());this.b(' </a> </li> <li><a href="');this.b(this.v(this.f("boardProfileUrl",c,b,0)));this.b('">View Member\u2019s Board Activity</a></li> ');this.s(this.f("canRemove",c,b,1),c,b,0,323,441,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <li> <a class="js-remove-member"> ');f.s(f.f("isMe",b,d,1),b,d,0,367,381,"{{ }}")&&
(f.rs(b,d,function(b,d,e){e.b(" Leave Board\u2026 ")}),b.pop());f.b(" ");f.s(f.f("isMe",b,d,1),b,d,1,0,0,"")||f.b(" Remove from Board\u2026 ");f.b(" </a> </li> ")}),c.pop());this.b(" ");this.s(this.f("canRemove",c,b,1),c,b,1,0,0,"")||(this.b(" "),this.s(this.f("isMe",c,b,1),c,b,0,480,764,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("isMoreThanOneMember",b,d,1),b,d,0,505,739,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" ");e.s(e.f("memberIsAdmin",b,d,1),b,d,0,524,720,"{{ }}")&&(e.rs(b,d,function(b,
d,e){e.b(' <li> <hr> <p class="quiet bottom"> You can\u2019t leave because you are the only admin. To make another user an admin, click their avatar, select \u201cChange permissions\u2026\u201d, and select \u201cAdmin\u201d. </p> </li> ')}),b.pop());e.b(" ")}),b.pop());f.b(" ")}),c.pop()),this.b(" "));this.b(" ");this.s(this.f("isGhost",c,b,1),c,b,0,801,955,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <li> <hr> <p class="quiet bottom"> This user will be able to access this board once they sign up with Trello and confirm their email address. </p> </li> ')}),
c.pop());this.b(" ");return this.fl()},member_on_card:function(c,b,d){this.b(d=d||"");this.b("<div class='member js-member-on-card-menu");this.s(this.f("isDeactivated",c,b,1),c,b,0,59,78,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" member-deactivated")}),c.pop());this.s(this.f("isVirtual",c,b,1),c,b,0,110,125,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" member-virtual")}),c.pop());this.b("' data-idmem='");this.b(this.v(this.f("id",c,b,0)));this.b("'>");this.b(this.rp("member",c,b,""));this.b("</div> ");
return this.fl()},member_on_card_menu:function(c,b,d){this.b(d=d||"");this.s(this.f("__ed",c,b,1),c,b,0,9,68,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <li><a class="js-remove-member">Remove from Card</a></li> ')}),c.pop());this.b(" ");return this.fl()},member_profile:function(c,b,d){this.b(d||"");this.b('<div class="window-module"> <div class="window-module-title"> <span class="window-module-title-icon icon-lg icon-org"/> <h3>Organizations</h3> </div> <div class="gutter js-list-orgs"> </div> </div> <div class="window-module"> <div class="window-module-title"> <span class="window-module-title-icon icon-lg icon-activity"/> <h3>Activity</h3> </div> <div class="list-actions"></div> <p class="bottom"> <a class="show-more js-more-actions" href="#">Load More Activity</a> </p> </div> ');
return this.fl()},member_profile_info:function(c,b,d){this.b(d=d||"");this.b(' <div class="member-profile-info clearfix" name="');this.b(this.v(this.f("username",c,b,0)));this.b('"> <div class="member"> ');this.b(this.rp("member",c,b,""));this.b(' </div> <div class="info"> <h3 class="bottom"> <a class="js-profile" href="/');this.b(this.v(this.f("username",c,b,0)));this.b('">');this.b(this.v(this.f("fullName",c,b,0)));this.b('</a> </h3> <p class="quiet bottom">@');this.b(this.v(this.f("username",c,
b,0)));this.b("</p> ");this.s(this.f("bio",c,b,1),c,b,0,259,322,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<p class="quiet bottom ellip" title="');f.b(f.v(f.f("bio",b,d,0)));f.b('">');f.b(f.t(f.f("bioHtml",b,d,0)));f.b("</p>")}),c.pop());this.b(' <p class="quiet bottom"> ');this.s(this.f("showMemberOptions",c,b,1),c,b,0,378,569,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("orgCardsUrl",b,d,1),b,d,0,395,467,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <a class="js-org-cards-page" href="');
e.b(e.v(e.f("orgCardsUrl",b,d,0)));e.b('">View Org Cards</a> ')}),b.pop());f.b(" ");f.s(f.f("__ed",b,d,1),b,d,0,493,559,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b('<span><a class="js-remove-mem" href="#">Remove from Org</a></span>')}),b.pop());f.b(" ")}),c.pop());this.b(" </p> </div> </div> ");return this.fl()},member_session:function(c,b,d){this.b(d=d||"");this.s(this.f("type_support",c,b,1),c,b,0,17,241,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <p class="bottom"> Authorization for Trello Support (Ticket #');
f.b(f.v(f.d("data.ticket",b,d,0)));f.b(') <br> <span class="quiet"> Expires: <span class="date" dt="');f.b(f.v(f.f("dateExpires",b,d,0)));f.b('"></span> <a href="#" class="quiet js-revoke">Revoke</a> </span> </p> ')}),c.pop());this.b(" ");this.s(this.f("type_support",c,b,1),c,b,1,0,0,"")||(this.b(' <p class="bottom"> <strong>'),this.b(this.v(this.f("ipAddress",c,b,0))),this.b('</strong> <span class="quiet js-location"></span> <br> <span class="quiet"> Last used: '),this.s(this.f("isRecent",c,b,1),
c,b,0,417,440,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" Less than an hour ago ")}),c.pop()),this.b(" "),this.s(this.f("isRecent",c,b,1),c,b,1,0,0,"")||(this.b(' <span class="date" dt="'),this.b(this.v(this.f("dateLastUsed",c,b,0))),this.b('"></span> ')),this.b(" "),this.s(this.f("isCurrent",c,b,1),c,b,0,545,575,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("<span>(current session)</span>")}),c.pop()),this.b(" </span> </p> "));this.b(" ");return this.fl()},member_session_list:function(c,b,d){this.b(d||
"");this.b('<div class="js-sessions"></div> <input type="button" class="js-log-out-other" value="Log Out Other Sessions"> ');return this.fl()},members_voted:function(c,b,d){this.b(d=d||"");this.b(' <div class="list-voters clearfix ');this.s(this.f("fewMembers",c,b,1),c,b,0,49,56,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("compact")}),c.pop());this.b('"> ');this.s(this.f("members",c,b,1),c,b,0,86,279,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="voter"> <div class="member member-no-menu"> ');
f.b(f.rp("member",b,d,""));f.b(" </div> ");f.s(f.f("fewMembers",b,d,1),b,d,0,177,256,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <p class="title"> ');e.b(e.v(e.f("fullName",b,d,0)));e.b(' <span class="quiet">(');e.b(e.v(e.f("username",b,d,0)));e.b(")</span> </p> ")}),b.pop());f.b(" </div> ")}),c.pop());this.b(" </div> ");this.s(this.f("moreMembers",c,b,1),c,b,0,315,420,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <a href="#" class="show-more compact js-more-members-voted"> Show all voters (');f.b(f.v(f.f("lengthDiff",
b,d,0)));f.b(" more) </a> ")}),c.pop());this.b(" ");this.s(this.f("canVote",c,b,1),c,b,0,449,573,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <hr> <a class="js-');f.s(f.f("voted",b,d,1),b,d,0,478,480,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b("un")}),b.pop());f.b("vote button vote-button ");f.s(f.f("voted",b,d,1),b,d,0,524,531,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b("primary")}),b.pop());f.b('">Vote');f.s(f.f("voted",b,d,1),b,d,0,557,558,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b("d")}),b.pop());f.b("</a> ")}),
c.pop());this.b(" ");return this.fl()},"menu-base":function(c,b,d){this.b(d||"");this.b('<ul class="pop-over-list"> <li><ul class="boards-pop-over-list" /></li> ');this.b(this.t(this.f("content",c,b,0)));this.b(" </ul> ");return this.fl()},menu:function(c,b,d){this.b(d=d||"");this.b('<ul class="pop-over-list"> <li><ul class="dynamic-pop-over-list" /></li> ');this.s(this.f("menu_cards",c,b,1),c,b,0,88,210,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" <li><a ");f.s(f.f("js_class",b,d,1),b,d,0,109,130,
"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b('class="');e.b(e.v(e.f("js_class",b,d,0)));e.b('" ')}),b.pop());f.b(' href="');f.s(f.f("url",b,d,1),b,d,0,158,165,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(e.v(e.f("url",b,d,0)))}),b.pop());f.s(f.f("url",b,d,1),b,d,1,0,0,"")||f.b("#");f.b('">');f.b(f.v(f.f("name",b,d,0)));f.b("</a></li> ")}),c.pop());this.b(" </ul> ");return this.fl()},mini_profile:function(c,b,d){this.b(d=d||"");this.b('<div class="mini-profile-info"> <div class="member-large"> ');this.s(this.f("isMe",
c,b,1),c,b,0,68,125,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<a class="av-btn change js-change-av" href="#">Change</a>')}),c.pop());this.b(" ");!this.s(this.f("isMe",c,b,1),c,b,1,0,0,"")&&this.s(this.f("avatarHash",c,b,1),c,b,0,159,204,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<a class="av-btn js-view-large" href="#"></a>')}),c.pop());this.b(" ");this.s(this.f("avatarHash",c,b,1),c,b,0,244,585,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <img class="member-avatar" height="50" width="50" src="');
f.b(f.v(f.f("__avatarDomain",b,d,0)));f.b("/");f.b(f.v(f.f("avatarHash",b,d,0)));f.b('/50.png" alt="');f.s(f.f("deleted",b,d,1),b,d,0,359,396,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b("This member has deleted their account")}),b.pop());f.s(f.f("deleted",b,d,1),b,d,1,0,0,"")||(f.b(f.v(f.f("fullName",b,d,0))),f.b(" ("),f.b(f.v(f.f("username",b,d,0))),f.b(")"));f.b('" title="');f.s(f.f("deleted",b,d,1),b,d,0,480,517,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b("This member has deleted their account")}),b.pop());
f.s(f.f("deleted",b,d,1),b,d,1,0,0,"")||(f.b(f.v(f.f("fullName",b,d,0))),f.b(" ("),f.b(f.v(f.f("username",b,d,0))),f.b(")"));f.b('" /> ')}),c.pop());this.b(" ");this.s(this.f("avatarHash",c,b,1),c,b,1,0,0,"")||(this.b(' <span class="member-initials" title="'),this.s(this.f("deleted",c,b,1),c,b,0,666,703,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("This member has deleted their account")}),c.pop()),this.s(this.f("deleted",c,b,1),c,b,1,0,0,"")||(this.b(this.v(this.f("fullName",c,b,0))),this.b(" ("),
this.b(this.v(this.f("username",c,b,0))),this.b(")")),this.b('"> '),this.s(this.f("deleted",c,b,1),c,b,1,0,0,"")||this.b(this.v(this.f("initials",c,b,0))),this.b(" "),this.s(this.f("deleted",c,b,1),c,b,0,818,819,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("?")}),c.pop()),this.b(" </span> "));this.b(' </div> <div class="info"> <h3 class="bottom" style="margin-right: 40px;"><a class="js-profile" href="/');this.b(this.v(this.f("username",c,b,0)));this.b('">');this.b(this.v(this.f("fullName",c,b,0)));
this.b('</a></h3> <p class="quiet bottom">@');this.b(this.v(this.f("username",c,b,0)));this.b("</p> ");this.s(this.f("bio",c,b,1),c,b,0,1044,1085,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<p class="quiet bottom ellip">');f.b(f.v(f.f("bio",b,d,0)));f.b("</p>")}),c.pop());this.b(" ");this.s(this.f("showEmail",c,b,1),c,b,0,1108,1145,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<p class="bottom quiet">');f.b(f.v(f.f("email",b,d,0)));f.b("</p>")}),c.pop());this.b(" ");this.s(this.f("isMe",c,b,1),c,b,
0,1169,1254,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<p class="bottom"><a href="#" class="quiet js-edit-profile">Edit profile info</a></p>')}),c.pop());this.b(" </div> </div> ");return this.fl()},move_card_controls:function(c,b,d){this.b(d=d||"");this.s(this.f("hideBoard",c,b,1),c,b,1,0,0,"")||(this.b(' <div class="form-grid"> <div class="button-link setting form-grid-child form-grid-child-full"> <span class="label">Board</span> <span class="value js-board-value"></span> <label>Board</label> <select class="js-select-board"> '),
this.s(this.f("organizations",c,b,1),c,b,0,258,453,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <optgroup label="');f.b(f.v(f.f("displayName",b,d,0)));f.b('"> ');f.s(f.f("boards",b,d,1),b,d,0,305,429,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <option value="');e.b(e.v(e.f("id",b,d,0)));e.b('"');e.s(e.f("selected",b,d,1),b,d,0,341,361,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b(' selected="selected"')}),b.pop());e.b(">");e.b(e.v(e.f("name",b,d,0)));e.s(e.f("selected",b,d,1),b,d,0,396,406,"{{ }}")&&(e.rs(b,
d,function(b,d,e){e.b(" (current)")}),b.pop());e.b("</option> ")}),b.pop());f.b(" </optgroup> ")}),c.pop()),this.b(" </select> </div> </div> "));this.b(' <div class="form-grid"> <div class="button-link setting form-grid-child form-grid-child-threequarters"> <span class="label">List</span> <span class="value js-list-value"></span> <label>List</label> <select class="js-select-list"></select> </div> <div class="button-link setting form-grid-child form-grid-child-quarter"> <span class="label">Position</span> <span class="value js-pos-value"></span> <label>Position</label> <select class="js-select-position"></select> </div> </div> ');
return this.fl()},notification:function(c,b,d){this.b(d=d||"");this.b('<div class="creator');this.s(this.f("isDueDateNotification",c,b,1),c,b,1,0,0,"")||this.b(" member");this.s(this.f("member",c,b,1),c,b,0,89,106,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" js-show-mem-menu")}),c.pop());this.b('"');this.s(this.f("member",c,b,1),c,b,0,129,147,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' idmember="');f.b(f.v(f.f("id",b,d,0)));f.b('"')}),c.pop());this.b("> ");this.s(this.f("member",c,b,1),c,b,0,171,
182,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(f.rp("member",b,d,""))}),c.pop());this.b(" ");this.s(this.f("memberDeleted",c,b,1),c,b,0,212,256,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<span class="member-initials quiet">?</span>')}),c.pop());this.b(" ");this.s(this.f("isDueDateNotification",c,b,1),c,b,0,301,335,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<span class="icon-lg icon-clock"/>')}),c.pop());this.b(" ");this.s(this.f("isDeclinedInvitationNotification",c,b,1),c,b,0,399,433,"{{ }}")&&
(this.rs(c,b,function(b,d,f){f.b('<span class="icon-lg icon-close"/>')}),c.pop());this.b(' </div> <div class="phenom-desc');this.s(this.f("isDesktopNotification",c,b,1),c,b,1,0,0,"")||(this.s(this.f("invitedToBoard",c,b,1),c,b,0,546,587,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.s(f.f("stillInvited",b,d,1),b,d,0,563,570,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" invite")}),b.pop())}),c.pop()),this.s(this.f("invitedToOrganization",c,b,1),c,b,0,632,673,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.s(f.f("stillInvited",
b,d,1),b,d,0,649,656,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" invite")}),b.pop())}),c.pop()));this.b('"> ');this.s(this.f("member",c,b,1),c,b,0,739,824,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<a class="inline-object js-show-mem-menu" href="#" idmember="');f.b(f.v(f.f("id",b,d,0)));f.b('">');f.b(f.v(f.f("fullName",b,d,0)));f.b("</a>")}),c.pop());this.b(" ");this.s(this.f("memberDeleted",c,b,1),c,b,0,854,898,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<span class="quiet">[deleted account]</span>')}),
c.pop());this.b(" ");this.s(this.f("entities",c,b,1),c,b,0,930,943,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.b(f.rp("entity",b,d,""));f.b(" ")}),c.pop());this.b(" ");this.s(this.f("isDesktopNotification",c,b,1),c,b,1,0,0,"")||(this.b(" "),this.s(this.f("stillInvited",c,b,1),c,b,0,1001,1237,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="phenom-opts"> <a class="button-link js-accept-invitation');f.s(f.f("confirmed",b,d,1),b,d,1,0,0,"")||f.b(" disabled");f.b('" href="#">Accept</a> <a class="button-link js-reject-invitation');
f.s(f.f("confirmed",b,d,1),b,d,1,0,0,"")||f.b(" disabled");f.b('" href="#">Reject</a> </div> ')}),c.pop()),this.b(" "));this.b(" </div> ");this.s(this.f("isDesktopNotification",c,b,1),c,b,1,0,0,"")||(this.b(' <p class="phenom-meta quiet"> '),this.s(this.f("date",c,b,1),c,b,0,1355,1395,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<span class="date" dt="');f.b(f.v(f.f("date",b,d,0)));f.b('"></span>')}),c.pop()),this.b(" </p> "));this.b(" ");return this.fl()},notification_title:function(c,b,d){this.b(d=
d||"");this.s(this.f("textType",c,b,1),c,b,0,13,25,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.b(f.t(f.f("text",b,d,0)));f.b(" ")}),c.pop());this.b(" ");this.s(this.f("cardType",c,b,1),c,b,0,52,64,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.b(f.t(f.f("name",b,d,0)));f.b(" ")}),c.pop());this.b(" ");this.s(this.f("boardType",c,b,1),c,b,0,92,104,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.b(f.t(f.f("name",b,d,0)));f.b(" ")}),c.pop());this.b(" ");this.s(this.f("organizationType",c,b,
1),c,b,0,140,152,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.b(f.t(f.f("name",b,d,0)));f.b(" ")}),c.pop());this.b(" ");this.s(this.f("listType",c,b,1),c,b,0,187,199,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.b(f.t(f.f("name",b,d,0)));f.b(" ")}),c.pop());this.b(" ");this.s(this.f("checklistType",c,b,1),c,b,0,231,243,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.b(f.t(f.f("name",b,d,0)));f.b(" ")}),c.pop());this.b(" ");this.s(this.f("checkItemType",c,b,1),c,b,0,280,292,"{{ }}")&&(this.rs(c,
b,function(b,d,f){f.b(" ");f.b(f.t(f.f("name",b,d,0)));f.b(" ")}),c.pop());this.b(" ");this.s(this.f("labelType",c,b,1),c,b,0,325,355,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("text",b,d,1),b,d,0,335,345,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(e.t(e.f("text",b,d,0)))}),b.pop());f.b(" ")}),c.pop());this.b(" ");this.s(this.f("attachmentType",c,b,1),c,b,0,389,401,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.b(f.t(f.f("name",b,d,0)));f.b(" ")}),c.pop());this.b(" ");this.s(this.f("memberType",
c,b,1),c,b,0,436,452,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.b(f.t(f.f("fullName",b,d,0)));f.b(" ")}),c.pop());this.b(" ");this.s(this.f("relDateType",c,b,1),c,b,0,484,497,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.b(f.v(f.f("current",b,d,0)));f.b(" ")}),c.pop());this.b(" ");return this.fl()},observer_list:function(c,b,d){this.b(d=d||"");this.b('<ul class="pop-over-member-list js-list ');this.s(this.f("__ed",c,b,1),c,b,0,49,80,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("js-list-draggable-board-members")}),
c.pop());this.b('"></ul> ');return this.fl()},org_account:function(c,b,d){this.b(d=d||"");this.b('<div class="window-module"> <a class="big-link js-change-org-vis" href="#"> <span class="text">Organization Visibility</span> </a> <div> ');this.s(this.f("premium:prefs",c,b,1),c,b,0,155,653,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="window-module"> <div class="window-module-title"> <h3 class="inline">Business Class Settings</h3> </div> <a class="big-link js-restrict-inv-org" href="#"> <span class="text">Org Membership Restrictions</span> </a> <a class="big-link js-restrict-board-vis" href="#"> <span class="text">Board Creation Restrictions</span> </a> <a class="big-link options dark-hover js-toggle-non-org-member-board-invites" href="#"> <span class="text">Inviting Non-Org Members to Boards</span> </a> <div> ')}),
c.pop());this.b(" ");this.s(this.f("hasBusinessClass",c,b,1),c,b,1,0,0,"")||this.b(' <div class="window-module gutter"> <a class="quiet-button js-confirm-delete-org" href="#" style="padding: 6px 11px; margin-top: 32px;">Delete this organization?</a> </div> ');this.b(" ");return this.fl()},org_bc_intro:function(c,b,d){this.b(d=d||"");this.b('<div class="product-intro-modal bc-intro"> <a href="#" class="icon-lg icon-close dark-hover product-intro-close js-close-intro-helper"></a> <div class="product-intro-header"> <img class="product-intro-logo" src="https://d78fikflryjgj.cloudfront.net/images/landing/businessClass/9b9b5d825b48e46a607311eeef8c2e67/trello-business-class-with-text.png" alt="Trello Business Class" /> </div> <hr> <div class="product-intro-section"> <h2>Welcome to Business Class!</h2> <p>To get started...</p> </div> <div class="product-intro-section"> <span class="product-intro-number">1</span> <h3>Visit the Members tab to manage members.</h3> <p> You can link your Google Apps Domain, change roles and deactivate members, and view member activity on the \u201cMembers\u201d tab above. </p> </div> <div class="product-intro-section"> <span class="product-intro-number">2</span> <h3>Check out the Organization Settings page.</h3> <p> To check out organization and board invite restrictions and board creation restrictions, click the \u201cOrganization Settings\u201d tab above. </p> </div> <div class="product-intro-section"> <span class="product-intro-number">3</span> <h3>Create bulk exports in one click.</h3> <p> Click the Export tab to open the export dialog. Exports include all of your organization\u2019s data, optionally including attachments. Exports will be in ');
this.s(this.f("isJPS",c,b,1),c,b,0,1337,1345,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("CSV and ")}),c.pop());this.b("JSON format. </p> </div> ");this.s(this.f("isJPS",c,b,1),c,b,0,1390,1702,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="product-intro-section"> <span class="product-intro-number">4</span> <h3>Use board backgrounds and stickers.</h3> <p> Open the board menu in the sidebar and select stickers or \u201cSettings\u201d > \u201cChange background\u201d. You\u2019ll see additional stickers and backgrounds, plus you can upload your own. </p> </div> ')}),
c.pop());this.b(' <div class="product-intro-section"> <span class="product-intro-number"> ');this.s(this.f("isJPS",c,b,1),c,b,0,1795,1798,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" 5 ")}),c.pop());this.b(" ");this.s(this.f("isJPS",c,b,1),c,b,1,0,0,"")||this.b(" 4 ");this.b(' </span> <h3>For billing info\u2026</h3> <p> To see billing history, change a credit card, or change the billing contact, click the \u201cBilling\u201d tab above. </p> </div> <div class="product-intro-section"> <span class="product-intro-number"> ');
this.s(this.f("isJPS",c,b,1),c,b,0,2074,2077,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" 6 ")}),c.pop());this.b(" ");this.s(this.f("isJPS",c,b,1),c,b,1,0,0,"")||this.b(" 5 ");this.b(' </span> <h3>Check the User Guide.</h3> <p style="margin-bottom: 0;"> Everything else is outlined in the <a href="http://help.trello.com/customer/portal/articles/1349993-using-business-class">Business Class User Guide</a>. Business Class features are usually marked with this icon: <span class="icon-sm icon-briefcase icon-briefcase-bc-color"/>. </p> </div> <div class="product-intro-section"> <p> Here is a video walking you through the interface. It will be in the <a href="http://help.trello.com/customer/portal/articles/1349993-using-business-class">User Guide</a> if you want to watch it later. </p> </div> <div class"product-intro-section"> <p> <a href="https://fast.wistia.net/embed/iframe/4v5qyh3c69?popover=true&plugin%5Bchapters%5D%5Bch_1_title%5D=Get%20Organized&plugin%5Bchapters%5D%5Bch_1_time%5D=35&plugin%5Bchapters%5D%5Bch_2_title%5D=Super%20Admins&plugin%5Bchapters%5D%5Bch_2_time%5D=84&plugin%5Bchapters%5D%5Bch_3_title%5D=Member%20Restrictions&plugin%5Bchapters%5D%5Bch_3_time%5D=108&plugin%5Bchapters%5D%5Bch_4_title%5D=Members%20Page&plugin%5Bchapters%5D%5Bch_4_time%5D=158&plugin%5Bchapters%5D%5Bch_5_title%5D=Google%20Apps&plugin%5Bchapters%5D%5Bch_5_time%5D=219&plugin%5Bchapters%5D%5Bch_6_title%5D=Exporting%20Data&plugin%5Bchapters%5D%5Bch_6_time%5D=233&plugin%5Bchapters%5D%5Bch_7_title%5D=Billing&plugin%5Bchapters%5D%5Bch_7_time%5D=255&plugin%5Bchapters%5D%5Bch_8_title%5D=Get%20Help&plugin%5Bchapters%5D%5Bch_8_time%5D=267&plugin%5Bchapters%5D%5Bsrc%5D=https%3A%2F%2Ffast.wistia.com%2Flabs%2Fchapters%2Fplugin.js&plugin%5Bchapters%5D%5Bwidth%5D=200px&plugin%5Bchapters%5D%5Blocation%5D=right&plugin%5Bchapters%5D%5Bshow_timestamps%5D=no" class="wistia-popover[height=353,playerColor=006595,width=778]" id="wistia-bc-video"><img src="https://embed-ssl.wistia.com/deliveries/a8a9c5143cf82350ec8f8365d2b42599b16905b7.jpg?image_play_button=true&image_play_button_color=006595e0&image_crop_resized=406x228" /></a> <script charset="ISO-8859-1" src="https://fast.wistia.com/static/popover-v1.js">\x3c/script> <script> $(\'#wistia-bc-video\').click(function(){ TRMixpanel.trackVideoWatched(\'4v5qyh3c69\', \'Business Class Help Video\', \'org_bc_intro.html\'); }) \x3c/script> </p> </div> <p class="product-intro-close-bottom center quiet"> <a href="#" class="js-close-intro-helper dark-hover"> <span class="icon-sm icon-close dark-hover"/>Got it! Close this helper. </a> </p> </div> ');
return this.fl()},org_boards_for_member:function(c,b,d){this.b(d=d||"");this.b('<ul class="pop-over-list"> ');this.s(this.f("boards",c,b,1),c,b,0,38,127,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <li> <a href="');f.b(f.v(f.f("url",b,d,0)));f.b('"> ');f.b(f.v(f.f("name",b,d,0)));f.b(' <span class="quiet">(');f.b(f.v(f.f("memberType",b,d,0)));f.b(")</span> </a> </li> ")}),c.pop());this.b(" </ul> ");return this.fl()},org_create:function(c,b,d){this.b(d||"");this.b('<form> <p class="error" style="display:none"></p> <label for="org-display-name">Name</label> <input type="text" name="displayName" class="js-autofocus" id="org-display-name" value="');
this.b(this.v(this.f("displayName",c,b,0)));this.b('"> <label for="org-desc">Description <span class="quiet" style="font-weight: normal;">(optional)</span></label> <textarea id="org-desc" name="desc" type="text">');this.b(this.v(this.f("desc",c,b,0)));this.b('</textarea> <input type="submit" class="primary wide js-save" value="Create"> </form> <hr style="margin-top: 8px;"> <p class="quiet bottom"> An organization is a group of boards and members. </p> ');return this.fl()},org_detail:function(c,b,
d){this.b(d=d||"");this.b('<div class="tabbed-pane-header"> <div class="tabbed-pane-header-wrapper clearfix"> <a class="tabbed-pane-header-image profile-image ');this.s(this.f("__ed",c,b,1),c,b,0,141,162,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("ed js-change-org-logo")}),c.pop());this.b('" href="#"> <img class="profile-image-image" ');this.s(this.f("logoHash",c,b,1),c,b,0,229,298,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' src="');f.b(f.v(f.f("__logoDomain",b,d,0)));f.b("/");f.b(f.v(f.f("logoHash",
b,d,0)));f.b('/170.png" alt="');f.b(f.v(f.f("fullName",b,d,0)));f.b(' logo" ')}),c.pop());this.b(" ");this.s(this.f("logoHash",c,b,1),c,b,1,0,0,"")||this.b(' src="https://d78fikflryjgj.cloudfront.net/images/b8e08be89ac9461c0a1d543016926792/org-logo-large.png" alt="Default organization logo" ');this.b(' > <span class="change-text"> Change Logo </span> </a> <div class="tabbed-pane-header-details"> <div class="js-current-details"></div> ');this.s(this.f("__ed",c,b,1),c,b,0,617,661,"{{ }}")&&(this.rs(c,
b,function(b,d,f){f.b(' <form class="js-profile-form hide"></form> ')}),c.pop());this.b(' </div> <div class="tabbed-pane-header-ad js-header-ad"></div> </div> </div> <div class="tabbed-pane-nav clearfix"> <ul> <li class="tabbed-pane-nav-item"> <a class="tabbed-pane-nav-item-button js-org-profile" href="/');this.b(this.v(this.f("name",c,b,0)));this.b('">Boards</a> </li> <li class="tabbed-pane-nav-item"> <a class="tabbed-pane-nav-item-button js-org-members" href="/');this.b(this.v(this.f("name",c,b,
0)));this.b('/members">Members</a> </li> ');this.s(this.f("isBusinessClassAdmin",c,b,1),c,b,0,1069,1261,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <li class="tabbed-pane-nav-item"> <a class="tabbed-pane-nav-item-button js-org-export" href="/');f.b(f.v(f.f("name",b,d,0)));f.b('/export">Export <span class="icon-sm icon-briefcase icon-briefcase-bc-color"/></a> </li> ')}),c.pop());this.b(" ");this.s(this.f("hasAccount",c,b,1),c,b,0,1302,1503,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <li class="tabbed-pane-nav-item"> <a class="tabbed-pane-nav-item-button js-billing" href="/');
f.b(f.v(f.f("name",b,d,0)));f.b('/billing">Billing');f.s(f.f("accountProblem",b,d,1),b,d,0,1438,1473,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <span class="option">Issue!</span>')}),b.pop());f.b("</a> </li> ")}),c.pop());this.b(" ");this.s(this.f("isOrgAdmin",c,b,1),c,b,0,1534,1667,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <li class="tabbed-pane-nav-item"> <a class="tabbed-pane-nav-item-button js-org-account" href="/');f.b(f.v(f.f("name",b,d,0)));f.b('/account">Settings</a> </li> ')}),c.pop());
this.b(' </ul> </div> <div class="tabbed-pane-main-col clearfix"> <div class="tabbed-pane-main-col-loading hide js-loading-page"> <span class="tabbed-pane-main-col-loading-spinner spinner"></span> </div> <div class="tabbed-pane-main-col-wrapper js-content"></div> </div> ');return this.fl()},org_detail_profile_edit:function(c,b,d){this.b(d||"");this.b('<p class="error js-profile-form-error hide"></p> <label>Name</label> <input type="text" name="displayName" value="');this.b(this.v(this.f("displayName",
c,b,0)));this.b('"/> <label>Short Name</label> <input type="text" name="name" value="');this.b(this.v(this.f("name",c,b,0)));this.b('"/> <label>Website</label> <input type="text" name="website" value="');this.b(this.v(this.f("website",c,b,0)));this.b('"/> <label>Description <span class="quiet">(optional)</span></label> <textarea name="desc">');this.b(this.v(this.f("desc",c,b,0)));this.b('</textarea> <input type="submit" class="primary wide js-submit-profile" value="Save"/> <input type="button" class="js-cancel-edit-profile" value="Cancel"/> ');
return this.fl()},org_detail_profile_info:function(c,b,d){this.b(d=d||"");this.b('<div class="tabbed-pane-header-details-name"> <h1 class="inline"> ');this.b(this.v(this.f("displayName",c,b,0)));this.b(" </h1> ");this.s(this.f("hasBusinessClass",c,b,1),c,b,0,109,240,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="window-title-extra bc"> <span class="business-class-mark" title="Business Class Mark"></span> Business Class </span> ')}),c.pop());this.b(' <span class="window-title-extra"> <span class="icon-sm icon-');
this.b(this.v(this.f("permissionLevel",c,b,0)));this.b('" title="');this.b(this.v(this.f("pLevelAltText",c,b,0)));this.b('"></span> ');this.b(this.v(this.f("pLevelDisplayText",c,b,0)));this.b(' </span> </div> <div class="tabbed-pane-header-details-content"> ');this.s(this.f("desc",c,b,1),c,b,0,472,495,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.b(f.t(f.f("descriptionHtml",b,d,0)));f.b(" ")}),c.pop());this.b(" ");this.s(this.f("websiteHref",c,b,1),c,b,0,521,573,"{{ }}")&&(this.rs(c,b,function(b,
d,f){f.b(' <p> <a href="');f.b(f.v(f.f("websiteHref",b,d,0)));f.b('">');f.b(f.v(f.f("website",b,d,0)));f.b("</a> </p> ")}),c.pop());this.b(" ");this.s(this.f("accountProblem",c,b,1),c,b,0,609,832,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div style="padding: 4px 8px; background-color: orange; margin-bottom: 8px;"> <p class="bottom"> Oops! There is a problem with your billing information. Visit <a href="/');f.b(f.v(f.f("name",b,d,0)));f.b('/billing">Billing</a> to fix it. </p> </div> ')}),c.pop());
this.b(" </div> ");this.s(this.f("__ed",c,b,1),c,b,0,868,1006,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <a class="button-link tabbed-pane-header-details-edit js-edit-profile" href="#"><span class="icon-sm icon-edit"></span> Edit profile</a> ')}),c.pop());this.b(" ");return this.fl()},org_export:function(c,b,d){this.b(d=d||"");this.b('<div class="window-module org-export-header"> <button class="org-export-header-button primary js-create-new-export">Create New Export</button> <div class="org-export-header-options clearfix"> <input id="includeAttachments" type="checkbox"> <label for="includeAttachments" class="quiet inline" style="font-weight: normal;">Include raw attachments\u2026</label> </div> <p class="quiet org-export-header-text"> Downloads will be in a ZIP format that includes members, boards, and all other data in');
this.s(this.f("hasCSV",c,b,1),c,b,0,500,521,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" CSV and JSON formats")}),c.pop());this.s(this.f("hasCSV",c,b,1),c,b,1,0,0,"")||this.b(" JSON format");this.b('. If you choose to include raw attachments, they will be in their native format. Otherwise, they will include a link to the version in Trello. </p> </div> <div class="window-module org-export-list"> <div class="window-module-title"> <span class="window-module-title-icon icon-lg icon-archive"/> <h3>Exports</h3> </div> <div class="gutter clearfix js-list-exports"></div> </div> ');
return this.fl()},org_export_empty:function(c,b,d){this.b(d||"");this.b('<p class="quiet" style="padding: 7px 0;">No exports. Click \u201cCreate New Export\u201d to generate a new one.</p> ');return this.fl()},org_export_item:function(c,b,d){this.b(d=d||"");this.b('<div class="org-export-list-item clearfix');this.s(this.f("generating",c,b,1),c,b,0,56,88,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" org-export-list-item-generating")}),c.pop());this.b('"> ');this.s(this.f("generating",c,b,1),c,b,0,121,
291,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <p class="org-export-list-item-title"> ');f.s(f.f("status",b,d,1),b,d,0,172,231,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" ");e.b(e.v(e.f("stage",b,d,0)));e.s(e.f("total",b,d,1),b,d,0,192,220,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b(" (");e.b(e.v(e.f("progress",b,d,0)));e.b(" of ");e.b(e.v(e.f("total",b,d,0)));e.b(")")}),b.pop());e.b(" ")}),b.pop());f.b(" ");f.s(f.f("status",b,d,1),b,d,1,0,0,"")||f.b("Creating new export\u2026");f.b(" </p> ")}),c.pop());
this.b(" ");this.s(this.f("generating",c,b,1),c,b,1,0,0,"")||(this.b(' <p class="org-export-list-item-title"> '),this.b(this.v(this.f("time",c,b,0))),this.b(" - "),this.b(this.v(this.f("size",c,b,0))),this.b(" "),this.s(this.f("attachments",c,b,1),c,b,0,398,447,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<span class="quiet">(includes attachments)</span>')}),c.pop()),this.b(' </p> <a href="'),this.b(this.v(this.f("exportUrl",c,b,0))),this.b('" class="button-link org-export-list-item-button js-download-export js-real-link" target="_blank">Download</a> '));
this.b(" </div> ");return this.fl()},org_inline:function(c,b,d){this.b(d||"");this.b('<span>the organization</span> <a href="');this.b(this.v(this.f("organizationUrl",c,b,0)));this.b('" class="inline-object"> ');this.b(this.v(this.f("name",c,b,0)));this.b(" </a> ");return this.fl()},org_link_ga_helper:function(c,b,d){this.b(d||"");this.b('<div class="ga-link-helper-section"> <p> <span class="ga-link-helper-num">1</span> First, you\u2019ll need to add the Trello Business Class app from the Google Apps Marketplace to your domain. The button below will get you there. </p> <p> <span class="ga-link-helper-num">2</span> When there, be sure you are signed in to the Google account with the correct domain you want to use. Click the \u201cAdd it now\u201d button then follow the prompts. </p> <p> <span class="ga-link-helper-num">3</span> You\u2019ll see other users from your Google Apps Domain on this page when configured correctly. </p> </div> <a class="button js-link" style="width: 100%; padding: 7px 0;" target="_blank" href="http://www.google.com/enterprise/marketplace/viewListing?productListingId=22922+16518145558089118433"> Go To Google Apps Marketplace </a> ');
return this.fl()},org_member_activity:function(c,b,d){this.b(d=d||"");this.b('<ul class="pop-over-list"> <li> ');this.s(this.f("hasBoards",c,b,1),c,b,0,46,121,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <a href="#" class="js-view-org-boards-for-member"> On ');f.b(f.v(f.f("boardCount",b,d,0)));f.b(" </a> ")}),c.pop());this.b(" ");this.s(this.f("hasBoards",c,b,1),c,b,1,0,0,"")||(this.b(' <a href="#" class="disabled"> On '),this.b(this.v(this.f("boardCount",c,b,0))),this.b(" </a> "));this.b(" </li> ");
this.s(this.f("orgCardsUrl",c,b,1),c,b,0,241,342,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <li> <a href="');f.b(f.v(f.f("orgCardsUrl",b,d,0)));f.b('" class="js-view-member-org-cards"> View Member\'s Org Cards </a> </li> ')}),c.pop());this.b(" </ul> ");this.s(this.f("lastActive",c,b,1),c,b,0,380,519,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <hr> <p class="quiet bottom"> ');f.b(f.v(f.f("fullName",b,d,0)));f.b(' was last active in this organization <span class="date bold" dt="');f.b(f.v(f.f("lastActive",
b,d,0)));f.b('"></span>. </p> ')}),c.pop());this.b(" ");return this.fl()},org_member_cards:function(c,b,d){this.b(d=d||"");this.b('<div class="window-module"> ');this.s(this.f("memberData",c,b,1),c,b,0,43,64,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.b(f.rp("member_profile",b,d,""));f.b(" ")}),c.pop());this.b(' </div> <div class="js-cards"></div> ');return this.fl()},org_members:function(c,b,d){this.b(d=d||"");this.b('<div class="window-module gutter bottom clearfix"> <input type="text" class="left js-search" placeholder="Find members by name\u2026" style="margin-bottom: 8px;"> <div class="org-members-options"> ');
this.s(this.f("__ed",c,b,1),c,b,0,201,313,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <a class="button-link gutter js-manage-members" href="#"> <span class="icon-sm icon-member"/> Add Members </a> ')}),c.pop());this.b(' <div class="js-google-apps-linker');this.s(this.f("canLinkGoogleApps",c,b,1),c,b,1,0,0,"")||this.b(" hide");this.b('"> <a class="button-link primary js-link-google-apps" href="#"> <span class="icon-sm icon-google"/> Link To Google Apps Domain </a> </div> ');this.s(this.f("canShowAll",
c,b,1),c,b,0,559,768,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("showingAll",b,d,1),b,d,1,0,0,"")||f.b(' <a class="quiet-button js-show-all" href="#"> Show Dismissed Accounts </a> ');f.b(" ");f.s(f.f("showingAll",b,d,1),b,d,0,682,752,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <a class="quiet-button js-hide-hidden" href="#"> Hide Dismissed </a> ')}),b.pop());f.b(" ")}),c.pop());this.b(' </div> </div> <hr> <div class="window-module js-member-list"/> ');return this.fl()},org_plans:function(c,
b,d){this.b(d=d||"");this.b('<div class="window-module bc-plans"> <img class="bc-hero-image" src="https://d78fikflryjgj.cloudfront.net/images/landing/businessClass/9b9b5d825b48e46a607311eeef8c2e67/trello-business-class-with-text.png" alt="Trello Business Class" /> <div class="pitch"> <p class="intro"> Trello Business Class gives you all the power of organizations&mdash;like unlimited boards and members&mdash;plus extra administrative control and features. </p> <ul class="bc-features"> <li><span class="icon-sm icon-check"></span> Easily manage boards and members</li> <li><span class="icon-sm icon-check"></span> Google Apps integration</li> <li><span class="icon-sm icon-check"></span> Additional and custom board backgrounds</li> <li><span class="icon-sm icon-check"></span> Additional and custom stickers</li> <li><span class="icon-sm icon-check"></span> 250MB attachments</li> <li><span class="icon-sm icon-check"></span> One-click bulk data export in CSV and JSON</li> <li><span class="icon-sm icon-check"></span> Bulk export history</li> <li><span class="icon-sm icon-check"></span> Observer role</li> </ul> ');
this.s(this.f("isOrgAdmin",c,b,1),c,b,1,0,0,"")||(this.b(" "),this.s(this.f("activeAccount",c,b,1),c,b,1,0,0,"")||this.b(' <p class="helper"> Hey there! You must be an admin of the organization to get Business Class. </p> '),this.b(" "));this.b(" ");this.s(this.f("willExpire",c,b,1),c,b,1,0,0,"")||(this.b(" "),this.s(this.f("activeAccount",c,b,1),c,b,1,0,0,"")||this.b(' <p> <a href="/business-class" target="_blank" class="js-real-link js-learn-more-plans">Learn more about Business Class &rarr;</a> </p> '),
this.b(" "),this.s(this.f("activeAccount",c,b,1),c,b,0,1466,2153,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("isJPS",b,d,1),b,d,1,0,0,"")||(f.b(' <p style="font-size: 20px; line-height: 1.35em;"> There is a new Business Class update available. Some of the features listed above are only in this update! </p> '),f.s(f.f("isBCAdmin",b,d,1),b,d,1,0,0,"")||f.b(" <p>Only organization admins can upgrade your account.</p> "),f.b(" "),f.s(f.f("isBCAdmin",b,d,1),b,d,0,1742,1814,"{{ }}")&&(f.rs(b,
d,function(b,d,e){e.b(' <p><a href="/');e.b(e.v(e.f("name",b,d,0)));e.b('/billing">Learn more and get the upgrade.</a></p> ')}),b.pop()),f.b(" "));f.b(" ");f.s(f.f("isJPS",b,d,1),b,d,0,1850,2142,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <p style="font-size: 20px; line-height: 1.35em;"> <strong>Business Class is active!</strong> <span class="quiet">(Woo!)</span> </p> ');e.s(e.f("isBCAdmin",b,d,1),b,d,0,1997,2127,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b(' <p><a href="http://help.trello.com/customer/portal/articles/1349993-business-class-user-guide">Check out the User Guide.</a></p> ')}),
b.pop());e.b(" ")}),b.pop());f.b(" ")}),c.pop()),this.b(" "));this.b(' </div> <div class="bc-call-out');this.s(this.f("activeAccount",c,b,1),c,b,0,2236,2273,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.s(f.f("willExpire",b,d,1),b,d,1,0,0,"")||f.b(" active")}),c.pop());this.b('"> <p class="bc-price bottom"> ');this.b(this.v(this.f("bcMonthlyPrice",c,b,0)));this.b(' per month </p> <p class="bc-sub-price"> or ');this.b(this.v(this.f("bcYearlyPrice",c,b,0)));this.b(' per year </p> <p>for each organization</p> <p class="quiet">(You can cancel at any time.)</p> ');
this.s(this.f("activeAccount",c,b,1),c,b,1,0,0,"")||(this.b(" "),this.s(this.f("cancelledAccount",c,b,1),c,b,1,0,0,"")||(this.b(' <a class="button '),this.s(this.f("isOrgAdmin",c,b,1),c,b,0,2569,2606,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" primary js-upgrade-to-business-class")}),c.pop()),this.s(this.f("isOrgAdmin",c,b,1),c,b,1,0,0,"")||this.b(" disabled"),this.b('" href="'),this.b(this.v(this.f("cardUrl",c,b,0))),this.b('"> Upgrade This Organization! </a> ')),this.b(" "),this.s(this.f("cancelledAccount",
c,b,1),c,b,0,2757,2909,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <a class="button ');f.s(f.f("isOrgAdmin",b,d,1),b,d,0,2790,2812,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" primary js-reactivate")}),b.pop());f.s(f.f("isOrgAdmin",b,d,1),b,d,1,0,0,"")||f.b(" disabled");f.b('" href="#"> Reactivate Business Class </a> ')}),c.pop()),this.b(" "));this.b(" </div> ");this.s(this.f("willExpire",c,b,1),c,b,0,2972,3412,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("isBCAdmin",b,d,1),b,d,0,2987,3397,
"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <p class="quiet"> You\'ve cancelled Business Class, but you can use the premium features until <strong>');e.b(e.v(e.f("yearlyExpirationDate",b,d,0)));e.b('</strong>. </p> <p> <a href="#" class="button-link inline-block js-renew-expiring-yearly-business-class-sub" style="padding-left: 24px; padding-right: 24px;"> Renew Your Subscription? </a> </p> <p class="quiet"> When you renew, you won\'t be charged until the date listed above. </p> ')}),b.pop());f.b(" ")}),
c.pop());this.b(" </div> ");return this.fl()},org_pref_restriction:function(c,b,d){this.b(d||"");this.b("<li> ");this.b(this.v(this.f("restriction",c,b,0)));this.b(' <a href="#" class="dark-hover js-restricted-address" data-pattern="');this.b(this.v(this.f("restriction",c,b,0)));this.b('" title="Remove this domain or email address from the list."> <span class="option close icon-sm icon-close"/> </a> </li> ');return this.fl()},org_prefs_nonorg_invites:function(c,b,d){this.b(d=d||"");this.b('<ul class="pop-over-list"> <li> <a href="#"> Allow ');
this.s(this.f("externalMembersDisabled",c,b,1),c,b,1,0,0,"")||this.b('<span class="icon-sm icon-check"/>');this.b(' <span class="sub-name"> Anyone can be added to a board inside your organization. </span> </a> </li> <li> <a href="#"> Don\'t Allow ');this.s(this.f("externalMembersDisabled",c,b,1),c,b,0,300,334,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<span class="icon-sm icon-check"/>')}),c.pop());this.b(' <span class="sub-name"> Only members added to your organization will be able to join your organization\u2019s boards. </span> </a> </li> </ul> ');
return this.fl()},org_prefs_restrict_invites:function(c,b,d){this.b(d||"");this.b('<div style="position: relative;"> <input type="text" class="js-input-restricted js-autofocus" placeholder=\'Add a domain or address\u2026\' style="margin-bottom: 6px;"> <span class="spinner small hide js-loading" style="position: absolute; top: 6px; right: 6px; z-index: 2;"/> </div> <p class="bottom quiet" style="padding: 6px;"> Choose which email domains and addresses can be added to the org. For example, if you only wanted users with fogcreek.com email addresses to be able to be added to the org, enter fogcreek.com. </p> <p class="error bottom js-errors" style="display: none; margin-top: 8px;"></p> <div class="manage-member-section js-restriction-list" style="margin-top: 16px;');
this.s(this.f("hasRestrictions",c,b,1),c,b,1,0,0,"")||this.b(" display: none;");this.b('"> <h4>Allowed Domains and Addresses</h4> <ul class="closeable-list js-list"></ul> </div> ');return this.fl()},org_prefs_vis:function(c,b,d){this.b(d=d||"");this.b('<div style="margin: 12px 0 0;"> <p>Who can create <span class="icon-sm icon-public"/> <strong>public</strong> boards?</p> <ul class="pop-over-list checkable left-check normal-weight" data-vis="public"> <li');this.s(this.f("boardVisibilityRestrict_public_org",
c,b,1),c,b,0,244,259,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' class="active"')}),c.pop());this.b(' > <a href="#" data-restriction="org">Any Org Member <span class="icon-sm icon-check"/></a> </li> <li');this.s(this.f("boardVisibilityRestrict_public_admin",c,b,1),c,b,0,440,455,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' class="active"')}),c.pop());this.b('> <a href="#" data-restriction="admin">Only Org Admins <span class="icon-sm icon-check"/></a> </li> <li');this.s(this.f("boardVisibilityRestrict_public_none",
c,b,1),c,b,0,639,654,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' class="active"')}),c.pop());this.b('> <a href="#" data-restriction="none">Nobody <span class="icon-sm icon-check"/></a> </li> </ul> </div> <hr> <div style="margin: 12px 0 0;"> <p>Who can create <span class="icon-sm icon-org-private"/> <strong>org visible</strong> boards?</p> <ul class="pop-over-list checkable left-check normal-weight" data-vis="org"> <li');this.s(this.f("boardVisibilityRestrict_org_org",c,b,1),c,b,0,1050,1065,"{{ }}")&&
(this.rs(c,b,function(b,d,f){f.b(' class="active"')}),c.pop());this.b('> <a href="#" data-restriction="org">Any Org Member <span class="icon-sm icon-check"/></a> </li> <li');this.s(this.f("boardVisibilityRestrict_org_admin",c,b,1),c,b,0,1239,1254,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' class="active"')}),c.pop());this.b('> <a href="#" data-restriction="admin">Only Org Admins <span class="icon-sm icon-check"/></a> </li> <li');this.s(this.f("boardVisibilityRestrict_org_none",c,b,1),c,b,0,1432,
1447,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' class="active"')}),c.pop());this.b('> <a href="#" data-restriction="none">Nobody <span class="icon-sm icon-check"/></a> </li> </ul> </div> <hr> <div style="margin: 12px 0 0;"> <p>Who can create <span class="icon-sm icon-private"/> <strong>private</strong> boards?</p> <ul class="pop-over-list checkable left-check normal-weight" data-vis="private"> <li');this.s(this.f("boardVisibilityRestrict_private_org",c,b,1),c,b,0,1840,1855,"{{ }}")&&(this.rs(c,
b,function(b,d,f){f.b(' class="active"')}),c.pop());this.b('> <a href="#" data-restriction="org">Any Org Member <span class="icon-sm icon-check"/></a> </li> <li');this.s(this.f("boardVisibilityRestrict_private_admin",c,b,1),c,b,0,2037,2052,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' class="active"')}),c.pop());this.b('> <a href="#" data-restriction="admin">Only Org Admins <span class="icon-sm icon-check"/></a> </li> <li');this.s(this.f("boardVisibilityRestrict_private_none",c,b,1),c,b,0,2238,2253,
"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' class="active"')}),c.pop());this.b('> <a href="#" data-restriction="none">Nobody <span class="icon-sm icon-check"/></a> </li> </ul> </div> ');return this.fl()},org_profile:function(c,b,d){this.b(d=d||"");this.b('<div class="js-main-boards-section"></div> ');this.s(this.f("isBusinessClassAdmin",c,b,1),c,b,0,68,306,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <a href="#" class="show-more clear js-show-other-private-boards-section"> Show other member\u2019s private boards... <span class="icon-sm icon-briefcase icon-briefcase-bc-color"/> </a> <div class="js-other-private-boards-section hide"></div> ')}),
c.pop());this.b(" ");return this.fl()},org_remove_or_deactivate_member:function(c,b,d){this.b(d=d||"");this.b('<ul class="pop-over-list"> <li class="clearfix"> <a class="js-soft-remove" href="#"> <span class="clearfix">');this.s(this.f("isMe",c,b,1),c,b,0,117,135,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("Leave organization")}),c.pop());this.s(this.f("isMe",c,b,1),c,b,1,0,0,"")||this.b("Remove from organization");this.b('</span> <span class="sub-name"> Remove all access to the organization');this.s(this.f("isDeactivated",
c,b,1),c,b,0,273,288,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" and all boards")}),c.pop());this.b(". ");this.s(this.f("orgIsBC",c,b,1),c,b,1,0,0,"")||this.b(" The member will remain on all their boards in this organization. They will receive a notification. ");this.b(" </span> </a> ");this.s(this.f("orgIsBC",c,b,1),c,b,0,458,868,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("isDeactivated",b,d,1),b,d,1,0,0,"")||(f.b(" "),f.s(f.f("isMe",b,d,1),b,d,1,0,0,"")||(f.b(' <span class="check-div quiet js-hard-remove clearfix" style="margin-left: 24px; padding-top: 2px; font-size: 12px; line-height: 15px;"> <input type="checkbox" id="hardRemove" name="hard" checked> <label for="hardRemove">'),
f.s(f.f("hasBoards",b,d,1),b,d,0,722,756,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b("This member is on ");e.b(e.v(e.f("boardCount",b,d,0)));e.b(". ")}),b.pop()),f.b("Check this box to remove the member from all boards.</label> </span> ")),f.b(" "));f.b(" ")}),c.pop());this.b(" </li> ");this.s(this.f("canDeactivate",c,b,1),c,b,0,905,1156,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("isMe",b,d,1),b,d,1,0,0,"")||f.b(' <li class="clearfix"> <a class="js-deactivate" href="#"> Deactivate <span class="sub-name"> Disable member\'s access to org boards, but allow other org members to see what the cards and boards the member was on. </span> </a> </li> ');
f.b(" ")}),c.pop());this.b(" </ul> ");return this.fl()},organization_list_item:function(c,b,d){this.b(d=d||"");this.b('<a href="');this.b(this.v(this.f("url",c,b,0)));this.b('"> <span class="item-name">');this.b(this.v(this.f("displayName",c,b,0)));this.b("</span> ");this.s(this.f("hasBusinessClass",c,b,1),c,b,0,87,149,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<span class="icon-sm icon-briefcase icon-briefcase-bc-color"/>')}),c.pop());this.b(' <span class="icon-sm icon-');this.b(this.v(this.f("visIconClass",
c,b,0)));this.b('"/> </a> ');return this.fl()},organization_search_list_item:function(c,b,d){this.b(d||"");this.b("<li><a class='link-item' href='/");this.b(this.v(this.f("name",c,b,0)));this.b("'><span class='item-name'>");this.b(this.v(this.f("displayName",c,b,0)));this.b("</span></a></li> ");return this.fl()},platforms:function(c,b,d){this.b(d||"");this.b('<div class="promo-platforms"> <div class="promo-platforms-apps clearfix"> <h1>Trello works on your device, wherever you are.</h1> <a href="/" class="promo-platforms-app-item js-platforms-web"> <span class="promo-platforms-app-item-image promo-platforms-app-item-image-web"></span> <span class="promo-platforms-app-item-header"> Web </span> <span class="promo-platforms-download-button">trello.com</span> </a> <a href="https://itunes.apple.com/app/trello-organize-anything/id461504587" class="promo-platforms-app-item js-platforms-ios"> <span class="promo-platforms-app-item-image promo-platforms-app-item-image-ios"></span> <span class="promo-platforms-app-item-header"> iPhone and iPad <span class="quiet">(iOS 7+)</span> </span> <span class="promo-platforms-download-button">Download</span> </a> <a href="https://play.google.com/store/apps/details?id=com.trello" class="promo-platforms-app-item js-platforms-android"> <span class="promo-platforms-app-item-image promo-platforms-app-item-image-android"></span> <span class="promo-platforms-app-item-header"> Android phones and tablets <span class="quiet">(4+)</span> </span> <span class="promo-platforms-download-button">Download</span> </a> <a href="http://www.amazon.com/gp/mas/dl/android?p=com.trello" class="promo-platforms-app-item js-platforms-kindle"> <span class="promo-platforms-app-item-image promo-platforms-app-item-image-kindle"></span> <span class="promo-platforms-app-item-header"> Kindle Fire </span> <span class="promo-platforms-download-button">Download</span> </a> <a href="http://apps.microsoft.com/windows/app/trello/bd4fa6c1-0994-4caa-b0e1-04eec135667b" class="promo-platforms-app-item js-platforms-win8"> <span class="promo-platforms-app-item-image promo-platforms-app-item-image-windows8"></span> <span class="promo-platforms-app-item-header"> Windows 8 </span> <span class="promo-platforms-download-button">Download</span> </a> </div> <div class="promo-platforms-browsers clearfix"> <h1>Trello is supported in these modern browsers.</h1> <a href="https://www.google.com/chrome" class="promo-platforms-browser-item js-platforms-chrome"> <span class="promo-platforms-browser-item-image promo-platforms-browser-item-image-chrome"></span> <span class="promo-platforms-browser-item-header"> Chrome <span class="quiet">(latest)</span> </span> <span class="promo-platforms-download-button">Download</span> </a> <a href="http://www.firefox.com" class="promo-platforms-browser-item js-platforms-firefox"> <span class="promo-platforms-browser-item-image promo-platforms-browser-item-image-firefox"></span> <span class="promo-platforms-browser-item-header"> Firefox <span class="quiet">(latest)</span> </span> <span class="promo-platforms-download-button">Download</span> </a> <a href="http://www.apple.com/safari/" class="promo-platforms-browser-item js-platforms-safari"> <span class="promo-platforms-browser-item-image promo-platforms-browser-item-image-safari"></span> <span class="promo-platforms-browser-item-header"> Safari <span class="quiet">(6+)</span> </span> <span class="promo-platforms-download-button">Download</span> </a> <a href="http://windows.microsoft.com/ie" class="promo-platforms-browser-item js-platforms-ie"> <span class="promo-platforms-browser-item-image promo-platforms-browser-item-image-ie"></span> <span class="promo-platforms-browser-item-header"> Internet Explorer <span class="quiet">(10+)</span> </span> <span class="promo-platforms-download-button">Download</span> </a> <p class="promo-platforms-mobile-browsers quiet"> We also support most mobile browsers including Safari on iOS 7, the Android 4.0+ browser, and Internet Explorer 10 on Windows Phone 8. </p> </div> </div> ');
this.b(this.rp("promo_footer",c,b,""));this.b(" ");return this.fl()},pop_over_ad:function(c,b,d){this.b(d=d||"");this.b('<a href="#" class="icon-sm icon-close dark-hover ad-close js-close-ad"></a> ');this.s(this.f("iconClass",c,b,1),c,b,0,90,135,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="ad-icon ');f.b(f.v(f.f("iconClass",b,d,0)));f.b('"></span> ')}),c.pop());this.b(' <div class="ad-copy">');this.b(this.t(this.f("copyHtml",c,b,0)));this.b("</div>");return this.fl()},popover_add_list:function(c,
b,d){this.b(d||"");this.b('<form style="position: relative;"> <div class="form-grid"> <div class="form-grid-child form-grid-child-threequarters"> <label for="list-name">Name</label> <input type="text" class="js-list-name js-autofocus" id="list-name" value="List" style="margin-bottom: 0;"> </div> <div href="#" class="button-link setting form-grid-child form-grid-child-quarter"> <span class="label">Position</span> <span class="value js-pos-value"></span> <label>Position</label> <select class="js-select-list-pos"></select> </div> </div> <input type="submit" class="primary wide left clear js-add-list" value="Add"> </form> ');
return this.fl()},popover_auto_mentioner:function(c,b,d){this.b(d=d||"");this.s(this.f("button",c,b,1),c,b,0,11,106,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <input type="text" class="js-filter-mentionables js-autofocus" placeholder="Search members\u2026"> ')}),c.pop());this.b(' <p class="quiet js-empty-list hide" style="padding: 8px 8px 0;">No matching members</p> <ul class="pop-over-member-list js-available-members"></ul> ');this.s(this.f("button",c,b,1),c,b,0,277,874,"{{ }}")&&(this.rs(c,b,
function(b,d,f){f.b(' <div class="js-select-multiple-options hide"> <hr> <ul class="pop-over-list"> ');f.s(f.f("showAllCardMembers",b,d,1),b,d,0,379,501,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <li> <a href="#" class="js-select-all-card-members"> Mention All Card Members <span class="quiet mem-count"/> </a> </li> ')}),b.pop());f.b(" ");f.s(f.f("showAllBoardMembers",b,d,1),b,d,0,549,673,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <li> <a href="#" class="js-select-all-board-members"> Mention All Board Members <span class="quiet mem-count"/> </a> </li> ')}),
b.pop());f.b(" ");f.s(f.f("showAllCommenters",b,d,1),b,d,0,720,838,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <li> <a href="#" class="js-select-all-commenters"> Mention All Commenters <span class="quiet mem-count"/> </a> </li> ')}),b.pop());f.b(" </ul> </div> ")}),c.pop());this.b(" ");return this.fl()},popover_board_header_org_menu:function(c,b,d){this.b(d=d||"");this.b('<ul class="pop-over-list"> ');this.s(this.f("canChangeOrg",c,b,1),c,b,0,44,206,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <li> <a class="js-change-org" href="#"> ');
f.s(f.f("setOrgNull",b,d,1),b,d,0,100,126,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" Remove From Organization ")}),b.pop());f.b(" ");f.s(f.f("setOrgNull",b,d,1),b,d,1,0,0,"")||f.b(" Change Organization\u2026 ");f.b(" </a> </li> ")}),c.pop());this.b(' <li> <a class="js-view-org" href="/');this.b(this.v(this.f("name",c,b,0)));this.b('">View Organization Page</a> </li> </ul> ');return this.fl()},popover_card_from_calendar:function(c,b,d){this.b(d||"");this.b('<div> <textarea class="js-card-title">');
this.b(this.v(this.f("title",c,b,0)));this.b('</textarea> </div> <div class="button-link list-button-link setting"> <span class="label">List</span> <span class="value js-list-value"></span> <label>List</label> <select class="js-select-list"></select> </div> <div class="button-link pos-button-link setting"> <span class="label">Position</span> <span class="value js-pos-value"></span> <label>Position</label> <select class="js-select-position"></select> </div> <input type="submit" class="primary wide js-add-card" value="Add"/> ');
return this.fl()},popover_change_board_org:function(c,b,d){this.b(d=d||"");this.b('<form> <label>Organization</label> <select class="js-org"> <option value="" ');this.s(this.f("orgs",c,b,1),c,b,1,0,0,"")||this.b("selected");this.b(">(none)</option> ");this.s(this.f("orgs",c,b,1),c,b,0,128,207,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <option value="');f.b(f.v(f.f("id",b,d,0)));f.b('"');f.s(f.f("select",b,d,1),b,d,0,162,170,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b("selected")}),b.pop());f.b(">");
f.b(f.v(f.f("displayName",b,d,0)));f.b("</option> ")}),c.pop());this.b(' </select> <input type="submit" class="js-submit wide primary" value="Change"> </form> ');return this.fl()},popover_change_email:function(c,b,d){this.b(d||"");this.b("<p> Your email address is currently <b>");this.b(this.v(this.f("email",c,b,0)));this.b('</b>. </p> <form> <p id="account-error" class="error"></p> <div class="field"> <label for="email">New Email Address</label> <input id="email" type="email" name="email" value=""> </div> <input type="submit" class="primary js-save-changes" value="Send Confirmation Email"> </form> <hr> <p class="quiet bottom"> This change will take effect after you click on the link in the confirmation email sent to the new email address. </p> ');
return this.fl()},popover_change_labels:function(c,b,d){this.b(d=d||"");this.b('<ul class="edit-labels-pop-over');this.s(this.f("showShortcuts",c,b,1),c,b,0,49,64,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" show-shortcuts")}),c.pop());this.b('"> ');this.s(this.f("labels",c,b,1),c,b,0,96,396,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <li> <a class="card-label card-label-selectable card-label-');f.b(f.v(f.f("color",b,d,0)));f.b(" ");f.s(f.f("isActive",b,d,1),b,d,0,179,185,"{{ }}")&&(f.rs(b,d,function(b,
d,e){e.b("active")}),b.pop());f.b('" label="');f.b(f.v(f.f("color",b,d,0)));f.b('"> ');f.s(f.f("name",b,d,1),b,d,0,228,236,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(e.v(e.f("name",b,d,0)))}),b.pop());f.b(" ");f.s(f.f("shortcut",b,d,1),b,d,0,259,303,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b('<span class="shortcut">(');e.b(e.v(e.f("shortcut",b,d,0)));e.b(")</span>")}),b.pop());f.b(' <span class="card-label-selectable-icon icon-sm icon-check light"/> </a> </li> ')}),c.pop());this.b(" </ul> ");this.s(this.f("__ed",
c,b,1),c,b,0,423,702,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="');f.s(f.f("hideEditTitles",b,d,1),b,d,0,455,459,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b("hide")}),b.pop());f.b('"> <hr> <a class="quiet-button full js-edit-label-titles" href="#"> Change label names for board\u2026 </a> <a class="quiet-button full js-toggle-color-blind-mode" href="#"> ');f.b(f.v(f.f("cbToggleText",b,d,0)));f.b(" Color Blind Friendly Mode </a> </div> ")}),c.pop());this.b(" ");return this.fl()},popover_change_roles:function(c,
b,d){this.b(d=d||"");this.b('<ul class="pop-over-list"> <li> <a class="');this.s(this.f("canMakeAdmin",c,b,1),c,b,0,59,87,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("js-make-admin highlight-icon")}),c.pop());this.s(this.f("canMakeAdmin",c,b,1),c,b,1,0,0,"")||this.b(" disabled");this.b('"> Admin ');this.s(this.f("memberIsAdmin",c,b,1),c,b,0,174,208,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<span class="icon-sm icon-check"/>')}),c.pop());this.b(' <span class="sub-name">');this.b(this.v(this.f("roleText_admin",
c,b,0)));this.b('</span> </a> </li> <li> <a class="');this.s(this.f("canMakeMember",c,b,1),c,b,0,320,350,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("highlight-icon js-make-member ")}),c.pop());this.s(this.f("canMakeMember",c,b,1),c,b,1,0,0,"")||this.b(" disabled");this.b('"> Normal ');this.s(this.f("memberIsNormal",c,b,1),c,b,0,442,476,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<span class="icon-sm icon-check"/>')}),c.pop());this.b(' <span class="sub-name">');this.b(this.v(this.f("roleText_normal",
c,b,0)));this.b("</span> </a> </li> ");this.s(this.f("showObserver",c,b,1),c,b,0,574,926,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <li> <a class="');f.s(f.f("canMakeObserver",b,d,1),b,d,0,610,642,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b("highlight-icon js-make-observer ")}),b.pop());f.s(f.f("canMakeObserver",b,d,1),b,d,1,0,0,"")||f.b(" disabled");f.b('"> Observer <span class="icon-sm icon-briefcase icon-briefcase-bc-color"/> ');f.s(f.f("memberIsObserver",b,d,1),b,d,0,807,841,"{{ }}")&&(f.rs(b,d,
function(b,d,e){e.b('<span class="icon-sm icon-check"/>')}),b.pop());f.b(' <span class="sub-name">');f.b(f.v(f.f("roleText_observer",b,d,0)));f.b("</span> </a> </li> ")}),c.pop());this.b(" </ul> ");this.s(this.f("isMoreThanOneAdmin",c,b,1),c,b,1,0,0,"")||(this.b(" "),this.s(this.f("memberIsAdmin",c,b,1),c,b,0,992,1093,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <hr> <p class="quiet bottom"> You can\u2019t change roles because there must be at least one admin. </p> ')}),c.pop()),this.b(" "));this.b(" ");
return this.fl()},popover_change_set_password:function(c,b,d){this.b(d=d||"");this.b("<form> ");this.s(this.f("hasPassword",c,b,1),c,b,0,23,139,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <label for="o_password"> Old Password </label> <input id="o_password" type="password" name="oldpassword" value=""> ')}),c.pop());this.b(' <label for="password1"> ');this.s(this.f("hasPassword",c,b,1),c,b,0,196,201,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" New ")}),c.pop());this.b(' Password </label> <input id="password1" type="password" name="password" value=""> <label for="password2"> ');
this.s(this.f("hasPassword",c,b,1),c,b,0,340,345,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" New ")}),c.pop());this.b(' Password (again) </label> <input id="password2" type="password" name="password2" value=""> <p id="password-error" class="error"></p> <input type="submit" class="primary js-save-changes" value="Save"> </form> ');this.s(this.f("hasPassword",c,b,1),c,b,1,0,0,"")||this.b(' <hr> <p class="quiet bottom"> You haven\'t set a password yet. You can set a password so you can log onto Trello with just your username or email address. </p> ');
this.b(" ");return this.fl()},popover_change_user_info:function(c,b,d){this.b(d||"");this.b('<form> <p id="account-error" class="error"></p> <div class="field"> <label for="fullName">Full Name</label> <input id="fullName" type="text" name="fullName" value="');this.b(this.v(this.f("fullName",c,b,0)));this.b('"> </div> <div class="field"> <label for="initials">Initials</label> <input id="initials" type="text" name="initials" value="');this.b(this.v(this.f("initials",c,b,0)));this.b('"> </div> <div class="field"> <label for="username">Username</label> <input id="username" type="text" name="username" value="');
this.b(this.v(this.f("username",c,b,0)));this.b('" required autocomplete="off" autocorrect="off" spellcheck="false" autocapitalize="off"> </div> <div class="field"> <label for="bio">Bio</label> <textarea id="bio" type="text" name="bio">');this.b(this.v(this.f("bio",c,b,0)));this.b('</textarea> </div> <input type="submit" class="primary js-save-changes" value="Save"> </form> <hr> <p class="quiet bottom"> Your initials are used in place of your avatar if your avatar is not set. Usernames require a minimum of 3 characters, alphanumeric only. </p> ');
return this.fl()},popover_checklist_menu:function(c,b,d){this.b(d||"");this.b(' <ul class="pop-over-list"> <li><a class="js-delete-checklist" href="#">Delete This Checklist\u2026</a></li> </ul> ');return this.fl()},popover_confirm_jps_upgrade:function(c,b,d){this.b(d=d||"");this.b('<div class="billing-upgrade-banner-price-section"> <p> The price for the upgrade will be $5 per user per month or $45 per user per year. Your price will be\u2026 </p> ');this.s(this.f("monthlyUpgrade",c,b,1),c,b,0,181,
290,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <h3 class="billing-upgrade-price-emphasis">$');f.b(f.v(f.f("price",b,d,0)));f.b(" per month</h3> <p>$5 per ");f.b(f.v(f.f("formattedMemberCount",b,d,0)));f.b("</p> ")}),c.pop());this.b(" ");this.s(this.f("yearlyUpgrade",c,b,1),c,b,0,328,437,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <h3 class="billing-upgrade-price-emphasis">$');f.b(f.v(f.f("price",b,d,0)));f.b(" per year</h3> <p>$45 per ");f.b(f.v(f.f("formattedMemberCount",b,d,0)));f.b("</p> ")}),
c.pop());this.b(" ");this.s(this.f("yearlyCheaperUpgrade",c,b,1),c,b,0,481,629,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <h3 class="billing-upgrade-price-emphasis">$');f.b(f.v(f.f("price",b,d,0)));f.b(" per year</h3> <p>$45 per ");f.b(f.v(f.f("formattedMemberCount",b,d,0)));f.b("</p> <p>You will get three months free.</p> ")}),c.pop());this.b(' </div> <div class="center"> <a href="#" class="billing-upgrade-banner-button-in-popover button primary js-upgrade-bc"> Upgrade Now </a> </div> <p class="quiet bottom"> You will be billed ');
this.s(this.f("monthlyUpgrade",c,b,1),c,b,0,861,863,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("$5")}),c.pop());this.b(" ");this.s(this.f("yearlyUpgrade",c,b,1),c,b,0,901,904,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("$45")}),c.pop());this.b(" per member when you add members to your organization in the future. </p> ");return this.fl()},popover_confirm_member_delete:function(c,b,d){this.b(d||"");this.b("<p> Deleting your member account (<b>");this.b(this.v(this.f("username",c,b,0)));this.b("</b>) will be permanent. </p> <p> <b>You will lose access to your boards and organizations.</b> </p> <p> Would you like us to send an email to <b>");
this.b(this.v(this.f("email",c,b,0)));this.b('</b> that contains a link that you can use to delete your account? </p> <input type="submit" class="js-delete-member" value="Send the Email"> <input type="submit" class="js-cancel-delete" value="Never Mind"> ');return this.fl()},popover_emoji_completer:function(c,b,d){this.b(d=d||"");this.s(this.f("button",c,b,1),c,b,0,11,101,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <input type="text" class="js-filter-emoji js-autofocus" placeholder="Search for emoji\u2026"> ')}),
c.pop());this.b(' <div class="js-results"> <ul class="pop-over-emoji-list js-available-emoji"></ul> <hr> <ul class="pop-over-list"> <li> <a href="#" class="js-upload-emoji" data-emojiname="">Upload Emoji</a> </li> </ul> </div> <div class="js-no-results hide"> <p class="bottom"> Trello doesn\u2019t have an emoji for <span class="bold js-emoji-name"></span>, but you can upload one. </p> <a href="#" class="button primary full js-upload-emoji" data-emojiname="">Upload Emoji for \u201c<span class="js-emoji-name"></span>\u201d</a> </div> ');
return this.fl()},popover_emoji_uploader:function(c,b,d){this.b(d=d||"");this.s(this.f("canUpload",c,b,1),c,b,1,0,0,"")||(this.b(' <div class="warning"> '),this.s(this.f("hasGold",c,b,1),c,b,1,0,0,"")||this.b(' <p> You can upload custom emoji with Trello Gold. <a target="_blank" href="/gold">Learn more about Trello Gold.</a> </p> '),this.b(" "),this.s(this.f("hasJPS",c,b,1),c,b,1,0,0,"")||this.b(' <p class="bottom"> You can get custom emoji for your entire organization with Business Class. <a target="_blank" href="/business-class">Learn more about Business Class.</a> </p> '),
this.b(" </div> <hr> "));this.b(' <form action="/1/member/');this.b(this.v(this.f("id",c,b,0)));this.b('/customEmoji" method="post" enctype="multipart/form-data"> <input type="hidden" name="token" value="" /> <input type="hidden" name="format" value="http" /> <label for="emojiImage">Upload Image</label> <input id="emojiImage" type="file" name="file" class="js-upload-emoji-file upload-emoji" tabindex="-1" accept="image/*"/> <label for="emojiName">Emoji Name</label> <input id="emojiName" type="text" class="js-emoji-name" name="name" value="');
this.b(this.v(this.f("emojiName",c,b,0)));this.b('"> <p class="quiet"> The name will default to the name of the uploaded file. You can change it here, though. </p> <p class="warning hide js-invalid-name"> The emoji name can only contain letters, numbers, and underscores. </p> <div class="js-emoji-preview" style="margin-bottom: 12px;"> <p style="margin-bottom: 4px;"> <strong>Preview</strong> </p> <span class="js-emoji-preview-name">');this.b(this.v(this.f("emojiName",c,b,0)));this.b('</span> \u2192 <img class="js-emoji-preview emoji"> </div> <input type="submit" class="primary wide js-upload-emoji" value="Create Custom Emoji"> <div class="error hide"> Upload failed </div> </form> ');
this.s(this.f("canUpload",c,b,1),c,b,0,1503,1716,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("hasJPS",b,d,1),b,d,1,0,0,"")||f.b(' <hr> <p class="bottom"> You can also get custom emoji for your entire organization with Business Class. <a target="_blank" href="/business-class">Learn more about Business Class.</a> </p> ');f.b(" ")}),c.pop());this.b(" ");return this.fl()},popover_filter_pos_results:function(c,b,d){this.b(d=d||"");this.b('<ul class="pop-over-list navigable normal-weight js-pos-results"> ');
this.s(this.f("keywordList",c,b,1),c,b,0,82,225,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <li> <a class="js-select-pos-keyword" name="');f.b(f.v(f.f("value",b,d,0)));f.b('" href="#"><strong>');f.b(f.v(f.f("natural",b,d,0)));f.b("</strong> of list <strong>");f.b(f.v(f.d("list.name",b,d,0)));f.b("</strong></a> </li> ")}),c.pop());this.b(" ");this.s(this.f("indexList",c,b,1),c,b,0,256,395,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <li> <a class="js-select-pos-pos" name="');f.b(f.v(f.f("value",b,
d,0)));f.b('" href="#"><strong>');f.b(f.v(f.f("natural",b,d,0)));f.b("</strong> in list <strong>");f.b(f.v(f.d("list.name",b,d,0)));f.b("</strong></a> </li> ")}),c.pop());this.b(" ");this.s(this.f("listList",c,b,1),c,b,0,423,564,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <li> <a class="js-select-pos-list" name="');f.b(f.v(f.f("id",b,d,0)));f.b('" href="#"><strong>');f.b(f.v(f.f("index",b,d,0)));f.b("</strong> ");f.b(f.v(f.f("indexPrep",b,d,0)));f.b(" list <strong>");f.b(f.v(f.f("name",b,d,0)));
f.b("</strong></a> </li> ")}),c.pop());this.b(" </ul> ");return this.fl()},popover_helper_new_board_add_org:function(c,b,d){this.b(d||"");this.b("<p> An organizations is a collection of members and boards. They make sharing and working within a group even easier. </p> <a href=\"#\" class='button js-create-org'>Create an Organization</a> ");return this.fl()},popover_insert_card:function(c,b,d){this.b(d||"");this.b('<form> <textarea type="text" class="js-card-name js-autofocus" id="card-name"></textarea> <input type="submit" class="primary js-insert-card" value="Add Card"> <input type="submit" class="js-cancel" value="Cancel"> </form> ');
return this.fl()},popover_insertion_menu:function(c,b,d){this.b(d=d||"");this.b('<ul class="pop-over-list"> <li> <a href="#" class="js-open-emoji-selector">Select Emoji\u2026</a> </li> <li> <a href="#" class="js-open-mention-selector">Mention Member\u2026</a> </li> ');this.s(this.f("customEmoji",c,b,1),c,b,0,191,281,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <li class="uploader"> <a href="#" class="js-upload-emoji">Upload Custom Emoji\u2026</a> </li> ')}),c.pop());this.b(" </ul> ");return this.fl()},
popover_member_searcher:function(c,b,d){this.b(d=d||"");this.s(this.f("showSearch",c,b,1),c,b,0,15,105,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <input type="text" class="js-filter-members js-autofocus" placeholder="Search members\u2026"> ')}),c.pop());this.b(' <ul class="pop-over-member-list checkable js-members-list"></ul> ');return this.fl()},popover_move_card:function(c,b,d){this.b(d||"");this.b(this.rp("move_card_controls",c,b,""));this.b(' <input type="submit" class="primary wide js-submit" value="Move"> ');
return this.fl()},popover_move_list:function(c,b,d){this.b(d=d||"");this.b('<div class="form-grid"> <div class="button-link setting form-grid-child form-grid-child-full"> <span class="label">Board</span> <span class="value js-board-value"></span> <label>Board</label> <select class="js-select-board"> ');this.s(this.f("organizations",c,b,1),c,b,0,243,438,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <optgroup label="');f.b(f.v(f.f("displayName",b,d,0)));f.b('"> ');f.s(f.f("boards",b,d,1),b,d,0,290,414,
"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <option value="');e.b(e.v(e.f("id",b,d,0)));e.b('"');e.s(e.f("selected",b,d,1),b,d,0,326,346,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b(' selected="selected"')}),b.pop());e.b(">");e.b(e.v(e.f("name",b,d,0)));e.s(e.f("selected",b,d,1),b,d,0,381,391,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b(" (current)")}),b.pop());e.b("</option> ")}),b.pop());f.b(" </optgroup> ")}),c.pop());this.b(' </select> </div> <div class="button-link setting form-grid-child form-grid-child-full"> <span class="label">Position</span> <span class="value js-pos-value"></span> <label>Position</label> <select class="js-select-list-pos"></select> </div> </div> <input type="submit" class="primary wide js-commit-position" value="Move"/> ');
return this.fl()},popover_org_data_export:function(c,b,d){this.b(d=d||"");this.s(this.f("token",c,b,1),c,b,0,10,565,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("error",b,d,1),b,d,0,21,53,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <p class="error">');e.b(e.v(e.f("error",b,d,0)));e.b("</p> ")}),b.pop());f.b(" ");f.s(f.f("error",b,d,1),b,d,1,0,0,"")||(f.b(" "),f.s(f.f("complete",b,d,1),b,d,0,88,274,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <p> Your export is ready! </p> <a class="button-link js-real-link" href="/1/organizations/');
e.b(e.v(e.f("name",b,d,0)));e.b("/export/");e.b(e.v(e.f("token",b,d,0)));e.b('/download"> <span class="icon-sm icon-archive"/> Download export </a> ')}),b.pop()),f.b(" "),f.s(f.f("complete",b,d,1),b,d,1,0,0,"")||(f.b(' <p class="center"> Your export is being generated.<br>Please wait\u2026 </p> <p class="center"> '),f.s(f.f("stage",b,d,1),b,d,0,403,491,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <span class="quiet"> ');e.b(e.v(e.f("stage",b,d,0)));e.s(e.f("total",b,d,1),b,d,0,444,472,"{{ }}")&&(e.rs(b,
d,function(b,d,e){e.b(" (");e.b(e.v(e.f("progress",b,d,0)));e.b(" of ");e.b(e.v(e.f("total",b,d,0)));e.b(")")}),b.pop());e.b(" </span> ")}),b.pop()),f.b(' </p> <span class="spinner centered"/> ')),f.b(" "));f.b(" ")}),c.pop());this.b(" ");this.s(this.f("token",c,b,1),c,b,1,0,0,"")||this.b(' <p> Export your organization as a ZIP file containing information on members, boards, and everything inside. Board and member info will be in JSON format. Attachments (if included) will be in their native format. </p> <div class="check-div clearfix"> <input id="includeAttachments" type="checkbox"> <label for="includeAttachments">Include attachments\u2026</label> </div> <input class="button full primary js-export" type="submit" value="Export"> ');
this.b(" ");return this.fl()},popover_org_logo:function(c,b,d){this.b(d=d||"");this.b('<p class="error hide js-error" style="margin: 8px 4px 0;"></p> <div class="uploader" style="margin: 12px 4px 8px;"> <form class="realfile" action="/1/organization/');this.b(this.v(this.f("id",c,b,0)));this.b('/logo" method="post" enctype="multipart/form-data"> <input type="hidden" name="token" value="" /> <input type="hidden" name="format" value="http" /> <input type="file" name="file" class="js-upload-logo" style="margin-bottom: 0;" tabindex="-1" /> </form> <a class="button-link fakefile js-fakefile"> <span class="icon-sm icon-org"/> Upload a new logo </a> </div> ');
this.s(this.f("logoHash",c,b,1),c,b,0,544,672,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <hr style="margin-top: 14px;"> <a class="quiet-button clear js-remove-logo" style="padding: 6px 8px;" href="#">Remove Logo</a> ')}),c.pop());this.b(" ");return this.fl()},popover_rename_board:function(c,b,d){this.b(d||"");this.b('<form> <label>Name</label> <input type="text" class="js-board-name js-autofocus" value="');this.b(this.v(this.f("boardName",c,b,0)));this.b('"> <input type="submit" class="primary wide js-rename-board" value="Rename"> </form> ');
return this.fl()},popover_select_members:function(c,b,d){this.b(d||"");this.b('<input type="text" class="js-search-mem js-autofocus" placeholder="Search members"/> <ul class="pop-over-member-list checkable js-mem-list"> </ul> ');return this.fl()},popover_selector_menu:function(c,b,d){this.b(d||"");this.b('<ul class="pop-over-list"> <li> <a href="#" class="js-mem-selector">Members\u2026</a> </li> <li> <a href="#" class="js-label-selector">Labels\u2026</a> </li> <li> <a href="#" class="js-pos-selector">Position\u2026</a> </li> <li> <a href="#" class="js-copy-from">Copy From Existing Card\u2026</a> </li> </ul> ');
return this.fl()},popover_set_email_freq:function(c,b,d){this.b(d=d||"");this.b('<ul class="pop-over-list" name="minutesBetweenSummaries"> <li> <a class="highlight-icon" value="-1"> Never ');this.s(this.f("minutesBetweenSummaries_-1",c,b,1),c,b,0,138,172,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<span class="icon-sm icon-check"/>')}),c.pop());this.b(' <span class="sub-name"> Don\u2019t send emails. </span> </a> </li> <li> <a class="highlight-icon" value="60"> Periodically ');this.s(this.f("minutesBetweenSummaries_60",
c,b,1),c,b,0,353,387,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<span class="icon-sm icon-check"/>')}),c.pop());this.b(' <span class="sub-name"> Send emails about once an hour. </span> </a> </li> <li> <a class="highlight-icon" value="1"> Instantly ');this.s(this.f("minutesBetweenSummaries_1",c,b,1),c,b,0,576,610,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<span class="icon-sm icon-check"/>')}),c.pop());this.b(' <span class="sub-name"> Send emails as soon as possible. </span> </a> </li> </ul> ');
return this.fl()},popover_share:function(c,b,d){this.b(d=d||"");this.b('<form> <label> Link to this board <span class="icon-sm icon-');this.b(this.v(this.f("pLevelClass",c,b,0)));this.b('" title="');this.b(this.v(this.f("pLevelAltText",c,b,0)));this.b('"/> <span class="quiet" style="font-weight: normal;">');this.b(this.v(this.f("helperText",c,b,0)));this.b('</span> </label> <input class="js-url js-autofocus inline-input" type="text" readonly="readonly" value="');this.b(this.v(this.f("shortUrl",c,
b,0)));this.b('"> </form> <hr> <ul class="pop-over-list"> <li> <a class="js-print" href="#" title="Print using the browser\u2019s print function. You can use \u201cFile\u201d > \u201cPrint\u201d or \u201ccmd + P\u201d (Mac) or \u201ccontrol + P\u201d (Windows)">Print\u2026</a> </li> ');this.s(this.f("hasCsvExport",c,b,1),c,b,0,520,647,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <li> <a class="js-export-csv js-real-link" href="');f.b(f.v(f.f("csvURL",b,d,0)));f.b('" title="Export the board data in CSV format">Export CSV</a> </li> ')}),
c.pop());this.b(' <li> <a class="js-export-json js-real-link" href="');this.b(this.v(this.f("jsonURL",c,b,0)));this.b('" title="Export the board data in JSON format">Export JSON</a> </li> </ul> ');this.s(this.f("hasCsvExport",c,b,1),c,b,1,0,0,"")||(this.b(' <hr> <p class="quiet" style="margin: 16px 8px 8px;"> '),this.s(this.f("needsUpgradeForCsv",c,b,1),c,b,0,895,988,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <a href="');f.b(f.v(f.f("upgradeUrl",b,d,0)));f.b('">There\u2019s an update to Business Class available with CSV export!</a> ')}),
c.pop()),this.b(" "),this.s(this.f("needsUpgradeForCsv",c,b,1),c,b,1,0,0,"")||this.b(' Looking for CSV export? <a href="/business-class">Check out Business Class!</a> '),this.b(" </p> "));this.b(" ");return this.fl()},popover_signup:function(c,b,d){this.b(d=d||"");this.b('<form action="/authenticate_openid" method="post" class="clearfix" style="margin-bottom: 8px; padding-bottom: 8px; border-bottom: 1px solid #bfbfbf;"> <label> Sign up with: </label> <input type="hidden" name="openid_identifier" value="https://www.google.com/accounts/o8/id"> <input type="submit" class="primary js-google-confirm-account" style="margin-top: 4px; width: 100%;" value="Google Account"> <input type="hidden" name="returnUrl" value="');
this.b(this.v(this.f("returnUrl",c,b,0)));this.b('"> </form> <form action="/signup" method="post" class="clearfix" style="margin-bottom: 8px; padding-bottom: 8px; border-bottom: 1px solid #bfbfbf;"> <h3>Or use email and password</h3> <label for="display-name-create"> Full Name </label> <input type="text" name="fullName" id="display-name-create" value="');this.b(this.v(this.f("fullName",c,b,0)));this.b('"> <div class="js-use-diff-email"> <label for="email-create"> Email </label> <input type="email" name="email" id="email-create" value="');
this.b(this.v(this.f("email",c,b,0)));this.b('" autocomplete="off" autocorrect="off" spellcheck="false" autocapitalize="off"> </div> <label for="password-create"> Password </label> <input type="password" name="password" id="password-create"> <input type="hidden" name="returnUrl" value="');this.b(this.v(this.f("returnUrl",c,b,0)));this.b('"> <input type="submit" class="primary js-confirm-email-account" style="width: 100%;" value="Create New Account"> </form> <form> <p class="clear" style="margin-bottom: 0;"> Already have an account? <a href="/login');
this.s(this.f("returnUrl",c,b,1),c,b,0,1399,1423,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("?returnUrl=");f.b(f.v(f.f("returnUrl",b,d,0)))}),c.pop());this.b('"><strong>Log In</strong></a> to accept this invitation. </p> <input type="hidden" name="returnUrl" value="');this.b(this.v(this.f("returnUrl",c,b,0)));this.b('"> </form> ');return this.fl()},popover_switch_tool_kit:function(c,b,d){this.b(d||"");this.b('<p> You will be charged the prorated amount for the month and your billing contact will be notified. </p> <input type="submit" class="wide primary js-submit-switch-tool-kit" value="Switch"> ');
return this.fl()},power_up_detail:function(c,b,d){this.b(d||"");this.b('<div class="window-header clearfix"> <a class="window-header-icon icon-lg icon-leftarrow dark-hover js-back-view" href="#"> </a> <div class="window-title"> <h2 class="window-title-text">Back to Power-Ups</h2> </div> </div> <div class="js-power-up-icon"></div> <div class="power-up-content"> <div class="navbar js-power-up-detail-navbar"></div> <div class="content js-power-up-detail-content"></div> </div> ');return this.fl()},power_up_detail_screenshots:function(c,
b,d){this.b(d=d||"");this.b('<div class="power-up-screenshot-list clearfix"> ');this.s(this.f("screenshots",c,b,1),c,b,0,64,116,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <img class="power-up-screenshot-item" src="');f.b(f.v(f.d(".",b,d,0)));f.b('"> ')}),c.pop());this.b(" </div> ");return this.fl()},power_up_icon:function(c,b,d){this.b(d=d||"");this.b('<a href="#" data-power-up-name="');this.b(this.v(this.f("name",c,b,0)));this.b('" class="power-up-icon-image-wrapper js-power-up-name"> <span class="power-up-icon-image ');
this.b(this.v(this.f("imageClass",c,b,0)));this.b('"/> </a> <div class="power-up-icon-title-section clearfix"> <h3 class="power-up-icon-title"> ');this.b(this.v(this.f("displayName",c,b,0)));this.b(' </h3> <span class="power-up-icon-enabled-badge hide js-enabled-badge"> Enabled <span class="power-up-icon-enabled-badge-icon icon-sm icon-check"/> </span> </div> <p class="power-up-icon-description"> ');this.b(this.v(this.f("powerUpDesc",c,b,0)));this.b(" </p> ");this.s(this.f("isListView",c,b,1),c,b,
0,488,541,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <p class="quiet underline"> Click for details\u2026 </p> ')}),c.pop());this.b(" ");this.s(this.f("isListView",c,b,1),c,b,1,0,0,"")||(this.b(" "),this.s(this.f("__own",c,b,1),c,b,0,583,666,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <a class="button-link power-up-icon-button js-toggle-btn js-toggle-power-up"></a> ')}),c.pop()),this.b(" "),this.s(this.f("__own",c,b,1),c,b,1,0,0,"")||this.b(' <p class="quiet">You must be an admin to enable or disable power-ups.</p> '),
this.b(" "));this.b(" ");return this.fl()},power_up_org_picker:function(c,b,d){this.b(d=d||"");this.s(this.f("hasOrgs",c,b,1),c,b,0,12,514,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <ul class="pop-over-list"> ');f.s(f.f("orgs",b,d,1),b,d,0,49,498,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" <li> ");e.s(e.f("isAdmin",b,d,1),b,d,0,67,299,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b(" ");e.s(e.f("accountStanding",b,d,1),b,d,0,88,153,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b(' <a class="highlight-icon js-select-org" href="/');
e.b(e.v(e.f("name",b,d,0)));e.b('/plans"> ')}),b.pop());e.b(" ");e.s(e.f("accountStanding",b,d,1),b,d,1,0,0,"")||(e.b(' <a class="highlight-icon js-select-org" href="/'),e.b(e.v(e.f("name",b,d,0))),e.b("/billing/card/"),e.b(e.v(e.f("product",b,d,0))),e.b('"> '));e.b(" ")}),b.pop());e.b(" ");e.s(e.f("isAdmin",b,d,1),b,d,1,0,0,"")||(e.b(' <a class="highlight-icon js-select-org" href="/'),e.b(e.v(e.f("name",b,d,0))),e.b('/plans"> '));e.b(" ");e.b(e.v(e.f("displayName",b,d,0)));e.b(' <span class="icon-sm icon-');
e.b(e.v(e.f("permissionLevel",b,d,0)));e.b('" title="');e.b(e.v(e.f("altText",b,d,0)));e.b('"/> </a> </li> ')}),b.pop());f.b(" </ul> ")}),c.pop());this.b(" ");this.s(this.f("hasOrgs",c,b,1),c,b,1,0,0,"")||(this.b(" "),this.s(this.f("isLoggedIn",c,b,1),c,b,0,555,790,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.s(f.f("hasBCOrgs",b,d,1),b,d,0,570,664,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' <p class="quiet" style="padding: 6px 8px;">All of your organizations are Business Class!</p> ')}),b.pop());
f.b(" ");f.s(f.f("hasBCOrgs",b,d,1),b,d,1,0,0,"")||f.b(' <p class="quiet" style="padding: 6px 8px;">You don\'t have any organizations!</p> ');f.b(" ")}),c.pop()),this.b(" "),this.s(this.f("isLoggedIn",c,b,1),c,b,1,0,0,"")||this.b(' <a href="/login/?returnUrl=%2Fbusiness-class" class="js-real-link" style="padding: 6px 8px;">Log in to see your organizations</a> '),this.b(" "));this.b(" ");return this.fl()},power_ups_about_calendar:function(c,b,d){this.b(d||"");this.b("Enable the calendar power-up to gain access to the Trello calendar view. Display cards with due dates in a weekly or monthly format for a time-based overview of cards. Most useful for time-sensitive projects and projects with multiple due dates. ");
return this.fl()},power_ups_about_card_aging:function(c,b,d){this.b(d||"");this.b("Cards will visibly \u201cage\u201d as time passes without any activity. Regular mode will cause old cards to become progressively more transparent. Pirate mode will cause old cards to crack and tear like an old treasure map. Once cards have new activity on them, their age counter is reset and they appear new again. Age thresholds are 1, 2, and 4 weeks. ");return this.fl()},power_ups_about_voting:function(c,b,d){this.b(d||
"");this.b("Enable this power-up to allow users to vote on your cards. Votes are stored and synchronized between all users sharing this board. Choose between multiple permission levels for which users can vote on cards. View the number of votes on each card from the main Trello list pane or in a card's detail pane. ");return this.fl()},power_ups_calendar_prefs:function(c,b,d){this.b(d=d||"");this.b('<h2>Enable iCalendar Feed?</h2> <ul class="pop-over-list power-up-option-list inset"> <li> <a href="#" class="js-select js-calendar-pref-feed ');
this.s(this.f("__own",c,b,1),c,b,1,0,0,"")||this.b("disabled");this.b('" name="enabled"> ');this.s(this.f("calendar_feed_enabled",c,b,1),c,b,0,214,256,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="icon-sm icon-check"></span> ')}),c.pop());this.b(' Enabled </a> </li> <li> <a href="#" class="js-select js-calendar-pref-feed ');this.s(this.f("__own",c,b,1),c,b,1,0,0,"")||this.b("disabled");this.b('" name="disabled"> ');this.s(this.f("calendar_feed_enabled",c,b,1),c,b,1,0,0,"")||this.b(' <span class="icon-sm icon-check"></span> ');
this.b(' <div class="name" name="disabled">Disabled</div> </a> </li> </ul> ');this.s(this.f("calendar_feed_enabled",c,b,1),c,b,0,592,1073,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <br /> <h2>Your Personal iCalendar Feed</h2> <input type="text" class="full js-calendar-feed-url" value="');f.s(f.f("calendar_feed_generated",b,d,1),b,d,0,726,747,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(e.v(e.f("calendar_feed_url",b,d,0)))}),b.pop());f.s(f.f("calendar_feed_generated",b,d,1),b,d,1,0,0,"")||f.b("Generating...");
f.b('" /> <div> <a href="#" class="button-link js-regen-calendar-url"> ');f.s(f.f("calendar_feed_generated",b,d,1),b,d,0,938,962,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b("Regenerate Your Feed URL")}),b.pop());f.b(" ");f.s(f.f("calendar_feed_generated",b,d,1),b,d,1,0,0,"")||f.b("Generating...");f.b(" </a> </div> ")}),c.pop());this.b(" ");return this.fl()},power_ups_card_aging_prefs:function(c,b,d){this.b(d=d||"");this.b('<h2>How do you want the aged cards to look?</h2> <ul class="pop-over-list power-up-option-list inset"> <li> <a href="#" class="js-select ');
this.s(this.f("__own",c,b,1),c,b,1,0,0,"")||this.b("disabled");this.b('" name="regular"> ');this.s(this.f("aging_regular",c,b,1),c,b,0,201,237,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="icon-sm icon-check"/> ')}),c.pop());this.b(' <span class="name">Regular Mode</span> <span class="sub-name"> Older cards become more transparent. </span> </a> </li> <li> <a href="#" class="js-select ');this.s(this.f("__own",c,b,1),c,b,1,0,0,"")||this.b("disabled");this.b('" name="pirate"> ');this.s(this.f("aging_pirate",
c,b,1),c,b,0,471,507,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="icon-sm icon-check"/> ')}),c.pop());this.b(' <span class="name">Pirate Mode</span> <span class="sub-name"> Older cards crackle and tear. </span> </a> </li> </ul> ');return this.fl()},power_ups_detail_navbar:function(c,b,d){this.b(d=d||"");this.b('<a class="nav-item js-toolbar-select ');this.s(this.f("screenshots",c,b,1),c,b,0,53,59,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("active")}),c.pop());this.b('" href="#" name=\'screenshots\'>Screenshots</a> <a class="nav-item js-toolbar-select ');
this.s(this.f("settings",c,b,1),c,b,0,171,177,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("active")}),c.pop());this.b('" href="#" name=\'settings\'>Settings</a> ');return this.fl()},power_ups_list:function(c,b,d){this.b(d||"");this.b('<div class="window-header clearfix"> <span class="window-header-icon icon-lg icon-rocket" href="#"/> <div class="window-title"> <h2 class="window-title-text">Power-Ups</h2> <span class="quiet js-power-up-count hide"/> </div> </div> <div class="power-up-list js-power-up-list"></div> ');
return this.fl()},power_ups_voting_prefs:function(c,b,d){this.b(d=d||"");this.b('<h2>Who is allowed to vote on cards?</h2> <ul class="pop-over-list power-up-option-list inset"> <li> <a href="#" class="');this.s(this.f("__own",c,b,1),c,b,0,130,146,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("js-voting-select")}),c.pop());this.b(" ");this.s(this.f("__own",c,b,1),c,b,1,0,0,"")||this.b("disabled");this.b('" name="members"> <div class="icon-sm icon-check ');this.s(this.f("voting_members",c,b,1),c,b,0,253,
267,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("checked-option")}),c.pop());this.b('"></div> <div class="name"> Members </div> </a> </li> <li> <a href="#" class="');this.s(this.f("__own",c,b,1),c,b,0,374,390,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("js-voting-select")}),c.pop());this.b(" ");this.s(this.f("__own",c,b,1),c,b,1,0,0,"")||this.b("disabled");this.b(" ");this.s(this.f("voting_showObservers",c,b,1),c,b,1,0,0,"")||this.b("disabled");this.b('" name="observers"> <div class="icon-sm icon-check ');
this.s(this.f("voting_observers",c,b,1),c,b,0,560,574,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("checked-option")}),c.pop());this.b('"></div> <div class="name"> Members and Observers </div> <div class="sub-name"> Available only on boards with observers. </div> </a> </li> <li> <a href="#" class="');this.s(this.f("__own",c,b,1),c,b,0,768,784,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("js-voting-select")}),c.pop());this.b(" ");this.s(this.f("__own",c,b,1),c,b,1,0,0,"")||this.b("disabled");this.b(" ");
this.s(this.f("orgCanSee",c,b,1),c,b,1,0,0,"")||this.b("disabled");this.b('" name="org"> <div class="icon-sm icon-check ');this.s(this.f("voting_org",c,b,1),c,b,0,920,934,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("checked-option")}),c.pop());this.b('"></div> <div class="name"> Organization members </div> <div class="sub-name"> Available only on boards within an organization. </div> </a> </li> <li> <a href="#" class="');this.s(this.f("__own",c,b,1),c,b,0,1129,1145,"{{ }}")&&(this.rs(c,b,function(b,
d,f){f.b("js-voting-select")}),c.pop());this.b(" ");this.s(this.f("__own",c,b,1),c,b,1,0,0,"")||this.b("disabled");this.b(" ");this.s(this.f("permissionLevel_public",c,b,1),c,b,1,0,0,"")||this.b("disabled");this.b('" name="public"> <div class="icon-sm icon-check ');this.s(this.f("voting_public",c,b,1),c,b,0,1313,1327,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("checked-option")}),c.pop());this.b('"></div> <div class="name"> Public members </div> <div class="sub-name"> Available on public boards. </div> </a> </li> </ul> ');
return this.fl()},product_promo_button:function(c,b,d){this.b(d||"");this.b('<div class="product-promo-button-overlay"> <span class="product-promo-button"> Get <a href="#" class="product-promo-button-gold inline-block js-gold-promo"> <span class="product-promo-button-icon icon-lg icon-crown"></span> <span class="product-promo-button-text">Trello Gold</span> </a> <br> or <a href="/business-class" class="product-promo-button-bc inline-block js-bc-promo"> <span class="product-promo-button-icon icon-lg icon-briefcase"></span> <span class="product-promo-button-text">Business Class</span></a>. </span> </div> ');
return this.fl()},profiler:function(c,b,d){this.b(d||"");this.b('<div class="js-profiler profiler"> </div> ');return this.fl()},profiler_entry:function(c,b,d){this.b(d=d||"");this.b('<div class="profiler-entry"> <span class="profiler-name">');this.b(this.v(this.f("name",c,b,0)));this.s(this.f("count",c,b,1),c,b,0,75,86,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" x");f.b(f.v(f.f("count",b,d,0)))}),c.pop());this.b('</span>: <span class="profiler-time">');this.b(this.v(this.f("time",c,b,0)));this.b("</span> </div> ");
return this.fl()},promo_business_class_new:function(c,b,d){this.b(d||"");this.b(' <script> $.getScript(\'https://use.typekit.com/wtv2ioe.js\', function(){ try{Typekit.load();}catch(e){}; }); \x3c/script> <header class="business-class-header text-center"> <div class="row"> <div class="col-xs-12"> <img class="logo" src="https://d78fikflryjgj.cloudfront.net/images/landing/businessClass/new/819cd5b1a2a99766c864ad0f17224d92/business-class-logo.svg" alt="Business Class Logo" /> <h1 class="hidden">Trello Business Class</h1> <p class="lead">Simple, collaborative workspaces for teams of all sizes.</p> </div> </div> <div class="row"> <div class="col-xs-12"> <button class="green js-add-this-businessClass" name="businessClassMonthly">Upgrade My Organization</button> <p><small><em>$5 per user per month or $45 per user per year for each organization.</em></small></p> </div> </div> <div class="row hidden"> <div class="col-sm-12"> <img class="team responsive" src="https://d78fikflryjgj.cloudfront.net/images/landing/businessClass/new/cdde2f7358f61616ef61945baba9e09a/team.png" /> </div> </div> </header> <section class="work-together-work-better"> <div class="container"> <div class="row"> <div clas="col-xs-12 col-sm-10 col-sm-offset-1"> <h2 class="text-center">Work together, work better.</h2> </div> </div> <div class="row text-center"> <div class="col-xs-12 col-sm-10 col-sm-offset-1"> <p class="lead"> Trello Business Class gives you all the power of Trello plus business-grade controls and security. Whether you\u2019re collaborating on year-long projects, monthly sprints, or daily to-do lists, Trello supports the way your team works and always keeps your data safe. </p> </div> </div> <div class="col-xs-10 col-xs-offset-1"> <div class="browser"> <div class="circle"></div> <div class="circle"></div> <div class="circle"></div> <div class="divider"></div> <img class="responsive" src="https://d78fikflryjgj.cloudfront.net/images/landing/businessClass/new/31ca81cfcca53764ce494df1402aa3bb/screenshot-board.jpg" /> <div class="clearfix"></div> </div> </div> </div> </section> <section class="manage-your-organization"> <div class="container"> <div class="row"> <div class="col-md-3 col-md-offset-0 col-sm-3 col-sm-offset-0 col-sm-push-7 col-xs-6 col-xs-offset-4"> <img class="responsive" src="https://d78fikflryjgj.cloudfront.net/images/landing/businessClass/new/55165c17bc07ebe72f8a76c1588201d6/screenshot-birds-eye-view.png" /> </div> <div class="col-md-5 col-md-offset-0 col-sm-5 col-sm-pull-1 col-sm-offset-0 col-xs-10 col-xs-offset-1"> <h3>Keep a bird\u2019s&ndash;eye view</h3><br /> <p class="lead">Business Class organization administrators can access and manage all organization boards, both public and private, allowing for high-level visibility and control.</p> </div> </div> <div class="row"> <div class="col-md-3 col-md-offset-2 col-sm-3 col-sm-offset-1 col-xs-6 col-xs-offset-4"> <img class="responsive" src="https://d78fikflryjgj.cloudfront.net/images/landing/businessClass/new/4df2194767ed6224f545d3061c72f88e/screenshot-visability.png" /> </div> <div class="col-md-5 col-md-offset-0 col-sm-6 col-sm-offset-0 col-xs-10 col-xs-offset-1"> <h3>Fine-tuned access</h3><br /> <p class="lead">Specify who can create public, organization visible, and private boards &ndash; as well who can be added to each &ndash; and you\u2019ll ensure that your team\u2019s private work always stays private.</p> </div> </div> </div> </section> <section class="empower-your-team"> <div class="container"> <div class="row text-center"> <div class="col-xs-10 col-xs-offset-1"> <h2>Give your team super powers.</h2> <p class="lead"> Trello lets you gather opinions, assign clear tasks, set due dates, and track progress. Your team will be up, running, and more productive than ever in no time. With Business Class, you get additional features that make collaborating even easier. </p> </div> </div> <div class="row"> <div class="col-xs-10 col-xs-offset-1 col-sm-6 col-sm-offset-0"> <div class="row"> <div class="col-xs-3"> <img class="responsive" src="https://d78fikflryjgj.cloudfront.net/images/landing/businessClass/new/621ac1c6f9723e63b01b94bf2c0afe2d/icon-user.svg"> </div> <div class="col-xs-9"> <h3>Employees only!</h3> <p>Restrict who can be added to your organization by email domain, or even individual email addresses.</p> </div> </div> </div> <div class="col-xs-10 col-xs-offset-1 col-sm-6 col-sm-offset-0"> <div class="row"> <div class="col-xs-3"> <img class="responsive" src="https://d78fikflryjgj.cloudfront.net/images/landing/businessClass/new/de0d164355c63e27bc9679fbaff48c68/icon-google.svg"> </div> <div class="col-xs-9"> <h3>Sync with Google Apps</h3> <p>Link your Google Apps account with Trello to add each member of your team in a single click.</p> </div> </div> </div> </div> <div class="row"> <div class="col-xs-10 col-xs-offset-1 col-sm-6 col-sm-offset-0"> <div class="row"> <div class="col-xs-3"> <img class="responsive" src="https://d78fikflryjgj.cloudfront.net/images/landing/businessClass/new/61ac2d84359944a4a8bd2f628d1b2f27/icon-attachment.svg"> </div> <div class="col-xs-9"> <h3>Share More</h3> <p>Upload bigger attachments like videos, audio files, and Photoshop documents up to 250MB in size.</p> </div> </div> </div> <div class="col-xs-10 col-xs-offset-1 col-sm-6 col-sm-offset-0"> <div class="row"> <div class="col-xs-3"> <img class="responsive" src="https://d78fikflryjgj.cloudfront.net/images/landing/businessClass/new/80bfb6fa10278da7ff617a5d3a171a78/icon-export.svg"> </div> <div class="col-xs-9"> <h3>Easy Bulk Exports</h3> <p>Export all of your organizations\u2019s data in CSV and JSON, with or without attachments, in a single click.</p> </div> </div> </div> </div> <div class="row"> <div class="col-xs-10 col-xs-offset-1 col-sm-6 col-sm-offset-0"> <div class="row"> <div class="col-xs-3"> <img class="responsive" src="https://d78fikflryjgj.cloudfront.net/images/landing/businessClass/new/27a1bc955c923d9a9b2d6aa8f9763a36/icon-observer.svg"> </div> <div class="col-xs-9"> <h3>Easily share with clients</h3> <p>Add people outside of your organization as Observers to grant secure, \u201cread-only\u201d access to boards.</p> </div> </div> </div> <div class="col-xs-10 col-xs-offset-1 col-sm-6 col-sm-offset-0"> <div class="row"> <div class="col-xs-3"> <img class="responsive" src="https://d78fikflryjgj.cloudfront.net/images/landing/businessClass/new/ac074146aa9230455bf39e1b68061987/icon-employee-card.svg"> </div> <div class="col-xs-9"> <h3>Deactivate members safely</h3> <p>Remove organization and board access for former employees without losing their work or history.</p> </div> </div> </div> </div> </div> </section> <section class="trello-gold"> <div class="background"> <div class="container"> <div class="row"> <div class="col-xs-10 col-xs-offset-1 text-center"> <h2>All the fun of Trello Gold</h2> <p class="lead"> With Business Class, every member of your organization gets all the benefits of Trello Gold including custom and additional board backgrounds and stickers, custom emoji, and 250MB attachments. </p> </div> </div> <div class="row center"> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/businessClass/new/ad92c03015a905232bb789b571f67177/business-class-backgrounds.png" class="inline-block" alt="Board Backgrounds" style="max-width: 100%"> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/businessClass/new/0822d456454bfa8fa5875279fb6c8b36/business-class-stickers.png" class="inline-block" alt="Stickers" style="max-width: 100%"> </div> </div> </div> </section> <section class="get-started text-center"> <div class="container"> <div class="row"> <div class="col-sm-12 col-md-8 col-md-offset-2"> <h2>Get started with Business Class!</h2> <p>Trello Business Class supercharges your team\u2019s productivity and gives you the administrative controls you need.</p> </div> </div> <div class="row"> <div class="col-sm-12"> <button class="green js-add-this-businessClass" name="businessClassMonthly">Upgrade My Organization</button> <p><small><em>$5 per user per month or $45 per user per year for each organization.</em></small></p> </div> </div> </section> <section class="new-to-trello text-center"> <div class="container"> <div class="row"> <div class="col-md-8 col-md-offset-2 col-sm-6 col-sm-offset-3"> <h3>New to Trello?</h3> <p>Business Class provides extra features for organizations, but you can sign up and use Trello for free and enjoy unlimited boards organizations, cards, and members.</p> </div> <div class="row"> <div class="col-lg-4 col-lg-offset-4 col-sm-6 col-sm-offset-3"> <p><a href="/signup">Sign up for Trello - It\u2019s Free!</a></p> </div> </div> </div> </div> <img class="taco hidden-xs" src="https://d78fikflryjgj.cloudfront.net/images/landing/businessClass/new/017d8dead11ecc9fcc13e7375149b7b2/taco.png"> </section> ');
this.b(this.rp("promo_footer",c,b,""));this.b(" </div> ");return this.fl()},promo_enterprise:function(c,b,d){this.b(d||"");this.b(' <script> $.getScript(\'https://use.typekit.com/wtv2ioe.js\', function(){ try{Typekit.load();}catch(e){}; }); \x3c/script> <div class="promo-wrapper"> <header id="enterpriseHeader"> <img src="https://d78fikflryjgj.cloudfront.net/images/edf384a32ea57e1c3dbf30fa42eea2d2/enterprise-logo.svg"> <h1 class="logo-text"> Trello Enterprise </h1> </header> <section id="enterprise" class="enterprise"> <div class="enterprise-features"> <div class="width-wrapper"> <header> <h2 class="enterprise-features-header"> Full control and security without compromising productivity. </h2> </header> <div class="enterprise-feature-row clearfix"> <div class="enterprise-feature-entry"> <h3>Phone Support</h3> <p> We\u2019ve designed Trello to be incredibly easy to use. But, in a pinch, you can call us during business hours and speak with a real person. If something critical comes up after hours, we provide 24 x 7 x 365 incidence response. </p> </div> <div class="enterprise-feature-entry"> <h3>Dedicated Contact Person</h3> <p> You\u2019ll be provided with a dedicated account manager who you can work with for help with billing information, support questions, or setting up a training program for your team. </p> </div> <div class="enterprise-feature-entry"> <h3>Privacy &amp; Security</h3> <p> We use best practice physical and environmental security measures. All traffic runs over SSL, the internet\u2019s most common and trusted communications protocol. Data is backed up hourly and is stored at an off-site location. </p> </div> <div class="enterprise-feature-entry"> <h3>Monthly Reports</h3> <p> Administrators of your account receive detailed monthly reports including service availability and uptime, maintenance periods, and incidence response times. </p> </div> <div class="enterprise-feature-entry"> <h3>Simplified Billing</h3> <p> Pay for all of your Business Class organizations and members on a single bill. </p> </div> <div class="enterprise-feature-entry contact-us"> <a class="contact-us-button" href="mailto:support@trello.com" title="Contact us"> Contact Us </a> <p> Contact <a href="mailto:support@trello.com" title="Contact us"> support@trello.com </a> for additional details. </p> </div> </div> <p class="feature-footnote"> Trello is as easy to use as sticky notes stuck to your white board. Still, sometimes you want a little help getting up to speed. Your account manager can help design customized training sessions for your company. </p> </div> </div> <div class="enterprise-features business-class-features"> <div class="width-wrapper"> <header> <h2> The tools that business teams need. </h2> <p class="enterprise-feature-sub-heading"> Turn any of your company\u2019s Trello organizations into a Business Class organization and give your teams the tools to better manage their people and boards. </p> </header> <div class="enterprise-feature-row clearfix"> <div> <h3>Granular Permissions</h3> <p> Business Class enables restrictions to be set on both the board and organization level. Specify who can create public, org-visible, and private boards - as well as who can be added to each - and ensure that your teams can collaborate easily while still keeping private work private. </p> </div> <div> <h3>Membership Controls</h3> <p> Restrict who can be added to your Trello organizations by email domain, or even individual email address. Add contractors, vendors, or others outside your organization as Observers to grant them secure, \u201cread-only\u201d access to specific boards. You\u2019ll get extra control without losing flexibility. </p> </div> <div> <h3>Simple Data Export</h3> <p> You spend a lot of time getting organized with Trello, and we don\u2019t believe in locking up all of that important data. Business Class allows you to export the entirety of your organization\u2019s data in one click, making it easy to examine, analyse, and store. </p> </div> </div> </div> <div class="more-info-row"> <a class="more-info-button" href="/business-class" title="Trello Business Class"> More about Trello Business Class </a> </div> </div> <div class="enterprise-features trello-features"> <div class="width-wrapper"> <header> <h2> The easiest way to organize anything with anyone. </h2> <p class="enterprise-feature-sub-heading"> No more endless email threads, spreadsheets on the shared drive, or clunky desktop software. Trello is fast, easy to use, and it works on the web, your phone, and your tablet. </p> </header> <div class="enterprise-feature-row clearfix"> <div> <h3>No Training Required</h3> <p> Trello\u2019s easy-to-use interface takes no time to learn, and is incredibly flexible. Whether you\u2019re managing a sales pipeline, onboarding new employees, or working with clients, there\u2019s nothing standing between you and your productive flow. </p> </div> <div> <h3>Share and Notify</h3> <p> Trello is great alone, but even better with others. Get the whole group onboard in seconds. Mention someone in a comment to send them a notification. You\u2019ll see everyone\u2019s updates in real time, so no one will ever have to ask \u201cWho\u2019s doing what?\u201d again. </p> </div> <div> <h3>On Desktop and Mobile</h3> <p> Trello works wherever you are. Stay in the loop by using Trello on Android phones and tablets, iPhone, iPad, Kindle Fire, Windows 8 Tablet, or your web browser. All of our apps are free to use for everyone in your organization. </p> </div> </div> <div class="more-info-row"> <a class="more-info-button" href="/tour" title="Take a tour of Trello"> Take a tour of Trello </a> </div> </div> </div> </section> ');
this.b(this.rp("promo_footer",c,b,""));this.b(" </div> ");return this.fl()},promo_fan_club:function(c,b,d){this.b(d||"");this.b(this.rp("promo_gold_content",c,b,""));this.b(this.rp("promo_footer",c,b," "));return this.fl()},promo_gold_content:function(c,b,d){this.b(d=d||"");this.b(' <script> $.getScript(\'https://use.typekit.com/wtv2ioe.js\', function(){ try{Typekit.load();}catch(e){}; }); \x3c/script> <div class="gold-promo"> <div class="fanclub-section fanclub-section-header"> <div class="fanclub-section-wrapper"> <h1>Trello Gold</h1> <img src="https://d78fikflryjgj.cloudfront.net/images/gold/6d243fedef388195ac2dd4bf3f6fcfa5/TrelloGoldLogo.png" class="fanclub-section-header-image" alt="Trello Gold Logo"> <p> Support Trello, your favorite productivity app, and get extra bits of fun and functionality. You\u2019ll get\u2026 </p> <ul> <li> Additional stickers and board backgrounds </li> <li> Upload your own stickers, backgrounds, and emoji </li> <li> Larger attachments </li> <li> A <em>very rare</em> crown for your avatar </li> </ul> ');
this.s(this.f("hasCredits",c,b,1),c,b,0,765,801,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="js-earned-gold"></div> ')}),c.pop());this.b(" ");this.s(this.f("hasCredits",c,b,1),c,b,1,0,0,"")||(this.b(" "),this.s(this.f("hasCrown",c,b,1),c,b,0,846,997,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <p> <span class="icon-lg icon-crown icon-color"></span> <span style="font-weight: bold; color: hsl(55, 60%, 50%)">You\u2019ve got Trello Gold!</span> </p> ')}),c.pop()),this.b(" "),this.s(this.f("hasCrown",
c,b,1),c,b,1,0,0,"")||(this.b(' <div class="fanclub-free-or-paid clearfix"> <div class="fanclub-recommend"> <div class="fanclub-price"> <p class="fanclub-free">Get it for free</p> <p class="fanclub-for-free quiet"> \u2026by inviting new members </p> </div> <a href="/recommend" class="button-link primary js-reco">Share Trello</a> </div> <div class="fanclub-paid"> <div class="fanclub-price"> <p class="fanclub-monthly">$5 per month</p> <p class="fanclub-yearly quiet">or $45 per year</p> </div> <a href="/'),
this.b(this.v(this.f("username",c,b,0))),this.b('/billing/card/trelloGoldMonthly" class="button-link primary js-upgrade">Upgrade!</a> </div> </div> ')),this.b(' <p class="fanclub-learn quiet"> Scroll down to learn more. &darr; </p> '));this.b(' </div> </div> <div class="fanclub-section fanclub-section-backgrounds"> <div class="fanclub-section-wrapper"> <div class="trellogold-background-demo js-background"> <div class="trellogold-background-demo-header"> </div> <div class="trellogold-background-demo-lists"> <div class="trellogold-background-demo-list"></div> <div class="trellogold-background-demo-list"></div> <div class="trellogold-background-demo-list"></div> </div> </div> <p class="trellogold-demo-rotate"> <a href="#" class="dark-hover quiet js-rotate-background"> <span class="icon-sm icon-reopen"></span> <span class="text">New background.</span> </a> </p> <h2>Board Backgrounds</h2> <p> You can set your background to six basic colors so you can easily categorize and distinguish your boards. With Trello Gold, you get access to nine additional, hand-picked backgrounds, plus the ability to upload your own. </p> </div> </div> <div class="fanclub-section fanclub-section-stickers"> <div class="fanclub-section-wrapper"> <div class="fanclub-section-stickers-area js-stickers"> <div class="list-card trellogold-demo-list-card has-stickers"> ');
this.b(this.rp("card",c,b,""));this.b(' </div> </div> <p class="trellogold-demo-rotate"> <a href="#" class="dark-hover quiet js-rotate-stickers"> <span class="icon-sm icon-reopen"></span> <span class="text">New stickers.</span> </a> </p> <h2>Stickers</h2> <p> Trello gives you a dozen stickers to express common sentiment and status about cards on your board. With Trello Gold, you get access to extra, premium sticker packs. Like a pack with Taco our spokes-husky. And a pack featuring Pete the Computer, a tiny, friendly computer. If that\u2019s not enough, you can upload your own. </p> </div> </div> <div class="fanclub-section fanclub-section-attachments"> <div class="fanclub-section-wrapper"> <img src="https://d78fikflryjgj.cloudfront.net/images/gold/79e58b5405a1d1788cc17aab0042bafb/gold-promo-attachments.png"> <h2>Larger Attachments</h2> <p> Are 10 megabyte card attachments just not big enough? With Trello Gold, you can upload files up to 250 megabytes in size. </p> </div> </div> <div class="fanclub-section fanclub-section-emoji"> <div class="fanclub-section-wrapper"> <div class="trellogold-emoji-demo js-emoji"> <div class="phenom"> <div class="creator member member-no-menu js-member-emoji-demo"> <span class="icon-lg icon-member"></span> </div> <div class="phenom-desc"> <span class="bold hide js-member-name-emoji-demo js-show-on-submit"></span> <div class="action-comment markeddown"> Dang, I forgot the <span class="js-unrendered-emoji">:hotsauce:</span><img class="js-rendered-emoji hide emoji" src="https://d78fikflryjgj.cloudfront.net/images/gold/d5cf5eec54bd6151f0da2b87e961e066/hotsauce.png">! </div> <div class="phenom-meta quiet hide js-show-on-submit"> <span class="date">just now</span> </div> <input type="submit" class="primary js-submit-comment" value="Comment"> </div> </div> </div> <h2>Custom Emoji</h2> <p> Sometimes a <img src="https://d4jn9j2wyhjaw.cloudfront.net/images/emoji/13800b13aa272e06d742e0f0a0e4b116/camel.png" style="height: 24px; width: 24px;"> speaks louder than words. That\u2019s why Trello has over 800 emoji to use in comments, checklist items, descriptions, and elsewhere. But if you can\u2019t find the perfect emoji to express yourself, you can upload your own with Trello Gold. </p> </div> </div> <div class="fanclub-section fanclub-section-reco"> <div class="fanclub-section-wrapper"> <h2> Share Trello to earn free Trello Gold! </h2> <p> For every new member you get to join Trello, we\u2019ll give you a month of Trello Gold for free. Check out your recommend page for lots of ways to share. </p> <a href="/recommend" class="button-link primary js-reco">Share Trello</a> </div> </div> <div class="fanclub-section fanclub-section-free"> <div class="fanclub-section-wrapper"> <p> Trello Gold is a way to support the tool you love and use every day, while getting extra bits of fun and functionality. Of course, you can still use Trello for free and enjoy unlimited boards, organizations, cards, and no usage restrictions, with or without Trello Gold. </p> ');
this.s(this.f("loggedIn",c,b,1),c,b,1,0,0,"")||this.b(' <p> New to Trello? <a href="/signup" class="js-sign-up-via-fan-club">Sign up now!</a> </p> ');this.b(" </div> </div> </div> ");return this.fl()},quick_card_editor:function(c,b,d){this.b(d=d||"");this.b('<span class="icon-lg icon-close quick-card-editor-close-icon js-close-editor"></span> <div class="quick-card-editor-card" style="top: ');this.b(this.v(this.f("top",c,b,0)));this.b("px; left: ");this.b(this.v(this.f("left",c,b,0)));this.b("px; width: ");
this.b(this.v(this.f("width",c,b,0)));this.b('px;"> <div class="list-card list-card-quick-edit js-stop" style="width: ');this.b(this.v(this.f("width",c,b,0)));this.b('px;"> ');this.b(this.rp("card",c,b,""));this.b(' </div> <input type="submit" value="Save" class="primary wide js-save-edits"> <div class="quick-card-editor-buttons');this.s(this.f("leftButtons",c,b,1),c,b,0,406,437,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" quick-card-editor-buttons-left")}),c.pop());this.b('"> <a class="quick-card-editor-buttons-item js-edit-labels" href="#"> <span class="icon-sm icon-label light"></span> <span class="quick-card-editor-buttons-item-text">Edit Labels</span> </a> <a class="quick-card-editor-buttons-item js-edit-members" href="#"> <span class="icon-sm icon-member light"></span> <span class="quick-card-editor-buttons-item-text">Change Members</span> </a> <a class="quick-card-editor-buttons-item js-move-card" href="#"> <span class="icon-sm icon-move light"></span> <span class="quick-card-editor-buttons-item-text">Move</span> </a> <a class="quick-card-editor-buttons-item js-copy-card" href="#"> <span class="icon-sm icon-card light"></span> <span class="quick-card-editor-buttons-item-text">Copy</span> </a> <a class="quick-card-editor-buttons-item js-edit-due-date" href="#"> <span class="icon-sm icon-clock light"></span> <span class="quick-card-editor-buttons-item-text">Change Due Date</span> </a> ');
this.s(this.f("closed",c,b,1),c,b,1,0,0,"")||this.b(' <a class="quick-card-editor-buttons-item js-archive" href="#"> <span class="icon-sm icon-archive light"></span> <span class="quick-card-editor-buttons-item-text">Archive</span> </a> ');this.b(" </div> </div> ");return this.fl()},reco:function(c,b,d){this.b(d=d||"");this.b(' <script> $.getScript(\'https://use.typekit.com/wtv2ioe.js\', function(){ try{Typekit.load();}catch(e){}; }); \x3c/script> <div class="reco-section reco-header"> <h1>Share Trello and Earn <img src="https://d78fikflryjgj.cloudfront.net/images/gold/3cbf48993d46484c5d82cc9c1844a54b/TrelloGoldIcon.png" style="height:30px; min-width: 43px; margin: 0 10px 0 0;">Trello Gold</h1> <p> For every person you get to join Trello, we\'ll give you a free month of Trello Gold, up to 12 months. Trello Gold lets you organize <em>in style</em> with additional stickers and board backgrounds; the ability to upload your own stickers, backgrounds, and emoji; larger attachments; and more. </p> <p> <a href="/gold">Learn more about Trello Gold.</a> </p> </div> <div class="reco-section reco-section-redeem js-redeem"></div> <div class="reco-section"> <h2>You\'ve earned ');
this.b(this.v(this.f("freeMonths",c,b,0)));this.b(' (out of 12)!</h2> <div class="reco-section-progress-bar-total"> <div class="reco-section-progress-bar-current js-reco-progress-bar-current"></div> </div> ');this.s(this.f("promoMonths",c,b,1),c,b,0,1031,1133,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <h4 class="reco-joined-header"> You\u2019ve also received ');f.b(f.v(f.f("promoMonths",b,d,0)));f.b(" from promotional credits! </h4> ")}),c.pop());this.b(" ");this.s(this.f("joined",c,b,1),c,b,0,
1161,1238,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <h4 class="reco-joined-header"> You\u2019ve got ');f.b(f.v(f.f("joined",b,d,0)));f.b(" to join Trello! </h4> ")}),c.pop());this.b(' <div class="reco-stat-section js-joined-members"></div> </div> <div class="reco-section"> <h2>There are lots of ways to share!</h2> <ul class="reco-section-list"> <li> <span class="reco-section-list-number">1</span> Invite people to boards and organizations. </li> <li> <span class="reco-section-list-number">2</span> Copy and share this link: <a target="_blank" class="reco-link js-user-reco-link" href="');
this.b(this.v(this.f("shareUrl",c,b,0)));this.b('">');this.b(this.v(this.f("shareUrl",c,b,0)));this.b('</a> </li> <li> <span class="reco-section-list-number">3</span> Post the link on <a href="');this.b(this.v(this.f("twitterShareUrl",c,b,0)));this.b('" target="_blank" class="js-twitter-share"> <span class="icon-lg icon-twitter icon-twitter-brand-color"/>Twitter</a> or <a href="');this.b(this.v(this.f("facebookShareUrl",c,b,0)));this.b('" target="_blank" class="js-facebook-share"> <span class="icon-lg icon-facebook icon-facebook-brand-color"/>Facebook</a>. </li> <li> <span class="reco-section-list-number">4</span> <a target="_blank" href="mailto:your-close-friends@example.com?subject=Check out Trello!&body=Trello is the easiest way to organize anything with anyone! I use it all the time and love it. You should totally sign up.%0a%0aCheck out this link to learn more: ');
this.b(this.v(this.f("shareUrl",c,b,0)));this.b('">Email that link</a> to others. </li> </ul> </div> <div class="reco-section"> <h2>Sharing Trello makes Taco happy.</h2> <img class="reco-section-happy-taco" src="https://d78fikflryjgj.cloudfront.net/images/reco/10e3fec8aee92d177b22290b7cff669d/Taco_idle.png"> </div> ');return this.fl()},reco_joined_member:function(c,b,d){this.b(d=d||"");this.b('<div class="reco-invite-item');this.s(this.f("member",c,b,1),c,b,0,39,49,"{{ }}")&&(this.rs(c,b,function(b,
d,f){f.b(" is-member")}),c.pop());this.b('"> <div class="member reco-invite-item-member"> ');this.b(this.rp("member",c,b,""));this.b(' </div> <div class="reco-invite-item-member-details"> <p> <a class="js-member-profile" href="');this.b(this.v(this.f("url",c,b,0)));this.b('">');this.b(this.v(this.f("fullName",c,b,0)));this.b("</a> </p> ");this.s(this.f("via",c,b,1),c,b,0,251,287,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <p class="quiet"> via ');f.b(f.v(f.f("via",b,d,0)));f.b(" </p> ")}),c.pop());
this.b(" </div> </div> ");return this.fl()},search_contact:function(c,b,d){this.b(d=d||"");this.b('<div class="contact-info');this.s(this.f("selectable",c,b,1),c,b,0,39,68,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" js-select-contact selectable")}),c.pop());this.b('"> ');this.s(this.f("selectable",c,b,1),c,b,1,0,0,"")||this.b(' <span class="icon-sm icon-close dark-hover remove-contact-icon js-remove-contact"/> ');this.b(" ");this.s(this.f("avatarUrl",c,b,1),c,b,0,216,292,"{{ }}")&&(this.rs(c,b,function(b,
d,f){f.b(' <img src="');f.b(f.v(f.f("avatarUrl",b,d,0)));f.b('" class="js-avatarUrl avatar" name="');f.b(f.v(f.f("avatarUrl",b,d,0)));f.b('"> ')}),c.pop());this.b(" ");this.s(this.f("avatarUrl",c,b,1),c,b,1,0,0,"")||this.b(' <span class="member js-avatarUrl" name=""> <span class="icon-lg icon-member"/> </span> ');this.b(' <span class="name"> ');this.s(this.f("fullName",c,b,1),c,b,0,457,525,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b('<h3 class="js-fullName bottom" name="');f.b(f.v(f.f("fullName",b,
d,0)));f.b('">');f.b(f.v(f.f("fullName",b,d,0)));f.b("</h3>")}),c.pop());this.b(' <p class="js-email bottom" name="');this.b(this.v(this.f("email",c,b,0)));this.b('">');this.b(this.v(this.f("email",c,b,0)));this.b("</p> </span> </div> ");return this.fl()},search_instant_results:function(c,b,d){this.b(d||"");this.b('<div class="search-results-section-header-options"> <a class="quiet dark-hover search-results-section-header-open-link js-open-search-page" href="#" style="margin-left: 8px;"><span class="icon-sm icon-open"></span>Open in a Page</a> </div> <div class="search-results-section js-search-suggestions clearfix hide"> <div class="search-results-section-header"> <h4>Did you mean\u2026</h4> </div> <div class="js-search-suggestions-list"> </div> </div> <div class="js-search-results clearfix relative hide"> <div class="search-results-section js-card-results clearfix hide"> <div class="search-results-section-header clearfix"> <h4>Cards</h4> </div> <div class="js-list"></div> <span href="#" class="search-loading hide js-loading-cards"><span class="spinner small"></span> Loading\u2026</span> <a href="#" class="quiet-button quiet-button-large hide js-show-more-cards">Show more cards\u2026</a> </div> <div class="search-results-section js-board-results clearfix hide"> <div class="search-results-section-header"> <h4>Boards</h4> </div> <ul class="sidebar-boards-list board-results-list js-list"></ul> <a href="#" class="quiet-button quiet-button-large hide js-show-more-boards">Show more boards\u2026</a> </div> <div class="search-results-section js-member-results clearfix hide"> <div class="search-results-section-header"> <h4>Members</h4> </div> <ul class="js-list pop-over-member-list"></ul> <a href="#" class="quiet-button quiet-button-large hide js-show-more-members">Show more members\u2026</a> </div> <div class="search-results-section js-org-results clearfix hide"> <div class="search-results-section-header"> <h4>Organizations</h4> </div> <ul class="org-list js-list"></ul> <a href="#" class="quiet-button quiet-button-large hide js-show-more-orgs">Show more organizations\u2026</a> </div> </div> <div class="search-tips hide js-no-input"> <p class="search-tips-helper quiet js-search-tips-helper"> You can use search operators like @member, #label, is:archived, and has:attachments to refine your search. <a href="#" class="js-show-search-tips">Learn more\u2026</a> </p> <div class="search-tips-list js-search-tips-list hide"> <p class="quiet"> Search operators refine your search to help you find specific cards and create highly tailored lists. Trello will suggest operators for you as you type, but here\u2019s a full list to keep in mind. You can add \u201c-\u201d to any operator to do a negative search, such as -has:members to search for cards without any members assigned. </p> <dl> <dt>@name</dt> <dd> Returns cards assigned to a member. If you start typing @, Trello will suggest members for you. <strong>member:</strong> also works. <strong>@me</strong> will include only your cards. </dd> <dt>#label</dt> <dd> Returns labeled cards. Trello will suggest labels for you if you start typing # and the label you are looking for. <strong>label:</strong> also works. </dd> <dt>board:id</dt> <dd> Returns cards within a specific board. If you start typing <strong>board:</strong>, Trello will suggest boards for you. You can search by board name, too, such as \u201cboard:trello\u201d to search only cards on boards with trello in the board name. </dd> <dt>list:name</dt> <dd> Returns cards within the list named \u201cname\u201d. Or whatever you type besides \u201cname\u201d. </dd> <dt>has:attachments</dt> <dd> Returns cards with attachments. <strong>has:description</strong>, <strong>has:cover</strong>, <strong>has:members</strong>, and <strong>has:stickers</strong> also work as you would expect. </dd> <dt>due:day</dt> <dd> Returns cards due within 24 hours. <strong>due:week</strong>, <strong>due:month</strong>, and <strong>due:overdue</strong> also work as expected. You can search for a specific day range. For example, adding <strong>due:14</strong> to search will include cards due in the next 14 days. </dd> <dt>created:day</dt> <dd> Returns cards created in the last 24 hours. <strong>created:week</strong> and <strong>created:month</strong> also work as expected. You can search for a specific day range. For example, adding <strong>created:14</strong> to the search will include cards created in the last 14 days. </dd> <dt>edited:day</dt> <dd> Returns cards edited in the last 24 hours. <strong>edited:week</strong> and <strong>edited:month</strong> also work as expected. You can search for a specific day range. For example, adding <strong>edited:21</strong> to the search will include cards edited in the last 21 days. </dd> <dt>description:, checklist:, comment:, and name:</dt> <dd> Returns cards matching the text of card descriptions, checklists, comments, or names. For example, comment:"FIX IT" will return cards with \u201cFIX IT\u201d in a comment. </dd> <dt>is:open and is:archived</dt> <dd> Returns cards that are either open or archived. Trello returns both types by default. </dd> <dt>is:starred</dt> <dd>Only include cards on starred boards.</dd> </dl> </div> </div> <p class="search-warning hide js-no-results">No results.</p> <p class="search-warning hide js-searching"><span class="spinner small inline-block"></span> Searching\u2026</p> <p class="search-warning hide js-err">Your search produced an error.</p> ');
return this.fl()},search_results_card:function(c,b,d){this.b(d||"");this.b('<div class="search-result-card-container js-list-card-container"> <div class="search-result-card-container-fade"></div> </div> <div class="search-result-card-details"> <p class="bottom"> <a class="search-result-card-details-name" href="');this.b(this.v(this.f("url",c,b,0)));this.b('">');this.b(this.v(this.f("name",c,b,0)));this.b("</a> </p> <p class='bottom quiet'>in <strong>");this.b(this.v(this.f("listName",c,b,0)));this.b(this.v(this.f("archived",
c,b,0)));this.b("</strong> on <strong>");this.b(this.v(this.f("boardName",c,b,0)));this.b('</strong><span class="icon-sm icon-');this.b(this.v(this.f("permLevel",c,b,0)));this.b('"/></p> </div> <a class="search-result-card-hover-target" href="');this.b(this.v(this.f("url",c,b,0)));this.b('"></a> ');return this.fl()},search_suggetion:function(c,b,d){this.b(d||"");this.b('<a href="#" class="search-suggestion js-select-suggestion" data-suggestionphrase="');this.b(this.v(this.f("phrase",c,b,0)));this.b('"> <span class="search-suggestion-string">');
this.b(this.v(this.f("phrase",c,b,0)));this.b('</span> <span class="search-suggestion-desc">');this.b(this.v(this.f("description",c,b,0)));this.b("</span> </a> ");return this.fl()},search_suggetion_board:function(c,b,d){this.b(d||"");this.b('<a href="#" class="search-suggestion search-suggestion-board js-select-suggestion" data-suggestionphrase="');this.b(this.v(this.f("phrase",c,b,0)));this.b('"> <span class="search-suggestion-board-image"></span> <span class="search-suggestion-dec">Cards on the board <strong>');
this.b(this.v(this.f("name",c,b,0)));this.b("</strong></span> </a> ");return this.fl()},search_suggetion_member:function(c,b,d){this.b(d||"");this.b('<a href="#" class="search-suggestion search-suggestion-member js-select-suggestion" data-suggestionphrase="');this.b(this.v(this.f("phrase",c,b,0)));this.b('"> <span class="member search-suggestion-member-av">');this.b(this.rp("member",c,b,""));this.b("</span> <span>Cards assigned to <strong>");this.b(this.v(this.f("fullName",c,b,0)));this.b("</strong></span> </a> ");
return this.fl()},select_emoji:function(c,b,d){this.b(d||"");this.b('<li class = "item"> <a href="#" class="name js-select-emoji" title=');this.b(this.v(this.f("name",c,b,0)));this.b('> <img src= "');this.b(this.v(this.f("image",c,b,0)));this.b('" class="emoji"> <span class="emoji-name" name=');this.b(this.v(this.f("name",c,b,0)));this.b("> ");this.b(this.v(this.f("name",c,b,0)));this.b(" </span> </a> </li> ");return this.fl()},select_member:function(c,b,d){this.b(d=d||"");this.b('<li class="item');
this.s(this.f("isActive",c,b,1),c,b,0,28,35,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" active")}),c.pop());this.s(this.f("matchesFilter",c,b,1),c,b,0,66,81,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" matches-filter")}),c.pop());this.s(this.f("exceedsLimit",c,b,1),c,b,0,116,130,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" exceeds-limit")}),c.pop());this.s(this.f("unconfirmed",c,b,1),c,b,0,163,175,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" unconfirmed")}),c.pop());this.s(this.f("isKnownMember",
c,b,1),c,b,0,209,223,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" js-autoselect")}),c.pop());this.b(' js-member-item"> <a href="');this.s(this.f("url",c,b,1),c,b,0,276,283,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(f.v(f.f("url",b,d,0)))}),c.pop());this.s(this.f("url",c,b,1),c,b,1,0,0,"")||this.b("#");this.b('" class="name js-select-member ');this.s(this.f("extraText",c,b,1),c,b,0,353,363,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("multi-line")}),c.pop());this.b('" idMember="');this.b(this.v(this.f("id",
c,b,0)));this.b('" title="');this.b(this.v(this.f("fullName",c,b,0)));this.s(this.f("username",c,b,1),c,b,0,429,444,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" (");f.b(f.v(f.f("username",b,d,0)));f.b(")")}),c.pop());this.b('"> <span class="member js-member');this.s(this.f("isVirtual",c,b,1),c,b,0,503,511,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" virtual")}),c.pop());this.b('">');this.b(this.rp("member",c,b,""));this.b('</span> <span class="full-name" name="');this.b(this.v(this.f("fullName",c,
b,0)));this.s(this.f("username",c,b,1),c,b,0,602,617,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" (");f.b(f.v(f.f("username",b,d,0)));f.b(")")}),c.pop());this.b('"> ');this.b(this.v(this.f("fullName",c,b,0)));this.b(" ");this.s(this.f("username",c,b,1),c,b,0,659,704,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' (<span class="username">');f.b(f.v(f.f("username",b,d,0)));f.b("</span>)")}),c.pop());this.b(" </span> ");this.s(this.f("extraText",c,b,1),c,b,0,740,791,"{{ }}")&&(this.rs(c,b,function(b,d,
f){f.b('<div class="extra-text quiet">(');f.b(f.v(f.f("extraText",b,d,0)));f.b(")</div>")}),c.pop());this.b(' <span class="icon-sm icon-check checked-icon"/> <span class="icon-sm icon-rightarrow light option js-open-option"/> ');this.s(this.f("unconfirmed",c,b,1),c,b,0,938,1045,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div> <span class="quiet sub-name">Unconfirmed User</span> <span class="js-insert-tooltip"></span> </div> ')}),c.pop());this.b(" </a> </li> ");return this.fl()},select_org_to_upgrade:function(c,
b,d){this.b(d=d||"");this.b('<div class="select-org-to-upgrade"> <h2 class="select-org-to-upgrade-header">Select an organization to upgrade to Business Class.</h2> <ul class="select-org-to-upgrade-list"> ');this.s(this.f("orgs",c,b,1),c,b,0,184,1044,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <li class="select-org-to-upgrade-list-item"> <a href="');f.b(f.v(f.f("orgUrl",b,d,0)));f.b('" class="select-org-to-upgrade-list-item-link');f.s(f.f("isJPS",b,d,1),b,d,0,304,325,"{{ }}")&&(f.rs(b,d,function(b,
d,e){e.b(" disabled js-disabled")}),b.pop());f.b('"> <img class="select-org-to-upgrade-list-item-link-logo" ');f.s(f.f("logoHash",b,d,1),b,d,0,406,477,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(' src="');e.b(e.v(e.f("__logoDomain",b,d,0)));e.b("/");e.b(e.v(e.f("logoHash",b,d,0)));e.b('/30.png" alt="');e.b(e.v(e.f("displayName",b,d,0)));e.b(' logo" ')}),b.pop());f.b(" ");f.s(f.f("logoHash",b,d,1),b,d,1,0,0,"")||f.b(' src="https://d78fikflryjgj.cloudfront.net/images/b8e08be89ac9461c0a1d543016926792/org-logo-large.png" alt="Default organization logo" ');
f.b(' > <span class="select-org-to-upgrade-list-item-link-name"> ');f.b(f.v(f.f("displayName",b,d,0)));f.b(' </span> <span class="select-org-to-upgrade-list-item-link-details quiet"> ');f.b(f.v(f.f("memberCount",b,d,0)));f.b(". ");f.s(f.f("isPremium",b,d,1),b,d,0,833,948,"{{ }}")&&(f.rs(b,d,function(b,d,e){e.b(" ");e.s(e.f("isJPS",b,d,1),b,d,0,844,891,"{{ }}")&&(e.rs(b,d,function(b,d,e){e.b(" This organization already has Business Class. ")}),b.pop());e.b(" ");e.s(e.f("isJPS",b,d,1),b,d,1,0,0,"")||
e.b(" An update is available! ");e.b(" ")}),b.pop());f.b(" ");f.s(f.f("isAdmin",b,d,1),b,d,1,0,0,"")||f.b(" You need to be an admin to upgrade. ");f.b(" </span> </a> </li> ")}),c.pop());this.b(" </ul> ");this.s(this.f("orgs",c,b,1),c,b,1,0,0,"")||this.b(' <p style="margin: 24px 0;">You don\u2019t have any organizations. <a href="#" class="js-create-org">Click here to create one.</a></p> ');this.b(" </div> ");return this.fl()},shortcuts:function(c,b,d){this.b(d||"");this.b('<div class="window-header clearfix"> <span class="window-header-icon icon-lg icon-info"/> <h2 class="window-title"> Keyboard Shortcuts </h2> </div> <div class="manual-shortcut-list markeddown"> <hr> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">&larr;</span> <span class="manual-shortcut-list-item-keys-key">&darr; / J</span> <span class="manual-shortcut-list-item-keys-key">&uarr; / K</span> <span class="manual-shortcut-list-item-keys-key">&rarr;</span> </div> <h3 class="manual-shortcut-list-item-header">Navigate Cards</h3> <p> Pressing the arrow keys will select adjacent cards on a board. Pressing \u201cj\u201d will select the card below the current card. Pressing \u201ck\u201d will select the card above the current card. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">B</span> </div> <h3 class="manual-shortcut-list-item-header">Open Header Boards Menu</h3> <p> Pressing \u201cb\u201d opens the boards menu in the header. You can search for boards and navigate boards with the up and down arrows. Pressing enter with a board selected will open it. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">/</span> </div> <h3 class="manual-shortcut-list-item-header">Focus Search Box</h3> <p> Pressing \u201c/\u201d puts the cursor in the search box in the header. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">C</span> </div> <h3 class="manual-shortcut-list-item-header">Archive Card</h3> <p> Pressing \u201cc\u201d will archive a card. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">D</span> </div> <h3 class="manual-shortcut-list-item-header">Due Date</h3> <p> Pressing \u201cd\u201d will open the due date picker for a card. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">E</span> </div> <h3 class="manual-shortcut-list-item-header">Quick Edit Mode</h3> <p> If hovering over a card, pressing \u201ce\u201d will open quick edit mode, which lets you quickly edit the title and other card attributes. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">ESC</span> </div> <h3 class="manual-shortcut-list-item-header">Close Menu / Cancel Editing</h3> <p> Pressing \u201cesc\u201d will close an open dialog window or pop-over or cancel edits and comments you are composing. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">ENTER</span> </div> <h3 class="manual-shortcut-list-item-header">Open Card</h3> <p> Pressing \u201center\u201d will open the currently selected card. Pressing \u201cshift + enter\u201d while submitting a card will open it immediately after creating it. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">F</span> </div> <h3 class="manual-shortcut-list-item-header">Open Card Filter Menu</h3> <p> Use \u201cf\u201d to open the card filter menu. The search by title input is automatically focused. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">L</span> </div> <h3 class="manual-shortcut-list-item-header">Label</h3> <p> Pressing \u201cl\u201d opens a pop-over of the available labels. Clicking a label will add or remove it from the card. </p> <p> Pressing one of the following number keys, will apply or remove that label. </p> <table> <thead> <tr> <th>Key</th> <th>Label Color</th> </tr> </thead> <tbody> <tr> <td>1</td> <td>Green</td> </tr> <tr> <td>2</td> <td>Yellow</td> </tr> <tr> <td>3</td> <td>Orange</td> </tr> <tr> <td>4</td> <td>Red</td> </tr> <tr> <td>5</td> <td>Purple</td> </tr> <tr> <td>6</td> <td>Blue</td> </tr> </tbody> </table> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">M</span> </div> <h3 class="manual-shortcut-list-item-header">Add / Remove Members</h3> <p> Pressing \u201cm\u201d opens the add / remove members menu. Clicking a member\u2019s avatar will assign or unassign that person. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">N</span> </div> <h3 class="manual-shortcut-list-item-header">Insert New Card</h3> <p> Pressing \u201cn\u201d opens a pop-over that allows you to add a card after the currently selected card. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">&lt;</span> <span class="manual-shortcut-list-item-keys-key">&gt;</span> </div> <h3 class="manual-shortcut-list-item-header">Move Card to Adjacent List</h3> <p> Pressing the left or right angle brackets (&lt; and &gt;) will move a card to the adjacent left or right list. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">Q</span> </div> <h3 class="manual-shortcut-list-item-header">My Cards Filter</h3> <p> Pressing the \u201cq\u201d key toggles the \u201ccards assigned to me\u201d filter. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">S</span> </div> <h3 class="manual-shortcut-list-item-header">Subscribe</h3> <p> Pressing \u201cs\u201d will subscribe you to, or unsubscribe you from, a card. Subscribing to a card will give you notifications for most actions to that card. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">SPACE</span> </div> <h3 class="manual-shortcut-list-item-header">Assign Self</h3> <p> Pressing \u201cspace\u201d will assign (or unassign) yourself to a card. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">T</span> </div> <h3 class="manual-shortcut-list-item-header">Edit Title</h3> <p> If viewing a card, pressing \u201ct\u201d will edit the title. If hovering over a card, pressing \u201ct\u201d will open the card and edit the title. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">V</span> </div> <h3 class="manual-shortcut-list-item-header">Vote</h3> <p> Pressing \u201cv\u201d will add (or remove) your vote on a card. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">W</span> </div> <h3 class="manual-shortcut-list-item-header">Toggle Board Sidebar</h3> <p> Pressing \u201cw\u201d will collapse or expand the board sidebar. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">X</span> </div> <h3 class="manual-shortcut-list-item-header">Clear All Filters</h3> <p> Use \u201cx\u201d to clear all active card filters. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">?</span> </div> <h3 class="manual-shortcut-list-item-header">Open Shortcuts Page</h3> <p> Pressing \u201c?\u201d will open the shortcuts page. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">@</span> </div> <h3 class="manual-shortcut-list-item-header">Autocomplete Members</h3> <p> When writing a comment, you can type \u201c@\u201d plus a member\u2019s name, username, or intials and get a list of matching members. You can navigate that list with the up and down arrows. Pressing enter or tab with a member selected will mention that user in the comment. The mentioned user will get a notification once submitted. </p> <p> When adding a new card, you can use the same method to assign members to cards before submitting them. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">#</span> </div> <h3 class="manual-shortcut-list-item-header">Autocomplete Labels</h3> <p> When adding a new card, you can type \u201c#\u201d plus the label\u2019s color or title and get a list of matching labels. You can use the up and down arrows to navigate the resulting list. Pressing enter or tab will add the label to the composed card. The labels will be added to the card when you submit. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">^</span> </div> <h3 class="manual-shortcut-list-item-header">Autocomplete Position</h3> <p> When adding a new card, you can type \u201c^\u201d plus a list name or position in a list. You can also type \u201ctop\u201d or \u201cbottom\u201d to add to the top or bottom of the current list. You can use the up and down arrows to navigate the resulting list. Pressing enter or tab will automatically change the position of the composed card. </p> </div> </div> ');
return this.fl()},sidebar_boards_list:function(c,b,d){this.b(d||"");this.b('<div class="boards-drawer-header js-drawer-header"> <h3>Boards</h3> </div> <div class="board-drawer-content fancy-scrollbar"> <input type="text" class="js-search-boards" placeholder="Find boards by name\u2026"> <div class="js-board-results-container hide"> <ul class="sidebar-boards-list js-board-results"></ul> </div> <div class="js-boards-list-container"> <div class="starred-sidebar-boards-list js-starred-boards"></div> <div class="js-recent-boards"></div> <div class="js-all-boards"></div> <a class="quiet-button hide js-pin" href="#"> Always keep this menu open. </a> <a class="quiet-button hide js-unpin" href="#"> Don\u2019t keep this menu open. </a> <a class="quiet-button js-open-closed-boards" href="#"> See closed boards\u2026 </a> </div> </div> ');
return this.fl()},spinner_css:function(c,b,d){this.b(d||"");this.b('<span class="spinner-css"> <span class="bar"/> <span class="bar"/> <span class="bar"/> </span> ');return this.fl()},sticker_on_card:function(c,b,d){this.b(d=d||"");this.b('<img class="sticker-image" src="');this.b(this.v(this.f("url",c,b,0)));this.b('" style="-webkit-transform: rotate(');this.b(this.v(this.f("rotate",c,b,0)));this.b("deg);transform: rotate(");this.b(this.v(this.f("rotate",c,b,0)));this.b('deg);" alt="');this.b(this.v(this.f("image",
c,b,0)));this.b('"> ');this.s(this.f("showEditControls",c,b,1),c,b,0,162,516,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="sticker-controls"> <span class="sticker-control-btn rotate-btn js-rotate-sticker"> \u21bb <span class="text">Rotate</span> </span> <span class="sticker-control-btn move-btn js-move-sticker"> \u2629 <span class="text">Move</span> </span> <span class="sticker-control-btn remove-btn js-remove-sticker"> \u2718 <span class="text">Remove</span> </span> </div> ')}),c.pop());
this.b(" ");return this.fl()},sticker_on_promo_page:function(c,b,d){this.b(d||"");this.b('<div class="sticker" style="top: ');this.b(this.v(this.f("top",c,b,0)));this.b("%; left: ");this.b(this.v(this.f("left",c,b,0)));this.b('%;"> <img src="');this.b(this.v(this.f("url",c,b,0)));this.b('" style=" -webkit-transform: scale(');this.b(this.v(this.f("scale",c,b,0)));this.b(") rotate(");this.b(this.v(this.f("rotate",c,b,0)));this.b("deg); transform: scale(");this.b(this.v(this.f("scale",c,b,0)));this.b(") rotate(");
this.b(this.v(this.f("rotate",c,b,0)));this.b('deg); "> </div> ');return this.fl()},sticker_pack_selection_list:function(c,b,d){this.b(d||"");this.b("<h2>");this.b(this.v(this.f("displayName",c,b,0)));this.b('</h2> <div class="sticker-list clearfix js-sticker-list relative"></div> ');return this.fl()},sticker_select:function(c,b,d){this.b(d||"");this.b('<div class="sticker-list clearfix js-standard-sticker-list"></div> <div class="js-premium-stickers"></div> <h2>Custom Stickers</h2> <div class="sticker-list clearfix js-custom-sticker-list"></div> ');
return this.fl()},sticker_select_item:function(c,b,d){this.b(d=d||"");this.s(this.f("pending",c,b,1),c,b,0,12,85,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <img class="sticker-select-image sticker-select-pending" src="');f.b(f.v(f.f("url",b,d,0)));f.b('"> ')}),c.pop());this.b(" ");this.s(this.f("pending",c,b,1),c,b,1,0,0,"")||(this.b(' <img class="sticker-select-image sticker-select-shadow" src="'),this.b(this.v(this.f("url",c,b,0))),this.b('"> <img class="sticker-select-image sticker-select-fixed" src="'),
this.b(this.v(this.f("url",c,b,0))),this.b('"> <img class="sticker-select-image sticker-select-peel" src="'),this.b(this.v(this.f("url",c,b,0))),this.b('"> '));this.b(" ");this.s(this.f("id",c,b,1),c,b,0,341,602,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="sticker-select-option sticker-select-option-delete-button js-delete-sticker" title="Delete this sticker"> <span class="sticker-select-option-icon icon-sm icon-close"></span> <span class="sticker-select-option-text underline">Delete</span> </span> ')}),
c.pop());this.b(" ");this.s(this.f("error",c,b,1),c,b,0,620,724,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="sticker-select-option"> <span class="sticker-select-option-text">');f.b(f.v(f.f("error",b,d,0)));f.b("</span> </span> ")}),c.pop());this.b(" ");this.s(this.f("pending",c,b,1),c,b,0,747,920,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <span class="sticker-select-option"> <span class="spinner small left" style="margin-right: 4px;"></span> <span class="sticker-select-option-text">Uploading\u2026</span> </span> ')}),
c.pop());this.b(" ");return this.fl()},sticker_select_item_upload:function(c,b,d){this.b(d||"");this.b('<form action="/1/member/');this.b(this.v(this.f("id",c,b,0)));this.b('/customStickers" method="post" enctype="multipart/form-data"> <input type="hidden" name="token" value="" /> <input type="hidden" name="format" value="http" /> <div class="sticker-select sticker-select-upload"> <span class="sticker-select-upload-icon icon-lg icon-add"></span> <input type="file" name="file" class="sticker-select-upload-input js-upload-image ');
this.s(this.f("enabled_customStickers",c,b,1),c,b,1,0,0,"")||this.b(" disabled");this.b('" multiple="multiple" accept="image/*"/> </div> </form> ');return this.fl()},surface_base:function(c,b,d){this.b(d||"");this.b('<div id="boards-drawer"></div> ');return this.fl()},sync_error:function(c,b,d){this.b(d||"");this.b('You have been disconnected from the Trello Server for too long.<br /> <a href="#" onclick="window.location.reload();">Reload now</a> ');return this.fl()},take_photo:function(c,b,d){this.b(d=
d||"");this.b('<video class="video');this.s(this.f("connected",c,b,1),c,b,1,0,0,"")||this.b(" hide");this.b('" autoplay style="width:100%"></video> ');this.s(this.f("error",c,b,1),c,b,0,101,133,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <p class="error">');f.b(f.v(f.f("error",b,d,0)));f.b("</p> ")}),c.pop());this.b(" ");this.s(this.f("connected",c,b,1),c,b,0,158,216,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <button class="primary wide js-snap">Snap Photo</button> ')}),c.pop());this.b(" ");this.s(this.f("connected",
c,b,1),c,b,1,0,0,"")||(this.b(" "),this.s(this.f("error",c,b,1),c,b,0,256,302,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" <p>Couldn't find a camera to connect to\u2026</p> ")}),c.pop()),this.b(" "),this.s(this.f("error",c,b,1),c,b,1,0,0,"")||this.b(" <p>Trying to access your computer's camera\u2026 Check the banner at the top of the page.</p> "),this.b(' <p class="bottom"> <a href="#" class="quiet-button js-connect-camera">Try again</a> </p> '));this.b(" ");return this.fl()},text_notification:function(c,
b,d){this.b(d=d||"");this.s(this.f("member",c,b,1),c,b,0,11,27,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.b(f.t(f.f("fullName",b,d,0)));f.b(" ")}),c.pop());this.b(" ");this.s(this.f("entities",c,b,1),c,b,0,52,70,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(" ");f.b(f.rp("text_entity",b,d,""));f.b(" ")}),c.pop());this.b(" ");return this.fl()},"tooltip-content":function(c,b,d){this.b(d||"");this.b('<div class="tooltip-content js-tooltip-content"> <span class="tooltip-close-button icon-sm icon-close js-tooltip-close-button"></span> <p>');
this.b(this.v(this.f("tooltipText",c,b,0)));this.b("</p> </div> ");return this.fl()},tooltip:function(c,b,d){this.b(d||"");this.b('<span class="tooltip-trigger quiet js-tooltip-trigger"><span class="icon-info icon-sm js-tooltip-anchor"></span> ');this.b(this.v(this.f("linkText",c,b,0)));this.b("</span> ");return this.fl()},treat:function(c,b,d){this.b(d=d||"");this.b('<div class="treat-container obscured fade"> ');this.s(this.f("initials",c,b,1),c,b,0,57,105,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b(' <div class="treat-initials">');
f.b(f.v(f.f("initials",b,d,0)));f.b("</div> ")}),c.pop());this.b(" ");this.s(this.f("initials",c,b,1),c,b,1,0,0,"")||(this.b(' <img class="treat-image" src="'),this.b(this.v(this.f("src",c,b,0))),this.b('"> '));this.b(' <p class="food"> Send an email to feed Taco a treat! <span class="arrow"/> </p> </div> ');return this.fl()},upgrade:function(c,b,d){this.b(d=d||"");this.b("Update available!<br /> ");this.s(this.f("stopped",c,b,1),c,b,1,0,0,"")||(this.b("Trello will automatically update itself by reloading in "),
this.b(this.v(this.f("timeInMinutes",c,b,0))),this.b(" minute"),this.s(this.f("plural",c,b,1),c,b,0,127,128,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("s")}),c.pop()),this.b(".<br />"));this.b(" ");this.s(this.f("stopped",c,b,1),c,b,0,171,195,"{{ }}")&&(this.rs(c,b,function(b,d,f){f.b("When you\u2019re ready\u2026<br />")}),c.pop());this.b(' <a class="js-upgrade" href="#">');this.s(this.f("stopped",c,b,1),c,b,1,0,0,"")||this.b("Reload now");this.s(this.f("stopped",c,b,1),c,b,0,285,302,"{{ }}")&&(this.rs(c,
b,function(b,d,f){f.b("Okay, NOW reload.")}),c.pop());this.b("</a> ");this.s(this.f("stopped",c,b,1),c,b,1,0,0,"")||this.b('<a class="js-stop-upgrade" href="#">Wait!</a>');this.b(" ");return this.fl()},woof_header:function(c,b,d){this.b(d||"");this.b('<a class="header-btn header-woof" href="#"> <span class="taco-talk-small-icon"/> <span class="header-btn-text"><span class="left-arrow"></span><span class="js-phrase"></span></span> </a> ');return this.fl()},"promo/landing_base":function(c,b,d){this.b(d||
"");this.b('<div class="promo-wrapper"> <header id="landingHeader" class="landing-header"> <img id="landingLogo" title="Trello logo" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAd0AAACHCAYAAABTX4NLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyMzM5QTlDNDdFRDQxMUUyQjVEN0RERENBMjI0OTM5QiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyMzM5QTlDNTdFRDQxMUUyQjVEN0RERENBMjI0OTM5QiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjIzMzlBOUMyN0VENDExRTJCNUQ3REREQ0EyMjQ5MzlCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjIzMzlBOUMzN0VENDExRTJCNUQ3REREQ0EyMjQ5MzlCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+VLO/cwAAN3lJREFUeNrsXQd8VMXWn90EkGYXEQVFkQ7SA099Ir33YhcVsCAq0kIKJEAIoemzoqJiQaT3FoooorTQe7GB+kRFpZNk937/s3vxy8O03Xvm7tzNHH/HG5HMnKn/c2bOnOMyDENkRy6XS2jSpEmTJrnU6KXPKuDzMPhOcBlwMXAhcHFwBLhElr9+Arwf/AV45tcD7t1mo5x34dMDXBtcClwEXNT8El+W5a8fA+8BrwZ/CjmP6pE2sVWDriZNmjSFBGwJpCaAnzLBNRhaA34SoHZYopw34TMV3DTIIjzg98GDIOdfGnQ16GrSpEmTrdRw0por8FkBjmIo7nfCxg0vNjkkQc4aprV6HUNxO6m9kPN8QR57t57+mjRp0mQr4EbiM58JcImuAY+WIGdpfFKZAJeoJrh3QR9/DbqaNGnSZC8NBzdmLrMrQPImRsClo85p4NLMcj5vlq1BV5MmTZo0SbdyK+MzTELRdCf8CGN5j4KbSJCTnMYqa9DVpEmTJk3yyRBjwZHC8P3MzW1YFIOJa4qirNGSZCSuW5CnQKReBZo0adIkn6Imrq5qCKOjxCrq8egFxoP43ChRzlu1patJkyZNmmTT85LLL8KgGNB96wuS5SypQVeTJk2aNMm0cq8SvHeusoje4laTXEd6QZ4L+nhZkyZNmmSTIXqK/43YJIN+YZCzlw298YcGXU2aNGnSJBFzjUdtqGajlV9uMGFVScjZxQY5DxbkuaCPlzVp0qRJIgHMKuLT0IaqFln8/W7CH0tZNqVpS1eTJk2aNMkycx+2oZaT4BkW5bTjznndpsHNftSWriZNmjRp4rdyx6+ibEG9bKgqBWB2yoKcZI3fY4OccQV9TmhLV5MmTZqkGbnGA/jcJLmaI+CXLMo5CB/Z4Rlnbh7c/IuCPie0patJkyZNEqj++JV0P5poQ1V9AWbnLMhZFZ/HJctIHsvP61mhLV1NmgKiRi99FmEqqxfZdYmFQD97wRlfD7g3Q/dYgabB4Jsl1/E+AHeNxTJeFsHn880vDYSc/9VTQoOuJk0XwZTWQlnhD8hO91vlzP++AVwGfC346gDLPIPPV+Dl4HkA4W91TxcQK3fcyrLCENGSq6F3uQMtytkRcjaXLCcpBVP1rDC18kCS2N89eQuFGSsFLiYYQo5pYiOyqOh46bd1T9U7rbsjVyCkuVsdTMm5Kb/n7SbfYoMSug48GTxLW8HhDrqpn+LTU3I13TcPaTHbgoy0h+8VcmMh075UA3Ie0bMiANAF2NKgpIC7CvmX7Zqs0dfgIQDfLwtyJzSctCbC3EyqmeBa0wRasmRD7ctATyZGgd/d8GKTTD1lw4vqjUv9Nz6fS65m4ZYhLTpalJNSDI6RLOdgyDlBz4oAQPeuNze3x2c6uLjuLkfR8C+frj+qAIDrjSa4VjC/twl/vk7iooqLfxgcS5YvwNfQUzYMADcllZQ9Cv5wh8Rq6GlQlS1DW/xoQU5aNwck7+tbwVGQUyuWWSjX47Q739h0D0B5Dn4spLvKcTQS43dq/TMNXpYMevcKf1Luu4U/tiw90j8E3iT895k7wEcAKmcDLLeE8F9llBb+Jxf0LWPyxT8rL+THs5VJpChQQIMn0d4+6KNv9LR1PPWWDLhEQ6wArkkpkgHXQ32hATcAS/euNzYVxmefKOC5Dx1OdG9YeX2/KCmbedTE1TH4JOXzrxMY/25+Sa4zWRS/EubPlPLrSvAVQr43pWpE/dF/48Cm7+tp61QrdwVlEqK4wtdKrIb8Au7ZMrSlYUHORqZCLJNSIGO0nhUBWLoA40c04Dqe6IQixtS+uQG3QwCAS3S5yZqyJ7I63kO/0ob4NMDXo7vEWQQUTJAMuBfAfdMsAG7dlBVu/PIrkruCrk0S9IzInnJxKDF6+KaRZqezrKwhj+vlI4X6gOcBfAvrrnAO1R27ojKWWz/JyzkRgLvfombwCLieZDkfh5zn9awIEHQNQ9Smk2fNjuerGr36Nau3btSE1S4srDu1PiON24Pf0tuTo2iikHslQs5Z4y0qBnSaIttb+Y206Jbr9HTImXI7Xr5Wd09YKVdevmM0o4zkYzRNQvRqMGHVC5sGNftLd4XqVu7yllgVbSRWQc5IvdKiW1l0SjKGCn+wF1n0HXionhFBgq4w9AsGTTnSzboLbCG6A9egqzDVGbs80vBbuTIpaWt0q90W5Sxn+MNSyqS+kFMH57Fg6ere0ZSTqVtGd4ItpJ2p1F8LdAdfTWIN9OQuiUHOsULu87opW4e1WqknhBVLV2jQ1ZTj3Cih+8AWOqu7QGErN3k5PW8bKVnp6g0wy7AoZ0N87pco5zFhMQa0Bl2hT5c15aqO6ehk8uk34X/TrEndlRAv5Po2pGwd1nqLNcBd5oKcL0vuiKcgp56r1kE3ONQtfXkR0aFqKVGtdElxZdFCtgdqNvDPibMZYudPp8SivcfFb2fSgyrH7XKJFpWuFXeVv0qULllEFI6wP1zv2QyP+P6Pc2LNod/Fxh/+VGne6Ahl8mnC5sHNvbobVLVyl1E0sf4Sq9jHZEWThRslUc4PALhL9IxgAN1gjperXV9CjG9fRZQoEtqMgeWvFqLuTVeIjtWvF4MX7ROHfjsTGKK4XWJM20oiqtyVIR+gqujT1pWvE9O3/STe/Op7VUzd4wVgbdDRHnX4D8KfQu0i/wr+CUxa0BnzS4vlosMTeYfeA+4MppRpweidX4An6e1JYRsXSpFE5ZOUrce3DWt9wUohtZOXFYWcYyV2A62HF/VsCJGlS3ZgXPPbQw64WenqYoXE4Ma3ij6zdgb0ez1qlVECcP9HXa1dBhbvb2L/cRWcA41tYbQG/gBTeyjF2WGTKZTfd5uHtAjmLu1P00qZXH9cKuXkHQTuJ/Kf2WgtuFOQdWuygWqPWfZvoG5HiVVM2hbTegODZkCAWFainE9BzhN6RnBZugGC7pUAuBuvUC/2fGVYikUiXOJCZv5P6tpWKaXkYN15y1Vi/y+nQi4HAGFfvXGpc/FjFwfOebojSwVvB6dtGdLiG4n9RFbyc+irjfi+n4dlRE5TFPwgaYsGXJUBl04uZD4RIqVvBIOctInJfDM7A4A7X88IVks3sIKKRqobn76Q2y3OG/kHXVIeVHwydVURhRzcDPEYHSaAGztszu/bMrRFrK0oP6TFtHopqd/ix6ng2y/533QM8zGBMuT6TW9JqpNBd6T1pK0qOlaOacPgtW4kCH8CERlE87S/ngvclm6Ad7pGprqhNg1veBgOrsx0ocpTLgDESQBJM+G/0yHN3CkezeVC1F9fob8oxy8lNCAnHLob3ok/P6a3IYdYuUlLi2D5yQyj+Pq22DbrGOSsBDn7SpTzGcj5q54R7JZugKDrUfcdvxeyGYbb8YNlGB6lLHAABg36+HopK94R/kD9XcENhLDdaT0QejWE/UXHLetNLjDU6KXPKhIWgKuAbxH+fMhXZ1HUyCGNrDu6X//B5CPg7V8PuPc7Zdaf37qTFY2N2jmMSc5xQl4c6AXbY9vM0tCpAuji76saxcof+D8MHh4r2o4tQ1uS8xDdR46vm7KCcuHWBVc2Nyi6W6I8o4XMTTZd/H/Qh5Mm/2lafjQfacOQpSF9DZ6rl710kKUNvxWY0j+2FhaceVAW5WD+ErwQvAggHBILq1bS0mvwiZNYxeMAs9MMcv7b7HcZRE5TT+kZLgl0Az7FVBnTjMDkUxagDaF8oLC0oS3p6cwakwOiumNXUKSrZImg+2JadEsd9kUSNZy0hgJFPI3100fwec0S2HU02Ys66DnVa6Q8bXixiY1j6QuEcYWkwqdsj237mXXAXUKBMGQ6eQ2AnP/VM12WpRvona7SmGuERVBLI4hxcVgLHxTy3j5+khbdaoNe8lLAlsCI7vYHCrl3+6SMNTb5S9T7CID3W/lW7pLb8HlGUvFHBV8IRZlOXksBuB/aPbfMUxPCKVeWbdDz9YB7M526XhizDCkMBr7z5bAApbCNz1ln7HIXWjZAUvHnhE45Jgtw6R7/dfD1Nld9F3gT6m8C4N0ledmlSFQGn9we19ZyCMVao5fIdPKi06u+dgyqCbJtwfcJ/xXFVTn8PQocQu/rKcnCbIDwTqesGcY7XZUx1whIPpWPl8M2+5MhKB9pJUmlT9w6rJX2EmakqImrKe3gFMzH7iEUg46zV0KWOhsHNv1JRgV3jF4SZfgdBGXQBzvi2i5j2hqeFfKcvAZDzh8lK2+ERY9iPsXnsx1F6NdMjsfvp+FLytEcKGFKh0916+1DkyIkK0vJcXMxauIDXHKS2wTuroA4ZGG/KbH8FInzkiWEIhQDCp8XI0lOumueIhlwo0yrdYoFxYGcN2eCv0Z5tRwJuhe9kTWHB6tMdZKXYZEY9/6/pxgrj4CVqxNrcwHuhNVR6NYN4Epyhiso7gC5GvFbuYvboPB7JAn9HKxHphCKxmDw1RJkPA/uCzmlbCAAxwgwJXX4ClydqVh6skjXDs+puob47nSV9qQywic9cBgeLxvygqYfkK2lFyRqMGFVI6hwy/Hj5QqK97TwPwnjAdxRi90S70gX7YhvN4NJzhsg5wuS5EyAnIclnZZcBWOA3vs2lVA83b//B3XQddWzGwc2VWrTdOeGoYGwAzb2/LOqFqvpu2yE0fjUHrOsDAS8T5IFNHjbsNaO9XJUDHDJElmqKOASdYaMkYz7xQPgOyRMy1OGPwEGl5zDwcUkyLnNkBRjGmBIR8gbJAFuViKP83GqTVR37tZhgKy0pRsG7Qh2XNRu07NCjmfo59tiWi/ScMkAuONXlcMuvBx8pUJHypdyCXADjvbWHLW4sODJZZsdRe+Mb3eUSU6K491HgowUaa435GRXWKMmrK6AcVoPrmjTvBiEOu9SaT2xei+rG5FKey+raeUuLY4WyYpwE63h0jrVH7/yOqweysp0owPErSb894NWieZkeQnyUfjPyYzlJQk54R4nAXC3SjgtqYC5tDYEc2mI8Ec1Uxt0NWmyQYnoJXJ4h2eRFm2LbcMWCMN8O0jHq+QhSckKrgNT9CzKpEFhCunei54sbHHyo/1sALcYPouFvKdc3FTBsvU4chEsZkNGuEcKf9pn5/D2LM9ZIGc9Iee5FsW8TpAAuGXwWR0i5a0t6i+7aVCzoypMUv1O10GWru9ON0ws3VpJS91oyfOSih/BUQjAlkCHnFToDq5MPn7lOH7nFXxfAviedfL41B+3sjCm2zwheI5sbSKOVHaDTKWKm5IAuPsYyxsrqQ+fhJysc7fB+FVXYC6RP0C5EM0LukZ9QoYyEawwOW7x4eOuE2A7DEXZ0uWGctRO/DO3LAfN2B7bZpvVQhpOWlMTCs5ucBK4TD6d3UqBR4N34vedYh3mpOBNBre46L7nkH+KWWlzjZGLrsVKGSThanGP4Y8pzkKQsznKaypBzvcBuKuZT0sKYVxmg+8I8dzoC1kKKw26weGCql6/AbZDqMlW9AEFt/VnJPSSB5zIALjkXUmB9YO916NYvZ+gHJcTAbfeuFRKMfeYxCpOmVZHL+F32uGivyz+fqzgjx1NE7PvruHtOZN6j5IwJr+aVj43UfaxZgpM6xvAD6qwvhhjL6utt4swOV4Oh3GpNXrJbWhKCwlFf7w9rq3lIzyMPznSWM0oUwfcE/ypowA3JbWb5ETtdGTdb8vQFj+b9dGTjlJMZf8ctPWYuPAGYUhx6puya0SHr7gKg5wdIWeUBDkHQs4TnAXWH5f6AGR9XqHpHQ+Zpm0e0iJdSdANPMuQukp9wFmGFAa2cMgyhBY8KfgT3ZMlkchU1mVM5QyTBbpRE1eTYxcpLvWF/66Mjs7OmNbe9+BvwJvB2zYObJqvO7q6KSsaYH7JyiRDDkQD04a2fDlLfSVQH+f9qRWFK55x3LNaj2yJNgC4LiHnXnItKazMpyU1sM7fUWzrKW+uycRQCsGbTzdM8tAqC2tOiUSSC91B2VCEeFxC0e/uiGv7LVM/U7Qgjig/NaMmrP7XxkFNWSwdlEWe3n18/Wfk26M4Hb+31rQwP4Es2Wa0qTt2xc0okxLFF5UwNgT6XdOiWy6/pJ+7MitfQXmsA8xIaektod0vwnr8g7E88lbmjitMVt/TkJNtZ6mXklrUXEPFFNyChkO+nVuGtpgXBpauungQqKWr7vFyGFi6htFD+BOTc1u5bEeiAKYNDSas+gg/PsxQHN0jWQJdet+IzwCMfa8gNrLCpkVMPB5lTcV39KZBzX7JArj0/IkCichIz/cbuB0Ad+MlIB8peNMtfos6fglyXZH1yB2ghRIFTOMqrHriQrchx8odt3tEh/3Mi/wl/KuKojsQ+THNrZeygkJQ0inUHvAF8/+VMJmUW0oiQdHXSpp/dqX5d4pkUUxpM6aTJfJRoAQW1I8Htgxt+UOQlm4Bjr2srMUeFne6Mu7N3tvBFOUnCyUygW4rC2BLbxqHC/9zB44gCLR5UASwR1E2beAvZWZmkiJHQFxDEuA22Rrdalc2ivATzBvzZ0GCGSk0jzC3m95qP7ub0XoEPSQByL7jVFZ9ylTKis7m9ZHq1F1IypKFPqC9iLzA54OXpA1tmZk/0A0WFMKAwjRjbcip5qjFFMv2X8zFkvcrf3xVw+DKH3prg/Err940uHm+nVTw90m7jocM/QX/PaMwtXeKq9sck52CesjIF+sH3GH/BNw6yctLod5k5vpmBbnYEwR/VKeXdyd02Mtm5SYsjIScwyWM0fOQ8xwb2IxdURlyfsAsI2UIo4Qoa4T/+uBaB2x1ZYXfM5/4GPplEr6vpUW3zMgVdAM/YnWpe7wcNmEgHR8c42kJZX68M77dNxIUL86H/LXMTSNXqj9+Jd1vUqD9CfiWtmFdtLJiiedCf+YEuCYR4HJGIvvDtCwCBLMFVdELDzC3/SfBHrfZd61wG7OcS3cndFzIB7jLr4eciwVPgJKLRI6B96RFt9pq1kHg+6FwFt0EJtDtA/l7oC27eR2pVDZdw+F42cFmuBle70EJvZEiqZ+rMpZ2Q56AO24lWQnk7WlbcHavxyOjWHLUarV1WOtsAbdO8rI66FzuN8DTUV8w72BHCn4v+oEAs1N8Vu4CupPntnLJeYotHWCdsctLYCEuk6AYPLnVBFwiANZHqIue8r3qwC2QrgbWQ/4oRkcqde8bw8aRyjCc7EhFDlQlmMtczBxaL2tvc95xXpEz2KaSA89Q1EdPVmyLmOPxeGUsVzqqbLstpvXGXPTZFAlA93qgv1AtYUF1g/9Y/fM9CR1Zn4gZfk//ssxyToSch1gAN3m5y/RUrs0s4/tbh7Walk2HvCn8J0FFHLgHkmPWa6yWbrg8tTEUboZTMdfw329wU4pEeeszFpctyNQbl0p33HQHdoedY+H1emUolmRpdgXg5pjNpfaYZXTMzh2daA3qDOb+lDupgZfTejQVA1LCYpjlpOPvJMaVMhj/asMsI3kB98/ufwCIPXWSl1FShqrCmdQkkg96VD9fdr6lq34/Z081Ri6iY6e7mYv9atfw9usldjNnoP8z/wO2KankuDMYdSTaad3+fVri9cqYlA9vi2mzLI+/FiOhSZMCBrMR86uaT9c4acqexE7bmQfrQQlW7jDIeYajIChRVTGduENS0vOdnlCkzuRyWpIhnEu/5uJIFej8EEoHxwiPLEMOdRA3DBlW7gRZ4tZNWXELoInzzeqfWcoui7Kn48c7QzEUHjn3uIO2x7aZkdtfqJW0tBHmLvcTjY2od0kQvxcreI+46R47ntXKHTE/0pSTkyhC2UdMgEvvXd+VoDQOAODuzOPv/CWcSaQs9Ge1dFUOnhi4BqEkeDnO0q2RuJAW56PMxVLkqQUSp0tj5hJ9z4/qjl3RBWVPEXJyCOdJXn4Ll+hVAN+kPACXAnpMlVB3QhBgRu9yezLLMRrW43HmMuldLrdj0guQk2kD8T1na8gs39JtMW3edO4GnfPSE/43uyPQvt28lq6yhlaYWLoBPn1SRN1pIviPyF7ZPaKDV6LU3KDrqTt2+Wsot19o5w57l9GTkwH5qJ3eUVdkrvvL7bFtlwcxH+kul/NdLj1X+w9nw6qOmE/Rp6KZ++vTvYmdWMKRQokqj+mUxCwfvWPvnb+57BgnKtqtJ4NToJh+f/EPeS1dQ2kXJMeDbnDjEnLifh5CzzHek6ykNWEuMi3kqraHHXApfN6D2+Pa5npeXWv0ku6Ysv0kLILnAgaz4fNvxW8+xCxLzN6RndKZW0f3zZz5mOlYk/M+/Q3BnwKxH4Apv1miigr1aTe4P9q09tL/ESk0OR/WFKXqCQuuAIJ1YS72/d0JHU/KkrlO8vIqEizz0AIueSvzFkl31J12xLU9ndtfumP0ktsNOQrSFNS9LYjfG8Js5W4Bz2S1cofPp+sY7ne5r0ExYEkGUitpSTfskNwBVWZvj20bwFMro7hiS4yW10HwJpPJg38H2pTtsmOLSGUoHBc4bCJSCcdFpKK7M+4whpMl93ErEUZk8EcxI5O5J0DvcB6AS2+yKZML99tsSmowLHAwm1cOvcGd3Wrg3pGdmRekQW+HOWMsk9MRy1EwxrQ4ptJLEsbzqcDmtJTEHIESKTGrwKngNVgP+Q7zymrphouFqO6druO68n7m8j6DlbtPch+HFehKOFZO2hHfLjXXzXnUYhc6krxkq0lo0lOo//cgfo9CCHJmEloMwP1CQvuGMpeXDDl/ZyqLPLRvYh/PuLb5ls9U5kqGYCl9a1qxBLSrraQRZcwypLonVRhYug7KMlQtYUEZSHoPc7Gvy5S59phldFd0j3AepZp9QwHhbxb+N9EtvF5vM4P3OJXeReeZANzwH492ktDOaTvj280Pwsolb3HOfLm0CLkdnUhO8iWoy1jkf8Gv8Fi5iyuj2S8yN3nBjrhAx9O4kVkGslB3Z7EZT5mnA9R3lC2IfBe2Qs4TXBVGclmthlA9D214KBCOMXYNcZ/gfQtJi2CBXJl9XstOCi9H/ZG0LbbN5ix/Rk9XNtcctZiiNLVkrIuSCtwP0MvVcQr10rgnSGjrARFkWkgs52cEr+PPzH2jOu+RoFMPZi5yFOQ8x7SeJzKfFJA/QP8g5OB0MCPfhGo74tv9185FqxMeOMnSdRbq3sdc4Pt7EjtlSu7alg7pXHoqE7M9tk22zkQ1Ry4qgknMHRT+yZ3D2+easxj13ol6p0po71lwd9R/OtBfrBI/9zKM7HOMspDSEc/dQMhZg9mfgMZqCkdBUKQaG/yhHuN3BpED2+C9spix02bAzR109ZMh9VrhkOAY1UbMp0f99ZmLfc+GHm6teNfS06Oh22Pbrs5jtj+PTwXGeuftGt4+13y1NUYuqmD4AwDIOCl4CPXvCvJ3KUF9KUZZPt43qsshCW0cwlxeAuS0/JQJihTdz49nlo0yBwWnFBpGdWbl1XbST4acZuk6of+E4M5RunZvYqfDMmWuNXrJLRC8oqJdSto4HT1O2x7X1sgD/CjJN+ebTLrLeiaPOkuZG5iMBOOxANx5QVqP9PxmEKMs9N41kbuBkJNyN3OeDFFCAK68s93A9RhlI8++vjuHtw82Hml9Rjk+Uwp0g4KdMLnT9Xi9wu1yKdeOTI/XGafLBrvX8rs2zJF2CvYkbUzkCJOwI67tyXyuwREil1SCQdCAXSM65HgEVyNx4eWoU0YuVaJPhD/hfbBEzly3M8ozFdbjtxLa+TyzATQaclq+ioEyVdiw1v/Z0RtQotKClOd6g2880yBHSGI4s3ovq5vaLzDv5e/++7soX/oapZrgghLw59kLynsvVx0+ryaE5HxnSPd4c22YJB0V60oK2ff0jrh2O/P7CwBAOlJ+ilGGdSKXAPmoj95g05FyHQntp5y8TwDwDQvLntMxiRSgcdyNrBw390rI+SRjkRRu8GOmffMRZmWKTk2GW5DnLkZZVoVqYbv5wU1BDpBS0w78HVRAFS5WrLhYvu2wcABxHy3P2Tuy81mZAt8xavEVviQHRpZjkdDxOfAA8N2BAK5prceBI5lE8YKfywn0qicuJCtoJvheCd1wFNwJdZ+3AGb/ErwB+WfuH91FxgIkwOX0rB4LOa1buYkLySDjfhYVjzH9w8Lvc+ZiXhOqDZLtSMN5+W9yOdP6ar+oceuNolHlciG/3yULt0SJEmLG2i3iyO/nReQVJVXvvq7M5X0g3cb1e2aq4N9A1m2vnfHtAnbUqZ4AK5c3rvCU3QkdtudQVwTqeh8/tpfQB3SM3hZ1W/QqNZ7lnSJiNL+VOwdGj/E0Y5HUZ1OZGnw/s5VLT6zetigT1xUQ5ez90vGg+7elGwYUefWNYtBbc0XzulXEXTVuF9deWUJERrhtlyM9wyNOnDwj5n25Tez45mdR7LY6Svdblfh5NTAFOL1m6UnB59IFN0J+tExOHZQMfFTwDiYGZ/YcuuuKyx5wF6AO40MJJxpE5KjUdXdCx11WCgGYUZjAboxyLdw/uuteCe0lELmZsbwJkPM8z5pgdUAjioYiFbQFDkWvFmTiioa1HrKcD9Vi12Egs6GI4leKItffKlal7Rcr0/aFXB53RCFxWdkqwhUR+HBRsHu32y6FwejMXOCMfaO6eGVKbDqLhPKp0DHwfbuGt18f/Ia0gLxfH2SU6WUA36/Z1EPehZMlAS5RH9TLcddGR7acgRySJbWXM/sSKUpvcRSEcW6GtVyTUbYvMK6LLe4tnErUkpAaddrSzZ4KXVVaRF5+jfCePyOMzAwZuUjzJJfLLVyFioiIoiXwH+4ghsMQhheGk22gy2pdEH1qg8yNwZeHaJrRe9v7Abi/WlR2Ob1fKQ7uxEv/sBoA1/CndOstqS9G7EnoaPkqoXLsnEh0SF9Gub7an9R1I3djIWdFyNmCsch3IOdpprKeZW6upXjSprLH+SJiUdiAbri9bnXBwiSr16lkeDy26UFV4ufS/U8NxiIPw8qVn4c2dEfLKYLeoI7o4LFSSLUR8yl9Iqf364Q9iZ1OXVJHhBlp6iFJfUHRxkYy7UH0TIgzPu9LUqZdHm+fA6SLT8ssE5SrsgbvXf0iKFMbLPYVOcTdyiTPfshzSISQtKUbpmR4vcJro3WOoefOmyvdyq2euJCstw42Dw3dWz6xe0SHj5jK6yX4vF/Jyn3tH4DrD7Qg60iZ4kf3YZyJnEe29PxmPneDK8XOxngZjzEWOetAUrejTAv5CcH7qmUEk0xhYeVqSzdcARcI6PFk2l0tt9fyLBtkjhL8qcryArVOAFwWz8mqI+aT0sD5LvflvYmdTmcpn+67Zwg5GYOIKCJQD9Tp4SgMYEZxeRszyvcKwEzGQnpY8F5pTGKxcjGfmE8zFuxJ7LTNokx01Bg2R8va0g1T8voA176xqBw3pwzqi2Is8pv9o7vulC64YXS3cVjIEmm+O6HjAUYtlwCmMlNp5M05+W/AHT6/GMonK7SZpP6g3KQd9o7slM5YJqcCQm/Dp0hqO6ecG6AYbGbavhsJ3mdCyQwyUYCOYoxK71fhBbqalABcOlq2mbiPlufaJHc3m+ohF/gWANxjzFpDL8bCPtw7svNvfsCdB+vCWG6eBMggyl/aFvVxOf6ISjGzL4OS8DCjjNMPjOl2krvhkLMu5LyDsci3GMvqyVjWF1CoLDmgQfGjY27ODFELIZNHhJh4j5e1pRtSIrD1eEIyp7jvRefIFrhawoK6mK3lbOgbApgme7J5gmNtQ5pH97icR/ovm+WSExIBbnVJ/UHB+FtfBHhmBYoz5vSbktrPeH/ty3E8k3EH4Xzyl8IgT1dmy3u6Cvu0vtMNF8CFwpOZmWH7EX/l2DklMfD3MBb5i/AfPcruMDuOlv2Am9jpV37xffesXA5U+/aN6ryvSvy8WiiX7rxk3XP/CG6Guo6x9wfvU6atB8d0Y/ecrxgzuzhzBq4PISdLiFQoW7XxKcskF12hLGMohzPdIUXrClnoRzmgG2ScY008fe/JTA9J/6PG5vgUZixyyYGkrnacj8sGXWmAa/Y8p3NJ2Srxc99DmQQIRST1BwFu432junzHD2azKkF2TsVPkpXrU/Q447i+zbiFNOfsPyhWljYjKICtIBNnSsFPIVPIj5a1pRsmRBau4Q1V7xvc8XelexdWHT6/Lhb0rRKr+EH4jlDlAC4AsgQ+TRmLpPIek9gfFwH3sIS+aOP1ej9mvNqie1xZx5CcT18+PzimO2NoSoPLYY4s76kM8iQw9/0nquzX2nvZ4eTJyAiF45SPKsXOJkcHzhCKFIh8pQ2KQmeJhdNdZYu9I/mPULNQS/BlDpmipIA05QZcgO11wv+muAezL8kHALMzEqxx8jLnTE33JmNf0lvsO5mKm4mx/suiPBSTmtOJ7xBk2qzKgtCWrpMBFxZuCN7jZh1wOv65nrHEtQfGdDtjg+T3SSqXnr90BOAekNrthu0BPYIlcppqvH90F1YFpHLc3Hbog3fxYykjwFzZdoLZJWulF2NpdD85l3E+0ftmrmc5H1oc2wjIM5a59z9WaVFoS9exgJvp4xBTO+byVsgWuEr8PDpavk1S8X33jepswztAo6kDpijdabfcP7rrT3xgO4f2qyS0f4ikPeezg8nd2TOcVBw2iyxJzudMb0PODMb5xGVVMmQF8z2Dq8bYV3QM+H7Ygq5+MmSjhZuZEXI5DP58qitskFqWlTtx36gu0nP/AniuFbyxhWUQeZ+3AeD+ztjuMsIfGvTu/9lRefec1yStE1KSynAtf8HoQGUSF8jNwJh7LYwxeeOPZG7bUsh0VKXFoYNjOBFwM0IPuBVjZmHjN2oxFnmU1zEkOyt3LoW56ymh6HXCYiaVAHZw1QGXFKeu+5O6sl0TVI6d0xDtphjI1/9TyWcDXbLIF0oaNE4rd8Gh5B4/Ms+pSkwlLbQoRzyjcvL3qYBqC0Rbuk4CXIBtpgIWrkncOWilO1Bhev5L8L1FvEhkzT2wf3QXW54jYIWVVniKkqXf50BSV7ZJWil2zkOGPxxjkX/2Bet+8zbAjP2+5vZhM0luzjv41yXMqduZ1sFXFsa5MuR4kblp34gQ587Vlq6DKTPjggp3uFlXquNAV9LRcq/9o7ses7HjVc01OQYcdyCpGwsSVoqdTacSyWhvjicIjM/kMqVZRP6cuVzJDfYLf5IIbiE5Tk9SMfYWFE/jP/hXIeaGvQqZvKotFG3pqk7o04z0C8Lr8SgjkukYwu3M86VMmSvHzSGZuWMtTwHgLra5+0sqNkPJqu2Nze1DrgIBuEXxodSHXW3aa+YdGtvjZ3YrN3omeQQPYCzyTcgpY5PleH62zsJ4U+z2FsxtomdL76m4pWtLV2m8BeBeOB+yd7g5K+++N3SccW6PHErufkyy0I0F79EsOWcMDEHnRyg0FehNcrcDY7p9zlVgpZjZ16GNdDfYMK9JyEis3q0AW7p7jhH+XMdcVi4pN9OY5aTEC7FMffllkONN2axekjA3J8tIWKEU6BoqW7oONMC9ANqMC+cU7VOjJXOBa22YAtxHy7Duup4MwVRWZULsAHc6OKbbd1wFVoyZTfd6S/Fj+fwopExEb15TmUCMjsSfF34PXO4TicWwcn9nkpMikI0DPwl2M/TkOfCeIOczJbnnTjxCaSpfEoqSPl5WkCiOckZ6usoich8FfSFT2Eqxs0sy3+fOOpDULTU0XW9cUGD8KbPNYwfHdD/LVWDFmFn3om0U8CHPO2vmeBjTD4/tYfnupkL0zGsNf/hIWfmHWaxcyFnL8I/f385TLuu9eRBzwRvEmNfBSMo4LXoL8vxSIEBXk3WlJTP9ghJvcHPRkq/CGm3gJNAF9RP++MIcRFr9oBAOwfkQ1k0TcyA2tFc5C8Xm20v4HZny6UjD+lTI8jOhCtEzqkIe8pK9RVK/k6K1nEHOzpCTojNdEn3KZbXoA0GMOWEPeaVHSFgfKUJh0pauIuT1ekTG+fPoQ6/qopIm72Ys7/tDY3t8J83KjZldCvsz5xva5ANjuv0QOs1MnA5RzdTm7geTu7OlXaw4bBbt9klo07AA+4CLKB/tOisFAMjIv4HS2F0lse/XHB7b84xFOSmP7+Rs1671/jwaxDwmC7e2hL56FXP0Z6EwaUtXASLrNjMj3SniOuo+1/CFDRRcz2zo/m9CiPv/1xDUOQvcF5vZn4yASw5GZHUFHNWMUblffTilZ9BHyxWGzmiCCUbe60Ul978lKxdyPg0538ixPy0buiIg34bbh82qgBFMkNBPf6lu5WpLVxHr1uv1OkZmg/8+d50sWSvGzLobEnOmU0s+OKb7uRD3/3EbqyPrqv+h5O683r3DZlVEOyjCVJUQT+evLQAZ5e+1A3CJNlgCXJEz4DKZuifzP/bkbGa8I+RkyRp5KLnH70Jx0qAbkp3T//Y205d43jliV4ieQcnCuSM6SXmfC0uqBPp2qmC4sDKJjtAmKzB5fjF3SZfkiugE4nFsYt/yAu7MdhD/I8bTB9vBDEBGPg0LbQJcus/dHqScT+QNuByYK4oHoDU+g383ltBPlNHqNeEAYruby/Coa615FQI2cpI6f/a0/zjZaTqKIZr87cPCwyfBByVJS08iOBPVjz2Y3D3kdwAAwXPosz3M45CVz4Cfo7HmBNzbo2cWBk9CuYvAV1qSke3QQGwLAshqCH9owcttGvJdh1N6pgchJ8UYtyvu8HX5nAO3CHnHv88dGtvDEXd0bJbuH2cuCA+A1+12KdXA9IxMcTY9Q4iIwqEF/otHyQpFlgqCuKNQbcKGwq56wJpqbQjjacYiT4CnKjQO68HVJZRLYNIPm9f3rOMRPbMCPjPAdTiQkmnC/HQkpWdAVwW3DZ1Bd5HkNHWtjWN9JNBfgJztDH9Er3wbVRZ37Qr5mAMuUwkoLqGP5mDOLnXKJsoGuueBJcvTDojW9Sop1cDFm/cLqAIiVKoARZOio2QPLFsnH75Dc6YFfA9zsWkSAPcafN5lLnYyrL6zCg0HPbF6krG8n01LYTYz2NKy6w2eJNiebLHBbkBW/G1DP70J9VJ8cLuzPAUqZxPISe9wCwXWq5Z2yLoVMNaHcwlRafjnQXMJ/XMK/IKT9lI20HUXKiLGz17j+7lFnYoiIsQWb0amRyyFEvDKgnXistvq2g+2BkWUcpRXcl5UU4KGv4m/48VE/PsGzqkkJGR2sdZEg7xZ6ciE440jOQM9eHhsT9boWhWiZ5SHnG+xb7R8pm6+wey2IZ/Ss7O1Qt473NzouwDkjPId3wd410zZmlzWtmsKr0ohJbfnMBfKoZaJkvpnIObuMeEg4nOkwqi5ryknxkxfIcbPWiVKFr1MREa6Q9KozEyvOHn2nPB4DFHkxkpC2GjnXrRs/WAbPo5laEkTCcWygi4sK9rgH+U+LIEF+JNKY4FN5gQ2MrJ272UoLoYTcCEX3eMMFhTTV4KjEWM6vxP5BDK6r1xNP4ZouI/nU05680pR0ooFpchYJ3La6v+P+UAnZH6HRhmJOpYeTun5jtP2Ulbv5UJXXi9cEZEi/fj34sSpMyFtmLtwMXFZmVtERHF7nCTprtZ3jJyZHk5Ym3VlcoPuL0dS7mPTULHZuw1/ejBumqqoFjSPCXQJTHaxjMHQGfea70Ery9T+mCjPICMm4NI9d/UQjvSFfMhZwwTcy0Mo5xMY/wkAwUv9AYYzzdNLiZJt9HHiTsoeHCOy5DU+9gVIDRn6uITV85L8bQCGL6l8pmKp97gJizoSQ8l9n7uZeTN+RPC/+6TnOao6aHwq/HelVtfwU8L/ZtYK2NJx/njwgza0+yQTuJzPB+CuCTHgEp3NQ84oUzG4JsRy0qnG25gLrS46R+Jneh40QlJ9j6Ken4QDSV5EKh/ouUQ4EnkiZ6an+xLLF5CnyfUEX+zii8R2tGw6ecVJaPd0LOxMFQcEcv2KdtN9bCeLRbWkd6cob1MQ/U4bLeWLjRb25PndaM6b/jItXQDZLableLsCQ30yFznpNcFcDiXEF2PB+nZNgXM+uG3opwvw7WoI435JfTLxSMp9jvFWtg90w4zorpbuaSmgRThbtTlQUwllclq6jYScO7d5Ss9JYbzKALpE72KjjMJGli8PbfxdujfsjfoJbG+wqbmfCP+94YtM5RXPAchIwSTQKKPIMJfMQc6HhD9JeyHGCcVBD5ssi9aaSp5jSYNunkCb4Xvu4/FkFOSuqC+hzD1s48QfmpKI7ozWqzwoAMk12Hy3CuvvX+kIdQnK6nlk3H3Hc7Gs6Pj+MXT448K+40yPuclOhGzGrUOm/8VUbqlL/wBlPwBFgp6bXabQMF93iYzksZ4MOQdzV+RS/2SSkm70wDzIFA4mDbr/s3sbANdMgGyG767W8Hp0n/ipFnN5FJTgGOO41ZHQ5kVY3E6YAOSospihnMbg7wCsdFe8QvifqpAVdbN5kkD/v5rNbaM79fswDmuzaFg/MpV9599ANng6Wb0vo+zeCo7vXeDZppw3Q8aPzT+TcXLyjcvlulXReU7H7B0wF34VDqcCDbp0j+EFyNJxMYVnJNbho/+h/buwGG9mLvb7b8bdz9nTMgIWOOLOCJsQWahrBU8826I+S9bPoaZV4EfQvkvTtHGFDa0LEBst/IFBKM1ceUWHuC/k3Cv8x/h0f36FpHoIzOgaaRT4IcX6gI4Zu2Mu7AiHPTVH0CUAcrsjhMvtFmFBBLCwXH0AC/ZmZvqsWk15qr8REkr9hbm8IhJk/NxBo0QhL7dL6ge7iRYlvfGdgE02u4DuBLqUSYbjeDvWAf1BitBbkuugu/y234y//zso2c/i57vNEw5lFA8o6anhsqXmiKjnTp8UZ07+IU7/eUKcPfWnOH/mlLhw7qzIuHDeB8iUjk7FrEI+6xWASs940s+f8yUXOHvqL3H6rz98X/rvjAvnzDtao4CwnDmiEOhyR6TZ46RjLMi6n/KThsFMPQBuhPaMywFwBYCBQHmKQ4bmqANkpI2wG/rV59gIcPsLA9HBTEaiwqQYCJmmhpMdk4/jZcNnHebsseuCRez2WcQulwtfso7xdZn/TUwX9G7za/5ZfgH0opXq+8nw+sIr0p8bXsPn6OQDWd+XZPSKMI1MEUqS4V3BmpMWM4HSA3I6U6114EkOZW+hu9cOjjxPoTtVIWKw+Z/Px9+nDFJ9wVcp3KZXwLOExHzRDEQb5qPo82WXKDY7bx08vY3wJ3coGUL5kiDLpHDbUCNzXQb5XC8+QA72GU22AGxo7FRrQ+SmM8wS0uY2krHEz5w2SNicDGyUFCCEjuEaOEh0yqLzGORfF0BbT6CtFHhhuqJtorzLL5hjQnG7+ykqZx/IOD2HPl4P2SkgDgXeuCEEso2DDHEiDMmdi/Vgzz9/W69Z2RD6H75/GLRhGUdanICzH5+ZTMVR0OxVTlzM6Ad6TtMSvMUB4npMi7VGIICbpa3kZf2Ggu0iwH2GANf870HgDYpauO/l0ceUb7hhCOSnUxtHv8UNCnQ1acqyOXI/Uj4vQU56t8hxbL3IBC9HEmT/E59/gz9WWEx6W9wAsg4FWxmz54TFEJbM9MolgCvM43I68j+siIy0lh+BXB/mcz79YM6nCcKe88c41BmdtQ8LEuhm+t7PaHY+W1gs5uRfrjrompsDR3jA8U5f1ARk4IfNzf57hUSj3Kf07CUK8m1laCcphD1JUVKgbaRAPJ8dWODPyCmPgv7vV6D/20OeaQH2cwaYlFo6bj4oSTbaEx5CPUnhbsXkBrq/Ck3hQlaPiMcxyyMlITwWLEUTspJpaBrK2Bgug462EBhVFP4nRaH2pJ0BrgSZXjY9kLnamG4YRhfwa75rKfv5PPg+yDEuDzmP4e/dBf48RHJS/f+GHCss9PU6lHEHOAF8jlG2703ZphWEzThH0HW53V9qrHI+uVzuQ99OeMCwuLF9iUWRyLjITshqL8oeAP4oCJm+BT8XbuNPoASejBZWBPcHH7XZp2A/uBlkIGD6WUYbMb8zwXTKQUE97Mwp+g24IeqekU856X0xednbdVR7kchHoTbq387Q1+fBiaRACX88bKvtIEX5DpS5WRQQcuX01rb0U5MbZmakr0eX6ntfB1NEociY42/3S+Yoq/ygTyjm7kSw1STFUVhkm2S1GXJSQI/3Rf4Dr1Oc5caQaU+4zwf0DSWZfwA8VMjMeysE3YsngF9Hv2bY2D5KfEHOTM0kV0WA0w9t+zNIOem4+U0TvGQRnShQhKkkyOmR1N9V8aHIXpR4I5DnhSvBcTL3AceBLr2lva73q3O9Hk9nDV0OHVy3+4jbHVHp+Dv9PIyLjCIBUY5MysMaTIYTOuYsL2sTyCInbQDDTc5NcaRAHc0hz66CNDfM/iFP5+fNL9d7bNpQ3gHHo0+Ph7B9XU3AkZFj+Sm0bT6DjIXN/icFiDuBRBq4N4d1m8+2UBpESirfUfivNLKjA8IfJ/yDgrbe8g26pfq8XsLr9XxteL3VhSaHjazr98jIQnf/8vYz+yQtsnL4DAP3EoFlZXkMC26qjZsvBYwYK/wemJeCA+UifQ7y/FSQpwr66GZzHOmdr5WA93RfGG3XRp+PdpGy1QP8Ap2uWCyOjq3plGc82neaWU7KVU337vT2+BaLxR01lWICNm8I+z0yi7JLcmSGSh5HgS4RAS9Adxos3vZOyP2kyXePuz0iMrIbAPeIDQuMUo89bm7aeR1XjsbCiw/RRkBWBeWBpaNnsrLP2Hns6SAArokPnW7R8ScF2Siax6/Q0fxCsm7RnxsUbhdlonoQ3B1cNoBfJa94Cjv5lmzL3QQrOnWg43/yPA8kOT3diVKM5k8g5zk9kx0MuhepVN837jQ8noFew/sv4TWuNVxGhO4+ZcgLfeiky+3e5na73zv+zrMheaOJTYMytVDuXTrSu8m0gMlTmaztZdgMDuihchQAu03QJWWlsKmwCFNpSTetv3NWHfVsbhNtbJSikDLq3G0qimTplzD/Cr3aoKc9pEBQGMTPQ2GhmUoiKT2NhT8NIclZ2lxTJA+lONwt/DmfF0DG3XrGOoP+T4ABAButteu6IYEOAAAAAElFTkSuQmCC"> <h1>Trello</h1> <h2>Organize anything, together</h2> </header> ');
this.b(this.rp("landing_content",c,b,""));this.b(' <section id="landingWhatIsTrello" class="landing-section clearfix"> <div class="width-wrapper"> <h1>Trello is a productivity tool unlike any other.</h1> <ul> <li id="whatIsTrello1"> <div class="content clearfix"> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/efc043d0d7d8b238848951324e866c8b/what-is-trello1.png" alt="A whiteboard with superpowers" style="height: 127px; width: 250px"/> <h2>Intuitive</h2> <p>Get organized as fast as you can think. The easy-to-use interface takes no time to learn, and every action is instantaneous, so there\u2019s nothing standing between you and your sweet productive flow.</p> </div> </li> <li id="whatIsTrello2"> <div class="content clearfix"> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/c897d8c6b5e7eefb6d058a04b4d8d739/what-is-trello3.png" alt="Power tools included" style="height: 127px; width: 250px" /> <h2>Collaborative</h2> <p>Trello is great alone, but even better with others. Get the whole group onboard in seconds. See their updates in real time. Never ask \u201cWho\u2019s doing what?\u201d again.</p> </div> </li> <li id="whatIsTrello3"> <div class="content clearfix last"> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/0c91be28312f6e79a7eecac6d182d399/what-is-trello2.png" alt="Everyone on the same page" style="height: 130px; width: 250px"/> <h2>Adapts to You</h2> <p>More than just a to-do list or a task manager, Trello is anything you want it to be\u2014a lesson planner, a community bulletin, a repository for inspiration. We support the way you think, not the other way around.</p> </div> </li> </ul> <div id="landingSecondSignup"> <a class="button landing-signup-button" href="/signup"> Get Trello </a> <a class="more-link js-landing-learn-more" href="/tour">Or Learn More &raquo;</a> </div> </div> </section> <div id="landingMoreInfo" class="landing-section clearfix"> <div class="width-wrapper"> <div id="landingMoreInfoDevices"> <div class="device laptop"> <a href="/signup" class="js-landing-app-web"><img src="https://d78fikflryjgj.cloudfront.net/images/landing/2c5e33d2194e6ad7d10707f4c45676b0/device-laptop.png" title="Trello on the web" /></a> </div> <div class="device iphone"> <a href="https://itunes.apple.com/us/app/trello/id461504587" class="js-landing-app-iphone" target="_blank"><img src="https://d78fikflryjgj.cloudfront.net/images/landing/13933c191551ff12d02b07404770065c/device-iphone.png" title="Trello for iPhone" /></a> </div> <div class="device android"> <a href="https://play.google.com/store/apps/details?id=com.trello" class="js-landing-app-android" target="_blank"><img src="https://d78fikflryjgj.cloudfront.net/images/landing/a20022e4478ad21ea8769cebc08489c8/device-android.png" title="Trello for Android" /></a> </div> <div class="device ipad"> <a href="https://itunes.apple.com/us/app/trello/id461504587" class="js-landing-app-ipad" target="_blank"><img src="https://d78fikflryjgj.cloudfront.net/images/landing/1e61ca6f5f2d9b5b08fecbcd37d9f3d1/device-ipad.png" title="Trello for iPad" /></a> </div> <div class="device windows8"> <a href="http://apps.microsoft.com/windows/en-us/app/trello/bd4fa6c1-0994-4caa-b0e1-04eec135667b" class="js-landing-app-win8" target="_blank"><img src="https://d78fikflryjgj.cloudfront.net/images/landing/a9e2a4a95a82b29d1068e4ac258359ce/device-windows8.png" title="Trello for Windows8" /></a> </div> <p><strong>Trello is Everywhere!</strong>&mdash;on <a href="https://play.google.com/store/apps/details?id=com.trello" class="js-landing-app-android js-text" target="_blank">Android</a>, <a href="https://itunes.apple.com/us/app/trello/id461504587" class="js-landing-app-iphone js-text" target="_blank">iPhone</a>, <a href="https://itunes.apple.com/us/app/trello/id461504587" class="js-landing-app-ipad js-text" target="_blank">iPad</a>, <a href="http://apps.microsoft.com/windows/en-us/app/trello/bd4fa6c1-0994-4caa-b0e1-04eec135667b" class="js-landing-app-win8 js-text" target="_blank">Windows 8 Tablet</a>, and your <a href="/signup" class="js-landing-app-web js-text">web browser</a>. </p> </div> </div> </div> <section id="landingLogos" class="landing-section"> <div class="width-wrapper"> <p>Trello is loved by people at <span class="linebreak">organizations both big and small!</span></p> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/companies/eac418eb73d1edbb3af82264abe0c426/chartbeat.png" alt="ChartBeat" class="optional" style="height: 90px; width: 185px;"/> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/companies/473772a303950b197520b60e5b074004/freshdirect.png" alt="Fresh Direct" style="height: 90px; width: 180px;"/> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/companies/613a189b52b2c3cac9313a845eae9be6/lore.png" alt="Lore" style="height: 90px; width: 98px;" /> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/companies/7459c132a0704d9444b87ae47d437c4e/tumblr.png" alt="Tumblr" style="height: 90px; width: 171px;" /> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/companies/a726b4396ee2948addb5add3954a2cb6/scoutbooks.png" alt="Scout Books" style="height: 90px; width: 128px;" /> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/companies/ff300ddb319fa568d50d73f4c2623635/anytimefitness.png" alt="Anytime Fitness" class="optional" style="height: 90px; width: 180px;" /> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/companies/20897210ab004e9beda004d3f95b1d9d/turntable.png" alt="Turntable" style="height: 90px; width: 180px;" /> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/companies/a7c0b6b75e458082bde7fbad79f556ab/tripadvisor.png" alt="Trip Advisor" class="optional" style="height: 81px; width: 146px;" /> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/companies/36f37904d63cdcedc1c7fede508c463c/adobe.png" alt="Adobe" class="optional" style="height: 81px; width: 177px;" /> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/companies/1dfafe8c448f281cba6b522c597e8c5f/theverge.png" alt="The Verge" style="height: 81px; width: 179px;" /> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/companies/dd676994b9faf5c1da391eb369bf43a7/khanacademy.png" alt="Khan Academy" style="height: 81px; width: 231px;" /> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/companies/3e0e6e2a8e4cfc94b9ebe873f99f6edc/newyorktimes.png" alt="New York Times" style="height: 81px; width: 209px;" /> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/companies/d4ba0c01e92031accc3315b48252a215/53.png" alt="53" class="optional" style="height: 90px; width: 98px;" /> </div> </section> <div id="landingMisc" class="landing-section clearfix"> <div class="width-wrapper"> <section id="landingTwitterQuotes"> <blockquote>I love how @trello balances both free-form stuff as well as structured stuff. Seriously powerful</blockquote> <a href="" class="tweet-url" target="_blank"> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/twitter-avatars/63d666ce159b3035aceaffa9e118137f/mitchellhislop.jpg" alt="twitter user avatar" /> <p class="quote-attribution">mitchellhislop</p> <p class="time">3 days ago</p> </a> </section> <section id="landingStayInTouch"> <h1>Stay Up-to-Date</h1> <p>Stay up-to-date with the latest Trello enhancements, bug-fixes, and new features.</p> <a href="https://trello.com/board/trello-development/4d5ea62fd76aa1136000000c" class="button trello-dev-board-button" target="_blank"><span class="icon"></span> Trello Dev Board</a> <a href="http://blog.trello.com" class="button trello-blog-button" target="_blank"><span class="icon"></span> Trello Blog</a> </section> </div> </div> ');
this.b(this.rp("promo_footer",c,b,""));this.b(" </div> ");return this.fl()},"promo/landing_boards":function(c,b,d){this.b(d||"");this.b(' <section id="landingFirstSignUpButton" class="landing-section"> <div class="width-wrapper"> <a class="button primary landing-signup-button js-first-sign-up-landing-boards" href="/signup"> Sign Up&mdash;It\u2019s Free! </a> </div> </section> <section id="landingIntro" class="landing-section"> <div class="width-wrapper"> <h1>Meet Trello</h1> <nav> <a href="" id="slideshowPrev" class="slideshow-arrow"><span class="icon">previous</span></a> <a href="" id="slideshowNext" class="slideshow-arrow"><span class="icon">next</span></a> <ul id="slideshowNav"> </ul> </nav> <div id="landingSlidesWrapper"> <div class="side-fade-left"></div> <div class="side-fade-right"></div> <ul id="landingFeaturedUsers"> <li class="landing-featured-user start"> <div class="landing-featured-user-quote-wrapper clearfix"> <div class="landing-featured-user-avatar"> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/featured-users/8620bf0e20d639181f48b4d76fdb7fb4/jessica-s.png" alt="Jessica S." /> </div> <div class="landing-featured-user-quote"> <blockquote> &ldquo;Trello helps me remember ideas, collect needed supplies and keep an eye on the big picture. Now when I go to my studio, I have a clear idea of what needs to get done that day.&rdquo; </blockquote> <p class="quote-attribution"> Jessica S. <span class="quote-person-title">artist</span> </p> </div> </div> <div class="landing-featured-user-board"> <a class="show-board-button" href=""><div class="button"><span class="icon"></span>Show Board</div></a> <a class="hide-board-button" href=""><div class="button"><span class="icon"></span>Hide Board</div></a> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/boards/3824ba394640e2078478f64499c37368/jessica-s2.png" alt="Jessica\u2019s Board" /> </div> <div class="landing-board-fade"></div> </li> <li class="landing-featured-user"> <div class="landing-featured-user-quote-wrapper clearfix"> <div class="landing-featured-user-avatar"> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/featured-users/1152f9c162c218ba495c2e8ce676bf14/jason-g.png" alt="Jason G." /> </div> <div class="landing-featured-user-quote"> <blockquote> &ldquo;We have no time for overhead, but Trello lets us track an enormous amount of detail with ease. It adapts to your process, and then stays out of your way.&rdquo; </blockquote> <p class="quote-attribution"> Jason G. <span class="quote-person-title">independent filmmaker</span> </p> </div> </div> <div class="landing-featured-user-board"> <a class="show-board-button" href=""><div class="button"><span class="icon"></span>Show Board</div></a> <a class="hide-board-button" href=""><div class="button"><span class="icon"></span>Hide Board</div></a> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/boards/a50a4dfcc9c4bf31fd783822347c49c4/jason-g.png" alt="Jason\u2019s Board" /> </div> <div class="landing-board-fade"></div> </li> <li class="landing-featured-user"> <div class="landing-featured-user-quote-wrapper clearfix"> <div class="landing-featured-user-avatar"> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/featured-users/f9b04e4f890875b0fbac08997697d8bc/kristin-b.png" alt="Kristin B." /> </div> <div class="landing-featured-user-quote"> <blockquote> &ldquo;Trello was essential for tracking all the to-dos, as well as hopes and dreams, for my student projects. It kept me sane throughout the thesis process. I\u2019m addicted!&rdquo; </blockquote> <p class="quote-attribution"> Kristin B. <span class="quote-person-title">student, MFA in Interaction Design</span> </p> </div> </div> <div class="landing-featured-user-board"> <a class="show-board-button" href=""><div class="button"><span class="icon"></span>Show Board</div></a> <a class="hide-board-button" href=""><div class="button"><span class="icon"></span>Hide Board</div></a> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/boards/ae2a22a2518b84ca6bb7f501481d0f00/kristin-b.png" alt="Kristin\u2019s Board" /> </div> <div class="landing-board-fade"></div> </li> <li class="landing-featured-user"> <div class="landing-featured-user-quote-wrapper clearfix"> <div class="landing-featured-user-avatar"> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/featured-users/8c19e693317e99832960d9cb7c47b1e7/marnix-k.png" alt="Marnix K." /> </div> <div class="landing-featured-user-quote"> <blockquote> &ldquo;Our band got rid of all our confusing email traffic using Trello. Now everyone has access to the right information at all times, and the mobile version is handy in urgent situations.&rdquo; </blockquote> <p class="quote-attribution"> Marnix K. <span class="quote-person-title">bassist for <a href="http://www.andereska.nl" target="_blank">Andere Koek!</a></span> </p> </div> </div> <div class="landing-featured-user-board"> <a class="show-board-button" href=""><div class="button"><span class="icon"></span>Show Board</div></a> <a class="hide-board-button" href=""><div class="button"><span class="icon"></span>Hide Board</div></a> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/boards/9f07db0afb707ff88e8162e04d060b29/marnix-k.png" alt="Marnixi\u2019s Board" /> </div> <div class="landing-board-fade"></div> </li> <li class="landing-featured-user"> <div class="landing-featured-user-quote-wrapper clearfix"> <div class="landing-featured-user-avatar"> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/featured-users/7a5ad5028ca83879f955310cff7085e0/charlie-s.png" alt="Charlie S." /> </div> <div class="landing-featured-user-quote"> <blockquote> &ldquo;I juggle many different projects and deadlines constantly, and Trello is ideal for keeping track of it all. The interface is streamlined and simple&mdash;the very definition of intuitive.&rdquo; </blockquote> <p class="quote-attribution"> Charlie S. <span class="quote-person-title">writer and lyricist</span> </p> </div> </div> <div class="landing-featured-user-board"> <a class="show-board-button" href=""><div class="button"><span class="icon"></span>Show Board</div></a> <a class="hide-board-button" href=""><div class="button"><span class="icon"></span>Hide Board</div></a> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/boards/c912f0b427dbf320b5fe61d5f6542132/charlie-s.png" alt="Charlie\u2019s Board" /> </div> <div class="landing-board-fade"></div> </li> </ul> </div> </div> </section> ');
return this.fl()},"promo/landing_video":function(c,b,d){this.b(d||"");this.b(' <section id="landingFirstSignUpButton" class="landing-section"> <div class="width-wrapper"> <a class="button primary landing-signup-button js-first-sign-up-landing-video" href="/signup"> Sign Up&mdash;It\u2019s Free! </a> </div> </section> <section id="landingIntroVideo" class="landing-section clearfix"> <div class="width-wrapper"> <p class="intro"> Trello is the fastest, easiest way to organize <em>anything</em>, from your day-to-day work, to a favorite side project, to your greatest life plans. </p> <div class="video-container"> <a href="https://fast.wistia.net/embed/iframe/zfss1tgtwl?autoPlay=true&controlsVisibleOnLoad=true&playerColor=006595&popover=true&version=v1&videoHeight=540&videoWidth=960" class="wistia-popover[height=540,playerColor=006595,width=960]"><img src="https://wistia.sslcs.cdngc.net/deliveries/1bf7c205b275b5a7c6f313b2fbbdee818cc0b900.jpg?image_play_button=true&image_play_button_color=006595e0&image_crop_resized=480x270" alt="" /></a> <script charset="ISO-8859-1" src="https://fast.wistia.com/static/popover-v1.js">\x3c/script> <p>Watch our new mini movie, featuring the Trello iPad app.</p> </div> <h1>Meet Trello</h1> </div> </section> ');
return this.fl()},"promo/tour":function(c,b,d){this.b(d||"");this.b(' <script> $.getScript(\'https://use.typekit.com/wtv2ioe.js\', function(){ try{Typekit.load();}catch(e){}; }); \x3c/script> <div class="promo-wrapper"> <section id="tourIntro" class="tour-section"> <div class="width-wrapper"> <div class="height-wrapper"> <h1>Instant <span class="linebreak">clarity on </span> <span class="linebreak">any project</span></h1> <p class="intro">Infinitely flexible. Incredibly easy to use. Trello keeps track of everything, from the big picture to the minute details.</p> </div> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/tour/c7ed38133cc5d1b31e09f9da29b6a536/example-board.png" alt="Example Trello board: Kitchen Remodeling" id="tourExampleBoard" /> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/tour/2b5d371c67ed757fe6f74ccca53a9f95/example-board-wide.png" alt="Example Trello board: Kitchen Remodeling" id="tourExampleBoardWide" /> </div> <div class="tour-details clearfix"> <ul class="width-wrapper"> <li class="first"> <div id="tourIntroExampleCards"> <img class="card1" src="https://d78fikflryjgj.cloudfront.net/images/landing/tour/4c143fb6aa7908d0761dd44b34d1cb50/example-card1.png" alt="Trello exanple card 1" /> <img class="card2" src="https://d78fikflryjgj.cloudfront.net/images/landing/tour/66407a83e01428b3700024d786437121/example-card2.png" alt="Trello exanple card 2" /> <img class="card3" src="https://d78fikflryjgj.cloudfront.net/images/landing/tour/cb1fa54f296500d3cd3cc673758e8001/example-card3.png" alt="Trello exanple card 3" /> <img class="card4" src="https://d78fikflryjgj.cloudfront.net/images/landing/tour/b4379730fe54a13d7ee1aed972c0f3e9/example-card4.png" alt="Trello exanple card 4" /> </div> <img class="pic" src="https://d78fikflryjgj.cloudfront.net/images/landing/tour/56a90ee6536eef163642b471b88808d4/example-cards.png" alt="Trello example cards" /> <h2>It\u2019s all in the cards</h2> <p>Use cards to jot down nuggets of information, from everyday to-dos to fleeting strokes of genius. And don\u2019t worry about running out\u2014we have an unlimited supply.</p> </li> <li class="second"> <img class="pic" src="https://d78fikflryjgj.cloudfront.net/images/landing/tour/ced9204d1b2147d08fd9387621657204/mini-board.png" alt="mini Trello board" /> <h2>Neatly organized</h2> <p>Put your cards in lists to track progress, categorize things, or just make sense out of the chaos of life. Lists are fully customizable.</p> </li> </ul> </div> </section> <section id="tourCards" class="tour-section"> <div class="width-wrapper card-pics"> <h1>Card Tricks</h1> <p class="intro">One little card, lots of cool features</p> <div id="tourCardFront"> <div class="card-pic"> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/tour/0c074e98f71f65d5ed44e4c43ae6272e/card-front.png" alt="Trello card front" /> </div> <div class="label"> <span class="arrow"></span> <h2>The Front</h2> <p>Get a quick overview of all the information that\u2019s on the card.</p> </div> </div> <div id="tourCardBack"> <div class="card-pic"> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/tour/1fa5e17a92c9c9c4d2d5c4d917f71779/card-back.png" alt="Trello card back" /> </div> <div class="label"> <span class="arrow"></span> <h2>The Back</h2> <p>Add all kinds of information: due dates, checklists, attachments, comments, and more.</p> </div> </div> </div> <div class="tour-features-wrapper"> <ul class="tour-features width-wrapper clearfix"> <li> <div class="pic"><img src="https://d78fikflryjgj.cloudfront.net/images/landing/tour/8560c6e6acd76ac48ade2028a53bf5f3/feature-screenshot_01.png" alt="checklist screenshot" /></div> <h2>Don\u2019t forget a thing</h2> <p>Add a checklist to keep on top of all those little to-dos. There\u2019s also a nice, big progress meter, because who doesn\u2019t love a nice, big progress meter?</p> </li> <li> <div class="pic"><img src="https://d78fikflryjgj.cloudfront.net/images/landing/tour/9e949117d4da1b7a65a37726e1f704db/feature-screenshot_02.png" alt="attachments screenshot" /></div> <h2>Your files, right where you need them</h2> <p>Got a relevant file, image, or document? Attach it right to the card, and you\u2019ll never have to go scrambling through your inbox looking for it later.</p> </li> <li> <div class="pic"><img src="https://d78fikflryjgj.cloudfront.net/images/landing/tour/dadae924639fddf9d2ef6cf0d105818f/feature-screenshot_03.png" alt="card covers screenshot" /></div> <h2>Bring your board to life</h2> <p>Attach photos, drawings, sketches, and mockups to quickly illustrate ideas at a glance.</p> </li> <li> <div class="pic"><img src="https://d78fikflryjgj.cloudfront.net/images/landing/tour/bc292d99b99ebb2cb299b373a494f6ec/feature-screenshot_04.png" alt="labels screenshot" /></div> <h2>Find cards easily</h2> <p>Customize labels for your cards, and use filters to only show what you want. You can also filter by keywords and by person (if you\u2019re on a team).</p> </li> <li> <div class="pic"><img src="https://d78fikflryjgj.cloudfront.net/images/landing/tour/314ee5c46b236c3fa5574e053b3713ab/feature-screenshot_05.png" alt="deadlines screenshot" /></div> <h2>Never miss a deadline</h2> <p>Attach a date and it will appear on the front of the card. When that date is approaching, it will turn yellow as a gentle reminder.</p> </li> <li> <div class="pic"><img src="https://d78fikflryjgj.cloudfront.net/images/landing/tour/e7690a3770d9c548d55e307ba5281c24/feature-screenshot_06.png" alt="activity screenshot" /></div> <h2>See into the past</h2> <p>Trello keeps a record of everything that\u2019s happened on the card: comments, changes, additions. You\u2019ll never wonder \u201cHow did that happen?\u201d again.</p> </li> </ul> </div> </section> <section id="tourWorkingTogether" class="tour-section"> <div class="width-wrapper"> <h1>Working together</h1> <p class="intro">Team projects are where Trello really shines. Improve communication, eliminate email traffic, and get everyone on the same page\u2014fast. And it\u2019s so easy to learn you don\u2019t even need a <a href="http://www.youtube.com/watch?v=DP3MFBzMH2o" target="_blank">training montage</a>.</p> <img src="https://d78fikflryjgj.cloudfront.net/images/landing/tour/a2779d2398b2fa6c37de63748176f33c/example-board-team.png" id="tourExampleBoardTeam" alt="Trello board example - collaborative board" /> </div> <div class="tour-features-wrapper"> <ul class="tour-features width-wrapper clearfix"> <li> <div class="pic"><img src="https://d78fikflryjgj.cloudfront.net/images/landing/tour/74a852efbde6d3aab147c996114302fc/feature-screenshot_07.png" alt="board members screenshot" /></div> <h2>Get everyone onboard</h2> <p>Invite as many people as you want to a board. Board members can all add cards, make changes, upload attachments, and more.</p> </li> <li> <div class="pic"><img src="https://d78fikflryjgj.cloudfront.net/images/landing/tour/4bc53d5ac6760400574e4b9004353b8c/feature-screenshot_08.png" alt="real-time collaboration screenshot" /></div> <h2>Collaborate in real-time</h2> <p>Changes made by others appear instantaneously on your screen. You never have to wait for a page to reload to see the latest.</p> </li> <li> <div class="pic"><img src="https://d78fikflryjgj.cloudfront.net/images/landing/tour/d52b9502e2e881220f58f4b1b14a47e9/feature-screenshot_09.png" alt="notifications screenshot" /></div> <h2>Stay in the loop</h2> <p>Email notifications and an activity log keep you informed of the latest changes. You can also subscribe to specific cards to get timely information on what you care about the most.</p> </li> <li> <div class="pic"><img src="https://d78fikflryjgj.cloudfront.net/images/landing/tour/913c81092ffa98b0ffd4d7f130aa42b3/feature-screenshot_10.png" alt="assining cards screenshot" /></div> <h2>Assign tasks</h2> <p>Assign cards to board members, and everyone will be able to see what everyone else is working on. The assigned folks also get handy notifications sent to them.</p> </li> <li> <div class="pic"><img src="https://d78fikflryjgj.cloudfront.net/images/landing/tour/222d36956c8be4501cf359af8f50bd1b/feature-screenshot_11.png" alt="voting screenshot" /></div> <h2>Gather opinions</h2> <p>Board members can vote on cards, so you know what everyone\u2019s priorities are. Gain insight into what the team thinks and make informed decisions.</p> </li> <li> <div class="pic"><img src="https://d78fikflryjgj.cloudfront.net/images/landing/tour/d3b99d125949f20cf87c9442114728f9/feature-screenshot_12.png" alt="organizations screenshot" /></div> <h2>Everything in one place</h2> <p>Create a Trello organization to collect all your people and boards together in one place.</p> </li> </ul> </div> </section> <section id="tourMoreInfo" class="tour-section"> <h1>Power, security &amp; speed</h1> <ul class="width-wrapper tour-features"> <li> <div class="pic"><img src="https://d78fikflryjgj.cloudfront.net/images/landing/tour/131ac1b874c53e6723633b4393a14a8e/feature-icon_01.png" alt="dino monster attack! rawr!" /></div> <h2>Disaster-proof</h2> <p>If you get rid of a board, card, or list by accident, you can always get it back. Plus we back up all your information, so it\u2019s safe even in a Godzilla attack.</p> </li> <li> <div class="pic"><img src="https://d78fikflryjgj.cloudfront.net/images/landing/tour/ae8021a3262238ac30c6eeaf860cedca/feature-icon_02.png" alt="a padlock" /></div> <h2>Your data is private and secure</h2> <p>You have full control over who sees your boards. Plus all data is sent over a SSL/HTTPS connection, the same technology used by banks.</p> </li> <li> <div class="pic"><img src="https://d78fikflryjgj.cloudfront.net/images/landing/tour/7b643f884843ef314a8e5aa73dc29eb9/feature-icon_03.png" alt="multiple screen sizes" /></div> <h2>Works at any screen size</h2> <p>Trello is designed to automatically scale to fit any screen size, from the tiniest smartphone to giant multi-panel wall displays.</p> </li> <li> <div class="pic"><img src="https://d78fikflryjgj.cloudfront.net/images/landing/tour/c11c1ca64d5b67395da45c029304bb09/feature-icon_04.png" alt="magnifying glass" /></div> <h2>Fast search</h2> <p>Whether it\u2019s a board, card, or Trello member, Trello\u2019s powerful search helps you find what\u2019s needed, fast.</p> </li> <li> <div class="pic"><img src="https://d78fikflryjgj.cloudfront.net/images/landing/tour/a880a960e3591df4ec0df3b15aba4fec/feature-icon_05.png" alt="Apple and Android logos" /></div> <h2>Take it to-go</h2> <p>Get Trello for <a href="http://itunes.apple.com/us/app/trello/id461504587?mt=8" target="_blank">iPhone</a> and <a href="https://play.google.com/store/apps/details?id=com.trello" target="_blank">Android</a>, and access your Boards on the go.</p> </li> <li> <div class="pic"><img src="https://d78fikflryjgj.cloudfront.net/images/landing/tour/11b2d65ca6e3a3bb38ee170bf06765f2/feature-icon_06.png" alt="a wrench" /></div> <h2>Developer API</h2> <p>If you love to play with code as much as we do, there\u2019s an API for you. Create your own apps, plugins and extensions.</p> </li> </ul> </section> <section id="tourPricing" class="tour-section"> <div class="width-wrapper"> <h1>And it\u2019s all free</h1> <p class="intro"><strong>Yup, Trello is free, now and forever.</strong> That means we\u2019ll never take away everything you love and put it behind a pay wall. So feel free to fall in love\u2014it\u2019s here to stay. If only more of life were like that!</p> </div> </section> ');
this.s(this.f("__loggedIn",c,b,1),c,b,1,0,0,"")||this.b(' <section id="tourSignup" class="tour-section"> <div class="width-wrapper clearfix"> <div id="tourSignUpButton"> <a class="button primary landing-signup-button" href="/signup"> Sign Up </a> <p>It\u2019s free and takes just a few seconds.</p> </div> </div> </section> ');this.b(" ");this.b(this.rp("promo_footer",c,b,""));this.b(" </div> ");return this.fl()},promo_footer:function(c,b,d){this.b(d||"");this.b('<footer id="promoFooter" class="landing-section"> <div class="width-wrapper promo-wrapper"> <nav> <a href="/tour">Tour</a> <a href="http://blog.trello.com/">Blog</a> <a href="/gold">Gold</a> <a href="/business-class">Business Class</a> <a href="http://help.trello.com">Help</a> <a class="js-real-link" href="/legal">Terms of Service</a> <a class="js-real-link" href="/privacy">Privacy</a> <a href="https://twitter.com/trello" target="_blank"><span class="icon-sm icon-twitter"/></a> <a href="https://www.facebook.com/TrelloApp" target="_blank"><span class="icon-sm icon-facebook"/></a> </nav> <div class="landing-badges"> <p> Lovingly crafted in New York City by <br /> <a href="http://www.fogcreek.com/?fccmp=trello_landing" target="_blank"><img src="https://d78fikflryjgj.cloudfront.net/images/landing/f7aa393018a5bd99b1cbddfa20238dc1/fog-creek-logo.png" alt="Fog Creek logo" /></a> </p> </div> <p class="copyright"> &copy; Copyright 2000-2014 Fog Creek Software, Inc. All rights reserved. </p> </div> </footer> ');
return this.fl()}};(function(c,b){"object"===typeof module&&"object"===typeof module.exports?module.exports=c.document?b(c,!0):function(d){if(!d.document)throw Error("jQuery requires a window with a document");return b(d)}:b(c)})("undefined"!==typeof window?window:this,function(c,b){function d(b){var d=b.length,e=t.type(b);return"function"===e||t.isWindow(b)?!1:1===b.nodeType&&d?!0:"array"===e||0===d||"number"===typeof d&&0<d&&d-1 in b}function e(b,d,e){if(t.isFunction(d))return t.grep(b,function(b,
f){return!!d.call(b,f,b)!==e});if(d.nodeType)return t.grep(b,function(b){return b===d!==e});if("string"===typeof d){if(ka.test(d))return t.filter(d,b,e);d=t.filter(d,b)}return t.grep(b,function(b){return 0<=wa.call(d,b)!==e})}function g(b,d){for(;(b=b[d])&&1!==b.nodeType;);return b}function f(b){var d=pa[b]={};t.each(b.match(ia)||[],function(b,e){d[e]=!0});return d}function h(){O.removeEventListener("DOMContentLoaded",h,!1);c.removeEventListener("load",h,!1);t.ready()}function m(){Object.defineProperty(this.cache=
{},0,{get:function(){return{}}});this.expando=t.expando+Math.random()}function q(b,d,e){if(void 0===e&&1===b.nodeType)if(e="data-"+d.replace(ya,"-$1").toLowerCase(),e=b.getAttribute(e),"string"===typeof e){try{e="true"===e?!0:"false"===e?!1:"null"===e?null:+e+""===e?+e:ua.test(e)?t.parseJSON(e):e}catch(f){}fa.set(b,d,e)}else e=void 0;return e}function u(){return!0}function x(){return!1}function k(){try{return O.activeElement}catch(b){}}function l(b,d){return t.nodeName(b,"table")&&t.nodeName(11!==
d.nodeType?d:d.firstChild,"tr")?b.getElementsByTagName("tbody")[0]||b.appendChild(b.ownerDocument.createElement("tbody")):b}function B(b){b.type=(null!==b.getAttribute("type"))+"/"+b.type;return b}function H(b){var d=Wa.exec(b.type);d?b.type=d[1]:b.removeAttribute("type");return b}function E(b,d){for(var e=0,f=b.length;e<f;e++)U.set(b[e],"globalEval",!d||U.get(d[e],"globalEval"))}function N(b,d){var e,f,c,g;if(1===d.nodeType){if(U.hasData(b)&&(g=U.access(b),e=U.set(d,g),g=g.events))for(c in delete e.handle,
e.events={},g){e=0;for(f=g[c].length;e<f;e++)t.event.add(d,c,g[c][e])}fa.hasData(b)&&(c=fa.access(b),c=t.extend({},c),fa.set(d,c))}}function J(b,d){var e=b.getElementsByTagName?b.getElementsByTagName(d||"*"):b.querySelectorAll?b.querySelectorAll(d||"*"):[];return void 0===d||d&&t.nodeName(b,d)?t.merge([b],e):e}function R(b,d){var e=t(d.createElement(b)).appendTo(d.body),f=c.getDefaultComputedStyle?c.getDefaultComputedStyle(e[0]).display:t.css(e[0],"display");e.detach();return f}function ca(b){var d=
O,e=Sa[b];if(!e){e=R(b,d);if("none"===e||!e)Ja=(Ja||t("<iframe frameborder='0' width='0' height='0'/>")).appendTo(d.documentElement),d=Ja[0].contentDocument,d.write(),d.close(),e=R(b,d),Ja.detach();Sa[b]=e}return e}function n(b,d,e){var f,c,g=b.style;(e=e||Oa(b))&&(c=e.getPropertyValue(d)||e[d]);e&&(""===c&&!t.contains(b.ownerDocument,b)&&(c=t.style(b,d)),Qa.test(c)&&Ta.test(d)&&(b=g.width,d=g.minWidth,f=g.maxWidth,g.minWidth=g.maxWidth=g.width=c,c=e.width,g.width=b,g.minWidth=d,g.maxWidth=f));return void 0!==
c?c+"":c}function z(b,d){return{get:function(){if(b())delete this.get;else return(this.get=d).apply(this,arguments)}}}function s(b,d){if(d in b)return d;for(var e=d[0].toUpperCase()+d.slice(1),f=d,c=eb.length;c--;)if(d=eb[c]+e,d in b)return d;return f}function v(b,d,e){return(b=hb.exec(d))?Math.max(0,b[1]-(e||0))+(b[2]||"px"):d}function w(b,d,e,f,c){d=e===(f?"border":"content")?4:"width"===d?1:0;for(var g=0;4>d;d+=2)"margin"===e&&(g+=t.css(b,e+ta[d],!0,c)),f?("content"===e&&(g-=t.css(b,"padding"+
ta[d],!0,c)),"margin"!==e&&(g-=t.css(b,"border"+ta[d]+"Width",!0,c))):(g+=t.css(b,"padding"+ta[d],!0,c),"padding"!==e&&(g+=t.css(b,"border"+ta[d]+"Width",!0,c)));return g}function y(b,d,e){var f=!0,c="width"===d?b.offsetWidth:b.offsetHeight,g=Oa(b),h="border-box"===t.css(b,"boxSizing",!1,g);if(0>=c||null==c){c=n(b,d,g);if(0>c||null==c)c=b.style[d];if(Qa.test(c))return c;f=h&&(M.boxSizingReliable()||c===b.style[d]);c=parseFloat(c)||0}return c+w(b,d,e||(h?"border":"content"),f,g)+"px"}function A(b,
d){for(var e,f,c,g=[],h=0,m=b.length;h<m;h++)if(f=b[h],f.style)if(g[h]=U.get(f,"olddisplay"),e=f.style.display,d)!g[h]&&"none"===e&&(f.style.display=""),""===f.style.display&&va(f)&&(g[h]=U.access(f,"olddisplay",ca(f.nodeName)));else if(!g[h]&&(c=va(f),e&&"none"!==e||!c))U.set(f,"olddisplay",c?e:t.css(f,"display"));for(h=0;h<m;h++)if(f=b[h],f.style&&(!d||"none"===f.style.display||""===f.style.display))f.style.display=d?g[h]||"":"none";return b}function C(b,d,e,f,c){return new C.prototype.init(b,d,
e,f,c)}function Z(){setTimeout(function(){Ka=void 0});return Ka=t.now()}function ja(b,d){var e,f=0,c={height:b};for(d=d?1:0;4>f;f+=2-d)e=ta[f],c["margin"+e]=c["padding"+e]=b;d&&(c.opacity=c.width=b);return c}function Ia(b,d,e){for(var f,c=(Ra[d]||[]).concat(Ra["*"]),g=0,h=c.length;g<h;g++)if(f=c[g].call(e,d,b))return f}function xa(b,d){var e,f,c,g,h;for(e in b)if(f=t.camelCase(e),c=d[f],g=b[e],t.isArray(g)&&(c=g[1],g=b[e]=g[0]),e!==f&&(b[f]=g,delete b[e]),(h=t.cssHooks[f])&&"expand"in h)for(e in g=
h.expand(g),delete b[f],g)e in b||(b[e]=g[e],d[e]=c);else d[f]=c}function Ya(b,d,e){var f,c=0,g=Xa.length,h=t.Deferred().always(function(){delete m.elem}),m=function(){if(f)return!1;for(var d=Ka||Z(),d=Math.max(0,q.startTime+q.duration-d),e=1-(d/q.duration||0),c=0,g=q.tweens.length;c<g;c++)q.tweens[c].run(e);h.notifyWith(b,[q,e,d]);if(1>e&&g)return d;h.resolveWith(b,[q]);return!1},q=h.promise({elem:b,props:t.extend({},d),opts:t.extend(!0,{specialEasing:{}},e),originalProperties:d,originalOptions:e,
startTime:Ka||Z(),duration:e.duration,tweens:[],createTween:function(d,e){var f=t.Tween(b,q.opts,d,e,q.opts.specialEasing[d]||q.opts.easing);q.tweens.push(f);return f},stop:function(d){var e=0,c=d?q.tweens.length:0;if(f)return this;for(f=!0;e<c;e++)q.tweens[e].run(1);d?h.resolveWith(b,[q,d]):h.rejectWith(b,[q,d]);return this}});e=q.props;for(xa(e,q.opts.specialEasing);c<g;c++)if(d=Xa[c].call(q,b,e,q.opts))return d;t.map(e,Ia,q);t.isFunction(q.opts.start)&&q.opts.start.call(b,q);t.fx.timer(t.extend(m,
{elem:b,anim:q,queue:q.opts.queue}));return q.progress(q.opts.progress).done(q.opts.done,q.opts.complete).fail(q.opts.fail).always(q.opts.always)}function D(b){return function(d,e){"string"!==typeof d&&(e=d,d="*");var f,c=0,g=d.toLowerCase().match(ia)||[];if(t.isFunction(e))for(;f=g[c++];)"+"===f[0]?(f=f.slice(1)||"*",(b[f]=b[f]||[]).unshift(e)):(b[f]=b[f]||[]).push(e)}}function G(b,d,e,f){function c(m){var q;g[m]=!0;t.each(b[m]||[],function(b,m){var u=m(d,e,f);if("string"===typeof u&&!h&&!g[u])return d.dataTypes.unshift(u),
c(u),!1;if(h)return!(q=u)});return q}var g={},h=b===pb;return c(d.dataTypes[0])||!g["*"]&&c("*")}function K(b,d){var e,f,c=t.ajaxSettings.flatOptions||{};for(e in d)void 0!==d[e]&&((c[e]?b:f||(f={}))[e]=d[e]);f&&t.extend(!0,b,f);return b}function da(b,d,e,f){var c;if(t.isArray(d))t.each(d,function(d,c){e||Ib.test(b)?f(b,c):da(b+"["+("object"===typeof c?d:"")+"]",c,e,f)});else if(!e&&"object"===t.type(d))for(c in d)da(b+"["+c+"]",d[c],e,f);else f(b,d)}var V=[],la=V.slice,F=V.concat,Za=V.push,wa=V.indexOf,
I={},P=I.toString,Q=I.hasOwnProperty,S="".trim,M={},O=c.document,t=function(b,d){return new t.fn.init(b,d)},X=/^-ms-/,aa=/-([\da-z])/gi,W=function(b,d){return d.toUpperCase()};t.fn=t.prototype={jquery:"2.1.0",constructor:t,selector:"",length:0,toArray:function(){return la.call(this)},get:function(b){return null!=b?0>b?this[b+this.length]:this[b]:la.call(this)},pushStack:function(b){b=t.merge(this.constructor(),b);b.prevObject=this;b.context=this.context;return b},each:function(b,d){return t.each(this,
b,d)},map:function(b){return this.pushStack(t.map(this,function(d,e){return b.call(d,e,d)}))},slice:function(){return this.pushStack(la.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(b){var d=this.length;b=+b+(0>b?d:0);return this.pushStack(0<=b&&b<d?[this[b]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Za,sort:V.sort,splice:V.splice};t.extend=t.fn.extend=function(){var b,d,e,f,c,g=arguments[0]||{},h=1,m=arguments.length,
q=!1;"boolean"===typeof g&&(q=g,g=arguments[h]||{},h++);"object"!==typeof g&&!t.isFunction(g)&&(g={});h===m&&(g=this,h--);for(;h<m;h++)if(null!=(b=arguments[h]))for(d in b)e=g[d],f=b[d],g!==f&&(q&&f&&(t.isPlainObject(f)||(c=t.isArray(f)))?(c?(c=!1,e=e&&t.isArray(e)?e:[]):e=e&&t.isPlainObject(e)?e:{},g[d]=t.extend(q,e,f)):void 0!==f&&(g[d]=f));return g};t.extend({expando:"jQuery"+("2.1.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(b){throw Error(b);},noop:function(){},isFunction:function(b){return"function"===
t.type(b)},isArray:Array.isArray,isWindow:function(b){return null!=b&&b===b.window},isNumeric:function(b){return 0<=b-parseFloat(b)},isPlainObject:function(b){if("object"!==t.type(b)||b.nodeType||t.isWindow(b))return!1;try{if(b.constructor&&!Q.call(b.constructor.prototype,"isPrototypeOf"))return!1}catch(d){return!1}return!0},isEmptyObject:function(b){for(var d in b)return!1;return!0},type:function(b){return null==b?b+"":"object"===typeof b||"function"===typeof b?I[P.call(b)]||"object":typeof b},globalEval:function(b){var d;
d=eval;if(b=t.trim(b))1===b.indexOf("use strict")?(d=O.createElement("script"),d.text=b,O.head.appendChild(d).parentNode.removeChild(d)):d(b)},camelCase:function(b){return b.replace(X,"ms-").replace(aa,W)},nodeName:function(b,d){return b.nodeName&&b.nodeName.toLowerCase()===d.toLowerCase()},each:function(b,e,f){var c,g=0,h=b.length;c=d(b);if(f)if(c)for(;g<h&&!(c=e.apply(b[g],f),!1===c);g++);else for(g in b){if(c=e.apply(b[g],f),!1===c)break}else if(c)for(;g<h&&!(c=e.call(b[g],g,b[g]),!1===c);g++);
else for(g in b)if(c=e.call(b[g],g,b[g]),!1===c)break;return b},trim:function(b){return null==b?"":S.call(b)},makeArray:function(b,e){var f=e||[];null!=b&&(d(Object(b))?t.merge(f,"string"===typeof b?[b]:b):Za.call(f,b));return f},inArray:function(b,d,e){return null==d?-1:wa.call(d,b,e)},merge:function(b,d){for(var e=+d.length,f=0,c=b.length;f<e;f++)b[c++]=d[f];b.length=c;return b},grep:function(b,d,e){for(var f=[],c=0,g=b.length,h=!e;c<g;c++)e=!d(b[c],c),e!==h&&f.push(b[c]);return f},map:function(b,
e,f){var c,g=0,h=b.length,m=[];if(d(b))for(;g<h;g++)c=e(b[g],g,f),null!=c&&m.push(c);else for(g in b)c=e(b[g],g,f),null!=c&&m.push(c);return F.apply([],m)},guid:1,proxy:function(b,d){var e,f;"string"===typeof d&&(e=b[d],d=b,b=e);if(t.isFunction(b))return f=la.call(arguments,2),e=function(){return b.apply(d||this,f.concat(la.call(arguments)))},e.guid=b.guid=b.guid||t.guid++,e},now:Date.now,support:M});t.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(b,d){I["[object "+
d+"]"]=d.toLowerCase()});var Y=function(b){function d(b,e,f,c){var g,h,m,q,u;(e?e.ownerDocument||e:A)!==ja&&v(e);e=e||ja;f=f||[];if(!b||"string"!==typeof b)return f;if(1!==(q=e.nodeType)&&9!==q)return[];if(w&&!c){if(g=fa.exec(b))if(m=g[1])if(9===q)if((h=e.getElementById(m))&&h.parentNode){if(h.id===m)return f.push(h),f}else return f;else{if(e.ownerDocument&&(h=e.ownerDocument.getElementById(m))&&Ia(e,h)&&h.id===m)return f.push(h),f}else{if(g[2])return M.apply(f,e.getElementsByTagName(b)),f;if((m=
g[3])&&R.getElementsByClassName&&e.getElementsByClassName)return M.apply(f,e.getElementsByClassName(m)),f}if(R.qsa&&(!V||!V.test(b))){h=g=la;m=e;u=9===q&&b;if(1===q&&"object"!==e.nodeName.toLowerCase()){q=k(b);(g=e.getAttribute("id"))?h=g.replace(ia,"\\$&"):e.setAttribute("id",h);h="[id='"+h+"'] ";for(m=q.length;m--;)q[m]=h+H(q[m]);m=ha.test(b)&&E(e.parentNode)||e;u=q.join(",")}if(u)try{return M.apply(f,m.querySelectorAll(u)),f}catch(x){}finally{g||e.removeAttribute("id")}}}var sa;a:{b=b.replace(S,
"$1");h=k(b);if(!c&&1===h.length){g=h[0]=h[0].slice(0);if(2<g.length&&"ID"===(sa=g[0]).type&&R.getById&&9===e.nodeType&&w&&K.relative[g[1].type]){e=(K.find.ID(sa.matches[0].replace(ba,ea),e)||[])[0];if(!e){sa=f;break a}b=b.slice(g.shift().value.length)}for(q=U.needsContext.test(b)?0:g.length;q--;){sa=g[q];if(K.relative[m=sa.type])break;if(m=K.find[m])if(c=m(sa.matches[0].replace(ba,ea),ha.test(g[0].type)&&E(e.parentNode)||e)){g.splice(q,1);b=c.length&&H(g);if(!b){M.apply(f,c);sa=f;break a}break}}}Z(b,
h)(c,e,!w,f,ha.test(b)&&E(e.parentNode)||e);sa=f}return sa}function e(){function b(e,f){d.push(e+" ")>K.cacheLength&&delete b[d.shift()];return b[e+" "]=f}var d=[];return b}function f(b){b[la]=!0;return b}function c(b){var d=ja.createElement("div");try{return!!b(d)}catch(e){return!1}finally{d.parentNode&&d.parentNode.removeChild(d)}}function g(b,d){for(var e=b.split("|"),f=b.length;f--;)K.attrHandle[e[f]]=d}function h(b,d){var e=d&&b,f=e&&1===b.nodeType&&1===d.nodeType&&(~d.sourceIndex||Rb)-(~b.sourceIndex||
Rb);if(f)return f;if(e)for(;e=e.nextSibling;)if(e===d)return-1;return b?1:-1}function m(b){return function(d){return"input"===d.nodeName.toLowerCase()&&d.type===b}}function q(b){return function(d){var e=d.nodeName.toLowerCase();return("input"===e||"button"===e)&&d.type===b}}function u(b){return f(function(d){d=+d;return f(function(e,f){for(var c,g=b([],e.length,d),h=g.length;h--;)if(e[c=g[h]])e[c]=!(f[c]=e[c])})})}function E(b){return b&&typeof b.getElementsByTagName!==F&&b}function x(){}function k(b,
e){var f,c,g,h,m,q,u;if(m=D[b+" "])return e?0:m.slice(0);m=b;q=[];for(u=K.preFilter;m;){if(!f||(c=Di.exec(m)))c&&(m=m.slice(c[0].length)||m),q.push(g=[]);f=!1;if(c=Ci.exec(m))f=c.shift(),g.push({value:f,type:c[0].replace(S," ")}),m=m.slice(f.length);for(h in K.filter)if((c=U[h].exec(m))&&(!u[h]||(c=u[h](c))))f=c.shift(),g.push({value:f,type:h,matches:c}),m=m.slice(f.length);if(!f)break}return e?m.length:m?d.error(b):D(b,q).slice(0)}function H(b){for(var d=0,e=b.length,f="";d<e;d++)f+=b[d].value;return f}
function l(b,d,e){var f=d.dir,c=e&&"parentNode"===f,g=C++;return d.first?function(d,e,g){for(;d=d[f];)if(1===d.nodeType||c)return b(d,e,g)}:function(d,e,h){var m,q,u=[xa,g];if(h)for(;d=d[f];){if((1===d.nodeType||c)&&b(d,e,h))return!0}else for(;d=d[f];)if(1===d.nodeType||c){q=d[la]||(d[la]={});if((m=q[f])&&m[0]===xa&&m[1]===g)return u[2]=m[2];q[f]=u;if(u[2]=b(d,e,h))return!0}}}function B(b){return 1<b.length?function(d,e,f){for(var c=b.length;c--;)if(!b[c](d,e,f))return!1;return!0}:b[0]}function L(b,
d,e,f,c){for(var g,h=[],m=0,q=b.length,u=null!=d;m<q;m++)if(g=b[m])if(!e||e(g,f,c))h.push(g),u&&d.push(m);return h}function N(b,e,c,g,h,m){g&&!g[la]&&(g=N(g));h&&!h[la]&&(h=N(h,m));return f(function(f,m,q,u){var E,x,k=[],sa=[],H=m.length,l;if(!(l=f)){l=e||"*";for(var B=q.nodeType?[q]:q,N=[],J=0,T=B.length;J<T;J++)d(l,B[J],N);l=N}l=b&&(f||!e)?L(l,k,b,q,u):l;B=c?h||(f?b:H||g)?[]:m:l;c&&c(l,B,q,u);if(g){E=L(B,sa);g(E,[],q,u);for(q=E.length;q--;)if(x=E[q])B[sa[q]]=!(l[sa[q]]=x)}if(f){if(h||b){if(h){E=
[];for(q=B.length;q--;)if(x=B[q])E.push(l[q]=x);h(null,B=[],E,u)}for(q=B.length;q--;)if((x=B[q])&&-1<(E=h?O.call(f,x):k[q]))f[E]=!(m[E]=x)}}else B=L(B===m?B.splice(H,B.length):B),h?h(null,m,B,u):M.apply(m,B)})}function J(b){var d,e,f,c=b.length,g=K.relative[b[0].type];e=g||K.relative[" "];for(var h=g?1:0,m=l(function(b){return b===d},e,!0),q=l(function(b){return-1<O.call(d,b)},e,!0),u=[function(b,e,f){return!g&&(f||e!==n)||((d=e).nodeType?m(b,e,f):q(b,e,f))}];h<c;h++)if(e=K.relative[b[h].type])u=
[l(B(u),e)];else{e=K.filter[b[h].type].apply(null,b[h].matches);if(e[la]){for(f=++h;f<c&&!K.relative[b[f].type];f++);return N(1<h&&B(u),1<h&&H(b.slice(0,h-1).concat({value:" "===b[h-2].type?"*":""})).replace(S,"$1"),e,h<f&&J(b.slice(h,f)),f<c&&J(b=b.slice(f)),f<c&&H(b))}u.push(e)}return B(u)}function T(b,e){var c=0<e.length,g=0<b.length,h=function(f,h,m,q,u){var E,x,k,sa=0,l="0",H=f&&[],B=[],N=n,J=f||g&&K.find.TAG("*",u),T=xa+=null==N?1:Math.random()||0.1,t=J.length;for(u&&(n=h!==ja&&h);l!==t&&null!=
(E=J[l]);l++){if(g&&E){for(x=0;k=b[x++];)if(k(E,h,m)){q.push(E);break}u&&(xa=T)}c&&((E=!k&&E)&&sa--,f&&H.push(E))}sa+=l;if(c&&l!==sa){for(x=0;k=e[x++];)k(H,B,h,m);if(f){if(0<sa)for(;l--;)!H[l]&&!B[l]&&(B[l]=I.call(q));B=L(B)}M.apply(q,B);u&&(!f&&0<B.length&&1<sa+e.length)&&d.uniqueSort(q)}u&&(xa=T,n=N);return H};return c?f(h):h}var t,R,K,z,ca,Z,n,s,Ba,v,ja,da,w,V,y,jc,Ia,la="sizzle"+-new Date,A=b.document,xa=0,C=0,Ya=e(),D=e(),G=e(),Sb=function(b,d){b===d&&(Ba=!0);return 0},F="undefined",Rb=-2147483648,
Za={}.hasOwnProperty,wa=[],I=wa.pop,P=wa.push,M=wa.push,Ce=wa.slice,O=wa.indexOf||function(b){for(var d=0,e=this.length;d<e;d++)if(this[d]===b)return d;return-1},Q="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),Be="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+Q+")|)|)[\\x20\\t\\r\\n\\f]*\\]",bd=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+
Be.replace(3,8)+")*)|.*)\\)|)",S=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,Di=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,Ci=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,Ei=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,Fi=RegExp(bd),X=RegExp("^"+Q+"$"),U={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:RegExp("^"+Be),PSEUDO:RegExp("^"+bd),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)",
"i"),bool:RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,aa=/^h\d$/i,W=/^[^{]+\{\s*\[native \w/,fa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ha=/[+~]/,ia=/'|\\/g,ba=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,
ea=function(b,d,e){b="0x"+d-65536;return b!==b||e?d:0>b?String.fromCharCode(b+65536):String.fromCharCode(b>>10|55296,b&1023|56320)};try{M.apply(wa=Ce.call(A.childNodes),A.childNodes),wa[A.childNodes.length].nodeType}catch(ka){M={apply:wa.length?function(b,d){P.apply(b,Ce.call(d))}:function(b,d){for(var e=b.length,f=0;b[e++]=d[f++];);b.length=e-1}}}R=d.support={};ca=d.isXML=function(b){return(b=b&&(b.ownerDocument||b).documentElement)?"HTML"!==b.nodeName:!1};v=d.setDocument=function(b){var d=b?b.ownerDocument||
b:A;b=d.defaultView;if(d===ja||9!==d.nodeType||!d.documentElement)return ja;ja=d;da=d.documentElement;w=!ca(d);b&&b!==b.top&&(b.addEventListener?b.addEventListener("unload",function(){v()},!1):b.attachEvent&&b.attachEvent("onunload",function(){v()}));R.attributes=c(function(b){b.className="i";return!b.getAttribute("className")});R.getElementsByTagName=c(function(b){b.appendChild(d.createComment(""));return!b.getElementsByTagName("*").length});R.getElementsByClassName=W.test(d.getElementsByClassName)&&
c(function(b){b.innerHTML="<div class='a'></div><div class='a i'></div>";b.firstChild.className="i";return 2===b.getElementsByClassName("i").length});R.getById=c(function(b){da.appendChild(b).id=la;return!d.getElementsByName||!d.getElementsByName(la).length});R.getById?(K.find.ID=function(b,d){if(typeof d.getElementById!==F&&w){var e=d.getElementById(b);return e&&e.parentNode?[e]:[]}},K.filter.ID=function(b){var d=b.replace(ba,ea);return function(b){return b.getAttribute("id")===d}}):(delete K.find.ID,
K.filter.ID=function(b){var d=b.replace(ba,ea);return function(b){return(b=typeof b.getAttributeNode!==F&&b.getAttributeNode("id"))&&b.value===d}});K.find.TAG=R.getElementsByTagName?function(b,d){if(typeof d.getElementsByTagName!==F)return d.getElementsByTagName(b)}:function(b,d){var e,f=[],c=0,g=d.getElementsByTagName(b);if("*"===b){for(;e=g[c++];)1===e.nodeType&&f.push(e);return f}return g};K.find.CLASS=R.getElementsByClassName&&function(b,d){if(typeof d.getElementsByClassName!==F&&w)return d.getElementsByClassName(b)};
y=[];V=[];if(R.qsa=W.test(d.querySelectorAll))c(function(b){b.innerHTML="<select t=''><option selected=''></option></select>";b.querySelectorAll("[t^='']").length&&V.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");b.querySelectorAll("[selected]").length||V.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");b.querySelectorAll(":checked").length||V.push(":checked")}),c(function(b){var e=d.createElement("input");
e.setAttribute("type","hidden");b.appendChild(e).setAttribute("name","D");b.querySelectorAll("[name=d]").length&&V.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");b.querySelectorAll(":enabled").length||V.push(":enabled",":disabled");b.querySelectorAll("*,:x");V.push(",.*:")});(R.matchesSelector=W.test(jc=da.webkitMatchesSelector||da.mozMatchesSelector||da.oMatchesSelector||da.msMatchesSelector))&&c(function(b){R.disconnectedMatch=jc.call(b,"div");jc.call(b,"[s!='']:x");y.push("!=",bd)});V=V.length&&RegExp(V.join("|"));
y=y.length&&RegExp(y.join("|"));Ia=(b=W.test(da.compareDocumentPosition))||W.test(da.contains)?function(b,d){var e=9===b.nodeType?b.documentElement:b,f=d&&d.parentNode;return b===f||!(!f||!(1===f.nodeType&&(e.contains?e.contains(f):b.compareDocumentPosition&&b.compareDocumentPosition(f)&16)))}:function(b,d){if(d)for(;d=d.parentNode;)if(d===b)return!0;return!1};Sb=b?function(b,e){if(b===e)return Ba=!0,0;var f=!b.compareDocumentPosition-!e.compareDocumentPosition;if(f)return f;f=(b.ownerDocument||b)===
(e.ownerDocument||e)?b.compareDocumentPosition(e):1;return f&1||!R.sortDetached&&e.compareDocumentPosition(b)===f?b===d||b.ownerDocument===A&&Ia(A,b)?-1:e===d||e.ownerDocument===A&&Ia(A,e)?1:s?O.call(s,b)-O.call(s,e):0:f&4?-1:1}:function(b,e){if(b===e)return Ba=!0,0;var f,c=0;f=b.parentNode;var g=e.parentNode,m=[b],q=[e];if(!f||!g)return b===d?-1:e===d?1:f?-1:g?1:s?O.call(s,b)-O.call(s,e):0;if(f===g)return h(b,e);for(f=b;f=f.parentNode;)m.unshift(f);for(f=e;f=f.parentNode;)q.unshift(f);for(;m[c]===
q[c];)c++;return c?h(m[c],q[c]):m[c]===A?-1:q[c]===A?1:0};return d};d.matches=function(b,e){return d(b,null,null,e)};d.matchesSelector=function(b,e){(b.ownerDocument||b)!==ja&&v(b);e=e.replace(Ei,"='$1']");if(R.matchesSelector&&w&&(!y||!y.test(e))&&(!V||!V.test(e)))try{var f=jc.call(b,e);if(f||R.disconnectedMatch||b.document&&11!==b.document.nodeType)return f}catch(c){}return 0<d(e,ja,null,[b]).length};d.contains=function(b,d){(b.ownerDocument||b)!==ja&&v(b);return Ia(b,d)};d.attr=function(b,d){(b.ownerDocument||
b)!==ja&&v(b);var e=K.attrHandle[d.toLowerCase()],e=e&&Za.call(K.attrHandle,d.toLowerCase())?e(b,d,!w):void 0;return void 0!==e?e:R.attributes||!w?b.getAttribute(d):(e=b.getAttributeNode(d))&&e.specified?e.value:null};d.error=function(b){throw Error("Syntax error, unrecognized expression: "+b);};d.uniqueSort=function(b){var d,e=[],f=0,c=0;Ba=!R.detectDuplicates;s=!R.sortStable&&b.slice(0);b.sort(Sb);if(Ba){for(;d=b[c++];)d===b[c]&&(f=e.push(c));for(;f--;)b.splice(e[f],1)}s=null;return b};z=d.getText=
function(b){var d,e="",f=0;if(d=b.nodeType)if(1===d||9===d||11===d){if("string"===typeof b.textContent)return b.textContent;for(b=b.firstChild;b;b=b.nextSibling)e+=z(b)}else{if(3===d||4===d)return b.nodeValue}else for(;d=b[f++];)e+=z(d);return e};K=d.selectors={cacheLength:50,createPseudo:f,match:U,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(b){b[1]=b[1].replace(ba,
ea);b[3]=(b[4]||b[5]||"").replace(ba,ea);"~="===b[2]&&(b[3]=" "+b[3]+" ");return b.slice(0,4)},CHILD:function(b){b[1]=b[1].toLowerCase();"nth"===b[1].slice(0,3)?(b[3]||d.error(b[0]),b[4]=+(b[4]?b[5]+(b[6]||1):2*("even"===b[3]||"odd"===b[3])),b[5]=+(b[7]+b[8]||"odd"===b[3])):b[3]&&d.error(b[0]);return b},PSEUDO:function(b){var d,e=!b[5]&&b[2];if(U.CHILD.test(b[0]))return null;if(b[3]&&void 0!==b[4])b[2]=b[4];else if(e&&Fi.test(e)&&(d=k(e,!0))&&(d=e.indexOf(")",e.length-d)-e.length))b[0]=b[0].slice(0,
d),b[2]=e.slice(0,d);return b.slice(0,3)}},filter:{TAG:function(b){var d=b.replace(ba,ea).toLowerCase();return"*"===b?function(){return!0}:function(b){return b.nodeName&&b.nodeName.toLowerCase()===d}},CLASS:function(b){var d=Ya[b+" "];return d||(d=RegExp("(^|[\\x20\\t\\r\\n\\f])"+b+"([\\x20\\t\\r\\n\\f]|$)"))&&Ya(b,function(b){return d.test("string"===typeof b.className&&b.className||typeof b.getAttribute!==F&&b.getAttribute("class")||"")})},ATTR:function(b,e,f){return function(c){c=d.attr(c,b);if(null==
c)return"!="===e;if(!e)return!0;c+="";return"="===e?c===f:"!="===e?c!==f:"^="===e?f&&0===c.indexOf(f):"*="===e?f&&-1<c.indexOf(f):"$="===e?f&&c.slice(-f.length)===f:"~="===e?-1<(" "+c+" ").indexOf(f):"|="===e?c===f||c.slice(0,f.length+1)===f+"-":!1}},CHILD:function(b,d,e,f,c){var g="nth"!==b.slice(0,3),h="last"!==b.slice(-4),m="of-type"===d;return 1===f&&0===c?function(b){return!!b.parentNode}:function(d,e,q){var u,E,x,k,sa;e=g!==h?"nextSibling":"previousSibling";var l=d.parentNode,H=m&&d.nodeName.toLowerCase();
q=!q&&!m;if(l){if(g){for(;e;){for(E=d;E=E[e];)if(m?E.nodeName.toLowerCase()===H:1===E.nodeType)return!1;sa=e="only"===b&&!sa&&"nextSibling"}return!0}sa=[h?l.firstChild:l.lastChild];if(h&&q){q=l[la]||(l[la]={});u=q[b]||[];k=u[0]===xa&&u[1];x=u[0]===xa&&u[2];for(E=k&&l.childNodes[k];E=++k&&E&&E[e]||(x=k=0)||sa.pop();)if(1===E.nodeType&&++x&&E===d){q[b]=[xa,k,x];break}}else if(q&&(u=(d[la]||(d[la]={}))[b])&&u[0]===xa)x=u[1];else for(;E=++k&&E&&E[e]||(x=k=0)||sa.pop();)if((m?E.nodeName.toLowerCase()===
H:1===E.nodeType)&&++x)if(q&&((E[la]||(E[la]={}))[b]=[xa,x]),E===d)break;x-=c;return x===f||0===x%f&&0<=x/f}}},PSEUDO:function(b,e){var c,g=K.pseudos[b]||K.setFilters[b.toLowerCase()]||d.error("unsupported pseudo: "+b);return g[la]?g(e):1<g.length?(c=[b,b,"",e],K.setFilters.hasOwnProperty(b.toLowerCase())?f(function(b,d){for(var f,c=g(b,e),h=c.length;h--;)f=O.call(b,c[h]),b[f]=!(d[f]=c[h])}):function(b){return g(b,0,c)}):g}},pseudos:{not:f(function(b){var d=[],e=[],c=Z(b.replace(S,"$1"));return c[la]?
f(function(b,d,e,f){f=c(b,null,f,[]);for(var g=b.length;g--;)if(e=f[g])b[g]=!(d[g]=e)}):function(b,f,g){d[0]=b;c(d,null,g,e);return!e.pop()}}),has:f(function(b){return function(e){return 0<d(b,e).length}}),contains:f(function(b){return function(d){return-1<(d.textContent||d.innerText||z(d)).indexOf(b)}}),lang:f(function(b){X.test(b||"")||d.error("unsupported lang: "+b);b=b.replace(ba,ea).toLowerCase();return function(d){var e;do if(e=w?d.lang:d.getAttribute("xml:lang")||d.getAttribute("lang"))return e=
e.toLowerCase(),e===b||0===e.indexOf(b+"-");while((d=d.parentNode)&&1===d.nodeType);return!1}}),target:function(d){var e=b.location&&b.location.hash;return e&&e.slice(1)===d.id},root:function(b){return b===da},focus:function(b){return b===ja.activeElement&&(!ja.hasFocus||ja.hasFocus())&&!(!b.type&&!b.href&&!~b.tabIndex)},enabled:function(b){return!1===b.disabled},disabled:function(b){return!0===b.disabled},checked:function(b){var d=b.nodeName.toLowerCase();return"input"===d&&!!b.checked||"option"===
d&&!!b.selected},selected:function(b){b.parentNode&&b.parentNode.selectedIndex;return!0===b.selected},empty:function(b){for(b=b.firstChild;b;b=b.nextSibling)if(6>b.nodeType)return!1;return!0},parent:function(b){return!K.pseudos.empty(b)},header:function(b){return aa.test(b.nodeName)},input:function(b){return Y.test(b.nodeName)},button:function(b){var d=b.nodeName.toLowerCase();return"input"===d&&"button"===b.type||"button"===d},text:function(b){var d;return"input"===b.nodeName.toLowerCase()&&"text"===
b.type&&(null==(d=b.getAttribute("type"))||"text"===d.toLowerCase())},first:u(function(){return[0]}),last:u(function(b,d){return[d-1]}),eq:u(function(b,d,e){return[0>e?e+d:e]}),even:u(function(b,d){for(var e=0;e<d;e+=2)b.push(e);return b}),odd:u(function(b,d){for(var e=1;e<d;e+=2)b.push(e);return b}),lt:u(function(b,d,e){for(d=0>e?e+d:e;0<=--d;)b.push(d);return b}),gt:u(function(b,d,e){for(e=0>e?e+d:e;++e<d;)b.push(e);return b})}};K.pseudos.nth=K.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,
image:!0})K.pseudos[t]=m(t);for(t in{submit:!0,reset:!0})K.pseudos[t]=q(t);x.prototype=K.filters=K.pseudos;K.setFilters=new x;Z=d.compile=function(b,d){var e,f=[],c=[],g=G[b+" "];if(!g){d||(d=k(b));for(e=d.length;e--;)g=J(d[e]),g[la]?f.push(g):c.push(g);g=G(b,T(c,f))}return g};R.sortStable=la.split("").sort(Sb).join("")===la;R.detectDuplicates=!!Ba;v();R.sortDetached=c(function(b){return b.compareDocumentPosition(ja.createElement("div"))&1});c(function(b){b.innerHTML="<a href='#'></a>";return"#"===
b.firstChild.getAttribute("href")})||g("type|href|height|width",function(b,d,e){if(!e)return b.getAttribute(d,"type"===d.toLowerCase()?1:2)});(!R.attributes||!c(function(b){b.innerHTML="<input/>";b.firstChild.setAttribute("value","");return""===b.firstChild.getAttribute("value")}))&&g("value",function(b,d,e){if(!e&&"input"===b.nodeName.toLowerCase())return b.defaultValue});c(function(b){return null==b.getAttribute("disabled")})||g("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
function(b,d,e){var f;if(!e)return!0===b[d]?d.toLowerCase():(f=b.getAttributeNode(d))&&f.specified?f.value:null});return d}(c);t.find=Y;t.expr=Y.selectors;t.expr[":"]=t.expr.pseudos;t.unique=Y.uniqueSort;t.text=Y.getText;t.isXMLDoc=Y.isXML;t.contains=Y.contains;var ha=t.expr.match.needsContext,ba=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ka=/^.[^:#\[\.,]*$/;t.filter=function(b,d,e){var f=d[0];e&&(b=":not("+b+")");return 1===d.length&&1===f.nodeType?t.find.matchesSelector(f,b)?[f]:[]:t.find.matches(b,t.grep(d,
function(b){return 1===b.nodeType}))};t.fn.extend({find:function(b){var d,e=this.length,f=[],c=this;if("string"!==typeof b)return this.pushStack(t(b).filter(function(){for(d=0;d<e;d++)if(t.contains(c[d],this))return!0}));for(d=0;d<e;d++)t.find(b,c[d],f);f=this.pushStack(1<e?t.unique(f):f);f.selector=this.selector?this.selector+" "+b:b;return f},filter:function(b){return this.pushStack(e(this,b||[],!1))},not:function(b){return this.pushStack(e(this,b||[],!0))},is:function(b){return!!e(this,"string"===
typeof b&&ha.test(b)?t(b):b||[],!1).length}});var ea,oa=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(t.fn.init=function(b,d){var e;if(!b)return this;if("string"===typeof b){if((e="<"===b[0]&&">"===b[b.length-1]&&3<=b.length?[null,b,null]:oa.exec(b))&&(e[1]||!d)){if(e[1]){if(d=d instanceof t?d[0]:d,t.merge(this,t.parseHTML(e[1],d&&d.nodeType?d.ownerDocument||d:O,!0)),ba.test(e[1])&&t.isPlainObject(d))for(e in d)if(t.isFunction(this[e]))this[e](d[e]);else this.attr(e,d[e])}else{if((e=O.getElementById(e[2]))&&
e.parentNode)this.length=1,this[0]=e;this.context=O;this.selector=b}return this}return!d||d.jquery?(d||ea).find(b):this.constructor(d).find(b)}if(b.nodeType)return this.context=this[0]=b,this.length=1,this;if(t.isFunction(b))return"undefined"!==typeof ea.ready?ea.ready(b):b(t);void 0!==b.selector&&(this.selector=b.selector,this.context=b.context);return t.makeArray(b,this)}).prototype=t.fn;ea=t(O);var qa=/^(?:parents|prev(?:Until|All))/,ra={children:!0,contents:!0,next:!0,prev:!0};t.extend({dir:function(b,
d,e){for(var f=[],c=void 0!==e;(b=b[d])&&9!==b.nodeType;)if(1===b.nodeType){if(c&&t(b).is(e))break;f.push(b)}return f},sibling:function(b,d){for(var e=[];b;b=b.nextSibling)1===b.nodeType&&b!==d&&e.push(b);return e}});t.fn.extend({has:function(b){var d=t(b,this),e=d.length;return this.filter(function(){for(var b=0;b<e;b++)if(t.contains(this,d[b]))return!0})},closest:function(b,d){for(var e,f=0,c=this.length,g=[],h=ha.test(b)||"string"!==typeof b?t(b,d||this.context):0;f<c;f++)for(e=this[f];e&&e!==
d;e=e.parentNode)if(11>e.nodeType&&(h?-1<h.index(e):1===e.nodeType&&t.find.matchesSelector(e,b))){g.push(e);break}return this.pushStack(1<g.length?t.unique(g):g)},index:function(b){return!b?this[0]&&this[0].parentNode?this.first().prevAll().length:-1:"string"===typeof b?wa.call(t(b),this[0]):wa.call(this,b.jquery?b[0]:b)},add:function(b,d){return this.pushStack(t.unique(t.merge(this.get(),t(b,d))))},addBack:function(b){return this.add(null==b?this.prevObject:this.prevObject.filter(b))}});t.each({parent:function(b){return(b=
b.parentNode)&&11!==b.nodeType?b:null},parents:function(b){return t.dir(b,"parentNode")},parentsUntil:function(b,d,e){return t.dir(b,"parentNode",e)},next:function(b){return g(b,"nextSibling")},prev:function(b){return g(b,"previousSibling")},nextAll:function(b){return t.dir(b,"nextSibling")},prevAll:function(b){return t.dir(b,"previousSibling")},nextUntil:function(b,d,e){return t.dir(b,"nextSibling",e)},prevUntil:function(b,d,e){return t.dir(b,"previousSibling",e)},siblings:function(b){return t.sibling((b.parentNode||
{}).firstChild,b)},children:function(b){return t.sibling(b.firstChild)},contents:function(b){return b.contentDocument||t.merge([],b.childNodes)}},function(b,d){t.fn[b]=function(e,f){var c=t.map(this,d,e);"Until"!==b.slice(-5)&&(f=e);f&&"string"===typeof f&&(c=t.filter(f,c));1<this.length&&(ra[b]||t.unique(c),qa.test(b)&&c.reverse());return this.pushStack(c)}});var ia=/\S+/g,pa={};t.Callbacks=function(b){b="string"===typeof b?pa[b]||f(b):t.extend({},b);var d,e,c,g,h,m,q=[],u=!b.once&&[],E=function(f){d=
b.memory&&f;e=!0;m=g||0;g=0;h=q.length;for(c=!0;q&&m<h;m++)if(!1===q[m].apply(f[0],f[1])&&b.stopOnFalse){d=!1;break}c=!1;q&&(u?u.length&&E(u.shift()):d?q=[]:x.disable())},x={add:function(){if(q){var e=q.length;(function Gi(d){t.each(d,function(d,e){var f=t.type(e);"function"===f?(!b.unique||!x.has(e))&&q.push(e):e&&(e.length&&"string"!==f)&&Gi(e)})})(arguments);c?h=q.length:d&&(g=e,E(d))}return this},remove:function(){q&&t.each(arguments,function(b,d){for(var e;-1<(e=t.inArray(d,q,e));)q.splice(e,
1),c&&(e<=h&&h--,e<=m&&m--)});return this},has:function(b){return b?-1<t.inArray(b,q):!(!q||!q.length)},empty:function(){q=[];h=0;return this},disable:function(){q=u=d=void 0;return this},disabled:function(){return!q},lock:function(){u=void 0;d||x.disable();return this},locked:function(){return!u},fireWith:function(b,d){if(q&&(!e||u))d=d||[],d=[b,d.slice?d.slice():d],c?u.push(d):E(d);return this},fire:function(){x.fireWith(this,arguments);return this},fired:function(){return!!e}};return x};t.extend({Deferred:function(b){var d=
[["resolve","done",t.Callbacks("once memory"),"resolved"],["reject","fail",t.Callbacks("once memory"),"rejected"],["notify","progress",t.Callbacks("memory")]],e="pending",f={state:function(){return e},always:function(){c.done(arguments).fail(arguments);return this},then:function(){var b=arguments;return t.Deferred(function(e){t.each(d,function(d,g){var h=t.isFunction(b[d])&&b[d];c[g[1]](function(){var b=h&&h.apply(this,arguments);if(b&&t.isFunction(b.promise))b.promise().done(e.resolve).fail(e.reject).progress(e.notify);
else e[g[0]+"With"](this===f?e.promise():this,h?[b]:arguments)})});b=null}).promise()},promise:function(b){return null!=b?t.extend(b,f):f}},c={};f.pipe=f.then;t.each(d,function(b,g){var h=g[2],m=g[3];f[g[1]]=h.add;m&&h.add(function(){e=m},d[b^1][2].disable,d[2][2].lock);c[g[0]]=function(){c[g[0]+"With"](this===c?f:this,arguments);return this};c[g[0]+"With"]=h.fireWith});f.promise(c);b&&b.call(c,c);return c},when:function(b){var d=0,e=la.call(arguments),f=e.length,c=1!==f||b&&t.isFunction(b.promise)?
f:0,g=1===c?b:t.Deferred(),h=function(b,d,e){return function(f){d[b]=this;e[b]=1<arguments.length?la.call(arguments):f;e===m?g.notifyWith(d,e):--c||g.resolveWith(d,e)}},m,q,u;if(1<f){m=Array(f);q=Array(f);for(u=Array(f);d<f;d++)e[d]&&t.isFunction(e[d].promise)?e[d].promise().done(h(d,u,e)).fail(g.reject).progress(h(d,q,m)):--c}c||g.resolveWith(u,e);return g.promise()}});var na;t.fn.ready=function(b){t.ready.promise().done(b);return this};t.extend({isReady:!1,readyWait:1,holdReady:function(b){b?t.readyWait++:
t.ready(!0)},ready:function(b){if(!(!0===b?--t.readyWait:t.isReady))t.isReady=!0,!0!==b&&0<--t.readyWait||(na.resolveWith(O,[t]),t.fn.trigger&&t(O).trigger("ready").off("ready"))}});t.ready.promise=function(b){na||(na=t.Deferred(),"complete"===O.readyState?setTimeout(t.ready):(O.addEventListener("DOMContentLoaded",h,!1),c.addEventListener("load",h,!1)));return na.promise(b)};t.ready.promise();var ma=t.access=function(b,d,e,f,c,g,h){var m=0,q=b.length,u=null==e;if("object"===t.type(e))for(m in c=!0,
e)t.access(b,d,m,e[m],!0,g,h);else if(void 0!==f&&(c=!0,t.isFunction(f)||(h=!0),u&&(h?(d.call(b,f),d=null):(u=d,d=function(b,d,e){return u.call(t(b),e)})),d))for(;m<q;m++)d(b[m],e,h?f:f.call(b[m],m,d(b[m],e)));return c?b:u?d.call(b):q?d(b[0],e):g};t.acceptData=function(b){return 1===b.nodeType||9===b.nodeType||!+b.nodeType};m.uid=1;m.accepts=t.acceptData;m.prototype={key:function(b){if(!m.accepts(b))return 0;var d={},e=b[this.expando];if(!e){e=m.uid++;try{d[this.expando]={value:e},Object.defineProperties(b,
d)}catch(f){d[this.expando]=e,t.extend(b,d)}}this.cache[e]||(this.cache[e]={});return e},set:function(b,d,e){var f;b=this.key(b);var c=this.cache[b];if("string"===typeof d)c[d]=e;else if(t.isEmptyObject(c))t.extend(this.cache[b],d);else for(f in d)c[f]=d[f];return c},get:function(b,d){var e=this.cache[this.key(b)];return void 0===d?e:e[d]},access:function(b,d,e){if(void 0===d||d&&"string"===typeof d&&void 0===e)return e=this.get(b,d),void 0!==e?e:this.get(b,t.camelCase(d));this.set(b,d,e);return void 0!==
e?e:d},remove:function(b,d){var e,f;e=this.key(b);var c=this.cache[e];if(void 0===d)this.cache[e]={};else{t.isArray(d)?f=d.concat(d.map(t.camelCase)):(e=t.camelCase(d),d in c?f=[d,e]:(f=e,f=f in c?[f]:f.match(ia)||[]));for(e=f.length;e--;)delete c[f[e]]}},hasData:function(b){return!t.isEmptyObject(this.cache[b[this.expando]]||{})},discard:function(b){b[this.expando]&&delete this.cache[b[this.expando]]}};var U=new m,fa=new m,ua=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ya=/([A-Z])/g;t.extend({hasData:function(b){return fa.hasData(b)||
U.hasData(b)},data:function(b,d,e){return fa.access(b,d,e)},removeData:function(b,d){fa.remove(b,d)},_data:function(b,d,e){return U.access(b,d,e)},_removeData:function(b,d){U.remove(b,d)}});t.fn.extend({data:function(b,d){var e,f,c,g=this[0],h=g&&g.attributes;if(void 0===b){if(this.length&&(c=fa.get(g),1===g.nodeType&&!U.get(g,"hasDataAttrs"))){for(e=h.length;e--;)f=h[e].name,0===f.indexOf("data-")&&(f=t.camelCase(f.slice(5)),q(g,f,c[f]));U.set(g,"hasDataAttrs",!0)}return c}return"object"===typeof b?
this.each(function(){fa.set(this,b)}):ma(this,function(d){var e,f=t.camelCase(b);if(g&&void 0===d){e=fa.get(g,b);if(void 0!==e)return e;e=fa.get(g,f);if(void 0!==e)return e;e=q(g,f,void 0);if(void 0!==e)return e}else this.each(function(){var e=fa.get(this,f);fa.set(this,f,d);-1!==b.indexOf("-")&&void 0!==e&&fa.set(this,b,d)})},null,d,1<arguments.length,null,!0)},removeData:function(b){return this.each(function(){fa.remove(this,b)})}});t.extend({queue:function(b,d,e){var f;if(b)return d=(d||"fx")+
"queue",f=U.get(b,d),e&&(!f||t.isArray(e)?f=U.access(b,d,t.makeArray(e)):f.push(e)),f||[]},dequeue:function(b,d){d=d||"fx";var e=t.queue(b,d),f=e.length,c=e.shift(),g=t._queueHooks(b,d),h=function(){t.dequeue(b,d)};"inprogress"===c&&(c=e.shift(),f--);c&&("fx"===d&&e.unshift("inprogress"),delete g.stop,c.call(b,h,g));!f&&g&&g.empty.fire()},_queueHooks:function(b,d){var e=d+"queueHooks";return U.get(b,e)||U.access(b,e,{empty:t.Callbacks("once memory").add(function(){U.remove(b,[d+"queue",e])})})}});
t.fn.extend({queue:function(b,d){var e=2;"string"!==typeof b&&(d=b,b="fx",e--);return arguments.length<e?t.queue(this[0],b):void 0===d?this:this.each(function(){var e=t.queue(this,b,d);t._queueHooks(this,b);"fx"===b&&"inprogress"!==e[0]&&t.dequeue(this,b)})},dequeue:function(b){return this.each(function(){t.dequeue(this,b)})},clearQueue:function(b){return this.queue(b||"fx",[])},promise:function(b,d){var e,f=1,c=t.Deferred(),g=this,h=this.length,m=function(){--f||c.resolveWith(g,[g])};"string"!==
typeof b&&(d=b,b=void 0);for(b=b||"fx";h--;)if((e=U.get(g[h],b+"queueHooks"))&&e.empty)f++,e.empty.add(m);m();return c.promise(d)}});var za=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ta=["Top","Right","Bottom","Left"],va=function(b,d){b=d||b;return"none"===t.css(b,"display")||!t.contains(b.ownerDocument,b)},Aa=/^(?:checkbox|radio)$/i;(function(){var b=O.createDocumentFragment().appendChild(O.createElement("div"));b.innerHTML="<input type='radio' checked='checked' name='t'/>";M.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked;
b.innerHTML="<textarea>x</textarea>";M.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue})();M.focusinBubbles="onfocusin"in c;var Ca=/^key/,Ga=/^(?:mouse|contextmenu)|click/,Da=/^(?:focusinfocus|focusoutblur)$/,Ea=/^([^.]*)(?:\.(.+)|)$/;t.event={global:{},add:function(b,d,e,f,c){var g,h,m,q,u,E,x,k,l;if(u=U.get(b)){e.handler&&(g=e,e=g.handler,c=g.selector);e.guid||(e.guid=t.guid++);if(!(q=u.events))q=u.events={};if(!(h=u.handle))h=u.handle=function(d){return"undefined"!==typeof t&&t.event.triggered!==
d.type?t.event.dispatch.apply(b,arguments):void 0};d=(d||"").match(ia)||[""];for(u=d.length;u--;)if(m=Ea.exec(d[u])||[],k=E=m[1],l=(m[2]||"").split(".").sort(),k){m=t.event.special[k]||{};k=(c?m.delegateType:m.bindType)||k;m=t.event.special[k]||{};E=t.extend({type:k,origType:E,data:f,handler:e,guid:e.guid,selector:c,needsContext:c&&t.expr.match.needsContext.test(c),namespace:l.join(".")},g);if(!(x=q[k]))x=q[k]=[],x.delegateCount=0,(!m.setup||!1===m.setup.call(b,f,l,h))&&b.addEventListener&&b.addEventListener(k,
h,!1);m.add&&(m.add.call(b,E),E.handler.guid||(E.handler.guid=e.guid));c?x.splice(x.delegateCount++,0,E):x.push(E);t.event.global[k]=!0}}},remove:function(b,d,e,f,c){var g,h,m,q,u,E,x,k,l,H,B,L=U.hasData(b)&&U.get(b);if(L&&(q=L.events)){d=(d||"").match(ia)||[""];for(u=d.length;u--;)if(m=Ea.exec(d[u])||[],l=B=m[1],H=(m[2]||"").split(".").sort(),l){x=t.event.special[l]||{};l=(f?x.delegateType:x.bindType)||l;k=q[l]||[];m=m[2]&&RegExp("(^|\\.)"+H.join("\\.(?:.*\\.|)")+"(\\.|$)");for(h=g=k.length;g--;)if(E=
k[g],(c||B===E.origType)&&(!e||e.guid===E.guid)&&(!m||m.test(E.namespace))&&(!f||f===E.selector||"**"===f&&E.selector))k.splice(g,1),E.selector&&k.delegateCount--,x.remove&&x.remove.call(b,E);h&&!k.length&&((!x.teardown||!1===x.teardown.call(b,H,L.handle))&&t.removeEvent(b,l,L.handle),delete q[l])}else for(l in q)t.event.remove(b,l+d[u],e,f,!0);t.isEmptyObject(q)&&(delete L.handle,U.remove(b,"events"))}},trigger:function(b,d,e,f){var g,h,m,q,u,E,x=[e||O],k=Q.call(b,"type")?b.type:b;E=Q.call(b,"namespace")?
b.namespace.split("."):[];h=g=e=e||O;if(!(3===e.nodeType||8===e.nodeType)&&!Da.test(k+t.event.triggered))if(0<=k.indexOf(".")&&(E=k.split("."),k=E.shift(),E.sort()),q=0>k.indexOf(":")&&"on"+k,b=b[t.expando]?b:new t.Event(k,"object"===typeof b&&b),b.isTrigger=f?2:3,b.namespace=E.join("."),b.namespace_re=b.namespace?RegExp("(^|\\.)"+E.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),d=null==d?[b]:t.makeArray(d,[b]),E=t.event.special[k]||{},f||!(E.trigger&&!1===E.trigger.apply(e,
d))){if(!f&&!E.noBubble&&!t.isWindow(e)){m=E.delegateType||k;Da.test(m+k)||(h=h.parentNode);for(;h;h=h.parentNode)x.push(h),g=h;if(g===(e.ownerDocument||O))x.push(g.defaultView||g.parentWindow||c)}for(g=0;(h=x[g++])&&!b.isPropagationStopped();)if(b.type=1<g?m:E.bindType||k,(u=(U.get(h,"events")||{})[b.type]&&U.get(h,"handle"))&&u.apply(h,d),(u=q&&h[q])&&u.apply&&t.acceptData(h))b.result=u.apply(h,d),!1===b.result&&b.preventDefault();b.type=k;if(!f&&!b.isDefaultPrevented()&&(!E._default||!1===E._default.apply(x.pop(),
d))&&t.acceptData(e)&&q&&t.isFunction(e[k])&&!t.isWindow(e))(g=e[q])&&(e[q]=null),t.event.triggered=k,e[k](),t.event.triggered=void 0,g&&(e[q]=g);return b.result}},dispatch:function(b){b=t.event.fix(b);var d,e,f,c,g=[],h=la.call(arguments);d=(U.get(this,"events")||{})[b.type]||[];var m=t.event.special[b.type]||{};h[0]=b;b.delegateTarget=this;if(!(m.preDispatch&&!1===m.preDispatch.call(this,b))){g=t.event.handlers.call(this,b,d);for(d=0;(c=g[d++])&&!b.isPropagationStopped();){b.currentTarget=c.elem;
for(e=0;(f=c.handlers[e++])&&!b.isImmediatePropagationStopped();)if(!b.namespace_re||b.namespace_re.test(f.namespace))if(b.handleObj=f,b.data=f.data,f=((t.event.special[f.origType]||{}).handle||f.handler).apply(c.elem,h),void 0!==f&&!1===(b.result=f))b.preventDefault(),b.stopPropagation()}m.postDispatch&&m.postDispatch.call(this,b);return b.result}},handlers:function(b,d){var e,f,c,g,h=[],m=d.delegateCount,q=b.target;if(m&&q.nodeType&&(!b.button||"click"!==b.type))for(;q!==this;q=q.parentNode||this)if(!0!==
q.disabled||"click"!==b.type){f=[];for(e=0;e<m;e++)g=d[e],c=g.selector+" ",void 0===f[c]&&(f[c]=g.needsContext?0<=t(c,this).index(q):t.find(c,this,null,[q]).length),f[c]&&f.push(g);f.length&&h.push({elem:q,handlers:f})}m<d.length&&h.push({elem:this,handlers:d.slice(m)});return h},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(b,d){null==
b.which&&(b.which=null!=d.charCode?d.charCode:d.keyCode);return b}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(b,d){var e,f,c=d.button;null==b.pageX&&null!=d.clientX&&(e=b.target.ownerDocument||O,f=e.documentElement,e=e.body,b.pageX=d.clientX+(f&&f.scrollLeft||e&&e.scrollLeft||0)-(f&&f.clientLeft||e&&e.clientLeft||0),b.pageY=d.clientY+(f&&f.scrollTop||e&&e.scrollTop||0)-(f&&f.clientTop||e&&e.clientTop||0));!b.which&&
void 0!==c&&(b.which=c&1?1:c&2?3:c&4?2:0);return b}},fix:function(b){if(b[t.expando])return b;var d,e,f;d=b.type;var c=b,g=this.fixHooks[d];g||(this.fixHooks[d]=g=Ga.test(d)?this.mouseHooks:Ca.test(d)?this.keyHooks:{});f=g.props?this.props.concat(g.props):this.props;b=new t.Event(c);for(d=f.length;d--;)e=f[d],b[e]=c[e];b.target||(b.target=O);3===b.target.nodeType&&(b.target=b.target.parentNode);return g.filter?g.filter(b,c):b},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==k()&&this.focus)return this.focus(),
!1},delegateType:"focusin"},blur:{trigger:function(){if(this===k()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&t.nodeName(this,"input"))return this.click(),!1},_default:function(b){return t.nodeName(b.target,"a")}},beforeunload:{postDispatch:function(b){void 0!==b.result&&(b.originalEvent.returnValue=b.result)}}},simulate:function(b,d,e,f){b=t.extend(new t.Event,e,{type:b,isSimulated:!0,originalEvent:{}});f?t.event.trigger(b,
null,d):t.event.dispatch.call(d,b);b.isDefaultPrevented()&&e.preventDefault()}};t.removeEvent=function(b,d,e){b.removeEventListener&&b.removeEventListener(d,e,!1)};t.Event=function(b,d){if(!(this instanceof t.Event))return new t.Event(b,d);b&&b.type?(this.originalEvent=b,this.type=b.type,this.isDefaultPrevented=b.defaultPrevented||void 0===b.defaultPrevented&&b.getPreventDefault&&b.getPreventDefault()?u:x):this.type=b;d&&t.extend(this,d);this.timeStamp=b&&b.timeStamp||t.now();this[t.expando]=!0};
t.Event.prototype={isDefaultPrevented:x,isPropagationStopped:x,isImmediatePropagationStopped:x,preventDefault:function(){var b=this.originalEvent;this.isDefaultPrevented=u;b&&b.preventDefault&&b.preventDefault()},stopPropagation:function(){var b=this.originalEvent;this.isPropagationStopped=u;b&&b.stopPropagation&&b.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=u;this.stopPropagation()}};t.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(b,d){t.event.special[b]=
{delegateType:d,bindType:d,handle:function(b){var e,f=b.relatedTarget,c=b.handleObj;if(!f||f!==this&&!t.contains(this,f))b.type=c.origType,e=c.handler.apply(this,arguments),b.type=d;return e}}});M.focusinBubbles||t.each({focus:"focusin",blur:"focusout"},function(b,d){var e=function(b){t.event.simulate(d,b.target,t.event.fix(b),!0)};t.event.special[d]={setup:function(){var f=this.ownerDocument||this,c=U.access(f,d);c||f.addEventListener(b,e,!0);U.access(f,d,(c||0)+1)},teardown:function(){var f=this.ownerDocument||
this,c=U.access(f,d)-1;c?U.access(f,d,c):(f.removeEventListener(b,e,!0),U.remove(f,d))}}});t.fn.extend({on:function(b,d,e,f,c){var g,h;if("object"===typeof b){"string"!==typeof d&&(e=e||d,d=void 0);for(h in b)this.on(h,d,e,b[h],c);return this}null==e&&null==f?(f=d,e=d=void 0):null==f&&("string"===typeof d?(f=e,e=void 0):(f=e,e=d,d=void 0));if(!1===f)f=x;else if(!f)return this;1===c&&(g=f,f=function(b){t().off(b);return g.apply(this,arguments)},f.guid=g.guid||(g.guid=t.guid++));return this.each(function(){t.event.add(this,
b,f,e,d)})},one:function(b,d,e,f){return this.on(b,d,e,f,1)},off:function(b,d,e){var f;if(b&&b.preventDefault&&b.handleObj)return f=b.handleObj,t(b.delegateTarget).off(f.namespace?f.origType+"."+f.namespace:f.origType,f.selector,f.handler),this;if("object"===typeof b){for(f in b)this.off(f,d,b[f]);return this}if(!1===d||"function"===typeof d)e=d,d=void 0;!1===e&&(e=x);return this.each(function(){t.event.remove(this,b,e,d)})},trigger:function(b,d){return this.each(function(){t.event.trigger(b,d,this)})},
triggerHandler:function(b,d){var e=this[0];if(e)return t.event.trigger(b,d,e,!0)}});var Fa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ha=/<([\w:]+)/,La=/<|&#?\w+;/,Ma=/<(?:script|style|link)/i,Pa=/checked\s*(?:[^=]|=\s*.checked.)/i,Na=/^$|\/(?:java|ecma)script/i,Wa=/^true\/(.*)/,ab=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,$a={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,
"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};$a.optgroup=$a.option;$a.tbody=$a.tfoot=$a.colgroup=$a.caption=$a.thead;$a.th=$a.td;t.extend({clone:function(b,d,e){var f,c,g,h,m=b.cloneNode(!0),q=t.contains(b.ownerDocument,b);if(!M.noCloneChecked&&(1===b.nodeType||11===b.nodeType)&&!t.isXMLDoc(b)){h=J(m);g=J(b);f=0;for(c=g.length;f<c;f++){var u=g[f],x=h[f],k=x.nodeName.toLowerCase();if("input"===k&&Aa.test(u.type))x.checked=u.checked;else if("input"===
k||"textarea"===k)x.defaultValue=u.defaultValue}}if(d)if(e){g=g||J(b);h=h||J(m);f=0;for(c=g.length;f<c;f++)N(g[f],h[f])}else N(b,m);h=J(m,"script");0<h.length&&E(h,!q&&J(b,"script"));return m},buildFragment:function(b,d,e,f){for(var c,g,h,m=d.createDocumentFragment(),q=[],u=0,x=b.length;u<x;u++)if((c=b[u])||0===c)if("object"===t.type(c))t.merge(q,c.nodeType?[c]:c);else if(La.test(c)){g=g||m.appendChild(d.createElement("div"));h=(Ha.exec(c)||["",""])[1].toLowerCase();h=$a[h]||$a._default;g.innerHTML=
h[1]+c.replace(Fa,"<$1></$2>")+h[2];for(h=h[0];h--;)g=g.lastChild;t.merge(q,g.childNodes);g=m.firstChild;g.textContent=""}else q.push(d.createTextNode(c));m.textContent="";for(u=0;c=q[u++];)if(!(f&&-1!==t.inArray(c,f))&&(b=t.contains(c.ownerDocument,c),g=J(m.appendChild(c),"script"),b&&E(g),e))for(h=0;c=g[h++];)Na.test(c.type||"")&&e.push(c);return m},cleanData:function(b){for(var d,e,f,c,g,h,m=t.event.special,q=0;void 0!==(e=b[q]);q++){if(t.acceptData(e)&&(g=e[U.expando])&&(d=U.cache[g])){f=Object.keys(d.events||
{});if(f.length)for(h=0;void 0!==(c=f[h]);h++)m[c]?t.event.remove(e,c):t.removeEvent(e,c,d.handle);U.cache[g]&&delete U.cache[g]}delete fa.cache[e[fa.expando]]}}});t.fn.extend({text:function(b){return ma(this,function(b){return void 0===b?t.text(this):this.empty().each(function(){if(1===this.nodeType||11===this.nodeType||9===this.nodeType)this.textContent=b})},null,b,arguments.length)},append:function(){return this.domManip(arguments,function(b){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&
l(this,b).appendChild(b)})},prepend:function(){return this.domManip(arguments,function(b){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var d=l(this,b);d.insertBefore(b,d.firstChild)}})},before:function(){return this.domManip(arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this)})},after:function(){return this.domManip(arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this.nextSibling)})},remove:function(b,d){for(var e,f=b?t.filter(b,this):
this,c=0;null!=(e=f[c]);c++)!d&&1===e.nodeType&&t.cleanData(J(e)),e.parentNode&&(d&&t.contains(e.ownerDocument,e)&&E(J(e,"script")),e.parentNode.removeChild(e));return this},empty:function(){for(var b,d=0;null!=(b=this[d]);d++)1===b.nodeType&&(t.cleanData(J(b,!1)),b.textContent="");return this},clone:function(b,d){b=null==b?!1:b;d=null==d?b:d;return this.map(function(){return t.clone(this,b,d)})},html:function(b){return ma(this,function(b){var d=this[0]||{},e=0,f=this.length;if(void 0===b&&1===d.nodeType)return d.innerHTML;
if("string"===typeof b&&!Ma.test(b)&&!$a[(Ha.exec(b)||["",""])[1].toLowerCase()]){b=b.replace(Fa,"<$1></$2>");try{for(;e<f;e++)d=this[e]||{},1===d.nodeType&&(t.cleanData(J(d,!1)),d.innerHTML=b);d=0}catch(c){}}d&&this.empty().append(b)},null,b,arguments.length)},replaceWith:function(){var b=arguments[0];this.domManip(arguments,function(d){b=this.parentNode;t.cleanData(J(this));b&&b.replaceChild(d,this)});return b&&(b.length||b.nodeType)?this:this.remove()},detach:function(b){return this.remove(b,!0)},
domManip:function(b,d){b=F.apply([],b);var e,f,c,g,h=0,m=this.length,q=this,u=m-1,E=b[0],x=t.isFunction(E);if(x||1<m&&"string"===typeof E&&!M.checkClone&&Pa.test(E))return this.each(function(e){var f=q.eq(e);x&&(b[0]=E.call(this,e,f.html()));f.domManip(b,d)});if(m&&(e=t.buildFragment(b,this[0].ownerDocument,!1,this),f=e.firstChild,1===e.childNodes.length&&(e=f),f)){f=t.map(J(e,"script"),B);for(c=f.length;h<m;h++)g=e,h!==u&&(g=t.clone(g,!0,!0),c&&t.merge(f,J(g,"script"))),d.call(this[h],g,h);if(c){e=
f[f.length-1].ownerDocument;t.map(f,H);for(h=0;h<c;h++)if(g=f[h],Na.test(g.type||"")&&!U.access(g,"globalEval")&&t.contains(e,g))g.src?t._evalUrl&&t._evalUrl(g.src):t.globalEval(g.textContent.replace(ab,""))}}return this}});t.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(b,d){t.fn[b]=function(b){for(var e=[],f=t(b),c=f.length-1,g=0;g<=c;g++)b=g===c?this:this.clone(!0),t(f[g])[d](b),Za.apply(e,b.get());return this.pushStack(e)}});
var Ja,Sa={},Ta=/^margin/,Qa=RegExp("^("+za+")(?!px)[a-z%]+$","i"),Oa=function(b){return b.ownerDocument.defaultView.getComputedStyle(b,null)};(function(){function b(){h.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%";f.appendChild(g);var m=c.getComputedStyle(h,null);d="1%"!==m.top;e="4px"===m.width;f.removeChild(g)}var d,e,f=O.documentElement,g=O.createElement("div"),
h=O.createElement("div");h.style.backgroundClip="content-box";h.cloneNode(!0).style.backgroundClip="";M.clearCloneStyle="content-box"===h.style.backgroundClip;g.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px";g.appendChild(h);c.getComputedStyle&&t.extend(M,{pixelPosition:function(){b();return d},boxSizingReliable:function(){null==e&&b();return e},reliableMarginRight:function(){var b;b=h.appendChild(O.createElement("div"));b.style.cssText=h.style.cssText=
"padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box";b.style.marginRight=b.style.width="0";h.style.width="1px";f.appendChild(g);b=!parseFloat(c.getComputedStyle(b,null).marginRight);f.removeChild(g);h.innerHTML="";return b}})})();t.swap=function(b,d,e,f){var c,g={};for(c in d)g[c]=b.style[c],b.style[c]=d[c];e=e.apply(b,f||[]);for(c in d)b.style[c]=g[c];return e};var fb=/^(none|table(?!-c[ea]).+)/,hb=RegExp("^("+za+")(.*)$","i"),
jb=RegExp("^([+-])=("+za+")","i"),lb={position:"absolute",visibility:"hidden",display:"block"},cb={letterSpacing:0,fontWeight:400},eb=["Webkit","O","Moz","ms"];t.extend({cssHooks:{opacity:{get:function(b,d){if(d){var e=n(b,"opacity");return""===e?"1":e}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(b,d,e,f){if(b&&!(3===b.nodeType||8===b.nodeType||!b.style)){var c,g,h,
m=t.camelCase(d),q=b.style;d=t.cssProps[m]||(t.cssProps[m]=s(q,m));h=t.cssHooks[d]||t.cssHooks[m];if(void 0!==e){g=typeof e;if("string"===g&&(c=jb.exec(e)))e=(c[1]+1)*c[2]+parseFloat(t.css(b,d)),g="number";if(!(null==e||e!==e))if("number"===g&&!t.cssNumber[m]&&(e+="px"),!M.clearCloneStyle&&(""===e&&0===d.indexOf("background"))&&(q[d]="inherit"),!h||!("set"in h)||void 0!==(e=h.set(b,e,f)))q[d]="",q[d]=e}else return h&&"get"in h&&void 0!==(c=h.get(b,!1,f))?c:q[d]}},css:function(b,d,e,f){var c,g;g=t.camelCase(d);
d=t.cssProps[g]||(t.cssProps[g]=s(b.style,g));(g=t.cssHooks[d]||t.cssHooks[g])&&"get"in g&&(c=g.get(b,!0,e));void 0===c&&(c=n(b,d,f));"normal"===c&&d in cb&&(c=cb[d]);return""===e||e?(b=parseFloat(c),!0===e||t.isNumeric(b)?b||0:c):c}});t.each(["height","width"],function(b,d){t.cssHooks[d]={get:function(b,e,f){if(e)return 0===b.offsetWidth&&fb.test(t.css(b,"display"))?t.swap(b,lb,function(){return y(b,d,f)}):y(b,d,f)},set:function(b,e,f){var c=f&&Oa(b);return v(b,e,f?w(b,d,f,"border-box"===t.css(b,
"boxSizing",!1,c),c):0)}}});t.cssHooks.marginRight=z(M.reliableMarginRight,function(b,d){if(d)return t.swap(b,{display:"inline-block"},n,[b,"marginRight"])});t.each({margin:"",padding:"",border:"Width"},function(b,d){t.cssHooks[b+d]={expand:function(e){var f=0,c={};for(e="string"===typeof e?e.split(" "):[e];4>f;f++)c[b+ta[f]+d]=e[f]||e[f-2]||e[0];return c}};Ta.test(b)||(t.cssHooks[b+d].set=v)});t.fn.extend({css:function(b,d){return ma(this,function(b,d,e){var f,c={},g=0;if(t.isArray(d)){e=Oa(b);for(f=
d.length;g<f;g++)c[d[g]]=t.css(b,d[g],!1,e);return c}return void 0!==e?t.style(b,d,e):t.css(b,d)},b,d,1<arguments.length)},show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(b){return"boolean"===typeof b?b?this.show():this.hide():this.each(function(){va(this)?t(this).show():t(this).hide()})}});t.Tween=C;C.prototype={constructor:C,init:function(b,d,e,f,c,g){this.elem=b;this.prop=e;this.easing=c||"swing";this.options=d;this.start=this.now=this.cur();this.end=f;this.unit=
g||(t.cssNumber[e]?"":"px")},cur:function(){var b=C.propHooks[this.prop];return b&&b.get?b.get(this):C.propHooks._default.get(this)},run:function(b){var d,e=C.propHooks[this.prop];this.pos=this.options.duration?d=t.easing[this.easing](b,this.options.duration*b,0,1,this.options.duration):d=b;this.now=(this.end-this.start)*d+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);e&&e.set?e.set(this):C.propHooks._default.set(this);return this}};C.prototype.init.prototype=C.prototype;
C.propHooks={_default:{get:function(b){if(null!=b.elem[b.prop]&&(!b.elem.style||null==b.elem.style[b.prop]))return b.elem[b.prop];b=t.css(b.elem,b.prop,"");return!b||"auto"===b?0:b},set:function(b){if(t.fx.step[b.prop])t.fx.step[b.prop](b);else b.elem.style&&(null!=b.elem.style[t.cssProps[b.prop]]||t.cssHooks[b.prop])?t.style(b.elem,b.prop,b.now+b.unit):b.elem[b.prop]=b.now}}};C.propHooks.scrollTop=C.propHooks.scrollLeft={set:function(b){b.elem.nodeType&&b.elem.parentNode&&(b.elem[b.prop]=b.now)}};
t.easing={linear:function(b){return b},swing:function(b){return 0.5-Math.cos(b*Math.PI)/2}};t.fx=C.prototype.init;t.fx.step={};var Ka,Va,ob=/^(?:toggle|show|hide)$/,gb=RegExp("^(?:([+-])=|)("+za+")([a-z%]*)$","i"),qb=/queueHooks$/,Xa=[function(b,d,e){var f,c,g,h,m,q=this,u={},E=b.style,x=b.nodeType&&va(b),k=U.get(b,"fxshow");e.queue||(h=t._queueHooks(b,"fx"),null==h.unqueued&&(h.unqueued=0,m=h.empty.fire,h.empty.fire=function(){h.unqueued||m()}),h.unqueued++,q.always(function(){q.always(function(){h.unqueued--;
t.queue(b,"fx").length||h.empty.fire()})}));if(1===b.nodeType&&("height"in d||"width"in d))e.overflow=[E.overflow,E.overflowX,E.overflowY],c=t.css(b,"display"),"none"===c&&(c=ca(b.nodeName)),"inline"===c&&"none"===t.css(b,"float")&&(E.display="inline-block");e.overflow&&(E.overflow="hidden",q.always(function(){E.overflow=e.overflow[0];E.overflowX=e.overflow[1];E.overflowY=e.overflow[2]}));for(f in d)if(c=d[f],ob.exec(c)){delete d[f];g=g||"toggle"===c;if(c===(x?"hide":"show"))if("show"===c&&k&&void 0!==
k[f])x=!0;else continue;u[f]=k&&k[f]||t.style(b,f)}if(!t.isEmptyObject(u))for(f in k?"hidden"in k&&(x=k.hidden):k=U.access(b,"fxshow",{}),g&&(k.hidden=!x),x?t(b).show():q.done(function(){t(b).hide()}),q.done(function(){var d;U.remove(b,"fxshow");for(d in u)t.style(b,d,u[d])}),u)d=Ia(x?k[f]:0,f,q),f in k||(k[f]=d.start,x&&(d.end=d.start,d.start="width"===f||"height"===f?1:0))}],Ra={"*":[function(b,d){var e=this.createTween(b,d),f=e.cur(),c=gb.exec(d),g=c&&c[3]||(t.cssNumber[b]?"":"px"),h=(t.cssNumber[b]||
"px"!==g&&+f)&&gb.exec(t.css(e.elem,b)),m=1,q=20;if(h&&h[3]!==g){g=g||h[3];c=c||[];h=+f||1;do m=m||".5",h/=m,t.style(e.elem,b,h+g);while(m!==(m=e.cur()/f)&&1!==m&&--q)}c&&(h=e.start=+h||+f||0,e.unit=g,e.end=c[1]?h+(c[1]+1)*c[2]:+c[2]);return e}]};t.Animation=t.extend(Ya,{tweener:function(b,d){t.isFunction(b)?(d=b,b=["*"]):b=b.split(" ");for(var e,f=0,c=b.length;f<c;f++)e=b[f],Ra[e]=Ra[e]||[],Ra[e].unshift(d)},prefilter:function(b,d){d?Xa.unshift(b):Xa.push(b)}});t.speed=function(b,d,e){var f=b&&"object"===
typeof b?t.extend({},b):{complete:e||!e&&d||t.isFunction(b)&&b,duration:b,easing:e&&d||d&&!t.isFunction(d)&&d};f.duration=t.fx.off?0:"number"===typeof f.duration?f.duration:f.duration in t.fx.speeds?t.fx.speeds[f.duration]:t.fx.speeds._default;if(null==f.queue||!0===f.queue)f.queue="fx";f.old=f.complete;f.complete=function(){t.isFunction(f.old)&&f.old.call(this);f.queue&&t.dequeue(this,f.queue)};return f};t.fn.extend({fadeTo:function(b,d,e,f){return this.filter(va).css("opacity",0).show().end().animate({opacity:d},
b,e,f)},animate:function(b,d,e,f){var c=t.isEmptyObject(b),g=t.speed(d,e,f);d=function(){var d=Ya(this,t.extend({},b),g);(c||U.get(this,"finish"))&&d.stop(!0)};d.finish=d;return c||!1===g.queue?this.each(d):this.queue(g.queue,d)},stop:function(b,d,e){var f=function(b){var d=b.stop;delete b.stop;d(e)};"string"!==typeof b&&(e=d,d=b,b=void 0);d&&!1!==b&&this.queue(b||"fx",[]);return this.each(function(){var d=!0,c=null!=b&&b+"queueHooks",g=t.timers,h=U.get(this);if(c)h[c]&&h[c].stop&&f(h[c]);else for(c in h)h[c]&&
(h[c].stop&&qb.test(c))&&f(h[c]);for(c=g.length;c--;)if(g[c].elem===this&&(null==b||g[c].queue===b))g[c].anim.stop(e),d=!1,g.splice(c,1);(d||!e)&&t.dequeue(this,b)})},finish:function(b){!1!==b&&(b=b||"fx");return this.each(function(){var d,e=U.get(this),f=e[b+"queue"];d=e[b+"queueHooks"];var c=t.timers,g=f?f.length:0;e.finish=!0;t.queue(this,b,[]);d&&d.stop&&d.stop.call(this,!0);for(d=c.length;d--;)c[d].elem===this&&c[d].queue===b&&(c[d].anim.stop(!0),c.splice(d,1));for(d=0;d<g;d++)f[d]&&f[d].finish&&
f[d].finish.call(this);delete e.finish})}});t.each(["toggle","show","hide"],function(b,d){var e=t.fn[d];t.fn[d]=function(b,f,c){return null==b||"boolean"===typeof b?e.apply(this,arguments):this.animate(ja(d,!0),b,f,c)}});t.each({slideDown:ja("show"),slideUp:ja("hide"),slideToggle:ja("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(b,d){t.fn[b]=function(b,e,f){return this.animate(d,b,e,f)}});t.timers=[];t.fx.tick=function(){var b,d=0,e=t.timers;for(Ka=
t.now();d<e.length;d++)b=e[d],!b()&&e[d]===b&&e.splice(d--,1);e.length||t.fx.stop();Ka=void 0};t.fx.timer=function(b){t.timers.push(b);b()?t.fx.start():t.timers.pop()};t.fx.interval=13;t.fx.start=function(){Va||(Va=setInterval(t.fx.tick,t.fx.interval))};t.fx.stop=function(){clearInterval(Va);Va=null};t.fx.speeds={slow:600,fast:200,_default:400};t.fn.delay=function(b,d){b=t.fx?t.fx.speeds[b]||b:b;return this.queue(d||"fx",function(d,e){var f=setTimeout(d,b);e.stop=function(){clearTimeout(f)}})};(function(){var b=
O.createElement("input"),d=O.createElement("select"),e=d.appendChild(O.createElement("option"));b.type="checkbox";M.checkOn=""!==b.value;M.optSelected=e.selected;d.disabled=!0;M.optDisabled=!e.disabled;b=O.createElement("input");b.value="t";b.type="radio";M.radioValue="t"===b.value})();var nb,Ua=t.expr.attrHandle;t.fn.extend({attr:function(b,d){return ma(this,t.attr,b,d,1<arguments.length)},removeAttr:function(b){return this.each(function(){t.removeAttr(this,b)})}});t.extend({attr:function(b,d,e){var f,
c,g=b.nodeType;if(b&&!(3===g||8===g||2===g)){if("undefined"===typeof b.getAttribute)return t.prop(b,d,e);if(1!==g||!t.isXMLDoc(b))d=d.toLowerCase(),f=t.attrHooks[d]||(t.expr.match.bool.test(d)?nb:void 0);if(void 0!==e)if(null===e)t.removeAttr(b,d);else{if(f&&"set"in f&&void 0!==(c=f.set(b,e,d)))return c;b.setAttribute(d,e+"");return e}else{if(f&&"get"in f&&null!==(c=f.get(b,d)))return c;c=t.find.attr(b,d);return null==c?void 0:c}}},removeAttr:function(b,d){var e,f,c=0,g=d&&d.match(ia);if(g&&1===b.nodeType)for(;e=
g[c++];)f=t.propFix[e]||e,t.expr.match.bool.test(e)&&(b[f]=!1),b.removeAttribute(e)},attrHooks:{type:{set:function(b,d){if(!M.radioValue&&"radio"===d&&t.nodeName(b,"input")){var e=b.value;b.setAttribute("type",d);e&&(b.value=e);return d}}}}});nb={set:function(b,d,e){!1===d?t.removeAttr(b,e):b.setAttribute(e,e);return e}};t.each(t.expr.match.bool.source.match(/\w+/g),function(b,d){var e=Ua[d]||t.find.attr;Ua[d]=function(b,d,f){var c,g;f||(g=Ua[d],Ua[d]=c,c=null!=e(b,d,f)?d.toLowerCase():null,Ua[d]=
g);return c}});var tb=/^(?:input|select|textarea|button)$/i;t.fn.extend({prop:function(b,d){return ma(this,t.prop,b,d,1<arguments.length)},removeProp:function(b){return this.each(function(){delete this[t.propFix[b]||b]})}});t.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(b,d,e){var f,c,g;g=b.nodeType;if(b&&!(3===g||8===g||2===g)){if(g=1!==g||!t.isXMLDoc(b))d=t.propFix[d]||d,c=t.propHooks[d];return void 0!==e?c&&"set"in c&&void 0!==(f=c.set(b,e,d))?f:b[d]=e:c&&"get"in c&&null!==
(f=c.get(b,d))?f:b[d]}},propHooks:{tabIndex:{get:function(b){return b.hasAttribute("tabindex")||tb.test(b.nodeName)||b.href?b.tabIndex:-1}}}});M.optSelected||(t.propHooks.selected={get:function(b){(b=b.parentNode)&&b.parentNode&&b.parentNode.selectedIndex;return null}});t.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){t.propFix[this.toLowerCase()]=this});var db=/[\t\r\n\f]/g;t.fn.extend({addClass:function(b){var d,
e,f,c,g;d="string"===typeof b&&b;var h=0,m=this.length;if(t.isFunction(b))return this.each(function(d){t(this).addClass(b.call(this,d,this.className))});if(d)for(d=(b||"").match(ia)||[];h<m;h++)if(e=this[h],f=1===e.nodeType&&(e.className?(" "+e.className+" ").replace(db," "):" ")){for(g=0;c=d[g++];)0>f.indexOf(" "+c+" ")&&(f+=c+" ");f=t.trim(f);e.className!==f&&(e.className=f)}return this},removeClass:function(b){var d,e,f,c,g;d=0===arguments.length||"string"===typeof b&&b;var h=0,m=this.length;if(t.isFunction(b))return this.each(function(d){t(this).removeClass(b.call(this,
d,this.className))});if(d)for(d=(b||"").match(ia)||[];h<m;h++)if(e=this[h],f=1===e.nodeType&&(e.className?(" "+e.className+" ").replace(db," "):"")){for(g=0;c=d[g++];)for(;0<=f.indexOf(" "+c+" ");)f=f.replace(" "+c+" "," ");f=b?t.trim(f):"";e.className!==f&&(e.className=f)}return this},toggleClass:function(b,d){var e=typeof b;return"boolean"===typeof d&&"string"===e?d?this.addClass(b):this.removeClass(b):t.isFunction(b)?this.each(function(e){t(this).toggleClass(b.call(this,e,this.className,d),d)}):
this.each(function(){if("string"===e)for(var d,f=0,c=t(this),g=b.match(ia)||[];d=g[f++];)c.hasClass(d)?c.removeClass(d):c.addClass(d);else if("undefined"===e||"boolean"===e)this.className&&U.set(this,"__className__",this.className),this.className=this.className||!1===b?"":U.get(this,"__className__")||""})},hasClass:function(b){b=" "+b+" ";for(var d=0,e=this.length;d<e;d++)if(1===this[d].nodeType&&0<=(" "+this[d].className+" ").replace(db," ").indexOf(b))return!0;return!1}});var vb=/\r/g;t.fn.extend({val:function(b){var d,
e,f,c=this[0];if(arguments.length)return f=t.isFunction(b),this.each(function(e){if(1===this.nodeType&&(e=f?b.call(this,e,t(this).val()):b,null==e?e="":"number"===typeof e?e+="":t.isArray(e)&&(e=t.map(e,function(b){return null==b?"":b+""})),d=t.valHooks[this.type]||t.valHooks[this.nodeName.toLowerCase()],!d||!("set"in d)||void 0===d.set(this,e,"value")))this.value=e});if(c){if((d=t.valHooks[c.type]||t.valHooks[c.nodeName.toLowerCase()])&&"get"in d&&void 0!==(e=d.get(c,"value")))return e;e=c.value;
return"string"===typeof e?e.replace(vb,""):null==e?"":e}}});t.extend({valHooks:{select:{get:function(b){for(var d,e=b.options,f=b.selectedIndex,c=(b="select-one"===b.type||0>f)?null:[],g=b?f+1:e.length,h=0>f?g:b?f:0;h<g;h++)if(d=e[h],(d.selected||h===f)&&(M.optDisabled?!d.disabled:null===d.getAttribute("disabled"))&&(!d.parentNode.disabled||!t.nodeName(d.parentNode,"optgroup"))){d=t(d).val();if(b)return d;c.push(d)}return c},set:function(b,d){for(var e,f,c=b.options,g=t.makeArray(d),h=c.length;h--;)if(f=
c[h],f.selected=0<=t.inArray(t(f).val(),g))e=!0;e||(b.selectedIndex=-1);return g}}}});t.each(["radio","checkbox"],function(){t.valHooks[this]={set:function(b,d){if(t.isArray(d))return b.checked=0<=t.inArray(t(b).val(),d)}};M.checkOn||(t.valHooks[this].get=function(b){return null===b.getAttribute("value")?"on":b.value})});t.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),
function(b,d){t.fn[d]=function(b,e){return 0<arguments.length?this.on(d,null,b,e):this.trigger(d)}});t.fn.extend({hover:function(b,d){return this.mouseenter(b).mouseleave(d||b)},bind:function(b,d,e){return this.on(b,null,d,e)},unbind:function(b,d){return this.off(b,null,d)},delegate:function(b,d,e,f){return this.on(d,b,e,f)},undelegate:function(b,d,e){return 1===arguments.length?this.off(b,"**"):this.off(d,b||"**",e)}});var ib=t.now(),kb=/\?/;t.parseJSON=function(b){return JSON.parse(b+"")};t.parseXML=
function(b){var d,e;if(!b||"string"!==typeof b)return null;try{e=new DOMParser,d=e.parseFromString(b,"text/xml")}catch(f){d=void 0}(!d||d.getElementsByTagName("parsererror").length)&&t.error("Invalid XML: "+b);return d};var Jb,zb,Ab=/#.*$/,rb=/([?&])_=[^&]*/,Bb=/^(.*?):[ \t]*([^\r\n]*)$/mg,Fb=/^(?:GET|HEAD)$/,Gb=/^\/\//,ub=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,wb={},pb={},xb="*/".concat("*");try{zb=location.href}catch(Qb){zb=O.createElement("a"),zb.href="",zb=zb.href}Jb=ub.exec(zb.toLowerCase())||
[];t.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:zb,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Jb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":xb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,
"text html":!0,"text json":t.parseJSON,"text xml":t.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(b,d){return d?K(K(b,t.ajaxSettings),d):K(t.ajaxSettings,b)},ajaxPrefilter:D(wb),ajaxTransport:D(pb),ajax:function(b,d){function e(b,d,h,q){var E,N,J,R;R=d;if(2!==T){T=2;m&&clearTimeout(m);f=void 0;g=q||"";K.readyState=0<b?4:0;q=200<=b&&300>b||304===b;if(h){J=x;for(var z=K,ca,Z,n,s,Ba=J.contents,v=J.dataTypes;"*"===v[0];)v.shift(),void 0===ca&&(ca=J.mimeType||z.getResponseHeader("Content-Type"));
if(ca)for(Z in Ba)if(Ba[Z]&&Ba[Z].test(ca)){v.unshift(Z);break}if(v[0]in h)n=v[0];else{for(Z in h){if(!v[0]||J.converters[Z+" "+v[0]]){n=Z;break}s||(s=Z)}n=n||s}n?(n!==v[0]&&v.unshift(n),J=h[n]):J=void 0}a:{h=x;ca=J;Z=K;n=q;var ja,da,w,z={},Ba=h.dataTypes.slice();if(Ba[1])for(da in h.converters)z[da.toLowerCase()]=h.converters[da];for(s=Ba.shift();s;)if(h.responseFields[s]&&(Z[h.responseFields[s]]=ca),!w&&(n&&h.dataFilter)&&(ca=h.dataFilter(ca,h.dataType)),w=s,s=Ba.shift())if("*"===s)s=w;else if("*"!==
w&&w!==s){da=z[w+" "+s]||z["* "+s];if(!da)for(ja in z)if(J=ja.split(" "),J[1]===s&&(da=z[w+" "+J[0]]||z["* "+J[0]])){!0===da?da=z[ja]:!0!==z[ja]&&(s=J[0],Ba.unshift(J[1]));break}if(!0!==da)if(da&&h["throws"])ca=da(ca);else try{ca=da(ca)}catch(V){J={state:"parsererror",error:da?V:"No conversion from "+w+" to "+s};break a}}J={state:"success",data:ca}}if(q)x.ifModified&&((R=K.getResponseHeader("Last-Modified"))&&(t.lastModified[c]=R),(R=K.getResponseHeader("etag"))&&(t.etag[c]=R)),204===b||"HEAD"===
x.type?R="nocontent":304===b?R="notmodified":(R=J.state,E=J.data,N=J.error,q=!N);else if(N=R,b||!R)R="error",0>b&&(b=0);K.status=b;K.statusText=(d||R)+"";q?H.resolveWith(k,[E,R,K]):H.rejectWith(k,[K,R,N]);K.statusCode(L);L=void 0;u&&l.trigger(q?"ajaxSuccess":"ajaxError",[K,x,q?E:N]);B.fireWith(k,[K,R]);u&&(l.trigger("ajaxComplete",[K,x]),--t.active||t.event.trigger("ajaxStop"))}}"object"===typeof b&&(d=b,b=void 0);d=d||{};var f,c,g,h,m,q,u,E,x=t.ajaxSetup({},d),k=x.context||x,l=x.context&&(k.nodeType||
k.jquery)?t(k):t.event,H=t.Deferred(),B=t.Callbacks("once memory"),L=x.statusCode||{},N={},J={},T=0,R="canceled",K={readyState:0,getResponseHeader:function(b){var d;if(2===T){if(!h)for(h={};d=Bb.exec(g);)h[d[1].toLowerCase()]=d[2];d=h[b.toLowerCase()]}return null==d?null:d},getAllResponseHeaders:function(){return 2===T?g:null},setRequestHeader:function(b,d){var e=b.toLowerCase();T||(b=J[e]=J[e]||b,N[b]=d);return this},overrideMimeType:function(b){T||(x.mimeType=b);return this},statusCode:function(b){var d;
if(b)if(2>T)for(d in b)L[d]=[L[d],b[d]];else K.always(b[K.status]);return this},abort:function(b){b=b||R;f&&f.abort(b);e(0,b);return this}};H.promise(K).complete=B.add;K.success=K.done;K.error=K.fail;x.url=((b||x.url||zb)+"").replace(Ab,"").replace(Gb,Jb[1]+"//");x.type=d.method||d.type||x.method||x.type;x.dataTypes=t.trim(x.dataType||"*").toLowerCase().match(ia)||[""];null==x.crossDomain&&(q=ub.exec(x.url.toLowerCase()),x.crossDomain=!(!q||!(q[1]!==Jb[1]||q[2]!==Jb[2]||(q[3]||("http:"===q[1]?"80":
"443"))!==(Jb[3]||("http:"===Jb[1]?"80":"443")))));x.data&&(x.processData&&"string"!==typeof x.data)&&(x.data=t.param(x.data,x.traditional));G(wb,x,d,K);if(2===T)return K;(u=x.global)&&0===t.active++&&t.event.trigger("ajaxStart");x.type=x.type.toUpperCase();x.hasContent=!Fb.test(x.type);c=x.url;x.hasContent||(x.data&&(c=x.url+=(kb.test(c)?"&":"?")+x.data,delete x.data),!1===x.cache&&(x.url=rb.test(c)?c.replace(rb,"$1_="+ib++):c+(kb.test(c)?"&":"?")+"_="+ib++));x.ifModified&&(t.lastModified[c]&&K.setRequestHeader("If-Modified-Since",
t.lastModified[c]),t.etag[c]&&K.setRequestHeader("If-None-Match",t.etag[c]));(x.data&&x.hasContent&&!1!==x.contentType||d.contentType)&&K.setRequestHeader("Content-Type",x.contentType);K.setRequestHeader("Accept",x.dataTypes[0]&&x.accepts[x.dataTypes[0]]?x.accepts[x.dataTypes[0]]+("*"!==x.dataTypes[0]?", "+xb+"; q=0.01":""):x.accepts["*"]);for(E in x.headers)K.setRequestHeader(E,x.headers[E]);if(x.beforeSend&&(!1===x.beforeSend.call(k,K,x)||2===T))return K.abort();R="abort";for(E in{success:1,error:1,
complete:1})K[E](x[E]);if(f=G(pb,x,d,K)){K.readyState=1;u&&l.trigger("ajaxSend",[K,x]);x.async&&0<x.timeout&&(m=setTimeout(function(){K.abort("timeout")},x.timeout));try{T=1,f.send(N,e)}catch(z){if(2>T)e(-1,z);else throw z;}}else e(-1,"No Transport");return K},getJSON:function(b,d,e){return t.get(b,d,e,"json")},getScript:function(b,d){return t.get(b,void 0,d,"script")}});t.each(["get","post"],function(b,d){t[d]=function(b,e,f,c){t.isFunction(e)&&(c=c||f,f=e,e=void 0);return t.ajax({url:b,type:d,dataType:c,
data:e,success:f})}});t.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(b,d){t.fn[d]=function(b){return this.on(d,b)}});t._evalUrl=function(b){return t.ajax({url:b,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})};t.fn.extend({wrapAll:function(b){var d;if(t.isFunction(b))return this.each(function(d){t(this).wrapAll(b.call(this,d))});this[0]&&(d=t(b,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&d.insertBefore(this[0]),d.map(function(){for(var b=
this;b.firstElementChild;)b=b.firstElementChild;return b}).append(this));return this},wrapInner:function(b){return t.isFunction(b)?this.each(function(d){t(this).wrapInner(b.call(this,d))}):this.each(function(){var d=t(this),e=d.contents();e.length?e.wrapAll(b):d.append(b)})},wrap:function(b){var d=t.isFunction(b);return this.each(function(e){t(this).wrapAll(d?b.call(this,e):b)})},unwrap:function(){return this.parent().each(function(){t.nodeName(this,"body")||t(this).replaceWith(this.childNodes)}).end()}});
t.expr.filters.hidden=function(b){return 0>=b.offsetWidth&&0>=b.offsetHeight};t.expr.filters.visible=function(b){return!t.expr.filters.hidden(b)};var Hb=/%20/g,Ib=/\[\]$/,yb=/\r?\n/g,Kb=/^(?:submit|button|image|reset|file)$/i,Lb=/^(?:input|select|textarea|keygen)/i;t.param=function(b,d){var e,f=[],c=function(b,d){d=t.isFunction(d)?d():null==d?"":d;f[f.length]=encodeURIComponent(b)+"="+encodeURIComponent(d)};void 0===d&&(d=t.ajaxSettings&&t.ajaxSettings.traditional);if(t.isArray(b)||b.jquery&&!t.isPlainObject(b))t.each(b,
function(){c(this.name,this.value)});else for(e in b)da(e,b[e],d,c);return f.join("&").replace(Hb,"+")};t.fn.extend({serialize:function(){return t.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var b=t.prop(this,"elements");return b?t.makeArray(b):this}).filter(function(){var b=this.type;return this.name&&!t(this).is(":disabled")&&Lb.test(this.nodeName)&&!Kb.test(b)&&(this.checked||!Aa.test(b))}).map(function(b,d){var e=t(this).val();return null==e?null:t.isArray(e)?
t.map(e,function(b){return{name:d.name,value:b.replace(yb,"\r\n")}}):{name:d.name,value:e.replace(yb,"\r\n")}}).get()}});t.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(b){}};var Mb=0,mb={},Nb={0:200,1223:204},bb=t.ajaxSettings.xhr();if(c.ActiveXObject)t(c).on("unload",function(){for(var b in mb)mb[b]()});M.cors=!!bb&&"withCredentials"in bb;M.ajax=bb=!!bb;t.ajaxTransport(function(b){var d;if(M.cors||bb&&!b.crossDomain)return{send:function(e,f){var c,g=b.xhr(),h=++Mb;g.open(b.type,
b.url,b.async,b.username,b.password);if(b.xhrFields)for(c in b.xhrFields)g[c]=b.xhrFields[c];b.mimeType&&g.overrideMimeType&&g.overrideMimeType(b.mimeType);!b.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");for(c in e)g.setRequestHeader(c,e[c]);d=function(b){return function(){d&&(delete mb[h],d=g.onload=g.onerror=null,"abort"===b?g.abort():"error"===b?f(g.status,g.statusText):f(Nb[g.status]||g.status,g.statusText,"string"===typeof g.responseText?{text:g.responseText}:
void 0,g.getAllResponseHeaders()))}};g.onload=d();g.onerror=d("error");d=mb[h]=d("abort");g.send(b.hasContent&&b.data||null)},abort:function(){d&&d()}}});t.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(b){t.globalEval(b);return b}}});t.ajaxPrefilter("script",function(b){void 0===b.cache&&(b.cache=!1);b.crossDomain&&(b.type="GET")});t.ajaxTransport("script",
function(b){if(b.crossDomain){var d,e;return{send:function(f,c){d=t("<script>").prop({async:!0,charset:b.scriptCharset,src:b.url}).on("load error",e=function(b){d.remove();e=null;b&&c("error"===b.type?404:200,b.type)});O.head.appendChild(d[0])},abort:function(){e&&e()}}}});var Cb=[],sb=/(=)\?(?=&|$)|\?\?/;t.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var b=Cb.pop()||t.expando+"_"+ib++;this[b]=!0;return b}});t.ajaxPrefilter("json jsonp",function(b,d,e){var f,g,h,m=!1!==b.jsonp&&(sb.test(b.url)?
"url":"string"===typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&sb.test(b.data)&&"data");if(m||"jsonp"===b.dataTypes[0])return f=b.jsonpCallback=t.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,m?b[m]=b[m].replace(sb,"$1"+f):!1!==b.jsonp&&(b.url+=(kb.test(b.url)?"&":"?")+b.jsonp+"="+f),b.converters["script json"]=function(){h||t.error(f+" was not called");return h[0]},b.dataTypes[0]="json",g=c[f],c[f]=function(){h=arguments},e.always(function(){c[f]=
g;b[f]&&(b.jsonpCallback=d.jsonpCallback,Cb.push(f));h&&t.isFunction(g)&&g(h[0]);h=g=void 0}),"script"});t.parseHTML=function(b,d,e){if(!b||"string"!==typeof b)return null;"boolean"===typeof d&&(e=d,d=!1);d=d||O;var f=ba.exec(b);e=!e&&[];if(f)return[d.createElement(f[1])];f=t.buildFragment([b],d,e);e&&e.length&&t(e).remove();return t.merge([],f.childNodes)};var Db=t.fn.load;t.fn.load=function(b,d,e){if("string"!==typeof b&&Db)return Db.apply(this,arguments);var f,c,g,h=this,m=b.indexOf(" ");0<=m&&
(f=b.slice(m),b=b.slice(0,m));t.isFunction(d)?(e=d,d=void 0):d&&"object"===typeof d&&(c="POST");0<h.length&&t.ajax({url:b,type:c,dataType:"html",data:d}).done(function(b){g=arguments;h.html(f?t("<div>").append(t.parseHTML(b)).find(f):b)}).complete(e&&function(b,d){h.each(e,g||[b.responseText,d,b])});return this};t.expr.filters.animated=function(b){return t.grep(t.timers,function(d){return b===d.elem}).length};var Eb=c.document.documentElement;t.offset={setOffset:function(b,d,e){var f,c,g,h=t.css(b,
"position"),m=t(b),q={};"static"===h&&(b.style.position="relative");g=m.offset();c=t.css(b,"top");f=t.css(b,"left");("absolute"===h||"fixed"===h)&&-1<(c+f).indexOf("auto")?(f=m.position(),c=f.top,f=f.left):(c=parseFloat(c)||0,f=parseFloat(f)||0);t.isFunction(d)&&(d=d.call(b,e,g));null!=d.top&&(q.top=d.top-g.top+c);null!=d.left&&(q.left=d.left-g.left+f);"using"in d?d.using.call(b,q):m.css(q)}};t.fn.extend({offset:function(b){if(arguments.length)return void 0===b?this:this.each(function(d){t.offset.setOffset(this,
b,d)});var d,e;e=this[0];var f={top:0,left:0},c=e&&e.ownerDocument;if(c){d=c.documentElement;if(!t.contains(d,e))return f;"undefined"!==typeof e.getBoundingClientRect&&(f=e.getBoundingClientRect());e=t.isWindow(c)?c:9===c.nodeType&&c.defaultView;return{top:f.top+e.pageYOffset-d.clientTop,left:f.left+e.pageXOffset-d.clientLeft}}},position:function(){if(this[0]){var b,d,e=this[0],f={top:0,left:0};"fixed"===t.css(e,"position")?d=e.getBoundingClientRect():(b=this.offsetParent(),d=this.offset(),t.nodeName(b[0],
"html")||(f=b.offset()),f.top+=t.css(b[0],"borderTopWidth",!0),f.left+=t.css(b[0],"borderLeftWidth",!0));return{top:d.top-f.top-t.css(e,"marginTop",!0),left:d.left-f.left-t.css(e,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var b=this.offsetParent||Eb;b&&!t.nodeName(b,"html")&&"static"===t.css(b,"position");)b=b.offsetParent;return b||Eb})}});t.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,d){var e="pageYOffset"===d;t.fn[b]=function(f){return ma(this,
function(b,f,g){var h=t.isWindow(b)?b:9===b.nodeType&&b.defaultView;if(void 0===g)return h?h[d]:b[f];h?h.scrollTo(!e?g:c.pageXOffset,e?g:c.pageYOffset):b[f]=g},b,f,arguments.length,null)}});t.each(["top","left"],function(b,d){t.cssHooks[d]=z(M.pixelPosition,function(b,e){if(e)return e=n(b,d),Qa.test(e)?t(b).position()[d]+"px":e})});t.each({Height:"height",Width:"width"},function(b,d){t.each({padding:"inner"+b,content:d,"":"outer"+b},function(e,f){t.fn[f]=function(f,c){var g=arguments.length&&(e||
"boolean"!==typeof f),h=e||(!0===f||!0===c?"margin":"border");return ma(this,function(d,e,f){return t.isWindow(d)?d.document.documentElement["client"+b]:9===d.nodeType?(e=d.documentElement,Math.max(d.body["scroll"+b],e["scroll"+b],d.body["offset"+b],e["offset"+b],e["client"+b])):void 0===f?t.css(d,e,h):t.style(d,e,f,h)},d,g?f:void 0,g,null)}})});t.fn.size=function(){return this.length};t.fn.andSelf=t.fn.addBack;"function"===typeof define&&define.amd&&define("jquery",[],function(){return t});var Ob=
c.jQuery,Pb=c.$;t.noConflict=function(b){c.$===t&&(c.$=Pb);b&&c.jQuery===t&&(c.jQuery=Ob);return t};"undefined"===typeof b&&(c.jQuery=c.$=t);return t});(function(c,b){function d(b,d){var f,g;f=b.nodeName.toLowerCase();if("area"===f){f=b.parentNode;g=f.name;if(!b.href||!g||"map"!==f.nodeName.toLowerCase())return!1;f=c("img[usemap=#"+g+"]")[0];return!!f&&e(f)}return(/input|select|textarea|button|object/.test(f)?!b.disabled:"a"===f?b.href||d:d)&&e(b)}function e(b){return c.expr.filters.visible(b)&&!c(b).parents().addBack().filter(function(){return"hidden"===
c.css(this,"visibility")}).length}var g=0,f=/^ui-id-\d+$/;c.ui=c.ui||{};c.extend(c.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});c.fn.extend({focus:function(b){return function(d,e){return"number"===typeof d?this.each(function(){var b=this;setTimeout(function(){c(b).focus();
e&&e.call(b)},d)}):b.apply(this,arguments)}}(c.fn.focus),scrollParent:function(){var b;b=c.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(c.css(this,"position"))&&/(auto|scroll)/.test(c.css(this,"overflow")+c.css(this,"overflow-y")+c.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(c.css(this,"overflow")+c.css(this,"overflow-y")+c.css(this,
"overflow-x"))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?c(document):b},zIndex:function(d){if(d!==b)return this.css("zIndex",d);if(this.length){d=c(this[0]);for(var e;d.length&&d[0]!==document;){e=d.css("position");if("absolute"===e||"relative"===e||"fixed"===e)if(e=parseInt(d.css("zIndex"),10),!isNaN(e)&&0!==e)return e;d=d.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++g)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&
c(this).removeAttr("id")})}});c.extend(c.expr[":"],{data:c.expr.createPseudo?c.expr.createPseudo(function(b){return function(d){return!!c.data(d,b)}}):function(b,d,e){return!!c.data(b,e[3])},focusable:function(b){return d(b,!isNaN(c.attr(b,"tabindex")))},tabbable:function(b){var e=c.attr(b,"tabindex"),f=isNaN(e);return(f||0<=e)&&d(b,!f)}});c("<a>").outerWidth(1).jquery||c.each(["Width","Height"],function(d,e){function f(b,d,e,h){c.each(g,function(){d-=parseFloat(c.css(b,"padding"+this))||0;e&&(d-=
parseFloat(c.css(b,"border"+this+"Width"))||0);h&&(d-=parseFloat(c.css(b,"margin"+this))||0)});return d}var g="Width"===e?["Left","Right"]:["Top","Bottom"],x=e.toLowerCase(),k={innerWidth:c.fn.innerWidth,innerHeight:c.fn.innerHeight,outerWidth:c.fn.outerWidth,outerHeight:c.fn.outerHeight};c.fn["inner"+e]=function(d){return d===b?k["inner"+e].call(this):this.each(function(){c(this).css(x,f(this,d)+"px")})};c.fn["outer"+e]=function(b,d){return"number"!==typeof b?k["outer"+e].call(this,b):this.each(function(){c(this).css(x,
f(this,b,!0,d)+"px")})}});c.fn.addBack||(c.fn.addBack=function(b){return this.add(null==b?this.prevObject:this.prevObject.filter(b))});c("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(c.fn.removeData=function(b){return function(d){return arguments.length?b.call(this,c.camelCase(d)):b.call(this)}}(c.fn.removeData));c.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());c.support.selectstart="onselectstart"in document.createElement("div");c.fn.extend({disableSelection:function(){return this.bind((c.support.selectstart?
"selectstart":"mousedown")+".ui-disableSelection",function(b){b.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});c.extend(c.ui,{plugin:{add:function(b,d,e){var f;b=c.ui[b].prototype;for(f in e)b.plugins[f]=b.plugins[f]||[],b.plugins[f].push([d,e[f]])},call:function(b,d,e){var f=b.plugins[d];if(f&&b.element[0].parentNode&&11!==b.element[0].parentNode.nodeType)for(d=0;d<f.length;d++)b.options[f[d][0]]&&f[d][1].apply(b.element,e)}},hasScroll:function(b,d){if("hidden"===
c(b).css("overflow"))return!1;var e=d&&"left"===d?"scrollLeft":"scrollTop",f=!1;if(0<b[e])return!0;b[e]=1;f=0<b[e];b[e]=0;return f}})})(jQuery);(function(c,b){var d=0,e=Array.prototype.slice,g=c.cleanData;c.cleanData=function(b){for(var d=0,e;null!=(e=b[d]);d++)try{c(e).triggerHandler("remove")}catch(q){}g(b)};c.widget=function(b,d,e){var g,u,x,k,l={},B=b.split(".")[0];b=b.split(".")[1];g=B+"-"+b;e||(e=d,d=c.Widget);c.expr[":"][g.toLowerCase()]=function(b){return!!c.data(b,g)};c[B]=c[B]||{};u=c[B][b];
x=c[B][b]=function(b,d){if(!this._createWidget)return new x(b,d);arguments.length&&this._createWidget(b,d)};c.extend(x,u,{version:e.version,_proto:c.extend({},e),_childConstructors:[]});k=new d;k.options=c.widget.extend({},k.options);c.each(e,function(b,e){c.isFunction(e)?l[b]=function(){var f=function(){return d.prototype[b].apply(this,arguments)},c=function(e){return d.prototype[b].apply(this,e)};return function(){var b=this._super,d=this._superApply,g;this._super=f;this._superApply=c;g=e.apply(this,
arguments);this._super=b;this._superApply=d;return g}}():l[b]=e});x.prototype=c.widget.extend(k,{widgetEventPrefix:u?k.widgetEventPrefix:b},l,{constructor:x,namespace:B,widgetName:b,widgetFullName:g});u?(c.each(u._childConstructors,function(b,d){var e=d.prototype;c.widget(e.namespace+"."+e.widgetName,x,d._proto)}),delete u._childConstructors):d._childConstructors.push(x);c.widget.bridge(b,x)};c.widget.extend=function(d){for(var g=e.call(arguments,1),m=0,q=g.length,u,x;m<q;m++)for(u in g[m])x=g[m][u],
g[m].hasOwnProperty(u)&&x!==b&&(c.isPlainObject(x)?d[u]=c.isPlainObject(d[u])?c.widget.extend({},d[u],x):c.widget.extend({},x):d[u]=x);return d};c.widget.bridge=function(d,g){var m=g.prototype.widgetFullName||d;c.fn[d]=function(q){var u="string"===typeof q,x=e.call(arguments,1),k=this;q=!u&&x.length?c.widget.extend.apply(null,[q].concat(x)):q;u?this.each(function(){var e,g=c.data(this,m);if(!g)return c.error("cannot call methods on "+d+" prior to initialization; attempted to call method '"+q+"'");
if(!c.isFunction(g[q])||"_"===q.charAt(0))return c.error("no such method '"+q+"' for "+d+" widget instance");e=g[q].apply(g,x);if(e!==g&&e!==b)return k=e&&e.jquery?k.pushStack(e.get()):e,!1}):this.each(function(){var b=c.data(this,m);b?b.option(q||{})._init():c.data(this,m,new g(q,this))});return k}};c.Widget=function(){};c.Widget._childConstructors=[];c.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,e){e=
c(e||this.defaultElement||this)[0];this.element=c(e);this.uuid=d++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=c.widget.extend({},this.options,this._getCreateOptions(),b);this.bindings=c();this.hoverable=c();this.focusable=c();e!==this&&(c.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(b){b.target===e&&this.destroy()}}),this.document=c(e.style?e.ownerDocument:e.document||e),this.window=c(this.document[0].defaultView||this.document[0].parentWindow));this._create();
this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:c.noop,_getCreateEventData:c.noop,_create:c.noop,_init:c.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(c.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);
this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:c.noop,widget:function(){return this.element},option:function(d,e){var g=d,q,u,x;if(0===arguments.length)return c.widget.extend({},this.options);if("string"===typeof d)if(g={},q=d.split("."),d=q.shift(),q.length){u=g[d]=c.widget.extend({},this.options[d]);for(x=0;x<q.length-1;x++)u[q[x]]=u[q[x]]||{},u=u[q[x]];d=q.pop();if(e===b)return u[d]===b?null:u[d];u[d]=e}else{if(e===b)return this.options[d]===
b?null:this.options[d];g[d]=e}this._setOptions(g);return this},_setOptions:function(b){for(var d in b)this._setOption(d,b[d]);return this},_setOption:function(b,d){this.options[b]=d;"disabled"===b&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!d).attr("aria-disabled",d),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"));return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",
!0)},_on:function(b,d,e){var g,u=this;"boolean"!==typeof b&&(e=d,d=b,b=!1);e?(d=g=c(d),this.bindings=this.bindings.add(d)):(e=d,d=this.element,g=this.widget());c.each(e,function(e,m){function k(){if(b||!(!0===u.options.disabled||c(this).hasClass("ui-state-disabled")))return("string"===typeof m?u[m]:m).apply(u,arguments)}"string"!==typeof m&&(k.guid=m.guid=m.guid||k.guid||c.guid++);var l=e.match(/^(\w+)\s*(.*)$/),H=l[1]+u.eventNamespace;(l=l[2])?g.delegate(l,H,k):d.bind(H,k)})},_off:function(b,d){d=
(d||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;b.unbind(d).undelegate(d)},_delay:function(b,d){var e=this;return setTimeout(function(){return("string"===typeof b?e[b]:b).apply(e,arguments)},d||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b);this._on(b,{mouseenter:function(b){c(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){c(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b);this._on(b,
{focusin:function(b){c(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){c(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,d,e){var g,u=this.options[b];e=e||{};d=c.Event(d);d.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();d.target=this.element[0];if(b=d.originalEvent)for(g in b)g in d||(d[g]=b[g]);this.element.trigger(d,e);return!(c.isFunction(u)&&!1===u.apply(this.element[0],[d].concat(e))||d.isDefaultPrevented())}};c.each({show:"fadeIn",
hide:"fadeOut"},function(b,d){c.Widget.prototype["_"+b]=function(e,g,u){"string"===typeof g&&(g={effect:g});var x,k=!g?b:!0===g||"number"===typeof g?d:g.effect||d;g=g||{};"number"===typeof g&&(g={duration:g});x=!c.isEmptyObject(g);g.complete=u;g.delay&&e.delay(g.delay);if(x&&c.effects&&c.effects.effect[k])e[b](g);else if(k!==b&&e[k])e[k](g.duration,g.easing,u);else e.queue(function(d){c(this)[b]();u&&u.call(e[0]);d()})}})})(jQuery);(function(c,b){var d=!1;c(document).mouseup(function(){d=!1});c.widget("ui.mouse",
{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(d){return b._mouseDown(d)}).bind("click."+this.widgetName,function(d){if(!0===c.data(d.target,b.widgetName+".preventClickEvent"))return c.removeData(d.target,b.widgetName+".preventClickEvent"),d.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&
c(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!d){this._mouseStarted&&this._mouseUp(b);this._mouseDownEvent=b;var g=this,f=1===b.which,h="string"===typeof this.options.cancel&&b.target.nodeName?c(b.target).closest(this.options.cancel).length:!1;if(!f||h||!this._mouseCapture(b))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){g.mouseDelayMet=
!0},this.options.delay));if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(b),!this._mouseStarted))return b.preventDefault(),!0;!0===c.data(b.target,this.widgetName+".preventClickEvent")&&c.removeData(b.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(b){return g._mouseMove(b)};this._mouseUpDelegate=function(b){return g._mouseUp(b)};c(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,
this._mouseUpDelegate);b.preventDefault();return d=!0}},_mouseMove:function(b){if(c.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button)return this._mouseUp(b);if(this._mouseStarted)return this._mouseDrag(b),b.preventDefault();this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b))?this._mouseDrag(b):this._mouseUp(b));return!this._mouseStarted},_mouseUp:function(b){c(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+
this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&c.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b));return!1},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
(function(c,b){function d(b,d,e){return[parseFloat(b[0])*(l.test(b[0])?d/100:1),parseFloat(b[1])*(l.test(b[1])?e/100:1)]}function e(b){var d=b[0];return 9===d.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:c.isWindow(d)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:d.preventDefault?{width:0,height:0,offset:{top:d.pageY,left:d.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}c.ui=c.ui||{};var g,f=Math.max,h=Math.abs,m=
Math.round,q=/left|center|right/,u=/top|center|bottom/,x=/[\+\-]\d+(\.[\d]+)?%?/,k=/^\w+/,l=/%$/,B=c.fn.position;c.position={scrollbarWidth:function(){if(g!==b)return g;var d,e,f=c("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>");e=f.children()[0];c("body").append(f);d=e.offsetWidth;f.css("overflow","scroll");e=e.offsetWidth;d===e&&(e=f[0].clientWidth);f.remove();return g=d-e},getScrollInfo:function(b){var d=b.isWindow?"":b.element.css("overflow-x"),
e=b.isWindow?"":b.element.css("overflow-y"),d="scroll"===d||"auto"===d&&b.width<b.element[0].scrollWidth;return{width:"scroll"===e||"auto"===e&&b.height<b.element[0].scrollHeight?c.position.scrollbarWidth():0,height:d?c.position.scrollbarWidth():0}},getWithinInfo:function(b){b=c(b||window);var d=c.isWindow(b[0]);return{element:b,isWindow:d,offset:b.offset()||{left:0,top:0},scrollLeft:b.scrollLeft(),scrollTop:b.scrollTop(),width:d?b.width():b.outerWidth(),height:d?b.height():b.outerHeight()}}};c.fn.position=
function(b){if(!b||!b.of)return B.apply(this,arguments);b=c.extend({},b);var g,l,J,T,ca,n,z=c(b.of),s=c.position.getWithinInfo(b.within),v=c.position.getScrollInfo(s),w=(b.collision||"flip").split(" "),y={};n=e(z);z[0].preventDefault&&(b.at="left top");l=n.width;J=n.height;T=n.offset;ca=c.extend({},T);c.each(["my","at"],function(){var d=(b[this]||"").split(" "),e,f;1===d.length&&(d=q.test(d[0])?d.concat(["center"]):u.test(d[0])?["center"].concat(d):["center","center"]);d[0]=q.test(d[0])?d[0]:"center";
d[1]=u.test(d[1])?d[1]:"center";e=x.exec(d[0]);f=x.exec(d[1]);y[this]=[e?e[0]:0,f?f[0]:0];b[this]=[k.exec(d[0])[0],k.exec(d[1])[0]]});1===w.length&&(w[1]=w[0]);"right"===b.at[0]?ca.left+=l:"center"===b.at[0]&&(ca.left+=l/2);"bottom"===b.at[1]?ca.top+=J:"center"===b.at[1]&&(ca.top+=J/2);g=d(y.at,l,J);ca.left+=g[0];ca.top+=g[1];return this.each(function(){var e,q,u=c(this),x=u.outerWidth(),k=u.outerHeight(),B=parseInt(c.css(this,"marginLeft"),10)||0,L=parseInt(c.css(this,"marginTop"),10)||0,n=x+B+(parseInt(c.css(this,
"marginRight"),10)||0)+v.width,Ba=k+L+(parseInt(c.css(this,"marginBottom"),10)||0)+v.height,K=c.extend({},ca),da=d(y.my,u.outerWidth(),u.outerHeight());"right"===b.my[0]?K.left-=x:"center"===b.my[0]&&(K.left-=x/2);"bottom"===b.my[1]?K.top-=k:"center"===b.my[1]&&(K.top-=k/2);K.left+=da[0];K.top+=da[1];c.support.offsetFractions||(K.left=m(K.left),K.top=m(K.top));e={marginLeft:B,marginTop:L};c.each(["left","top"],function(d,f){if(c.ui.position[w[d]])c.ui.position[w[d]][f](K,{targetWidth:l,targetHeight:J,
elemWidth:x,elemHeight:k,collisionPosition:e,collisionWidth:n,collisionHeight:Ba,offset:[g[0]+da[0],g[1]+da[1]],my:b.my,at:b.at,within:s,elem:u})});b.using&&(q=function(d){var e=T.left-K.left,c=e+l-x,g=T.top-K.top,m=g+J-k,q={target:{element:z,left:T.left,top:T.top,width:l,height:J},element:{element:u,left:K.left,top:K.top,width:x,height:k},horizontal:0>c?"left":0<e?"right":"center",vertical:0>m?"top":0<g?"bottom":"middle"};l<x&&h(e+c)<l&&(q.horizontal="center");J<k&&h(g+m)<J&&(q.vertical="middle");
f(h(e),h(c))>f(h(g),h(m))?q.important="horizontal":q.important="vertical";b.using.call(this,d,q)});u.offset(c.extend(K,{using:q}))})};c.ui.position={fit:{left:function(b,d){var e=d.within,c=e.isWindow?e.scrollLeft:e.offset.left,g=e.width,h=b.left-d.collisionPosition.marginLeft,e=c-h,m=h+d.collisionWidth-g-c;d.collisionWidth>g?0<e&&0>=m?(c=b.left+e+d.collisionWidth-g-c,b.left+=e-c):b.left=0<m&&0>=e?c:e>m?c+g-d.collisionWidth:c:b.left=0<e?b.left+e:0<m?b.left-m:f(b.left-h,b.left)},top:function(b,d){var e=
d.within,c=e.isWindow?e.scrollTop:e.offset.top,g=d.within.height,h=b.top-d.collisionPosition.marginTop,e=c-h,m=h+d.collisionHeight-g-c;d.collisionHeight>g?0<e&&0>=m?(c=b.top+e+d.collisionHeight-g-c,b.top+=e-c):b.top=0<m&&0>=e?c:e>m?c+g-d.collisionHeight:c:b.top=0<e?b.top+e:0<m?b.top-m:f(b.top-h,b.top)}},flip:{left:function(b,d){var e=d.within,f=e.offset.left+e.scrollLeft,c=e.width,g=e.isWindow?e.scrollLeft:e.offset.left,m=b.left-d.collisionPosition.marginLeft,e=m-g,q=m+d.collisionWidth-c-g,m="left"===
d.my[0]?-d.elemWidth:"right"===d.my[0]?d.elemWidth:0,u="left"===d.at[0]?d.targetWidth:"right"===d.at[0]?-d.targetWidth:0,x=-2*d.offset[0];if(0>e){if(f=b.left+m+u+x+d.collisionWidth-c-f,0>f||f<h(e))b.left+=m+u+x}else if(0<q&&(f=b.left-d.collisionPosition.marginLeft+m+u+x-g,0<f||h(f)<q))b.left+=m+u+x},top:function(b,d){var e=d.within,f=e.offset.top+e.scrollTop,c=e.height,g=e.isWindow?e.scrollTop:e.offset.top,m=b.top-d.collisionPosition.marginTop,e=m-g,q=m+d.collisionHeight-c-g,m="top"===d.my[1]?-d.elemHeight:
"bottom"===d.my[1]?d.elemHeight:0,u="top"===d.at[1]?d.targetHeight:"bottom"===d.at[1]?-d.targetHeight:0,x=-2*d.offset[1];if(0>e){if(f=b.top+m+u+x+d.collisionHeight-c-f,b.top+m+u+x>e&&(0>f||f<h(e)))b.top+=m+u+x}else if(0<q&&(f=b.top-d.collisionPosition.marginTop+m+u+x-g,b.top+m+u+x>q&&(0<f||h(f)<q)))b.top+=m+u+x}},flipfit:{left:function(){c.ui.position.flip.left.apply(this,arguments);c.ui.position.fit.left.apply(this,arguments)},top:function(){c.ui.position.flip.top.apply(this,arguments);c.ui.position.fit.top.apply(this,
arguments)}}};(function(){var b,d,e,f,g=document.getElementsByTagName("body")[0];e=document.createElement("div");b=document.createElement(g?"div":"body");d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};g&&c.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in d)b.style[f]=d[f];b.appendChild(e);d=g||document.documentElement;d.insertBefore(b,d.firstChild);e.style.cssText="position: absolute; left: 10.7432222px;";e=c(e).offset().left;c.support.offsetFractions=
10<e&&11>e;b.innerHTML="";d.removeChild(b)})()})(jQuery);(function(c,b){c.widget("ui.draggable",c.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,
start:null,stop:null},_create:function(){"original"===this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(b){var e=this.options;if(this.helper||
e.disabled||0<c(b.target).closest(".ui-resizable-handle").length)return!1;this.handle=this._getHandle(b);if(!this.handle)return!1;c(!0===e.iframeFix?"iframe":e.iframeFix).each(function(){c("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(c(this).offset()).appendTo("body")});return!0},_mouseStart:function(b){var e=this.options;this.helper=this._createHelper(b);
this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();c.ui.ddmanager&&(c.ui.ddmanager.current=this);this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offsetParent=this.helper.offsetParent();this.offsetParentCssPosition=this.offsetParent.css("position");this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.offset.scroll=
!1;c.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt);this._setContainment();if(!1===this._trigger("start",b))return this._clear(),!1;this._cacheHelperProportions();c.ui.ddmanager&&!e.dropBehaviour&&c.ui.ddmanager.prepareOffsets(this,
b);this._mouseDrag(b,!0);c.ui.ddmanager&&c.ui.ddmanager.dragStart(this,b);return!0},_mouseDrag:function(b,e){"fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset());this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");if(!e){var g=this._uiHash();if(!1===this._trigger("drag",b,g))return this._mouseUp({}),!1;this.position=g.position}if(!this.options.axis||"y"!==this.options.axis)this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||
"x"!==this.options.axis)this.helper[0].style.top=this.position.top+"px";c.ui.ddmanager&&c.ui.ddmanager.drag(this,b);return!1},_mouseStop:function(b){var e=this,g=!1;c.ui.ddmanager&&!this.options.dropBehaviour&&(g=c.ui.ddmanager.drop(this,b));this.dropped&&(g=this.dropped,this.dropped=!1);if("original"===this.options.helper&&!c.contains(this.element[0].ownerDocument,this.element[0]))return!1;"invalid"===this.options.revert&&!g||"valid"===this.options.revert&&g||!0===this.options.revert||c.isFunction(this.options.revert)&&
this.options.revert.call(this.element,g)?c(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==e._trigger("stop",b)&&e._clear()}):!1!==this._trigger("stop",b)&&this._clear();return!1},_mouseUp:function(b){c("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});c.ui.ddmanager&&c.ui.ddmanager.dragStop(this,b);return c.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):
this._clear();return this},_getHandle:function(b){return this.options.handle?!!c(b.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(b){var e=this.options;b=c.isFunction(e.helper)?c(e.helper.apply(this.element[0],[b])):"clone"===e.helper?this.element.clone().removeAttr("id"):this.element;b.parents("body").length||b.appendTo("parent"===e.appendTo?this.element[0].parentNode:e.appendTo);b[0]!==this.element[0]&&!/(fixed|absolute)/.test(b.css("position"))&&b.css("position",
"absolute");return b},_adjustOffsetFromHelper:function(b){"string"===typeof b&&(b=b.split(" "));c.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);"top"in b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){var b=this.offsetParent.offset();
"absolute"===this.cssPosition&&(this.scrollParent[0]!==document&&c.contains(this.scrollParent[0],this.offsetParent[0]))&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&c.ui.ie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===
this.cssPosition){var b=this.element.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions=
{width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,e,g;b=this.options;if(b.containment)if("window"===b.containment)this.containment=[c(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,c(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,c(window).scrollLeft()+c(window).width()-this.helperProportions.width-this.margins.left,c(window).scrollTop()+(c(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-
this.margins.top];else if("document"===b.containment)this.containment=[0,0,c(document).width()-this.helperProportions.width-this.margins.left,(c(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];else if(b.containment.constructor===Array)this.containment=b.containment;else{if("parent"===b.containment&&(b.containment=this.helper[0].parentNode),e=c(b.containment),g=e[0])b="hidden"!==e.css("overflow"),this.containment=[(parseInt(e.css("borderLeftWidth"),
10)||0)+(parseInt(e.css("paddingLeft"),10)||0),(parseInt(e.css("borderTopWidth"),10)||0)+(parseInt(e.css("paddingTop"),10)||0),(b?Math.max(g.scrollWidth,g.offsetWidth):g.offsetWidth)-(parseInt(e.css("borderRightWidth"),10)||0)-(parseInt(e.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(g.scrollHeight,g.offsetHeight):g.offsetHeight)-(parseInt(e.css("borderBottomWidth"),10)||0)-(parseInt(e.css("paddingBottom"),10)||0)-this.helperProportions.height-
this.margins.top-this.margins.bottom],this.relative_container=e}else this.containment=null},_convertPositionTo:function(b,e){e||(e=this.position);var g="absolute"===b?1:-1,f="absolute"===this.cssPosition&&!(this.scrollParent[0]!==document&&c.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent;this.offset.scroll||(this.offset.scroll={top:f.scrollTop(),left:f.scrollLeft()});return{top:e.top+this.offset.relative.top*g+this.offset.parent.top*g-("fixed"===this.cssPosition?
-this.scrollParent.scrollTop():this.offset.scroll.top)*g,left:e.left+this.offset.relative.left*g+this.offset.parent.left*g-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*g}},_generatePosition:function(b){var e,g,f,h=this.options,m="absolute"===this.cssPosition&&!(this.scrollParent[0]!==document&&c.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent;f=b.pageX;g=b.pageY;this.offset.scroll||(this.offset.scroll={top:m.scrollTop(),
left:m.scrollLeft()});this.originalPosition&&(this.containment&&(this.relative_container?(e=this.relative_container.offset(),e=[this.containment[0]+e.left,this.containment[1]+e.top,this.containment[2]+e.left,this.containment[3]+e.top]):e=this.containment,b.pageX-this.offset.click.left<e[0]&&(f=e[0]+this.offset.click.left),b.pageY-this.offset.click.top<e[1]&&(g=e[1]+this.offset.click.top),b.pageX-this.offset.click.left>e[2]&&(f=e[2]+this.offset.click.left),b.pageY-this.offset.click.top>e[3]&&(g=e[3]+
this.offset.click.top)),h.grid&&(g=h.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/h.grid[1])*h.grid[1]:this.originalPageY,g=e?g-this.offset.click.top>=e[1]||g-this.offset.click.top>e[3]?g:g-this.offset.click.top>=e[1]?g-h.grid[1]:g+h.grid[1]:g,f=h.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/h.grid[0])*h.grid[0]:this.originalPageX,f=e?f-this.offset.click.left>=e[0]||f-this.offset.click.left>e[2]?f:f-this.offset.click.left>=e[0]?f-h.grid[0]:f+h.grid[0]:f));return{top:g-
this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=
!1},_trigger:function(b,e,g){g=g||this._uiHash();c.ui.plugin.call(this,b,[e,g]);"drag"===b&&(this.positionAbs=this._convertPositionTo("absolute"));return c.Widget.prototype._trigger.call(this,b,e,g)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});c.ui.plugin.add("draggable","connectToSortable",{start:function(b,e){var g=c(this).data("ui-draggable"),f=g.options,h=c.extend({},e,{item:g.element});g.sortables=
[];c(f.connectToSortable).each(function(){var e=c.data(this,"ui-sortable");e&&!e.options.disabled&&(g.sortables.push({instance:e,shouldRevert:e.options.revert}),e.refreshPositions(),e._trigger("activate",b,h))})},stop:function(b,e){var g=c(this).data("ui-draggable"),f=c.extend({},e,{item:g.element});c.each(g.sortables,function(){this.instance.isOver?(this.instance.isOver=0,g.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),
this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"===g.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,f))})},drag:function(b,e){var g=c(this).data("ui-draggable"),f=this;c.each(g.sortables,function(){var h=!1,m=this;this.instance.positionAbs=g.positionAbs;this.instance.helperProportions=g.helperProportions;this.instance.offset.click=g.offset.click;this.instance._intersectsWith(this.instance.containerCache)&&
(h=!0,c.each(g.sortables,function(){this.instance.positionAbs=g.positionAbs;this.instance.helperProportions=g.helperProportions;this.instance.offset.click=g.offset.click;this!==m&&(this.instance._intersectsWith(this.instance.containerCache)&&c.contains(m.instance.element[0],this.instance.element[0]))&&(h=!1);return h}));h?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=c(f).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=
this.instance.options.helper,this.instance.options.helper=function(){return e.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=g.offset.click.top,this.instance.offset.click.left=g.offset.click.left,this.instance.offset.parent.left-=g.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=g.offset.parent.top-this.instance.offset.parent.top,g._trigger("toSortable",b),g.dropped=
this.instance.element,g.currentItem=g.element,this.instance.fromOutside=g),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),
g._trigger("fromSortable",b),g.dropped=!1)})}});c.ui.plugin.add("draggable","cursor",{start:function(){var b=c("body"),e=c(this).data("ui-draggable").options;b.css("cursor")&&(e._cursor=b.css("cursor"));b.css("cursor",e.cursor)},stop:function(){var b=c(this).data("ui-draggable").options;b._cursor&&c("body").css("cursor",b._cursor)}});c.ui.plugin.add("draggable","opacity",{start:function(b,e){var g=c(e.helper),f=c(this).data("ui-draggable").options;g.css("opacity")&&(f._opacity=g.css("opacity"));g.css("opacity",
f.opacity)},stop:function(b,e){var g=c(this).data("ui-draggable").options;g._opacity&&c(e.helper).css("opacity",g._opacity)}});c.ui.plugin.add("draggable","scroll",{start:function(){var b=c(this).data("ui-draggable");b.scrollParent[0]!==document&&"HTML"!==b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(b){var e=c(this).data("ui-draggable"),g=e.options,f=!1;if(e.scrollParent[0]!==document&&"HTML"!==e.scrollParent[0].tagName){if(!g.axis||"x"!==g.axis)e.overflowOffset.top+
e.scrollParent[0].offsetHeight-b.pageY<g.scrollSensitivity?e.scrollParent[0].scrollTop=f=e.scrollParent[0].scrollTop+g.scrollSpeed:b.pageY-e.overflowOffset.top<g.scrollSensitivity&&(e.scrollParent[0].scrollTop=f=e.scrollParent[0].scrollTop-g.scrollSpeed);if(!g.axis||"y"!==g.axis)e.overflowOffset.left+e.scrollParent[0].offsetWidth-b.pageX<g.scrollSensitivity?e.scrollParent[0].scrollLeft=f=e.scrollParent[0].scrollLeft+g.scrollSpeed:b.pageX-e.overflowOffset.left<g.scrollSensitivity&&(e.scrollParent[0].scrollLeft=
f=e.scrollParent[0].scrollLeft-g.scrollSpeed)}else{if(!g.axis||"x"!==g.axis)b.pageY-c(document).scrollTop()<g.scrollSensitivity?f=c(document).scrollTop(c(document).scrollTop()-g.scrollSpeed):c(window).height()-(b.pageY-c(document).scrollTop())<g.scrollSensitivity&&(f=c(document).scrollTop(c(document).scrollTop()+g.scrollSpeed));if(!g.axis||"y"!==g.axis)b.pageX-c(document).scrollLeft()<g.scrollSensitivity?f=c(document).scrollLeft(c(document).scrollLeft()-g.scrollSpeed):c(window).width()-(b.pageX-c(document).scrollLeft())<
g.scrollSensitivity&&(f=c(document).scrollLeft(c(document).scrollLeft()+g.scrollSpeed))}!1!==f&&(c.ui.ddmanager&&!g.dropBehaviour)&&c.ui.ddmanager.prepareOffsets(e,b)}});c.ui.plugin.add("draggable","snap",{start:function(){var b=c(this).data("ui-draggable"),e=b.options;b.snapElements=[];c(e.snap.constructor!==String?e.snap.items||":data(ui-draggable)":e.snap).each(function(){var e=c(this),f=e.offset();this!==b.element[0]&&b.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),
top:f.top,left:f.left})})},drag:function(b,e){var g,f,h,m,q,u,x,k,l,B,H=c(this).data("ui-draggable"),E=H.options,N=E.snapTolerance,J=e.offset.left,R=J+H.helperProportions.width,ca=e.offset.top,n=ca+H.helperProportions.height;for(l=H.snapElements.length-1;0<=l;l--)q=H.snapElements[l].left,u=q+H.snapElements[l].width,x=H.snapElements[l].top,k=x+H.snapElements[l].height,R<q-N||J>u+N||n<x-N||ca>k+N||!c.contains(H.snapElements[l].item.ownerDocument,H.snapElements[l].item)?(H.snapElements[l].snapping&&
H.options.snap.release&&H.options.snap.release.call(H.element,b,c.extend(H._uiHash(),{snapItem:H.snapElements[l].item})),H.snapElements[l].snapping=!1):("inner"!==E.snapMode&&(g=Math.abs(x-n)<=N,f=Math.abs(k-ca)<=N,h=Math.abs(q-R)<=N,m=Math.abs(u-J)<=N,g&&(e.position.top=H._convertPositionTo("relative",{top:x-H.helperProportions.height,left:0}).top-H.margins.top),f&&(e.position.top=H._convertPositionTo("relative",{top:k,left:0}).top-H.margins.top),h&&(e.position.left=H._convertPositionTo("relative",
{top:0,left:q-H.helperProportions.width}).left-H.margins.left),m&&(e.position.left=H._convertPositionTo("relative",{top:0,left:u}).left-H.margins.left)),B=g||f||h||m,"outer"!==E.snapMode&&(g=Math.abs(x-ca)<=N,f=Math.abs(k-n)<=N,h=Math.abs(q-J)<=N,m=Math.abs(u-R)<=N,g&&(e.position.top=H._convertPositionTo("relative",{top:x,left:0}).top-H.margins.top),f&&(e.position.top=H._convertPositionTo("relative",{top:k-H.helperProportions.height,left:0}).top-H.margins.top),h&&(e.position.left=H._convertPositionTo("relative",
{top:0,left:q}).left-H.margins.left),m&&(e.position.left=H._convertPositionTo("relative",{top:0,left:u-H.helperProportions.width}).left-H.margins.left)),!H.snapElements[l].snapping&&(g||f||h||m||B)&&H.options.snap.snap&&H.options.snap.snap.call(H.element,b,c.extend(H._uiHash(),{snapItem:H.snapElements[l].item})),H.snapElements[l].snapping=g||f||h||m||B)}});c.ui.plugin.add("draggable","stack",{start:function(){var b,e=this.data("ui-draggable").options,e=c.makeArray(c(e.stack)).sort(function(b,d){return(parseInt(c(b).css("zIndex"),
10)||0)-(parseInt(c(d).css("zIndex"),10)||0)});e.length&&(b=parseInt(c(e[0]).css("zIndex"),10)||0,c(e).each(function(e){c(this).css("zIndex",b+e)}),this.css("zIndex",b+e.length))}});c.ui.plugin.add("draggable","zIndex",{start:function(b,e){var g=c(e.helper),f=c(this).data("ui-draggable").options;g.css("zIndex")&&(f._zIndex=g.css("zIndex"));g.css("zIndex",f.zIndex)},stop:function(b,e){var g=c(this).data("ui-draggable").options;g._zIndex&&c(e.helper).css("zIndex",g._zIndex)}})})(jQuery);(function(c,
b){c.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var b=this.options,e=b.accept;this.isover=!1;this.isout=!0;this.accept=c.isFunction(e)?e:function(b){return b.is(e)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};c.ui.ddmanager.droppables[b.scope]=
c.ui.ddmanager.droppables[b.scope]||[];c.ui.ddmanager.droppables[b.scope].push(this);b.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var b=0,e=c.ui.ddmanager.droppables[this.options.scope];b<e.length;b++)e[b]===this&&e.splice(b,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(b,e){"accept"===b&&(this.accept=c.isFunction(e)?e:function(b){return b.is(e)});c.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var e=
c.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass);e&&this._trigger("activate",b,this.ui(e))},_deactivate:function(b){var e=c.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);e&&this._trigger("deactivate",b,this.ui(e))},_over:function(b){var e=c.ui.ddmanager.current;if(e&&(e.currentItem||e.element)[0]!==this.element[0])if(this.accept.call(this.element[0],e.currentItem||e.element))this.options.hoverClass&&
this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(e))},_out:function(b){var e=c.ui.ddmanager.current;if(e&&(e.currentItem||e.element)[0]!==this.element[0])if(this.accept.call(this.element[0],e.currentItem||e.element))this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(e))},_drop:function(b,e){var g=e||c.ui.ddmanager.current,f=!1;if(!g||(g.currentItem||g.element)[0]===this.element[0])return!1;this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var b=
c.data(this,"ui-droppable");if(b.options.greedy&&!b.options.disabled&&b.options.scope===g.options.scope&&b.accept.call(b.element[0],g.currentItem||g.element)&&c.ui.intersect(g,c.extend(b,{offset:b.element.offset()}),b.options.tolerance))return f=!0,!1});return f?!1:this.accept.call(this.element[0],g.currentItem||g.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,
this.ui(g)),this.element):!1},ui:function(b){return{draggable:b.currentItem||b.element,helper:b.helper,position:b.position,offset:b.positionAbs}},_inBounds:function(b){return"function"===typeof this.options.inBounds?this.options.inBounds(b):!1}});c.ui.intersect=function(b,e,c){if(!e.offset)return!1;var f=(b.positionAbs||b.position.absolute).left,h=f+b.helperProportions.width,m=(b.positionAbs||b.position.absolute).top,q=m+b.helperProportions.height,u=e.offset.left,x=u+e.proportions.width,k=e.offset.top,
l=k+e.proportions.height;switch(c){case "fit":return u<=f&&h<=x&&k<=m&&q<=l;case "intersect":return u<f+b.helperProportions.width/2&&h-b.helperProportions.width/2<x&&k<m+b.helperProportions.height/2&&q-b.helperProportions.height/2<l;case "pointer":return c=(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left,b=(b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click).top,b>k&&b<k+e.proportions.height&&c>u&&c<u+e.proportions.width;case "touch":return(m>=k&&
m<=l||q>=k&&q<=l||m<k&&q>l)&&(f>=u&&f<=x||h>=u&&h<=x||f<u&&h>x);default:return!1}};c.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,e){var g,f,h=c.ui.ddmanager.droppables[b.options.scope]||[],m=e?e.type:null,q=(b.currentItem||b.element).find(":data(ui-droppable)").addBack();g=0;a:for(;g<h.length;g++)if(!(h[g].options.disabled||b&&!h[g].accept.call(h[g].element[0],b.currentItem||b.element))){for(f=0;f<q.length;f++)if(q[f]===h[g].element[0]){h[g].proportions.height=0;
continue a}h[g].visible="none"!==h[g].element.css("display");h[g].visible&&("mousedown"===m&&h[g]._activate.call(h[g],e),h[g].offset=h[g].element.offset(),h[g].proportions={width:h[g].element[0].offsetWidth,height:h[g].element[0].offsetHeight})}},drop:function(b,e){var g=!1;c.each((c.ui.ddmanager.droppables[b.options.scope]||[]).slice(),function(){if(this.options&&(!this.options.disabled&&(this.visible&&this._inBounds(e)&&c.ui.intersect(b,this,this.options.tolerance))&&(g=this._drop.call(this,e)||
g),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)))this.isout=!0,this.isover=!1,this._deactivate.call(this,e)});return g},dragStart:function(b,e){b.element.parentsUntil("body").bind("scroll.droppable",function(){b.options.refreshPositions||c.ui.ddmanager.prepareOffsets(b,e)})},drag:function(b,e){b.options.refreshPositions&&c.ui.ddmanager.prepareOffsets(b,e);c.each(c.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&
!this.greedyChild&&this.visible){var g,f,h;h=this._inBounds(e)&&c.ui.intersect(b,this,this.options.tolerance);var m=!h&&this.isover?"isout":h&&!this.isover?"isover":null;m&&(this.options.greedy&&(f=this.options.scope,h=this.element.parents(":data(ui-droppable)").filter(function(){return c.data(this,"ui-droppable").options.scope===f}),h.length&&(g=c.data(h[0],"ui-droppable"),g.greedyChild="isover"===m)),g&&"isover"===m&&(g.isover=!1,g.isout=!0,g._out.call(g,e)),this[m]=!0,this["isout"===m?"isover":
"isout"]=!1,this["isover"===m?"_over":"_out"].call(this,e),g&&"isout"===m&&(g.isout=!1,g.isover=!0,g._over.call(g,e)))}})},dragStop:function(b,e){b.element.parentsUntil("body").unbind("scroll.droppable");b.options.refreshPositions||c.ui.ddmanager.prepareOffsets(b,e)}}})(jQuery);(function(c,b){function d(b){return/left|right/.test(b.css("float"))||/inline|table-cell/.test(b.css("display"))}c.widget("ui.sortable",c.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",
axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var b=this.options;this.containerCache=
{};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?"x"===b.axis||d(this.items[0].item):!1;this.offset=this.element.offset();this._mouseInit();this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var b=this.items.length-1;0<=b;b--)this.items[b].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,d){"disabled"===b?(this.options[b]=d,this.widget().toggleClass("ui-sortable-disabled",
!!d)):c.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,d){var f=null,h=!1,m=this;if(this.reverting||this.options.disabled||"static"===this.options.type)return!1;this._refreshItems(b);c(b.target).parents().each(function(){if(c.data(this,m.widgetName+"-item")===m)return f=c(this),!1});c.data(b.target,m.widgetName+"-item")===m&&(f=c(b.target));if(!f||this.options.handle&&!d&&(c(this.options.handle,f).find("*").addBack().each(function(){this===b.target&&(h=!0)}),!h))return!1;
this.currentItem=f;this._removeCurrentsFromItems();return!0},_mouseStart:function(b,d,f){var h;d=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(b);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};c.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},
parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!==this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();d.containment&&this._setContainment();
d.cursor&&"auto"!==d.cursor&&(h=this.document.find("body"),this.storedCursor=h.css("cursor"),h.css("cursor",d.cursor),this.storedStylesheet=c("<style>*{ cursor: "+d.cursor+" !important; }</style>").appendTo(h));d.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",d.opacity));d.zIndex&&(this.helper.css("zIndex")?this._storedZIndex=this.helper.css("zIndex"):this._storedZIndex="auto",this.helper.css("zIndex",d.zIndex));this.scrollParent[0]!==
document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset());this._trigger("start",b,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!f)for(f=this.containers.length-1;0<=f;f--)this.containers[f]._trigger("activate",b,this._uiHash(this));c.ui.ddmanager&&(c.ui.ddmanager.current=this);c.ui.ddmanager&&!d.dropBehaviour&&c.ui.ddmanager.prepareOffsets(this,b);this.dragging=!0;this.helper.addClass("ui-sortable-helper");this._mouseDrag(b);
return!0},_mouseDrag:function(b){var d,f,h,m;d=this.options;f=!1;this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity?this.scrollParent[0].scrollTop=f=this.scrollParent[0].scrollTop+d.scrollSpeed:b.pageY-this.overflowOffset.top<
d.scrollSensitivity&&(this.scrollParent[0].scrollTop=f=this.scrollParent[0].scrollTop-d.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity?this.scrollParent[0].scrollLeft=f=this.scrollParent[0].scrollLeft+d.scrollSpeed:b.pageX-this.overflowOffset.left<d.scrollSensitivity&&(this.scrollParent[0].scrollLeft=f=this.scrollParent[0].scrollLeft-d.scrollSpeed)):(b.pageY-c(document).scrollTop()<d.scrollSensitivity?f=c(document).scrollTop(c(document).scrollTop()-
d.scrollSpeed):c(window).height()-(b.pageY-c(document).scrollTop())<d.scrollSensitivity&&(f=c(document).scrollTop(c(document).scrollTop()+d.scrollSpeed)),b.pageX-c(document).scrollLeft()<d.scrollSensitivity?f=c(document).scrollLeft(c(document).scrollLeft()-d.scrollSpeed):c(window).width()-(b.pageX-c(document).scrollLeft())<d.scrollSensitivity&&(f=c(document).scrollLeft(c(document).scrollLeft()+d.scrollSpeed))),!1!==f&&(c.ui.ddmanager&&!d.dropBehaviour)&&c.ui.ddmanager.prepareOffsets(this,b));this.positionAbs=
this._convertPositionTo("absolute");if(!this.options.axis||"y"!==this.options.axis)this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||"x"!==this.options.axis)this.helper[0].style.top=this.position.top+"px";for(d=this.items.length-1;0<=d;d--)if(f=this.items[d],h=f.item[0],(m=this._intersectsWithPointer(f))&&f.instance===this.currentContainer&&h!==this.currentItem[0]&&this.placeholder[1===m?"next":"prev"]()[0]!==h&&!c.contains(this.placeholder[0],h)&&("semi-dynamic"===this.options.type?
!c.contains(this.element[0],h):1)){this.direction=1===m?"down":"up";if("pointer"===this.options.tolerance||this._intersectsWithSides(f))this._rearrange(b,f);else break;this._trigger("change",b,this._uiHash());break}this._contactContainers(b);c.ui.ddmanager&&c.ui.ddmanager.drag(this,b);this._trigger("sort",b,this._uiHash());this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(b,d){if(b){c.ui.ddmanager&&!this.options.dropBehaviour&&c.ui.ddmanager.drop(this,b);if(this.options.revert){var f=
this,h=this.placeholder.offset(),m=this.options.axis,q={};if(!m||"x"===m)q.left=h.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft);if(!m||"y"===m)q.top=h.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop);this.reverting=!0;c(this.helper).animate(q,parseInt(this.options.revert,10)||500,function(){f._clear(b)})}else this._clear(b,d);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});
"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;0<=b;b--)this.containers[b]._trigger("deactivate",null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==
this.options.helper&&(this.helper&&this.helper[0].parentNode)&&this.helper.remove(),c.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?c(this.domPosition.prev).after(this.currentItem):c(this.domPosition.parent).prepend(this.currentItem));return this},serialize:function(b){var d=this._getItemsAsjQuery(b&&b.connected),f=[];b=b||{};c(d).each(function(){var d=(c(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[\-=_](.+)/);d&&f.push((b.key||
d[1]+"[]")+"="+(b.key&&b.expression?d[1]:d[2]))});!f.length&&b.key&&f.push(b.key+"=");return f.join("&")},toArray:function(b){var d=this._getItemsAsjQuery(b&&b.connected),f=[];b=b||{};d.each(function(){f.push(c(b.item||this).attr(b.attribute||"id")||"")});return f},_intersectsWith:function(b){var d=this.positionAbs.left,f=d+this.helperProportions.width,c=this.positionAbs.top,m=c+this.helperProportions.height,q=b.left,u=q+b.width,x=b.top,k=x+b.height,l=this.offset.click.top,B=this.offset.click.left,
B="y"===this.options.axis||d+B>q&&d+B<u,l=("x"===this.options.axis||c+l>x&&c+l<k)&&B;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>b[this.floating?"width":"height"]?l:q<d+this.helperProportions.width/2&&f-this.helperProportions.width/2<u&&x<c+this.helperProportions.height/2&&m-this.helperProportions.height/2<k},_intersectsWithPointer:function(b){var d="y"===this.options.axis||
this.positionAbs.left+this.offset.click.left>b.left&&this.positionAbs.left+this.offset.click.left<b.left+b.width;b=("x"===this.options.axis||this.positionAbs.top+this.offset.click.top>b.top&&this.positionAbs.top+this.offset.click.top<b.top+b.height)&&d;var d=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return!b?!1:this.floating?f&&"right"===f||"down"===d?2:1:d&&("down"===d?2:1)},_intersectsWithSides:function(b){var d=this.positionAbs.top+this.offset.click.top>b.top+b.height/
2&&this.positionAbs.top+this.offset.click.top<b.top+b.height/2+b.height;b=this.positionAbs.left+this.offset.click.left>b.left+b.width/2&&this.positionAbs.left+this.offset.click.left<b.left+b.width/2+b.width;var f=this._getDragVerticalDirection(),c=this._getDragHorizontalDirection();return this.floating&&c?"right"===c&&b||"left"===c&&!b:f&&("down"===f&&d||"up"===f&&!d)},_getDragVerticalDirection:function(){var b=this.positionAbs.top-this.lastPositionAbs.top;return 0!==b&&(0<b?"down":"up")},_getDragHorizontalDirection:function(){var b=
this.positionAbs.left-this.lastPositionAbs.left;return 0!==b&&(0<b?"right":"left")},refresh:function(b){this._refreshItems(b);this.refreshPositions();return this},_connectWith:function(){var b=this.options;return b.connectWith.constructor===String?[b.connectWith]:b.connectWith},_getItemsAsjQuery:function(b){var d,f,h,m=[],q=[],u=this._connectWith();if(u&&b)for(b=u.length-1;0<=b;b--){f=c(u[b]);for(d=f.length-1;0<=d;d--)(h=c.data(f[d],this.widgetFullName))&&(h!==this&&!h.options.disabled)&&q.push([c.isFunction(h.options.items)?
h.options.items.call(h.element):c(h.options.items,h.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),h])}q.push([c.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):c(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(b=q.length-1;0<=b;b--)q[b][0].each(function(){m.push(this)});return c(m)},_removeCurrentsFromItems:function(){var b=this.currentItem.find(":data("+
this.widgetName+"-item)");this.items=c.grep(this.items,function(d){for(var f=0;f<b.length;f++)if(b[f]===d.item[0])return!1;return!0})},_refreshItems:function(b){this.items=[];this.containers=[this];var d,f,h,m,q,u=this.items,x=[[c.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):c(this.options.items,this.element),this]];if((q=this._connectWith())&&this.ready)for(d=q.length-1;0<=d;d--){h=c(q[d]);for(f=h.length-1;0<=f;f--)if((m=c.data(h[f],this.widgetFullName))&&
m!==this&&!m.options.disabled)x.push([c.isFunction(m.options.items)?m.options.items.call(m.element[0],b,{item:this.currentItem}):c(m.options.items,m.element),m]),this.containers.push(m)}for(d=x.length-1;0<=d;d--){b=x[d][1];h=x[d][0];f=0;for(q=h.length;f<q;f++)m=c(h[f]),m.data(this.widgetName+"-item",b),u.push({item:m,instance:b,width:0,height:0,left:0,top:0})}},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var d,f,h;for(d=this.items.length-
1;0<=d;d--)f=this.items[d],f.instance!==this.currentContainer&&this.currentContainer&&f.item[0]!==this.currentItem[0]||(h=this.options.toleranceElement?c(this.options.toleranceElement,f.item):f.item,b||(f.width=h.outerWidth(),f.height=h.outerHeight()),h=h.offset(),f.left=h.left,f.top=h.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(d=this.containers.length-1;0<=d;d--)h=this.containers[d].element.offset(),this.containers[d].containerCache.left=
h.left,this.containers[d].containerCache.top=h.top,this.containers[d].containerCache.width=this.containers[d].element.outerWidth(),this.containers[d].containerCache.height=this.containers[d].element.outerHeight();return this},_createPlaceholder:function(b){b=b||this;var d,f=b.options;if(!f.placeholder||f.placeholder.constructor===String)d=f.placeholder,f.placeholder={element:function(){var f=b.currentItem[0].nodeName.toLowerCase(),m=c("<"+f+">",b.document[0]).addClass(d||b.currentItem[0].className+
" ui-sortable-placeholder").removeClass("ui-sortable-helper");"tr"===f?b.currentItem.children().each(function(){c("<td>&#160;</td>",b.document[0]).attr("colspan",c(this).attr("colspan")||1).appendTo(m)}):"img"===f&&m.attr("src",b.currentItem.attr("src"));d||m.css("visibility","hidden");return m},update:function(c,m){if(!d||f.forcePlaceholderSize)m.height()||m.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),m.width()||
m.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10))}};b.placeholder=c(f.placeholder.element.call(b.element,b.currentItem));b.currentItem.after(b.placeholder);f.placeholder.update(b,b.placeholder)},_contactContainers:function(b){var g,f,h,m,q,u,x,k,l,B=f=null;for(g=this.containers.length-1;0<=g;g--)if(!c.contains(this.currentItem[0],this.containers[g].element[0]))if(this._intersectsWith(this.containers[g].containerCache)){if(!f||
!c.contains(this.containers[g].element[0],f.element[0]))f=this.containers[g],B=g}else this.containers[g].containerCache.over&&(this.containers[g]._trigger("out",b,this._uiHash(this)),this.containers[g].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[B].containerCache.over||(this.containers[B]._trigger("over",b,this._uiHash(this)),this.containers[B].containerCache.over=1);else{g=1E4;h=null;m=(l=f.floating||d(this.currentItem))?"left":"top";q=l?"width":"height";u=this.positionAbs[m]+
this.offset.click[m];for(f=this.items.length-1;0<=f;f--)if(c.contains(this.containers[B].element[0],this.items[f].item[0])&&this.items[f].item[0]!==this.currentItem[0]&&(!l||this.positionAbs.top+this.offset.click.top>this.items[f].top&&this.positionAbs.top+this.offset.click.top<this.items[f].top+this.items[f].height))x=this.items[f].item.offset()[m],k=!1,Math.abs(x-u)>Math.abs(x+this.items[f][q]-u)&&(k=!0,x+=this.items[f][q]),Math.abs(x-u)<g&&(g=Math.abs(x-u),h=this.items[f],this.direction=k?"up":
"down");if((h||this.options.dropOnEmpty)&&this.currentContainer!==this.containers[B])h?this._rearrange(b,h,null,!0):this._rearrange(b,null,this.containers[B].element,!0),this._trigger("change",b,this._uiHash()),this.containers[B]._trigger("change",b,this._uiHash(this)),this.currentContainer=this.containers[B],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[B]._trigger("over",b,this._uiHash(this)),this.containers[B].containerCache.over=1}},_createHelper:function(b){var d=
this.options;b=c.isFunction(d.helper)?c(d.helper.apply(this.element[0],[b,this.currentItem])):"clone"===d.helper?this.currentItem.clone():this.currentItem;b.parents("body").length||c("parent"!==d.appendTo?d.appendTo:this.currentItem[0].parentNode)[0].appendChild(b[0]);b[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")});
(!b[0].style.width||d.forceHelperSize)&&b.width(this.currentItem.width());(!b[0].style.height||d.forceHelperSize)&&b.height(this.currentItem.height());return b},_adjustOffsetFromHelper:function(b){"string"===typeof b&&(b=b.split(" "));c.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);"top"in b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in
b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();"absolute"===this.cssPosition&&(this.scrollParent[0]!==document&&c.contains(this.scrollParent[0],this.offsetParent[0]))&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&
c.ui.ie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var b=this.currentItem.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins=
{left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,d,f;d=this.options;"parent"===d.containment&&(d.containment=this.helper[0].parentNode);if("document"===d.containment||"window"===d.containment)this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-
this.offset.parent.top,c("document"===d.containment?document:window).width()-this.helperProportions.width-this.margins.left,(c("document"===d.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];/^(document|window|parent)$/.test(d.containment)||(b=c(d.containment)[0],d=c(d.containment).offset(),f="hidden"!==c(b).css("overflow"),this.containment=[d.left+(parseInt(c(b).css("borderLeftWidth"),10)||0)+(parseInt(c(b).css("paddingLeft"),
10)||0)-this.margins.left,d.top+(parseInt(c(b).css("borderTopWidth"),10)||0)+(parseInt(c(b).css("paddingTop"),10)||0)-this.margins.top,d.left+(f?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(c(b).css("borderLeftWidth"),10)||0)-(parseInt(c(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(f?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(c(b).css("borderTopWidth"),10)||0)-(parseInt(c(b).css("paddingBottom"),10)||0)-this.helperProportions.height-
this.margins.top])},_convertPositionTo:function(b,d){d||(d=this.position);var f="absolute"===b?1:-1,h="absolute"===this.cssPosition&&!(this.scrollParent[0]!==document&&c.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,m=/(html|body)/i.test(h[0].tagName);return{top:d.top+this.offset.relative.top*f+this.offset.parent.top*f-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():m?0:h.scrollTop())*f,left:d.left+this.offset.relative.left*f+this.offset.parent.left*
f-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():m?0:h.scrollLeft())*f}},_generatePosition:function(b){var d,f,h=this.options;f=b.pageX;d=b.pageY;var m="absolute"===this.cssPosition&&!(this.scrollParent[0]!==document&&c.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,q=/(html|body)/i.test(m[0].tagName);"relative"===this.cssPosition&&!(this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());
this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(d=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(d=this.containment[3]+this.offset.click.top)),h.grid&&(d=this.originalPageY+Math.round((d-this.originalPageY)/h.grid[1])*
h.grid[1],d=this.containment?d-this.offset.click.top>=this.containment[1]&&d-this.offset.click.top<=this.containment[3]?d:d-this.offset.click.top>=this.containment[1]?d-h.grid[1]:d+h.grid[1]:d,f=this.originalPageX+Math.round((f-this.originalPageX)/h.grid[0])*h.grid[0],f=this.containment?f-this.offset.click.left>=this.containment[0]&&f-this.offset.click.left<=this.containment[2]?f:f-this.offset.click.left>=this.containment[0]?f-h.grid[0]:f+h.grid[0]:f));return{top:d-this.offset.click.top-this.offset.relative.top-
this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():q?0:m.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():q?0:m.scrollLeft())}},_rearrange:function(b,d,f,c){f?f[0].appendChild(this.placeholder[0]):d.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?d.item[0]:d.item[0].nextSibling);var m=this.counter=this.counter?++this.counter:1;this._delay(function(){m===
this.counter&&this.refreshPositions(!c)})},_clear:function(b,d){this.reverting=!1;var f,c=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(f in this._storedCSS)if("auto"===this._storedCSS[f]||"static"===this._storedCSS[f])this._storedCSS[f]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!d&&c.push(function(b){this._trigger("receive",
b,this._uiHash(this.fromOutside))});(this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!d&&c.push(function(b){this._trigger("update",b,this._uiHash())});this!==this.currentContainer&&!d&&(c.push(function(b){this._trigger("remove",b,this._uiHash())}),c.push(function(b){return function(d){b._trigger("receive",d,this._uiHash(this))}}.call(this,this.currentContainer)),c.push(function(b){return function(d){b._trigger("update",
d,this._uiHash(this))}}.call(this,this.currentContainer)));for(f=this.containers.length-1;0<=f;f--)d||c.push(function(b){return function(d){b._trigger("deactivate",d,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over&&(c.push(function(b){return function(d){b._trigger("out",d,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over=0);this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove());
this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex);this.dragging=!1;if(this.cancelHelperRemoval){if(!d){this._trigger("beforeStop",b,this._uiHash());for(f=0;f<c.length;f++)c[f].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1}d||this._trigger("beforeStop",b,this._uiHash());this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]);
this.helper[0]!==this.currentItem[0]&&this.helper.remove();this.helper=null;if(!d){for(f=0;f<c.length;f++)c[f].call(this,b);this._trigger("stop",b,this._uiHash())}this.fromOutside=!1;return!0},_trigger:function(){!1===c.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(b){var d=b||this;return{helper:d.helper,placeholder:d.placeholder||c([]),position:d.position,originalPosition:d.originalPosition,offset:d.positionAbs,item:d.currentItem,sender:b?b.element:null}}})})(jQuery);
(function(c,b){function d(){this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";
this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),weekHeader:"Wk",dateFormat:"mm/dd/yy",
firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,
onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};c.extend(this._defaults,this.regional[""]);this.dpDiv=e(c("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function e(b){return b.delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a","mouseout",function(){c(this).removeClass("ui-state-hover");
-1!==this.className.indexOf("ui-datepicker-prev")&&c(this).removeClass("ui-datepicker-prev-hover");-1!==this.className.indexOf("ui-datepicker-next")&&c(this).removeClass("ui-datepicker-next-hover")}).delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a","mouseover",function(){if(!c.datepicker._isDisabledDatepicker(f.inline?b.parent()[0]:f.input[0]))c(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),c(this).addClass("ui-state-hover"),
-1!==this.className.indexOf("ui-datepicker-prev")&&c(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&c(this).addClass("ui-datepicker-next-hover")})}function g(b,d){c.extend(b,d);for(var e in d)null==d[e]&&(b[e]=d[e]);return b}c.extend(c.ui,{datepicker:{version:"1.10.3"}});var f;c.extend(d.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(b){g(this._defaults,b||{});return this},_attachDatepicker:function(b,
d){var e,f,g;e=b.nodeName.toLowerCase();f="div"===e||"span"===e;b.id||(this.uuid+=1,b.id="dp"+this.uuid);g=this._newInst(c(b),f);g.settings=c.extend({},d||{});"input"===e?this._connectDatepicker(b,g):f&&this._inlineDatepicker(b,g)},_newInst:function(b,d){return{id:b[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:d,dpDiv:!d?this.dpDiv:e(c("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}},
_connectDatepicker:function(b,d){var e=c(b);d.append=c([]);d.trigger=c([]);e.hasClass(this.markerClassName)||(this._attachments(e,d),e.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(d),c.data(b,"datepicker",d),d.settings.disabled&&this._disableDatepicker(b))},_attachments:function(b,d){var e,f;e=this._get(d,"appendText");var g=this._get(d,"isRTL");d.append&&d.append.remove();e&&(d.append=c("<span class='"+this._appendClass+"'>"+
e+"</span>"),b[g?"before":"after"](d.append));b.unbind("focus",this._showDatepicker);d.trigger&&d.trigger.remove();e=this._get(d,"showOn");("focus"===e||"both"===e)&&b.focus(this._showDatepicker);if("button"===e||"both"===e)e=this._get(d,"buttonText"),f=this._get(d,"buttonImage"),d.trigger=c(this._get(d,"buttonImageOnly")?c("<img/>").addClass(this._triggerClass).attr({src:f,alt:e,title:e}):c("<button type='button'></button>").addClass(this._triggerClass).html(!f?e:c("<img/>").attr({src:f,alt:e,title:e}))),
b[g?"before":"after"](d.trigger),d.trigger.click(function(){c.datepicker._datepickerShowing&&c.datepicker._lastInput===b[0]?c.datepicker._hideDatepicker():(c.datepicker._datepickerShowing&&c.datepicker._lastInput!==b[0]&&c.datepicker._hideDatepicker(),c.datepicker._showDatepicker(b[0]));return!1})},_autoSize:function(b){if(this._get(b,"autoSize")&&!b.inline){var d,e,f,c,g=new Date(2009,11,20),k=this._get(b,"dateFormat");k.match(/[DM]/)&&(d=function(b){for(c=f=e=0;c<b.length;c++)b[c].length>e&&(e=
b[c].length,f=c);return f},g.setMonth(d(this._get(b,k.match(/MM/)?"monthNames":"monthNamesShort"))),g.setDate(d(this._get(b,k.match(/DD/)?"dayNames":"dayNamesShort"))+20-g.getDay()));b.input.attr("size",this._formatDate(b,g).length)}},_inlineDatepicker:function(b,d){var e=c(b);e.hasClass(this.markerClassName)||(e.addClass(this.markerClassName).append(d.dpDiv),c.data(b,"datepicker",d),this._setDate(d,this._getDefaultDate(d),!0),this._updateDatepicker(d),this._updateAlternate(d),d.settings.disabled&&
this._disableDatepicker(b),d.dpDiv.css("display","block"))},_dialogDatepicker:function(b,d,e,f,x){var k;b=this._dialogInst;b||(this.uuid+=1,b="dp"+this.uuid,this._dialogInput=c("<input type='text' id='"+b+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),c("body").append(this._dialogInput),b=this._dialogInst=this._newInst(this._dialogInput,!1),b.settings={},c.data(this._dialogInput[0],"datepicker",b));g(b.settings,f||{});d=d&&d.constructor===Date?
this._formatDate(b,d):d;this._dialogInput.val(d);this._pos=x?x.length?x:[x.pageX,x.pageY]:null;this._pos||(d=document.documentElement.clientWidth,f=document.documentElement.clientHeight,x=document.documentElement.scrollLeft||document.body.scrollLeft,k=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[d/2-100+x,f/2-150+k]);this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");b.settings.onSelect=e;this._inDialog=!0;this.dpDiv.addClass(this._dialogClass);
this._showDatepicker(this._dialogInput[0]);c.blockUI&&c.blockUI(this.dpDiv);c.data(this._dialogInput[0],"datepicker",b);return this},_destroyDatepicker:function(b){var d,e=c(b),f=c.data(b,"datepicker");e.hasClass(this.markerClassName)&&(d=b.nodeName.toLowerCase(),c.removeData(b,"datepicker"),"input"===d?(f.append.remove(),f.trigger.remove(),e.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",
this._doKeyUp)):("div"===d||"span"===d)&&e.removeClass(this.markerClassName).empty())},_enableDatepicker:function(b){var d,e=c(b),f=c.data(b,"datepicker");if(e.hasClass(this.markerClassName)){d=b.nodeName.toLowerCase();if("input"===d)b.disabled=!1,f.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"===d||"span"===d)d=e.children("."+this._inlineClass),d.children().removeClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",
!1);this._disabledInputs=c.map(this._disabledInputs,function(d){return d===b?null:d})}},_disableDatepicker:function(b){var d,e=c(b),f=c.data(b,"datepicker");if(e.hasClass(this.markerClassName)){d=b.nodeName.toLowerCase();if("input"===d)b.disabled=!0,f.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"===d||"span"===d)d=e.children("."+this._inlineClass),d.children().addClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",
!0);this._disabledInputs=c.map(this._disabledInputs,function(d){return d===b?null:d});this._disabledInputs[this._disabledInputs.length]=b}},_isDisabledDatepicker:function(b){if(!b)return!1;for(var d=0;d<this._disabledInputs.length;d++)if(this._disabledInputs[d]===b)return!0;return!1},_getInst:function(b){try{return c.data(b,"datepicker")}catch(d){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(d,e,f){var u,x,k,l,B=this._getInst(d);if(2===arguments.length&&"string"===
typeof e)return"defaults"===e?c.extend({},c.datepicker._defaults):B?"all"===e?c.extend({},B.settings):this._get(B,e):null;u=e||{};"string"===typeof e&&(u={},u[e]=f);B&&(this._curInst===B&&this._hideDatepicker(),x=this._getDateDatepicker(d,!0),k=this._getMinMaxDate(B,"min"),l=this._getMinMaxDate(B,"max"),g(B.settings,u),null!==k&&(u.dateFormat!==b&&u.minDate===b)&&(B.settings.minDate=this._formatDate(B,k)),null!==l&&(u.dateFormat!==b&&u.maxDate===b)&&(B.settings.maxDate=this._formatDate(B,l)),"disabled"in
u&&(u.disabled?this._disableDatepicker(d):this._enableDatepicker(d)),this._attachments(c(d),B),this._autoSize(B),this._setDate(B,x),this._updateAlternate(B),this._updateDatepicker(B))},_changeDatepicker:function(b,d,e){this._optionDatepicker(b,d,e)},_refreshDatepicker:function(b){(b=this._getInst(b))&&this._updateDatepicker(b)},_setDateDatepicker:function(b,d){var e=this._getInst(b);e&&(this._setDate(e,d),this._updateDatepicker(e),this._updateAlternate(e))},_getDateDatepicker:function(b,d){var e=
this._getInst(b);e&&!e.inline&&this._setDateFromField(e,d);return e?this._getDate(e):null},_doKeyDown:function(b){var d,e=c.datepicker._getInst(b.target);d=!0;var f=e.dpDiv.is(".ui-datepicker-rtl");e._keyEvent=!0;if(c.datepicker._datepickerShowing)switch(b.keyCode){case 9:c.datepicker._hideDatepicker();d=!1;break;case 13:return d=c("td."+c.datepicker._dayOverClass+":not(."+c.datepicker._currentClass+")",e.dpDiv),d[0]&&c.datepicker._selectDay(b.target,e.selectedMonth,e.selectedYear,d[0]),(b=c.datepicker._get(e,
"onSelect"))?(d=c.datepicker._formatDate(e),b.apply(e.input?e.input[0]:null,[d,e])):c.datepicker._hideDatepicker(),!1;case 27:c.datepicker._hideDatepicker();break;case 33:c.datepicker._adjustDate(b.target,b.ctrlKey?-c.datepicker._get(e,"stepBigMonths"):-c.datepicker._get(e,"stepMonths"),"M");break;case 34:c.datepicker._adjustDate(b.target,b.ctrlKey?+c.datepicker._get(e,"stepBigMonths"):+c.datepicker._get(e,"stepMonths"),"M");break;case 35:(b.ctrlKey||b.metaKey)&&c.datepicker._clearDate(b.target);
d=b.ctrlKey||b.metaKey;break;case 36:(b.ctrlKey||b.metaKey)&&c.datepicker._gotoToday(b.target);d=b.ctrlKey||b.metaKey;break;case 37:if(b.ctrlKey||b.metaKey)c.datepicker._adjustDate(b.target,f?1:-1,"D");d=b.ctrlKey||b.metaKey;b.originalEvent.altKey&&c.datepicker._adjustDate(b.target,b.ctrlKey?-c.datepicker._get(e,"stepBigMonths"):-c.datepicker._get(e,"stepMonths"),"M");break;case 38:(b.ctrlKey||b.metaKey)&&c.datepicker._adjustDate(b.target,-7,"D");d=b.ctrlKey||b.metaKey;break;case 39:if(b.ctrlKey||
b.metaKey)c.datepicker._adjustDate(b.target,f?-1:1,"D");d=b.ctrlKey||b.metaKey;b.originalEvent.altKey&&c.datepicker._adjustDate(b.target,b.ctrlKey?+c.datepicker._get(e,"stepBigMonths"):+c.datepicker._get(e,"stepMonths"),"M");break;case 40:(b.ctrlKey||b.metaKey)&&c.datepicker._adjustDate(b.target,7,"D");d=b.ctrlKey||b.metaKey;break;default:d=!1}else 36===b.keyCode&&b.ctrlKey?c.datepicker._showDatepicker(this):d=!1;d&&(b.preventDefault(),b.stopPropagation())},_doKeyPress:function(b){var d,e;d=c.datepicker._getInst(b.target);
if(c.datepicker._get(d,"constrainInput"))return d=c.datepicker._possibleChars(c.datepicker._get(d,"dateFormat")),e=String.fromCharCode(null==b.charCode?b.keyCode:b.charCode),b.ctrlKey||b.metaKey||" ">e||!d||-1<d.indexOf(e)},_doKeyUp:function(b){var d;b=c.datepicker._getInst(b.target);if(b.input.val()!==b.lastVal)try{if(d=c.datepicker.parseDate(c.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,c.datepicker._getFormatConfig(b)))c.datepicker._setDateFromField(b),c.datepicker._updateAlternate(b),
c.datepicker._updateDatepicker(b)}catch(e){}return!0},_showDatepicker:function(b){b=b.target||b;"input"!==b.nodeName.toLowerCase()&&(b=c("input",b.parentNode)[0]);if(!(c.datepicker._isDisabledDatepicker(b)||c.datepicker._lastInput===b)){var d,e,f,x;d=c.datepicker._getInst(b);c.datepicker._curInst&&c.datepicker._curInst!==d&&(c.datepicker._curInst.dpDiv.stop(!0,!0),d&&c.datepicker._datepickerShowing&&c.datepicker._hideDatepicker(c.datepicker._curInst.input[0]));e=(e=c.datepicker._get(d,"beforeShow"))?
e.apply(b,[b,d]):{};if(!1!==e&&(g(d.settings,e),d.lastVal=null,c.datepicker._lastInput=b,c.datepicker._setDateFromField(d),c.datepicker._inDialog&&(b.value=""),c.datepicker._pos||(c.datepicker._pos=c.datepicker._findPos(b),c.datepicker._pos[1]+=b.offsetHeight),f=!1,c(b).parents().each(function(){f|="fixed"===c(this).css("position");return!f}),e={left:c.datepicker._pos[0],top:c.datepicker._pos[1]},c.datepicker._pos=null,d.dpDiv.empty(),d.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),
c.datepicker._updateDatepicker(d),e=c.datepicker._checkOffset(d,e,f),d.dpDiv.css({position:c.datepicker._inDialog&&c.blockUI?"static":f?"fixed":"absolute",display:"none",left:e.left+"px",top:e.top+"px"}),!d.inline)){e=c.datepicker._get(d,"showAnim");x=c.datepicker._get(d,"duration");d.dpDiv.zIndex(c(b).zIndex()+1);c.datepicker._datepickerShowing=!0;if(c.effects&&c.effects.effect[e])d.dpDiv.show(e,c.datepicker._get(d,"showOptions"),x);else d.dpDiv[e||"show"](e?x:null);c.datepicker._shouldFocusInput(d)&&
d.input.focus();c.datepicker._curInst=d}}},_updateDatepicker:function(b){this.maxRows=4;f=b;b.dpDiv.empty().append(this._generateHTML(b));this._attachHandlers(b);b.dpDiv.find("."+this._dayOverClass+" a").mouseover();var d,e=this._getNumberOfMonths(b),g=e[1];b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");1<g&&b.dpDiv.addClass("ui-datepicker-multi-"+g).css("width",17*g+"em");b.dpDiv[(1!==e[0]||1!==e[1]?"add":"remove")+"Class"]("ui-datepicker-multi");
b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");b===c.datepicker._curInst&&(c.datepicker._datepickerShowing&&c.datepicker._shouldFocusInput(b))&&b.input.focus();b.yearshtml&&(d=b.yearshtml,setTimeout(function(){d===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml);d=b.yearshtml=null},0))},_shouldFocusInput:function(b){return b.input&&b.input.is(":visible")&&!b.input.is(":disabled")&&!b.input.is(":focus")},_checkOffset:function(b,
d,e){var f=b.dpDiv.outerWidth(),g=b.dpDiv.outerHeight(),k=b.input?b.input.outerWidth():0,l=b.input?b.input.outerHeight():0,B=document.documentElement.clientWidth+(e?0:c(document).scrollLeft()),H=document.documentElement.clientHeight+(e?0:c(document).scrollTop());d.left-=this._get(b,"isRTL")?f-k:0;d.left-=e&&d.left===b.input.offset().left?c(document).scrollLeft():0;d.top-=e&&d.top===b.input.offset().top+l?c(document).scrollTop():0;d.left-=Math.min(d.left,d.left+f>B&&B>f?Math.abs(d.left+f-B):0);d.top-=
Math.min(d.top,d.top+g>H&&H>g?Math.abs(g+l):0);return d},_findPos:function(b){for(var d=this._getInst(b),d=this._get(d,"isRTL");b&&("hidden"===b.type||1!==b.nodeType||c.expr.filters.hidden(b));)b=b[d?"previousSibling":"nextSibling"];b=c(b).offset();return[b.left,b.top]},_hideDatepicker:function(b){var d,e,f=this._curInst;if(f&&!(b&&f!==c.data(b,"datepicker"))&&this._datepickerShowing){b=this._get(f,"showAnim");d=this._get(f,"duration");e=function(){c.datepicker._tidyDialog(f)};if(c.effects&&(c.effects.effect[b]||
c.effects[b]))f.dpDiv.hide(b,c.datepicker._get(f,"showOptions"),d,e);else f.dpDiv["slideDown"===b?"slideUp":"fadeIn"===b?"fadeOut":"hide"](b?d:null,e);b||e();this._datepickerShowing=!1;(b=this._get(f,"onClose"))&&b.apply(f.input?f.input[0]:null,[f.input?f.input.val():"",f]);this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),c.blockUI&&(c.unblockUI(),c("body").append(this.dpDiv)));this._inDialog=!1}},_tidyDialog:function(b){b.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},
_checkExternalClick:function(b){if(c.datepicker._curInst){b=c(b.target);var d=c.datepicker._getInst(b[0]);(b[0].id!==c.datepicker._mainDivId&&0===b.parents("#"+c.datepicker._mainDivId).length&&!b.hasClass(c.datepicker.markerClassName)&&!b.closest("."+c.datepicker._triggerClass).length&&c.datepicker._datepickerShowing&&(!c.datepicker._inDialog||!c.blockUI)||b.hasClass(c.datepicker.markerClassName)&&c.datepicker._curInst!==d)&&c.datepicker._hideDatepicker()}},_adjustDate:function(b,d,e){b=c(b);var f=
this._getInst(b[0]);this._isDisabledDatepicker(b[0])||(this._adjustInstDate(f,d+("M"===e?this._get(f,"showCurrentAtPos"):0),e),this._updateDatepicker(f))},_gotoToday:function(b){var d=c(b),e=this._getInst(d[0]);this._get(e,"gotoCurrent")&&e.currentDay?(e.selectedDay=e.currentDay,e.drawMonth=e.selectedMonth=e.currentMonth,e.drawYear=e.selectedYear=e.currentYear):(b=new Date,e.selectedDay=b.getDate(),e.drawMonth=e.selectedMonth=b.getMonth(),e.drawYear=e.selectedYear=b.getFullYear());this._notifyChange(e);
this._adjustDate(d)},_selectMonthYear:function(b,d,e){b=c(b);var f=this._getInst(b[0]);f["selected"+("M"===e?"Month":"Year")]=f["draw"+("M"===e?"Month":"Year")]=parseInt(d.options[d.selectedIndex].value,10);this._notifyChange(f);this._adjustDate(b)},_selectDay:function(b,d,e,f){var g;g=c(b);!c(f).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(g[0])&&(g=this._getInst(g[0]),g.selectedDay=g.currentDay=c("a",f).html(),g.selectedMonth=g.currentMonth=d,g.selectedYear=g.currentYear=e,this._selectDate(b,
this._formatDate(g,g.currentDay,g.currentMonth,g.currentYear)))},_clearDate:function(b){b=c(b);this._selectDate(b,"")},_selectDate:function(b,d){var e;e=c(b);var f=this._getInst(e[0]);d=null!=d?d:this._formatDate(f);f.input&&f.input.val(d);this._updateAlternate(f);(e=this._get(f,"onSelect"))?e.apply(f.input?f.input[0]:null,[d,f]):f.input&&f.input.trigger("change");f.inline?this._updateDatepicker(f):(this._hideDatepicker(),this._lastInput=f.input[0],"object"!==typeof f.input[0]&&f.input.focus(),this._lastInput=
null)},_updateAlternate:function(b){var d,e,f,g=this._get(b,"altField");g&&(d=this._get(b,"altFormat")||this._get(b,"dateFormat"),e=this._getDate(b),f=this.formatDate(d,e,this._getFormatConfig(b)),c(g).each(function(){c(this).val(f)}))},noWeekends:function(b){b=b.getDay();return[0<b&&6>b,""]},iso8601Week:function(b){var d=new Date(b.getTime());d.setDate(d.getDate()+4-(d.getDay()||7));b=d.getTime();d.setMonth(0);d.setDate(1);return Math.floor(Math.round((b-d)/864E5)/7)+1},parseDate:function(b,d,e){if(null==
b||null==d)throw"Invalid arguments";d="object"===typeof d?d.toString():d+"";if(""===d)return null;var f,g,k,l=0;g=(e?e.shortYearCutoff:null)||this._defaults.shortYearCutoff;g="string"!==typeof g?g:(new Date).getFullYear()%100+parseInt(g,10);k=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort;var B=(e?e.dayNames:null)||this._defaults.dayNames,H=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,E=(e?e.monthNames:null)||this._defaults.monthNames,N=e=-1,J=-1,R=-1,ca=!1,n,z=function(d){(d=
f+1<b.length&&b.charAt(f+1)===d)&&f++;return d},s=function(b){var e=z(b);b=RegExp("^\\d{1,"+("@"===b?14:"!"===b?20:"y"===b&&e?4:"o"===b?3:2)+"}");b=d.substring(l).match(b);if(!b)throw"Missing number at position "+l;l+=b[0].length;return parseInt(b[0],10)},v=function(b,e,f){var g=-1;b=c.map(z(b)?f:e,function(b,d){return[[d,b]]}).sort(function(b,d){return-(b[1].length-d[1].length)});c.each(b,function(b,e){var f=e[1];if(d.substr(l,f.length).toLowerCase()===f.toLowerCase())return g=e[0],l+=f.length,!1});
if(-1!==g)return g+1;throw"Unknown name at position "+l;},w=function(){if(d.charAt(l)!==b.charAt(f))throw"Unexpected literal at position "+l;l++};for(f=0;f<b.length;f++)if(ca)"'"===b.charAt(f)&&!z("'")?ca=!1:w();else switch(b.charAt(f)){case "d":J=s("d");break;case "D":v("D",k,B);break;case "o":R=s("o");break;case "m":N=s("m");break;case "M":N=v("M",H,E);break;case "y":e=s("y");break;case "@":n=new Date(s("@"));e=n.getFullYear();N=n.getMonth()+1;J=n.getDate();break;case "!":n=new Date((s("!")-this._ticksTo1970)/
1E4);e=n.getFullYear();N=n.getMonth()+1;J=n.getDate();break;case "'":z("'")?w():ca=!0;break;default:w()}if(l<d.length&&(k=d.substr(l),!/^\s+/.test(k)))throw"Extra/unparsed characters found in date: "+k;-1===e?e=(new Date).getFullYear():100>e&&(e+=(new Date).getFullYear()-(new Date).getFullYear()%100+(e<=g?0:-100));if(-1<R){N=1;J=R;do{g=this._getDaysInMonth(e,N-1);if(J<=g)break;N++;J-=g}while(1)}n=this._daylightSavingAdjust(new Date(e,N-1,J));if(n.getFullYear()!==e||n.getMonth()+1!==N||n.getDate()!==
J)throw"Invalid date";return n},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864E9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(b,d,e){if(!d)return"";var f,c=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,g=(e?e.dayNames:null)||this._defaults.dayNames,k=(e?e.monthNamesShort:null)||
this._defaults.monthNamesShort;e=(e?e.monthNames:null)||this._defaults.monthNames;var l=function(d){(d=f+1<b.length&&b.charAt(f+1)===d)&&f++;return d},H=function(b,d,e){d=""+d;if(l(b))for(;d.length<e;)d="0"+d;return d},E=function(b,d,e,f){return l(b)?f[d]:e[d]},N="",J=!1;if(d)for(f=0;f<b.length;f++)if(J)"'"===b.charAt(f)&&!l("'")?J=!1:N+=b.charAt(f);else switch(b.charAt(f)){case "d":N+=H("d",d.getDate(),2);break;case "D":N+=E("D",d.getDay(),c,g);break;case "o":N+=H("o",Math.round(((new Date(d.getFullYear(),
d.getMonth(),d.getDate())).getTime()-(new Date(d.getFullYear(),0,0)).getTime())/864E5),3);break;case "m":N+=H("m",d.getMonth()+1,2);break;case "M":N+=E("M",d.getMonth(),k,e);break;case "y":N+=l("y")?d.getFullYear():(10>d.getYear()%100?"0":"")+d.getYear()%100;break;case "@":N+=d.getTime();break;case "!":N+=1E4*d.getTime()+this._ticksTo1970;break;case "'":l("'")?N+="'":J=!0;break;default:N+=b.charAt(f)}return N},_possibleChars:function(b){var d,e="",f=!1,c=function(e){(e=d+1<b.length&&b.charAt(d+1)===
e)&&d++;return e};for(d=0;d<b.length;d++)if(f)"'"===b.charAt(d)&&!c("'")?f=!1:e+=b.charAt(d);else switch(b.charAt(d)){case "d":case "m":case "y":case "@":e+="0123456789";break;case "D":case "M":return null;case "'":c("'")?e+="'":f=!0;break;default:e+=b.charAt(d)}return e},_get:function(d,e){return d.settings[e]!==b?d.settings[e]:this._defaults[e]},_setDateFromField:function(b,d){if(b.input.val()!==b.lastVal){var e=this._get(b,"dateFormat"),f=b.lastVal=b.input?b.input.val():null,c=this._getDefaultDate(b),
g=c,k=this._getFormatConfig(b);try{g=this.parseDate(e,f,k)||c}catch(l){f=d?"":f}b.selectedDay=g.getDate();b.drawMonth=b.selectedMonth=g.getMonth();b.drawYear=b.selectedYear=g.getFullYear();b.currentDay=f?g.getDate():0;b.currentMonth=f?g.getMonth():0;b.currentYear=f?g.getFullYear():0;this._adjustInstDate(b)}},_getDefaultDate:function(b){return this._restrictMinMax(b,this._determineDate(b,this._get(b,"defaultDate"),new Date))},_determineDate:function(b,d,e){var f=function(b){var d=new Date;d.setDate(d.getDate()+
b);return d},g=function(d){try{return c.datepicker.parseDate(c.datepicker._get(b,"dateFormat"),d,c.datepicker._getFormatConfig(b))}catch(e){}for(var f=(d.toLowerCase().match(/^c/)?c.datepicker._getDate(b):null)||new Date,g=f.getFullYear(),m=f.getMonth(),f=f.getDate(),q=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,u=q.exec(d);u;){switch(u[2]||"d"){case "d":case "D":f+=parseInt(u[1],10);break;case "w":case "W":f+=7*parseInt(u[1],10);break;case "m":case "M":m+=parseInt(u[1],10);f=Math.min(f,c.datepicker._getDaysInMonth(g,
m));break;case "y":case "Y":g+=parseInt(u[1],10),f=Math.min(f,c.datepicker._getDaysInMonth(g,m))}u=q.exec(d)}return new Date(g,m,f)};if(d=(d=null==d||""===d?e:"string"===typeof d?g(d):"number"===typeof d?isNaN(d)?e:f(d):new Date(d.getTime()))&&"Invalid Date"===d.toString()?e:d)d.setHours(0),d.setMinutes(0),d.setSeconds(0),d.setMilliseconds(0);return this._daylightSavingAdjust(d)},_daylightSavingAdjust:function(b){if(!b)return null;b.setHours(12<b.getHours()?b.getHours()+2:0);return b},_setDate:function(b,
d,e){var f=!d,c=b.selectedMonth,g=b.selectedYear;d=this._restrictMinMax(b,this._determineDate(b,d,new Date));b.selectedDay=b.currentDay=d.getDate();b.drawMonth=b.selectedMonth=b.currentMonth=d.getMonth();b.drawYear=b.selectedYear=b.currentYear=d.getFullYear();(c!==b.selectedMonth||g!==b.selectedYear)&&!e&&this._notifyChange(b);this._adjustInstDate(b);b.input&&b.input.val(f?"":this._formatDate(b))},_getDate:function(b){return!b.currentYear||b.input&&""===b.input.val()?null:this._daylightSavingAdjust(new Date(b.currentYear,
b.currentMonth,b.currentDay))},_attachHandlers:function(b){var d=this._get(b,"stepMonths"),e="#"+b.id.replace(/\\\\/g,"\\");b.dpDiv.find("[data-handler]").map(function(){c(this).bind(this.getAttribute("data-event"),{prev:function(){c.datepicker._adjustDate(e,-d,"M")},next:function(){c.datepicker._adjustDate(e,+d,"M")},hide:function(){c.datepicker._hideDatepicker()},today:function(){c.datepicker._gotoToday(e)},selectDay:function(){c.datepicker._selectDay(e,+this.getAttribute("data-month"),+this.getAttribute("data-year"),
this);return!1},selectMonth:function(){c.datepicker._selectMonthYear(e,this,"M");return!1},selectYear:function(){c.datepicker._selectMonthYear(e,this,"Y");return!1}}[this.getAttribute("data-handler")])})},_generateHTML:function(b){var d,e,f,c,g,k,l,H,E,N,J,R,n,s,z,v,w,y,A,C,D,Z,ja,Ia,xa,Ya,G,F=new Date,F=this._daylightSavingAdjust(new Date(F.getFullYear(),F.getMonth(),F.getDate())),K=this._get(b,"isRTL");k=this._get(b,"showButtonPanel");f=this._get(b,"hideIfNoPrevNext");g=this._get(b,"navigationAsDateFormat");
var da=this._getNumberOfMonths(b),V=this._get(b,"showCurrentAtPos");c=this._get(b,"stepMonths");var la=1!==da[0]||1!==da[1],Rb=this._daylightSavingAdjust(!b.currentDay?new Date(9999,9,9):new Date(b.currentYear,b.currentMonth,b.currentDay)),Za=this._getMinMaxDate(b,"min"),wa=this._getMinMaxDate(b,"max"),V=b.drawMonth-V,I=b.drawYear;0>V&&(V+=12,I--);if(wa){d=this._daylightSavingAdjust(new Date(wa.getFullYear(),wa.getMonth()-da[0]*da[1]+1,wa.getDate()));for(d=Za&&d<Za?Za:d;this._daylightSavingAdjust(new Date(I,
V,1))>d;)V--,0>V&&(V=11,I--)}b.drawMonth=V;b.drawYear=I;d=this._get(b,"prevText");d=!g?d:this.formatDate(d,this._daylightSavingAdjust(new Date(I,V-c,1)),this._getFormatConfig(b));d=this._canAdjustMonth(b,-1,I,V)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+d+"'><span class='ui-icon ui-icon-circle-triangle-"+(K?"e":"w")+"'>"+d+"</span></a>":f?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+d+"'><span class='ui-icon ui-icon-circle-triangle-"+
(K?"e":"w")+"'>"+d+"</span></a>";e=this._get(b,"nextText");e=!g?e:this.formatDate(e,this._daylightSavingAdjust(new Date(I,V+c,1)),this._getFormatConfig(b));f=this._canAdjustMonth(b,1,I,V)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(K?"w":"e")+"'>"+e+"</span></a>":f?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(K?"w":
"e")+"'>"+e+"</span></a>";c=this._get(b,"currentText");e=this._get(b,"gotoCurrent")&&b.currentDay?Rb:F;c=!g?c:this.formatDate(c,e,this._getFormatConfig(b));g=!b.inline?"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(b,"closeText")+"</button>":"";k=k?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(K?g:"")+(this._isInRange(b,e)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+
c+"</button>":"")+(K?"":g)+"</div>":"";g=parseInt(this._get(b,"firstDay"),10);g=isNaN(g)?0:g;c=this._get(b,"showWeek");e=this._get(b,"dayNames");l=this._get(b,"dayNamesMin");H=this._get(b,"monthNames");E=this._get(b,"monthNamesShort");N=this._get(b,"beforeShowDay");J=this._get(b,"showOtherMonths");R=this._get(b,"selectOtherMonths");n=this._getDefaultDate(b);s="";z;for(v=0;v<da[0];v++){w="";this.maxRows=4;for(y=0;y<da[1];y++){A=this._daylightSavingAdjust(new Date(I,V,b.selectedDay));z=" ui-corner-all";
C="";if(la){C+="<div class='ui-datepicker-group";if(1<da[1])switch(y){case 0:C+=" ui-datepicker-group-first";z=" ui-corner-"+(K?"right":"left");break;case da[1]-1:C+=" ui-datepicker-group-last";z=" ui-corner-"+(K?"left":"right");break;default:C+=" ui-datepicker-group-middle",z=""}C+="'>"}C+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+z+"'>"+(/all|left/.test(z)&&0===v?K?f:d:"")+(/all|right/.test(z)&&0===v?K?d:f:"")+this._generateMonthYearHeader(b,V,I,Za,wa,0<v||0<y,H,E)+
"</div><table class='ui-datepicker-calendar'><thead><tr>";D=c?"<th class='ui-datepicker-week-col'>"+this._get(b,"weekHeader")+"</th>":"";for(z=0;7>z;z++)Z=(z+g)%7,D+="<th"+(5<=(z+g+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+e[Z]+"'>"+l[Z]+"</span></th>";C+=D+"</tr></thead><tbody>";D=this._getDaysInMonth(I,V);I===b.selectedYear&&V===b.selectedMonth&&(b.selectedDay=Math.min(b.selectedDay,D));z=(this._getFirstDayOfMonth(I,V)-g+7)%7;D=Math.ceil((z+D)/7);this.maxRows=D=la?this.maxRows>
D?this.maxRows:D:D;Z=this._daylightSavingAdjust(new Date(I,V,1-z));for(ja=0;ja<D;ja++){C+="<tr>";Ia=!c?"":"<td class='ui-datepicker-week-col'>"+this._get(b,"calculateWeek")(Z)+"</td>";for(z=0;7>z;z++)xa=N?N.apply(b.input?b.input[0]:null,[Z]):[!0,""],G=(Ya=Z.getMonth()!==V)&&!R||!xa[0]||Za&&Z<Za||wa&&Z>wa,Ia+="<td class='"+(5<=(z+g+6)%7?" ui-datepicker-week-end":"")+(Ya?" ui-datepicker-other-month":"")+(Z.getTime()===A.getTime()&&V===b.selectedMonth&&b._keyEvent||n.getTime()===Z.getTime()&&n.getTime()===
A.getTime()?" "+this._dayOverClass:"")+(G?" "+this._unselectableClass+" ui-state-disabled":"")+(Ya&&!J?"":" "+xa[1]+(Z.getTime()===Rb.getTime()?" "+this._currentClass:"")+(Z.getTime()===F.getTime()?" ui-datepicker-today":""))+"'"+((!Ya||J)&&xa[2]?" title='"+xa[2].replace(/'/g,"&#39;")+"'":"")+(G?"":" data-handler='selectDay' data-event='click' data-month='"+Z.getMonth()+"' data-year='"+Z.getFullYear()+"'")+">"+(Ya&&!J?"&#xa0;":G?"<span class='ui-state-default'>"+Z.getDate()+"</span>":"<a class='ui-state-default"+
(Z.getTime()===F.getTime()?" ui-state-highlight":"")+(Z.getTime()===Rb.getTime()?" ui-state-active":"")+(Ya?" ui-priority-secondary":"")+"' href='#'>"+Z.getDate()+"</a>")+"</td>",Z.setDate(Z.getDate()+1),Z=this._daylightSavingAdjust(Z);C+=Ia+"</tr>"}V++;11<V&&(V=0,I++);C+="</tbody></table>"+(la?"</div>"+(0<da[0]&&y===da[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"");w+=C}s+=w}b._keyEvent=!1;return s+k},_generateMonthYearHeader:function(b,d,e,f,c,g,k,l){var H,E,N,J=this._get(b,"changeMonth"),
R=this._get(b,"changeYear"),n=this._get(b,"showMonthAfterYear"),s="<div class='ui-datepicker-title'>",z="";if(g||!J)z+="<span class='ui-datepicker-month'>"+k[d]+"</span>";else{k=f&&f.getFullYear()===e;H=c&&c.getFullYear()===e;z+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(E=0;12>E;E++)if((!k||E>=f.getMonth())&&(!H||E<=c.getMonth()))z+="<option value='"+E+"'"+(E===d?" selected='selected'":"")+">"+l[E]+"</option>";z+="</select>"}n||(s+=z+(g||!J||!R?"&#xa0;":
""));if(!b.yearshtml)if(b.yearshtml="",g||!R)s+="<span class='ui-datepicker-year'>"+e+"</span>";else{l=this._get(b,"yearRange").split(":");N=(new Date).getFullYear();k=function(b){b=b.match(/c[+\-].*/)?e+parseInt(b.substring(1),10):b.match(/[+\-].*/)?N+parseInt(b,10):parseInt(b,10);return isNaN(b)?N:b};d=k(l[0]);l=Math.max(d,k(l[1]||""));d=f?Math.max(d,f.getFullYear()):d;l=c?Math.min(l,c.getFullYear()):l;for(b.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";d<=
l;d++)b.yearshtml+="<option value='"+d+"'"+(d===e?" selected='selected'":"")+">"+d+"</option>";b.yearshtml+="</select>";s+=b.yearshtml;b.yearshtml=null}s+=this._get(b,"yearSuffix");n&&(s+=(g||!J||!R?"&#xa0;":"")+z);return s+"</div>"},_adjustInstDate:function(b,d,e){var f=b.drawYear+("Y"===e?d:0),c=b.drawMonth+("M"===e?d:0);d=Math.min(b.selectedDay,this._getDaysInMonth(f,c))+("D"===e?d:0);f=this._restrictMinMax(b,this._daylightSavingAdjust(new Date(f,c,d)));b.selectedDay=f.getDate();b.drawMonth=b.selectedMonth=
f.getMonth();b.drawYear=b.selectedYear=f.getFullYear();("M"===e||"Y"===e)&&this._notifyChange(b)},_restrictMinMax:function(b,d){var e=this._getMinMaxDate(b,"min"),f=this._getMinMaxDate(b,"max"),e=e&&d<e?e:d;return f&&e>f?f:e},_notifyChange:function(b){var d=this._get(b,"onChangeMonthYear");d&&d.apply(b.input?b.input[0]:null,[b.selectedYear,b.selectedMonth+1,b])},_getNumberOfMonths:function(b){b=this._get(b,"numberOfMonths");return null==b?[1,1]:"number"===typeof b?[1,b]:b},_getMinMaxDate:function(b,
d){return this._determineDate(b,this._get(b,d+"Date"),null)},_getDaysInMonth:function(b,d){return 32-this._daylightSavingAdjust(new Date(b,d,32)).getDate()},_getFirstDayOfMonth:function(b,d){return(new Date(b,d,1)).getDay()},_canAdjustMonth:function(b,d,e,f){var c=this._getNumberOfMonths(b);e=this._daylightSavingAdjust(new Date(e,f+(0>d?d:c[0]*c[1]),1));0>d&&e.setDate(this._getDaysInMonth(e.getFullYear(),e.getMonth()));return this._isInRange(b,e)},_isInRange:function(b,d){var e,f,c=this._getMinMaxDate(b,
"min"),g=this._getMinMaxDate(b,"max"),k=null,l=null;if(e=this._get(b,"yearRange"))e=e.split(":"),f=(new Date).getFullYear(),k=parseInt(e[0],10),l=parseInt(e[1],10),e[0].match(/[+\-].*/)&&(k+=f),e[1].match(/[+\-].*/)&&(l+=f);return(!c||d.getTime()>=c.getTime())&&(!g||d.getTime()<=g.getTime())&&(!k||d.getFullYear()>=k)&&(!l||d.getFullYear()<=l)},_getFormatConfig:function(b){var d=this._get(b,"shortYearCutoff"),d="string"!==typeof d?d:(new Date).getFullYear()%100+parseInt(d,10);return{shortYearCutoff:d,
dayNamesShort:this._get(b,"dayNamesShort"),dayNames:this._get(b,"dayNames"),monthNamesShort:this._get(b,"monthNamesShort"),monthNames:this._get(b,"monthNames")}},_formatDate:function(b,d,e,f){d||(b.currentDay=b.selectedDay,b.currentMonth=b.selectedMonth,b.currentYear=b.selectedYear);d=d?"object"===typeof d?d:this._daylightSavingAdjust(new Date(f,e,d)):this._daylightSavingAdjust(new Date(b.currentYear,b.currentMonth,b.currentDay));return this.formatDate(this._get(b,"dateFormat"),d,this._getFormatConfig(b))}});
c.fn.datepicker=function(b){if(!this.length)return this;c.datepicker.initialized||(c(document).mousedown(c.datepicker._checkExternalClick),c.datepicker.initialized=!0);0===c("#"+c.datepicker._mainDivId).length&&c("body").append(c.datepicker.dpDiv);var d=Array.prototype.slice.call(arguments,1);return"string"===typeof b&&("isDisabled"===b||"getDate"===b||"widget"===b)||"option"===b&&2===arguments.length&&"string"===typeof arguments[1]?c.datepicker["_"+b+"Datepicker"].apply(c.datepicker,[this[0]].concat(d)):
this.each(function(){"string"===typeof b?c.datepicker["_"+b+"Datepicker"].apply(c.datepicker,[this].concat(d)):c.datepicker._attachDatepicker(this,b)})};c.datepicker=new d;c.datepicker.initialized=!1;c.datepicker.uuid=(new Date).getTime();c.datepicker.version="1.10.3"})(jQuery);jQuery.cookie=function(c,b,d){if("undefined"!=typeof b){d=d||{};null===b&&(b="",d.expires=-1);var e="";if(d.expires&&("number"==typeof d.expires||d.expires.toUTCString))"number"==typeof d.expires?(e=new Date,e.setTime(e.getTime()+
864E5*d.expires)):e=d.expires,e="; expires="+e.toUTCString();var g=d.path?"; path="+d.path:"",f=d.domain?"; domain="+d.domain:"";d=d.secure?"; secure":"";document.cookie=[c,"=",encodeURIComponent(b),e,g,f,d].join("")}else{b=null;if(document.cookie&&""!=document.cookie){d=document.cookie.split(";");for(e=0;e<d.length;e++)if(g=jQuery.trim(d[e]),g.substring(0,c.length+1)==c+"="){b=decodeURIComponent(g.substring(c.length+1));break}}return b}};(function(c){var b=function(b,g){var f=this;c.extend(this.options,
g);this.$image=c(b).wrap('<div class="'+d+'Frame"/>');this.$frame=this.$image.parent();this.$image.hide().addClass(d+"Image").data(d,this).on("mousedown."+d,function(b){b.preventDefault();c(document).on("mousemove."+d,{mouse:{x:b.pageX,y:b.pageY},image:{x:parseInt(f.$image.css("left"),10),y:parseInt(f.$image.css("top"),10)}},c.proxy(f.drag,f)).on("mouseup."+d,function(){c(document).off("."+d)})}).on("load."+d,function(){f.width||(f.width=f.$image.width(),f.height=f.$image.height());if(f.width){var b=
f.options.width/f.width,d=f.options.height/f.height;f.minPercent=b>=d?f.width<f.options.width?f.options.width/f.width:b:f.height<f.options.height?f.options.height/f.height:d;f.focal={x:Math.round(f.width/2),y:Math.round(f.height/2)};f.zoom(f.minPercent);f.$image.fadeIn("fast")}}).load();this.$frame.css({width:this.options.width,height:this.options.height}).append(this.options.loading);!1!==this.options.controls&&this.$frame.append(c("<div/>",{"class":d+"Controls"}).append(c("<span/>").append(this.options.controls)).append(c("<a/>",
{"class":d+"ZoomIn"}).on("click."+d,c.proxy(this.zoomIn,this))).append(c("<a/>",{"class":d+"ZoomOut"}).on("click."+d,c.proxy(this.zoomOut,this))))},d="crop";c[d]=c.extend(b,{prototype:{width:0,height:0,result:{},percent:null,options:{width:320,height:180,zoom:10,loading:"Loading...",controls:"Click to drag"},zoom:function(d){this.percent=Math.max(this.minPercent,Math.min(1,d));this.$image.width(Math.ceil(this.width*this.percent));this.$image.css({left:b.fill(-Math.round(this.focal.x*this.percent-
this.options.width/2),this.$image.width(),this.options.width),top:b.fill(-Math.round(this.focal.y*this.percent-this.options.height/2),this.$image.height(),this.options.height)});this.update()},drag:function(d){this.$image.css({left:b.fill(d.data.image.x+d.pageX-d.data.mouse.x,this.$image.width(),this.options.width),top:b.fill(d.data.image.y+d.pageY-d.data.mouse.y,this.$image.height(),this.options.height)});this.update()},zoomIn:function(){return!!this.zoom(this.percent+(1-this.minPercent)/(this.options.zoom-
1||1))},zoomOut:function(){return!!this.zoom(this.percent-(1-this.minPercent)/(this.options.zoom-1||1))},update:function(){this.focal={x:Math.round((this.options.width/2-parseInt(this.$image.css("left"),10))/this.percent),y:Math.round((this.options.height/2-parseInt(this.$image.css("top"),10))/this.percent)};this.$image.trigger(c.Event("crop",this.result={cropX:-Math.floor(parseInt(this.$image.css("left"),10)/this.percent),cropY:-Math.floor(parseInt(this.$image.css("top"),10)/this.percent),cropW:Math.round(this.options.width/
this.percent),cropH:Math.round(this.options.height/this.percent),stretch:1<this.minPercent}))}},fill:function(b,d,f){b+d<f&&(b=f-d);return 0<b?0:b}});c.fn[d]=function(d){return this.each(function(){new b(this,d)})}})(jQuery);(function(c){function b(b){var d=b||window.event,e=[].slice.call(arguments,1),m=0,q=0,u=0;b=c.event.fix(d);b.type="mousewheel";d.wheelDelta&&(m=d.wheelDelta/120);d.detail&&(m=-d.detail/3);u=m;void 0!==d.axis&&d.axis===d.HORIZONTAL_AXIS&&(u=0,q=-1*m);void 0!==d.wheelDeltaY&&(u=
d.wheelDeltaY/120);void 0!==d.wheelDeltaX&&(q=-1*d.wheelDeltaX/120);e.unshift(b,m,q,u);return(c.event.dispatch||c.event.handle).apply(this,e)}var d=["DOMMouseScroll","mousewheel"];if(c.event.fixHooks)for(var e=d.length;e;)c.event.fixHooks[d[--e]]=c.event.mouseHooks;c.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=d.length;e;)this.addEventListener(d[--e],b,!1);else this.onmousewheel=b},teardown:function(){if(this.removeEventListener)for(var e=d.length;e;)this.removeEventListener(d[--e],
b,!1);else this.onmousewheel=null}};c.fn.extend({mousewheel:function(b){return b?this.bind("mousewheel",b):this.trigger("mousewheel")},unmousewheel:function(b){return this.unbind("mousewheel",b)}})})(jQuery);this.JSON||(this.JSON={});(function(){function c(b){return 10>b?"0"+b:b}function b(b){g.lastIndex=0;return g.test(b)?'"'+b.replace(g,function(b){var d=m[b];return"string"===typeof d?d:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function d(e,c){var g,m,k,l,E=f,N,J=c[e];
J&&("object"===typeof J&&"function"===typeof J.toJSON)&&(J=J.toJSON(e));"function"===typeof q&&(J=q.call(c,e,J));switch(typeof J){case "string":return b(J);case "number":return isFinite(J)?String(J):"null";case "boolean":case "null":return String(J);case "object":if(!J)return"null";f+=h;N=[];if("[object Array]"===Object.prototype.toString.apply(J)){l=J.length;for(g=0;g<l;g+=1)N[g]=d(g,J)||"null";k=0===N.length?"[]":f?"[\n"+f+N.join(",\n"+f)+"\n"+E+"]":"["+N.join(",")+"]";f=E;return k}if(q&&"object"===
typeof q){l=q.length;for(g=0;g<l;g+=1)m=q[g],"string"===typeof m&&(k=d(m,J))&&N.push(b(m)+(f?": ":":")+k)}else for(m in J)Object.hasOwnProperty.call(J,m)&&(k=d(m,J))&&N.push(b(m)+(f?": ":":")+k);k=0===N.length?"{}":f?"{\n"+f+N.join(",\n"+f)+"\n"+E+"}":"{"+N.join(",")+"}";f=E;return k}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(b){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+
c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(b){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f,h,m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},q;"function"!==
typeof JSON.stringify&&(JSON.stringify=function(b,e,c){var g;h=f="";if("number"===typeof c)for(g=0;g<c;g+=1)h+=" ";else"string"===typeof c&&(h=c);if((q=e)&&"function"!==typeof e&&("object"!==typeof e||"number"!==typeof e.length))throw Error("JSON.stringify");return d("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(b,d){function f(b,e){var c,g,h=b[e];if(h&&"object"===typeof h)for(c in h)Object.hasOwnProperty.call(h,c)&&(g=f(h,c),void 0!==g?h[c]=g:delete h[c]);return d.call(b,e,h)}
var c;b=String(b);e.lastIndex=0;e.test(b)&&(b=b.replace(e,function(b){return"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return c=eval("("+b+")"),"function"===typeof d?f({"":c},""):c;throw new SyntaxError("JSON.parse");})})();Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",
dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),abbreviatedDayNames:"Sun Mon Tue Wed Thu Fri Sat".split(" "),shortestDayNames:"Su Mo Tu We Th Fr Sa".split(" "),firstLetterDayNames:"SMTWTFS".split(""),monthNames:"January February March April May June July August September October November December".split(" "),abbreviatedMonthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",
formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,
oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,
hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",
offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]};(function(){var c=Date,b=c.prototype,d=c.CultureInfo,e=function(b,d){d||(d=2);return("000"+b).slice(-1*d)};b.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this};b.setTimeToNow=function(){var b=new Date;this.setHours(b.getHours());this.setMinutes(b.getMinutes());this.setSeconds(b.getSeconds());this.setMilliseconds(b.getMilliseconds());return this};
c.today=function(){return(new Date).clearTime()};c.compare=function(b,d){if(isNaN(b)||isNaN(d))throw Error(b+" - "+d);if(b instanceof Date&&d instanceof Date)return b<d?-1:b>d?1:0;throw new TypeError(b+" - "+d);};c.equals=function(b,d){return 0===b.compareTo(d)};c.getDayNumberFromName=function(b){var e=d.dayNames,f=d.abbreviatedDayNames,c=d.shortestDayNames;b=b.toLowerCase();for(var g=0;g<e.length;g++)if(e[g].toLowerCase()==b||f[g].toLowerCase()==b||c[g].toLowerCase()==b)return g;return-1};c.getMonthNumberFromName=
function(b){var e=d.monthNames,f=d.abbreviatedMonthNames;b=b.toLowerCase();for(var c=0;c<e.length;c++)if(e[c].toLowerCase()==b||f[c].toLowerCase()==b)return c;return-1};c.isLeapYear=function(b){return 0===b%4&&0!==b%100||0===b%400};c.getDaysInMonth=function(b,d){return[31,c.isLeapYear(b)?29:28,31,30,31,30,31,31,30,31,30,31][d]};c.getTimezoneAbbreviation=function(b){for(var e=d.timezones,f=0;f<e.length;f++)if(e[f].offset===b)return e[f].name;return null};c.getTimezoneOffset=function(b){for(var e=d.timezones,
f=0;f<e.length;f++)if(e[f].name===b.toUpperCase())return e[f].offset;return null};b.clone=function(){return new Date(this.getTime())};b.compareTo=function(b){return Date.compare(this,b)};b.equals=function(b){return Date.equals(this,b||new Date)};b.between=function(b,d){return this.getTime()>=b.getTime()&&this.getTime()<=d.getTime()};b.isAfter=function(b){return 1===this.compareTo(b||new Date)};b.isBefore=function(b){return-1===this.compareTo(b||new Date)};b.isToday=function(){return this.isSameDay(new Date)};
b.isSameDay=function(b){return this.clone().clearTime().equals(b.clone().clearTime())};b.addMilliseconds=function(b){this.setMilliseconds(this.getMilliseconds()+b);return this};b.addSeconds=function(b){return this.addMilliseconds(1E3*b)};b.addMinutes=function(b){return this.addMilliseconds(6E4*b)};b.addHours=function(b){return this.addMilliseconds(36E5*b)};b.addDays=function(b){this.setDate(this.getDate()+b);return this};b.addWeeks=function(b){return this.addDays(7*b)};b.addMonths=function(b){var d=
this.getDate();this.setDate(1);this.setMonth(this.getMonth()+b);this.setDate(Math.min(d,c.getDaysInMonth(this.getFullYear(),this.getMonth())));return this};b.addYears=function(b){return this.addMonths(12*b)};b.add=function(b){if("number"==typeof b)return this._orient=b,this;b.milliseconds&&this.addMilliseconds(b.milliseconds);b.seconds&&this.addSeconds(b.seconds);b.minutes&&this.addMinutes(b.minutes);b.hours&&this.addHours(b.hours);b.weeks&&this.addWeeks(b.weeks);b.months&&this.addMonths(b.months);
b.years&&this.addYears(b.years);b.days&&this.addDays(b.days);return this};var g,f,h;b.getWeek=function(){var b,d,e,c,k;g=!g?this.getFullYear():g;f=!f?this.getMonth()+1:f;h=!h?this.getDate():h;2>=f?(b=g-1,d=(b/4|0)-(b/100|0)+(b/400|0),k=d-(((b-1)/4|0)-((b-1)/100|0)+((b-1)/400|0)),e=0,c=h-1+31*(f-1)):(b=g,d=(b/4|0)-(b/100|0)+(b/400|0),k=d-(((b-1)/4|0)-((b-1)/100|0)+((b-1)/400|0)),e=k+1,c=h+(153*(f-3)+2)/5+58+k);b=(b+d)%7;e=c+3-(c+b-e)%7|0;g=f=h=null;return 0>e?53-((b-k)/5|0):e>364+k?1:(e/7|0)+1};b.getISOWeek=
function(){g=this.getUTCFullYear();f=this.getUTCMonth()+1;h=this.getUTCDate();return e(this.getWeek())};b.setWeek=function(b){return this.moveToDayOfWeek(1).addWeeks(b-this.getWeek())};c._validate=function(b,d,e,f){if("undefined"==typeof b)return!1;if("number"!=typeof b)throw new TypeError(b+" is not a Number.");if(b<d||b>e)throw new RangeError(b+" is not a valid value for "+f+".");return!0};c.validateMillisecond=function(b){return c._validate(b,0,999,"millisecond")};c.validateSecond=function(b){return c._validate(b,
0,59,"second")};c.validateMinute=function(b){return c._validate(b,0,59,"minute")};c.validateHour=function(b){return c._validate(b,0,23,"hour")};c.validateDay=function(b,d,e){return c._validate(b,1,c.getDaysInMonth(d,e),"day")};c.validateMonth=function(b){return c._validate(b,0,11,"month")};c.validateYear=function(b){return c._validate(b,0,9999,"year")};b.set=function(b){c.validateMillisecond(b.millisecond)&&this.addMilliseconds(b.millisecond-this.getMilliseconds());c.validateSecond(b.second)&&this.addSeconds(b.second-
this.getSeconds());c.validateMinute(b.minute)&&this.addMinutes(b.minute-this.getMinutes());c.validateHour(b.hour)&&this.addHours(b.hour-this.getHours());c.validateMonth(b.month)&&this.addMonths(b.month-this.getMonth());c.validateYear(b.year)&&this.addYears(b.year-this.getFullYear());c.validateDay(b.day,this.getFullYear(),this.getMonth())&&this.addDays(b.day-this.getDate());b.timezone&&this.setTimezone(b.timezone);b.timezoneOffset&&this.setTimezoneOffset(b.timezoneOffset);b.week&&c._validate(b.week,
0,53,"week")&&this.setWeek(b.week);return this};b.moveToFirstDayOfMonth=function(){return this.set({day:1})};b.moveToLastDayOfMonth=function(){return this.set({day:c.getDaysInMonth(this.getFullYear(),this.getMonth())})};b.moveToNthOccurrence=function(b,d){var e=0;if(0<d)e=d-1;else if(-1===d)return this.moveToLastDayOfMonth(),this.getDay()!==b&&this.moveToDayOfWeek(b,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(b,1).addWeeks(e)};b.moveToDayOfWeek=function(b,d){var e=(b-
this.getDay()+7*(d||1))%7;return this.addDays(0===e?e+7*(d||1):e)};b.moveToMonth=function(b,d){var e=(b-this.getMonth()+12*(d||1))%12;return this.addMonths(0===e?e+12*(d||1):e)};b.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864E5)+1};b.getTimezone=function(){return c.getTimezoneAbbreviation(this.getUTCOffset())};b.setTimezoneOffset=function(b){var d=this.getTimezoneOffset();return this.addMinutes(-6*Number(b)/10-d)};b.setTimezone=function(b){return this.setTimezoneOffset(c.getTimezoneOffset(b))};
b.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()};b.isDaylightSavingTime=function(){return this.hasDaylightSavingTime()&&(new Date).getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset()};b.getUTCOffset=function(){var b=-10*this.getTimezoneOffset()/6;if(0>b)return b=(b-1E4).toString(),b.charAt(0)+b.substr(2);b=(b+1E4).toString();return"+"+b.substr(1)};b.getElapsed=function(b){return(b||
new Date)-this};b.toISOString||(b.toISOString=function(){function b(d){return 10>d?"0"+d:d}return'"'+this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+'Z"'});b._toString=b.toString;b.toString=function(b){var f=this;if(b&&1==b.length){var c=d.formatPatterns;f.t=f.toString;switch(b){case "d":return f.t(c.shortDate);case "D":return f.t(c.longDate);case "F":return f.t(c.fullDateTime);case "m":return f.t(c.monthDay);
case "r":return f.t(c.rfc1123);case "s":return f.t(c.sortableDateTime);case "t":return f.t(c.shortTime);case "T":return f.t(c.longTime);case "u":return f.t(c.universalSortableDateTime);case "y":return f.t(c.yearMonth)}}var g=function(b){switch(1*b){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return b?b.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(b){if("\\"===b.charAt(0))return b.replace("\\","");f.h=f.getHours;
switch(b){case "hh":return e(13>f.h()?0===f.h()?12:f.h():f.h()-12);case "h":return 13>f.h()?0===f.h()?12:f.h():f.h()-12;case "HH":return e(f.h());case "H":return f.h();case "mm":return e(f.getMinutes());case "m":return f.getMinutes();case "ss":return e(f.getSeconds());case "s":return f.getSeconds();case "yyyy":return e(f.getFullYear(),4);case "yy":return e(f.getFullYear());case "dddd":return d.dayNames[f.getDay()];case "ddd":return d.abbreviatedDayNames[f.getDay()];case "dd":return e(f.getDate());
case "d":return f.getDate();case "MMMM":return d.monthNames[f.getMonth()];case "MMM":return d.abbreviatedMonthNames[f.getMonth()];case "MM":return e(f.getMonth()+1);case "M":return f.getMonth()+1;case "t":return 12>f.h()?d.amDesignator.substring(0,1):d.pmDesignator.substring(0,1);case "tt":return 12>f.h()?d.amDesignator:d.pmDesignator;case "S":return g(f.getDate());default:return b}}):this._toString()}})();(function(){var c=Date,b=c.prototype,d=c.CultureInfo,e=Number.prototype;b._orient=1;b._nth=
null;b._is=!1;b._same=!1;b._isSecond=!1;e._dateElement="day";b.next=function(){this._orient=1;return this};c.next=function(){return c.today().next()};b.last=b.prev=b.previous=function(){this._orient=-1;return this};c.last=c.prev=c.previous=function(){return c.today().last()};b.is=function(){this._is=!0;return this};b.same=function(){this._same=!0;this._isSecond=!1;return this};b.today=function(){return this.same().day()};b.weekday=function(){return this._is?(this._is=!1,!this.is().sat()&&!this.is().sun()):
!1};b.at=function(b){return"string"===typeof b?c.parse(this.toString("d")+" "+b):this.set(b)};e.fromNow=e.after=function(b){var d={};d[this._dateElement]=this;return(!b?new Date:b.clone()).add(d)};e.ago=e.before=function(b){var d={};d[this._dateElement]=-1*this;return(!b?new Date:b.clone()).add(d)};var g="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),f="january february march april may june july august september october november december".split(/\s/),h="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),
m="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),q="final first second third fourth fifth".split(/\s/);b.toObject=function(){for(var b={},d=0;d<h.length;d++)b[h[d].toLowerCase()]=this["get"+m[d]]();return b};c.fromObject=function(b){b.week=null;return Date.today().set(b)};for(var u=function(b){return function(){if(this._is)return this._is=!1,this.getDay()==b;if(null!==this._nth){this._isSecond&&this.addSeconds(-1*this._orient);this._isSecond=!1;var d=this._nth;this._nth=
null;var e=this.clone().moveToLastDayOfMonth();this.moveToNthOccurrence(b,d);if(this>e)throw new RangeError(c.getDayName(b)+" does not occur "+d+" times in the month of "+c.getMonthName(e.getMonth())+" "+e.getFullYear()+".");return this}return this.moveToDayOfWeek(b,this._orient)}},k=function(b){return function(){var e=c.today(),f=b-e.getDay();0===b&&(1===d.firstDayOfWeek&&0!==e.getDay())&&(f+=7);return e.addDays(f)}},l=0;l<g.length;l++)c[g[l].toUpperCase()]=c[g[l].toUpperCase().substring(0,3)]=l,
c[g[l]]=c[g[l].substring(0,3)]=k(l),b[g[l]]=b[g[l].substring(0,3)]=u(l);g=function(b){return function(){return this._is?(this._is=!1,this.getMonth()===b):this.moveToMonth(b,this._orient)}};u=function(b){return function(){return c.today().set({month:b,day:1})}};for(k=0;k<f.length;k++)c[f[k].toUpperCase()]=c[f[k].toUpperCase().substring(0,3)]=k,c[f[k]]=c[f[k].substring(0,3)]=u(k),b[f[k]]=b[f[k].substring(0,3)]=g(k);g=function(b){return function(d){if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=
this._is=!1;var e=this.toObject();d=(d||new Date).toObject();for(var f="",c=b.toLowerCase(),g=h.length-1;-1<g;g--){f=h[g].toLowerCase();if(e[f]!=d[f])return!1;if(c==f)break}return!0}"s"!=b.substring(b.length-1)&&(b+="s");return this["add"+b](this._orient)}};u=function(b){return function(){this._dateElement=b;return this}};for(k=0;k<h.length;k++)f=h[k].toLowerCase(),b[f]=b[f+"s"]=g(h[k]),e[f]=e[f+"s"]=u(f);b._ss=g("Second");e=function(b){return function(d){if(this._same)return this._ss(d);if(d||0===
d)return this.moveToNthOccurrence(d,b);this._nth=b;return 2===b&&(void 0===d||null===d)?(this._isSecond=!0,this.addSeconds(this._orient)):this}};for(f=0;f<q.length;f++)b[q[f]]=0===f?e(-1):e(f)})();(function(){Date.Parsing={Exception:function(b){this.message="Parse error at '"+b.substring(0,10)+" ...'"}};for(var c=Date.Parsing,b=c.Operators={rtoken:function(b){return function(d){var e=d.match(b);if(e)return[e[0],d.substring(e[0].length)];throw new c.Exception(d);}},token:function(d){return function(d){return b.rtoken(RegExp("^s*"+
d+"s*"))(d)}},stoken:function(d){return b.rtoken(RegExp("^"+d))},until:function(b){return function(d){for(var e=[],c=null;d.length;){try{c=b.call(this,d)}catch(g){e.push(c[0]);d=c[1];continue}break}return[e,d]}},many:function(b){return function(d){for(var e=[],c=null;d.length;){try{c=b.call(this,d)}catch(g){break}e.push(c[0]);d=c[1]}return[e,d]}},optional:function(b){return function(d){var e=null;try{e=b.call(this,d)}catch(c){return[null,d]}return[e[0],e[1]]}},not:function(b){return function(d){try{b.call(this,
d)}catch(e){return[null,d]}throw new c.Exception(d);}},ignore:function(b){return b?function(d){var e=null,e=b.call(this,d);return[null,e[1]]}:null},product:function(){for(var d=arguments[0],e=Array.prototype.slice.call(arguments,1),c=[],g=0;g<d.length;g++)c.push(b.each(d[g],e));return c},cache:function(b){var d={},e=null;return function(g){try{e=d[g]=d[g]||b.call(this,g)}catch(u){e=d[g]=u}if(e instanceof c.Exception)throw e;return e}},any:function(){var b=arguments;return function(d){for(var e=null,
g=0;g<b.length;g++)if(null!=b[g]){try{e=b[g].call(this,d)}catch(u){e=null}if(e)return e}throw new c.Exception(d);}},each:function(){var b=arguments;return function(d){for(var e=[],g=null,u=0;u<b.length;u++)if(null!=b[u]){try{g=b[u].call(this,d)}catch(k){throw new c.Exception(d);}e.push(g[0]);d=g[1]}return[e,d]}},all:function(){var b=b;return b.each(b.optional(arguments))},sequence:function(d,e,g){e=e||b.rtoken(/^\s*/);g=g||null;return 1==d.length?d[0]:function(b){for(var u=null,k=null,l=[],T=0;T<
d.length;T++){try{u=d[T].call(this,b)}catch(B){break}l.push(u[0]);try{k=e.call(this,u[1])}catch(H){k=null;break}b=k[1]}if(!u)throw new c.Exception(b);if(k)throw new c.Exception(k[1]);if(g)try{u=g.call(this,u[1])}catch(E){throw new c.Exception(u[1]);}return[l,u?u[1]:b]}},between:function(d,e,c){c=c||d;var g=b.each(b.ignore(d),e,b.ignore(c));return function(b){b=g.call(this,b);return[[b[0][0],r[0][2]],b[1]]}},list:function(d,e,c){e=e||b.rtoken(/^\s*/);c=c||null;return d instanceof Array?b.each(b.product(d.slice(0,
-1),b.ignore(e)),d.slice(-1),b.ignore(c)):b.each(b.many(b.each(d,b.ignore(e))),px,b.ignore(c))},set:function(d,e,g){e=e||b.rtoken(/^\s*/);g=g||null;return function(q){for(var u=null,k=u=null,l=null,T=[[],q],B=!1,H=0;H<d.length;H++){u=k=null;B=1==d.length;try{u=d[H].call(this,q)}catch(E){continue}l=[[u[0]],u[1]];if(0<u[1].length&&!B)try{k=e.call(this,u[1])}catch(N){B=!0}else B=!0;!B&&0===k[1].length&&(B=!0);if(!B){u=[];for(B=0;B<d.length;B++)H!=B&&u.push(d[B]);u=b.set(u,e).call(this,k[1]);0<u[0].length&&
(l[0]=l[0].concat(u[0]),l[1]=u[1])}l[1].length<T[1].length&&(T=l);if(0===T[1].length)break}if(0===T[0].length)return T;if(g){try{k=g.call(this,T[1])}catch(J){throw new c.Exception(T[1]);}T[1]=k[1]}return T}},forward:function(b,d){return function(e){return b[d].call(this,e)}},replace:function(b,d){return function(e){e=b.call(this,e);return[d,e[1]]}},process:function(b,d){return function(e){e=b.call(this,e);return[d.call(this,e[0]),e[1]]}},min:function(b,d){return function(e){var g=d.call(this,e);if(g[0].length<
b)throw new c.Exception(e);return g}}},d=function(b){return function(){var d=null,e=[];1<arguments.length?d=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(d=arguments[0]);if(d)for(var c=d.shift();0<c.length;)return d.unshift(c[0]),e.push(b.apply(null,d)),d.shift(),e;else return b.apply(null,arguments)}},e="optional not ignore cache".split(/\s/),g=0;g<e.length;g++)b[e[g]]=d(b[e[g]]);d=function(b){return function(){return arguments[0]instanceof Array?b.apply(null,arguments[0]):
b.apply(null,arguments)}};e="each any all".split(/\s/);for(g=0;g<e.length;g++)b[e[g]]=d(b[e[g]])})();(function(){var c=Date,b=c.CultureInfo,d=function(b){for(var e=[],f=0;f<b.length;f++)b[f]instanceof Array?e=e.concat(d(b[f])):b[f]&&e.push(b[f]);return e};c.Grammar={};c.Translator={hour:function(b){return function(){this.hour=Number(b)}},minute:function(b){return function(){this.minute=Number(b)}},second:function(b){return function(){this.second=Number(b)}},meridian:function(b){return function(){this.meridian=
b.slice(0,1).toLowerCase()}},timezone:function(b){return function(){var d=b.replace(/[^\d\+\-]/g,"");d.length?this.timezoneOffset=Number(d):this.timezone=b.toLowerCase()}},day:function(b){var d=b[0];return function(){this.day=Number(d.match(/\d+/)[0])}},month:function(b){return function(){this.month=3==b.length?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(b)/4:Number(b)-1}},year:function(d){return function(){var e=Number(d);this.year=2<d.length?e:e+(e+2E3<b.twoDigitYearMax?2E3:1900)}},
rday:function(b){return function(){switch(b){case "yesterday":this.days=-1;break;case "tomorrow":this.days=1;break;case "today":this.days=0;break;case "now":this.days=0,this.now=!0}}},finishExact:function(b){b=b instanceof Array?b:[b];for(var d=0;d<b.length;d++)b[d]&&b[d].call(this);b=new Date;if((this.hour||this.minute)&&!this.month&&!this.year&&!this.day)this.day=b.getDate();this.year||(this.year=b.getFullYear());!this.month&&0!==this.month&&(this.month=b.getMonth());this.day||(this.day=1);this.hour||
(this.hour=0);this.minute||(this.minute=0);this.second||(this.second=0);this.meridian&&this.hour&&("p"==this.meridian&&12>this.hour?this.hour+=12:"a"==this.meridian&&12==this.hour&&(this.hour=0));if(this.day>c.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");b=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);this.timezone?b.set({timezone:this.timezone}):this.timezoneOffset&&b.set({timezoneOffset:this.timezoneOffset});return b},
finish:function(b){b=b instanceof Array?d(b):[b];if(0===b.length)return null;for(var e=0;e<b.length;e++)"function"==typeof b[e]&&b[e].call(this);b=c.today();if(this.now&&!this.unit&&!this.operator)return new Date;this.now&&(b=new Date);var e=!!(this.days&&null!==this.days||this.orient||this.operator),f,g,h;h="past"==this.orient||"subtract"==this.operator?-1:1;!this.now&&-1!="hour minute second".indexOf(this.unit)&&b.setTimeToNow();if((this.month||0===this.month)&&-1!="year day hour minute second".indexOf(this.unit))this.value=
this.month+1,this.month=null,e=!0;!e&&(this.weekday&&!this.day&&!this.days)&&(f=Date[this.weekday](),this.day=f.getDate(),this.month||(this.month=f.getMonth()),this.year=f.getFullYear());e&&(this.weekday&&"month"!=this.unit)&&(this.unit="day",f=c.getDayNumberFromName(this.weekday)-b.getDay(),g=7,this.days=f?(f+h*g)%g:h*g);this.month&&("day"==this.unit&&this.operator)&&(this.value=this.month+1,this.month=null);null!=this.value&&(null!=this.month&&null!=this.year)&&(this.day=1*this.value);this.month&&
(!this.day&&this.value)&&(b.set({day:1*this.value}),e||(this.day=1*this.value));!this.month&&(this.value&&"month"==this.unit&&!this.now)&&(this.month=this.value,e=!0);if(e&&(this.month||0===this.month)&&"year"!=this.unit)this.unit="month",f=this.month-b.getMonth(),g=12,this.months=f?(f+h*g)%g:h*g,this.month=null;this.unit||(this.unit="day");if(!this.value&&this.operator&&null!==this.operator&&this[this.unit+"s"]&&null!==this[this.unit+"s"])this[this.unit+"s"]=this[this.unit+"s"]+("add"==this.operator?
1:-1)+(this.value||0)*h;else if(null==this[this.unit+"s"]||null!=this.operator)this.value||(this.value=1),this[this.unit+"s"]=this.value*h;this.meridian&&this.hour&&("p"==this.meridian&&12>this.hour?this.hour+=12:"a"==this.meridian&&12==this.hour&&(this.hour=0));this.weekday&&(!this.day&&!this.days)&&(f=Date[this.weekday](),this.day=f.getDate(),f.getMonth()!==b.getMonth()&&(this.month=f.getMonth()));if((this.month||0===this.month)&&!this.day)this.day=1;if(!this.orient&&!this.operator&&"week"==this.unit&&
this.value&&!this.day&&!this.month)return Date.today().setWeek(this.value);e&&(this.timezone&&this.day&&this.days)&&(this.day=this.days);return e?b.add(this):b.set(this)}};var e=c.Parsing.Operators,g=c.Grammar,f=c.Translator,h;g.datePartDelimiter=e.rtoken(/^([\s\-\.\,\/\x27]+)/);g.timePartDelimiter=e.stoken(":");g.whiteSpace=e.rtoken(/^\s*/);g.generalDelimiter=e.rtoken(/^(([\s\,]|at|@|on)+)/);var m={};g.ctoken=function(d){var f=m[d];if(!f){for(var f=b.regexPatterns,c=d.split(/\s+/),g=[],h=0;h<c.length;h++)g.push(e.replace(e.rtoken(f[c[h]]),
c[h]));f=m[d]=e.any.apply(null,g)}return f};g.ctoken2=function(d){return e.rtoken(b.regexPatterns[d])};g.h=e.cache(e.process(e.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),f.hour));g.hh=e.cache(e.process(e.rtoken(/^(0[0-9]|1[0-2])/),f.hour));g.H=e.cache(e.process(e.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),f.hour));g.HH=e.cache(e.process(e.rtoken(/^([0-1][0-9]|2[0-3])/),f.hour));g.m=e.cache(e.process(e.rtoken(/^([0-5][0-9]|[0-9])/),f.minute));g.mm=e.cache(e.process(e.rtoken(/^[0-5][0-9]/),f.minute));g.s=e.cache(e.process(e.rtoken(/^([0-5][0-9]|[0-9])/),
f.second));g.ss=e.cache(e.process(e.rtoken(/^[0-5][0-9]/),f.second));g.hms=e.cache(e.sequence([g.H,g.m,g.s],g.timePartDelimiter));g.t=e.cache(e.process(g.ctoken2("shortMeridian"),f.meridian));g.tt=e.cache(e.process(g.ctoken2("longMeridian"),f.meridian));g.z=e.cache(e.process(e.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),f.timezone));g.zz=e.cache(e.process(e.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),f.timezone));g.zzz=e.cache(e.process(g.ctoken2("timezone"),f.timezone));g.timeSuffix=
e.each(e.ignore(g.whiteSpace),e.set([g.tt,g.zzz]));g.time=e.each(e.optional(e.ignore(e.stoken("T"))),g.hms,g.timeSuffix);g.d=e.cache(e.process(e.each(e.rtoken(/^([0-2]\d|3[0-1]|\d)/),e.optional(g.ctoken2("ordinalSuffix"))),f.day));g.dd=e.cache(e.process(e.each(e.rtoken(/^([0-2]\d|3[0-1])/),e.optional(g.ctoken2("ordinalSuffix"))),f.day));g.ddd=g.dddd=e.cache(e.process(g.ctoken("sun mon tue wed thu fri sat"),function(b){return function(){this.weekday=b}}));g.M=e.cache(e.process(e.rtoken(/^(1[0-2]|0\d|\d)/),
f.month));g.MM=e.cache(e.process(e.rtoken(/^(1[0-2]|0\d)/),f.month));g.MMM=g.MMMM=e.cache(e.process(g.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),f.month));g.y=e.cache(e.process(e.rtoken(/^(\d\d?)/),f.year));g.yy=e.cache(e.process(e.rtoken(/^(\d\d)/),f.year));g.yyy=e.cache(e.process(e.rtoken(/^(\d\d?\d?\d?)/),f.year));g.yyyy=e.cache(e.process(e.rtoken(/^(\d\d\d\d)/),f.year));h=function(){return e.each(e.any.apply(null,arguments),e.not(g.ctoken2("timeContext")))};g.day=h(g.d,g.dd);g.month=
h(g.M,g.MMM);g.year=h(g.yyyy,g.yy);g.orientation=e.process(g.ctoken("past future"),function(b){return function(){this.orient=b}});g.operator=e.process(g.ctoken("add subtract"),function(b){return function(){this.operator=b}});g.rday=e.process(g.ctoken("yesterday tomorrow today now"),f.rday);g.unit=e.process(g.ctoken("second minute hour day week month year"),function(b){return function(){this.unit=b}});g.value=e.process(e.rtoken(/^\d\d?(st|nd|rd|th)?/),function(b){return function(){this.value=b.replace(/\D/g,
"")}});g.expression=e.set([g.rday,g.operator,g.value,g.unit,g.orientation,g.ddd,g.MMM]);h=function(){return e.set(arguments,g.datePartDelimiter)};g.mdy=h(g.ddd,g.month,g.day,g.year);g.ymd=h(g.ddd,g.year,g.month,g.day);g.dmy=h(g.ddd,g.day,g.month,g.year);g.date=function(d){return(g[b.dateElementOrder]||g.mdy).call(this,d)};g.format=e.process(e.many(e.any(e.process(e.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(b){if(g[b])return g[b];throw c.Parsing.Exception(b);}),e.process(e.rtoken(/^[^dMyhHmstz]+/),
function(b){return e.ignore(e.stoken(b))}))),function(b){return e.process(e.each.apply(null,b),f.finishExact)});var q={};g.formats=function(b){if(b instanceof Array){for(var d=[],f=0;f<b.length;f++)d.push(q[b[f]]=q[b[f]]||g.format(b[f])[0]);return e.any.apply(null,d)}return q[b]=q[b]||g.format(b)[0]};g._formats=g.formats('"yyyy-MM-ddTHH:mm:ssZ";yyyy-MM-ddTHH:mm:ssZ;yyyy-MM-ddTHH:mm:ssz;yyyy-MM-ddTHH:mm:ss;yyyy-MM-ddTHH:mmZ;yyyy-MM-ddTHH:mmz;yyyy-MM-ddTHH:mm;ddd, MMM dd, yyyy H:mm:ss tt;ddd MMM d yyyy HH:mm:ss zzz;MMddyyyy;ddMMyyyy;Mddyyyy;ddMyyyy;Mdyyyy;dMyyyy;yyyy;Mdyy;dMyy;d'.split(";"));
g._start=e.process(e.set([g.date,g.time,g.expression],g.generalDelimiter,g.whiteSpace),f.finish);g.start=function(b){try{var d=g._formats.call({},b);if(0===d[1].length)return d}catch(e){}return g._start.call({},b)};c._parse=c.parse;c.parse=function(b){var d=null;if(!b)return null;if(b instanceof Date)return b;try{d=c.Grammar.start.call({},b.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(e){return null}return 0===d[1].length?d[0]:null};c.getParseFunction=function(b){var d=c.Grammar.formats(b);return function(b){var e=
null;try{e=d.call({},b)}catch(f){return null}return 0===e[1].length?e[0]:null}};c.parseExact=function(b,d){return c.getParseFunction(d)(b)}})();(function(){var c=this,b=c._,d={},e=Array.prototype,g=Object.prototype,f=e.push,h=e.slice,m=e.concat,q=g.toString,k=g.hasOwnProperty,l=e.forEach,L=e.map,T=e.reduce,B=e.reduceRight,H=e.filter,E=e.every,N=e.some,J=e.indexOf,R=e.lastIndexOf,g=Array.isArray,n=Object.keys,s=Function.prototype.bind,z=function(b){if(b instanceof z)return b;if(!(this instanceof z))return new z(b);
this._wrapped=b};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=z),exports._=z):c._=z;z.VERSION="1.5.1";var v=z.each=z.forEach=function(b,e,f){if(null!=b)if(l&&b.forEach===l)b.forEach(e,f);else if(b.length===+b.length)for(var c=0,g=b.length;c<g&&e.call(f,b[c],c,b)!==d;c++);else for(c in b)if(z.has(b,c)&&e.call(f,b[c],c,b)===d)break};z.map=z.collect=function(b,d,e){var f=[];if(null==b)return f;if(L&&b.map===L)return b.map(d,e);v(b,function(b,c,g){f.push(d.call(e,
b,c,g))});return f};z.reduce=z.foldl=z.inject=function(b,d,e,f){var c=2<arguments.length;null==b&&(b=[]);if(T&&b.reduce===T)return f&&(d=z.bind(d,f)),c?b.reduce(d,e):b.reduce(d);v(b,function(b,g,h){c?e=d.call(f,e,b,g,h):(e=b,c=!0)});if(!c)throw new TypeError("Reduce of empty array with no initial value");return e};z.reduceRight=z.foldr=function(b,d,e,f){var c=2<arguments.length;null==b&&(b=[]);if(B&&b.reduceRight===B)return f&&(d=z.bind(d,f)),c?b.reduceRight(d,e):b.reduceRight(d);var g=b.length;if(g!==
+g)var h=z.keys(b),g=h.length;v(b,function(m,q,k){q=h?h[--g]:--g;c?e=d.call(f,e,b[q],q,k):(e=b[q],c=!0)});if(!c)throw new TypeError("Reduce of empty array with no initial value");return e};z.find=z.detect=function(b,d,e){var f;w(b,function(b,c,g){if(d.call(e,b,c,g))return f=b,!0});return f};z.filter=z.select=function(b,d,e){var f=[];if(null==b)return f;if(H&&b.filter===H)return b.filter(d,e);v(b,function(b,c,g){d.call(e,b,c,g)&&f.push(b)});return f};z.reject=function(b,d,e){return z.filter(b,function(b,
f,c){return!d.call(e,b,f,c)},e)};z.every=z.all=function(b,e,f){e||(e=z.identity);var c=!0;if(null==b)return c;if(E&&b.every===E)return b.every(e,f);v(b,function(b,g,h){if(!(c=c&&e.call(f,b,g,h)))return d});return!!c};var w=z.some=z.any=function(b,e,f){e||(e=z.identity);var c=!1;if(null==b)return c;if(N&&b.some===N)return b.some(e,f);v(b,function(b,g,h){if(c||(c=e.call(f,b,g,h)))return d});return!!c};z.contains=z.include=function(b,d){return null==b?!1:J&&b.indexOf===J?-1!=b.indexOf(d):w(b,function(b){return b===
d})};z.invoke=function(b,d){var e=h.call(arguments,2),f=z.isFunction(d);return z.map(b,function(b){return(f?d:b[d]).apply(b,e)})};z.pluck=function(b,d){return z.map(b,function(b){return b[d]})};z.where=function(b,d,e){return z.isEmpty(d)?e?void 0:[]:z[e?"find":"filter"](b,function(b){for(var e in d)if(d[e]!==b[e])return!1;return!0})};z.findWhere=function(b,d){return z.where(b,d,!0)};z.max=function(b,d,e){if(!d&&z.isArray(b)&&b[0]===+b[0]&&65535>b.length)return Math.max.apply(Math,b);if(!d&&z.isEmpty(b))return-Infinity;
var f={computed:-Infinity,value:-Infinity};v(b,function(b,c,g){c=d?d.call(e,b,c,g):b;c>f.computed&&(f={value:b,computed:c})});return f.value};z.min=function(b,d,e){if(!d&&z.isArray(b)&&b[0]===+b[0]&&65535>b.length)return Math.min.apply(Math,b);if(!d&&z.isEmpty(b))return Infinity;var f={computed:Infinity,value:Infinity};v(b,function(b,c,g){c=d?d.call(e,b,c,g):b;c<f.computed&&(f={value:b,computed:c})});return f.value};z.shuffle=function(b){var d,e=0,f=[];v(b,function(b){d=z.random(e++);f[e-1]=f[d];
f[d]=b});return f};var y=function(b){return z.isFunction(b)?b:function(d){return d[b]}};z.sortBy=function(b,d,e){var f=y(d);return z.pluck(z.map(b,function(b,d,c){return{value:b,index:d,criteria:f.call(e,b,d,c)}}).sort(function(b,d){var e=b.criteria,f=d.criteria;if(e!==f){if(e>f||void 0===e)return 1;if(e<f||void 0===f)return-1}return b.index<d.index?-1:1}),"value")};var A=function(b,d,e,f){var c={},g=y(null==d?z.identity:d);v(b,function(d,h){var m=g.call(e,d,h,b);f(c,m,d)});return c};z.groupBy=function(b,
d,e){return A(b,d,e,function(b,d,e){(z.has(b,d)?b[d]:b[d]=[]).push(e)})};z.countBy=function(b,d,e){return A(b,d,e,function(b,d){z.has(b,d)||(b[d]=0);b[d]++})};z.sortedIndex=function(b,d,e,f){e=null==e?z.identity:y(e);d=e.call(f,d);for(var c=0,g=b.length;c<g;){var h=c+g>>>1;e.call(f,b[h])<d?c=h+1:g=h}return c};z.toArray=function(b){return!b?[]:z.isArray(b)?h.call(b):b.length===+b.length?z.map(b,z.identity):z.values(b)};z.size=function(b){return null==b?0:b.length===+b.length?b.length:z.keys(b).length};
z.first=z.head=z.take=function(b,d,e){return null==b?void 0:null!=d&&!e?h.call(b,0,d):b[0]};z.initial=function(b,d,e){return h.call(b,0,b.length-(null==d||e?1:d))};z.last=function(b,d,e){return null==b?void 0:null!=d&&!e?h.call(b,Math.max(b.length-d,0)):b[b.length-1]};z.rest=z.tail=z.drop=function(b,d,e){return h.call(b,null==d||e?1:d)};z.compact=function(b){return z.filter(b,z.identity)};var C=function(b,d,e){if(d&&z.every(b,z.isArray))return m.apply(e,b);v(b,function(b){z.isArray(b)||z.isArguments(b)?
d?f.apply(e,b):C(b,d,e):e.push(b)});return e};z.flatten=function(b,d){return C(b,d,[])};z.without=function(b){return z.difference(b,h.call(arguments,1))};z.uniq=z.unique=function(b,d,e,f){z.isFunction(d)&&(f=e,e=d,d=!1);e=e?z.map(b,e,f):b;var c=[],g=[];v(e,function(e,f){if(d?!f||g[g.length-1]!==e:!z.contains(g,e))g.push(e),c.push(b[f])});return c};z.union=function(){return z.uniq(z.flatten(arguments,!0))};z.intersection=function(b){var d=h.call(arguments,1);return z.filter(z.uniq(b),function(b){return z.every(d,
function(d){return 0<=z.indexOf(d,b)})})};z.difference=function(b){var d=m.apply(e,h.call(arguments,1));return z.filter(b,function(b){return!z.contains(d,b)})};z.zip=function(){for(var b=z.max(z.pluck(arguments,"length").concat(0)),d=Array(b),e=0;e<b;e++)d[e]=z.pluck(arguments,""+e);return d};z.object=function(b,d){if(null==b)return{};for(var e={},f=0,c=b.length;f<c;f++)d?e[b[f]]=d[f]:e[b[f][0]]=b[f][1];return e};z.indexOf=function(b,d,e){if(null==b)return-1;var f=0,c=b.length;if(e)if("number"==typeof e)f=
0>e?Math.max(0,c+e):e;else return f=z.sortedIndex(b,d),b[f]===d?f:-1;if(J&&b.indexOf===J)return b.indexOf(d,e);for(;f<c;f++)if(b[f]===d)return f;return-1};z.lastIndexOf=function(b,d,e){if(null==b)return-1;var f=null!=e;if(R&&b.lastIndexOf===R)return f?b.lastIndexOf(d,e):b.lastIndexOf(d);for(e=f?e:b.length;e--;)if(b[e]===d)return e;return-1};z.range=function(b,d,e){1>=arguments.length&&(d=b||0,b=0);e=arguments[2]||1;for(var f=Math.max(Math.ceil((d-b)/e),0),c=0,g=Array(f);c<f;)g[c++]=b,b+=e;return g};
var D=function(){};z.bind=function(b,d){var e,f;if(s&&b.bind===s)return s.apply(b,h.call(arguments,1));if(!z.isFunction(b))throw new TypeError;e=h.call(arguments,2);return f=function(){if(!(this instanceof f))return b.apply(d,e.concat(h.call(arguments)));D.prototype=b.prototype;var c=new D;D.prototype=null;var g=b.apply(c,e.concat(h.call(arguments)));return Object(g)===g?g:c}};z.partial=function(b){var d=h.call(arguments,1);return function(){return b.apply(this,d.concat(h.call(arguments)))}};z.bindAll=
function(b){var d=h.call(arguments,1);if(0===d.length)throw Error("bindAll must be passed function names");v(d,function(d){b[d]=z.bind(b[d],b)});return b};z.memoize=function(b,d){var e={};d||(d=z.identity);return function(){var f=d.apply(this,arguments);return z.has(e,f)?e[f]:e[f]=b.apply(this,arguments)}};z.delay=function(b,d){var e=h.call(arguments,2);return setTimeout(function(){return b.apply(null,e)},d)};z.defer=function(b){return z.delay.apply(z,[b,1].concat(h.call(arguments,1)))};z.throttle=
function(b,d,e){var f,c,g,h=null,m=0;e||(e={});var q=function(){m=!1===e.leading?0:new Date;h=null;g=b.apply(f,c)};return function(){var k=new Date;!m&&!1===e.leading&&(m=k);var u=d-(k-m);f=this;c=arguments;0>=u?(clearTimeout(h),h=null,m=k,g=b.apply(f,c)):!h&&!1!==e.trailing&&(h=setTimeout(q,u));return g}};z.debounce=function(b,d,e){var f,c=null;return function(){var g=this,h=arguments,m=e&&!c;clearTimeout(c);c=setTimeout(function(){c=null;e||(f=b.apply(g,h))},d);m&&(f=b.apply(g,h));return f}};z.once=
function(b){var d=!1,e;return function(){if(d)return e;d=!0;e=b.apply(this,arguments);b=null;return e}};z.wrap=function(b,d){return function(){var e=[b];f.apply(e,arguments);return d.apply(this,e)}};z.compose=function(){var b=arguments;return function(){for(var d=arguments,e=b.length-1;0<=e;e--)d=[b[e].apply(this,d)];return d[0]}};z.after=function(b,d){return function(){if(1>--b)return d.apply(this,arguments)}};z.keys=n||function(b){if(b!==Object(b))throw new TypeError("Invalid object");var d=[],
e;for(e in b)z.has(b,e)&&d.push(e);return d};z.values=function(b){var d=[],e;for(e in b)z.has(b,e)&&d.push(b[e]);return d};z.pairs=function(b){var d=[],e;for(e in b)z.has(b,e)&&d.push([e,b[e]]);return d};z.invert=function(b){var d={},e;for(e in b)z.has(b,e)&&(d[b[e]]=e);return d};z.functions=z.methods=function(b){var d=[],e;for(e in b)z.isFunction(b[e])&&d.push(e);return d.sort()};z.extend=function(b){v(h.call(arguments,1),function(d){if(d)for(var e in d)b[e]=d[e]});return b};z.pick=function(b){var d=
{},f=m.apply(e,h.call(arguments,1));v(f,function(e){e in b&&(d[e]=b[e])});return d};z.omit=function(b){var d={},f=m.apply(e,h.call(arguments,1)),c;for(c in b)z.contains(f,c)||(d[c]=b[c]);return d};z.defaults=function(b){v(h.call(arguments,1),function(d){if(d)for(var e in d)void 0===b[e]&&(b[e]=d[e])});return b};z.clone=function(b){return!z.isObject(b)?b:z.isArray(b)?b.slice():z.extend({},b)};z.tap=function(b,d){d(b);return b};var Z=function(b,d,e,f){if(b===d)return 0!==b||1/b==1/d;if(null==b||null==
d)return b===d;b instanceof z&&(b=b._wrapped);d instanceof z&&(d=d._wrapped);var c=q.call(b);if(c!=q.call(d))return!1;switch(c){case "[object String]":return b==String(d);case "[object Number]":return b!=+b?d!=+d:0==b?1/b==1/d:b==+d;case "[object Date]":case "[object Boolean]":return+b==+d;case "[object RegExp]":return b.source==d.source&&b.global==d.global&&b.multiline==d.multiline&&b.ignoreCase==d.ignoreCase}if("object"!=typeof b||"object"!=typeof d)return!1;for(var g=e.length;g--;)if(e[g]==b)return f[g]==
d;var g=b.constructor,h=d.constructor;if(g!==h&&(!z.isFunction(g)||!(g instanceof g&&z.isFunction(h)&&h instanceof h)))return!1;e.push(b);f.push(d);g=0;h=!0;if("[object Array]"==c){if(g=b.length,h=g==d.length)for(;g--&&(h=Z(b[g],d[g],e,f)););}else{for(var m in b)if(z.has(b,m)&&(g++,!(h=z.has(d,m)&&Z(b[m],d[m],e,f))))break;if(h){for(m in d)if(z.has(d,m)&&!g--)break;h=!g}}e.pop();f.pop();return h};z.isEqual=function(b,d){return Z(b,d,[],[])};z.isEmpty=function(b){if(null==b)return!0;if(z.isArray(b)||
z.isString(b))return 0===b.length;for(var d in b)if(z.has(b,d))return!1;return!0};z.isElement=function(b){return!!(b&&1===b.nodeType)};z.isArray=g||function(b){return"[object Array]"==q.call(b)};z.isObject=function(b){return b===Object(b)};v("Arguments Function String Number Date RegExp".split(" "),function(b){z["is"+b]=function(d){return q.call(d)=="[object "+b+"]"}});z.isArguments(arguments)||(z.isArguments=function(b){return!(!b||!z.has(b,"callee"))});"function"!==typeof/./&&(z.isFunction=function(b){return"function"===
typeof b});z.isFinite=function(b){return isFinite(b)&&!isNaN(parseFloat(b))};z.isNaN=function(b){return z.isNumber(b)&&b!=+b};z.isBoolean=function(b){return!0===b||!1===b||"[object Boolean]"==q.call(b)};z.isNull=function(b){return null===b};z.isUndefined=function(b){return void 0===b};z.has=function(b,d){return k.call(b,d)};z.noConflict=function(){c._=b;return this};z.identity=function(b){return b};z.times=function(b,d,e){for(var f=Array(Math.max(0,b)),c=0;c<b;c++)f[c]=d.call(e,c);return f};z.random=
function(b,d){null==d&&(d=b,b=0);return b+Math.floor(Math.random()*(d-b+1))};var ja={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};ja.unescape=z.invert(ja.escape);var Ia={escape:RegExp("["+z.keys(ja.escape).join("")+"]","g"),unescape:RegExp("("+z.keys(ja.unescape).join("|")+")","g")};z.each(["escape","unescape"],function(b){z[b]=function(d){return null==d?"":(""+d).replace(Ia[b],function(d){return ja[b][d]})}});z.result=function(b,d){if(null!=b){var e=b[d];return z.isFunction(e)?
e.call(b):e}};z.mixin=function(b){v(z.functions(b),function(d){var e=z[d]=b[d];z.prototype[d]=function(){var b=[this._wrapped];f.apply(b,arguments);b=e.apply(z,b);return this._chain?z(b).chain():b}})};var xa=0;z.uniqueId=function(b){var d=++xa+"";return b?b+d:d};z.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,G={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},I=/\\|'|\r|\n|\t|\u2028|\u2029/g;z.template=
function(b,d,e){var f;e=z.defaults({},e,z.templateSettings);var c=RegExp([(e.escape||F).source,(e.interpolate||F).source,(e.evaluate||F).source].join("|")+"|$","g"),g=0,h="__p+='";b.replace(c,function(d,e,f,c,m){h+=b.slice(g,m).replace(I,function(b){return"\\"+G[b]});e&&(h+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'");f&&(h+="'+\n((__t=("+f+"))==null?'':__t)+\n'");c&&(h+="';\n"+c+"\n__p+='");g=m+d.length;return d});h+="';\n";e.variable||(h="with(obj||{}){\n"+h+"}\n");h="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+
h+"return __p;\n";try{f=new Function(e.variable||"obj","_",h)}catch(m){throw m.source=h,m;}if(d)return f(d,z);d=function(b){return f.call(this,b,z)};d.source="function("+(e.variable||"obj")+"){\n"+h+"}";return d};z.chain=function(b){return z(b).chain()};z.mixin(z);v("pop push reverse shift sort splice unshift".split(" "),function(b){var d=e[b];z.prototype[b]=function(){var e=this._wrapped;d.apply(e,arguments);("shift"==b||"splice"==b)&&0===e.length&&delete e[0];return this._chain?z(e).chain():e}});
v(["concat","join","slice"],function(b){var d=e[b];z.prototype[b]=function(){var b=d.apply(this._wrapped,arguments);return this._chain?z(b).chain():b}});z.extend(z.prototype,{chain:function(){this._chain=!0;return this},value:function(){return this._wrapped}})}).call(this);(function(){var c=this,b=c.Backbone,d=[],e=d.push,g=d.slice,f=d.splice,h;h="undefined"!==typeof exports?exports:c.Backbone={};h.VERSION="0.9.10";var m=c._;!m&&"undefined"!==typeof require&&(m=require("underscore"));h.$=c.jQuery||
c.Zepto||c.ender;h.noConflict=function(){c.Backbone=b;return this};h.emulateHTTP=!1;h.emulateJSON=!1;var q=/\s+/,k=function(b,d,e,f){if(!e)return!0;if("object"===typeof e)for(var c in e)b[d].apply(b,[c,e[c]].concat(f));else if(q.test(e)){e=e.split(q);c=0;for(var g=e.length;c<g;c++)b[d].apply(b,[e[c]].concat(f))}else return!0},l=function(b,d){var e,f=-1,c=b.length;switch(d.length){case 0:for(;++f<c;)(e=b[f]).callback.call(e.ctx);break;case 1:for(;++f<c;)(e=b[f]).callback.call(e.ctx,d[0]);break;case 2:for(;++f<
c;)(e=b[f]).callback.call(e.ctx,d[0],d[1]);break;case 3:for(;++f<c;)(e=b[f]).callback.call(e.ctx,d[0],d[1],d[2]);break;default:for(;++f<c;)(e=b[f]).callback.apply(e.ctx,d)}},d=h.Events={on:function(b,d,e){if(!k(this,"on",b,[d,e])||!d)return this;this._events||(this._events={});(this._events[b]||(this._events[b]=[])).push({callback:d,context:e,ctx:e||this});return this},once:function(b,d,e){if(!k(this,"once",b,[d,e])||!d)return this;var f=this,c=m.once(function(){f.off(b,c);d.apply(this,arguments)});
c._callback=d;this.on(b,c,e);return this},off:function(b,d,e){var f,c,g,h,q,l,E,x;if(!this._events||!k(this,"off",b,[d,e]))return this;if(!b&&!d&&!e)return this._events={},this;h=b?[b]:m.keys(this._events);q=0;for(l=h.length;q<l;q++)if(b=h[q],f=this._events[b]){g=[];if(d||e){E=0;for(x=f.length;E<x;E++)c=f[E],(d&&d!==c.callback&&d!==c.callback._callback||e&&e!==c.context)&&g.push(c)}this._events[b]=g}return this},trigger:function(b){if(!this._events)return this;var d=g.call(arguments,1);if(!k(this,
"trigger",b,d))return this;var e=this._events[b],f=this._events.all;e&&l(e,d);f&&l(f,arguments);return this},listenTo:function(b,d,e){var f=this._listeners||(this._listeners={}),c=b._listenerId||(b._listenerId=m.uniqueId("l"));f[c]=b;b.on(d,"object"===typeof d?this:e,this);return this},stopListening:function(b,d,e){var f=this._listeners;if(f){if(b)b.off(d,"object"===typeof d?this:e,this),!d&&!e&&delete f[b._listenerId];else{"object"===typeof d&&(e=this);for(var c in f)f[c].off(d,e,this);this._listeners=
{}}return this}}};d.bind=d.on;d.unbind=d.off;m.extend(h,d);var L=h.Model=function(b,d){var e,f=b||{};this.cid=m.uniqueId("c");this.attributes={};d&&d.collection&&(this.collection=d.collection);d&&d.parse&&(f=this.parse(f,d)||{});if(e=m.result(this,"defaults"))f=m.defaults({},f,e);this.set(f,d);this.changed={};this.initialize.apply(this,arguments)};m.extend(L.prototype,d,{changed:null,idAttribute:"id",initialize:function(){},toJSON:function(b){return m.clone(this.attributes)},sync:function(){return h.sync.apply(this,
arguments)},get:function(b){return this.attributes[b]},escape:function(b){return m.escape(this.get(b))},has:function(b){return null!=this.get(b)},set:function(b,d,e){var f,c,g,h,q,k,u;if(null==b)return this;"object"===typeof b?(c=b,e=d):(c={})[b]=d;e||(e={});if(!this._validate(c,e))return!1;g=e.unset;h=e.silent;b=[];q=this._changing;this._changing=!0;q||(this._previousAttributes=m.clone(this.attributes),this.changed={});u=this.attributes;k=this._previousAttributes;this.idAttribute in c&&(this.id=
c[this.idAttribute]);for(f in c)d=c[f],m.isEqual(u[f],d)||b.push(f),m.isEqual(k[f],d)?delete this.changed[f]:this.changed[f]=d,g?delete u[f]:u[f]=d;if(!h){b.length&&(this._pending=!0);d=0;for(f=b.length;d<f;d++)this.trigger("change:"+b[d],this,u[b[d]],e)}if(q)return this;if(!h)for(;this._pending;)this._pending=!1,this.trigger("change",this,e);this._changing=this._pending=!1;return this},unset:function(b,d){return this.set(b,void 0,m.extend({},d,{unset:!0}))},clear:function(b){var d={},e;for(e in this.attributes)d[e]=
void 0;return this.set(d,m.extend({},b,{unset:!0}))},hasChanged:function(b){return null==b?!m.isEmpty(this.changed):m.has(this.changed,b)},changedAttributes:function(b){if(!b)return this.hasChanged()?m.clone(this.changed):!1;var d,e=!1,f=this._changing?this._previousAttributes:this.attributes,c;for(c in b)if(!m.isEqual(f[c],d=b[c]))(e||(e={}))[c]=d;return e},previous:function(b){return null==b||!this._previousAttributes?null:this._previousAttributes[b]},previousAttributes:function(){return m.clone(this._previousAttributes)},
fetch:function(b){b=b?m.clone(b):{};void 0===b.parse&&(b.parse=!0);var d=b.success;b.success=function(b,e,f){if(!b.set(b.parse(e,f),f))return!1;d&&d(b,e,f)};return this.sync("read",this,b)},save:function(b,d,e){var f,c,g=this.attributes;null==b||"object"===typeof b?(f=b,e=d):(f={})[b]=d;if(f&&(!e||!e.wait)&&!this.set(f,e))return!1;e=m.extend({validate:!0},e);if(!this._validate(f,e))return!1;f&&e.wait&&(this.attributes=m.extend({},g,f));void 0===e.parse&&(e.parse=!0);c=e.success;e.success=function(b,
d,e){b.attributes=g;var h=b.parse(d,e);e.wait&&(h=m.extend(f||{},h));if(m.isObject(h)&&!b.set(h,e))return!1;c&&c(b,d,e)};b=this.isNew()?"create":e.patch?"patch":"update";"patch"===b&&(e.attrs=f);b=this.sync(b,this,e);f&&e.wait&&(this.attributes=g);return b},destroy:function(b){b=b?m.clone(b):{};var d=this,e=b.success,f=function(){d.trigger("destroy",d,d.collection,b)};b.success=function(b,d,c){(c.wait||b.isNew())&&f();e&&e(b,d,c)};if(this.isNew())return b.success(this,null,b),!1;var c=this.sync("delete",
this,b);b.wait||f();return c},url:function(){var b=m.result(this,"urlRoot")||m.result(this.collection,"url")||D();return this.isNew()?b:b+("/"===b.charAt(b.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(b,d){return b},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(b){return!this.validate||!this.validate(this.attributes,b)},_validate:function(b,d){if(!d.validate||!this.validate)return!0;b=m.extend({},this.attributes,
b);var e=this.validationError=this.validate(b,d)||null;if(!e)return!0;this.trigger("invalid",this,e,d||{});return!1}});var T=h.Collection=function(b,d){d||(d={});d.model&&(this.model=d.model);void 0!==d.comparator&&(this.comparator=d.comparator);this.models=[];this._reset();this.initialize.apply(this,arguments);b&&this.reset(b,m.extend({silent:!0},d))};m.extend(T.prototype,d,{model:L,initialize:function(){},toJSON:function(b){return this.map(function(d){return d.toJSON(b)})},sync:function(){return h.sync.apply(this,
arguments)},add:function(b,d){b=m.isArray(b)?b.slice():[b];d||(d={});var c,g,h,q,k,u,E,l,x,H;E=[];l=d.at;x=this.comparator&&null==l&&!1!=d.sort;H=m.isString(this.comparator)?this.comparator:null;c=0;for(g=b.length;c<g;c++)(h=this._prepareModel(q=b[c],d))?(k=this.get(h))?d.merge&&(k.set(q===h?h.attributes:q,d),x&&(!u&&k.hasChanged(H))&&(u=!0)):(E.push(h),h.on("all",this._onModelEvent,this),this._byId[h.cid]=h,null!=h.id&&(this._byId[h.id]=h)):this.trigger("invalid",this,q,d);E.length&&(x&&(u=!0),this.length+=
E.length,null!=l?f.apply(this.models,[l,0].concat(E)):e.apply(this.models,E));u&&this.sort({silent:!0});if(d.silent)return this;c=0;for(g=E.length;c<g;c++)(h=E[c]).trigger("add",h,this,d);u&&this.trigger("sort",this,d);return this},remove:function(b,d){b=m.isArray(b)?b.slice():[b];d||(d={});var e,f,c,g;e=0;for(f=b.length;e<f;e++)if(g=this.get(b[e]))delete this._byId[g.id],delete this._byId[g.cid],c=this.indexOf(g),this.models.splice(c,1),this.length--,d.silent||(d.index=c,g.trigger("remove",g,this,
d)),this._removeReference(g);return this},push:function(b,d){b=this._prepareModel(b,d);this.add(b,m.extend({at:this.length},d));return b},pop:function(b){var d=this.at(this.length-1);this.remove(d,b);return d},unshift:function(b,d){b=this._prepareModel(b,d);this.add(b,m.extend({at:0},d));return b},shift:function(b){var d=this.at(0);this.remove(d,b);return d},slice:function(b,d){return this.models.slice(b,d)},get:function(b){if(null!=b)return this._idAttr||(this._idAttr=this.model.prototype.idAttribute),
this._byId[b.id||b.cid||b[this._idAttr]||b]},at:function(b){return this.models[b]},where:function(b){return m.isEmpty(b)?[]:this.filter(function(d){for(var e in b)if(b[e]!==d.get(e))return!1;return!0})},sort:function(b){if(!this.comparator)throw Error("Cannot sort a set without a comparator");b||(b={});m.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(m.bind(this.comparator,this));b.silent||this.trigger("sort",this,b);return this},
pluck:function(b){return m.invoke(this.models,"get",b)},update:function(b,d){d=m.extend({add:!0,merge:!0,remove:!0},d);d.parse&&(b=this.parse(b,d));var e,f,c,g,h=[],q=[],k={};m.isArray(b)||(b=b?[b]:[]);if(d.add&&!d.remove)return this.add(b,d);f=0;for(c=b.length;f<c;f++)e=b[f],g=this.get(e),d.remove&&g&&(k[g.cid]=!0),(d.add&&!g||d.merge&&g)&&h.push(e);if(d.remove){f=0;for(c=this.models.length;f<c;f++)e=this.models[f],k[e.cid]||q.push(e)}q.length&&this.remove(q,d);h.length&&this.add(h,d);return this},
reset:function(b,d){d||(d={});d.parse&&(b=this.parse(b,d));for(var e=0,f=this.models.length;e<f;e++)this._removeReference(this.models[e]);d.previousModels=this.models.slice();this._reset();b&&this.add(b,m.extend({silent:!0},d));d.silent||this.trigger("reset",this,d);return this},fetch:function(b){b=b?m.clone(b):{};void 0===b.parse&&(b.parse=!0);var d=b.success;b.success=function(b,e,f){b[f.update?"update":"reset"](e,f);d&&d(b,e,f)};return this.sync("read",this,b)},create:function(b,d){d=d?m.clone(d):
{};if(!(b=this._prepareModel(b,d)))return!1;d.wait||this.add(b,d);var e=this,f=d.success;d.success=function(b,d,c){c.wait&&e.add(b,c);f&&f(b,d,c)};b.save(null,d);return b},parse:function(b,d){return b},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models.length=0;this._byId={}},_prepareModel:function(b,d){if(b instanceof L)return b.collection||(b.collection=this),b;d||(d={});d.collection=this;var e=new this.model(b,d);return!e._validate(b,d)?!1:e},
_removeReference:function(b){this===b.collection&&delete b.collection;b.off("all",this._onModelEvent,this)},_onModelEvent:function(b,d,e,f){("add"===b||"remove"===b)&&e!==this||("destroy"===b&&this.remove(d,f),d&&b==="change:"+d.idAttribute&&(delete this._byId[d.previous(d.idAttribute)],null!=d.id&&(this._byId[d.id]=d)),this.trigger.apply(this,arguments))},sortedIndex:function(b,d,e){d||(d=this.comparator);var f=m.isFunction(d)?d:function(b){return b.get(d)};return m.sortedIndex(this.models,b,f,e)}});
m.each("forEach each map collect reduce foldl inject reduceRight foldr find detect filter select reject every all some any include contains invoke max min toArray size first head take initial rest tail drop last without indexOf shuffle lastIndexOf isEmpty chain".split(" "),function(b){T.prototype[b]=function(){var d=g.call(arguments);d.unshift(this.models);return m[b].apply(m,d)}});m.each(["groupBy","countBy","sortBy"],function(b){T.prototype[b]=function(d,e){var f=m.isFunction(d)?d:function(b){return b.get(d)};
return m[b](this.models,f,e)}});var B=h.Router=function(b){b||(b={});b.routes&&(this.routes=b.routes);this._bindRoutes();this.initialize.apply(this,arguments)},H=/\((.*?)\)/g,E=/(\(\?)?:\w+/g,N=/\*\w+/g,J=/[\-{}\[\]+?.,\\\^$|#\s]/g;m.extend(B.prototype,d,{initialize:function(){},route:function(b,d,e){m.isRegExp(b)||(b=this._routeToRegExp(b));e||(e=this[d]);h.history.route(b,m.bind(function(f){f=this._extractParameters(b,f);e&&e.apply(this,f);this.trigger.apply(this,["route:"+d].concat(f));this.trigger("route",
d,f);h.history.trigger("route",this,d,f)},this));return this},navigate:function(b,d){h.history.navigate(b,d);return this},_bindRoutes:function(){if(this.routes)for(var b,d=m.keys(this.routes);null!=(b=d.pop());)this.route(b,this.routes[b])},_routeToRegExp:function(b){b=b.replace(J,"\\$&").replace(H,"(?:$1)?").replace(E,function(b,d){return d?b:"([^/]+)"}).replace(N,"(.*?)");return RegExp("^"+b+"$")},_extractParameters:function(b,d){return b.exec(d).slice(1)}});var R=h.History=function(){this.handlers=
[];m.bindAll(this,"checkUrl");"undefined"!==typeof window&&(this.location=window.location,this.history=window.history)},n=/^[#\/]|\s+$/g,s=/^\/+|\/+$/g,z=/msie [\w.]+/,v=/\/$/;R.started=!1;m.extend(R.prototype,d,{interval:50,getHash:function(b){return(b=(b||this).location.href.match(/#(.*)$/))?b[1]:""},getFragment:function(b,d){if(null==b)if(this._hasPushState||!this._wantsHashChange||d){b=this.location.pathname;var e=this.root.replace(v,"");b.indexOf(e)||(b=b.substr(e.length))}else b=this.getHash();
return b.replace(n,"")},start:function(b){if(R.started)throw Error("Backbone.history has already been started");R.started=!0;this.options=m.extend({},{root:"/"},this.options,b);this.root=this.options.root;this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!(!this.options.pushState||!this.history||!this.history.pushState);b=this.getFragment();var d=document.documentMode,d=z.exec(navigator.userAgent.toLowerCase())&&(!d||7>=d);this.root=
("/"+this.root+"/").replace(s,"/");d&&this._wantsHashChange&&(this.iframe=h.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(b));if(this._hasPushState)h.$(window).on("popstate",this.checkUrl);else if(this._wantsHashChange&&"onhashchange"in window&&!d)h.$(window).on("hashchange",this.checkUrl);else this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=b;b=this.location;d=b.pathname.replace(/[^\/]$/,
"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!d)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&(this._hasPushState&&d&&b.hash)&&(this.fragment=this.getHash().replace(n,""),this.history.replaceState({},document.title,this.root+this.fragment+b.search));if(!this.options.silent)return this.loadUrl()},stop:function(){h.$(window).off("popstate",this.checkUrl).off("hashchange",
this.checkUrl);clearInterval(this._checkUrlInterval);R.started=!1},route:function(b,d){this.handlers.unshift({route:b,callback:d})},checkUrl:function(b){b=this.getFragment();b===this.fragment&&this.iframe&&(b=this.getFragment(this.getHash(this.iframe)));if(b===this.fragment)return!1;this.iframe&&this.navigate(b);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(b){var d=this.fragment=this.getFragment(b);return m.any(this.handlers,function(b){if(b.route.test(d))return b.callback(d),!0})},
navigate:function(b,d){if(!R.started)return!1;if(!d||!0===d)d={trigger:d};b=this.getFragment(b||"");if(this.fragment!==b){this.fragment=b;var e=this.root+b;if(this._hasPushState)this.history[d.replace?"replaceState":"pushState"]({},document.title,e);else if(this._wantsHashChange)this._updateHash(this.location,b,d.replace),this.iframe&&b!==this.getFragment(this.getHash(this.iframe))&&(d.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,b,d.replace));else return this.location.assign(e);
d.trigger&&this.loadUrl(b)}},_updateHash:function(b,d,e){e?(e=b.href.replace(/(javascript:|#).*$/,""),b.replace(e+"#"+d)):b.hash="#"+d}});h.history=new R;var w=h.View=function(b){this.cid=m.uniqueId("view");this._configure(b||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},y=/^(\S+)\s*(.*)$/,A="model collection el id attributes className tagName events".split(" ");m.extend(w.prototype,d,{tagName:"div",$:function(b){return this.$el.find(b)},initialize:function(){},
render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(b,d){this.$el&&this.undelegateEvents();this.$el=b instanceof h.$?b:h.$(b);this.el=this.$el[0];!1!==d&&this.delegateEvents();return this},delegateEvents:function(b){if(b||(b=m.result(this,"events"))){this.undelegateEvents();for(var d in b){var e=b[d];m.isFunction(e)||(e=this[b[d]]);if(!e)throw Error('Method "'+b[d]+'" does not exist');var f=d.match(y),c=f[1],f=f[2],e=m.bind(e,this),
c=c+(".delegateEvents"+this.cid);if(""===f)this.$el.on(c,e);else this.$el.on(c,f,e)}}},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid)},_configure:function(b){this.options&&(b=m.extend({},m.result(this,"options"),b));m.extend(this,m.pick(b,A));this.options=b},_ensureElement:function(){if(this.el)this.setElement(m.result(this,"el"),!1);else{var b=m.extend({},m.result(this,"attributes"));this.id&&(b.id=m.result(this,"id"));this.className&&(b["class"]=m.result(this,"className"));
b=h.$("<"+m.result(this,"tagName")+">").attr(b);this.setElement(b,!1)}}});var C={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};h.prepareData=function(b,d,e){return"create"==b||"update"==b||"patch"==b?JSON.stringify(d.toJSON(e)):null};h.sync=function(b,d,e){var f=C[b];m.defaults(e||(e={}),{emulateHTTP:h.emulateHTTP,emulateJSON:h.emulateJSON});var c={type:f,dataType:"json"};e.url||(c.url=m.result(d,"url")||D());null==e.data&&d&&(c.contentType="application/json",c.data=h.prepareData(b,
d,e));e.emulateJSON&&(c.contentType="application/x-www-form-urlencoded",c.data=c.data?{model:c.data}:{});if(e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){c.type="POST";e.emulateJSON&&(c.data._method=f);var g=e.beforeSend;e.beforeSend=function(b){b.setRequestHeader("X-HTTP-Method-Override",f);if(g)return g.apply(this,arguments)}}"GET"!==c.type&&!e.emulateJSON&&(c.processData=!1);var q=e.success;e.success=function(b){q&&q(d,b,e);d.trigger("sync",d,b,e)};var k=e.error;e.error=function(b){k&&
k(d,b,e);d.trigger("error",d,b,e)};b=e.xhr=h.ajax(m.extend(c,e));d.trigger("request",d,b,e);return b};h.ajax=function(){return h.$.ajax.apply(h.$,arguments)};L.extend=T.extend=B.extend=w.extend=R.extend=function(b,d){var e=this,f;f=b&&m.has(b,"constructor")?b.constructor:function(){return e.apply(this,arguments)};m.extend(f,e,d);var c=function(){this.constructor=f};c.prototype=e.prototype;f.prototype=new c;b&&m.extend(f.prototype,b);f.__super__=e.prototype;return f};var D=function(){throw Error('A "url" property or function must be specified');
}}).call(this);var De={};(function(c,b){function d(b){return String(null===b||void 0===b?"":b)}c.Template=function(d,e,f,c){this.r=d||this.r;this.c=f;this.options=c;this.text=e||"";this.buf=b?[]:""};c.Template.prototype={r:function(b,d,e){return""},v:function(b){b=d(b);return q.test(b)?b.replace(e,"&amp;").replace(g,"&lt;").replace(f,"&gt;").replace(h,"&#39;").replace(m,"&quot;"):b},t:d,render:function(b,d,e){return this.ri([b],d||{},e)},ri:function(b,d,e){return this.r(b,d,e)},rp:function(b,d,e,
f){b=e[b];if(!b)return"";this.c&&"string"==typeof b&&(b=this.c.compile(b,this.options));return b.ri(d,e,f)},rs:function(b,d,e){var f=b[b.length-1];if(k(f))for(var c=0;c<f.length;c++)b.push(f[c]),e(b,d,this),b.pop();else e(b,d,this)},s:function(b,d,e,f,c,g,h){if(k(b)&&0===b.length)return!1;"function"==typeof b&&(b=this.ls(b,d,e,f,c,g,h));e=!!b;!f&&(e&&d)&&d.push("object"==typeof b?b:d[d.length-1]);return e},d:function(b,d,e,f){var c=b.split("."),g=this.f(c[0],d,e,f),h=null;if("."===b&&k(d[d.length-
2]))return d[d.length-1];for(b=1;b<c.length;b++)g&&"object"==typeof g&&c[b]in g?(h=g,g=g[c[b]]):g="";if(f&&!g)return!1;!f&&"function"==typeof g&&(d.push(h),g=this.lv(g,d,e),d.pop());return g},f:function(b,d,e,f){for(var c=!1,g=null,h=!1,m=d.length-1;0<=m;m--)if((g=d[m])&&"object"==typeof g&&b in g){c=g[b];h=!0;break}if(!h)return f?!1:"";!f&&"function"==typeof c&&(c=this.lv(c,d,e));return c},ho:function(b,d,e,f,c){var g=this.c;b=b.call(d,f,function(b){return g.compile(b,{delimiters:c}).render(d,e)});
this.b(g.compile(b.toString(),{delimiters:c}).render(d,e));return!1},b:b?function(b){this.buf.push(b)}:function(b){this.buf+=b},fl:b?function(){var b=this.buf.join("");this.buf=[];return b}:function(){var b=this.buf;this.buf="";return b},ls:function(b,d,e,f,c,g,h){d=d[d.length-1];var m=null;if(!f&&this.c&&0<b.length)return this.ho(b,d,e,this.text.substring(c,g),h);m=b.call(d);if("function"==typeof m){if(f)return!0;if(this.c)return this.ho(m,d,e,this.text.substring(c,g),h)}return m},lv:function(b,
d,e){d=d[d.length-1];b=b.call(d);"function"==typeof b&&(b=b.call(d));b=b.toString();return this.c&&~b.indexOf("{{")?this.c.compile(b).render(d,e):b}};var e=/&/g,g=/</g,f=/>/g,h=/\'/g,m=/\"/g,q=/[&<>\"\']/,k=Array.isArray||function(b){return"[object Array]"===Object.prototype.toString.call(b)}})("undefined"!==typeof exports?exports:De);var cd;"undefined"===typeof exports?(window.markdown={},cd=window.markdown):cd=exports;(function(c){function b(b){for(var d=0,e=-1;-1!=(e=b.indexOf("\n",e+1));)d++;
return d}function d(b,d){function e(b){this.len_after=b;this.name="close_"+d}var f=b+"_state",c="strong"==b?"em_state":"strong_state";return function(g,h){if(this[f][0]==d)return this[f].shift(),[g.length,new e(g.length-d.length)];var m=this[c].slice(),q=this[f].slice();this[f].unshift(d);var k=this.processInline(g.substr(d.length)),u=k[k.length-1];this[f].shift();if(u instanceof e)return k.pop(),[g.length-u.len_after,[b].concat(k)];this[c]=m;this[f]=q;return[d.length,d]}}function e(b){return L(b)&&
1<b.length&&"object"===typeof b[1]&&!L(b[1])?b[1]:void 0}function g(b){var d=b.split("");b=[""];for(var e=!1;d.length;){var f=d.shift();switch(f){case " ":e?b[b.length-1]+=f:b.push("");break;case "'":case '"':e=!e;break;case "\\":f=d.shift();default:b[b.length-1]+=f}}d={};for(e=0;e<b.length;++e)/^#/.test(b[e])?d.id=b[e].substring(1):/^\./.test(b[e])?d["class"]=d["class"]?d["class"]+b[e].replace(/./," "):b[e].substring(1):/=/.test(b[e])&&(f=b[e].split(/=/),d[f[0]]=f[1]);return d}function f(b){return b.replace(/&/g,
"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function h(b){if("string"===typeof b)return f(b);var d=b.shift(),e={},c=[];for(b.length&&("object"===typeof b[0]&&!(b[0]instanceof Array))&&(e=b.shift());b.length;)c.push(arguments.callee(b.shift()));var g="",h;for(h in e)var m="",m=("href"==h||"src"==h)&&!/^(\/|(https?|ftp):\/\/|mailto:)/.test(e[h])?"#":e[h],g=g+(" "+h+'="'+f(m)+'"');return"br"==d?"<"+d+g+" />":"<"+d+g+">"+c.join("")+"</"+d+">"}function m(b,
d,f){f=f||{};var c=b.slice(0);"function"===typeof f.preprocessTreeNode&&(c=f.preprocessTreeNode(c,d));var g=e(c);if(g){c[1]={};for(var h in g)c[1][h]=g[h];g=c[1]}if("string"===typeof c)return c;switch(c[0]){case "header":c[0]="h"+c[1].level;delete c[1].level;break;case "bulletlist":c[0]="ul";break;case "numberlist":c[0]="ol";break;case "listitem":c[0]="li";break;case "para":c[0]="p";break;case "markdown":c[0]="html";g&&delete g.references;break;case "code_block":c[0]="pre";h=g?2:1;var m=["code"];
m.push.apply(m,c.splice(h));c[h]=m;break;case "inlinecode":c[0]="code";break;case "img":c[1].src=c[1].href;delete c[1].href;break;case "linebreak":c[0]="br";break;case "link":c[0]="a";break;case "link_ref":if(c[0]="a",h=d[g.ref])delete g.ref,g.href=h.href,h.title&&(g.title=h.title),delete g.original;else return g.original}h=1;if(g){for(var q in c[1])h=2;1===h&&c.splice(h,1)}for(;h<c.length;++h)c[h]=arguments.callee(c[h],d,f);return c}function q(b){for(var d=e(b)?2:1;d<b.length;)"string"===typeof b[d]?
d+1<b.length&&"string"===typeof b[d+1]?b[d]+=b.splice(d+1,1)[0]:++d:(arguments.callee(b[d]),++d)}var k=c.Markdown=function B(b){switch(typeof b){case "undefined":this.dialect=B.dialects.Gruber;break;case "object":this.dialect=b;break;default:if(b in B.dialects)this.dialect=B.dialects[b];else throw Error("Unknown Markdown dialect '"+String(b)+"'");}this.em_state=[];this.strong_state=[];this.debug_indent=""};c.parse=function(b,d,e){d=new k(d);d.options=e;return d.toTree(b)};c.toHTML=function(b,d,e){b=
c.toHTMLTree(b,d,e);return c.renderJsonML(b)};c.toHTMLTree=function(b,d,f){"string"===typeof b&&(b=this.parse(b,d,f));d=e(b);var c={};d&&d.references&&(c=d.references);b=m(b,c,f);q(b);return b};var l=k.mk_block=function(b,d,e){1==arguments.length&&(d="\n\n");var f=new String(b);f.trailing=d;f.toSource=function(){return"Markdown.mk_block( "+uneval(b)+", "+uneval(d)+", "+uneval(e)+" )"};void 0!=e&&(f.lineNumber=e);return f};k.prototype.split_blocks=function(d,e){var f=/([\s\S]+?)($|\n(?:\s*\n|$)+)/g,
c=[],g,h=1;if(null!=(g=/^(\s*\n)/.exec(d)))h+=b(g[0]),f.lastIndex=g[0].length;for(;null!=(g=f.exec(d));)c.push(l(g[1],g[2],h)),h+=b(g[0]);return c};k.prototype.processBlock=function(b,d){var e=this.dialect.block,f=e.__order__;if("__call__"in e)return e.__call__.call(this,b,d);for(var c=0;c<f.length;c++){var g=e[f[c]].call(this,b,d);if(g)return(!L(g)||0<g.length&&!L(g[0]))&&this.debug(f[c],"didn't return a proper array"),g}return[]};k.prototype.processInline=function(b){return this.dialect.inline.__call__.call(this,
String(b))};k.prototype.toTree=function(b,d){var e=b instanceof Array?b:this.split_blocks(b),f=this.tree;try{this.tree=d||this.tree||["markdown"];a:for(;e.length;){var c=this.processBlock(e.shift(),e);if(!c.length)continue a;this.tree.push.apply(this.tree,c)}return this.tree}finally{d&&(this.tree=f)}};k.prototype.debug=function(){var b=Array.prototype.slice.call(arguments);b.unshift(this.debug_indent);"undefined"!==typeof print&&print.apply(print,b);"undefined"!==typeof console&&"undefined"!==typeof console.log&&
console.log.apply(null,b)};k.prototype.loop_re_over_block=function(b,d,e){var f;for(d=d.valueOf();d.length&&null!=(f=b.exec(d));)d=d.substr(f[0].length),e.call(this,f);return d};k.dialects={};k.dialects.Gruber={block:{processBlock:function(){return null},atxHeader:function(b,d){var e=b.match(/^(#{1,6})\s*(.*?)\s*#*\s*(?:\n|$)/);if(e){var f=["header",{level:e[1].length}];Array.prototype.push.apply(f,this.processInline(e[2]));e[0].length<b.length&&d.unshift(l(b.substr(e[0].length),b.trailing,b.lineNumber+
2));return[f]}},setextHeader:function(b,d){var e=b.match(/^(.*)\n([-=])\2\2+(?:\n|$)/);if(e){var f=["header",{level:"="===e[2]?1:2},e[1]];e[0].length<b.length&&d.unshift(l(b.substr(e[0].length),b.trailing,b.lineNumber+2));return[f]}},code:function(b,d){var e=[],f=/^(?: {0,3}\t| {4})(.*)\n?/,c=b.match(f);if(c){a:do if(c=this.loop_re_over_block(f,b.valueOf(),function(b){e.push(b[1])}),c.length){d.unshift(l(c,b.trailing));break a}else if(d.length){c=d[0].match(f);if(!c)break a;e.push(b.trailing.replace(/[^\n]/g,
"").substring(2));b=d.shift()}else break a;while(1);return[["code_block",e.join("\n")]]}},horizRule:function(b,d){var e=b.match(/^(?:([\s\S]*?)\n)?[ \t]*([-_*])(?:[ \t]*\2){2,}[ \t]*(?:\n([\s\S]*))?$/);if(e){var f=[["hr"]];e[1]&&f.unshift.apply(f,this.processBlock(e[1],[]));e[3]&&d.unshift(l(e[3]));return f}},lists:function(){function b(d,e,f,c){if(e)d.push(["para"].concat(f));else{e=d[d.length-1]instanceof Array&&"para"==d[d.length-1][0]?d[d.length-1]:d;c&&1<d.length&&f.unshift(c);for(d=0;d<f.length;d++)c=
f[d],"string"==typeof c&&1<e.length&&"string"==typeof e[e.length-1]?e[e.length-1]+=c:e.push(c)}}function d(b,e){for(var f=RegExp("^("+g+"{"+b+"}.*?\\n?)*$"),c=RegExp("^"+g+"{"+b+"}","gm"),h=[];0<e.length;){f.exec(e[0])&&(f=e.shift(),c=f.replace(c,""),h.push(l(c,f.trailing,f.lineNumber)));break}return h}function e(b,d,f){b=b.list;b=b[b.length-1];b[1]instanceof Array&&"para"==b[1][0]||(d+1==f.length?b.push(["para"].concat(b.splice(1))):(d=b.pop(),b.push(["para"].concat(b.splice(1)),d)))}var f=/[*+-]/,
c=/^( {0,3})([*+-]|\d\.)[ \t]+/,g="(?: {0,3}\\t| {4})";return function(h,m){function q(b){var d=f.exec(b[2])?["bulletlist"]:["numberlist"];u.push({list:d,indent:b[1]});return d}var k=h.match(c);if(k){var u=[],l=q(k),x,L=!1,n=[u[0].list];a:for(;;){var s=h.split(/(?=\n)/),v="",w=0;for(;w<s.length;w++){var y="",A=s[w].replace(/^\n/,function(b){y=b;return""}),k=A.match(RegExp("(?:^("+g+"{0,"+u.length+"} {0,3})([*+-]|\\d\\.)\\s+)|(^"+g+"{0,"+(u.length-1)+"}[ ]{0,4})"));if(void 0!==k[1]){v.length&&(b(x,
L,this.processInline(v),y),L=!1,v="");k[1]=k[1].replace(/ {0,3}\t/g,"    ");var C=Math.floor(k[1].length/4)+1;C>u.length?(l=q(k),x.push(l),x=l[1]=["listitem"]):(u.some(function(b,d){if(b.indent!=k[1])return!1;l=b.list;u.splice(d+1);return!0})||(C++,C<=u.length?(u.splice(C),l=u[C-1].list):(l=q(k),x.push(l))),x=["listitem"],l.push(x));y=""}A.length>k[0].length&&(v+=y+A.substr(k[0].length))}v.length&&(b(x,L,this.processInline(v),y),L=!1,v="");L=d(u.length,m);0<L.length&&(u.forEach(e,this),x.push.apply(x,
this.toTree(L,[])));L=m[0]&&m[0].valueOf()||"";if(L.match(c)||L.match(/^ /)){h=m.shift();if(L=this.dialect.block.horizRule(h,m)){n.push.apply(n,L);break}u.forEach(e,this);L=!0;continue a}break}return n}}}(),blockquote:function(b,d){if(b.match(/^>/m)){var e=[];if(">"!=b[0]){for(var f=b.split(/\n/),c=[];f.length&&">"!=f[0][0];)c.push(f.shift());b=f.join("\n");e.push.apply(e,this.processBlock(c.join("\n"),[]))}for(;d.length&&">"==d[0][0];)f=d.shift(),b+=b.trailing+f,b.trailing=f.trailing;f=b.replace(/^> ?/gm,
"");e.push(this.toTree(f,["blockquote"]));return e}},referenceDefn:function(b,d){var f=/^\s*\[(.*?)\]:\s*(\S+)(?:\s+(?:(['"])(.*?)\3|\((.*?)\)))?\n?/;if(b.match(f)){e(this.tree)||this.tree.splice(1,0,{});var c=e(this.tree);void 0===c.references&&(c.references={});f=this.loop_re_over_block(f,b,function(b){b[2]&&("<"==b[2][0]&&">"==b[2][b[2].length-1])&&(b[2]=b[2].substring(1,b[2].length-1));var d=c.references[b[1].toLowerCase()]={href:b[2]};void 0!==b[4]?d.title=b[4]:void 0!==b[5]&&(d.title=b[5])});
f.length&&d.unshift(l(f,b.trailing));return[]}},para:function(b,d){return[["para"].concat(this.processInline(b))]}}};k.dialects.Gruber.inline={__call__:function(b,d){function e(b){"string"==typeof b&&"string"==typeof f[f.length-1]?f[f.length-1]+=b:f.push(b)}for(var f=[],c,g=RegExp("([\\s\\S]*?)("+(d.source||d)+")","g"),h=0;null!=(c=g.exec(b));){c[1]?e(c[1]):c[1]={length:0};var m;c[2]in this.dialect.inline&&(m=this.dialect.inline[c[2]].call(this,b.substr(c.index+c[1].length),c,f));m=m||[c[2].length,
c[2]];h=m.shift();g.lastIndex+=h-c[2].length;m.forEach(e);h=g.lastIndex}b.length>h&&e(b.substr(h));return f},"\\":function(b){return b.match(/^\\[\\`\*_{}\[\]()#\+.!\-]/)?[2,b[1]]:[1,"\\"]},"![":function(b){var d=b.match(/^!\[(.*?)\][ \t]*\([ \t]*(\S*)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/);return d?(d[2]&&("<"==d[2][0]&&">"==d[2][d[2].length-1])&&(d[2]=d[2].substring(1,d[2].length-1)),d[2]==this.dialect.inline.__call__.call(this,d[2],/\\/)[0],b={alt:d[1],href:d[2]||""},void 0!==d[4]&&(b.title=d[4]),[d[0].length,
["img",b]]):(d=b.match(/^!\[(.*?)\][ \t]*\[(.*?)\]/))?[d[0].length,["img_ref",{alt:d[1],ref:d[2].toLowerCase(),text:d[0]}]]:[2,"!["]},"[":function(b){var d=b.match(/^\[([\s\S]*?)\][ \t]*\([ \t]*(\S+)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/);if(d)return d[2]&&("<"==d[2][0]&&">"==d[2][d[2].length-1])&&(d[2]=d[2].substring(1,d[2].length-1)),d[2]=this.dialect.inline.__call__.call(this,d[2],/\\/)[0],b={href:d[2]||""},void 0!==d[4]&&(b.title=d[4]),b=["link",b],Array.prototype.push.apply(b,this.processInline(d[1])),
[d[0].length,b];if(d=b.match(/^\[([\s\S]*?)\](?: ?\[(.*?)\])?/)){if(void 0===d[2]||""===d[2])d[2]=d[1];b={ref:d[2].toLowerCase(),original:d[0]};b=["link_ref",b];Array.prototype.push.apply(b,this.processInline(d[1]));return[d[0].length,b]}return[1,"["]},"<":function(b){var d;return null!=(d=b.match(/^<(?:((https?|ftp|mailto):[^>]+)|(.*?@.*?\.[a-zA-Z]+))>/))?d[3]?[d[0].length,["link",{href:"mailto:"+d[3]},d[3]]]:"mailto"==d[2]?[d[0].length,["link",{href:d[1]},d[1].substr(7)]]:[d[0].length,["link",{href:d[1]},
d[1]]]:[1,"<"]},"`":function(b){return(b=b.match(/(`+)(([\s\S]*?)\1)/))&&b[2]?[b[1].length+b[2].length,["inlinecode",b[3]]]:[1,"`"]},"  \n":function(b){return[3,["linebreak"]]}};k.dialects.Gruber.inline["**"]=d("strong","**");k.dialects.Gruber.inline.__=d("strong","__");k.dialects.Gruber.inline["*"]=d("em","*");k.dialects.Gruber.inline._=d("em","_");k.buildBlockOrder=function(b){var d=[],e;for(e in b)"__order__"==e||"__call__"==e||d.push(e);b.__order__=d};k.buildInlinePatterns=function(b){var d=[],
e;for(e in b)if("__call__"!=e){var f=e.replace(/([\\.*+?|()\[\]{}])/g,"\\$1").replace(/\n/,"\\n");d.push(1==e.length?f:"(?:"+f+")")}var d=d.join("|"),c=b.__call__;b.__call__=function(b,e){return void 0!=e?c.call(this,b,e):c.call(this,b,d)}};k.subclassDialect=function(b){function d(){}function e(){}d.prototype=b.block;e.prototype=b.inline;return{block:new d,inline:new e}};k.buildBlockOrder(k.dialects.Gruber.block);k.buildInlinePatterns(k.dialects.Gruber.inline);k.dialects.Maruku=k.subclassDialect(k.dialects.Gruber);
k.dialects.Maruku.block.document_meta=function(b,d){if(!(1<b.lineNumber)&&b.match(/^(?:\w+:.*\n)*\w+:.*$/)){e(this.tree)||this.tree.splice(1,0,{});var f=b.split(/\n/);for(p in f){var c=f[p].match(/(\w+):\s*(.*)$/),g=c[1].toLowerCase();this.tree[1][g]=c[2]}return[]}};k.dialects.Maruku.block.block_meta=function(b,d){var f=b.match(/(^|\n) {0,3}\{:\s*((?:\\\}|[^\}])*)\s*\}$/);if(f){var c=g(f[2]);if(""===f[1]){var h=this.tree[this.tree.length-1],f=e(h);if("string"===typeof h)return;f||(f={},h.splice(1,
0,f));for(a in c)f[a]=c[a];return[]}f=b.replace(/\n.*$/,"");h=this.processBlock(f,[]);f=e(h[0]);f||(f={},h[0].splice(1,0,f));for(a in c)f[a]=c[a];return h}};k.dialects.Maruku.block.definition_list=function(b,d){var e=/^((?:[^\s:].*\n)+):\s+((?:\s\S)+)$/,f=["dl"];if(b.match(e)){for(var c=[b];d.length&&e.exec(d[0]);)c.push(d.shift());for(var g=0;g<c.length;++g){for(var h=c[g].match(e),m=h[1].replace(/\n$/,"").split(/\n/),h=h[2].split(/\n:\s+/),q=0;q<m.length;++q)f.push(["dt",m[q]]);for(q=0;q<h.length;++q)f.push(["dd"].concat(this.processInline(h[q].replace(/(\n)\s+/,
"$1"))))}return[f]}};k.dialects.Maruku.inline["{:"]=function(b,d,f){if(!f.length)return[2,"{:"];d=f[f.length-1];if("string"===typeof d)return[2,"{:"];b=b.match(/^\{:\s*((?:\\\}|[^\}])*)\s*\}/);if(!b)return[2,"{:"];f=g(b[1]);var c=e(d);c||(c={},d.splice(1,0,c));for(var h in f)c[h]=f[h];return[b[0].length,""]};k.buildBlockOrder(k.dialects.Maruku.block);k.buildInlinePatterns(k.dialects.Maruku.inline);var L=c.isArray=function(b){return b instanceof Array||"array"===typeof b||Array.isArray(b)};c.renderJsonML=
function(b,d){d=d||{};d.root=d.root||!1;var e=[];if(d.root)e.push(h(b));else{b.shift();for(b.length&&("object"===typeof b[0]&&!(b[0]instanceof Array))&&b.shift();b.length;)e.push(h(b.shift()))}return e.join("\n\n")}})(cd);(function(){function c(b){var e=!1;return function(){if(e)throw Error("Callback was already called.");e=!0;b.apply(d,arguments)}}var b={},d,e;d=this;null!=d&&(e=d.async);b.noConflict=function(){d.async=e;return b};var g=function(b,d){if(b.forEach)return b.forEach(d);for(var e=0;e<
b.length;e+=1)d(b[e],e,b)},f=function(b,d){if(b.map)return b.map(d);var e=[];g(b,function(b,f,c){e.push(d(b,f,c))});return e},h=function(b,d,e){if(b.reduce)return b.reduce(d,e);g(b,function(b,f,c){e=d(e,b,f,c)});return e},m=function(b){if(Object.keys)return Object.keys(b);var d=[],e;for(e in b)b.hasOwnProperty(e)&&d.push(e);return d};"undefined"===typeof process||!process.nextTick?(b.nextTick="function"===typeof setImmediate?function(b){setImmediate(b)}:function(b){setTimeout(b,0)},b.setImmediate=
b.nextTick):(b.nextTick=process.nextTick,b.setImmediate="undefined"!==typeof setImmediate?setImmediate:b.nextTick);b.each=function(b,d,e){e=e||function(){};if(!b.length)return e();var f=0;g(b,function(g){d(g,c(function(d){d?(e(d),e=function(){}):(f+=1,f>=b.length&&e(null))}))})};b.forEach=b.each;b.eachSeries=function(b,d,e){e=e||function(){};if(!b.length)return e();var f=0,c=function(){d(b[f],function(d){d?(e(d),e=function(){}):(f+=1,f>=b.length?e(null):c())})};c()};b.forEachSeries=b.eachSeries;b.eachLimit=
function(b,d,e,f){q(d).apply(null,[b,e,f])};b.forEachLimit=b.eachLimit;var q=function(b){return function(d,e,f){f=f||function(){};if(!d.length||0>=b)return f();var c=0,g=0,h=0;(function Sb(){if(c>=d.length)return f();for(;h<b&&g<d.length;)g+=1,h+=1,e(d[g-1],function(b){b?(f(b),f=function(){}):(c+=1,h-=1,c>=d.length?f():Sb())})})()}},k=function(d){return function(){var e=Array.prototype.slice.call(arguments);return d.apply(null,[b.each].concat(e))}},l=function(b,d){return function(){var e=Array.prototype.slice.call(arguments);
return d.apply(null,[q(b)].concat(e))}},L=function(d){return function(){var e=Array.prototype.slice.call(arguments);return d.apply(null,[b.eachSeries].concat(e))}},n=function(b,d,e,c){var g=[];d=f(d,function(b,d){return{index:d,value:b}});b(d,function(b,d){e(b.value,function(e,f){g[b.index]=f;d(e)})},function(b){c(b,g)})};b.map=k(n);b.mapSeries=L(n);b.mapLimit=function(b,d,e,f){return l(d,n)(b,e,f)};b.reduce=function(d,e,f,c){b.eachSeries(d,function(b,d){f(e,b,function(b,f){e=f;d(b)})},function(b){c(b,
e)})};b.inject=b.reduce;b.foldl=b.reduce;b.reduceRight=function(d,e,c,g){d=f(d,function(b){return b}).reverse();b.reduce(d,e,c,g)};b.foldr=b.reduceRight;var B=function(b,d,e,c){var g=[];d=f(d,function(b,d){return{index:d,value:b}});b(d,function(b,d){e(b.value,function(e){e&&g.push(b);d()})},function(b){c(f(g.sort(function(b,d){return b.index-d.index}),function(b){return b.value}))})};b.filter=k(B);b.filterSeries=L(B);b.select=b.filter;b.selectSeries=b.filterSeries;B=function(b,d,e,c){var g=[];d=f(d,
function(b,d){return{index:d,value:b}});b(d,function(b,d){e(b.value,function(e){e||g.push(b);d()})},function(b){c(f(g.sort(function(b,d){return b.index-d.index}),function(b){return b.value}))})};b.reject=k(B);b.rejectSeries=L(B);B=function(b,d,e,f){b(d,function(b,d){e(b,function(e){e?(f(b),f=function(){}):d()})},function(b){f()})};b.detect=k(B);b.detectSeries=L(B);b.some=function(d,e,f){b.each(d,function(b,d){e(b,function(b){b&&(f(!0),f=function(){});d()})},function(b){f(!1)})};b.any=b.some;b.every=
function(d,e,f){b.each(d,function(b,d){e(b,function(b){b||(f(!1),f=function(){});d()})},function(b){f(!0)})};b.all=b.every;b.sortBy=function(d,e,c){b.map(d,function(b,d){e(b,function(e,f){e?d(e):d(null,{value:b,criteria:f})})},function(b,d){if(b)return c(b);c(null,f(d.sort(function(b,d){var e=b.criteria,f=d.criteria;return e<f?-1:e>f?1:0}),function(b){return b.value}))})};b.auto=function(d,e){e=e||function(){};var f=m(d);if(!f.length)return e(null);var c={},q=[],k=function(b){q.unshift(b)},u=function(){g(q.slice(0),
function(b){b()})};k(function(){m(c).length===f.length&&(e(null,c),e=function(){})});g(f,function(f){var l=d[f]instanceof Function?[d[f]]:d[f],x=function(d){var h=Array.prototype.slice.call(arguments,1);1>=h.length&&(h=h[0]);if(d){var q={};g(m(c),function(b){q[b]=c[b]});q[f]=h;e(d,q);e=function(){}}else c[f]=h,b.setImmediate(u)},L=l.slice(0,Math.abs(l.length-1))||[],H=function(){return h(L,function(b,d){return b&&c.hasOwnProperty(d)},!0)&&!c.hasOwnProperty(f)};if(H())l[l.length-1](x,c);else{var B=
function(){if(H()){a:for(var b=B,d=0;d<q.length;d+=1)if(q[d]===b){q.splice(d,1);break a}l[l.length-1](x,c)}};k(B)}})};b.waterfall=function(d,e){e=e||function(){};if(d.constructor!==Array)return e(Error("First argument to waterfall must be an array of functions"));if(!d.length)return e();var f=function(d){return function(c){if(c)e.apply(null,arguments),e=function(){};else{var g=Array.prototype.slice.call(arguments,1),h=d.next();h?g.push(f(h)):g.push(e);b.setImmediate(function(){d.apply(null,g)})}}};
f(b.iterator(d))()};var H=function(b,d,e){e=e||function(){};if(d.constructor===Array)b.map(d,function(b,d){b&&b(function(b){var e=Array.prototype.slice.call(arguments,1);1>=e.length&&(e=e[0]);d.call(null,b,e)})},e);else{var f={};b.each(m(d),function(b,e){d[b](function(d){var c=Array.prototype.slice.call(arguments,1);1>=c.length&&(c=c[0]);f[b]=c;e(d)})},function(b){e(b,f)})}};b.parallel=function(d,e){H({map:b.map,each:b.each},d,e)};b.parallelLimit=function(b,d,e){H({map:l(d,n),each:q(d)},b,e)};b.series=
function(d,e){e=e||function(){};if(d.constructor===Array)b.mapSeries(d,function(b,d){b&&b(function(b){var e=Array.prototype.slice.call(arguments,1);1>=e.length&&(e=e[0]);d.call(null,b,e)})},e);else{var f={};b.eachSeries(m(d),function(b,e){d[b](function(d){var c=Array.prototype.slice.call(arguments,1);1>=c.length&&(c=c[0]);f[b]=c;e(d)})},function(b){e(b,f)})}};b.iterator=function(b){var d=function(e){var f=function(){b.length&&b[e].apply(null,arguments);return f.next()};f.next=function(){return e<
b.length-1?d(e+1):null};return f};return d(0)};b.apply=function(b){var d=Array.prototype.slice.call(arguments,1);return function(){return b.apply(null,d.concat(Array.prototype.slice.call(arguments)))}};B=function(b,d,e,f){var c=[];b(d,function(b,d){e(b,function(b,e){c=c.concat(e||[]);d(b)})},function(b){f(b,c)})};b.concat=k(B);b.concatSeries=L(B);b.whilst=function(d,e,f){d()?e(function(c){if(c)return f(c);b.whilst(d,e,f)}):f()};b.doWhilst=function(d,e,f){d(function(c){if(c)return f(c);e()?b.doWhilst(d,
e,f):f()})};b.until=function(d,e,f){d()?f():e(function(c){if(c)return f(c);b.until(d,e,f)})};b.doUntil=function(d,e,f){d(function(c){if(c)return f(c);e()?f():b.doUntil(d,e,f)})};b.queue=function(d,e){function f(d,c,h,m){c.constructor!==Array&&(c=[c]);g(c,function(f){f={data:f,callback:"function"===typeof m?m:null};h?d.tasks.unshift(f):d.tasks.push(f);d.saturated&&d.tasks.length===e&&d.saturated();b.setImmediate(d.process)})}void 0===e&&(e=1);var h=0,m={tasks:[],concurrency:e,saturated:null,empty:null,
drain:null,push:function(b,d){f(m,b,!1,d)},unshift:function(b,d){f(m,b,!0,d)},process:function(){if(h<m.concurrency&&m.tasks.length){var b=m.tasks.shift();m.empty&&0===m.tasks.length&&m.empty();h+=1;var e=c(function(){h-=1;b.callback&&b.callback.apply(b,arguments);m.drain&&0===m.tasks.length+h&&m.drain();m.process()});d(b.data,e)}},length:function(){return m.tasks.length},running:function(){return h}};return m};b.cargo=function(d,e){var c=!1,h=[],m={tasks:h,payload:e,saturated:null,empty:null,drain:null,
push:function(d,f){d.constructor!==Array&&(d=[d]);g(d,function(b){h.push({data:b,callback:"function"===typeof f?f:null});m.saturated&&h.length===e&&m.saturated()});b.setImmediate(m.process)},process:function z(){if(!c)if(0===h.length)m.drain&&m.drain();else{var b="number"===typeof e?h.splice(0,e):h.splice(0),q=f(b,function(b){return b.data});m.empty&&m.empty();c=!0;d(q,function(){c=!1;var d=arguments;g(b,function(b){b.callback&&b.callback.apply(null,d)});z()})}},length:function(){return h.length},
running:function(){return c}};return m};B=function(b){return function(d){var e=Array.prototype.slice.call(arguments,1);d.apply(null,e.concat([function(d){var e=Array.prototype.slice.call(arguments,1);"undefined"!==typeof console&&(d?console.error&&console.error(d):console[b]&&g(e,function(d){console[b](d)}))}]))}};b.log=B("log");b.dir=B("dir");b.memoize=function(b,d){var e={},f={};d=d||function(b){return b};var c=function(){var c=Array.prototype.slice.call(arguments),g=c.pop(),h=d.apply(null,c);h in
e?g.apply(null,e[h]):h in f?f[h].push(g):(f[h]=[g],b.apply(null,c.concat([function(){e[h]=arguments;var b=f[h];delete f[h];for(var d=0,c=b.length;d<c;d++)b[d].apply(null,arguments)}])))};c.memo=e;c.unmemoized=b;return c};b.unmemoize=function(b){return function(){return(b.unmemoized||b).apply(null,arguments)}};b.times=function(d,e,f){for(var c=[],g=0;g<d;g++)c.push(g);return b.map(c,e,f)};b.timesSeries=function(d,e,f){for(var c=[],g=0;g<d;g++)c.push(g);return b.mapSeries(c,e,f)};b.compose=function(){var d=
Array.prototype.reverse.call(arguments);return function(){var e=this,f=Array.prototype.slice.call(arguments),c=f.pop();b.reduce(d,f,function(b,d,f){d.apply(e,b.concat([function(){var b=arguments[0],d=Array.prototype.slice.call(arguments,1);f(b,d)}]))},function(b,d){c.apply(e,[b].concat(d))})}};B=function(b,d){var e=function(){var e=this,f=Array.prototype.slice.call(arguments),c=f.pop();return b(d,function(b,d){b.apply(e,f.concat([d]))},c)};if(2<arguments.length){var f=Array.prototype.slice.call(arguments,
2);return e.apply(this,f)}return e};b.applyEach=k(B);b.applyEachSeries=L(B);b.forever=function(b,d){function e(f){if(f){if(d)return d(f);throw f;}b(e)}e()};"undefined"!==typeof define&&define.amd?define([],function(){return b}):"undefined"!==typeof module&&module.exports?module.exports=b:d.async=b})();(function(c){c.fn.dragscrollable=function(b){var d=c.extend({acceptPropagatedEvent:!0,preventDefault:!0,fxIgnore:function(b){return!1}},b||{}),e={mouseDownHandler:function(b){if(!b.data.fxIgnore(b)){if(1!=
b.which||!b.data.acceptPropagatedEvent&&b.target!=this)return!1;b.data.lastCoord={left:b.clientX,top:b.clientY};c.event.add(document,"mouseup",e.mouseUpHandler,b.data);c.event.add(document,"mousemove",e.mouseMoveHandler,b.data);if(b.data.preventDefault)return b.preventDefault(),!1}},mouseMoveHandler:function(b){var d=b.clientX-b.data.lastCoord.left,e=b.clientY-b.data.lastCoord.top;b.data.scrollable.scrollLeft(b.data.scrollable.scrollLeft()-d);b.data.scrollable.scrollTop(b.data.scrollable.scrollTop()-
e);b.data.lastCoord={left:b.clientX,top:b.clientY};if(b.data.preventDefault)return b.preventDefault(),!1},mouseUpHandler:function(b){c.event.remove(document,"mousemove",e.mouseMoveHandler);c.event.remove(document,"mouseup",e.mouseUpHandler);if(b.data.preventDefault)return b.preventDefault(),!1}};this.each(function(){var b={scrollable:c(this),acceptPropagatedEvent:d.acceptPropagatedEvent,preventDefault:d.preventDefault,fxIgnore:d.fxIgnore};c(this).bind("mousedown",b,e.mouseDownHandler)})}})(jQuery);
var na,G=[].slice;na=function(){var c,b,d,e,g,f,h;e=2<=arguments.length?G.call(arguments,0,c=arguments.length-1):(c=0,[]);c=arguments[c++];g=0;for(f=e.length;g<f;g++)for(b in d=e[g],h=d.prototype,h)d=h[b],c.prototype[b]=d;return c};"undefined"!==typeof module&&null!==module&&(module.exports.mixin=na);var jb,G=[].slice,D=[].indexOf||function(c){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===c)return b;return-1};async.assembly=function(c,b){var d;d=_.map(c,function(b){return function(){var d,
f,c;d=2<=arguments.length?G.call(arguments,0,c=arguments.length-1):(c=0,[]);f=arguments[c++];return b.apply(null,[function(){var b,e;b=arguments[0];e=2<=arguments.length?G.call(arguments,1):[];0===e.length&&(e=d);return f.apply(null,[b].concat(G.call(e)))}].concat(G.call(d)))}});return async.waterfall(d,b)};_.mixin({mapObj:_.compose(_.object,_.map),chainOn:function(c){var b;b={};return _.extend(b,_.mapObj(_.functions(c),function(d){return[d,function(){c[d].apply(c,arguments);return b}]}))},partialMethod:function(){var c,
b,d;d=arguments[0];b=arguments[1];c=3<=arguments.length?G.call(arguments,2):[];b=_.bind(d[b],d);return _.partial.apply(_,[b].concat(G.call(c)))}});_.count=function(c,b){var d,e,g,f;null==b&&(b=function(){return!0});g=d=0;for(f=c.length;g<f;g++)e=c[g],b(e)&&d++;return d};jb={minSpacing:0.125,spacing:16384,maxPos:0x4000000000000,lowerCaseFirstChar:function(c){return c[0].toLowerCase()+c.substr(1)},checkId:function(c){return"ObjectID"===(null!=c?c.constructor.name:void 0)||24===(null!=c?c.length:void 0)&&
/^[a-f0-9]*$/.test(c)},capitalize:function(c){return _.isString(c)&&!_.isEmpty(c)?c[0].toUpperCase()+c.substr(1):c},pluralize:function(c){return""+c+"s"},formatCount:function(c,b,d){if(!c&&!d)return"";b=jb.formatNoun(c,b);return""+c+" "+b},formatNoun:function(c,b){1!==c&&(b+="s");return b},imageFileExtensions:"png gif jpg jpeg bmp ico".split(" "),extensionIsImage:function(c){var b,d;return b=null!=(d=jb.fileExt(c))?d.toLowerCase():void 0,0<=D.call(jb.imageFileExtensions,b)},fileExt:function(c){var b,
d,e;return null!=(b=null!=(d=/\.([a-z0-9]+)$/i.exec(c))?null!=(e=d[1])?e.toLowerCase():void 0:void 0)?b:null},filenameFromUrl:function(c){var b;return null!=(b=/\/([^\/]+?)(?:\#|\?|$)/.exec(c))?b[1]:void 0},pathFromUrl:function(c){var b;return null!=(b=/^([^?\#]+)/.exec(c))?b[1]:void 0},traverse:function(c,b){var d,e,g;if(_.isEmpty(b)||!c)return c;if(_.isArray(b)){e=0;for(g=b.length;e<g&&!(d=b[e],c=c[d],!c);e++);return c}return c[b]},isSimpleObject:function(c){return c&&!_.isArray(c)&&!_.isDate(c)&&
!c.prototype&&"object"===typeof c},escapeForRegex:function(c){return null!=c?c.replace(/[-[\]{}()*+?.,\\\/^$|#\s]/g,"\\$&"):void 0},hasProtocol:function(c){return/^\s*[a-z]+:/i.test(c)},makeSlug:function(c,b){var d;null==b&&(b="-");c&&(d=jb.removeAccents(c.toLowerCase()).replace(/[^a-z0-9]+/ig,b).replace(RegExp("^"+b+"|"+b+"$","g"),""),128<d.length&&(d=d.substr(0,128)));return d||b},removeAccents:function(c){return c.replace(/[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5\u0101\u0103\u0105]/g,"a").replace(/\u00e6/g,
"ae").replace(/[\u00e7\u0107\u0109\u010b\u010d]/g,"c").replace(/[\u010f\u0111]/g,"d").replace(/[\u00e8\u00e9\u00ea\u00eb\u0113\u0115\u0117\u0119\u011b]/g,"e").replace(/[\u011d\u011f\u0121\u0123]/g,"g").replace(/[\u0125\u0127]/g,"h").replace(/[\u00ec\u00ed\u00ee\u00ef\u0129\u012b\u012d\u012f\u0131]/g,"i").replace(/[\u00f1\u0144\u0146\u0148\u0149\u014b]/g,"n").replace(/[\u00f2\u00f3\u00f4\u00f5\u00f6\u014d\u014f\u0151]/g,"o").replace(/\u0153/g,"oe").replace(/[\u015b\u015d\u015f\u0161]/g,"s").replace(/\u00df/g,
"ss").replace(/[\u00f9\u00fa\u00fb\u00fc\u0169\u016b\u016d\u016f\u0171\u0173]/g,"u").replace(/[\u00fd\u00ff]/g,"y")},isShortId:function(c){return/^[0-9]{1,8}$/.test(c)},isShortLink:function(c){return _.isString(c)&&/^[a-zA-Z0-9]{8}$/.test(c)},isValidCallback:function(c){return/^[$a-z_][$a-z0-9_\.]*$/i.test(c)},parseDate:function(c){return Date.parse(c)},getMs:function(c){var b,d,e,g,f,h,m;b=c.days;d=c.hours;e=c.minutes;h=c.seconds;f=c.ms;m=c.years;g=c.months;c=c.weeks;null==b&&(b=0);null==d&&(d=0);
null==e&&(e=0);null==h&&(h=0);null==f&&(f=0);m&&(b+=365*m);g&&(b+=30*g);c&&(b+=7*c);e+=60*(d+24*b);return f+=1E3*(h+60*e)},getSeconds:function(c){return this.getMs(c)/1E3},dateAfter:function(c){var b,d;b=null!=(d=null!=c?c.date:void 0)?d:new Date;return new Date(b.getTime()+this.getMs(c))},dateBefore:function(c){var b,d;b=null!=(d=null!=c?c.date:void 0)?d:new Date;return new Date(b.getTime()-this.getMs(c))},compareMemberType:function(c,b,d,e){var g;null==e&&(e={});e=e.mode;null==e&&(e="standard");
switch(e){case "members":g=[["normal","admin"]];break;case "commentDelete":g=[["normal","org"],["admin"]];break;default:g=[["org"],["normal"],["admin"]]}e=function(b){var d,e,q,k;e=c.getMemberType(b);d=q=0;for(k=g.length;q<k;d=++q)if(b=g[d],0<=D.call(b,e))return d;return-1};b=e(b);d=e(d);return b>d?1:b<d?-1:0},isValidSearch:function(c){return 2<=(null!=c?c.length:void 0)||this.isShortId(c)},regexCardNumber:/\#(\d{1,7})(?=$|\s|[;:,.!?\)\}\]\<\>])/,regexLink:/\b((?:[\w-]+:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]|(\(([^\s()<>]|\([^\s()<>]+\))+\)))*\))+(?:\(([^\s()<>]|(\(([^\s()<>]|\([^\s()<>]+\))+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019])|[a-z0-9.\-]+[.](?:com|net|org|edu|gov|mil|co\.[a-z]{2})\b)/gi,
cleanLink:function(c){c.match(/^([\w-]+):\/\//)||(c="http://"+c);return c},idToDate:function(c){return new Date(1E3*parseInt(null!=c?c.substr(0,8):void 0,16))},dateToId:function(c){return Math.floor(c.getTime()/1E3).toString(16)+"0000000000000000"},separateLargeNum:function(c,b){null==b&&(b=",");return c.toString().replace(/\B(?=(\d{3})+(?!\d))/g,b)},shortenLargeNum:function(c){var b,d,e,g;d=["","k","m"];e=0;for(g=d.length;e<g;e++){b=d[e];if(1050>c)break;c/=1E3}return(Math.round(10*c)/10).toString()+
b},mapping:function(c,b,d){return async.map(c,b,function(b,g){var f,h,m,q,k;if(b)return d(b);m={};f=q=0;for(k=c.length;q<k;f=++q)h=c[f],m[h]=g[f];return d(null,m)})},queued:function(c,b){var d;d=async.queue(function(b,d){var f;f=b.shift();b.push(d);return c.apply(f,b)},b);return function(){var b,c;b=2<=arguments.length?G.call(arguments,0,c=arguments.length-1):(c=0,[]);c=arguments[c++];b.unshift(this);_.isFunction(c)||(b.push(c),c=function(){});return d.push([b],c)}},labelNames:"green yellow orange red purple blue".split(" "),
preferScaledPreviews:function(c){var b;b=_.filter(c,function(b){return b.scaled});return _.isEmpty(b)?c:b},smallestPreviewBiggerThan:function(c,b,d){var e;null==c&&(c=[]);null==b&&(b=0);null==d&&(d=0);e={width:b,height:d};c=_.filter(this.preferScaledPreviews(c),function(b){return _.all(_.keys(e),function(d){return b[d]>=e[d]})});return this.smallestPreview(c)},previewBetween:function(c,b,d,e,g){null==c&&(c=[]);c=_.filter(this.preferScaledPreviews(c),function(f){var c,m;return b<=(c=f.width)&&c<=e&&
d<=(m=f.height)&&m<=g});return this.biggestPreview(c)},biggestPreview:function(c){return 0===c.length?null:_.max(this.preferScaledPreviews(c),function(b){return Math.min(b.width,b.height)})},smallestPreview:function(c){return 0===c.length?null:_.min(this.preferScaledPreviews(c),function(b){return Math.max(b.width,b.height)})},rotateArr:function(c,b){return _.flatten([c.slice(-b),c.slice(0,-b)],!0)},humanReadableList:function(c){var b;if(2>c.length)return null!=(b=null!=c?c[0]:void 0)?b:"";if(2===
c.length)return c[0]+" and "+c[1];c[c.length-1]="and "+c[c.length-1];return c.join(", ")},isNonPushstateAndroid:function(c){return/android(\s)*[3-4]\.[0-1][^0-9]/i.test(c)},strRepeat:function(c,b){return Array(b+1).join(c)},md5:function(){var c,b,d,e,g,f,h,m,q,k,l,L,n,B;e=0;L=function(d){return c(b(k(d),8*d.length))};l=function(b){var d,f,c,g;try{e}catch(h){e=0}d=e?"0123456789ABCDEF":"0123456789abcdef";c="";for(f=0;f<b.length;)g=b.charCodeAt(f),c+=d.charAt(g>>>4&15)+d.charAt(g&15),f++;return c};B=
function(b){var d,e,f,c;e="";for(d=-1;++d<b.length;)f=b.charCodeAt(d),c=d+1<b.length?b.charCodeAt(d+1):0,55296<=f&&(56319>=f&&56320<=c&&57343>=c)&&(f=65536+((f&1023)<<10)+(c&1023),d++),127>=f?e+=String.fromCharCode(f):2047>=f?e+=String.fromCharCode(192|f>>>6&31,128|f&63):65535>=f?e+=String.fromCharCode(224|f>>>12&15,128|f>>>6&63,128|f&63):2097151>=f&&(e+=String.fromCharCode(240|f>>>18&7,128|f>>>12&63,128|f>>>6&63,128|f&63));return e};k=function(b){var d,e;e=Array(b.length>>2);for(d=0;d<e.length;)e[d]=
0,d++;for(d=0;d<8*b.length;)e[d>>5]|=(b.charCodeAt(d/8)&255)<<d%32,d+=8;return e};c=function(b){var d,e;e="";for(d=0;d<32*b.length;)e+=String.fromCharCode(b[d>>5]>>>d%32&255),d+=8;return e};b=function(b,d){var e,c,g,k,u,l,x,L,B;b[d>>5]|=128<<d%32;b[(d+64>>>9<<4)+14]=d;e=1732584193;c=-271733879;g=-1732584194;k=271733878;for(u=0;u<b.length;)l=e,x=c,L=g,B=k,e=f(e,c,g,k,b[u+0],7,-680876936),k=f(k,e,c,g,b[u+1],12,-389564586),g=f(g,k,e,c,b[u+2],17,606105819),c=f(c,g,k,e,b[u+3],22,-1044525330),e=f(e,c,g,
k,b[u+4],7,-176418897),k=f(k,e,c,g,b[u+5],12,1200080426),g=f(g,k,e,c,b[u+6],17,-1473231341),c=f(c,g,k,e,b[u+7],22,-45705983),e=f(e,c,g,k,b[u+8],7,1770035416),k=f(k,e,c,g,b[u+9],12,-1958414417),g=f(g,k,e,c,b[u+10],17,-42063),c=f(c,g,k,e,b[u+11],22,-1990404162),e=f(e,c,g,k,b[u+12],7,1804603682),k=f(k,e,c,g,b[u+13],12,-40341101),g=f(g,k,e,c,b[u+14],17,-1502002290),c=f(c,g,k,e,b[u+15],22,1236535329),e=h(e,c,g,k,b[u+1],5,-165796510),k=h(k,e,c,g,b[u+6],9,-1069501632),g=h(g,k,e,c,b[u+11],14,643717713),c=
h(c,g,k,e,b[u+0],20,-373897302),e=h(e,c,g,k,b[u+5],5,-701558691),k=h(k,e,c,g,b[u+10],9,38016083),g=h(g,k,e,c,b[u+15],14,-660478335),c=h(c,g,k,e,b[u+4],20,-405537848),e=h(e,c,g,k,b[u+9],5,568446438),k=h(k,e,c,g,b[u+14],9,-1019803690),g=h(g,k,e,c,b[u+3],14,-187363961),c=h(c,g,k,e,b[u+8],20,1163531501),e=h(e,c,g,k,b[u+13],5,-1444681467),k=h(k,e,c,g,b[u+2],9,-51403784),g=h(g,k,e,c,b[u+7],14,1735328473),c=h(c,g,k,e,b[u+12],20,-1926607734),e=m(e,c,g,k,b[u+5],4,-378558),k=m(k,e,c,g,b[u+8],11,-2022574463),
g=m(g,k,e,c,b[u+11],16,1839030562),c=m(c,g,k,e,b[u+14],23,-35309556),e=m(e,c,g,k,b[u+1],4,-1530992060),k=m(k,e,c,g,b[u+4],11,1272893353),g=m(g,k,e,c,b[u+7],16,-155497632),c=m(c,g,k,e,b[u+10],23,-1094730640),e=m(e,c,g,k,b[u+13],4,681279174),k=m(k,e,c,g,b[u+0],11,-358537222),g=m(g,k,e,c,b[u+3],16,-722521979),c=m(c,g,k,e,b[u+6],23,76029189),e=m(e,c,g,k,b[u+9],4,-640364487),k=m(k,e,c,g,b[u+12],11,-421815835),g=m(g,k,e,c,b[u+15],16,530742520),c=m(c,g,k,e,b[u+2],23,-995338651),e=q(e,c,g,k,b[u+0],6,-198630844),
k=q(k,e,c,g,b[u+7],10,1126891415),g=q(g,k,e,c,b[u+14],15,-1416354905),c=q(c,g,k,e,b[u+5],21,-57434055),e=q(e,c,g,k,b[u+12],6,1700485571),k=q(k,e,c,g,b[u+3],10,-1894986606),g=q(g,k,e,c,b[u+10],15,-1051523),c=q(c,g,k,e,b[u+1],21,-2054922799),e=q(e,c,g,k,b[u+8],6,1873313359),k=q(k,e,c,g,b[u+15],10,-30611744),g=q(g,k,e,c,b[u+6],15,-1560198380),c=q(c,g,k,e,b[u+13],21,1309151649),e=q(e,c,g,k,b[u+4],6,-145523070),k=q(k,e,c,g,b[u+11],10,-1120210379),g=q(g,k,e,c,b[u+2],15,718787259),c=q(c,g,k,e,b[u+9],21,
-343485551),e=n(e,l),c=n(c,x),g=n(g,L),k=n(k,B),u+=16;return[e,c,g,k]};g=function(b,e,f,c,g,h){return n(d(n(n(e,b),n(c,h)),g),f)};f=function(b,d,e,f,c,h,m){return g(d&e|~d&f,b,d,c,h,m)};h=function(b,d,e,f,c,h,m){return g(d&f|e&~f,b,d,c,h,m)};m=function(b,d,e,f,c,h,m){return g(d^e^f,b,d,c,h,m)};q=function(b,d,e,f,c,h,m){return g(e^(d|~f),b,d,c,h,m)};n=function(b,d){var e;e=(b&65535)+(d&65535);return(b>>16)+(d>>16)+(e>>16)<<16|e&65535};d=function(b,d){return b<<d|b>>>32-d};return function(b){return l(L(B(b)))}}()};
"undefined"!==typeof module&&null!==module&&(module.exports=jb);var ab,Ee;ab=null!=(Ee="undefined"!==typeof module&&null!==module?module.exports:void 0)?Ee:{};ab.Server=function(){function c(b){var d;if(!b)return null;b=b.split(".");if(0<b.length){var e,c,f;f=[];e=0;for(c=b.length;e<c;e++)d=b[e],f.push(parseInt(d,10)||0);this.parts=f}else this.parts=[0]}c.prototype.toString=function(){return this.parts.join(".")};c.prototype.toJSON=function(){return this.toString()};c.prototype.lessThan=function(b){return(b=
this.compareTo(b))&&0>b};c.prototype.greaterThan=function(b){return(b=this.compareTo(b))&&0<b};c.prototype.equalTo=function(b){return(b=this.compareTo(b))&&0===b};c.prototype.compareTo=function(b){var d,e,c,f,h;if(_.isString(b))b=new ab.Server(b);else if(!(b instanceof ab.Server))return null;d=Math.max(this.parts.length,b.parts.length);h=_.zip(this.parts,b.parts);c=0;for(f=h.length;c<f;c++){e=h[c];b=e[0];e=e[1];null==b&&(b=0);null==e&&(e=0);if(b>e)return d;if(e>b)return-d;d--}return 0};c.compareStringVersions=
function(b,d){return(new ab.Server(b)).compareTo(d)};c.prototype.supports=function(b){var d;d=b.minServerVersion;b=b.maxServerVersion;return(!d||this.greaterThan(d))&&(!b||this.lessThan(b))};return c}();ab.Client=function(){function c(b){var d;null==b&&(b={});this.head=null!=(d=b.head)?d:"dev";this.version=parseInt(b.version)||0;this.patch=parseInt(b.patch)||0;this.minServerVersion=new ab.Server(b.minServerVersion);this.maxServerVersion=new ab.Server(b.maxServerVersion)}c.prototype.toString=function(){return""+
this.head+"-"+this.fullVersion()};c.prototype.toJSON=function(){return this.toString()};c.prototype.fullVersion=function(){return _.compact([this.version,this.patch]).join(".")||0};return c}();if("function"===typeof require)var l=require("./sharedUtil.coffee"),kb=require("./sharedDate.coffee").getDateDeltaString,Ja=require("../server/trelloMarkdownFormatters").TFM;var Ab,k=function(c,b){return function(){return c.apply(b,arguments)}};Ab=function(){function c(b){null==b&&(b={});this.orderEntityList=
k(this.orderEntityList,this);this.attachmentPreviewEntity=k(this.attachmentPreviewEntity,this);this.attachmentEntity=k(this.attachmentEntity,this);this.labelEntity=k(this.labelEntity,this);this.commentEntity=k(this.commentEntity,this);this.checkItemEntity=k(this.checkItemEntity,this);this.checklistEntity=k(this.checklistEntity,this);this.listEntity=k(this.listEntity,this);this.organizationEntity=k(this.organizationEntity,this);this.boardEntity=k(this.boardEntity,this);this.cardEntity=k(this.cardEntity,
this);this._getNameForBoard=k(this._getNameForBoard,this);this.relDateEntity=k(this.relDateEntity,this);this.textEntity=k(this.textEntity,this);this.memberEntity=k(this.memberEntity,this);this.getOrganizationUrl=k(this.getOrganizationUrl,this);this.getBoardUrl=k(this.getBoardUrl,this);this.getCardUrl=k(this.getCardUrl,this);this.makeFullUrl=k(this.makeFullUrl,this);this.fullUrls=b.fullUrls;this.domain=b.domain}var b;c.prototype.getId=function(b){var e,c;return null!=(e=null!=(c=b.id)?c:b._id)?e.toString():
void 0};c.prototype.makeFullUrl=function(b){return this.fullUrls?""+this.domain+"/"+b:"/"+b};b=function(b){return null!=b&&b.toJSON?b.toJSON():b};c.prototype.getCardUrl=function(d,e){d=b(d);e=b(e);return e.shortLink?this.makeFullUrl("c/"+e.shortLink+"/"+e.idShort+"-"+l.makeSlug(e.name)):e.idShort?this.makeFullUrl("card/"+l.makeSlug(e.name)+"/"+this.getId(d)+"/"+e.idShort):this.makeFullUrl("card/board/"+l.makeSlug(e.name)+"/"+this.getId(d)+"/"+this.getId(e))};c.prototype.getBoardUrl=function(d){d=
b(d);return d.shortLink?this.makeFullUrl("b/"+d.shortLink+"/"+l.makeSlug(d.name)):this.makeFullUrl("board/"+l.makeSlug(d.name)+"/"+this.getId(d))};c.prototype.getOrganizationUrl=function(b){return this.makeFullUrl(this.getId(b))};c.prototype.getMember=function(b){throw Error("not implemented");};c.prototype.getDateMs=function(b){throw Error("not implemented");};c.prototype.getBoard=function(b){return{}};c.prototype.memberEntity=function(d){var e;e=b(this.getMember(d));return!e?{type:"member",_id:""+
this.idAction+"_"+d}:{type:"member",_id:""+this.idAction+"_"+e._id,id:this.getId(e),avatarHash:e.avatarHash,gravatarHash:e.gravatarHash,initials:e.initials,fullName:e.fullName,username:e.username}};c.prototype.textEntity=function(b,e,c){null==c&&(c=!1);b={type:"text",_id:""+this.idAction+"_"+b,text:b};c&&(b.hideIfContext=!0,b.idContext=e);return b};c.prototype.relDateEntity=function(b,e){var c,f;null==e&&(e="");c=(new Date(b)).getTime();f=new Date;return{type:"relDate",_id:""+this.idAction+"_"+b,
text:e,date:b,current:""+(c>f?"is":"was")+" "+e+" "+kb(c,f,{timezoneAbbreviation:b.timezoneAbbreviation})}};c.prototype._getNameForBoard=function(b){var e,c;if(b&&null!=b.id&&null==b.name)return _.extend(b,null!=(e=null!=(c=this.getBoard(b.id))?c.toJSON():void 0)?e:{})};c.prototype.cardEntity=function(b,e,c){null==c&&(c=!1);c=_.extend({type:"card",hideIfContext:c,_id:""+this.idAction+"_"+b.id},b);return e?(this._getNameForBoard(e),_.extend(c,{url:this.getCardUrl(e,b)})):c};c.prototype.boardEntity=
function(b){this._getNameForBoard(b);return null!=(null!=b?b.name:void 0)?_.extend({type:"board",url:this.getBoardUrl(b),_id:""+this.idAction+"_"+b.id},b):this.textEntity("another board")};c.prototype.organizationEntity=function(b){return _.extend({type:"organization",url:this.getOrganizationUrl(b),_id:""+this.idAction+"_"+b.id},b)};c.prototype.listEntity=function(b,e){var c;c=""+this.idAction+"_"+b.id;e&&(c+="_"+e);return _.extend({type:"list",_id:c},b)};c.prototype.checklistEntity=function(b){return _.extend({type:"checklist",
_id:""+this.idAction+"_"+b.id},b)};c.prototype.checkItemEntity=function(b,e){var c;c={type:"checkItem",_id:""+this.idAction+"_"+b.id,nameHtml:Ja.checkItems.format(b.name,{card:e.card,board:e.board,textData:b.textData}).output};return _.extend(c,b)};c.prototype.commentEntity=function(b,e){var c,f,h;f=e.card;c=e.board;h=e.embedly;c={type:"comment",_id:""+this.idAction+"_comment",text:b,textHtml:Ja.comments.format(b,{card:f,board:c,domain:this.domain,textData:e.textData}).output};null!=h&&(c.embedly=
h);return c};c.prototype.labelEntity=function(b,e){return{type:"label",_id:""+this.idAction+"_label",color:b,text:e}};c.prototype.attachmentEntity=function(b){b=_.extend({type:"attachment",_id:""+this.idAction+"_"+b.id},b);b.link=b.url&&!b.isDeleted;return b};c.prototype.attachmentPreviewEntity=function(b){var e;b=_.extend({type:"attachmentPreview",_id:""+this.idAction+"_"+b.id+"_preview"},b);b.isImage=b.url&&!b.isDeleted&&l.extensionIsImage(b.url)&&("function"===typeof l.isTrelloAttachment?l.isTrelloAttachment(b.url):
void 0);b.canPreview=b.isImage;b.originalUrl=b.url;b.url=null!=(e=b.previewUrl)?e:b.url;return b};c.prototype.orderEntityList=function(b){var e,c,f,h;f=e=0;for(h=b.length;f<h;f++)c=b[f],c.order=e++;return b};return c}();"undefined"!==typeof module&&null!==module&&(module.exports.EntityListGenerator=Ab);var dd,Kb,kc,ed;ed=!1;"function"===typeof require&&(require("date-utils"),ed=!0);ed?(Zc="H:MI P",$c="MMM D",ad="MMM D, YYYY",Kb=function(c,b){return c.toFormat(b)}):(Zc="h:mm tt",$c="MMM d",ad="MMM d, yyyy",
Kb=function(c,b){return c.toString(b)});kc=function(c,b){return c.getYear()===b.getYear()&&c.getMonth()===b.getMonth()&&c.getDate()===b.getDate()};dd=function(c,b){return new Date(c.getTime()+864E5*b)};kb=function(c,b,d){var e,g,f;f=null!=d?d:{};d=f.timeFormat;f=f.timezoneAbbreviation;c=new Date(c);e=Math.abs((b-c)/1E3);g=c>b;if(10>e)return g?"now":"just now";if(120>e)return g?"in a minute":"a minute ago";e=Math.floor(e/60);if(60>e)return g?"in "+e+" minutes":""+e+" minutes ago";if(120>e)return g?
"in an hour":"an hour ago";e=Math.floor(e/60);d=" at "+Kb(c,null!=d?d:Zc).toLowerCase();null!=f&&(d+=" ("+f+")");return 3>e?g?"in "+e+" hours":""+e+" hours ago":kc(b,c)?"today"+d:kc(dd(b,-1),c)?"yesterday"+d:kc(dd(b,1),c)?"tomorrow"+d:90>Math.floor(e/24)?Kb(c,$c)+d:Kb(c,ad)+d};"undefined"!==typeof module&&null!==module&&(module.exports.getDateDeltaString=kb);if("function"===typeof require){Ab=require("./entityListGenerator.coffee").EntityListGenerator;var l=require("./sharedUtil.coffee"),lb=require("./sharedPowerUps.coffee")}var Lb,
k=function(c,b){return function(){return c.apply(b,arguments)}},F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c},D=[].indexOf||function(c){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===c)return b;return-1};Lb=null;(function(){var c,b,d,e,g,f,h;Lb=function(f){function c(){this.groupActions=k(this.groupActions,this);this.getEntityLists=k(this.getEntityLists,
this);this.getEntityList=k(this.getEntityList,this);this.getSingleEntityList=k(this.getSingleEntityList,this);this._getData=k(this._getData,this);this.getPowerUpEntityList=k(this.getPowerUpEntityList,this);this.getBoardInvitationEntityList=k(this.getBoardInvitationEntityList,this);this.getOrganizationInvitationEntityList=k(this.getOrganizationInvitationEntityList,this);this.getOrganizationEntityList=k(this.getOrganizationEntityList,this);this.getCheckItemEntityList=k(this.getCheckItemEntityList,this);
this.getChecklistEntityList=k(this.getChecklistEntityList,this);this.getListEntityList=k(this.getListEntityList,this);this.getMemberEntityList=k(this.getMemberEntityList,this);this.getCardEntityList=k(this.getCardEntityList,this);this.getBoardEntityList=k(this.getBoardEntityList,this);this.visibleTypes=_.difference(h,d)}var g,x,L,n,B,H;s(c,f);n=function(b){return/Card$/.test(b.type)};L=function(b){return b.idMemberCreator};H=function(b){return"commentCard"===b||"copyCommentCard"===b||"deleteCard"===
b||"moveCardFromBoard"===b||"moveCardToBoard"===b||"addAttachmentToCard"===b};g=function(b,d){var e,f;e=b.toJSON();f=d.toJSON();return L(e)!==L(f)||(!n(e)||!n(f))||(!e.data.card||!f.data.card)||e.data.card.id!==f.data.card.id||H(e.type)||H(f.type)?!1:!0};x=function(b,d){var e,f;e=b.toJSON();f=d.toJSON();return H(f.type)||3E5<Math.abs(l.parseDate(e.date)-l.parseDate(f.date))||n(e)&&n(f)&&L(e)!==L(f)?!0:!1};B=function(b){var d,e,f,c,g,h,m,q,k,u,l,x;if(1===b.length)return b;f={};q=function(b,d){var e,
f,c,g,h,m;f=["name","desc","pos","closed"];c=0;for(g=f.length;c<g;c++)if(e=f[c],null!=(null!=(h=b.old)?h[e]:void 0)&&null!=(null!=(m=d.old)?m[e]:void 0))return!0;return null!=b.listBefore&&null!=d.listBefore};h=k=0;for(l=b.length;k<l;h=++k){d=b[h];m=u=0;for(x=b.length;u<x;m=++u)if(e=b[m],h!==m&&!f[d.id]&&!f[e.id]){c=d.toJSON();g=e.toJSON();_.extend(c,c.data);_.extend(g,g.data);if("addMemberToCard"===c.type&&"removeMemberFromCard"===g.type&&c.idMember===g.idMember||"voteOnCard"===c.type&&"voteOnCard"===
g.type&&c.voted!==g.voted||"addLabelToCard"===c.type&&"removeLabelFromCard"===g.type&&c.value===g.value||"addAttachmentToCard"===c.type&&"deleteAttachmentFromCard"===g.type&&c.attachment.id===g.attachment.id||"addChecklistToCard"===c.type&&"removeChecklistFromCard"===g.type&&c.value===g.value||"updateCheckItemStateOnCard"===c.type&&"updateCheckItemStateOnCard"===g.type&&c.checkItem.name===g.checkItem.name&&c.checkItem.state!==g.checkItem.state)f[d.id]=!0,f[e.id]=!0;h<m&&"updateCard"===c.type&&("updateCard"===
g.type&&q(c,g))&&(f[e.id]=!0)}}return _.reject(b,function(b){return f[b.id]})};c.prototype.getBoardEntityList=function(b,d){var e,f,c,g,h,m,q,k,u,l,x,L,B,n,s,H,v,T,w,y,A,C,D,F,G,I,M;switch(b.type){case "createBoard":return[this.textEntity("created"),this.boardEntity(b.board)];case "copyBoard":return[this.textEntity("copied this board from"),this.boardEntity(b.boardSource)];case "updateBoard":if(null!=(null!=(f=b.old)?f.name:void 0))return[this.textEntity("renamed"),this.boardEntity(b.board),this.textEntity("(from "+
b.old.name+")")];if(null!=(null!=(g=b.old)?g.desc:void 0))return[this.textEntity("changed description of"),this.boardEntity(b.board)];if(null!=(null!=(n=b.old)?n.closed:void 0))return[this.textEntity(b.board.closed?"closed":"re-opened"),this.boardEntity(b.board)];if(null!=(null!=(A=b.old)?null!=(C=A.prefs)?C.background:void 0:void 0))return[this.textEntity("changed the background of"),this.boardEntity(b.board)];if(null!=(null!=(D=b.old)?D.prefs:void 0)){f=function(d){return function(e,f,c,g){var h,
m;h=null!=(m=b.board.prefs)?m[e]:void 0;if("none"===h||"disabled"===h)return[d.textEntity(c),d.boardEntity(b.board)];e=function(){switch(h){case "members":case "private":return"its members";case "observers":return"members and observers";case "org":return"members of its organization";case "public":return"the public";case "admins":return"its admins"}}();return[d.textEntity(f),d.boardEntity(b.board),d.textEntity(""+g+" to "+e)]}}(this);g=function(d){return function(e,f){return[d.textEntity((e?"enabled":
"disabled")+(" "+f+" on")),d.boardEntity(b.board)]}}(this);if(null!=(null!=(F=b.old)?null!=(G=F.prefs)?G.voting:void 0:void 0))return f("voting","made voting on","disabled voting on","available");if(null!=(null!=(I=b.old)?null!=(M=I.prefs)?M.comments:void 0:void 0))return f("comments","made commenting on","disabled commenting on","available");if(null!=(null!=(c=b.old)?null!=(h=c.prefs)?h.invitations:void 0:void 0))return f("invitations","made inviting on","disabled inviting on","available");if(null!=
(null!=(m=b.old)?null!=(q=m.prefs)?q.permissionLevel:void 0:void 0))return f("permissionLevel","made","hid","visible");if(null!=(null!=(k=b.old)?null!=(u=k.prefs)?u.selfJoin:void 0:void 0))return g(null!=(l=b.board.prefs)?l.selfJoin:void 0,"self join");if(null!=(null!=(x=b.old)?null!=(L=x.prefs)?L.cardCovers:void 0:void 0))return g(null!=(B=b.board.prefs)?B.cardCovers:void 0,"card cover images");if(null!=(null!=(s=b.old)?null!=(H=s.prefs)?H.cardAging:void 0:void 0))return c=lb.cardAgingModes[null!=
(e=b.board.prefs)?e.cardAging:void 0],[this.textEntity("changed card aging to "+c+" mode")];if(null!=(null!=(v=b.old)?null!=(T=v.prefs)?T.calendarFeedEnabled:void 0:void 0))return c=lb.calendarFeedEnabledVerbs[null!=(w=b.board.prefs)?w.calendarFeedEnabled:void 0],[this.textEntity(""+c+" the iCalendar feed on this board")]}break;case "addMemberToBoard":return null!=b.idMemberAdded&&b.idMemberAdded!==b.idMemberCreator?(e=[this.textEntity("added"),this.memberEntity(b.idMemberAdded),this.textEntity("to"),
this.boardEntity(b.board)],null!=b.memberType&&"normal"!==b.memberType&&e.push(this.textEntity("as an "+b.memberType)),e):[this.textEntity("joined"),this.boardEntity(b.board)];case "removeMemberFromBoard":return b.idMember===d?[this.textEntity("left"),this.boardEntity(b.board)]:[this.textEntity("removed"),this.memberEntity(b.idMember),this.textEntity("from"),this.boardEntity(b.board)];case "addAdminToBoard":return[this.textEntity("made"),this.memberEntity(b.idMember),this.textEntity("an admin of"),
this.boardEntity(b.board)];case "removeAdminFromBoard":return b.idMember===d?[this.textEntity("became a normal user on"),this.boardEntity(b.board)]:[this.textEntity("made"),this.memberEntity(b.idMember),this.textEntity("a normal user on"),this.boardEntity(b.board)];case "makeAdminOfBoard":return b.idMember===d?[this.textEntity("made themselves an admin of"),this.boardEntity(b.board)]:[this.textEntity("made"),this.memberEntity(b.idMember),this.textEntity("an admin of"),this.boardEntity(b.board)];case "makeObserverOfBoard":return b.idMember===
d?[this.textEntity("became an observer of"),this.boardEntity(b.board)]:[this.textEntity("made"),this.memberEntity(b.idMember),this.textEntity("an observer of"),this.boardEntity(b.board)];case "makeNormalMemberOfBoard":return b.idMember===d?[this.textEntity("became a normal user on"),this.boardEntity(b.board)]:[this.textEntity("made"),this.memberEntity(b.idMember),this.textEntity("a normal user on"),this.boardEntity(b.board)];case "addToOrganizationBoard":return[this.textEntity("added"),this.boardEntity(b.board),
this.textEntity("to"),this.organizationEntity(b.organization)];case "removeFromOrganizationBoard":return[this.textEntity("removed"),this.boardEntity(b.board),this.textEntity("from"),this.organizationEntity(null!=(y=b.organization)?y:{})];case "moveCardFromBoard":return[this.textEntity("transferred"),this.cardEntity(b.card,b.boardTarget),this.textEntity("to"),this.boardEntity(b.boardTarget)];case "moveCardToBoard":return[this.textEntity("transferred"),this.cardEntity(b.card,b.board),this.textEntity("from"),
this.boardEntity(b.boardSource)];case "moveListFromBoard":return[this.textEntity("transferred"),this.listEntity(b.list),this.textEntity("to"),this.boardEntity(b.boardTarget)];case "moveListToBoard":return[this.textEntity("transferred"),this.listEntity(b.list),this.textEntity("from"),this.boardEntity(b.boardSource)]}};c.prototype.getCardEntityList=function(b,d,e){var f,c,g,h,m,q;f=null!=(c=e.grouped)?c:!1;if(e.includeBoard)return _.flatten([this.getCardEntityList(b,d,_.extend({},e,{includeBoard:!1})),
this.textEntity("on"),this.boardEntity(b.board)]);switch(b.type){case "createCard":return[this.textEntity("added"),this.cardEntity(b.card,b.board),this.textEntity("to"),this.listEntity(b.list)];case "deleteCard":return[this.textEntity("deleted card #"+b.card.idShort),this.textEntity("from"),this.listEntity(b.list)];case "copyCard":return[this.textEntity("copied"),this.cardEntity(b.card,b.board),this.textEntity("from"),this.cardEntity(b.cardSource,b.board),this.textEntity("in list"),this.listEntity(b.list)];
case "emailCard":return f=[this.textEntity("emailed"),this.cardEntity(b.card,b.board),this.textEntity("to"),this.listEntity(b.list)],null!=b.sourceEmail&&(f.push(this.textEntity("from")),f.push(this.textEntity(b.sourceEmail))),f;case "updateCard":if(null!=b.listBefore)return f?[this.textEntity("moved from"),this.listEntity(b.listBefore,"old"),this.textEntity("to"),this.listEntity(b.listAfter)]:[this.textEntity("moved"),this.cardEntity(b.card,b.board),this.textEntity("from"),this.listEntity(b.listBefore,
"old"),this.textEntity("to"),this.listEntity(b.listAfter)];if(null!=(null!=(g=b.old)?g.name:void 0))return f?[this.textEntity("changed the name (from "+b.old.name+")")]:[this.textEntity("renamed"),this.cardEntity(b.card,b.board),this.textEntity("(from "+b.old.name+")")];if(null!=(null!=(h=b.old)?h.desc:void 0))return f?[this.textEntity("changed description")]:[this.textEntity("changed description of"),this.cardEntity(b.card,b.board)];if(null!=(null!=(m=b.old)?m.pos:void 0))return d=b.old.pos<b.card.pos,
f?[this.textEntity("moved "+(d?"higher":"lower"))]:[this.textEntity("moved"),this.cardEntity(b.card,b.board),this.textEntity(d?"higher":"lower")];if(null!=(null!=(q=b.old)?q.closed:void 0)){if(f)return[this.textEntity(b.card.closed?"archived":"sent to the board")];f=[this.textEntity(b.card.closed?"archived":"sent"),this.cardEntity(b.card,b.board)];b.card.closed||f.push(this.textEntity("to the board"));return f}break;case "commentCard":return[this.textEntity("on",b.card.id,!0),this.cardEntity(b.card,
b.board,!0),this.commentEntity(b.text,_.pick(b,["card","board","embedly","textData"]))];case "copyCommentCard":return[this.textEntity("copied comment by"),this.memberEntity(b.idOriginalCommenter),this.textEntity("from card"),this.cardEntity(b.cardSource,b.board,!0),this.commentEntity(b.text,_.pick(b,["card","board","embedly","textData"]))];case "addMemberToCard":return b.idMember===d?f?[this.textEntity("joined")]:[this.textEntity("joined"),this.cardEntity(b.card,b.board)]:f?[this.textEntity("added"),
this.memberEntity(b.idMember)]:[this.textEntity("added"),this.memberEntity(b.idMember),this.textEntity("to"),this.cardEntity(b.card,b.board)];case "removeMemberFromCard":return b.idMember===d?f?[this.textEntity("left")]:[this.textEntity("left"),this.cardEntity(b.card,b.board)]:f?[this.textEntity("removed"),this.memberEntity(b.idMember)]:[this.textEntity("removed"),this.memberEntity(b.idMember),this.textEntity("from"),this.cardEntity(b.card,b.board)];case "addChecklistToCard":return f?[this.textEntity("added"),
this.checklistEntity(b.checklist)]:[this.textEntity("added"),this.checklistEntity(b.checklist),this.textEntity("to"),this.cardEntity(b.card,b.board)];case "removeChecklistFromCard":return f?[this.textEntity("removed"),this.checklistEntity(b.checklist)]:[this.textEntity("removed"),this.checklistEntity(b.checklist),this.textEntity("from"),this.cardEntity(b.card,b.board)];case "voteOnCard":return[this.textEntity(b.voted?"voted for":"removed vote for"),this.cardEntity(b.card,b.board)];case "addLabelToCard":return f?
[this.textEntity("added"),this.labelEntity(b.value,b.text)]:[this.textEntity("added the"),this.labelEntity(b.value,b.text),this.textEntity("label to"),this.cardEntity(b.card,b.board)];case "removeLabelFromCard":return f?[this.textEntity("removed"),this.labelEntity(b.value,b.text)]:[this.textEntity("removed the"),this.labelEntity(b.value,b.text),this.textEntity("label from"),this.cardEntity(b.card,b.board)];case "updateCheckItemStateOnCard":return d="complete"===b.checkItem.state,f?(f=[this.textEntity(d?
"completed":"marked"),this.checkItemEntity(b.checkItem,_.pick(b,["card","board","checkItem"]))],d||f.push(this.textEntity("incomplete")),f):[this.textEntity(d?"completed":"marked"),this.checkItemEntity(b.checkItem,_.pick(b,["card","board","checkItem"])),this.textEntity(d?"on":"incomplete on"),this.cardEntity(b.card,b.board)];case "addAttachmentToCard":return f?[this.textEntity("attached"),this.attachmentEntity(b.attachment),this.attachmentPreviewEntity(b.attachment)]:[this.textEntity("attached"),
this.attachmentEntity(b.attachment),this.textEntity("to"),this.cardEntity(b.card,b.board),this.attachmentPreviewEntity(b.attachment)];case "deleteAttachmentFromCard":return f?[this.textEntity("deleted"),this.attachmentEntity(b.attachment)]:[this.textEntity("deleted the"),this.attachmentEntity(b.attachment),this.textEntity("attachment from"),this.cardEntity(b.card,b.board)]}};c.prototype.getMemberEntityList=function(b,d){var e,f,c,g;switch(b.type){case "updateMember":if(null!=(null!=(e=b.old)?e.bio:
void 0))return[this.textEntity("updated their bio")];if(null!=(null!=(f=b.old)?f.username:void 0))return[this.textEntity("updated their username")];if(null!=(null!=(c=b.old)?c.initials:void 0))return[this.textEntity("updated their initials")];if(null!=(null!=(g=b.old)?g.fullName:void 0))return[this.textEntity("updated their display name")]}};c.prototype.getListEntityList=function(b,d,e){var f,c,g,h;if(e.includeBoard)return _.flatten([this.getListEntityList(b,d,_.extend({},e,{includeBoard:!1})),this.textEntity("on"),
this.boardEntity(b.board)]);switch(b.type){case "createList":return[this.textEntity("added"),this.listEntity(b.list),this.textEntity("to"),this.boardEntity(b.board)];case "updateList":if(null!=(null!=(c=b.old)?c.name:void 0))return[this.textEntity("renamed"),this.listEntity(b.list),this.textEntity("(from "+b.old.name+")")];if(null!=(null!=(g=b.old)?g.pos:void 0))return d=(null!=(f=b.old)?f.pos:void 0)>b.list.pos,[this.textEntity("moved"),this.listEntity(b.list),this.textEntity((d?"left":"right")+
" on"),this.boardEntity(b.board)];if(null!=(null!=(h=b.old)?h.closed:void 0))return f=[this.textEntity(b.list.closed?"archived":"sent"),this.listEntity(b.list)],b.list.closed||f.push(this.textEntity("to the board")),f}};c.prototype.getChecklistEntityList=function(b,d){var e;switch(b.type){case "createChecklist":return[this.textEntity("created"),this.checklistEntity(b.checklist),this.textEntity("on"),this.boardEntity(b.board)];case "updateChecklist":if(null!=(null!=(e=b.old)?e.name:void 0))return[this.textEntity("renamed"),
this.checklistEntity(b.checklist),this.textEntity("(from "+b.old.name+")")]}};c.prototype.getCheckItemEntityList=function(b,d){var e,f,c;b.textData=null!=(e=b.checkItem)?e.textData:void 0;e=_.pick(b,["card","board","textData","checkItem"]);switch(b.type){case "updateCheckItem":if(null!=(null!=(f=b.old)?f.name:void 0))return[this.textEntity("renamed"),this.checkItemEntity(b.checkItem,e),this.textEntity("(from "+b.old.name+")")];if(null!=(null!=(c=b.old)?c.pos:void 0))return f=b.old.pos>b.checkItem.pos,
[this.textEntity("moved"),this.checkItemEntity(b.checkItem,e),this.textEntity((f?"higher":"lower")+" in the checklist"),this.checklistEntity(b.checklist)];break;case "deleteCheckItem":return[this.textEntity("deleted task"),this.checkItemEntity(b.checkItem,e),this.textEntity("on"),this.checklistEntity(b.checklist)];case "convertToCardFromCheckItem":return[this.textEntity("converted"),this.cardEntity(b.card,b.board),this.textEntity("from a checklist item on"),this.cardEntity(b.cardSource,b.board)]}};
c.prototype.getOrganizationEntityList=function(b,d){var e,f,c,g;switch(b.type){case "createOrganization":return[this.textEntity("created"),this.organizationEntity(b.organization)];case "updateOrganization":if(null!=(null!=(e=b.old)?e.desc:void 0))return[this.textEntity("changed description of"),this.organizationEntity(b.organization)];if(null!=(null!=(f=b.old)?f.name:void 0))return[this.textEntity("changed name of"),this.organizationEntity(b.organization)];if(null!=(null!=(c=b.old)?c.displayName:
void 0))return[this.textEntity("changed display name of"),this.organizationEntity(b.organization)];if(null!=(null!=(g=b.old)?g.website:void 0))return[this.textEntity("changed website of"),this.organizationEntity(b.organization)];break;case "addMemberToOrganization":return null!=b.idMemberAdded&&b.idMemberAdded!==b.idMemberCreator?(e=[this.textEntity("added"),this.memberEntity(b.idMemberAdded),this.textEntity("to"),this.organizationEntity(b.organization)],null!=b.memberType&&"normal"!==b.memberType&&
e.push(this.textEntity("as an "+b.memberType)),e):[this.textEntity("joined"),this.organizationEntity(b.organization)];case "removeMemberFromOrganization":return b.idMember===d?[this.textEntity("left"),this.organizationEntity(b.organization)]:[this.textEntity("removed"),this.memberEntity(b.idMember),this.textEntity("from"),this.organizationEntity(b.organization)];case "makeAdminOfOrganization":return b.idMember===d?[this.textEntity("became an admin of"),this.boardEntity(b.organization)]:[this.textEntity("made"),
this.memberEntity(b.idMember),this.textEntity("an admin of"),this.boardEntity(b.organization)];case "makeNormalMemberOfOrganization":return b.idMember===d?[this.textEntity("became a normal user in"),this.boardEntity(b.organization)]:[this.textEntity("made"),this.memberEntity(b.idMember),this.textEntity("a normal user in"),this.boardEntity(b.organization)];case "addAdminToOrganization":return[this.textEntity("made"),this.memberEntity(b.idMember),this.textEntity("an admin of"),this.organizationEntity(b.organization)];
case "removeAdminFromOrganization":return b.idMember===d?[this.textEntity("became a normal user on"),this.organizationEntity(b.organization)]:[this.textEntity("made"),this.memberEntity(b.idMember),this.textEntity("a normal user on"),this.organizationEntity(b.organization)]}};c.prototype.getOrganizationInvitationEntityList=function(b,d){switch(b.type){case "createOrganizationInvitation":return[this.textEntity("created an invitation to"),this.organizationEntity(b.organization)];case "unconfirmedOrganizationInvitation":return[this.textEntity("invited an unconfirmed member to"),
this.organizationEntity(b.organization)];case "deleteOrganizationInvitation":return[this.textEntity("deleted an invitation to"),this.organizationEntity(b.organization)]}};c.prototype.getBoardInvitationEntityList=function(b,d){switch(b.type){case "createBoardInvitation":return[this.textEntity("created an invitation to"),this.boardEntity(b.board)];case "unconfirmedBoardInvitation":return[this.textEntity("invited an unconfirmed member to"),this.boardEntity(b.board)];case "deleteBoardInvitation":return[this.textEntity("deleted an invitation to"),
this.boardEntity(b.board)]}};c.prototype.getPowerUpEntityList=function(b,d){var e;e=!(b.value in lb.powerUpNames)?b.value:lb.powerUpNames[b.value].toLowerCase();switch(b.type){case "enablePowerUp":return[this.textEntity("enabled the "+e+" power-up")];case "disablePowerUp":return[this.textEntity("disabled the "+e+" power-up")]}};c.prototype._getData=function(b,d){var e,f,c,g,h,m;e=d.toJSON();c=b.toJSON();e=_.extend({},e,e.data);m=["card","list","board"];g=0;for(h=m.length;g<h;g++)f=m[g],null!=c.data[f]&&
(e.data[f]=c.data[f]);return e};c.prototype.getSingleEntityList=function(b,d,e){var f,c,g;f=this._getData(b,d);g=this.memberEntity(f.idMemberCreator);c={Board:"getBoardEntityList",Member:"getMemberEntityList",Card:"getCardEntityList",List:"getListEntityList",Checklist:"getChecklistEntityList",CheckItem:"getCheckItemEntityList",Organization:"getOrganizationEntityList",OrganizationInvitation:"getOrganizationInvitationEntityList",BoardInvitation:"getBoardInvitationEntityList",PowerUp:"getPowerUpEntityList"};
b=function(b){return function(){var d,h;for(h in c)if(d=c[h],RegExp(h+"$").test(f.type))return b[d](f,g.id,e)}}(this)();null==b&&(b=[]);b.unshift(g);this.orderEntityList(b);return b};c.prototype.getEntityList=function(d,e,f){var c,g,h,m,q,k,u,l;null==f&&(f={});null==e&&(e=[d]);this.idAction=this.getId(e[0]);if(1===e.length)return g=this.getSingleEntityList(d,e[0],f),{entities:g,list:g};q=this.memberEntity(e[0].get("idMemberCreator"));h=_.find(e,function(d){var e;return e=d.get("type"),0<=D.call(b,
e)});g=[];k=0;for(u=e.length;k<u;k++)if(c=e[k],l=c.get("type"),0>D.call(b,l))if(m=c.toJSON(),_.extend(m,m.data),this.idAction=this.getId(c),c=this.getCardEntityList(m,q.id,_.extend({},f,{grouped:!0})))this.orderEntityList(c),g.push({_id:this.idAction,entities:c,list:c});this.idAction=this.getId(e[0]);e=[q];h?(e=e.concat(this.getCardEntityList(this._getData(d,h),q.id,_.extend({},f,{grouped:!0}))),e.push(this.textEntity("and"))):(f=d.get("data"),d=f.card,f=f.board,e.push(this.textEntity("on",d.id,!0)),
e.push(this.cardEntity(d,f,!0)));this.orderEntityList(e);return{entities:e,list:e,children:g}};c.prototype.getMember=function(b){throw Error("NotImplemented");};c.prototype.getBoard=function(b){return{}};c.prototype.getEntityLists=function(b,d){var f,c,h,m,q,k,l,L,n,s,H;null==d&&(d={});d=_.extend({},{compact:!0},d);L=0;m=[];h={};q=n=0;for(s=b.length;n<s;q=++n)if(f=b[q],!h[f.id]){if(null!=d.limit&&L>=d.limit)break;c=[f];k=q=l=q+1;for(H=b.length;l<=H?q<H:q>H;k=l<=H?++q:--q){k=b[k];if(x(f,k))break;g(f,
k)&&(c.push(k),h[k.id]=!0)}_.isEmpty(c)||(l=c[0],c=B(_.reject(c,e)),null!=d.excludeTypes&&(c=_.filter(c,function(b){return function(b){var e;return e=b.get("type"),0>D.call(d.excludeTypes,e)}}(this))),_.isEmpty(c)||(q=_.pluck([l].concat(c),"id").join("_"),d.key&&(q=d.key+"_"+q),f=c[0].get("date"),m.push(_.extend(this.getEntityList(l,c,d),{db_id:this.getId(c[0]),_id:q,date:f})),L++))}return m};c.prototype.groupActions=function(b,d){var f,c,h,m,q,k,l,L,n,s,H;null==d&&(d={});h={};q=[];m=_.filter(b,function(b){var f,
c;return(f=b.get("type"),0>D.call(null!=(c=d.excludeTypes)?c:[],f))&&!e(b)});k=L=0;for(n=m.length;L<n;k=++L)if(f=m[k],!h[f.id]){if(null!=d.limit&&q.length>=d.limit)break;c=[f];l=k=s=k+1;for(H=m.length;s<=H?k<H:k>H;l=s<=H?++k:--k){l=m[l];if(x(f,l))break;g(f,l)&&(c.push(l),h[l.id]=!0)}c=B(c);_.isEmpty(c)||q.push(c)}return q};return c}(Ab);e=function(b){return function(b){var e,f,c,g,h,m;b=null!=(e="function"===typeof b.toJSON?b.toJSON():void 0)?e:b;return"updateCard"===b.type&&(null!=b.data.listBefore||
null!=(null!=(f=b.data.old)?f.closed:void 0))||"updateList"===b.type&&null!=(null!=(c=b.data.old)?c.closed:void 0)?!1:("updateMember"===(g=b.type)||"updateOrganization"===g)&&(null==b.data.old||null!=b.data.old.prefs&&1===_.keys(b.data.old).length)||"updateBoard"===b.type&&null!=(null!=(h=b.data.old)?h.labelNames:void 0)?!0:(m=b.type,0<=D.call(d,m))}}(this);b=["createCard","copyCard","emailCard"];h="addAdminToBoard addAdminToOrganization addAttachmentToCard addBoardsPinnedToMember addChecklistToCard addLabelToCard addMemberToBoard addMemberToCard addMemberToOrganization addToOrganizationBoard commentCard copyCommentCard convertToCardFromCheckItem copyBoard createBoard createBoardInvitation createBoardPreference createCard copyCard createChecklist copyChecklist createList createOrganization createOrganizationInvitation deleteAttachmentFromCard deleteBoardInvitation deleteCard deleteCheckItem deleteOrganizationInvitation disablePowerUp emailCard enablePowerUp makeAdminOfBoard makeAdminOfOrganization makeNormalMemberOfBoard makeNormalMemberOfOrganization makeObserverOfBoard memberJoinedTrello moveCardFromBoard moveListFromBoard moveCardToBoard moveListToBoard removeAdminFromBoard removeAdminFromOrganization removeBoardsPinnedFromMember removeChecklistFromCard removeFromOrganizationBoard removeLabelFromCard removeMemberFromBoard removeMemberFromCard removeMemberFromOrganization unconfirmedBoardInvitation unconfirmedOrganizationInvitation updateBoard updateCard updateCheckItem updateCheckItemStateOnCard updateChecklist updateList updateMember updateOrganization voteOnCard".split(" ");
f="updateCard:idList updateCard:closed updateCard:desc updateCard:name updateList:closed updateList:name".split(" ");d="addAdminToBoard addAdminToOrganization addBoardsPinnedToMember addLabelToCard copyChecklist createBoardInvitation createBoardPreference createChecklist createCheckItem createOrganizationInvitation deleteCheckItem deleteComment makeAdminOfOrganization removeBoardsPinnedFromMember removeLabelFromCard removeMemberFromBoard removeMemberFromOrganization updateCard updateCheckItem updateComment updateList voteOnCard".split(" ");
g="addAttachmentToCard addChecklistToCard addMemberToCard commentCard copyCommentCard convertToCardFromCheckItem createCard deleteAttachmentFromCard removeChecklistFromCard removeMemberFromCard updateCard:closed updateCard:desc updateCard:name updateCheckItemStateOnCard".split(" ");c=_.difference(d,["updateCard","updateList"]);c=_.difference(_.union(h,f),c);return"undefined"!==typeof module&&null!==module?_.extend(module.exports,{SharedActionList:Lb,types:h,ignoredTypes:d,qualifiedTypes:f,allowedTypesApi:c,
movedTypes:g,isSuppressed:e}):Lb})();var ea,Fe,fd,D=[].indexOf||function(c){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===c)return b;return-1};fd={none:-1,"new":0,processing:1,denied:2,good:3,overdue:4,disabled:5,cancelled:6,"change processing":7,"change denied":8,"change finished":9,authorizing:10,"product specific processing":11,"free trial":12,"pending product specific processing":13,"pending authorizing":14,deleted:15};Fe=_.invert(fd);ea={init:function(c,b){var d,e,g;d=_.extend({},
ea);for(e in c)g=c[e],e=parseInt(e,10),g=_.defaults(g,{interval:"monthly",hidden:!1,prebill:!0,perUser:!1}),d.products[e]=g.name,g.hidden||(d.productShortNames[g.shortName]=e),g.prebill&&d.prebilledProducts.push(e),g.perUser&&d.perUserProducts.push(e),d.productFeatures[e]=g.features,d.prices[e]=g.price,d.intervals[e]=g.interval;return _.extend(d,b)},standings:fd,reverseStandings:Fe,activeStandings:[3,4,7,8,9,11,12,13,14],processingStandings:[1,7,10,11,13,14],overdueStandings:[4],needCCStandings:[2,
5],cancelledStandings:[6],products:{},prices:{},intervals:{},productShortNames:{},prebilledProducts:[],productFeatures:{},perUserProducts:[],globalFeatures:[],_convertToId:function(c){return _.isString(c)?/^\d+$/.test(c)?parseInt(c,10):this.productShortNames[c]:c},getProductNumber:function(c){return this._convertToId(c)},getPrice:function(c){return this.prices[this._convertToId(c)]},formatPrice:function(c){var b,d;b=null!=(d=this.getPrice(c))?d:"??";c=this.isPerUser(c)?" per user":"";return"$"+b+
c},getInterval:function(c){return this.intervals[this._convertToId(c)]},isMonthly:function(c){return"monthly"===this.getInterval(c)},isPerUser:function(c){var b;return b=this._convertToId(c),0<=D.call(this.perUserProducts,b)},getYearlyDiscount:function(c,b){var d,e;e=this.getPrice(c);d=12*this.getPrice(b);return""+Math.round(100*(d-e)/d)+"%"},features:function(c){var b;return _.unique(_.flatten(function(){var d,e,g,f;g=null!=c?c:[];f=[];d=0;for(e=g.length;d<e;d++)b=g[d],f.push(this.productFeatures[b]||
[]);return f}.call(this)))},hasProduct:function(c){var b,d,e;e=null!=c?c:[];b=0;for(d=e.length;b<d;b++)if(c=e[b],c in this.products)return!0;return!1},hasAccount:function(c){return null!=c&&c!==ea.standings.none},active:function(c){var b;return null!=c&&(b=(new Number(c.standing)).valueOf(),0<=D.call(ea.activeStandings,b))&&!_.isEmpty(c.products)},processing:function(c){var b;return ea.hasAccount(c)&&(b=(new Number(c)).valueOf(),0<=D.call(ea.processingStandings,b))},problem:function(c){return c===
ea.standings.overdue},cancelled:function(c){var b;if(null==c)return!1;b=(new Number(c.standing)).valueOf();return ea.hasAccount(c.standing)&&(0<=D.call(ea.cancelledStandings,b)||0<=D.call(ea.activeStandings,b)&&0>D.call(ea.processingStandings,b)&&_.isEmpty(c.products))},willExpire:function(c){var b,d;return(null!=(b=c.products)?b[0]:void 0)in(null!=(d=c.expirationDates)?d:{})},needCC:function(c){var b;return b=(new Number(c)).valueOf(),0<=D.call(ea.needCCStandings,b)},inactive:function(c){return ea.hasAccount(c)&&
!ea.active(c)},standingName:function(c){return this.reverseStandings[c]},isFeatureEnabled:function(c,b){return 0<=D.call(this.globalFeatures,c)||0<=D.call(this.features(b),c)}};"undefined"!==typeof module&&null!==module&&(module.exports=ea);"function"===typeof require&&(ea=require("./accounts.coffee"));var oa,rb,gd,lc,G=[].slice;rb="export logo observers removal activity deactivated orgCards googleApps orgMembersPage superAdmins prefs inviteOrg restrictVis disableExternalMembers".split(" ");gd=G.call(rb).concat(["goldMembers"],
["csvExport"],["shortExportHistory"]);lc={35:{shortName:"businessClassMonthly",name:"Business Class",interval:"monthly",price:25,features:rb,hidden:!0,prebill:!1},36:{shortName:"businessClassYearly",name:"Business Class",interval:"yearly",price:200,features:rb,hidden:!0},39:{shortName:"businessClassMonthly",name:"Business Class",interval:"monthly",price:50,features:rb,hidden:!0},40:{shortName:"businessClassYearly",name:"Business Class",interval:"yearly",price:500,features:rb,hidden:!0},96:{shortName:"businessClassMonthly",
name:"Business Class",interval:"monthly",price:5,features:gd,perUser:!0},97:{shortName:"businessClassYearly",name:"Business Class",interval:"yearly",price:45,features:gd,perUser:!0}};oa=ea.init(lc,{globalFeatures:["logo"]});"undefined"!==typeof module&&null!==module&&(module.exports=oa);"function"===typeof require&&(ea=require("./accounts.coffee"));var Ea,hd,id,G=[].slice;id="additionalStickers customStickers additionalBoardBackgrounds customBoardBackgrounds largeAttachments customEmoji".split(" ");
hd=G.call(id).concat(["crown"]);lc={10:{shortName:"trelloGoldFromBC",name:"Trello Gold from BC",features:id},37:{shortName:"trelloGoldMonthly",name:"Trello Gold",interval:"monthly",price:5,features:hd},38:{shortName:"trelloGoldYearly",name:"Trello Gold",interval:"yearly",price:45,features:hd}};Ea=ea.init(lc);"undefined"!==typeof module&&null!==module&&(module.exports=Ea);"function"===typeof require&&(Ab=require("./entityListGenerator.coffee").EntityListGenerator,kb=require("./sharedDate.coffee").getDateDeltaString);
var jd,k=function(c,b){return function(){return c.apply(b,arguments)}},F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c};jd=function(c){function b(){this.getEntityLists=k(this.getEntityLists,this);this.getEntityList=k(this.getEntityList,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getEntityList=function(b){var e,c,f,h,m,q,k,l,L,n,B,
s,v,w;this.idAction=this.getId(b);_.isFunction(b.toJSON)&&(b=b.toJSON());e=b.data;c=[];null!=b.idMemberCreator&&c.push(this.memberEntity(b.idMemberCreator));if(/Card$/.test(b.type)){switch(b.type){case "addedMemberToCard":b.idMemberCreator===(null!=(f=e.member)?f.id:void 0)?c.push(this.textEntity("joined the card")):(c.push(this.textEntity("added")),c.push(this.memberEntity(null!=(h=e.member)?h.id:void 0)),c.push(this.textEntity("to the card")));break;case "removedMemberFromCard":b.idMemberCreator===
(null!=(k=e.member)?k.id:void 0)?c.push(this.textEntity("left the card")):(c.push(this.textEntity("removed")),c.push(this.memberEntity(null!=(l=e.member)?l.id:void 0)),c.push(this.textEntity("from the card")));break;case "changeCard":null!=(null!=(L=e.old)?L.name:void 0)?c.push(this.textEntity("renamed the card")):null!=(null!=(n=e.old)?n.desc:void 0)?c.push(this.textEntity("updated the description of the card")):null!=(null!=(B=e.old)?B.closed:void 0)?e.card.closed?c.push(this.textEntity("archived the card")):
c.push(this.textEntity("unarchived the card")):null!=(null!=(s=e.old)?s.due:void 0)||null===(null!=(v=e.old)?v.due:void 0)?null!=(null!=(w=e.old)?w.due:void 0)?c.push(this.textEntity("changed the due date on the card")):c.push(this.textEntity("added a due date to the card")):null!=e.listAfter?c.push(this.textEntity("moved the card")):c.push(this.textEntity("changed the card"));break;case "createdCard":c.push(this.textEntity("created"));break;case "addedAttachmentToCard":c.push(this.textEntity("attached "+
e.name+" to"));break;case "updateCheckItemStateOnCard":null!=e.checkItem?(c.push(this.textEntity(""+("complete"===e.state?"":"un")+"checked ")),c.push(this.checkItemEntity(e.checkItem,{card:e.card,board:e.board})),c.push(this.textEntity("on"))):c.push(this.textEntity(""+("complete"===e.state?"":"un")+"checked "+e.name+" on"));break;default:c.push(this.textEntity({commentCard:"commented on the card",addedToCard:"added you to the card",removedFromCard:"removed you from the card",mentionedOnCard:"mentioned you on the card"}[b.type]))}c.push(this.cardEntity(e.card,
e.board));"changeCard"===b.type&&null!=e.listAfter?(c.push(this.textEntity("to")),c.push(this.listEntity(e.listAfter))):"createdCard"===b.type&&(c.push(this.textEntity("in")),c.push(this.listEntity(e.list)));c.push(this.textEntity("on"));c.push(this.boardEntity(e.board));("commentCard"===(m=b.type)||"mentionedOnCard"===m)&&null!=e.text?c.push(this.commentEntity(e.text,{card:e.card,board:e.board})):"addedAttachmentToCard"===b.type&&e.attachment&&c.push(this.attachmentPreviewEntity(e.attachment))}else/Board$/.test(b.type)?
(c.push(this.textEntity({removedFromBoard:"removed you from the board",invitedToBoard:"invited you to the board",unconfirmedInvitedToBoard:"added you to the board",addedToBoard:"added you to the board",addAdminToBoard:"made you an admin on the board",makeAdminOfBoard:"made you an admin on the board",closeBoard:"closed the board",declinedInvitationToBoard:""+e.fullName+" "+(null!=e.email?"("+e.email+") ":"")+"declined your invitation to the board"}[b.type])),c.push(this.boardEntity(e.board)),"unconfirmedInvitedToBoard"===
b.type&&c.push(this.textEntity("Confirm your email address to see it.")),"addedToBoard"===b.type&&("observer"===(q=e.memberType)||"admin"===q)&&c.push(this.textEntity("as an "+e.memberType))):/Organization$/.test(b.type)?(c.push(this.textEntity({removedFromOrganization:"removed you from the organization",addedToOrganization:"added you to the organization",invitedToOrganization:"invited you to the organization",unconfirmedInvitedToOrganization:"invited you to the organization",addAdminToOrganization:"made you an admin on the organization",
makeAdminOfOrganization:"made you an admin of the organization",declinedInvitationToOrganization:""+e.fullName+" "+(null!=e.email?"("+e.email+") ":"")+"declined your invitation to the organization"}[b.type])),c.push(this.organizationEntity(e.organization)),"unconfirmedInvitedToOrganization"===b.type&&c.push(this.textEntity("Confirm your email address to see it.")),"addedToOrganization"===b.type&&"admin"===e.memberType&&c.push(this.textEntity("as an "+e.memberType))):"memberJoinedTrello"===b.type?
(c.push(this.textEntity("joined Trello on your recommendation.")),null!=e&&(e.earnedCredit&&"gold"===e.creditType)&&c.push(this.textEntity("You earned a free month of Trello Gold!"))):"cardDueSoon"===b.type&&(c.push(this.cardEntity(e.card,e.board)),c.push(this.textEntity("on")),c.push(this.boardEntity(e.board)),c.push(this.relDateEntity(e.card.due,"due")));e=0;for(f=c.length;e<f;e++)b=c[e],b[b.type+"Type"]=!0;return this.orderEntityList(c)};b.prototype.getEntityLists=function(b,e){var c,f,h,m;m=[];
f=0;for(h=b.length;f<h;f++)c=b[f],m.push(this.getEntityList(c));return m};return b}(Ab);"undefined"!==typeof module&&null!==module&&(module.exports.SharedNotification=jd);var kd;kd=function(){function c(){}c.prototype.getDefaultId=function(){return""};c.prototype.event=function(b,d){};c.prototype.percentage=function(b,d){return 50};c.prototype.inTest=function(b,d){null==d&&(d=this.getDefaultId());return this.personalPercentage(b,d)<this.percentage(b,d)};c.prototype.personalPercentage=function(b,d){return parseInt(this._hasher(d+
b).substr(0,8),16)%100};c.prototype.templateData=function(b,d){var e,c,f,h,m;c=/{{[\#\^]AB_([a-z0-9_]*)}}/ig;for(e={};f=null!=(m=c.exec(b))?m[1]:void 0;)if(null==e[h="AB_"+f])e[h]=this.inTest(f,d);return e};return c}();"undefined"!==typeof module&&null!==module&&(module.exports=kd);var Ge,D=[].indexOf||function(c){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===c)return b;return-1};Ge={luhn:function(c){var b,d,e,g,f,h,m,q;d=c.toString();e=0;c=!1;m=d.split("").reverse();d=0;for(f=m.length;d<
f;d++){b=m[d];b=parseInt(b)*(c?2:1);q=b.toString().split("");g=0;for(h=q.length;g<h;g++)b=q[g],e+=parseInt(b);c=!c}return 0===e%10},providerFromNumber:function(c){var b,d,e,g,f;b=c.toString();c=function(d){return parseInt(b.substring(0,d))};if(d=c(2),0<=D.call([51,52,53,54,55],d))return"MasterCard";if(4===c(1))return"Visa";if(34===(e=c(2))||37===e)return"American Express";if(65===c(2)||(g=c(3),0<=D.call([644,645,646,647,648,649],g))||6011===c(4)||622126<(f=c(6))&&622925>f)return"Discover"}};"undefined"!==
typeof module&&null!==module&&(module.exports=Ge);lb={powerUpNames:{voting:"Voting",cardAging:"Card Aging",calendar:"Calendar"},cardAgingModes:{regular:"regular",pirate:"pirate"},calendarFeedEnabledVerbs:{"true":"enabled","false":"disabled"}};"undefined"!==typeof module&&null!==module&&(module.exports=lb);var Ra;Ra={100:"https://d78fikflryjgj.cloudfront.net/images/emoji/f65f447b748c49a5c11361d46686b304/100.png",1234:"https://d78fikflryjgj.cloudfront.net/images/emoji/27c4a96fa154f6d7fe005badf4da39d4/1234.png",
"+1":"https://d78fikflryjgj.cloudfront.net/images/emoji/a0a5d07f60da887f916b5540f7cc14d4/%2B1.png","-1":"https://d78fikflryjgj.cloudfront.net/images/emoji/9155e2acc3925a32e544021a4893ebef/-1.png","8ball":"https://d78fikflryjgj.cloudfront.net/images/emoji/2134b68e36afc98a06ba4cf75540a337/8ball.png",a:"https://d78fikflryjgj.cloudfront.net/images/emoji/5d0405e9adbc2b7986ea686d2bd5827d/a.png",ab:"https://d78fikflryjgj.cloudfront.net/images/emoji/b6dbd185b8dcaa1586fd49ba598dcf19/ab.png",abc:"https://d78fikflryjgj.cloudfront.net/images/emoji/3b2083bc78851af8a4595b5505cd1a48/abc.png",
abcd:"https://d78fikflryjgj.cloudfront.net/images/emoji/e3fa9e918aff67325c0f88390b33ddef/abcd.png",accept:"https://d78fikflryjgj.cloudfront.net/images/emoji/7635d65e4e1f4dff30489cd119949407/accept.png",aerial_tramway:"https://d78fikflryjgj.cloudfront.net/images/emoji/70760dfb407d2af49052b5ac0d5733ad/aerial_tramway.png",airplane:"https://d78fikflryjgj.cloudfront.net/images/emoji/513615dfa059c3e1afc284d04748d75a/airplane.png",alarm_clock:"https://d78fikflryjgj.cloudfront.net/images/emoji/ebfffc6f6b6707b5485fb97780a7b414/alarm_clock.png",
alien:"https://d78fikflryjgj.cloudfront.net/images/emoji/f095de9b586d31a7b39e4693803ab55b/alien.png",ambulance:"https://d78fikflryjgj.cloudfront.net/images/emoji/ca4868124267b4744ac220a84b3bfe5e/ambulance.png",anchor:"https://d78fikflryjgj.cloudfront.net/images/emoji/f2be64fa3b41d6762418f03909489bff/anchor.png",angel:"https://d78fikflryjgj.cloudfront.net/images/emoji/c6c5e2703f026c6eff0161f102c6b822/angel.png",anger:"https://d78fikflryjgj.cloudfront.net/images/emoji/41bb5affb89f9252d1d4567ee3ff5e14/anger.png",
angry:"https://d78fikflryjgj.cloudfront.net/images/emoji/a31dcd53dbf675d061cd4b9852bfb105/angry.png",anguished:"https://d78fikflryjgj.cloudfront.net/images/emoji/db9e6186e95dac80d5a51490900cd813/anguished.png",ant:"https://d78fikflryjgj.cloudfront.net/images/emoji/c3ede4848beb57ac9897bd5f87b4c981/ant.png",apple:"https://d78fikflryjgj.cloudfront.net/images/emoji/7ff0f4ad7964033a1966636cc2168aff/apple.png",aquarius:"https://d78fikflryjgj.cloudfront.net/images/emoji/d65e843c6ea33f97a3f4c6d8b5e7afad/aquarius.png",
aries:"https://d78fikflryjgj.cloudfront.net/images/emoji/dbc8f8436f732f1a45eac3b8ced51f03/aries.png",arrow_backward:"https://d78fikflryjgj.cloudfront.net/images/emoji/4895dce40fbcb582460345eb92da6577/arrow_backward.png",arrow_double_down:"https://d78fikflryjgj.cloudfront.net/images/emoji/3323dfd40905fbc63a1b67103a3e5970/arrow_double_down.png",arrow_double_up:"https://d78fikflryjgj.cloudfront.net/images/emoji/5cad5a6ff81608d7df7059a11c262bea/arrow_double_up.png",arrow_down:"https://d78fikflryjgj.cloudfront.net/images/emoji/1f6cf1d57ed571effae25df20d6121d6/arrow_down.png",
arrow_down_small:"https://d78fikflryjgj.cloudfront.net/images/emoji/817a34a371cbb6191baea750c4b0d23a/arrow_down_small.png",arrow_forward:"https://d78fikflryjgj.cloudfront.net/images/emoji/9c06f993cbfc2d5c74eeee0c8a58d4a5/arrow_forward.png",arrow_heading_down:"https://d78fikflryjgj.cloudfront.net/images/emoji/d16bd0975cc8ef50a3792a63a6eba308/arrow_heading_down.png",arrow_heading_up:"https://d78fikflryjgj.cloudfront.net/images/emoji/415b637ddde8164a6a1290321c17da75/arrow_heading_up.png",arrow_left:"https://d78fikflryjgj.cloudfront.net/images/emoji/970edb46f2ac979ec3ae817c0d59c5cc/arrow_left.png",
arrow_lower_left:"https://d78fikflryjgj.cloudfront.net/images/emoji/c2b8892bbe774f360b3582b33e66dc0f/arrow_lower_left.png",arrow_lower_right:"https://d78fikflryjgj.cloudfront.net/images/emoji/f3622ad9cfda99031538d4f853885d84/arrow_lower_right.png",arrow_right:"https://d78fikflryjgj.cloudfront.net/images/emoji/aac8aa63620adf9e8eb8489f804f621f/arrow_right.png",arrow_right_hook:"https://d78fikflryjgj.cloudfront.net/images/emoji/08f6c3234dfaa6867f3ca2b695cce688/arrow_right_hook.png",arrow_up:"https://d78fikflryjgj.cloudfront.net/images/emoji/33d4b33d12abb058b0f37aca546c6247/arrow_up.png",
arrow_up_down:"https://d78fikflryjgj.cloudfront.net/images/emoji/618782d4e35683708cd81da4a61dad11/arrow_up_down.png",arrow_up_small:"https://d78fikflryjgj.cloudfront.net/images/emoji/7a80168de52c6e9e4d24721d9777a621/arrow_up_small.png",arrow_upper_left:"https://d78fikflryjgj.cloudfront.net/images/emoji/f3b11dd90e83e1f434060db7f3cebda2/arrow_upper_left.png",arrow_upper_right:"https://d78fikflryjgj.cloudfront.net/images/emoji/c4598dddacd6af5d0f9559b777ddaef3/arrow_upper_right.png",arrows_clockwise:"https://d78fikflryjgj.cloudfront.net/images/emoji/782415cdd05f781df95f32438d7b5c35/arrows_clockwise.png",
arrows_counterclockwise:"https://d78fikflryjgj.cloudfront.net/images/emoji/685335514e840b18be585d961e64f00a/arrows_counterclockwise.png",art:"https://d78fikflryjgj.cloudfront.net/images/emoji/5d7730a4e6ac638412a51897a4352d30/art.png",articulated_lorry:"https://d78fikflryjgj.cloudfront.net/images/emoji/c2517a23d5dfc6518378218334877f4c/articulated_lorry.png",astonished:"https://d78fikflryjgj.cloudfront.net/images/emoji/ae65dd6706611d78533382bcab005037/astonished.png",athletic_shoe:"https://d78fikflryjgj.cloudfront.net/images/emoji/36f024ff008ccbefda7ddffaf401aaed/athletic_shoe.png",
atm:"https://d78fikflryjgj.cloudfront.net/images/emoji/53028816affc2803dea922c9b2038acb/atm.png",b:"https://d78fikflryjgj.cloudfront.net/images/emoji/2629cd16fbbac832ed1fcc905fa10e40/b.png",baby:"https://d78fikflryjgj.cloudfront.net/images/emoji/ae245c721d7db60310b0cc09e25e4962/baby.png",baby_bottle:"https://d78fikflryjgj.cloudfront.net/images/emoji/b4be51a36913c6bb9294c4d22b476dd6/baby_bottle.png",baby_chick:"https://d78fikflryjgj.cloudfront.net/images/emoji/d0ab4e589537ab00b98aa85bde6070b1/baby_chick.png",
baby_symbol:"https://d78fikflryjgj.cloudfront.net/images/emoji/cc09ba45643a58b24f951f23054c43a8/baby_symbol.png",back:"https://d78fikflryjgj.cloudfront.net/images/emoji/8d79972932f839571f1e2cad5ca2a8a5/back.png",baggage_claim:"https://d78fikflryjgj.cloudfront.net/images/emoji/260f28422e44ab2af3383aee09d36759/baggage_claim.png",balloon:"https://d78fikflryjgj.cloudfront.net/images/emoji/ad9cc73a83609752659638dc2b4a9c1d/balloon.png",ballot_box_with_check:"https://d78fikflryjgj.cloudfront.net/images/emoji/c274eb079d03223789da5e14c986d4f9/ballot_box_with_check.png",
bamboo:"https://d78fikflryjgj.cloudfront.net/images/emoji/3811c429564c04e0728c8a0f149fe140/bamboo.png",banana:"https://d78fikflryjgj.cloudfront.net/images/emoji/5a96d729610eab1350a420d4dbd51f47/banana.png",bangbang:"https://d78fikflryjgj.cloudfront.net/images/emoji/7acb7907006e24728f4d5af4ede60d2e/bangbang.png",bank:"https://d78fikflryjgj.cloudfront.net/images/emoji/c2940c1118dca2daee17c635f3d2c395/bank.png",bar_chart:"https://d78fikflryjgj.cloudfront.net/images/emoji/141185d56ded3e0381e8f5e9c695691e/bar_chart.png",
barber:"https://d78fikflryjgj.cloudfront.net/images/emoji/3649eccef1edffbd66a6518b665a41b9/barber.png",baseball:"https://d78fikflryjgj.cloudfront.net/images/emoji/5ae8159911acce8e1734bca36843dc13/baseball.png",basketball:"https://d78fikflryjgj.cloudfront.net/images/emoji/6d9587095cdb75d766ae87a196194c67/basketball.png",bath:"https://d78fikflryjgj.cloudfront.net/images/emoji/cfe863d3f3fbe7d70aa385ac11c5e499/bath.png",bathtub:"https://d78fikflryjgj.cloudfront.net/images/emoji/c8dd639751bd74cae2b96b4d12ae87c6/bathtub.png",
battery:"https://d78fikflryjgj.cloudfront.net/images/emoji/045a933fef69fbdc861a63eb239cebb9/battery.png",bear:"https://d78fikflryjgj.cloudfront.net/images/emoji/4cac59632e8a729e84eeecfca7527e97/bear.png",bee:"https://d78fikflryjgj.cloudfront.net/images/emoji/a6c6f8b940f42688743046634de7a85f/bee.png",beer:"https://d78fikflryjgj.cloudfront.net/images/emoji/97564e2d91aee1c7078986f8502c9d61/beer.png",beers:"https://d78fikflryjgj.cloudfront.net/images/emoji/7ca64d7c7a8cda6e33b5b8c52e2f48c1/beers.png",
beetle:"https://d78fikflryjgj.cloudfront.net/images/emoji/604df6d4431397d9a5b816d5161dd3db/beetle.png",beginner:"https://d78fikflryjgj.cloudfront.net/images/emoji/d47b8ed705bb89b6d7132e7f6228d465/beginner.png",bell:"https://d78fikflryjgj.cloudfront.net/images/emoji/ec1800a348078bcf5bcedade18b22bff/bell.png",bento:"https://d78fikflryjgj.cloudfront.net/images/emoji/0f026275236850b7d1db8e26055a06ec/bento.png",bicyclist:"https://d78fikflryjgj.cloudfront.net/images/emoji/90ab8806c66df3b19472c9750456d27c/bicyclist.png",
bike:"https://d78fikflryjgj.cloudfront.net/images/emoji/e27110732dc3f0feb62e1e38e5896146/bike.png",bikini:"https://d78fikflryjgj.cloudfront.net/images/emoji/6daaca695f8b474deb1aaa5adb1d5863/bikini.png",bird:"https://d78fikflryjgj.cloudfront.net/images/emoji/33802943d9dd72fada05a061cedfab63/bird.png",birthday:"https://d78fikflryjgj.cloudfront.net/images/emoji/82b7253fa54d813b628a487b7a5946ee/birthday.png",black_circle:"https://d78fikflryjgj.cloudfront.net/images/emoji/a05b4473b907df89d71390ffa09e0a5b/black_circle.png",
black_joker:"https://d78fikflryjgj.cloudfront.net/images/emoji/cf9a197eb11b7bb718404d19a01cbeda/black_joker.png",black_large_square:"https://d78fikflryjgj.cloudfront.net/images/emoji/ca3fd8c5e4852ffbbd215ed4e88cfe48/black_large_square.png",black_medium_small_square:"https://d78fikflryjgj.cloudfront.net/images/emoji/841a440c565e5539d57f06cc2d245b4a/black_medium_small_square.png",black_medium_square:"https://d78fikflryjgj.cloudfront.net/images/emoji/e821f72ec5816a81246491ac4501c236/black_medium_square.png",
black_nib:"https://d78fikflryjgj.cloudfront.net/images/emoji/e03a3f291d3219f4f916cd08a16a06b4/black_nib.png",black_small_square:"https://d78fikflryjgj.cloudfront.net/images/emoji/398859c1676c00eb126f038ee7008176/black_small_square.png",black_square_button:"https://d78fikflryjgj.cloudfront.net/images/emoji/176be6ab8eae54ab2db9524adb76ae5b/black_square_button.png",blossom:"https://d78fikflryjgj.cloudfront.net/images/emoji/34fe17fa9e128061362f9b2c34997a12/blossom.png",blowfish:"https://d78fikflryjgj.cloudfront.net/images/emoji/048420e2651ef0874cf8588c20acd4d2/blowfish.png",
blue_book:"https://d78fikflryjgj.cloudfront.net/images/emoji/74707f1e4d7581c732dbb5c6a53fbbc9/blue_book.png",blue_car:"https://d78fikflryjgj.cloudfront.net/images/emoji/32715857a405b8e6a3dc206f9ac12bdf/blue_car.png",blue_heart:"https://d78fikflryjgj.cloudfront.net/images/emoji/1e579d7bece1db6081416d5205a62474/blue_heart.png",blush:"https://d78fikflryjgj.cloudfront.net/images/emoji/5b2cfd1772f827cf9fe052036b217c56/blush.png",boar:"https://d78fikflryjgj.cloudfront.net/images/emoji/5838786ec7b7b2fcb54b2adf563afe0a/boar.png",
boat:"https://d78fikflryjgj.cloudfront.net/images/emoji/c1c1c4dcaa77f509b36a3a170347c90c/boat.png",bomb:"https://d78fikflryjgj.cloudfront.net/images/emoji/435963333346d6cf4011e4d4de7825bc/bomb.png",book:"https://d78fikflryjgj.cloudfront.net/images/emoji/6561272c5be33e5e300e71e8e87ca634/book.png",bookmark:"https://d78fikflryjgj.cloudfront.net/images/emoji/2a7a1cee2c2e9b117dfe33079b80b599/bookmark.png",bookmark_tabs:"https://d78fikflryjgj.cloudfront.net/images/emoji/59b4ea688ffbca172d24a8e32e877764/bookmark_tabs.png",
books:"https://d78fikflryjgj.cloudfront.net/images/emoji/d607a5044b2dd6c9a5360881efbd9870/books.png",boom:"https://d78fikflryjgj.cloudfront.net/images/emoji/ddf586005f3efb385fba44b4cf3f5ecf/boom.png",boot:"https://d78fikflryjgj.cloudfront.net/images/emoji/ffa15e8b3d6318b6e960d0f2ede0cb72/boot.png",bouquet:"https://d78fikflryjgj.cloudfront.net/images/emoji/397e712e135bf9cd01f4ca4e8fbe2686/bouquet.png",bow:"https://d78fikflryjgj.cloudfront.net/images/emoji/958f788ff97c7ce25a43758ba8879e96/bow.png",
bowling:"https://d78fikflryjgj.cloudfront.net/images/emoji/3c4b641b87a7858fe05533b0cb4d997e/bowling.png",bowtie:"https://d78fikflryjgj.cloudfront.net/images/emoji/73de09ce6675cadd59755fc9297f7c49/bowtie.png",boy:"https://d78fikflryjgj.cloudfront.net/images/emoji/026d0e331ac06675ac08ca7e39504aa2/boy.png",bread:"https://d78fikflryjgj.cloudfront.net/images/emoji/383b7d154f96fb76abc5dac273f807db/bread.png",bride_with_veil:"https://d78fikflryjgj.cloudfront.net/images/emoji/ff57d51ad4cdb06dbd74f19e445dec3a/bride_with_veil.png",
bridge_at_night:"https://d78fikflryjgj.cloudfront.net/images/emoji/ebe6fd47f403775923b6ceb54972befa/bridge_at_night.png",briefcase:"https://d78fikflryjgj.cloudfront.net/images/emoji/3f797c75bb6d36ae87cd1253f91f331c/briefcase.png",broken_heart:"https://d78fikflryjgj.cloudfront.net/images/emoji/0df631a3bd1141202f5f2f677c56adba/broken_heart.png",bug:"https://d78fikflryjgj.cloudfront.net/images/emoji/4d1ce95a08e19f1c72e1ce3bc23023b1/bug.png",bulb:"https://d78fikflryjgj.cloudfront.net/images/emoji/4956e92e137d7306f517583ab588be82/bulb.png",
bullettrain_front:"https://d78fikflryjgj.cloudfront.net/images/emoji/bd01d91592d56c6475acfde8301e7196/bullettrain_front.png",bullettrain_side:"https://d78fikflryjgj.cloudfront.net/images/emoji/9990dca7fb2548dafa221339361ed9be/bullettrain_side.png",bus:"https://d78fikflryjgj.cloudfront.net/images/emoji/8bbaca73ae1d1f2601fc40872f5c2f6a/bus.png",busstop:"https://d78fikflryjgj.cloudfront.net/images/emoji/775c2e2d813860e90786786dcf1dc7c5/busstop.png",bust_in_silhouette:"https://d78fikflryjgj.cloudfront.net/images/emoji/046812f68be8c8e15e15e07dfc20bb5e/bust_in_silhouette.png",
busts_in_silhouette:"https://d78fikflryjgj.cloudfront.net/images/emoji/823bca4a1d8446fc02b516d844f15b99/busts_in_silhouette.png",cactus:"https://d78fikflryjgj.cloudfront.net/images/emoji/8f1a8aa7e80a85b9f862dbd7b69166d2/cactus.png",cake:"https://d78fikflryjgj.cloudfront.net/images/emoji/5854edbfed9e4aad0348c9d05f040648/cake.png",calendar:"https://d78fikflryjgj.cloudfront.net/images/emoji/126ce5c060840732c989979c63ed5b4c/calendar.png",calling:"https://d78fikflryjgj.cloudfront.net/images/emoji/05d38f25e8de098d71badaac0d90e474/calling.png",
camel:"https://d78fikflryjgj.cloudfront.net/images/emoji/13800b13aa272e06d742e0f0a0e4b116/camel.png",camera:"https://d78fikflryjgj.cloudfront.net/images/emoji/53706742d28518821162817960cf6a80/camera.png",cancer:"https://d78fikflryjgj.cloudfront.net/images/emoji/81f91c28b72082a2ed24b3c4446210b1/cancer.png",candy:"https://d78fikflryjgj.cloudfront.net/images/emoji/da956b278978a716822152cbb069b727/candy.png",capital_abcd:"https://d78fikflryjgj.cloudfront.net/images/emoji/79030dbcc2f40414b005023b6a3fc0d6/capital_abcd.png",
capricorn:"https://d78fikflryjgj.cloudfront.net/images/emoji/ddb5c888a789b257ae043d658c434683/capricorn.png",car:"https://d78fikflryjgj.cloudfront.net/images/emoji/abf1ef7270298b7e4faa51585b584e4f/car.png",card_index:"https://d78fikflryjgj.cloudfront.net/images/emoji/50fbce751e0a5c5509b8b0601b6b1672/card_index.png",carousel_horse:"https://d78fikflryjgj.cloudfront.net/images/emoji/e54c22c9ebf5713cc3f76fe5f4a95e52/carousel_horse.png",cat:"https://d78fikflryjgj.cloudfront.net/images/emoji/b2ebe9876a60d236f74e40c0d0c437dd/cat.png",
cat2:"https://d78fikflryjgj.cloudfront.net/images/emoji/1a554677df4b067a1dad860a788b7997/cat2.png",cd:"https://d78fikflryjgj.cloudfront.net/images/emoji/404a244b5ef4676baaaf9dd58b4c2a05/cd.png",chart:"https://d78fikflryjgj.cloudfront.net/images/emoji/b9ef3ef8c6e52f683f08f07c2e2b29f4/chart.png",chart_with_downwards_trend:"https://d78fikflryjgj.cloudfront.net/images/emoji/ffc0498b51d6cbc9b0f3d2393b9fd3c9/chart_with_downwards_trend.png",chart_with_upwards_trend:"https://d78fikflryjgj.cloudfront.net/images/emoji/b2db9c7e04da9028dbf2ed04b7c4895d/chart_with_upwards_trend.png",
checkered_flag:"https://d78fikflryjgj.cloudfront.net/images/emoji/5b0272076cb1bca9d89728132c35326c/checkered_flag.png",cherries:"https://d78fikflryjgj.cloudfront.net/images/emoji/eee1d6ba5624741ba3d87711f2040025/cherries.png",cherry_blossom:"https://d78fikflryjgj.cloudfront.net/images/emoji/e881179fbb3f810db386263b6780a417/cherry_blossom.png",chestnut:"https://d78fikflryjgj.cloudfront.net/images/emoji/9bf1cca63f07d7aed4315f0dd389aad9/chestnut.png",chicken:"https://d78fikflryjgj.cloudfront.net/images/emoji/ce9c66ca8d427412639a26aeba3295ce/chicken.png",
children_crossing:"https://d78fikflryjgj.cloudfront.net/images/emoji/336d27ad6e975b47aa0ba6c3f6ed3373/children_crossing.png",chocolate_bar:"https://d78fikflryjgj.cloudfront.net/images/emoji/9e645f96a5c19091407ceaa27e00c3d9/chocolate_bar.png",christmas_tree:"https://d78fikflryjgj.cloudfront.net/images/emoji/8ea555974a24e4eb4d03eb50aafa3fce/christmas_tree.png",church:"https://d78fikflryjgj.cloudfront.net/images/emoji/88e45a879eeaf285d1e200ea91940dfc/church.png",cinema:"https://d78fikflryjgj.cloudfront.net/images/emoji/4ca7678e60458476dba410085b446687/cinema.png",
circus_tent:"https://d78fikflryjgj.cloudfront.net/images/emoji/4de404d51d4cd64fcdc8799955a7a68f/circus_tent.png",city_sunrise:"https://d78fikflryjgj.cloudfront.net/images/emoji/825eac0574320ec85dbca9277a7398f3/city_sunrise.png",city_sunset:"https://d78fikflryjgj.cloudfront.net/images/emoji/6954a73653866780cdd646ee59826f64/city_sunset.png",cl:"https://d78fikflryjgj.cloudfront.net/images/emoji/efb8a21b2574383c3528c5b21f9ec807/cl.png",clap:"https://d78fikflryjgj.cloudfront.net/images/emoji/f342a9b46d2ca0d96910452dc1e41291/clap.png",
clapper:"https://d78fikflryjgj.cloudfront.net/images/emoji/e00bbd737549d1d4dbd775bf719465eb/clapper.png",clipboard:"https://d78fikflryjgj.cloudfront.net/images/emoji/53cec595ea2b473936cd1a24b30844cd/clipboard.png",clock1:"https://d78fikflryjgj.cloudfront.net/images/emoji/882daa0961d027f5647f01af5ece88b4/clock1.png",clock10:"https://d78fikflryjgj.cloudfront.net/images/emoji/b8e179ff2facab085c56e3851545e962/clock10.png",clock1030:"https://d78fikflryjgj.cloudfront.net/images/emoji/278aacf0a0afb23ff3de325f6b334f44/clock1030.png",
clock11:"https://d78fikflryjgj.cloudfront.net/images/emoji/70ca65cbbe3c0c11a78182b48af0a6f7/clock11.png",clock1130:"https://d78fikflryjgj.cloudfront.net/images/emoji/204db35096fb2abbfd60fafb6afc5364/clock1130.png",clock12:"https://d78fikflryjgj.cloudfront.net/images/emoji/6a89764b0a9df58e3a441abe234494a8/clock12.png",clock1230:"https://d78fikflryjgj.cloudfront.net/images/emoji/272c0b90efdcf0d8dc3c5e0c505a669b/clock1230.png",clock130:"https://d78fikflryjgj.cloudfront.net/images/emoji/32283ffcad745398e4b0340f612c17d0/clock130.png",
clock2:"https://d78fikflryjgj.cloudfront.net/images/emoji/5b88e0e539e7655f78456b39368a6d41/clock2.png",clock230:"https://d78fikflryjgj.cloudfront.net/images/emoji/fcf50a6152560afa3a86b075e692a884/clock230.png",clock3:"https://d78fikflryjgj.cloudfront.net/images/emoji/932ebeec5f924e2af9931afeda9e6193/clock3.png",clock330:"https://d78fikflryjgj.cloudfront.net/images/emoji/7a33814d8ee52c9cab018ec1ff40a4a3/clock330.png",clock4:"https://d78fikflryjgj.cloudfront.net/images/emoji/6a666c2f9b19e0231c7215add0181937/clock4.png",
clock430:"https://d78fikflryjgj.cloudfront.net/images/emoji/f8236e3c52e8ca50a1109f931f46b6b7/clock430.png",clock5:"https://d78fikflryjgj.cloudfront.net/images/emoji/102b4a2a58cdeaca12d04c0bf3cac376/clock5.png",clock530:"https://d78fikflryjgj.cloudfront.net/images/emoji/8918b8ab2093c0adb3e2c7c7857124b7/clock530.png",clock6:"https://d78fikflryjgj.cloudfront.net/images/emoji/620b5d603eb3022245f502d7ee3f5ee2/clock6.png",clock630:"https://d78fikflryjgj.cloudfront.net/images/emoji/789389003fa4763cb89a47e6066364a7/clock630.png",
clock7:"https://d78fikflryjgj.cloudfront.net/images/emoji/5c5032d8bb9aefc097c02e0e27ba1539/clock7.png",clock730:"https://d78fikflryjgj.cloudfront.net/images/emoji/8a2d8833a8ec29eeba369d95cf3ba543/clock730.png",clock8:"https://d78fikflryjgj.cloudfront.net/images/emoji/a7a708c4e98b7e3fb17782e9d2efaed2/clock8.png",clock830:"https://d78fikflryjgj.cloudfront.net/images/emoji/19cb7852c06c21ff44eed74663813c6b/clock830.png",clock9:"https://d78fikflryjgj.cloudfront.net/images/emoji/7e4a201f0deb352b815881fd3dacad46/clock9.png",
clock930:"https://d78fikflryjgj.cloudfront.net/images/emoji/65eabdccef310d3e364a6b1ca518978d/clock930.png",closed_book:"https://d78fikflryjgj.cloudfront.net/images/emoji/aa33e361d68e9a87c22bede82e7acde0/closed_book.png",closed_lock_with_key:"https://d78fikflryjgj.cloudfront.net/images/emoji/ff3b3f7d7cc9b04edc4f9ebcc5943510/closed_lock_with_key.png",closed_umbrella:"https://d78fikflryjgj.cloudfront.net/images/emoji/350ad377b4d5f8dfee65b1b17c867b5e/closed_umbrella.png",cloud:"https://d78fikflryjgj.cloudfront.net/images/emoji/ea4bc0ec71175efd1adb964d0f0eee62/cloud.png",
clubs:"https://d78fikflryjgj.cloudfront.net/images/emoji/5d095eee11154d4854afdae13fc08a21/clubs.png",cn:"https://d78fikflryjgj.cloudfront.net/images/emoji/aeb25fda6ec7a7808f579cb9a0686df2/cn.png",cocktail:"https://d78fikflryjgj.cloudfront.net/images/emoji/c6a9668b74f9ccd61e38372c80331cc3/cocktail.png",coffee:"https://d78fikflryjgj.cloudfront.net/images/emoji/06d4e6dde787543889ca7e1d56b4b3f9/coffee.png",cold_sweat:"https://d78fikflryjgj.cloudfront.net/images/emoji/2f8e5a29bd79abcbf50716ad042c3789/cold_sweat.png",
collision:"https://d78fikflryjgj.cloudfront.net/images/emoji/ddf586005f3efb385fba44b4cf3f5ecf/collision.png",computer:"https://d78fikflryjgj.cloudfront.net/images/emoji/73f6916b80552a9097ae888aaa6d4d8c/computer.png",confetti_ball:"https://d78fikflryjgj.cloudfront.net/images/emoji/95e4252669cec7287354aa724e078232/confetti_ball.png",confounded:"https://d78fikflryjgj.cloudfront.net/images/emoji/5ca7ecb902509845a629b3a0615bdf2d/confounded.png",confused:"https://d78fikflryjgj.cloudfront.net/images/emoji/6f7200921e0c36c8b57bce7f3a676755/confused.png",
congratulations:"https://d78fikflryjgj.cloudfront.net/images/emoji/7d2be25699dec42913058d5a84a82885/congratulations.png",construction:"https://d78fikflryjgj.cloudfront.net/images/emoji/7f749f79f760b06c42217d22f8dfe11c/construction.png",construction_worker:"https://d78fikflryjgj.cloudfront.net/images/emoji/761ea847a6d7315b2835474ccbee8c6d/construction_worker.png",convenience_store:"https://d78fikflryjgj.cloudfront.net/images/emoji/8ee9dd3caa0c06aa1fefea40febceb38/convenience_store.png",cookie:"https://d78fikflryjgj.cloudfront.net/images/emoji/4c2450f40a6cb7f786d9ddc8862ca83b/cookie.png",
cool:"https://d78fikflryjgj.cloudfront.net/images/emoji/2827c50fae225439ff6ac51b1bf0a632/cool.png",cop:"https://d78fikflryjgj.cloudfront.net/images/emoji/a8e2b51d2610a2855586960c0f231217/cop.png",copyright:"https://d78fikflryjgj.cloudfront.net/images/emoji/fbe3b4b1d8d3efbcb0a9557ee693e348/copyright.png",corn:"https://d78fikflryjgj.cloudfront.net/images/emoji/e4e4b373ecd30b2235ee472ea9bbea06/corn.png",couple:"https://d78fikflryjgj.cloudfront.net/images/emoji/3b65de8238a0fb2476f4c04cc86efda9/couple.png",
couple_with_heart:"https://d78fikflryjgj.cloudfront.net/images/emoji/168c8e4217f747c6a0a193d66d918814/couple_with_heart.png",couplekiss:"https://d78fikflryjgj.cloudfront.net/images/emoji/9e0dcb6791032bf0557f547bdb21a124/couplekiss.png",cow:"https://d78fikflryjgj.cloudfront.net/images/emoji/d03207d5c7511efa4eb98479fbfd0be3/cow.png",cow2:"https://d78fikflryjgj.cloudfront.net/images/emoji/d8cc045dea278f2683c9ef6b280096bc/cow2.png",credit_card:"https://d78fikflryjgj.cloudfront.net/images/emoji/b6b6e9e0a208b6817dc39352392fe238/credit_card.png",
crescent_moon:"https://d78fikflryjgj.cloudfront.net/images/emoji/49d88f3cfd07a0ae7165a1fddfc82ab1/crescent_moon.png",crocodile:"https://d78fikflryjgj.cloudfront.net/images/emoji/fb903ea20a7aa4ebe688533adba2df2c/crocodile.png",crossed_flags:"https://d78fikflryjgj.cloudfront.net/images/emoji/4439c680ceee55e77d8a0dfdf27e18de/crossed_flags.png",crown:"https://d78fikflryjgj.cloudfront.net/images/emoji/0fd502ff4ca02a7934abb3947343c01d/crown.png",cry:"https://d78fikflryjgj.cloudfront.net/images/emoji/50b0d14555ae34b2589bac53f0961736/cry.png",
crying_cat_face:"https://d78fikflryjgj.cloudfront.net/images/emoji/84d8a8dbf5a88fdb4176deaa394b90cc/crying_cat_face.png",crystal_ball:"https://d78fikflryjgj.cloudfront.net/images/emoji/99ea5d015548be3c0b2c5d7a4dd7fe48/crystal_ball.png",cupid:"https://d78fikflryjgj.cloudfront.net/images/emoji/81615531eae0568a9fcbdd28cf4f3603/cupid.png",curly_loop:"https://d78fikflryjgj.cloudfront.net/images/emoji/368b97171bdc7f20894a37cea0de5858/curly_loop.png",currency_exchange:"https://d78fikflryjgj.cloudfront.net/images/emoji/e70fa67a563b9809747038832719707b/currency_exchange.png",
curry:"https://d78fikflryjgj.cloudfront.net/images/emoji/5f58d7055cca67b52e3a6a062c8585e2/curry.png",custard:"https://d78fikflryjgj.cloudfront.net/images/emoji/92c388864c6b043df093e554271c257c/custard.png",customs:"https://d78fikflryjgj.cloudfront.net/images/emoji/fe7ace16f33e07ae83e8e0861c53b71c/customs.png",cyclone:"https://d78fikflryjgj.cloudfront.net/images/emoji/24dc815c9286f1e64808da2eb7662e5b/cyclone.png",dancer:"https://d78fikflryjgj.cloudfront.net/images/emoji/d6000eabf08d50191b110ecd1bb7555e/dancer.png",
dancers:"https://d78fikflryjgj.cloudfront.net/images/emoji/45190bfcdc3a46fcef007ccb353e4699/dancers.png",dango:"https://d78fikflryjgj.cloudfront.net/images/emoji/90f46f7317db550ec18b349caf0791a8/dango.png",dart:"https://d78fikflryjgj.cloudfront.net/images/emoji/23775f9b6e2c85c19354758824c563dd/dart.png",dash:"https://d78fikflryjgj.cloudfront.net/images/emoji/69da06f1eafe70f7d21ca25e9c789c84/dash.png",date:"https://d78fikflryjgj.cloudfront.net/images/emoji/cb5d858c0ea28f4f5cfc2e125d72830e/date.png",
de:"https://d78fikflryjgj.cloudfront.net/images/emoji/fd6b1db4c5c636b0db109f6078896aec/de.png",deciduous_tree:"https://d78fikflryjgj.cloudfront.net/images/emoji/6cfb9c3655b657f6b5a3299d9709a561/deciduous_tree.png",department_store:"https://d78fikflryjgj.cloudfront.net/images/emoji/0f36f9fdd0b33cad6e7f2e8811b5c09c/department_store.png",diamond_shape_with_a_dot_inside:"https://d78fikflryjgj.cloudfront.net/images/emoji/c0243db9d3d5558faa351bbd2617f8c7/diamond_shape_with_a_dot_inside.png",diamonds:"https://d78fikflryjgj.cloudfront.net/images/emoji/62f886cd7ab0be6b5878277a7f000ebf/diamonds.png",
disappointed:"https://d78fikflryjgj.cloudfront.net/images/emoji/4145de5ddf63f745d4608e9dbf5485f3/disappointed.png",disappointed_relieved:"https://d78fikflryjgj.cloudfront.net/images/emoji/a7b1dae660fd732c0b74740551a457e8/disappointed_relieved.png",dizzy:"https://d78fikflryjgj.cloudfront.net/images/emoji/919453cbe211895258cf14a9401fd02d/dizzy.png",dizzy_face:"https://d78fikflryjgj.cloudfront.net/images/emoji/4b7a43b87b92f14f0dc7d6de6d609141/dizzy_face.png",do_not_litter:"https://d78fikflryjgj.cloudfront.net/images/emoji/4d32cd9a84403711040758a1863b51fa/do_not_litter.png",
dog:"https://d78fikflryjgj.cloudfront.net/images/emoji/7e4b2365f2611866c041969f8f0a0aa3/dog.png",dog2:"https://d78fikflryjgj.cloudfront.net/images/emoji/0826ceb6b5d734768aacca88b6b61322/dog2.png",dollar:"https://d78fikflryjgj.cloudfront.net/images/emoji/16ffaa41863419b583f6758aac236cf9/dollar.png",dolls:"https://d78fikflryjgj.cloudfront.net/images/emoji/f0474864d3917c86f682ba1b10a3b9a4/dolls.png",dolphin:"https://d78fikflryjgj.cloudfront.net/images/emoji/e2681094bda06307b66364a4daff006f/dolphin.png",
door:"https://d78fikflryjgj.cloudfront.net/images/emoji/c2712508b20cd87e4f7e4937c8b96b76/door.png",doughnut:"https://d78fikflryjgj.cloudfront.net/images/emoji/a282bf5cba01abf01f0dc9a266a55891/doughnut.png",dragon:"https://d78fikflryjgj.cloudfront.net/images/emoji/0d123d0ba37d50c824a4ca6340833680/dragon.png",dragon_face:"https://d78fikflryjgj.cloudfront.net/images/emoji/4b40408361ab7ad90ceac2ee7a590a71/dragon_face.png",dress:"https://d78fikflryjgj.cloudfront.net/images/emoji/178d46b4a471314bb8d2078f022c297f/dress.png",
dromedary_camel:"https://d78fikflryjgj.cloudfront.net/images/emoji/fae304ce06580c780c58ef6efaf7f9b1/dromedary_camel.png",droplet:"https://d78fikflryjgj.cloudfront.net/images/emoji/3f1f9931b25e05ad3599f681334000d1/droplet.png",dvd:"https://d78fikflryjgj.cloudfront.net/images/emoji/b451d5693f2bc61fe69b0ab3c6b68ced/dvd.png","e-mail":"https://d78fikflryjgj.cloudfront.net/images/emoji/fba7b6ecc5456013513ed1474bee9b90/e-mail.png",ear:"https://d78fikflryjgj.cloudfront.net/images/emoji/17f8979cf99e502c164140be9056211f/ear.png",
ear_of_rice:"https://d78fikflryjgj.cloudfront.net/images/emoji/12a11a324fc8ef0ea903013af13394c3/ear_of_rice.png",earth_africa:"https://d78fikflryjgj.cloudfront.net/images/emoji/131d46af66224436762df67f7a799e3c/earth_africa.png",earth_americas:"https://d78fikflryjgj.cloudfront.net/images/emoji/c710661fa6000ba3ffdbe42f70219063/earth_americas.png",earth_asia:"https://d78fikflryjgj.cloudfront.net/images/emoji/a6d220eb13015f762054d243f06e75a3/earth_asia.png",egg:"https://d78fikflryjgj.cloudfront.net/images/emoji/bbcc80f6035892002a94f7dff30cea61/egg.png",
eggplant:"https://d78fikflryjgj.cloudfront.net/images/emoji/c6743d7582b47d54cb672fc68cfb725d/eggplant.png",eight:"https://d78fikflryjgj.cloudfront.net/images/emoji/d01706294ea77a538496376c9429c77b/eight.png",eight_pointed_black_star:"https://d78fikflryjgj.cloudfront.net/images/emoji/7bc21d67acd4b44d248ae89283bf87e8/eight_pointed_black_star.png",eight_spoked_asterisk:"https://d78fikflryjgj.cloudfront.net/images/emoji/97ec7f4a6266aff7b7f07e4bca7f1358/eight_spoked_asterisk.png",electric_plug:"https://d78fikflryjgj.cloudfront.net/images/emoji/0ffacdb29ec38cfc327ec6f784d77443/electric_plug.png",
elephant:"https://d78fikflryjgj.cloudfront.net/images/emoji/75d89b44a9d974425369472ee00414ad/elephant.png",email:"https://d78fikflryjgj.cloudfront.net/images/emoji/1fabc149ec15ded868eb7d32d9d10daa/email.png",end:"https://d78fikflryjgj.cloudfront.net/images/emoji/5793390e4de633d7baec09fc6cbfa7b3/end.png",envelope:"https://d78fikflryjgj.cloudfront.net/images/emoji/1fabc149ec15ded868eb7d32d9d10daa/envelope.png",envelope_with_arrow:"https://d78fikflryjgj.cloudfront.net/images/emoji/e2b6bc654f1d5170735fd7fa5de02d8b/envelope_with_arrow.png",
es:"https://d78fikflryjgj.cloudfront.net/images/emoji/9e8a8d6bc5e64afbdb9839e58454f6b8/es.png",euro:"https://d78fikflryjgj.cloudfront.net/images/emoji/96ee1235d3a4339cac0d9a515a5d0ccb/euro.png",european_castle:"https://d78fikflryjgj.cloudfront.net/images/emoji/608b39899571685e3c95dd071f4e8e2a/european_castle.png",european_post_office:"https://d78fikflryjgj.cloudfront.net/images/emoji/70c6c39af8cc1df2f0a4438401688c6f/european_post_office.png",evergreen_tree:"https://d78fikflryjgj.cloudfront.net/images/emoji/d6abc94c9825ae86175b09c4d005d056/evergreen_tree.png",
exclamation:"https://d78fikflryjgj.cloudfront.net/images/emoji/56399206fd046f4499d820e1bed93f43/exclamation.png",expressionless:"https://d78fikflryjgj.cloudfront.net/images/emoji/b5484b7b019c8d96bd0cd59fd027102a/expressionless.png",eyeglasses:"https://d78fikflryjgj.cloudfront.net/images/emoji/caffd40ac5e0dd54145128c212772a27/eyeglasses.png",eyes:"https://d78fikflryjgj.cloudfront.net/images/emoji/eb697aad09b733789a819b908acfbae6/eyes.png",facepalm:"https://d78fikflryjgj.cloudfront.net/images/emoji/2288768c1bed245ca6801c6cdf6fe029/facepalm.png",
facepunch:"https://d78fikflryjgj.cloudfront.net/images/emoji/0902dded44c402bd7707bcd447dbe33c/facepunch.png",factory:"https://d78fikflryjgj.cloudfront.net/images/emoji/f55dfda77c13bd3a7ed49a4a5e7945ec/factory.png",fallen_leaf:"https://d78fikflryjgj.cloudfront.net/images/emoji/95358eb5cfc87a496db7848bafa88740/fallen_leaf.png",family:"https://d78fikflryjgj.cloudfront.net/images/emoji/d95fc7aa21ebc573c11a85c3881d3927/family.png",fast_forward:"https://d78fikflryjgj.cloudfront.net/images/emoji/3bc55373d7e7d053e0c0fc37116c3e6b/fast_forward.png",
fax:"https://d78fikflryjgj.cloudfront.net/images/emoji/65afa262a89b88935ae2182bab928fd5/fax.png",fearful:"https://d78fikflryjgj.cloudfront.net/images/emoji/3b8b18c0108ef96ba9f8b9cf230b4224/fearful.png",feelsgood:"https://d78fikflryjgj.cloudfront.net/images/emoji/4fab33ad41d47ca1e4104662adba4a96/feelsgood.png",feet:"https://d78fikflryjgj.cloudfront.net/images/emoji/a8fda9184043373f1891bdc8bfff8919/feet.png",ferris_wheel:"https://d78fikflryjgj.cloudfront.net/images/emoji/94232f8c9ed9e17408e19d641fc2f23e/ferris_wheel.png",
file_folder:"https://d78fikflryjgj.cloudfront.net/images/emoji/3e6fbd09769b2718dec27d89d3c42767/file_folder.png",finnadie:"https://d78fikflryjgj.cloudfront.net/images/emoji/a06963383cf98607925b04ac460867c3/finnadie.png",fire:"https://d78fikflryjgj.cloudfront.net/images/emoji/ed6d1412dd1363f8e943dc274baa80e9/fire.png",fire_engine:"https://d78fikflryjgj.cloudfront.net/images/emoji/51e5132bd36d91c9c0b12c7e6fdc3738/fire_engine.png",fireworks:"https://d78fikflryjgj.cloudfront.net/images/emoji/dfe615f29d76e6c294faf0e90037d2d0/fireworks.png",
first_quarter_moon:"https://d78fikflryjgj.cloudfront.net/images/emoji/fa4cec74535c853115923bf73f7284a0/first_quarter_moon.png",first_quarter_moon_with_face:"https://d78fikflryjgj.cloudfront.net/images/emoji/49fd3137f67a10767a3ababfc1377bdb/first_quarter_moon_with_face.png",fish:"https://d78fikflryjgj.cloudfront.net/images/emoji/217da876c1f56ddaf68dd7872fd5d52d/fish.png",fish_cake:"https://d78fikflryjgj.cloudfront.net/images/emoji/59ecf24c2d47f9d0477f5db83602e142/fish_cake.png",fishing_pole_and_fish:"https://d78fikflryjgj.cloudfront.net/images/emoji/3e4752beaec776965bad466532d44f1c/fishing_pole_and_fish.png",
fist:"https://d78fikflryjgj.cloudfront.net/images/emoji/e43314959a71c5371221a0941776f382/fist.png",five:"https://d78fikflryjgj.cloudfront.net/images/emoji/1ac6e38d32f78a82bbe66c28a1e12171/five.png",flags:"https://d78fikflryjgj.cloudfront.net/images/emoji/26007c146603038de9dc2bffe4c184aa/flags.png",flashlight:"https://d78fikflryjgj.cloudfront.net/images/emoji/4674188219042dcd733b7a7e6612da14/flashlight.png",flipper:"https://d78fikflryjgj.cloudfront.net/images/emoji/e2681094bda06307b66364a4daff006f/flipper.png",
floppy_disk:"https://d78fikflryjgj.cloudfront.net/images/emoji/ea0837ae63ec0ad4a04d350020da5496/floppy_disk.png",flower_playing_cards:"https://d78fikflryjgj.cloudfront.net/images/emoji/dca4585185d51c3d3793cffe35d785d1/flower_playing_cards.png",flushed:"https://d78fikflryjgj.cloudfront.net/images/emoji/a592c4f95188fbcc4e785ca0847fe2b0/flushed.png",foggy:"https://d78fikflryjgj.cloudfront.net/images/emoji/0e0f07212b04fa6d115ea989bf7d0c96/foggy.png",football:"https://d78fikflryjgj.cloudfront.net/images/emoji/2d58ac46fb26501cd23262c2a7ea014c/football.png",
footprints:"https://d78fikflryjgj.cloudfront.net/images/emoji/f10532514820e5bc2a7809a41594eb3e/footprints.png",fork_and_knife:"https://d78fikflryjgj.cloudfront.net/images/emoji/2dc66dcde7d4b6a1d2556d0facf4eb8b/fork_and_knife.png",fountain:"https://d78fikflryjgj.cloudfront.net/images/emoji/d455da22e5c3ef3180f9b0d41fe1cdd2/fountain.png",four:"https://d78fikflryjgj.cloudfront.net/images/emoji/aac6493750398c1169b9343c6902f2cc/four.png",four_leaf_clover:"https://d78fikflryjgj.cloudfront.net/images/emoji/40d3669cc88281aaf23e4bff8f31d51f/four_leaf_clover.png",
fr:"https://d78fikflryjgj.cloudfront.net/images/emoji/2c80adb041ec39143c3098f053868d8f/fr.png",free:"https://d78fikflryjgj.cloudfront.net/images/emoji/b54e770c12c83060703037f621cfe17b/free.png",fried_shrimp:"https://d78fikflryjgj.cloudfront.net/images/emoji/9c6a592d04832f5139cf8aa6de597736/fried_shrimp.png",fries:"https://d78fikflryjgj.cloudfront.net/images/emoji/08ab69eb404574615f3bb9569d496ca3/fries.png",frog:"https://d78fikflryjgj.cloudfront.net/images/emoji/d3b3f0dc3416f8f5f4a4e5b4d742c687/frog.png",
frowning:"https://d78fikflryjgj.cloudfront.net/images/emoji/d2e23f78eef57f6683f5e3e4c0e16343/frowning.png",fu:"https://d78fikflryjgj.cloudfront.net/images/emoji/cac361a2a3da22d4bea4f192ca0ab151/fu.png",fuelpump:"https://d78fikflryjgj.cloudfront.net/images/emoji/ad90f27571ec9a002efb795b1c21bdea/fuelpump.png",full_moon:"https://d78fikflryjgj.cloudfront.net/images/emoji/dacc780014fc85556767221e2112bbc7/full_moon.png",full_moon_with_face:"https://d78fikflryjgj.cloudfront.net/images/emoji/5ac3188cf68489fb38e6d8e9ce256da7/full_moon_with_face.png",
game_die:"https://d78fikflryjgj.cloudfront.net/images/emoji/5e420fdbf01d1db3f1cd4f4f01ea6a15/game_die.png",gb:"https://d78fikflryjgj.cloudfront.net/images/emoji/085a66819b0bbc0133620b7b8688da1d/gb.png",gem:"https://d78fikflryjgj.cloudfront.net/images/emoji/3c47cd174e9ee92020168ccfb17d6d59/gem.png",gemini:"https://d78fikflryjgj.cloudfront.net/images/emoji/6563bbc6da452d335ede6f1e3de063d0/gemini.png",ghost:"https://d78fikflryjgj.cloudfront.net/images/emoji/01d789f3fe24b5c9c6a67a116fc516db/ghost.png",
gift:"https://d78fikflryjgj.cloudfront.net/images/emoji/6a7f536b329eeb9c60d9238a3ab9595d/gift.png",gift_heart:"https://d78fikflryjgj.cloudfront.net/images/emoji/e459178df0ca62152725273abf19bdfd/gift_heart.png",girl:"https://d78fikflryjgj.cloudfront.net/images/emoji/465c49417b71ccae1d41fad2cdcb1bd1/girl.png",globe_with_meridians:"https://d78fikflryjgj.cloudfront.net/images/emoji/e659ff5ef8a530d4c1a25f949f8d1b9b/globe_with_meridians.png",goat:"https://d78fikflryjgj.cloudfront.net/images/emoji/6a6d61612c7a7f1370e37b4f65f443f6/goat.png",
goberserk:"https://d78fikflryjgj.cloudfront.net/images/emoji/7eb1342916d725e1c970f0c3521a687e/goberserk.png",godmode:"https://d78fikflryjgj.cloudfront.net/images/emoji/349eb939241a6514e49c8cef3d2cb03b/godmode.png",golf:"https://d78fikflryjgj.cloudfront.net/images/emoji/ec72de4b5a8e13b5e5af372d4e4e6f7d/golf.png",grapes:"https://d78fikflryjgj.cloudfront.net/images/emoji/2d68ac5f4c47083f592809b231b17bd7/grapes.png",green_apple:"https://d78fikflryjgj.cloudfront.net/images/emoji/06b8a11f08563454f2f4cae1e4e67f28/green_apple.png",
green_book:"https://d78fikflryjgj.cloudfront.net/images/emoji/c36f6132347c57ac36fa49d5f12aab05/green_book.png",green_heart:"https://d78fikflryjgj.cloudfront.net/images/emoji/9a0ed337039fcf450ae95739a2fe3e18/green_heart.png",grey_exclamation:"https://d78fikflryjgj.cloudfront.net/images/emoji/72629bcca32cd65180aa8f0d27841969/grey_exclamation.png",grey_question:"https://d78fikflryjgj.cloudfront.net/images/emoji/c06c1d0b519b96c541c23335c9f088c4/grey_question.png",grimacing:"https://d78fikflryjgj.cloudfront.net/images/emoji/ebe859c119c9e383559bb5fb441f0687/grimacing.png",
grin:"https://d78fikflryjgj.cloudfront.net/images/emoji/c15d783a8ecbd12cb276a85e54002bc6/grin.png",grinning:"https://d78fikflryjgj.cloudfront.net/images/emoji/dafb0c0c3345e8da60e93973c353ea12/grinning.png",guardsman:"https://d78fikflryjgj.cloudfront.net/images/emoji/d071c494323aed0ffb5edee581408590/guardsman.png",guitar:"https://d78fikflryjgj.cloudfront.net/images/emoji/1743c39f2a1c335faf174bc6294b3a4b/guitar.png",gun:"https://d78fikflryjgj.cloudfront.net/images/emoji/48545d1c648f1e835afd46a9a75ef877/gun.png",
haircut:"https://d78fikflryjgj.cloudfront.net/images/emoji/40023b2c6af14da6f35801037094b680/haircut.png",hamburger:"https://d78fikflryjgj.cloudfront.net/images/emoji/36d446caf9e1bb7738ac994665caa9d6/hamburger.png",hammer:"https://d78fikflryjgj.cloudfront.net/images/emoji/9494abc1928a405a7f91500dce41560e/hammer.png",hamster:"https://d78fikflryjgj.cloudfront.net/images/emoji/086e2141c22bb6657325e41151c31879/hamster.png",hand:"https://d78fikflryjgj.cloudfront.net/images/emoji/cb59e7620a3028058a5ed6c51d1890fa/hand.png",
handbag:"https://d78fikflryjgj.cloudfront.net/images/emoji/3a915be880b3e31d99b090fd905b9251/handbag.png",hankey:"https://d78fikflryjgj.cloudfront.net/images/emoji/62d03c1e2d8608f29540b097b7cf1ab1/hankey.png",hash:"https://d78fikflryjgj.cloudfront.net/images/emoji/75c61a8abc5e41eb9b5d8c34b174425f/hash.png",hatched_chick:"https://d78fikflryjgj.cloudfront.net/images/emoji/18dd00d94aaad388a43e209e69d2a136/hatched_chick.png",hatching_chick:"https://d78fikflryjgj.cloudfront.net/images/emoji/8aa993affa31b0c6788ef7b322895d1d/hatching_chick.png",
headphones:"https://d78fikflryjgj.cloudfront.net/images/emoji/6349aaddf8a1d0b1f2b963a740022ef4/headphones.png",hear_no_evil:"https://d78fikflryjgj.cloudfront.net/images/emoji/b9099bbabde151e8d1979e57c51e521c/hear_no_evil.png",heart:"https://d78fikflryjgj.cloudfront.net/images/emoji/cd1d2bed2bd302bca7fd6d2c61a8c1c9/heart.png",heart_decoration:"https://d78fikflryjgj.cloudfront.net/images/emoji/a7da588b4ef5e3084670c5aa9e5d9715/heart_decoration.png",heart_eyes:"https://d78fikflryjgj.cloudfront.net/images/emoji/e6f06b33a6dd19ea5eff73b94456a9ac/heart_eyes.png",
heart_eyes_cat:"https://d78fikflryjgj.cloudfront.net/images/emoji/18e218a3ccf076c35b446149946a6e62/heart_eyes_cat.png",heartbeat:"https://d78fikflryjgj.cloudfront.net/images/emoji/21b870f4b04731d17732b16a323bcdeb/heartbeat.png",heartpulse:"https://d78fikflryjgj.cloudfront.net/images/emoji/b8149aecdddda64c6129e3b58d9dda3f/heartpulse.png",hearts:"https://d78fikflryjgj.cloudfront.net/images/emoji/017db558db824576d0de1de798d9998f/hearts.png",heavy_check_mark:"https://d78fikflryjgj.cloudfront.net/images/emoji/a01e0f7d345acc3abd919d51db30104c/heavy_check_mark.png",
heavy_division_sign:"https://d78fikflryjgj.cloudfront.net/images/emoji/c74e2ce77d25af618a6b96c90041fe48/heavy_division_sign.png",heavy_dollar_sign:"https://d78fikflryjgj.cloudfront.net/images/emoji/9efb3dd47af22cfb9fcd7115a8393c50/heavy_dollar_sign.png",heavy_exclamation_mark:"https://d78fikflryjgj.cloudfront.net/images/emoji/56399206fd046f4499d820e1bed93f43/heavy_exclamation_mark.png",heavy_minus_sign:"https://d78fikflryjgj.cloudfront.net/images/emoji/af4eb6738ce85d3ea39c241fec531573/heavy_minus_sign.png",
heavy_multiplication_x:"https://d78fikflryjgj.cloudfront.net/images/emoji/0ea18860059daa65721dd9cae3e48a7f/heavy_multiplication_x.png",heavy_plus_sign:"https://d78fikflryjgj.cloudfront.net/images/emoji/8cbea532738b413d46013c55090c0185/heavy_plus_sign.png",helicopter:"https://d78fikflryjgj.cloudfront.net/images/emoji/d6092527a7653ed25389077c5dc9eb3b/helicopter.png",herb:"https://d78fikflryjgj.cloudfront.net/images/emoji/b7807160c3409a46346d9dc8ffbdcc46/herb.png",hibiscus:"https://d78fikflryjgj.cloudfront.net/images/emoji/9e8c93b5644b65f050be2648177af4e5/hibiscus.png",
high_brightness:"https://d78fikflryjgj.cloudfront.net/images/emoji/06dab0a332d9d4b7e838b2ada7d0bca4/high_brightness.png",high_heel:"https://d78fikflryjgj.cloudfront.net/images/emoji/339854302caba793574eeefa675fac6d/high_heel.png",hocho:"https://d78fikflryjgj.cloudfront.net/images/emoji/39da9e0c736f3c0e9c1881b5f22cb657/hocho.png",honey_pot:"https://d78fikflryjgj.cloudfront.net/images/emoji/c0cf25d01c5573c3c273852bf4746732/honey_pot.png",honeybee:"https://d78fikflryjgj.cloudfront.net/images/emoji/a6c6f8b940f42688743046634de7a85f/honeybee.png",
horse:"https://d78fikflryjgj.cloudfront.net/images/emoji/4c7a2b0d09f7d488a0a7387537d6ce31/horse.png",horse_racing:"https://d78fikflryjgj.cloudfront.net/images/emoji/778b4b19d5daef7f307f1187c36b5339/horse_racing.png",hospital:"https://d78fikflryjgj.cloudfront.net/images/emoji/28c0bf64a3f77113803e6fc599d65a89/hospital.png",hotel:"https://d78fikflryjgj.cloudfront.net/images/emoji/f0960a574518f14ac547696c26b4198f/hotel.png",hotsprings:"https://d78fikflryjgj.cloudfront.net/images/emoji/7082c89dfc0e26b9e1b8954e7061e114/hotsprings.png",
hourglass:"https://d78fikflryjgj.cloudfront.net/images/emoji/46d4b9d4790023470d33e1ed44f9e79a/hourglass.png",hourglass_flowing_sand:"https://d78fikflryjgj.cloudfront.net/images/emoji/a2476f6ddb1b611309a0273e62468638/hourglass_flowing_sand.png",house:"https://d78fikflryjgj.cloudfront.net/images/emoji/13e39bb5bc594a5aeb3d692517e7e28a/house.png",house_with_garden:"https://d78fikflryjgj.cloudfront.net/images/emoji/b419ea4a988ec696481380ead96e0994/house_with_garden.png",hurtrealbad:"https://d78fikflryjgj.cloudfront.net/images/emoji/3a9763040f4d724ecbd596db875b5ec7/hurtrealbad.png",
hushed:"https://d78fikflryjgj.cloudfront.net/images/emoji/a9f825f3b828a6e1bcd133cff7e292ec/hushed.png",ice_cream:"https://d78fikflryjgj.cloudfront.net/images/emoji/0eaffdfd183f2fc5da2eeea9361d0090/ice_cream.png",icecream:"https://d78fikflryjgj.cloudfront.net/images/emoji/9f43da7088e343f857fecdd7b1f3c288/icecream.png",id:"https://d78fikflryjgj.cloudfront.net/images/emoji/a5d7678912379dec7a0692bd616266ab/id.png",ideograph_advantage:"https://d78fikflryjgj.cloudfront.net/images/emoji/5b36fdb07b35abe6d2277f50fad40d3a/ideograph_advantage.png",
imp:"https://d78fikflryjgj.cloudfront.net/images/emoji/aa80e7bfc8da6a05f2e321aea6c31f70/imp.png",inbox_tray:"https://d78fikflryjgj.cloudfront.net/images/emoji/156701c7ff5b68ff82e4146d00d24b48/inbox_tray.png",incoming_envelope:"https://d78fikflryjgj.cloudfront.net/images/emoji/a70057747af68fbb6342c9b4b8d007ce/incoming_envelope.png",information_desk_person:"https://d78fikflryjgj.cloudfront.net/images/emoji/f63fade86e02ed609af315d2dedf4b32/information_desk_person.png",information_source:"https://d78fikflryjgj.cloudfront.net/images/emoji/60509a206d963ee971cded6331f56cc5/information_source.png",
innocent:"https://d78fikflryjgj.cloudfront.net/images/emoji/b9607bffbadcba3ecd752edee529d313/innocent.png",interrobang:"https://d78fikflryjgj.cloudfront.net/images/emoji/e829a530301e217e92835bcd94e688c0/interrobang.png",iphone:"https://d78fikflryjgj.cloudfront.net/images/emoji/0fdf60a9c7442152b745a1dd50476a0a/iphone.png",it:"https://d78fikflryjgj.cloudfront.net/images/emoji/f9e55f1296649f6ee155349ffcfca32d/it.png",izakaya_lantern:"https://d78fikflryjgj.cloudfront.net/images/emoji/b44fed7fe34b70be7f70649a002bbd0c/izakaya_lantern.png",
jack_o_lantern:"https://d78fikflryjgj.cloudfront.net/images/emoji/47e5081c9f4b79087a9e0c1fbfb68a78/jack_o_lantern.png",japan:"https://d78fikflryjgj.cloudfront.net/images/emoji/8916ca263393ed4ab6f39f28c2e86cfd/japan.png",japanese_castle:"https://d78fikflryjgj.cloudfront.net/images/emoji/41653c7ccb48b2a0d330aa4931ce752f/japanese_castle.png",japanese_goblin:"https://d78fikflryjgj.cloudfront.net/images/emoji/702e368ae4dc45326bbc396a709c74ea/japanese_goblin.png",japanese_ogre:"https://d78fikflryjgj.cloudfront.net/images/emoji/089910184703190781a1c80515c37f93/japanese_ogre.png",
jeans:"https://d78fikflryjgj.cloudfront.net/images/emoji/8b5313bcb8724428fe77d373d7cb765c/jeans.png",joy:"https://d78fikflryjgj.cloudfront.net/images/emoji/636a452085e2c332a4c71911e6a85c8f/joy.png",joy_cat:"https://d78fikflryjgj.cloudfront.net/images/emoji/488a8a3a2aad5c2b72d155c0257497ae/joy_cat.png",jp:"https://d78fikflryjgj.cloudfront.net/images/emoji/7729a2e82da52292549ccd653555a7d2/jp.png",key:"https://d78fikflryjgj.cloudfront.net/images/emoji/e1fa3fe5469224bbd122ada8a28a8ce7/key.png",keycap_ten:"https://d78fikflryjgj.cloudfront.net/images/emoji/73d4356aeaf44638d50054e33da200a4/keycap_ten.png",
kimono:"https://d78fikflryjgj.cloudfront.net/images/emoji/11d856c22b4c8510d6d38d0096c0ab88/kimono.png",kiss:"https://d78fikflryjgj.cloudfront.net/images/emoji/4d4222bcfdc05251c9286407c4fc7940/kiss.png",kissing:"https://d78fikflryjgj.cloudfront.net/images/emoji/acf2ff3b8da32c02f20c4d6af0623995/kissing.png",kissing_cat:"https://d78fikflryjgj.cloudfront.net/images/emoji/2f68401a7d27bb033c65e440649d6656/kissing_cat.png",kissing_closed_eyes:"https://d78fikflryjgj.cloudfront.net/images/emoji/649cbca78ac5d84807b7c542179fe2c8/kissing_closed_eyes.png",
kissing_heart:"https://d78fikflryjgj.cloudfront.net/images/emoji/8b694693575c6f8ab2f5f26a73493d28/kissing_heart.png",kissing_smiling_eyes:"https://d78fikflryjgj.cloudfront.net/images/emoji/ea98be72feacb0bbc4bf2f95060187ea/kissing_smiling_eyes.png",koala:"https://d78fikflryjgj.cloudfront.net/images/emoji/3b4cba0d6c71d792a5b74c57548205fd/koala.png",koko:"https://d78fikflryjgj.cloudfront.net/images/emoji/5eae4c99b86771bcfb0f5f9e9206ffba/koko.png",kr:"https://d78fikflryjgj.cloudfront.net/images/emoji/c034218c74762c36ada955b885b47d38/kr.png",
lantern:"https://d78fikflryjgj.cloudfront.net/images/emoji/b44fed7fe34b70be7f70649a002bbd0c/lantern.png",large_blue_circle:"https://d78fikflryjgj.cloudfront.net/images/emoji/72c7834e2bd3209314296621113ffc73/large_blue_circle.png",large_blue_diamond:"https://d78fikflryjgj.cloudfront.net/images/emoji/655cc16a2c4901ce7b5647b79d8b93b3/large_blue_diamond.png",large_orange_diamond:"https://d78fikflryjgj.cloudfront.net/images/emoji/aaa43e423d6092941d25d9b1d76b253e/large_orange_diamond.png",last_quarter_moon:"https://d78fikflryjgj.cloudfront.net/images/emoji/4296435a74885d8582214998f3080853/last_quarter_moon.png",
last_quarter_moon_with_face:"https://d78fikflryjgj.cloudfront.net/images/emoji/f2f8a0faae72959046a99b59bc2d5677/last_quarter_moon_with_face.png",laughing:"https://d78fikflryjgj.cloudfront.net/images/emoji/f5f1d1dc4c1737305d7089d46dd996bf/laughing.png",leaves:"https://d78fikflryjgj.cloudfront.net/images/emoji/cefbf86a652c6fbe7634bebc9198beb3/leaves.png",ledger:"https://d78fikflryjgj.cloudfront.net/images/emoji/0f801705318a9a96df30ec7f45b4eb7d/ledger.png",left_luggage:"https://d78fikflryjgj.cloudfront.net/images/emoji/086274676f1a061d29eee36c9927590f/left_luggage.png",
left_right_arrow:"https://d78fikflryjgj.cloudfront.net/images/emoji/adad9c8fe7641f36ead88a19f9050b41/left_right_arrow.png",leftwards_arrow_with_hook:"https://d78fikflryjgj.cloudfront.net/images/emoji/8e99f8a048788b0ceeb6fae5c0b0547a/leftwards_arrow_with_hook.png",lemon:"https://d78fikflryjgj.cloudfront.net/images/emoji/c37f06948ca7cf986810616ac5b2c0e4/lemon.png",leo:"https://d78fikflryjgj.cloudfront.net/images/emoji/54aca40c97d642279d2faf5f1455aa42/leo.png",leopard:"https://d78fikflryjgj.cloudfront.net/images/emoji/addce2e8d62e7f3eab9246555fc7e785/leopard.png",
libra:"https://d78fikflryjgj.cloudfront.net/images/emoji/91b2bce4c73a7588dd26999853f2266f/libra.png",light_rail:"https://d78fikflryjgj.cloudfront.net/images/emoji/04ce285024390d3d106af5eb7ca8d95f/light_rail.png",link:"https://d78fikflryjgj.cloudfront.net/images/emoji/7a4f4c929a2e52c6886d33d9e4a24f2d/link.png",lips:"https://d78fikflryjgj.cloudfront.net/images/emoji/b3b04b940fd2d69178d2fef1d385d485/lips.png",lipstick:"https://d78fikflryjgj.cloudfront.net/images/emoji/76e7e9726e472f415e10da211ee1c1a1/lipstick.png",
lock:"https://d78fikflryjgj.cloudfront.net/images/emoji/cebb6a4d3266954c9590a9b6da12fd25/lock.png",lock_with_ink_pen:"https://d78fikflryjgj.cloudfront.net/images/emoji/b2b3fc83d455eda3effb2869470e92b8/lock_with_ink_pen.png",lollipop:"https://d78fikflryjgj.cloudfront.net/images/emoji/1e0a1f81b3786f6fb9aaf7dc794367e5/lollipop.png",loop:"https://d78fikflryjgj.cloudfront.net/images/emoji/79848c1d1b6267d36be821a0d640facb/loop.png",loudspeaker:"https://d78fikflryjgj.cloudfront.net/images/emoji/16b66988ccb6b0f087686b9b39404336/loudspeaker.png",
love_hotel:"https://d78fikflryjgj.cloudfront.net/images/emoji/0ec7826bd541fef623438512197b080c/love_hotel.png",love_letter:"https://d78fikflryjgj.cloudfront.net/images/emoji/6a06d6209cacfc0be2296cd2a3849082/love_letter.png",low_brightness:"https://d78fikflryjgj.cloudfront.net/images/emoji/1c59fc780f17cef0158a99dfdb143e4a/low_brightness.png",m:"https://d78fikflryjgj.cloudfront.net/images/emoji/c1cecf01098bccfbf72061dbb3aac7eb/m.png",mag:"https://d78fikflryjgj.cloudfront.net/images/emoji/e8e3fb2f552f35238b2c123cc315637f/mag.png",
mag_right:"https://d78fikflryjgj.cloudfront.net/images/emoji/54c6493e4ad20cd1f1b30ed3bdebcb67/mag_right.png",mahjong:"https://d78fikflryjgj.cloudfront.net/images/emoji/3340fc9be1bbfae133700ec7ff9012db/mahjong.png",mailbox:"https://d78fikflryjgj.cloudfront.net/images/emoji/a31a438a7add9390d9fdaa6f282a6121/mailbox.png",mailbox_closed:"https://d78fikflryjgj.cloudfront.net/images/emoji/ae370d245fb136322a5b7e688b4c8a82/mailbox_closed.png",mailbox_with_mail:"https://d78fikflryjgj.cloudfront.net/images/emoji/12adf52a9ba0fa79f8a502565ab9f1b3/mailbox_with_mail.png",
mailbox_with_no_mail:"https://d78fikflryjgj.cloudfront.net/images/emoji/6bf04d14cdd4a67c3361403d6936d2cd/mailbox_with_no_mail.png",man:"https://d78fikflryjgj.cloudfront.net/images/emoji/1577b06c8e417060cda41b778cbde84e/man.png",man_with_gua_pi_mao:"https://d78fikflryjgj.cloudfront.net/images/emoji/5ea246d8336a7860252e1d04da923c8c/man_with_gua_pi_mao.png",man_with_turban:"https://d78fikflryjgj.cloudfront.net/images/emoji/824acad4c2bb299ec7f42a03d6989f7a/man_with_turban.png",mans_shoe:"https://d78fikflryjgj.cloudfront.net/images/emoji/d5161dfe10dd32fcdaeb81a14cad6697/mans_shoe.png",
maple_leaf:"https://d78fikflryjgj.cloudfront.net/images/emoji/90e99ec31f7aa5e298962dac4c6b6a32/maple_leaf.png",mask:"https://d78fikflryjgj.cloudfront.net/images/emoji/cae71f039823518cfce8686dad8cc17e/mask.png",massage:"https://d78fikflryjgj.cloudfront.net/images/emoji/24cae3ab3cd299e47205ae57e2aea6c3/massage.png",meat_on_bone:"https://d78fikflryjgj.cloudfront.net/images/emoji/70d83288d413d9d3eb861a00de114a5a/meat_on_bone.png",mega:"https://d78fikflryjgj.cloudfront.net/images/emoji/da36aeb77941f1c8cb98a4332ab732d7/mega.png",
melon:"https://d78fikflryjgj.cloudfront.net/images/emoji/5e6bef7c2a5205af4a2ea06bfefadb1d/melon.png",memo:"https://d78fikflryjgj.cloudfront.net/images/emoji/f6cfa3a3462ba1190ed39229b86a1a10/memo.png",mens:"https://d78fikflryjgj.cloudfront.net/images/emoji/5d0d61c1bdab0af397f29508e6c9a3fe/mens.png",metal:"https://d78fikflryjgj.cloudfront.net/images/emoji/19a06afa1c2bf8f82f6f3b25ccfb6545/metal.png",metro:"https://d78fikflryjgj.cloudfront.net/images/emoji/cbdcc310fb83a886bb71e7dde93c6c0c/metro.png",
microphone:"https://d78fikflryjgj.cloudfront.net/images/emoji/ee594eb27e0618d93f970a4135565aa5/microphone.png",microscope:"https://d78fikflryjgj.cloudfront.net/images/emoji/331c2818c8bce4bfd81ea1ce86ef3f04/microscope.png",milky_way:"https://d78fikflryjgj.cloudfront.net/images/emoji/e7a4ab2eda7760b45bd7aedb277b96e3/milky_way.png",minibus:"https://d78fikflryjgj.cloudfront.net/images/emoji/25eb106c8b48f87149f7c9e9651d7fa4/minibus.png",minidisc:"https://d78fikflryjgj.cloudfront.net/images/emoji/67d1609432bed2a9ae967d73c3cdef70/minidisc.png",
mobile_phone_off:"https://d78fikflryjgj.cloudfront.net/images/emoji/7456a8db603180bbe6189e8034bd88e7/mobile_phone_off.png",money_with_wings:"https://d78fikflryjgj.cloudfront.net/images/emoji/ae262ef34240d2944b2cd741d29a4a3e/money_with_wings.png",moneybag:"https://d78fikflryjgj.cloudfront.net/images/emoji/9efcc0c67a26df55b14eb6e3f3d05bcf/moneybag.png",monkey:"https://d78fikflryjgj.cloudfront.net/images/emoji/a706cb475889c4f45e51c63c79127d07/monkey.png",monkey_face:"https://d78fikflryjgj.cloudfront.net/images/emoji/1b4df9455e64e7be3c051c3e044c4819/monkey_face.png",
monorail:"https://d78fikflryjgj.cloudfront.net/images/emoji/37c4f4b4b635839dec0ea6b7c2f057a0/monorail.png",moon:"https://d78fikflryjgj.cloudfront.net/images/emoji/c1c65fc03c3c8cb9a54b16ec2a408e4e/moon.png",mortar_board:"https://d78fikflryjgj.cloudfront.net/images/emoji/f9ee64820c57ac5555525a11d1e92117/mortar_board.png",mount_fuji:"https://d78fikflryjgj.cloudfront.net/images/emoji/041fc11a3612d68a8eaeb3d0fa5a9713/mount_fuji.png",mountain_bicyclist:"https://d78fikflryjgj.cloudfront.net/images/emoji/21a249d3f9414bad776bf5070b5e8621/mountain_bicyclist.png",
mountain_cableway:"https://d78fikflryjgj.cloudfront.net/images/emoji/d93e6a284c0b4b140ab2c83a913a0af4/mountain_cableway.png",mountain_railway:"https://d78fikflryjgj.cloudfront.net/images/emoji/d21f8250957890156e5f60e75252fb31/mountain_railway.png",mouse:"https://d78fikflryjgj.cloudfront.net/images/emoji/c0de488a582a0a97f64e155a8c65de18/mouse.png",mouse2:"https://d78fikflryjgj.cloudfront.net/images/emoji/c927300435aa070e3fddd65e4974a6e1/mouse2.png",movie_camera:"https://d78fikflryjgj.cloudfront.net/images/emoji/ebccb1d2c6dc92bd3a51da8eae9fd354/movie_camera.png",
moyai:"https://d78fikflryjgj.cloudfront.net/images/emoji/43b67438400b69f3a9beed6121c22688/moyai.png",muscle:"https://d78fikflryjgj.cloudfront.net/images/emoji/7187e328aab3950edb42439d40328607/muscle.png",mushroom:"https://d78fikflryjgj.cloudfront.net/images/emoji/a59c3afc18365c6fa6a0f54e8fb5554d/mushroom.png",music:"https://d78fikflryjgj.cloudfront.net/images/emoji/361f0f4a517fc60e63bb22b9ea76b0b2/music.jpg",musical_keyboard:"https://d78fikflryjgj.cloudfront.net/images/emoji/3aee034296f32ec83c2bd1c20fc00e6d/musical_keyboard.png",
musical_note:"https://d78fikflryjgj.cloudfront.net/images/emoji/71bc5277028326ed7755b5c94dd7b888/musical_note.png",musical_score:"https://d78fikflryjgj.cloudfront.net/images/emoji/b35bd7ef3f4a6068656639824cd1fe4e/musical_score.png",mute:"https://d78fikflryjgj.cloudfront.net/images/emoji/4ffdbb077fd861e1fa62782b6d2c72d2/mute.png",nail_care:"https://d78fikflryjgj.cloudfront.net/images/emoji/35f7cf66f35a659c5428be8ade972986/nail_care.png",name_badge:"https://d78fikflryjgj.cloudfront.net/images/emoji/25aa610337041e819f07d4d542976f11/name_badge.png",
neckbeard:"https://d78fikflryjgj.cloudfront.net/images/emoji/518e18ca0e08f31f8052a131642f3205/neckbeard.png",necktie:"https://d78fikflryjgj.cloudfront.net/images/emoji/4d08459a90e6cf7e02b3f1b99c98ae3e/necktie.png",negative_squared_cross_mark:"https://d78fikflryjgj.cloudfront.net/images/emoji/e60fb1507239236215739a1a76ad44a0/negative_squared_cross_mark.png",neutral_face:"https://d78fikflryjgj.cloudfront.net/images/emoji/fc2ed49a98346a5dbbc6869435eabb7a/neutral_face.png","new":"https://d78fikflryjgj.cloudfront.net/images/emoji/d95933a8bd68f0805aed8aecc0159e7b/new.png",
new_moon:"https://d78fikflryjgj.cloudfront.net/images/emoji/9b85eeb013d04d1e939d17ac007d0a20/new_moon.png",new_moon_with_face:"https://d78fikflryjgj.cloudfront.net/images/emoji/4975ad970c876ee3d1036693237235d6/new_moon_with_face.png",newspaper:"https://d78fikflryjgj.cloudfront.net/images/emoji/5e0ceab7b2f18a18b7d26ba5d8c200f0/newspaper.png",ng:"https://d78fikflryjgj.cloudfront.net/images/emoji/6c58dd8212db140eb21510cd0849db77/ng.png",nine:"https://d78fikflryjgj.cloudfront.net/images/emoji/df004afc8313840dc25c313785f4b118/nine.png",
no_bell:"https://d78fikflryjgj.cloudfront.net/images/emoji/38c2d31067ddb724760775b50938aef3/no_bell.png",no_bicycles:"https://d78fikflryjgj.cloudfront.net/images/emoji/a1f2222d0575aa1bc0dd553825e4f21d/no_bicycles.png",no_entry:"https://d78fikflryjgj.cloudfront.net/images/emoji/e631b022ac357962d30a670f3b6456d6/no_entry.png",no_entry_sign:"https://d78fikflryjgj.cloudfront.net/images/emoji/89ff918256b6b1716a47d71bf68c33cb/no_entry_sign.png",no_good:"https://d78fikflryjgj.cloudfront.net/images/emoji/6562b71960c6c0404ad5a559c7eef3dc/no_good.png",
no_mobile_phones:"https://d78fikflryjgj.cloudfront.net/images/emoji/61a340d367e756ff8ba919fca9d3f095/no_mobile_phones.png",no_mouth:"https://d78fikflryjgj.cloudfront.net/images/emoji/7c85e801f438e3f43214b94ead1ba67c/no_mouth.png",no_pedestrians:"https://d78fikflryjgj.cloudfront.net/images/emoji/89f0375ae34ef8572f47a1e8daaad6af/no_pedestrians.png",no_smoking:"https://d78fikflryjgj.cloudfront.net/images/emoji/e22ff4bcc817f10f8b8d9190ef17f2d0/no_smoking.png","non-potable_water":"https://d78fikflryjgj.cloudfront.net/images/emoji/41f9e3518129dfdc82cd0234bed9d8ac/non-potable_water.png",
nose:"https://d78fikflryjgj.cloudfront.net/images/emoji/5b882e710946c61069bc3d4b378690d5/nose.png",notebook:"https://d78fikflryjgj.cloudfront.net/images/emoji/9ecc79ee62d1828463f809befc04a719/notebook.png",notebook_with_decorative_cover:"https://d78fikflryjgj.cloudfront.net/images/emoji/6990f2bd9df9c926df9586bf253dbe20/notebook_with_decorative_cover.png",notes:"https://d78fikflryjgj.cloudfront.net/images/emoji/07a93240a9643e4514be61eee9b5d7b3/notes.png",nut_and_bolt:"https://d78fikflryjgj.cloudfront.net/images/emoji/b578e531c38f5b0502a70c19b93ff209/nut_and_bolt.png",
o:"https://d78fikflryjgj.cloudfront.net/images/emoji/6492aeed3ab36bcf58c1d063fd142ed0/o.png",o2:"https://d78fikflryjgj.cloudfront.net/images/emoji/71f85cf734c09341867599108d92da2d/o2.png",ocean:"https://d78fikflryjgj.cloudfront.net/images/emoji/f4f0b6f057dd0e7b831cf3fc1aca5ad4/ocean.png",octocat:"https://d78fikflryjgj.cloudfront.net/images/emoji/11603b5f852fff5dac56f151f584f6f0/octocat.png",octopus:"https://d78fikflryjgj.cloudfront.net/images/emoji/5bb8ee408b94d1c8034123dbc13aa5b5/octopus.png",oden:"https://d78fikflryjgj.cloudfront.net/images/emoji/859ac805cdd8ed4c3f2fe7cc3ae55257/oden.png",
office:"https://d78fikflryjgj.cloudfront.net/images/emoji/99b1e97dbeac60dcd5a1ca143c14acb7/office.png",ok:"https://d78fikflryjgj.cloudfront.net/images/emoji/61c87d0539163f93393c23aeeb0a17ea/ok.png",ok_hand:"https://d78fikflryjgj.cloudfront.net/images/emoji/7ce53418730e9e756c0c2cae2788614e/ok_hand.png",ok_woman:"https://d78fikflryjgj.cloudfront.net/images/emoji/03c5344a3bd8a7c5d814f179da4aba57/ok_woman.png",older_man:"https://d78fikflryjgj.cloudfront.net/images/emoji/713c3600cf40e669d4006e52adc58faf/older_man.png",
older_woman:"https://d78fikflryjgj.cloudfront.net/images/emoji/6194efd58fed29a0be4f5fbf0cf1150a/older_woman.png",on:"https://d78fikflryjgj.cloudfront.net/images/emoji/a586fc7fb16e85cf5dc5eccc03ce106b/on.png",oncoming_automobile:"https://d78fikflryjgj.cloudfront.net/images/emoji/8ee7c5290461c967016ae03359b0a118/oncoming_automobile.png",oncoming_bus:"https://d78fikflryjgj.cloudfront.net/images/emoji/c19a2aeb7ec1e2b2dad9ddfcabf1bd61/oncoming_bus.png",oncoming_police_car:"https://d78fikflryjgj.cloudfront.net/images/emoji/8ca38748b269a8502a72b28aa4c84f59/oncoming_police_car.png",
oncoming_taxi:"https://d78fikflryjgj.cloudfront.net/images/emoji/402d341a1f3d41b75c668b8ba7e795d3/oncoming_taxi.png",one:"https://d78fikflryjgj.cloudfront.net/images/emoji/c029957ab6ca4a748d0ec334d5edd3d5/one.png",open_book:"https://d78fikflryjgj.cloudfront.net/images/emoji/6561272c5be33e5e300e71e8e87ca634/open_book.png",open_file_folder:"https://d78fikflryjgj.cloudfront.net/images/emoji/791b80441b131c75f15f731d39a5e2b0/open_file_folder.png",open_hands:"https://d78fikflryjgj.cloudfront.net/images/emoji/59cfbdcdf4f323dfa6b8fec35d79aaaf/open_hands.png",
open_mouth:"https://d78fikflryjgj.cloudfront.net/images/emoji/b18226f8245ffeca723ba0fb971c76af/open_mouth.png",ophiuchus:"https://d78fikflryjgj.cloudfront.net/images/emoji/5499c05d99613c748340aeb43366278b/ophiuchus.png",orange_book:"https://d78fikflryjgj.cloudfront.net/images/emoji/a0684b83602ec9ef586028f976a76b6f/orange_book.png",outbox_tray:"https://d78fikflryjgj.cloudfront.net/images/emoji/4f422591f29fa0da13d42eae03e44d85/outbox_tray.png",ox:"https://d78fikflryjgj.cloudfront.net/images/emoji/f86c1314dc3a6356aa64786b57d65f69/ox.png",
"package":"https://d78fikflryjgj.cloudfront.net/images/emoji/05e8c1b57c20f0027f9aa377111fb0f0/package.png",page_facing_up:"https://d78fikflryjgj.cloudfront.net/images/emoji/2b3a048e8e3d5565633f25467830cdb1/page_facing_up.png",page_with_curl:"https://d78fikflryjgj.cloudfront.net/images/emoji/cfc926669509cc197c2163e27f9c17cf/page_with_curl.png",pager:"https://d78fikflryjgj.cloudfront.net/images/emoji/c5a864179c023e12b23bc894e7b1a91f/pager.png",palm_tree:"https://d78fikflryjgj.cloudfront.net/images/emoji/2b1089d4a70fa8e4caea20863b63e866/palm_tree.png",
panda_face:"https://d78fikflryjgj.cloudfront.net/images/emoji/41e65ae1364b355bb8d9cc7e3331faa1/panda_face.png",paperclip:"https://d78fikflryjgj.cloudfront.net/images/emoji/f2dfa71ed7df1c249f9262183fbf6d9b/paperclip.png",parking:"https://d78fikflryjgj.cloudfront.net/images/emoji/7ab7803b39ad97188911dd4af353d319/parking.png",part_alternation_mark:"https://d78fikflryjgj.cloudfront.net/images/emoji/0791db87fb9785e78a4b6f29fce93263/part_alternation_mark.png",partly_sunny:"https://d78fikflryjgj.cloudfront.net/images/emoji/2602a711a92b9291fb23791f054c9261/partly_sunny.png",
passport_control:"https://d78fikflryjgj.cloudfront.net/images/emoji/9855ebf10f38524bfefe9762865f0729/passport_control.png",paw_prints:"https://d78fikflryjgj.cloudfront.net/images/emoji/a8fda9184043373f1891bdc8bfff8919/paw_prints.png",peach:"https://d78fikflryjgj.cloudfront.net/images/emoji/374080a5b22616916d8da5fddcab0213/peach.png",pear:"https://d78fikflryjgj.cloudfront.net/images/emoji/a5ce0a642565ea62643c8f6ca7e6cee8/pear.png",pencil:"https://d78fikflryjgj.cloudfront.net/images/emoji/f6cfa3a3462ba1190ed39229b86a1a10/pencil.png",
pencil2:"https://d78fikflryjgj.cloudfront.net/images/emoji/f2ec4e6af86cca9294ad9449c940481a/pencil2.png",penguin:"https://d78fikflryjgj.cloudfront.net/images/emoji/d0cb90399627f60db83b98d638ad02e4/penguin.png",pensive:"https://d78fikflryjgj.cloudfront.net/images/emoji/f1413fc2e99b52d4000309a8ae1e205b/pensive.png",performing_arts:"https://d78fikflryjgj.cloudfront.net/images/emoji/399b4bfafd5cd1d0011dee64574c90f3/performing_arts.png",persevere:"https://d78fikflryjgj.cloudfront.net/images/emoji/3e8b834b5dd8982ba994ca61a9f6cd00/persevere.png",
person_frowning:"https://d78fikflryjgj.cloudfront.net/images/emoji/771b66dbb62e496bb605f98a0fc47b0e/person_frowning.png",person_with_blond_hair:"https://d78fikflryjgj.cloudfront.net/images/emoji/e90b426aa7a0b030a51a82691ffcaf92/person_with_blond_hair.png",person_with_pouting_face:"https://d78fikflryjgj.cloudfront.net/images/emoji/270f674632a95053eb392857a8861898/person_with_pouting_face.png",phone:"https://d78fikflryjgj.cloudfront.net/images/emoji/63303b0721fe2adafa094bcca0e346aa/phone.png",pig:"https://d78fikflryjgj.cloudfront.net/images/emoji/f2d2664ade06a1953f952ed85d23ec14/pig.png",
pig2:"https://d78fikflryjgj.cloudfront.net/images/emoji/d9be6f23c45b8b2fff067e93f5b5656a/pig2.png",pig_nose:"https://d78fikflryjgj.cloudfront.net/images/emoji/8ba39600b630c38592cd8107d44061d0/pig_nose.png",pill:"https://d78fikflryjgj.cloudfront.net/images/emoji/b1b7e477bd5c84b4a6709b5bbc886278/pill.png",pineapple:"https://d78fikflryjgj.cloudfront.net/images/emoji/bb96567f9cab8e6432c9d5d4e1001a78/pineapple.png",pisces:"https://d78fikflryjgj.cloudfront.net/images/emoji/030c43061ed25086517350f519753cf1/pisces.png",
pizza:"https://d78fikflryjgj.cloudfront.net/images/emoji/9f2a86bc2b4310fbff890752c4b53d46/pizza.png",point_down:"https://d78fikflryjgj.cloudfront.net/images/emoji/8e7ab4e1b5954e9692d2d1a2aa4a1dc1/point_down.png",point_left:"https://d78fikflryjgj.cloudfront.net/images/emoji/fe58cda82393f6ed8a8dc202a9b9e08a/point_left.png",point_right:"https://d78fikflryjgj.cloudfront.net/images/emoji/5cbb5a27c9880bea349237a886c73dc4/point_right.png",point_up:"https://d78fikflryjgj.cloudfront.net/images/emoji/4805888040f92847e9622369411b4e4f/point_up.png",
point_up_2:"https://d78fikflryjgj.cloudfront.net/images/emoji/df44d25e90861f72ef32af899f8605c8/point_up_2.png",police_car:"https://d78fikflryjgj.cloudfront.net/images/emoji/c5260b647c8c1c35c1c3075232a40b79/police_car.png",poodle:"https://d78fikflryjgj.cloudfront.net/images/emoji/4527790ab71140e5318ad60cdf05d63c/poodle.png",poop:"https://d78fikflryjgj.cloudfront.net/images/emoji/62d03c1e2d8608f29540b097b7cf1ab1/poop.png",post_office:"https://d78fikflryjgj.cloudfront.net/images/emoji/0ade4130dd0c510afed780e715aa97a6/post_office.png",
postal_horn:"https://d78fikflryjgj.cloudfront.net/images/emoji/4022a22938b199c5d55821237b6855af/postal_horn.png",postbox:"https://d78fikflryjgj.cloudfront.net/images/emoji/ee26132ee651347d38bd25b3204a7706/postbox.png",potable_water:"https://d78fikflryjgj.cloudfront.net/images/emoji/759ced65bb8ab040bd726ef177898396/potable_water.png",pouch:"https://d78fikflryjgj.cloudfront.net/images/emoji/64d1082c34458b69127140c6351dc607/pouch.png",poultry_leg:"https://d78fikflryjgj.cloudfront.net/images/emoji/ca4741488b6f5da0cecb1b697bc8324c/poultry_leg.png",
pound:"https://d78fikflryjgj.cloudfront.net/images/emoji/9e06d52c8dbb4dc46e2855e1e11fb8f6/pound.png",pouting_cat:"https://d78fikflryjgj.cloudfront.net/images/emoji/4351ec51799f825cda20db3c275b9f27/pouting_cat.png",pray:"https://d78fikflryjgj.cloudfront.net/images/emoji/85aed007f516935008b3b0805fdfcf6d/pray.png",princess:"https://d78fikflryjgj.cloudfront.net/images/emoji/43eb5b6c78a40f98aeb3822c3b1b3892/princess.png",punch:"https://d78fikflryjgj.cloudfront.net/images/emoji/0902dded44c402bd7707bcd447dbe33c/punch.png",
purple_heart:"https://d78fikflryjgj.cloudfront.net/images/emoji/d3bc83d90ed2945042afc3be196b408c/purple_heart.png",purse:"https://d78fikflryjgj.cloudfront.net/images/emoji/b17c7b853c4b6cbcd9a0b8897c9e9c4c/purse.png",pushpin:"https://d78fikflryjgj.cloudfront.net/images/emoji/dfa27faa78f3f465d951c36e623e14cb/pushpin.png",put_litter_in_its_place:"https://d78fikflryjgj.cloudfront.net/images/emoji/c8cc8331921d14a3facb2cc7b8a0984d/put_litter_in_its_place.png",question:"https://d78fikflryjgj.cloudfront.net/images/emoji/ee8d27253348b9d7d7a2d19324b6cd30/question.png",
rabbit:"https://d78fikflryjgj.cloudfront.net/images/emoji/0e92e27e564a86fde4fdcc31e376887d/rabbit.png",rabbit2:"https://d78fikflryjgj.cloudfront.net/images/emoji/8a1c9ab0194c3053dc9775127d4abdbc/rabbit2.png",racehorse:"https://d78fikflryjgj.cloudfront.net/images/emoji/3cddf4d88285a1af630a83cf0eec8e26/racehorse.png",radio:"https://d78fikflryjgj.cloudfront.net/images/emoji/a22945426a36edae0077be7382b86413/radio.png",radio_button:"https://d78fikflryjgj.cloudfront.net/images/emoji/c194f475ecddd76a3eb73018b7470d97/radio_button.png",
rage:"https://d78fikflryjgj.cloudfront.net/images/emoji/d45b08290d40d64174c5e31b1d32cb5d/rage.png",rage1:"https://d78fikflryjgj.cloudfront.net/images/emoji/99af14cd4602ac04b9f106a6953c4446/rage1.png",rage2:"https://d78fikflryjgj.cloudfront.net/images/emoji/b9b041ae30d95826dbf8e7bdc3647993/rage2.png",rage3:"https://d78fikflryjgj.cloudfront.net/images/emoji/ba38f5caeb38b839048349bd40bd0bec/rage3.png",rage4:"https://d78fikflryjgj.cloudfront.net/images/emoji/cc3cf42b2362565bf0f456a76e879feb/rage4.png",
railway_car:"https://d78fikflryjgj.cloudfront.net/images/emoji/cca6ec820134c0aaf652c4088fad5065/railway_car.png",rainbow:"https://d78fikflryjgj.cloudfront.net/images/emoji/27846ff7537f3f00734c520c6321998c/rainbow.png",raised_hand:"https://d78fikflryjgj.cloudfront.net/images/emoji/cb59e7620a3028058a5ed6c51d1890fa/raised_hand.png",raised_hands:"https://d78fikflryjgj.cloudfront.net/images/emoji/209d64742c31ac9ffe446f7469e7c7b6/raised_hands.png",raising_hand:"https://d78fikflryjgj.cloudfront.net/images/emoji/ab19218df270318c8756ba197e166d38/raising_hand.png",
ram:"https://d78fikflryjgj.cloudfront.net/images/emoji/df6513ef97d0acd33b61b6bf6b43c417/ram.png",ramen:"https://d78fikflryjgj.cloudfront.net/images/emoji/487fb3bb0723ff71fa4eeb73b366d390/ramen.png",rat:"https://d78fikflryjgj.cloudfront.net/images/emoji/c7dc9b9477e4d0f2651b98e978ba339f/rat.png",recycle:"https://d78fikflryjgj.cloudfront.net/images/emoji/7c1e1793a9e79acceb2173f7d9da1f54/recycle.png",red_car:"https://d78fikflryjgj.cloudfront.net/images/emoji/abf1ef7270298b7e4faa51585b584e4f/red_car.png",
red_circle:"https://d78fikflryjgj.cloudfront.net/images/emoji/153f03a0ad9a4d5a18bfc57059afd636/red_circle.png",registered:"https://d78fikflryjgj.cloudfront.net/images/emoji/f7894c9f4446abfc4d37623186ec953c/registered.png",relaxed:"https://d78fikflryjgj.cloudfront.net/images/emoji/3f154c14aace003c1fca160133b772ab/relaxed.png",relieved:"https://d78fikflryjgj.cloudfront.net/images/emoji/2c2868a75fe9ad1d75515bc5e717c675/relieved.png",repeat:"https://d78fikflryjgj.cloudfront.net/images/emoji/2b115f0853f4546303fa67afc33a8af6/repeat.png",
repeat_one:"https://d78fikflryjgj.cloudfront.net/images/emoji/e914db414db7e58e60116dea187a6c71/repeat_one.png",restroom:"https://d78fikflryjgj.cloudfront.net/images/emoji/c29c5275ef27edf0f14ffe8ae335df4d/restroom.png",revolving_hearts:"https://d78fikflryjgj.cloudfront.net/images/emoji/3db37c791c853f199e886bd972edfb96/revolving_hearts.png",rewind:"https://d78fikflryjgj.cloudfront.net/images/emoji/f9460239b03da9344e31ea3ba52746d5/rewind.png",ribbon:"https://d78fikflryjgj.cloudfront.net/images/emoji/4f2b6a292ba60d862e40e2ef13e2a62a/ribbon.png",
rice:"https://d78fikflryjgj.cloudfront.net/images/emoji/35c9a0c0b4830ca3f75de2c85e53c700/rice.png",rice_ball:"https://d78fikflryjgj.cloudfront.net/images/emoji/6b9c5b2f0698b31537e43aa93c8438a9/rice_ball.png",rice_cracker:"https://d78fikflryjgj.cloudfront.net/images/emoji/cb1b26860f72f23a9709aeac30617e5f/rice_cracker.png",rice_scene:"https://d78fikflryjgj.cloudfront.net/images/emoji/2f97f5bed6acd05d769be29275fa62fe/rice_scene.png",ring:"https://d78fikflryjgj.cloudfront.net/images/emoji/2908bc63e660771fc7708c2218fea126/ring.png",
rocket:"https://d78fikflryjgj.cloudfront.net/images/emoji/be56f079c737a67020cd6994f3f3b13f/rocket.png",roller_coaster:"https://d78fikflryjgj.cloudfront.net/images/emoji/f0b7bb125e9cefc573ea3914053c546b/roller_coaster.png",rooster:"https://d78fikflryjgj.cloudfront.net/images/emoji/5b3c725ce3eb9c9849b7dd5641328c1b/rooster.png",rose:"https://d78fikflryjgj.cloudfront.net/images/emoji/2e1af2089c900f0ed6fa7bf3a23f4c08/rose.png",rotating_light:"https://d78fikflryjgj.cloudfront.net/images/emoji/643ae146ac155d47d60541f9ef96301a/rotating_light.png",
round_pushpin:"https://d78fikflryjgj.cloudfront.net/images/emoji/35674e63d4925731eb1875e43c541d3b/round_pushpin.png",rowboat:"https://d78fikflryjgj.cloudfront.net/images/emoji/6d2517405400de0bdcf73410f819b15a/rowboat.png",ru:"https://d78fikflryjgj.cloudfront.net/images/emoji/edc8c0c6b2c2869090606a1882e75f47/ru.png",rugby_football:"https://d78fikflryjgj.cloudfront.net/images/emoji/c3744fb02e7d1f3a4a32fbc6a6943792/rugby_football.png",runner:"https://d78fikflryjgj.cloudfront.net/images/emoji/4e3175b51a9c997f085181cfa8da7c36/runner.png",
running:"https://d78fikflryjgj.cloudfront.net/images/emoji/4e3175b51a9c997f085181cfa8da7c36/running.png",running_shirt_with_sash:"https://d78fikflryjgj.cloudfront.net/images/emoji/3181720b903304fa1e2da3766cf62bf0/running_shirt_with_sash.png",sa:"https://d78fikflryjgj.cloudfront.net/images/emoji/bd8299075344913c5e923a0702a7f143/sa.png",sagittarius:"https://d78fikflryjgj.cloudfront.net/images/emoji/8debd5e660dde3cad7f2bb4b7a13c9c2/sagittarius.png",sailboat:"https://d78fikflryjgj.cloudfront.net/images/emoji/c1c1c4dcaa77f509b36a3a170347c90c/sailboat.png",
sake:"https://d78fikflryjgj.cloudfront.net/images/emoji/9b07b746a9d397a7200a68e8a2d16a03/sake.png",sandal:"https://d78fikflryjgj.cloudfront.net/images/emoji/e215e96ad7a2b296e0fefb3e005bd45f/sandal.png",santa:"https://d78fikflryjgj.cloudfront.net/images/emoji/790b6c33d2b13c296bfe4472affb8f50/santa.png",satellite:"https://d78fikflryjgj.cloudfront.net/images/emoji/a016460345a00fe9d93ed067834552d7/satellite.png",satisfied:"https://d78fikflryjgj.cloudfront.net/images/emoji/f5f1d1dc4c1737305d7089d46dd996bf/satisfied.png",
saxophone:"https://d78fikflryjgj.cloudfront.net/images/emoji/79863731d88ccf9dcdd0e110929b59c0/saxophone.png",school:"https://d78fikflryjgj.cloudfront.net/images/emoji/cd789b11d96ce09e99b354ae219f2890/school.png",school_satchel:"https://d78fikflryjgj.cloudfront.net/images/emoji/b90a70c87a38c0d30b9ff3b0bbe3687b/school_satchel.png",scissors:"https://d78fikflryjgj.cloudfront.net/images/emoji/8ca7f1e5ec3a423e591c77a6c4a059ae/scissors.png",scorpius:"https://d78fikflryjgj.cloudfront.net/images/emoji/517b5593aca229b1ea153bd7d886506d/scorpius.png",
scream:"https://d78fikflryjgj.cloudfront.net/images/emoji/57f9298e911d478258de5d7f2a814f4a/scream.png",scream_cat:"https://d78fikflryjgj.cloudfront.net/images/emoji/7800fc2bad7a7c15f627808565478120/scream_cat.png",scroll:"https://d78fikflryjgj.cloudfront.net/images/emoji/9934ae517aa1827a8166c9e157b742f1/scroll.png",seat:"https://d78fikflryjgj.cloudfront.net/images/emoji/e54262ec6414ceedc36aa66350d6b905/seat.png",secret:"https://d78fikflryjgj.cloudfront.net/images/emoji/400f5564a3036103c18ec3a87a210071/secret.png",
see_no_evil:"https://d78fikflryjgj.cloudfront.net/images/emoji/e372b8c7f97db8e0dadcc4715c579b3d/see_no_evil.png",seedling:"https://d78fikflryjgj.cloudfront.net/images/emoji/a76ebecb541e69df48e734cccf806381/seedling.png",seven:"https://d78fikflryjgj.cloudfront.net/images/emoji/6630566add5e4b2910bfa93fcae43056/seven.png",shaved_ice:"https://d78fikflryjgj.cloudfront.net/images/emoji/7d6eb0eb12fd345870f116199f24400e/shaved_ice.png",sheep:"https://d78fikflryjgj.cloudfront.net/images/emoji/61346bec218f84bcd3c2ec4a68e4ce29/sheep.png",
shell:"https://d78fikflryjgj.cloudfront.net/images/emoji/27667826fd1fb9122b34cbee12146446/shell.png",ship:"https://d78fikflryjgj.cloudfront.net/images/emoji/da1c239ed3806392f65cfcc048d36c4e/ship.png",shipit:"https://d78fikflryjgj.cloudfront.net/images/emoji/0bf1d3de309a89d9ed70ae91f6271a7f/shipit.png",shirt:"https://d78fikflryjgj.cloudfront.net/images/emoji/1866b19c5130fc17b2900229704c9608/shirt.png",shit:"https://d78fikflryjgj.cloudfront.net/images/emoji/62d03c1e2d8608f29540b097b7cf1ab1/shit.png",
shoe:"https://d78fikflryjgj.cloudfront.net/images/emoji/d5161dfe10dd32fcdaeb81a14cad6697/shoe.png",shower:"https://d78fikflryjgj.cloudfront.net/images/emoji/c70ad692456e572e23fc067e844e3903/shower.png",signal_strength:"https://d78fikflryjgj.cloudfront.net/images/emoji/428a66f5fa6b7f97d343ba1ba6937179/signal_strength.png",six:"https://d78fikflryjgj.cloudfront.net/images/emoji/2c861fa8bd6f03cfcfecb765465f74e5/six.png",six_pointed_star:"https://d78fikflryjgj.cloudfront.net/images/emoji/4cfa8ed6a68dc7ac38087ea14d653cab/six_pointed_star.png",
ski:"https://d78fikflryjgj.cloudfront.net/images/emoji/65886f19620b20a71254f60808691ed3/ski.png",skull:"https://d78fikflryjgj.cloudfront.net/images/emoji/ad7bcba8783a07fc4444c6c25b35addc/skull.png",sleeping:"https://d78fikflryjgj.cloudfront.net/images/emoji/99a9e3d2172b41efd65cc6c406d4db20/sleeping.png",sleepy:"https://d78fikflryjgj.cloudfront.net/images/emoji/e31e7d8333ab3f2625cbccef6b7410fd/sleepy.png",slot_machine:"https://d78fikflryjgj.cloudfront.net/images/emoji/d8ab6936c64111c75fa32f6a789eabff/slot_machine.png",
small_blue_diamond:"https://d78fikflryjgj.cloudfront.net/images/emoji/53006f4b102d9f9fe4cb6af5b506524b/small_blue_diamond.png",small_orange_diamond:"https://d78fikflryjgj.cloudfront.net/images/emoji/45cf6cb9bc145ac734919ac6a4d18c73/small_orange_diamond.png",small_red_triangle:"https://d78fikflryjgj.cloudfront.net/images/emoji/9f7504b356189f8839c6387cb048bd2e/small_red_triangle.png",small_red_triangle_down:"https://d78fikflryjgj.cloudfront.net/images/emoji/064d5341cbd34a902a0b8059e0bc2afd/small_red_triangle_down.png",
smile:"https://d78fikflryjgj.cloudfront.net/images/emoji/5775d67cea2ecad4c070825998771a6e/smile.png",smile_cat:"https://d78fikflryjgj.cloudfront.net/images/emoji/95e73996308563e468df6b1c3389594d/smile_cat.png",smiley:"https://d78fikflryjgj.cloudfront.net/images/emoji/5fece00c22bedab7e68fe9965257125b/smiley.png",smiley_cat:"https://d78fikflryjgj.cloudfront.net/images/emoji/9ff0f77cdf0ba721199a48ac3a7d9a9d/smiley_cat.png",smiling_imp:"https://d78fikflryjgj.cloudfront.net/images/emoji/fad5de08b04e1e37961fc13604599224/smiling_imp.png",
smirk:"https://d78fikflryjgj.cloudfront.net/images/emoji/ae6679e96d5cfbb2f5e92546869c553d/smirk.png",smirk_cat:"https://d78fikflryjgj.cloudfront.net/images/emoji/25298f805ca971c30cc8409938187fd4/smirk_cat.png",smoking:"https://d78fikflryjgj.cloudfront.net/images/emoji/d00d7ff8880a8dbe3d0cd2b8750d9750/smoking.png",snail:"https://d78fikflryjgj.cloudfront.net/images/emoji/3eccdd2bf9fe2d499f56f85e51559d8b/snail.png",snake:"https://d78fikflryjgj.cloudfront.net/images/emoji/85a978664ce446513cb20e53387498a4/snake.png",
snowboarder:"https://d78fikflryjgj.cloudfront.net/images/emoji/c7b2a02eeab2d3f318f287945b752ff0/snowboarder.png",snowflake:"https://d78fikflryjgj.cloudfront.net/images/emoji/df30263aeb1a565a706e67e2f22b12ac/snowflake.png",snowman:"https://d78fikflryjgj.cloudfront.net/images/emoji/a492f35208fc9dc36a13521c2cdeada3/snowman.png",sob:"https://d78fikflryjgj.cloudfront.net/images/emoji/81a73de58d64024e1b3383c37084706e/sob.png",soccer:"https://d78fikflryjgj.cloudfront.net/images/emoji/d9427086aeb6ddaeef57112373cc6d90/soccer.png",
soon:"https://d78fikflryjgj.cloudfront.net/images/emoji/206a1f60b9e323da74d63dda430a63b5/soon.png",sos:"https://d78fikflryjgj.cloudfront.net/images/emoji/d1b40a70d2e39cd4285806033c9d3320/sos.png",sound:"https://d78fikflryjgj.cloudfront.net/images/emoji/ba2d95d9bc4eb1245d4117f2de12034a/sound.png",space_invader:"https://d78fikflryjgj.cloudfront.net/images/emoji/404045d4be25a77fa0f52075b623344f/space_invader.png",spades:"https://d78fikflryjgj.cloudfront.net/images/emoji/90f63f6f53181f5a059f3e7d92ad1688/spades.png",
spaghetti:"https://d78fikflryjgj.cloudfront.net/images/emoji/e74bd04f2cb78b489d2bab0592b16b5e/spaghetti.png",sparkle:"https://d78fikflryjgj.cloudfront.net/images/emoji/d8fc28d64dea0f3b4ddb5d7dc749f919/sparkle.png",sparkler:"https://d78fikflryjgj.cloudfront.net/images/emoji/a7ecc1b95d673056032f2979d1221c35/sparkler.png",sparkles:"https://d78fikflryjgj.cloudfront.net/images/emoji/8c75ed365b460add98076391364659f0/sparkles.png",sparkling_heart:"https://d78fikflryjgj.cloudfront.net/images/emoji/a3744535f6732553e9c070def252bbee/sparkling_heart.png",
speak_no_evil:"https://d78fikflryjgj.cloudfront.net/images/emoji/0fb82c9a1d1f0756335cfb28c1992071/speak_no_evil.png",speaker:"https://d78fikflryjgj.cloudfront.net/images/emoji/ab3a8634abb65fcd4718a06a20dcb6cb/speaker.png",speech_balloon:"https://d78fikflryjgj.cloudfront.net/images/emoji/8a4e6e0a31475cd998bf512fc701d432/speech_balloon.png",speedboat:"https://d78fikflryjgj.cloudfront.net/images/emoji/2e278ce36190a1b1cc8febcef84bfa02/speedboat.png",squirrel:"https://d78fikflryjgj.cloudfront.net/images/emoji/0bf1d3de309a89d9ed70ae91f6271a7f/squirrel.png",
star:"https://d78fikflryjgj.cloudfront.net/images/emoji/f2ba498e88e4b9a73fb7e4e4a558c647/star.png",star2:"https://d78fikflryjgj.cloudfront.net/images/emoji/28bcbfd07530922fc075e19d13707308/star2.png",stars:"https://d78fikflryjgj.cloudfront.net/images/emoji/16a1589022608f2cb1e689ffa9bcd8bf/stars.png",station:"https://d78fikflryjgj.cloudfront.net/images/emoji/7376eef48ff3aeb51fced2e467ab8c6c/station.png",statue_of_liberty:"https://d78fikflryjgj.cloudfront.net/images/emoji/c1a8a8b67bb8cc914ace6ea63b8fcf3d/statue_of_liberty.png",
steam_locomotive:"https://d78fikflryjgj.cloudfront.net/images/emoji/9711ed6bc30bb5658d15b9a0cbc02578/steam_locomotive.png",stew:"https://d78fikflryjgj.cloudfront.net/images/emoji/e0d035b528f38b1b885460c5c638b914/stew.png",straight_ruler:"https://d78fikflryjgj.cloudfront.net/images/emoji/38d99cfad89b24d6ca699a5f7a3b945c/straight_ruler.png",strawberry:"https://d78fikflryjgj.cloudfront.net/images/emoji/d7a9638f5c3dbd8281738333a1ce65b2/strawberry.png",stuck_out_tongue:"https://d78fikflryjgj.cloudfront.net/images/emoji/627b9f7379294f54c6f6fb62bf779497/stuck_out_tongue.png",
stuck_out_tongue_closed_eyes:"https://d78fikflryjgj.cloudfront.net/images/emoji/1273fc479bf7656b0ea69f20473f5b60/stuck_out_tongue_closed_eyes.png",stuck_out_tongue_winking_eye:"https://d78fikflryjgj.cloudfront.net/images/emoji/490c7380e7c4b7b7f8c8290cad357db4/stuck_out_tongue_winking_eye.png",sun_with_face:"https://d78fikflryjgj.cloudfront.net/images/emoji/9bd63acca4a614303285fd5ee647ac36/sun_with_face.png",sunflower:"https://d78fikflryjgj.cloudfront.net/images/emoji/554132252fa931c08fea8e13c977ff29/sunflower.png",
sunglasses:"https://d78fikflryjgj.cloudfront.net/images/emoji/390ca63b9d9cf84bbabba4b7aaf01849/sunglasses.png",sunny:"https://d78fikflryjgj.cloudfront.net/images/emoji/549a15109922d8e5ed86f633da40406e/sunny.png",sunrise:"https://d78fikflryjgj.cloudfront.net/images/emoji/4d064e69798287743acc5b49b9b99e03/sunrise.png",sunrise_over_mountains:"https://d78fikflryjgj.cloudfront.net/images/emoji/be7d45dc5cd7283878d3373b4865dbda/sunrise_over_mountains.png",surfer:"https://d78fikflryjgj.cloudfront.net/images/emoji/69cca50b4ca7ea90977b2ecfceef1e35/surfer.png",
sushi:"https://d78fikflryjgj.cloudfront.net/images/emoji/1c873a340c556e04ade1e987b32fcc28/sushi.png",suspect:"https://d78fikflryjgj.cloudfront.net/images/emoji/db65956050a52b22a9f5cb63ad3e65e4/suspect.png",suspension_railway:"https://d78fikflryjgj.cloudfront.net/images/emoji/d645165583968a5825712a5688c5cf72/suspension_railway.png",sweat:"https://d78fikflryjgj.cloudfront.net/images/emoji/34e53931ca583f957cf81a6bfda7a4ff/sweat.png",sweat_drops:"https://d78fikflryjgj.cloudfront.net/images/emoji/5f4be5e62b0f84665428da112871b968/sweat_drops.png",
sweat_smile:"https://d78fikflryjgj.cloudfront.net/images/emoji/c9d6fa912d567e3da8b418ba48f534f4/sweat_smile.png",sweet_potato:"https://d78fikflryjgj.cloudfront.net/images/emoji/1dff26ec90da43620b6f7d3e32eaa81d/sweet_potato.png",swimmer:"https://d78fikflryjgj.cloudfront.net/images/emoji/6aa2b26f03ff21df0ee1207a79cbd966/swimmer.png",symbols:"https://d78fikflryjgj.cloudfront.net/images/emoji/dbab88d0365a222934a00b2636f5aa6e/symbols.png",syringe:"https://d78fikflryjgj.cloudfront.net/images/emoji/3658598f6e49bc6564dc510c29ff6d1d/syringe.png",
tada:"https://d78fikflryjgj.cloudfront.net/images/emoji/5c16e39356ee25a426b1bde2bb95c7ed/tada.png",tanabata_tree:"https://d78fikflryjgj.cloudfront.net/images/emoji/c021fba2f312c83b032924493613ec3c/tanabata_tree.png",tangerine:"https://d78fikflryjgj.cloudfront.net/images/emoji/9794070c5ad8ed629b71afccb83b6999/tangerine.png",taurus:"https://d78fikflryjgj.cloudfront.net/images/emoji/679ac7db83dfc87974a2fb069d890208/taurus.png",taxi:"https://d78fikflryjgj.cloudfront.net/images/emoji/5b0c3ffe99c4cd2f0ee33b61952f5a4e/taxi.png",
tea:"https://d78fikflryjgj.cloudfront.net/images/emoji/7c4d51f8aa1263cb3c7b39fba8c58aa2/tea.png",telephone:"https://d78fikflryjgj.cloudfront.net/images/emoji/63303b0721fe2adafa094bcca0e346aa/telephone.png",telephone_receiver:"https://d78fikflryjgj.cloudfront.net/images/emoji/a472b9c87f8815d445b8d40f67d20faa/telephone_receiver.png",telescope:"https://d78fikflryjgj.cloudfront.net/images/emoji/479cc4ee5f8c7b26c34ba2455eb74ffa/telescope.png",tennis:"https://d78fikflryjgj.cloudfront.net/images/emoji/6e2702957fa61c43a60568e3f5326f3b/tennis.png",
tent:"https://d78fikflryjgj.cloudfront.net/images/emoji/bebe8125747e06d31dd85418fe9defe2/tent.png",test:"https://d78fikflryjgj.cloudfront.net/images/emoji/03413f12d41cfce4ccc5cda97cbe8cbc/test.png",thought_balloon:"https://d78fikflryjgj.cloudfront.net/images/emoji/3c4f37563f8d42f1ea9d04472028e819/thought_balloon.png",three:"https://d78fikflryjgj.cloudfront.net/images/emoji/bbe5d45683a714b2f65998b7de3f1bdc/three.png",thumbsdown:"https://d78fikflryjgj.cloudfront.net/images/emoji/9155e2acc3925a32e544021a4893ebef/thumbsdown.png",
thumbsup:"https://d78fikflryjgj.cloudfront.net/images/emoji/a0a5d07f60da887f916b5540f7cc14d4/thumbsup.png",ticket:"https://d78fikflryjgj.cloudfront.net/images/emoji/a95bb7de3d822f3ddcfc0604fe6478ef/ticket.png",tiger:"https://d78fikflryjgj.cloudfront.net/images/emoji/56645d43216f3fa4b3c534a6db5bebba/tiger.png",tiger2:"https://d78fikflryjgj.cloudfront.net/images/emoji/09fb18054f72b37c0a4b1efd7680feff/tiger2.png",tired_face:"https://d78fikflryjgj.cloudfront.net/images/emoji/8cf92ef6a062a0bafa67ac1b93dacdc0/tired_face.png",
tm:"https://d78fikflryjgj.cloudfront.net/images/emoji/0077f29b078e5330722defa7522779f2/tm.png",toilet:"https://d78fikflryjgj.cloudfront.net/images/emoji/fcfec1156ffa738c3a05414b195989f7/toilet.png",tokyo_tower:"https://d78fikflryjgj.cloudfront.net/images/emoji/8d46bcc6c5028df07ad07e7a415db044/tokyo_tower.png",tomato:"https://d78fikflryjgj.cloudfront.net/images/emoji/b271e89f2aede82ece941a17ea3aebd7/tomato.png",tongue:"https://d78fikflryjgj.cloudfront.net/images/emoji/7a455eb0a18c0e87e2163c109d87ea47/tongue.png",
top:"https://d78fikflryjgj.cloudfront.net/images/emoji/30d83f9d01bba1989dfcd4c1352c2251/top.png",tophat:"https://d78fikflryjgj.cloudfront.net/images/emoji/36fe71ebb25980fa89ca457aa2d63559/tophat.png",tractor:"https://d78fikflryjgj.cloudfront.net/images/emoji/1ea4f35288b452593c6376d0a95cc6a0/tractor.png",traffic_light:"https://d78fikflryjgj.cloudfront.net/images/emoji/df5246b38a44113d0e32a8e121224a0b/traffic_light.png",train:"https://d78fikflryjgj.cloudfront.net/images/emoji/cca6ec820134c0aaf652c4088fad5065/train.png",
train2:"https://d78fikflryjgj.cloudfront.net/images/emoji/1acc1187f262982c36c6c5cafccef13e/train2.png",tram:"https://d78fikflryjgj.cloudfront.net/images/emoji/0abd978a7dc96b6ee455651ed1f0edb2/tram.png",trello:"https://d78fikflryjgj.cloudfront.net/images/emoji/7e5b95544db0fb00888df1f2b84c0db2/trello.png",triangular_flag_on_post:"https://d78fikflryjgj.cloudfront.net/images/emoji/477168e101d89cc2eef4e5ccc1b76b30/triangular_flag_on_post.png",triangular_ruler:"https://d78fikflryjgj.cloudfront.net/images/emoji/9ace5dbdbd3157870aef9bfafa8a2c9f/triangular_ruler.png",
trident:"https://d78fikflryjgj.cloudfront.net/images/emoji/9c001c9bf8f6fed83128fefb47acb8f2/trident.png",triumph:"https://d78fikflryjgj.cloudfront.net/images/emoji/7b80feb3faaa633af5ad085792befb51/triumph.png",trolleybus:"https://d78fikflryjgj.cloudfront.net/images/emoji/861c78992149c2ca1e8cd1c9bfdf3239/trolleybus.png",trollface:"https://d78fikflryjgj.cloudfront.net/images/emoji/93f9726f88efd7f6f8479389e102d935/trollface.png",trophy:"https://d78fikflryjgj.cloudfront.net/images/emoji/1d243a4df44a30152577eb9e33b7f614/trophy.png",
tropical_drink:"https://d78fikflryjgj.cloudfront.net/images/emoji/ffcfbaea8b297adeeb07db754e2b83e0/tropical_drink.png",tropical_fish:"https://d78fikflryjgj.cloudfront.net/images/emoji/62ba4a76b2ea1a69461c8decbb5dbfab/tropical_fish.png",truck:"https://d78fikflryjgj.cloudfront.net/images/emoji/12ac0c24b7c1b919339adc6d0abdabc4/truck.png",trumpet:"https://d78fikflryjgj.cloudfront.net/images/emoji/b4d97484e9e674c54d01c8c63a150bbe/trumpet.png",tshirt:"https://d78fikflryjgj.cloudfront.net/images/emoji/1866b19c5130fc17b2900229704c9608/tshirt.png",
tulip:"https://d78fikflryjgj.cloudfront.net/images/emoji/a4ae9efea459037ba4b17a90631a5bd9/tulip.png",turtle:"https://d78fikflryjgj.cloudfront.net/images/emoji/a0eab36accde8b29e48e437cd604e0fd/turtle.png",tv:"https://d78fikflryjgj.cloudfront.net/images/emoji/4b08354d48edfefab1da03f0e9056969/tv.png",twisted_rightwards_arrows:"https://d78fikflryjgj.cloudfront.net/images/emoji/496d24c75e3bd388f8882c047226af32/twisted_rightwards_arrows.png",two:"https://d78fikflryjgj.cloudfront.net/images/emoji/a86c3871b01d888ca0cf11d5ec3ae5b1/two.png",
two_hearts:"https://d78fikflryjgj.cloudfront.net/images/emoji/107751de07a81c5f39c7e94e833ccaf9/two_hearts.png",two_men_holding_hands:"https://d78fikflryjgj.cloudfront.net/images/emoji/9a95cae792c89e28a34894391f7032cc/two_men_holding_hands.png",two_women_holding_hands:"https://d78fikflryjgj.cloudfront.net/images/emoji/bc182f077cc5c1ef640100397913222c/two_women_holding_hands.png",u5272:"https://d78fikflryjgj.cloudfront.net/images/emoji/6d3ca765b3c2fe5f13912464029ddf7c/u5272.png",u5408:"https://d78fikflryjgj.cloudfront.net/images/emoji/470eada08e8d24dafab0d2ed812ceeae/u5408.png",
u55b6:"https://d78fikflryjgj.cloudfront.net/images/emoji/fb270596e34e915331a1a226bd2419ba/u55b6.png",u6307:"https://d78fikflryjgj.cloudfront.net/images/emoji/1dd2e526123a4782216ebb5f1ca939da/u6307.png",u6708:"https://d78fikflryjgj.cloudfront.net/images/emoji/0f55eb63f3485080cf27ad1d29524ae0/u6708.png",u6709:"https://d78fikflryjgj.cloudfront.net/images/emoji/b7fde66ea5a96310b97561ee136a4bbe/u6709.png",u6e80:"https://d78fikflryjgj.cloudfront.net/images/emoji/0ad845150281cc80623978f9071a32b1/u6e80.png",
u7121:"https://d78fikflryjgj.cloudfront.net/images/emoji/68ec1036d9c3b8b26a2b1bacdfb8f0c2/u7121.png",u7533:"https://d78fikflryjgj.cloudfront.net/images/emoji/274fc9ee47d010043a572e409cc21974/u7533.png",u7981:"https://d78fikflryjgj.cloudfront.net/images/emoji/01e00306dbad69bcf5665e072e82c38f/u7981.png",u7a7a:"https://d78fikflryjgj.cloudfront.net/images/emoji/5bb1d2a4be31b3e282dd15b22f23c7c3/u7a7a.png",uk:"https://d78fikflryjgj.cloudfront.net/images/emoji/085a66819b0bbc0133620b7b8688da1d/uk.png",umbrella:"https://d78fikflryjgj.cloudfront.net/images/emoji/969e870efe593fc59be4ad0a295ae207/umbrella.png",
unamused:"https://d78fikflryjgj.cloudfront.net/images/emoji/1276c788d2fad3e5423cfe4c7ef8be08/unamused.png",underage:"https://d78fikflryjgj.cloudfront.net/images/emoji/f54553f1b72238d146ce3afcec3220e2/underage.png",unlock:"https://d78fikflryjgj.cloudfront.net/images/emoji/954e8e99a860ac6389ab68005e9f7a92/unlock.png",up:"https://d78fikflryjgj.cloudfront.net/images/emoji/3dae50b31b73a42e3fe8a3f83b61ea15/up.png",us:"https://d78fikflryjgj.cloudfront.net/images/emoji/f1e97e62423aba4a74ee886bbffbb30e/us.png",
v:"https://d78fikflryjgj.cloudfront.net/images/emoji/265337288a2e1e0ee5376526efcb71a0/v.png",vertical_traffic_light:"https://d78fikflryjgj.cloudfront.net/images/emoji/1a500844d64984f4c97ee0ef22b3dcb0/vertical_traffic_light.png",vhs:"https://d78fikflryjgj.cloudfront.net/images/emoji/929b344d9e819467362e4cd5c81e2585/vhs.png",vibration_mode:"https://d78fikflryjgj.cloudfront.net/images/emoji/7db092d9758b28380a947c862943e036/vibration_mode.png",video_camera:"https://d78fikflryjgj.cloudfront.net/images/emoji/cacb16494c5f57458ae51bff07c61dde/video_camera.png",
video_game:"https://d78fikflryjgj.cloudfront.net/images/emoji/90752f7986d347eb97279c2a37c2bd4d/video_game.png",violin:"https://d78fikflryjgj.cloudfront.net/images/emoji/14e7c491894adb8f7c4c57f000c634d8/violin.png",virgo:"https://d78fikflryjgj.cloudfront.net/images/emoji/0dba6af4e199d839b8a290343c6a5bab/virgo.png",volcano:"https://d78fikflryjgj.cloudfront.net/images/emoji/483647aaa8a1f9cd74c2a75089d26d71/volcano.png",vs:"https://d78fikflryjgj.cloudfront.net/images/emoji/cde6b45fe7b3064d80304cf4bd116704/vs.png",
walking:"https://d78fikflryjgj.cloudfront.net/images/emoji/a2b0b05da920d1875635ed544ae41da8/walking.png",waning_crescent_moon:"https://d78fikflryjgj.cloudfront.net/images/emoji/dfff27056486b05662704fe32755c037/waning_crescent_moon.png",waning_gibbous_moon:"https://d78fikflryjgj.cloudfront.net/images/emoji/771b7eee2ad90deeb49edf0f1e8afaa3/waning_gibbous_moon.png",warning:"https://d78fikflryjgj.cloudfront.net/images/emoji/98ce0e63a6477613fd5c93e10e721347/warning.png",watch:"https://d78fikflryjgj.cloudfront.net/images/emoji/62ac3ef7e2a45a50f73be5ba61c6ab86/watch.png",
water_buffalo:"https://d78fikflryjgj.cloudfront.net/images/emoji/57d998fe8ff188403cb8ab2d18b944d7/water_buffalo.png",watermelon:"https://d78fikflryjgj.cloudfront.net/images/emoji/b50831dff4921536447a33ced3704dad/watermelon.png",wave:"https://d78fikflryjgj.cloudfront.net/images/emoji/49af2bc8b93c120a6c78f71190f7ddeb/wave.png",wavy_dash:"https://d78fikflryjgj.cloudfront.net/images/emoji/52f8d90726752ff326a79450a370ebe4/wavy_dash.png",waxing_crescent_moon:"https://d78fikflryjgj.cloudfront.net/images/emoji/881b888a50215af333b8af93304c67e5/waxing_crescent_moon.png",
waxing_gibbous_moon:"https://d78fikflryjgj.cloudfront.net/images/emoji/c1c65fc03c3c8cb9a54b16ec2a408e4e/waxing_gibbous_moon.png",wc:"https://d78fikflryjgj.cloudfront.net/images/emoji/d9a415b30a1165a6a0944d286443e01a/wc.png",weary:"https://d78fikflryjgj.cloudfront.net/images/emoji/39fb5de7a7ea04f81626d00a859aff5d/weary.png",wedding:"https://d78fikflryjgj.cloudfront.net/images/emoji/4ec62cc9b6d543f6c9aaa71061845862/wedding.png",whale:"https://d78fikflryjgj.cloudfront.net/images/emoji/cb70a122ec80e35de873e114102570d9/whale.png",
whale2:"https://d78fikflryjgj.cloudfront.net/images/emoji/8321f58cc3c1bb348248855be2ddbdd3/whale2.png",wheelchair:"https://d78fikflryjgj.cloudfront.net/images/emoji/ffc57fc2b6c5bd3603c5f6ece486afbe/wheelchair.png",white_check_mark:"https://d78fikflryjgj.cloudfront.net/images/emoji/52b7898655c0dc2e738e47119c2725ee/white_check_mark.png",white_circle:"https://d78fikflryjgj.cloudfront.net/images/emoji/24414ac269eb83605cb54b8a27543110/white_circle.png",white_flower:"https://d78fikflryjgj.cloudfront.net/images/emoji/fcc845d9ed5188b7e37a0ee886563ffc/white_flower.png",
white_large_square:"https://d78fikflryjgj.cloudfront.net/images/emoji/abe3c5affc70379045f106c921e8902c/white_large_square.png",white_medium_small_square:"https://d78fikflryjgj.cloudfront.net/images/emoji/6a9d4eee072764def24da5c67218829b/white_medium_small_square.png",white_medium_square:"https://d78fikflryjgj.cloudfront.net/images/emoji/29ea5ed9b49466266fa460e497c4bca0/white_medium_square.png",white_small_square:"https://d78fikflryjgj.cloudfront.net/images/emoji/00b3954259034244db1fac19fd24b67c/white_small_square.png",
white_square_button:"https://d78fikflryjgj.cloudfront.net/images/emoji/5d936ce92087fdec6aab2c97ffa98ce7/white_square_button.png",wind_chime:"https://d78fikflryjgj.cloudfront.net/images/emoji/e041ab21fd38ec8b0849c037cd454919/wind_chime.png",wine_glass:"https://d78fikflryjgj.cloudfront.net/images/emoji/23a75834f5d67ae20c697a90bb7d3c20/wine_glass.png",wink:"https://d78fikflryjgj.cloudfront.net/images/emoji/83fff972417765e6f3224e3be0e1522b/wink.png",wolf:"https://d78fikflryjgj.cloudfront.net/images/emoji/b96f9a3696bdf4dd1c20f7fb5abd0d63/wolf.png",
woman:"https://d78fikflryjgj.cloudfront.net/images/emoji/07ff6878b3db138c8e015f637494072e/woman.png",womans_clothes:"https://d78fikflryjgj.cloudfront.net/images/emoji/c3221918effc3fe7ea90a5d7fa87e501/womans_clothes.png",womans_hat:"https://d78fikflryjgj.cloudfront.net/images/emoji/020d56b5affcb3ce3eb278b3119e5380/womans_hat.png",womens:"https://d78fikflryjgj.cloudfront.net/images/emoji/78c01e391b892354f650d8e410fabb86/womens.png",worried:"https://d78fikflryjgj.cloudfront.net/images/emoji/506b4c5bd9355073e5f09c330cd0406c/worried.png",
wrench:"https://d78fikflryjgj.cloudfront.net/images/emoji/09d2bd1ee197a5d1e40442e35427f31c/wrench.png",x:"https://d78fikflryjgj.cloudfront.net/images/emoji/42ab430c65cbcf8df9561ca3ec89a6ec/x.png",yellow_heart:"https://d78fikflryjgj.cloudfront.net/images/emoji/890f59007121ead636867c0307873248/yellow_heart.png",yen:"https://d78fikflryjgj.cloudfront.net/images/emoji/d71335520e7df5b0391cfd8f96820050/yen.png",yum:"https://d78fikflryjgj.cloudfront.net/images/emoji/d9559425ef6df9d85fcd042968f006b7/yum.png",
zap:"https://d78fikflryjgj.cloudfront.net/images/emoji/32a6549c8137f1f5a265fab7cd344116/zap.png",zero:"https://d78fikflryjgj.cloudfront.net/images/emoji/2910daa978f87df3bb359e78064f65a8/zero.png",zzz:"https://d78fikflryjgj.cloudfront.net/images/emoji/f21df57a654483f76ca9e22c5edeab1c/zzz.png"};"undefined"!==typeof module&&null!==module&&(module.exports=Ra);var ha,Mb;ha={taco:{displayName:"Taco Pack"},pete:{displayName:"Pete the Computer"}};Mb={check:{type:"standard",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/7f8b93da6962dbdbd8ad8ca9725b70d4/check.png",
scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/7f8b93da6962dbdbd8ad8ca9725b70d4/check.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/fa8dbd7aacfe2a7210f1d0097f60cb59/check%402x.png"}]},heart:{type:"standard",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/040c2a5c2384e6a865a0c3b5826c84dc/heart.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/040c2a5c2384e6a865a0c3b5826c84dc/heart.png"},
{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/019d22c5e040aae741ee22320e87918c/heart%402x.png"}]},warning:{type:"standard",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/8d09ca694f4f701c4af7662f1db43bf4/warning.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/8d09ca694f4f701c4af7662f1db43bf4/warning.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e6997a499c0fb650e00356a17bdc6ab1/warning%402x.png"}]},
clock:{type:"standard",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/5efd3f442437ce78b55acf1bd871c39c/clock.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/5efd3f442437ce78b55acf1bd871c39c/clock.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/87b5fbcfe44dc9e169f899a42c2be236/clock%402x.png"}]},smile:{type:"standard",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/9cb14e79838122328b26afd226ab12ce/smile.png",
scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/9cb14e79838122328b26afd226ab12ce/smile.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/998875a36221574672f57f6554961ba8/smile%402x.png"}]},laugh:{type:"standard",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/43ce225d4422d0a8389bf1477b5d0ce6/laugh.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/43ce225d4422d0a8389bf1477b5d0ce6/laugh.png"},
{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/1e13f5e64ace6f8af25079ac1292da6f/laugh%402x.png"}]},huh:{type:"standard",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/9217db04d28bf20f990f7afe16bd5450/huh.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/9217db04d28bf20f990f7afe16bd5450/huh.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/1ff113c90b481b17f1c83fe7adb0e0b2/huh%402x.png"}]},
frown:{type:"standard",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/3499b916bb0e55fb9ee349fa920cefb2/frown.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/3499b916bb0e55fb9ee349fa920cefb2/frown.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/a018fdb9bcc928299c268a3fe7cd77e7/frown%402x.png"}]},thumbsup:{type:"standard",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/4526d8454c53066ee45a2bdd2669119c/thumbsup.png",
scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/4526d8454c53066ee45a2bdd2669119c/thumbsup.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/823c320becd3162e37ef746471ef56b2/thumbsup%402x.png"}]},thumbsdown:{type:"standard",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/28a8538f495707e41d1204b3af945e02/thumbsdown.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/28a8538f495707e41d1204b3af945e02/thumbsdown.png"},
{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ddb64e7188c37eb55b02aa65002630fc/thumbsdown%402x.png"}]},star:{type:"standard",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/3ec82cf81a9cb4809919c824f3a51eb6/star.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/3ec82cf81a9cb4809919c824f3a51eb6/star.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/f73bd3b8454e5eaf399a678f425cc90f/star%402x.png"}]},
rocketship:{type:"standard",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/9ec91c204d89c5439b4f86884be13724/rocketship.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/9ec91c204d89c5439b4f86884be13724/rocketship.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/0eb0a91e4ede66800bad335ddef2721e/rocketship%402x.png"}]},"taco-love":{type:"premium",pack:ha.taco,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/c17c5bf93797d71527ee91494fc85e2c/taco-love.png",
scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/c17c5bf93797d71527ee91494fc85e2c/taco-love.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/06ddf78e10598774b89e3264d8e414da/taco-love%402x.png"}]},"taco-confused":{type:"premium",pack:ha.taco,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/511723ee0c932684ca39cdec005bc2c5/taco-confused.png",scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/511723ee0c932684ca39cdec005bc2c5/taco-confused.png"},
{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/06668f130b632bf4ba0dc7f492628e00/taco-confused%402x.png"}]},"taco-cool":{type:"premium",pack:ha.taco,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/f41573409925dd066cb509a465f4b3af/taco-cool.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/f41573409925dd066cb509a465f4b3af/taco-cool.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/8f4ac7820629d5aac2e2faca5b013e4c/taco-cool%402x.png"}]},
"taco-angry":{type:"premium",pack:ha.taco,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/0787bf33623b40f2263dd9b0194c0066/taco-angry.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/0787bf33623b40f2263dd9b0194c0066/taco-angry.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/88141aecd4c8fbdc3ff11ef292b4526f/taco-angry%402x.png"}]},"taco-celebrate":{type:"premium",pack:ha.taco,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/20b0c2f6c78ca34d7c3d00b658f3b3df/taco-celebrate.png",
scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/20b0c2f6c78ca34d7c3d00b658f3b3df/taco-celebrate.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/905a89b9fb1f867747130360e6cbb4d4/taco-celebrate%402x.png"}]},"taco-robot":{type:"premium",pack:ha.taco,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/c695266748c83f796b9a56ea36f5c2de/taco-robot.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/c695266748c83f796b9a56ea36f5c2de/taco-robot.png"},
{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e1ac5a98088053a8b1ae90cd8f3f056e/taco-robot%402x.png"}]},"taco-alert":{type:"premium",pack:ha.taco,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ccbcd6ce73f50359e71ad36316c3bcfb/taco-alert.png",scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ccbcd6ce73f50359e71ad36316c3bcfb/taco-alert.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/60cf2c2b89c387f8c1ed92f301492b28/taco-alert%402x.png"}]},
"taco-active":{type:"premium",pack:ha.taco,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e027fa08f49b43a503a1e1dea1b854ea/taco-active.png",scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e027fa08f49b43a503a1e1dea1b854ea/taco-active.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/afe6f31288619ede4f82d516cad6a11e/taco-active%402x.png"}]},"taco-money":{type:"premium",pack:ha.taco,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/60cee75a249b578892938a6a491031e6/taco-money.png",
scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/60cee75a249b578892938a6a491031e6/taco-money.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/f0130dd81ed48f6e4626cbdc233b2fda/taco-money%402x.png"}]},"taco-reading":{type:"premium",pack:ha.taco,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/d38e25e615cbc0d15bea3fe3277e4a83/taco-reading.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/d38e25e615cbc0d15bea3fe3277e4a83/taco-reading.png"},
{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/0c3110a4622a680fd4a9b63de14521da/taco-reading%402x.png"}]},"taco-trophy":{type:"premium",pack:ha.taco,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/77785938bb3566b20d1eccb83001dddc/taco-trophy.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/77785938bb3566b20d1eccb83001dddc/taco-trophy.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/9143546ce5c8a3e43736be79803ead39/taco-trophy%402x.png"}]},
"taco-sleeping":{type:"premium",pack:ha.taco,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/42698e61c8b85ce46dd08774536b820e/taco-sleeping.png",scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/42698e61c8b85ce46dd08774536b820e/taco-sleeping.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/9a51d634e8521dc0e19c09db4df95d8e/taco-sleeping%402x.png"}]},"taco-pixel":{type:"premium",pack:ha.taco,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/9044b8e8153407d9c35176baf4c41780/taco-pixel.png",
scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/9044b8e8153407d9c35176baf4c41780/taco-pixel.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/3751a48869a42911093b6eae9d0a7f8c/taco-pixel%402x.png"}]},"taco-proto":{type:"premium",pack:ha.taco,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/2e050937d34005636192c415252f1b91/taco-proto.png",scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/2e050937d34005636192c415252f1b91/taco-proto.png"},
{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/51def85cdcf3c1a58cb1ab2ac3749251/taco-proto%402x.png"}]},"taco-embarrassed":{type:"premium",pack:ha.taco,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/b84cc7c1ff4c870a78afff5645449883/taco-embarrassed.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/b84cc7c1ff4c870a78afff5645449883/taco-embarrassed.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/02663f87e33a2c79828098d1f2d9a086/taco-embarrassed%402x.png"}]},
"taco-clean":{type:"premium",pack:ha.taco,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e6462e51e766dbf494e304ea843856d9/taco-clean.png",scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e6462e51e766dbf494e304ea843856d9/taco-clean.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/7c593a77fe481b61a2cad4b74b2f8c1c/taco-clean%402x.png"}]},"pete-happy":{type:"premium",pack:ha.pete,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ad61d60483a6bdbea53237330ea1183b/pete-happy.png",
scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ad61d60483a6bdbea53237330ea1183b/pete-happy.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/0663bc183a0cf0d039498cd8c5db8043/pete-happy%402x.png"}]},"pete-love":{type:"premium",pack:ha.pete,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e226d3edc2bc1c9439bc812f96527218/pete-love.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e226d3edc2bc1c9439bc812f96527218/pete-love.png"},
{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/6e461f2c1917d10063fb169a33bb1191/pete-love%402x.png"}]},"pete-broken":{type:"premium",pack:ha.pete,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e0c1fadd8cdf3173a4cf9bc93da81d97/pete-broken.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e0c1fadd8cdf3173a4cf9bc93da81d97/pete-broken.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/6d84909328bf960bdfcab760e46c886f/pete-broken%402x.png"}]},
"pete-alert":{type:"premium",pack:ha.pete,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/90e3c39fb39d5d79e8e2310406620f59/pete-alert.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/90e3c39fb39d5d79e8e2310406620f59/pete-alert.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/3453c1a26ddd1187e56431940c7aedfc/pete-alert%402x.png"}]},"pete-talk":{type:"premium",pack:ha.pete,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ca098514ef3b83d1e5a736817d3a132b/pete-talk.png",
scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ca098514ef3b83d1e5a736817d3a132b/pete-talk.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/217a5d2b04a6dea23726a7949dae9ac7/pete-talk%402x.png"}]},"pete-vacation":{type:"premium",pack:ha.pete,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/c50c5371bb78862a587a93df287459c0/pete-vacation.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/c50c5371bb78862a587a93df287459c0/pete-vacation.png"},
{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/060295310e437200bf334ff7322eede1/pete-vacation%402x.png"}]},"pete-confused":{type:"premium",pack:ha.pete,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/0d52a88328d4c0196564b207560e953e/pete-confused.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/0d52a88328d4c0196564b207560e953e/pete-confused.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/7ff61659ad2cd4837aacd999aedcd233/pete-confused%402x.png"}]},
"pete-shipped":{type:"premium",pack:ha.pete,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/13b817ebec2282c5a7abb849056edfff/pete-shipped.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/13b817ebec2282c5a7abb849056edfff/pete-shipped.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/0d9ff936d513aae5a67c8f9653a5c49e/pete-shipped%402x.png"}]},"pete-busy":{type:"premium",pack:ha.pete,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ef0eb59b05378f25bb0cfae516b0615d/pete-busy.png",
scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ef0eb59b05378f25bb0cfae516b0615d/pete-busy.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/35503951628d67da2c8aaabd49aaf769/pete-busy%402x.png"}]},"pete-completed":{type:"premium",pack:ha.pete,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/213df9ec14509a7f06281bba7482ae61/pete-completed.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/213df9ec14509a7f06281bba7482ae61/pete-completed.png"},
{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/3197b9305f52b722df47abdb84c063f8/pete-completed%402x.png"}]},"pete-space":{type:"premium",pack:ha.pete,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ee70c40e8a7906f3adf2323d774e8320/pete-space.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ee70c40e8a7906f3adf2323d774e8320/pete-space.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/aa9cb8354739fb355a4abd1c977d975a/pete-space%402x.png"}]},
"pete-sketch":{type:"premium",pack:ha.pete,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/6e17baf06870f4bd1c301ede21bc5add/pete-sketch.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/6e17baf06870f4bd1c301ede21bc5add/pete-sketch.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/3808b148cca5b1ed3da001b7c13d5110/pete-sketch%402x.png"}]},"pete-ghost":{type:"premium",pack:ha.pete,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/fcb349d429bbaaf873eef3ea64eb570c/pete-ghost.png",
scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/fcb349d429bbaaf873eef3ea64eb570c/pete-ghost.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/4a28ad313694864c5a661b964a9510ff/pete-ghost%402x.png"}]},"pete-award":{type:"premium",pack:ha.pete,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/eb0782174fdd08d4c76a587db6bc7caf/pete-award.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/eb0782174fdd08d4c76a587db6bc7caf/pete-award.png"},
{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/43dd35d5e48a876a50fc6c63f53f005e/pete-award%402x.png"}]},"pete-music":{type:"premium",pack:ha.pete,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/49ddddf5af19ae49ccc9c7aa9517ba62/pete-music.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/49ddddf5af19ae49ccc9c7aa9517ba62/pete-music.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/df6a7a7b952e8826916f00e69b503af1/pete-music%402x.png"}]}};
"undefined"!==typeof module&&null!==module&&(module.exports=Mb);var ua,Sa;ua={photos:{name:"Photos"},patterns:{name:"Patterns and Textures"}};Sa={blue:{type:"default",brightness:"dark",color:"#23719F"},green:{type:"default",brightness:"dark",color:"#5A966E"},orange:{type:"default",brightness:"dark",color:"#BD6F32"},red:{type:"default",brightness:"dark",color:"#BF4A40"},grey:{type:"default",brightness:"dark",color:"#707070"},purple:{type:"default",brightness:"dark",color:"#6D5798"},mountain:{type:"premium",
pack:ua.photos,brightness:"light",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/mountain/171b0c9aea08e21f0020f359408b73e4/full.jpg",scaled:[{width:2400,height:1696,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/mountain/46616ebeae7245d4a16cf00cf1e21e86/large.jpg"},{width:1024,height:724,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/mountain/07627e0760eb74e7109a82057ac86881/medium.jpg"},{width:320,height:227,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/mountain/da8d70dd70d666361767b9e30acdba65/small.jpg"}],
attribution:{url:"http://www.flickr.com/photos/62681247@N00/6575973407/",name:"jqmj (Queralt)",license:"http://creativecommons.org/licenses/by/2.0/deed.en"}},cosmos:{type:"premium",pack:ua.photos,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/cosmos/92448e055514fdc92923c9b591aa31df/full.jpg",scaled:[{width:2047,height:1638,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/cosmos/be5121d350dd3e3ac97e209c3a7fce58/large.jpg"},{width:1600,height:1280,
url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/cosmos/f95acce485fc44f9a07853aa15965f90/medium.jpg"},{width:320,height:256,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/cosmos/0646808c900b7409dbeb96d36f55e980/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/gsfc/6945160410/",name:"NASA Goddard Space Flight Center",license:"http://creativecommons.org/licenses/by/2.0/deed.en"}},rain:{type:"premium",pack:ua.photos,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/rain/2e8209ee9f21d7147a24cac28ea61358/full.jpg",
scaled:[{width:2400,height:1600,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/rain/9de9b88a694019ab77d129f1729b05b7/large.jpg"},{width:1024,height:683,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/rain/b8ac88f9c4e8097c1ef8cc269d66e089/medium.jpg"},{width:320,height:213,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/rain/e9147244c93e3990f361bc8123cacca9/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/vinothchandar/5243641910/",name:"Vinoth Chandar",
license:"http://creativecommons.org/licenses/by/2.0/deed.en"}},dew:{type:"premium",pack:ua.photos,brightness:"light",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/dew/1d638bc56d179d5a8c35177305d4ea09/full.jpg",scaled:[{width:2400,height:1594,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/dew/5b5f4c5cd0d7e144e40168345c8c6075/large.jpg"},{width:1024,height:680,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/dew/3c8daf991e3132f453ad0c822175b34d/medium.jpg"},
{width:320,height:212,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/dew/71633df28ad4038a6fb6f647c1b29b27/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/jenny-pics/5584430423/",name:"Jenny Downing",license:"http://creativecommons.org/licenses/by/2.0/deed.en"}},"snow-bokeh":{type:"premium",pack:ua.photos,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/snow-bokeh/75b2ce11e6652e76ad0d3629d9886ca5/full.jpg",scaled:[{width:2400,height:1596,
url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/snow-bokeh/11fc1afae97ec97b3b46b149d701e180/large.jpg"},{width:1024,height:681,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/snow-bokeh/9f4c60883dec8b5aa5bc949607081505/medium.jpg"},{width:320,height:213,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/snow-bokeh/d74c2d921e28c822e92b881b3e2cb10b/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/tabor-roeder/5337595458/",name:"Phil Roeder",license:"http://creativecommons.org/licenses/by/2.0/deed.en"}},
city:{type:"premium",pack:ua.photos,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/city/1bbbf09d491d444d207e5d8b792a86ba/full.jpg",scaled:[{width:2400,height:1594,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/city/d23508735801f1190b365330eb8ec0a5/large.jpg"},{width:1024,height:680,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/city/a7eea5e35c08388ec3da7dbc814f1da2/medium.jpg"},{width:320,height:212,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/city/27e00a7bee7a783ae7568a819fa9bb97/small.jpg"}],
attribution:{url:"http://www.flickr.com/photos/nosha/2907855809/",name:"Nathan Siemers",license:"http://creativecommons.org/licenses/by/2.0/deed.en"}},canyon:{type:"premium",pack:ua.photos,brightness:"light",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/canyon/0c35d8049641c307de51cac7d449bf4e/full.jpg",scaled:[{width:2400,height:1596,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/canyon/ee79179217e377e332d217cbe10405b4/large.jpg"},{width:1024,height:681,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/canyon/976ada2d506ebb7c2f8708f2ccc47192/medium.jpg"},
{width:320,height:213,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/canyon/1478a9382a5ab8c493685223ff36e6f7/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/wolfgangstaudt/2252688630/",name:"Wolfgang Staudt",license:"http://creativecommons.org/licenses/by/2.0/deed.en"}},ocean:{type:"premium",pack:ua.photos,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/ocean/4ce437330ab9d2fe40dd3d8504a143e6/full.jpg",scaled:[{width:2400,height:1600,
url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/ocean/ede6927e92b4515102b2d86e919c77fa/large.jpg"},{width:1024,height:683,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/ocean/c8a238f606e3288c461fc7ea3daa36d9/medium.jpg"},{width:320,height:213,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/ocean/2de3527d131722c66ec5315205d64104/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/mattphipps/4635112852/",name:"MattJP",license:"http://creativecommons.org/licenses/by/2.0/deed.en"}},
river:{type:"premium",pack:ua.photos,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/river/b031ec422c9048f4b6fb3b53f80eba3c/full.jpg",scaled:[{width:2400,height:1600,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/river/801d937c765a9996d4eccf4aee6bfc36/large.jpg"},{width:1024,height:683,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/river/67c2c39a74a32f383ffd10dc53ffb535/medium.jpg"},{width:320,height:213,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/river/15967f866d002762d13d20d258140418/small.jpg"}],
attribution:{url:"http://www.flickr.com/photos/22746515@N02/3114276532/",name:"Bert Kaufmann",license:"http://creativecommons.org/licenses/by/2.0/deed.en"}},fall:{type:"premium",pack:ua.photos,discontinued:!0,fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/fall/72c32b15d265b78e7058896d4bc85c3b/full.jpg",scaled:[{width:2400,height:1596,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/fall/a42f50fe10ff082519a499a2e86be1dc/large.jpg"},{width:1024,height:681,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/fall/a999e10749c6db57a5acd9960324ed6f/medium.jpg"},
{width:320,height:213,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/fall/8c8e3c5c5eebeac446c7e19ee36d23ae/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/mendhak/4107993637/",name:"mendhak",license:"http://creativecommons.org/licenses/by/2.0/deed.en"}},snow:{type:"premium",pack:ua.photos,discontinued:!0,fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/snow/d5dd0a98d6b0a7ebcaff02dad1535fab/full.jpg",scaled:[{width:2400,height:1600,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/snow/149d6adb0c746612aa21ec3c46455583/large.jpg"},
{width:1024,height:683,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/snow/147471be1b6fa8858c40febf9702795b/medium.jpg"},{width:320,height:213,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/snow/da5f83eace8c3f4e13f1287cefd07956/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/zachd1_618/5386165480/",name:"Zach Dischner",license:"http://creativecommons.org/licenses/by/2.0/deed.en"}},purty_wood_dark:{type:"premium",pack:ua.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/7a14a57fef9435b0def0f613d0114334/purty_wood_dark.png",
attribution:{url:"http://subtlepatterns.com/purty-wood/",name:"Richard Tabor",license:"http://creativecommons.org/licenses/by/2.0/deed.en"}},"subtle-irongrip":{type:"premium",pack:ua.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/c9f15836db29df79c2a0092a6758d81e/subtle-irongrip.png",attribution:{url:"http://subtlepatterns.com/iron-grip/",name:"Tony Kinard",license:"http://creativecommons.org/licenses/by/2.0/deed.en"}},"red-sweater":{type:"premium",
pack:ua.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/17d3a6bc27bdcd05caeae11f67fa46d6/red-sweater.png",attribution:{url:"http://subtlepatterns.com/wild-oliva/",name:"Badhon Ebrahim",license:"http://creativecommons.org/licenses/by/2.0/deed.en"}},hex:{type:"premium",pack:ua.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/2e2cb18ce229869faec815b4d8fe2770/hex.png"},wave:{type:"premium",pack:ua.patterns,
tile:!0,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/bb289a4f00f13e8ca52e67afd11c1648/wave.png"},bricks:{type:"premium",pack:ua.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/5e21dfb838e99d8a7c540a2b90d36f29/bricks.png"},"purple-blur":{type:"premium",pack:ua.patterns,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/3a02eab932195316109bd905d3341323/purple-blur.png"},
"orange-blur":{type:"premium",pack:ua.patterns,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/07a3436eabfd187ee94ae8c578584d07/orange-blur.png"}};"undefined"!==typeof module&&null!==module&&(module.exports=Sa);var mb,Fa,G=[].slice,D=[].indexOf||function(c){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===c)return b;return-1};Fa=function(){function c(b){var d,e;this.options=null!=b?b:{};if(null==(b=this.options).openLinksInNewWindow)b.openLinksInNewWindow=
!0;this.lexerBlockRules=this.options.inlineOnly?[c.lexerBlockRules.error]:this._expandRules(c.lexerBlockRules,null!=(d=this.options.restrict)?d.block:void 0);this.lexerInlineRules=this._expandRules(c.lexerInlineRules,null!=(e=this.options.restrict)?e.inline:void 0)}var b,d,e;c.prototype._expandRules=function(b,d){var e,c,q,k,l,L,n;q=_.sortBy(_.keys(b),function(b){return-b.length});l=RegExp(""+q.join("|"),"g");d=null!=d?d.concat(function(){var d;d=[];for(n in b)L=b[n],(L.required||null==L.token)&&
d.push(n);return d}()):function(){var d,e;e=[];for(k in b)L=b[k],null!=(d=L.nondefault)&&d||e.push(k);return e}();b=_.pick(b,_.intersection(_.keys(b),d));e=function(d){return function(d){var f;d=b[d]=_.clone(b[d]);d.compiled=!0;f=d.match.source.replace(l,function(d){var f;f=b[d];null!=(null!=f?f.match:void 0)?(f.compiled||e(d),d=f.match):d=/[]/;return d.source.replace(/(^|[^\[])\^/g,"$1")});d.match=RegExp(""+f);d.match_i=RegExp(""+f,"i");d.match_gim=RegExp(""+f,"gim");return d}}(this);for(n in b)c=
b[n],q=c.match,c=c.compiled,null!=q&&!c&&e(n);return b};c.lexerBlockRules={newline:{match:/^\n/,token:function(b,d,e){b=b[0];return{type:"space",canCondense:!0,children:{text:b,ranges:e.slice(0,b)}}}},code:{match:/^(\x20{4}[^\n]+\n*)+/,token:function(b){return{type:"code",text:b[0].replace(/^ {4}/gm,"").replace(/\n+$/,"")}}},fencedCode:{match:/^\x20*(`{3,}|~{3,})\x20*(\S+)?\x20*\n([\s\S]+?)\s*?\1\x20*(?:\n+|$)/,token:function(b){return{type:"code",language:b[2],text:b[3]}}},heading:{match:/^(\x20*(\#{1,6})\x20*)([^\n]+?)\x20*\#*\x20*(?:\n+|$)/,
token:function(b,d,e){var c;d=b[1];c=b[2];b=b[3];return{type:"heading",depth:c.length,children:{text:b,ranges:e.slice(d.length,b)}}}},lheading:{match:/^([^\n]+)\n\x20*(=|-){3,}\x20*\n*/,token:function(b,d,e){d=b[1];return{type:"heading",depth:"="===b[2]?1:2,children:{text:d,ranges:e.slice(0,d)}}}},hr:{match:/^(?:\x20*[-*_]){3,}\x20*(?:\n|$)/,token:function(){return{type:"hr"}}},blockquote:{match:/^(\x20*>[^\n]+(\n[^\n]+)*\n*)+/,token:function(b,d,e){var c,q;b=b[0];q=[];c=b.replace(/^ *> ?/gm,function(b,
d){var f,c,g,m;m=e.slice(d,b).spans;c=0;for(g=m.length;c<g;c++)f=m[c],q.push(f);return""});b=e.subtract(new mb(q));return[{type:"blockquote_start"}].concat(G.call(this.blockLex(c,d,b)),[{type:"blockquote_end"}])}},num:{match:/(?:\d+\.)/},dash:{match:/(?:[*+-])/},bullet:{match:/(?:dash|num)/},item:{match:/^(\x20*)(bullet)\x20[^\n]*(?:\n(?!\1bullet\x20)[^\n]*)*/},list:{match:/^(\x20*)(?:(dash)\x20[\s\S]+?(?:\nhr|\n{2,}(?=def|(?!\x20))(?!\1dash\x20)\n*|\s*$)|(num)\x20[\s\S]+?(?:\nhr|\n{2,}(?=def|(?!\x20))(?!\1num\x20)\n*|\s*$))/,
token:function(b,d,e){var c,q,k,l,L,n;c=b[0];b=b[2];L=!1;q=0;l=[];n=null!=b?"ul":"ol";k=c.match(this.lexerBlockRules.item.match_gim).length;c.replace(this.lexerBlockRules.item.match_gim,function(b){return function(){var c,g,m,s,v;c=arguments[0];4<=arguments.length?G.call(arguments,1,v=arguments.length-2):v=1;g=arguments[v++];v++;m=e.slice(g,c);g=L||/\n\n(?!\s*$)/.test(c);q!==k-1&&(L="\n"===c[c.length-1],g||(g=L));v=c.length;c=c.replace(/^\x20*([*+-]|\d+\.)\x20+/,function(b){m=m.subtract(m.slice(0,
b));return""});v-=c.length;s=m.clone();c=c.replace(RegExp("^\\x20{1,"+v+"}","gm"),function(b,d){m=m.subtract(s.slice(d,b));return""});l.push([{type:"list_item_start",tag:n,condense:!g,index:q}].concat(G.call(b.blockLex(c,_.extend({},d,{top:!1}),m)),[{type:"list_item_end"}]));q++;return""}}(this));return[{type:"list_start",tag:n}].concat(G.call(_.flatten(l)),[{type:"list_end"}])}},def:{top:!0,match:/^\x20*\[([^\]]+)\]:\x20*<?([^\s>]+)>?(?:\x20+["(]([^\n]+)[")])?\x20*(?:\n+|$)/,token:function(b,d){var e,
c,q,k;e=b[1];k=b[2];q=b[3];c=d.references;null!=c&&c.set(e,{url:k,title:q});return null}},blockAtMention:{nondefault:!0,match:/^@([a-z0-9_]+)(?=\n|$)/,token:function(b){return{type:"atMention",username:b[1]}}},paragraph:{top:!0,match:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|def|blockAtMention))+)\n*/,token:function(b,d,e){b=b[1].replace(/\n$/,"");return{type:"text",children:{text:b,ranges:e.slice(0,b)}}}},text:{required:!0,match:/^[^\n]+/,token:function(b,d,e){b=b[0];return{type:"text",canCondense:!0,
children:{text:b,ranges:e.slice(0,b)}}}},error:{required:!0,match:/^[\s\S]+/,token:function(b){throw Error("invalid block input "+b[0]);}}};d=function(b){var d,e,c,q;d=b.image;e=b.text;q=b.url;c=b.title;b=b.ranges;c={title:c,url:q};d?(c.type="image",c.text=e):(c.type="link",c.children={text:e,ranges:b.slice(1,e)});return c};c.lexerInlineRules={escape:{required:!0,match:/^\\([\\`*{}\[\]()\#+\-.!_>~|@:])/,token:function(b){return{type:"text",text:b[1]}}},tld:{match:/(?:ac|ad|aero|ae|af|ag|ai|al|am|an|ao|aq|arpa|ar|asia|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|biz|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|cat|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|coop|com|co|cr|cu|cv|cx|cy|cz|de|dj|dk|dm|do|dz|ec|edu|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gov|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|info|int|in|io|iq|ir|is|it|je|jm|jobs|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mil|mk|ml|mm|mn|mobi|mo|mp|mq|mr|ms|mt|museum|mu|mv|mw|mx|my|mz|name|na|nc|net|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|org|pa|pe|pf|pg|ph|pk|pl|pm|pn|pro|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sy|sz|tc|td|tel|tf|tg|th|tj|tk|tl|tm|tn|to|tp|travel|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|xn--0zwm56d|xn--11b5bs3a9aj6g|xn--80akhbyknj4f|xn--9t4b11yi5a|xn--deba0ad|xn--g6w251d|xn--hgbk6aj7f53bba|xn--hlcj6aya9esc7a|xn--jxalpdlp|xn--kgbechtv|xn--zckzah|ye|yt|yu|za|zm|zw)/},
bareLink:{match:/([a-z0-9\-]+\.)+(?:tld)/},autolink:{match:/^<(?:(email)|(url|bareLink))>/,token:function(b){var d;d=b[1];b=b[2];return null!=d?{type:"mailto",email:d}:/^[\w-]+:/.test(b)?{type:"link",url:b}:{type:"link",url:"http://"+b,text:b}}},email:{match:/^[-a-z0-9\+\._'%]+@[a-z0-9-\.]+\.[a-z]{2,}/,token:function(b){return{type:"mailto",email:b[0]}}},inside:{match:/(?:\[[^\]\[]*\]|[^\]\[]|\](?=[^\[]*\]))*/},href:{match:/\s*<?((?:[^\s\(\)]?(?:\([^\s()<>]*\)|\()?)+)>?(?:\s+['"]([\s\S]*?)['"])?\s*/},
emailLink:{match:/^\[(inside)\]\((email)\)/,token:function(b){return{type:"mailto",email:b[2],text:b[1]}}},link:{match:/^\[(inside)\]\(href\)/,token:function(b,e,c){return d({text:b[1],url:b[2],title:b[3],ranges:c})}},image:{match:/^(!)\[(inside)\]\(href\)/,token:function(b,e,c){return d({image:!0,text:b[2],url:b[3],title:b[4],ranges:c})}},reflink:{match:/^(!?)\[(inside)\]\s*\[([^\]]*)\]/,token:function(b,e,c){var m,q,k,l;m=b[1];k=b[2];b=b[3];return null==(q=null!=(l=e.references)?l.get(b||k):void 0)?
!1:d({image:m,text:k,url:q.url,title:q.title,ranges:c})}},nolink:{match:/^(!?)\[((?:\[[^\]]*\]|[^\[\]])*)\]/,token:function(b,e,c){var m,q,k;m=b[1];b=b[2];return null==(q=null!=(k=e.references)?k.get(b):void 0)?!1:d({image:m,text:b,url:q.url,title:q.title,ranges:c})}},url:{match:/^((?:[\w-]+:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019])|(?:bareLink)\b)/,token:function(b){b=b[0];return/^[a-z]+:/.test(b)?
{type:"link",url:b}:{type:"link",url:"http://"+b,text:b}}},strong:{match:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,token:function(b,d,e){var c;c=b[1];b=b[2];c=null!=c?c:b;return[{type:"strong_start"}].concat(G.call(this.inlineLex(c,d,e.slice(2,c))),[{type:"strong_end"}])}},em:{match:/^\b_([\s\S]+?)_\b|^\*([\s\S]+?)\*(?!\*)/,token:function(b,d,e){var c;c=b[1];b=b[2];c=null!=c?c:b;return[{type:"em_start"}].concat(G.call(this.inlineLex(c,d,e.slice(1,c))),[{type:"em_end"}])}},strikethrough:{match:/^~~([\s\S]+?)~~/,
token:function(b,d,e){b=b[1];return[{type:"strikethrough_start"}].concat(G.call(this.inlineLex(b,d,e.slice(2,b))),[{type:"strikethrough_end"}])}},code:{match:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,token:function(b){return{type:"code",text:b[2]}}},"break":{match:/^\x20*\n(?!\s*$)/,token:function(){return{type:"break"}}},atMention:{match:/^@([a-z0-9_]+)/,token:function(b){return{type:"atMention",username:b[1]}}},cardReference:{match:/^\#([\d]+)/,token:function(b){return{type:"cardReference",number:b[1]}}},
emoji:{match:/^:([a-z0-9_+-]+):/,token:function(b){return{type:"emoji",emoji:b[1]}}},hashtag:{nondefault:!0,match:/^\#([\S]+)/,token:function(b){return{type:"text",text:b[0]}}},text:{required:!0,match:/^[\s\S]+?(?:\w[@\#\:][\s\S]+?)?(?=[\\<!\[_*`~]|\x20*\n|[@\#:]|(?:\b(?:url|email))|$)/,token:function(b){return{type:"text",text:b[0]}}},error:{required:!0,match:/^[\s\S]+/,token:function(b){throw Error("invalid inline input "+b[0]);}}};b=function(b){var d,e;e=b.username;return null!=this.options.lookupMember&&
(d=this.options.lookupMember(e,this.state),b=d[0],d=d[1],null!=b)?this.html("span","@"+e,{attrs:{"class":"atMention"+(d?" me":""),title:""+b}}):this.text("@"+e)};c.prototype.parseBlockOutput={space:function(){return""},hr:function(){return this.htmln("hr",null)},heading:function(b){return this.htmln("h"+b.depth,this.children(b.children))},blockquote_start:function(){return this.htmln("blockquote",this.process("blockquote_end"),{newlineAfterTag:!0})},list_start:function(b){return this.htmln(b.tag,
this.process("list_end"),{newlineAfterTag:!0})},list_item_start:function(b){return this.htmln("li",this.process("list_item_end",b.condense))},text:function(b){return this.htmln("p",this.children(b.children))},code:function(b){return this.htmln("code",this.text(b.text),{preTag:"<pre>",postTag:"</pre>"})},atMention:b};c.prototype.parseInlineOutput={text:function(b){return this.text(b.text)},strong_start:function(){return this.html("strong",this.process("strong_end"))},em_start:function(){return this.html("em",
this.process("em_end"))},strikethrough_start:function(){return this.html("del",this.process("strikethrough_end"))},code:function(b){return this.html("code",this.escape(b.text))},"break":function(){return this.html("br",null)},link:function(b){var d,e,c;c=b.url;d=b.text;e=b.title;b=b.children;d=null!=b?this.children(b):this.escape(null!=d?d:c);return this.html("a",d,{attrs:{href:c,title:e,target:this.options.openLinksInNewWindow?"_blank":null}})},mailto:function(b){var d;d=b.email;b=b.text;return this.html("a",
this.escape(null!=b?b:d),{attrs:{href:"mailto:"+d}})},image:function(b){return this.html("img",null,{attrs:{src:b.url,alt:b.text,title:b.title}})},atMention:b,cardReference:function(b){var d,e;d=b.number;b="function"===typeof(e=this.options).lookupCardInfo?e.lookupCardInfo(d,this.state):void 0;return this.html("a","#"+d,{attrs:{href:""+b.url,title:""+b.title}})},emoji:function(b){var d,e;b=b.emoji;d="function"===typeof(e=this.options).lookupEmoji?e.lookupEmoji(b,this.state):void 0;return null!=d?
this.html("img",null,{attrs:{src:d,title:b,"class":"emoji"}}):this.text(":"+b+":")}};c.prototype.parseBlockOutputText={space:function(){return this.plaintextn("")},hr:function(){return this.plaintextn("")},heading:function(b){return this.plaintextn(this.textChildren(b.children))},blockquote_start:function(){return this.plaintext(this.textProcess("blockquote_end"))},list_start:function(b){var d,e,c,q;c=this.textProcess("list_end").split("\n");q=[];d=0;for(e=c.length;d<e;d++)b=c[d],q.push(this.plaintextn(" "+
b));return q.join("")},list_item_start:function(b){var d,e;e=b.tag;d=b.index;return this.plaintextn(""+("ol"===e?""+(d+1)+".":"*")+" "+this.textProcess("list_item_end",b.condense))},text:function(b){return this.plaintextn(""+this.textChildren(b.children)+"\n")},code:function(b){return this.plaintextn(b.text)},atMention:function(b){return this.plaintextn(text)}};c.prototype.parseInlineOutputText={text:function(b){return this.plaintext(b.text)},strong_start:function(){return this.plaintext(this.textProcess("strong_end"))},
em_start:function(){return this.plaintext(this.textProcess("em_end"))},code:function(b){return this.plaintext(b.text)},"break":function(){return this.plaintext("\n")},link:function(b){var d,e;e=b.url;d=b.text;b=b.children;return null!=b?this.plaintext(""+this.textChildren(b)+" ("+e+")"):null!=d?this.plaintext(""+d+" ("+e+")"):this.plaintext(e)},mailto:function(b){var d;d=b.email;b=b.text;return null!=b?this.plaintext(""+b+" ("+d+")"):this.plaintext(d)},image:function(b){b=b.title;return null!=b?this.plaintext(b):
this.plaintext("")},atMention:function(b){return this.plaintext(b.username)},cardReference:function(b){return this.plaintext("#"+b.number)},emoji:function(b){return this.plaintext(":"+b.emoji+":")}};c.prototype.lex=function(b,d,e,c){var q,k,l,L,n,s,v,w,y,A,C;null==e&&(e={});null==e.top&&(e.top=!0);null==e.locations&&(e.locations=[]);n=c.clone();d=d.replace(/^\x20+$/gm,function(b,d){c=c.subtract(n.slice(d,b));return""});k=[];for(L=0;d;)for(s in b)if(w=b[s],q=w.match_i,v=w.token,w=w.top,null!=v&&(null==
w||e.top===w)&&null!=(l=q.exec(d)))if(q=l[0],w=c.slice(L,q),v=v.call(this,l,e,w),!1!==v){if(null!=v){_.isArray(v)||(v=[v]);C=0;for(y=v.length;C<y;C++)A=v[C],k.push(A)}if(0===q.length)throw Error("infinite loop");d=d.substr(q.length);C=w.spans;v=0;for(A=C.length;v<A;v++)y=C[v],w=y[0],y=y[1],e.locations.push({start:w,stop:y,rule:s});L+=q.length;break}return k};c.prototype._expandChildren=function(b,d,e){var c,q,k,l,L,n;if(0!==b.length){if(e){k=b[0];l=2<=b.length?G.call(b,1):[];b=[k];q=function(b,d){return b.canCondense&&
null!=b.children&&b.type===d};c=L=0;for(n=l.length;L<n;c=++L)e=l[c],q(k,"text")&&(q(e,"text")||q(e,"space")&&q(l[c+1],"text"))?k.children={text:k.children.text+e.children.text,ranges:new mb(G.call(k.children.ranges.spans).concat(G.call(e.children.ranges.spans)))}:(b.push(e),k=e)}k=0;for(q=b.length;k<q;k++)e=b[k],null!=e.children&&(l=e.children,c=l.text,l=l.ranges,c=this.inlineLex(c,d,l),this._expandChildren(c,d),e.children=c)}};c.prototype.blockLex=function(b,d,e,c){null==e&&(e=mb.fromString(b));
null==d.references&&(d.references={map:{},set:function(b,d){return this.map[b.toLowerCase()]=d},get:function(b){return this.map[b.toLowerCase()]}});b=this.lex(this.lexerBlockRules,b,d,e);c&&this._expandChildren(b,d,!0);return b};c.prototype.inlineLex=function(b,d,e,c){null==e&&(e=mb.fromString(b));b=this.lex(this.lexerInlineRules,b,d,e);c&&this._expandChildren(b,d,!0);return b};c.prototype.parse=function(b,d,e){var c;c={options:this.options,state:e,index:0,next:function(){return this.current=d[this.index++]},
process:function(d,e){var f,h,k;for(k=[];null!=(h=this.next())&&h.type!==d;)if(e&&"text"===h.type)k.push(c.children(h.children));else if(f=b[h.type],null!=f)k.push(f.call(c,h));else throw Error("invalid token type "+h.type);return k.join("")},textProcess:function(d,e){var f,h,k;for(k=[];null!=(h=this.next())&&h.type!==d;)if(e&&"text"===h.type)k.push(c.textChildren(h.children));else if(f=b[h.type],null!=f)k.push(f.call(c,h));else throw Error("invalid token type "+h.type);return k.join("")},children:function(b){return function(d,
c){return b.parseInline(d,e)}}(this),textChildren:function(b){return function(d,c){return b.parseInlineText(d,e)}}(this),escape:function(b){null==b&&(b="undefined");return b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},safeUrl:function(b){return/^\//.test(b)?b:/^[^\/]*:/.test(b)?b.replace(/^[^:]*/,function(b){b=b.toLowerCase().replace(/[^\w-]/g,"");return!b||/script|data/.test(b)?"http":b}):"http://"+b},text:function(b){return this.escape(b)},
plaintext:function(b){return b},plaintextn:function(b){return this.plaintext(b)+"\n"},html:function(b,d,e){var c,f,g,h,m;g=null!=e?e:{};e=g.attrs;f=g.newlineAfterTag;m=g.preTag;h=g.postTag;g="";null!=m&&(g+=m);g+="<"+b;if(null!=e)for(c in e)if(m=e[c],null!=m){if("src"===c||"href"===c)m=this.safeUrl(m);g+=" "+(""+c+'="'+this.escape(m)+'"')}g+=">";f&&(g+="\n");null!=d&&(g+=d+("</"+b+">"),null!=h&&(g+=h));return g},htmln:function(){var b;b=1<=arguments.length?G.call(arguments,0):[];return this.html.apply(this,
b)+"\n"}};return c.process()};c.prototype.parseBlocks=function(b,d){null==d&&(d={});return this.parse(this.parseBlockOutput,b,d)};c.prototype.parseInline=function(b,d){null==d&&(d={});return this.parse(this.parseInlineOutput,b,d)};c.prototype.parseBlocksText=function(b,d){null==d&&(d={});return this.parse(this.parseBlockOutputText,b,d)};c.prototype.parseInlineText=function(b,d){null==d&&(d={});return this.parse(this.parseInlineOutputText,b,d)};e=function(b){return b.replace(/\r\n|\r/g,"\n").replace(/\t/g,
"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n")};c.prototype.format=function(b,d){var c;null==d&&(d={});b=e(b);return{output:this.options.inlineOnly?this.formatInline(b,d):(d=_.extend({top:!0},d),c=this.blockLex(b,d,null,!0),this.parseBlocks(c,d)),locations:d.locations}};c.prototype.formatInline=function(b,d,e){null==d&&(d={});null==e&&(e=null);return this.parseInline(this.inlineLex(b,d,e,!0),d)};c.prototype.text=function(b,d){var c,m;null==d&&(d={});b=e(b);c=this.options.inlineOnly?this.textInline(b,
d):(d=_.extend({top:!0},d),m=this.blockLex(b,d,null,!0),this.parseBlocksText(m,d));c=c.replace(/^\s*|\s*$/g,"").replace(/\n(\x20*\n)+/g,"\n\n");return{output:c,locations:d.locations}};c.prototype.textInline=function(b,d){null==d&&(d={});return this.parseInlineText(this.inlineLex(b,d,ranges,!0),d)};c.prototype.analyze=function(b,d){null==d&&(d={});b=e(b);this.options.inlineOnly?this.inlineLex(b,d):(d=_.extend({top:!0},d),this.blockLex(b,d,null,!0));return d.locations};c.prototype.getMatches=function(b,
d,e){var c,q,k,l,L,n;null==e&&(e={});q=this.analyze(b);l={};for(c in d)l[c]=[];L=0;for(n=q.length;L<n;L++)c=q[L],c.rule in d&&(k=b.slice(c.start,c.stop),k=!(c.rule in e)?k:e[c.rule](k),l[c.rule].push(k));return l};c.prototype.replace=function(b,d,e){var c,q,k,l,n,s,B;c=_.sortBy(this.analyze(b),function(b){return-b.start});q=b.length;s=0;for(B=c.length;s<B;s++)n=c[s],k=n.rule,l=n.start,n=n.stop,0<=D.call(d,k)&&n<=q&&(b=[b.slice(0,l),e(b.slice(l,n),{rule:k,options:this.options}),b.slice(n)].join(""),
q=l);return b};return c}();mb=function(){function c(b){this.spans=null!=b?b:[]}var b,d,e;c.fromString=function(b){return new c([[0,b.length]])};c.prototype.clone=function(){return new c(_.clone(this.spans))};e=function(b,d){var e,c,q,k,l,n,s,B;e=[];l=_.clone(b);for(s=0;l.length;)c=l.shift(),s>=d.length?e.push(c):(k=c[0],q=c[1],n=d[s],B=n[0],n=n[1],n<=k?(l.unshift(c),s++):B>=q?e.push(c):B<=k&&n<q?(l.unshift([n,q]),s++):B<=k&&n>=q||(B>k&&n<q?(e.push([k,B]),l.unshift([n,q]),s++):B>k&&n>=q&&e.push([k,
B])));return e};c.prototype.subtract=function(b){return new c(e(this.spans,b.spans))};b=function(b,d){var e,c,q,k;q=0;for(k=b.length;q<k;q++){e=b[q];c=e[0];e=e[1];e-=c;if(d<=e)return c+d;d-=e}throw Error("invalid position");};d=function(d,c,h){var m;c=b(d,c);m=b(d,h);h=[0,c];c=[m,_.last(d)[1]];return e(d,[h,c])};c.prototype.slice=function(b,e){return _.isString(e)?this.slice(b,b+e.length):new c(d(this.spans,b,e))};return c}();"undefined"!==typeof module&&null!==module&&(module.exports=Fa);"function"===
typeof require&&(Fa=require("./trelloMarkdown.coffee"),Ra=require("./EmojiMap.coffee"));var ld;ld=function(){function c(){var b;b={lookupEmoji:this.lookupEmoji,lookupCardInfo:this.lookupCardInfo,lookupMember:this.lookupMember};this.full=new Fa(b);this.comments=new Fa(_.extend({restrict:{block:"blockquote code fencedCode hr list newline paragraph".split(" "),inline:"atMention autolink cardReference break code em email emailLink emoji link strong strikethrough url".split(" ")}},b));this.checkItems=
new Fa(_.extend({inlineOnly:!0,restrict:{inline:"atMention autolink cardReference code em email emailLink emoji link strong strikethrough url".split(" ")}},b));this.emailSubjects=new Fa({inlineOnly:!0,restrict:{inline:["atMention","hashtag"]}});this.emailBodies=new Fa({restrict:{block:"newline code fencedCode heading lheading hr blockquote list def blockAtMention paragraph text error".split(" "),inline:"escape autolink url link reflink nolink strong em code break hashtag cardReference emoji text error email emailLink strikethrough".split(" ")}})}
c.prototype.lookupEmoji=function(){throw Error("not implemented");};c.prototype.lookupMember=function(){throw Error("not implemented");};c.prototype.lookupCardInfo=function(){throw Error("not implemented");};return c}();"undefined"!==typeof exports&&null!==exports&&(exports.TFM=ld);var Na,k=function(c,b){return function(){return c.apply(b,arguments)}};Na=new (Na=function(){function c(){this.advertiseUpgrade=k(this.advertiseUpgrade,this);this.versionCompatible=k(this.versionCompatible,this);this.showVersionInformation=
k(this.showVersionInformation,this);this.getVersionDisplay=k(this.getVersionDisplay,this);this.setServerVersion=k(this.setServerVersion,this);this.lessThanClient=k(this.lessThanClient,this);this.greaterThanClient=k(this.greaterThanClient,this);this.compareWithClient=k(this.compareWithClient,this);this.version=new ab.Client(window.clientVersion);this.server={version:"0.0.0",environment:"dev"};Object.defineProperty(window,"TrelloVersion",{get:function(b){return function(){var d;return"Server: "+b.server.version+
" ("+b.server.environment+")\nClient: "+b.version+" ("+(null!=(d=window.channels)?d.active:void 0)+")"}}(this)})}c.prototype.compareWithClient=function(b){return ab.compareStringVersions(b,this.version)};c.prototype.greaterThanClient=function(b){return 0<this.compareWithClient(b)};c.prototype.lessThanClient=function(b){return 0>this.compareWithClient(b)};c.prototype.setServerVersion=function(b){var d,e;d=!1;for(e in this.server)this.server[e]!==b[e]&&(d=!0,this.server[e]=b[e]);if(d)return $(this).triggerHandler("change:serverVersion")};
c.prototype.getVersionDisplay=function(){return!this.showVersionInformation()?"":window.TrelloVersion};c.prototype.showVersionInformation=function(){var b;return"dev"===(null!=(b=window.channels)?b.active:void 0)||"dev"===this.version.head&&"dev"!==this.server.environment};c.prototype.versionCompatible=function(){var b,d;if(this.version===this.server.version)return!0;b=!this.server.versionMin||!this.greaterThanClient(this.server.versionMin);d=!this.server.versionMax||!this.lessThanClient(this.server.versionMax);
return b&&d};c.prototype.advertiseUpgrade=function(){return!1};return c}());var ya;ya=new (function(){function c(){this.profilerEnabled=$.cookie("profiler");this.timeStarts={};this.completed=[];this.profilerEnabled&&setInterval(function(b){return function(){return b.render()}}(this),250);this.getTime=null!=("undefined"!==typeof performance&&null!==performance?performance.now:void 0)?function(){return performance.now()}:function(){return+new Date}}c.prototype.render=function(){var b,d,e,c,f,h,m,q,
k;if($("#surface").length){$(".js-profiler").length||$("#surface").append(v.fill("profiler",{}));$(".js-profiler").empty();c=[];q=this.completed;h=0;for(m=q.length;h<m;h++)b=q[h],f=b.name,e=b.startTime,b=b.endTime,(null!=(k=d=_.last(c))?k.name:void 0)===f?(null==d.count&&(d.count=1),d.count++,d.time+=b-e):c.push({name:f,time:b-e});h=0;for(m=c.length;h<m;h++)e=c[h],e.time=""+Math.floor(100*e.time)/100+"ms";e=this.timeStarts;for(f in e)c.push({name:f,time:"pending..."});m=[];f=0;for(h=c.length;f<h;f++)e=
c[f],m.push($(".profiler").append(v.fill("profiler_entry",e)));return m}};c.prototype.time=function(b){return this.timeStarts[b]=this.getTime()};c.prototype.timeEnd=function(b,d){var e,c,f,h;e=null!=d?d:{};f=e.reportToServer;h=e.serverName;e=e.data;c=this.getTime();if(this.timeStarts[b])return this.completed.push({name:b,startTime:this.timeStarts[b],endTime:c}),f&&za.inTest("client_profiler_reports")&&$.post("/clientTiming",{name:h,time:c-this.timeStarts[b],data:e,version:Na.version.toString()}),
delete this.timeStarts[b];P("END WITH NO START: "+b)};return c}());var n;n=function(c,b,d,e){return"function"===typeof window.ga?window.ga("send","event",c,b,d,e):void 0};var za,k=function(c,b){return function(){return c.apply(b,arguments)}},F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c};za=new (function(c){function b(){this.ready=k(this.ready,this);this.percentage=
k(this.percentage,this);this.refreshPercentages=k(this.refreshPercentages,this);null!=window._abPercentagesAtLoad?(this._ready=!0,this._percentages=window._abPercentagesAtLoad):(this._ready=!1,this._percentages={});this._pending=[];this._cookie=$.cookie("ab");this._hasher=_.memoize(jb.md5)}s(b,c);b.prototype.getDefaultId=function(){return this.__getDefaultId()};b.prototype.__getDefaultId=function(){if("everything"===this._cookie)return this._cookie;if(y.isLoggedIn())return y.myId();this._cookie||
(this._cookie=this._hasher(""+Math.random()).substr(0,16),$.cookie("ab",this._cookie,{path:"/",expires:60}));return this._cookie};b.prototype.event=function(b,e){null==e&&(e=this.getDefaultId());return $.post("/ab",{id:e,event:b})};b.prototype.tests=function(b){null==b&&(b=this.getDefaultId());return _.mapObj(this._percentages,function(e){return function(c,f){return["AB_"+f,e.inTest(f,b)]}}(this))};b.prototype.refreshPercentages=function(){return $.ajax("/ab/enabled",{dataType:"json"}).success(function(b){return function(e){var c,
f,h,m;b._percentages=e;b._ready=!0;c=b._pending;b._pending=[];m=[];f=0;for(h=c.length;f<h;f++)e=c[f],m.push("function"===typeof e?e():void 0);return m}}(this))};b.prototype.percentage=function(b,e){return"everything"===e?100:this._percentages[b]};b.prototype.ready=function(b){return this._ready?"function"===typeof b?b():void 0:this._pending.push(b)};return b}(kd));za._ready||za.refreshPercentages();G=[].slice;F={}.hasOwnProperty;s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,
e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c};Fa.lexerInlineRules.url.token=_.wrap(Fa.lexerInlineRules.url.token,function(){var c,b,d;b=arguments[0];c=2<=arguments.length?G.call(arguments,1):[];d=c[0][0];return _.extend(b.apply(null,c),{known:Bb.interpret(d,C.getCurrentModelCache())})});Fa.prototype.parseInlineOutput.link=_.wrap(Fa.prototype.parseInlineOutput.link,function(c,b){var d;return null!=(d=b.known)?(d=this.html("img",null,{attrs:{src:d.icon,
"class":"known-service-icon"}})+this.html("span",this.text(d.text),{attrs:{id:d.id}}),this.html("a",d,{attrs:{href:b.url,title:b.title,target:"_blank","class":"known-service-link"}})):c.call(this,b)});Ja=new (function(c){function b(){b.__super__.constructor.call(this)}s(b,c);b.prototype.lookupEmoji=function(b,e){var c,f,h;b=b.toLowerCase();return null!=(c=null!=(f=e.textData)?null!=(h=f.emoji)?h[b]:void 0:void 0)?c:Ra[b]};b.prototype.lookupMember=function(b,e){var c;return(c=aa.findOne(C.getCurrentModelCache(),
function(e){return e.hasAtMe("@"+b)}))?[c.get("fullName"),y.isMe(c)]:[null,!1]};b.prototype.lookupCardInfo=function(b,e){var c,f;b=parseInt(b,10);f=null!=e?null!=(c=e.board)?c.id:void 0:void 0;null==f&&C.onAnyBoardView()&&(f=C.idModel);c=Ga.findOne(C.getCurrentModelCache(),function(e){return e.get("idBoard")===f&&e.get("idShort")===b});if(null!=c)return{title:c.get("name"),url:C.getCardUrl(c)};c="Card "+b;return{title:c,url:C.getCardUrlWithoutModels(f,b,c)}};return b}(ld));"undefined"!==typeof exports&&
null!==exports&&(exports.TFM=Ja);"undefined"!==typeof window&&null!==window&&(window.TFM=Ja);(function(){var c,b,d;c=[];b=2;d=null;$(function(){d=_.debounce(function(){if(0<c.length){try{$.post("/err",{errors:c})}catch(b){}return c=[]}},1E3);return d()});window.onerror=function(e,g,f,h,m){var q,k,l;if(RegExp("https?://("+location.host+"|[a-z0-9]+\\.cloudfront\\.net|a.trellocdn.com)/").test(g)&&!(0>=b))return q={name:null!=m?m.name:void 0,msg:null!=(k=null!=m?m.message:void 0)?k:e,url:g,line:f,col:h,
stack:null!=m?m.stack:void 0,ua:"undefined"!==typeof navigator&&null!==navigator?navigator.userAgent:void 0,browser:"undefined"!==typeof ba&&null!==ba?ba.asString:void 0,language:null!=(l=navigator.language)?l:navigator.browserLanguage,clientVersion:clientVersion},"undefined"!==typeof y&&null!==y&&y.isLoggedIn()&&(q.idMember=y.myId()),_.any(c,function(b){return _.isEqual(b,q)})||(b--,c.push(q),"function"===typeof d&&d()),"function"===typeof n&&n("Client JS Error",e),!1};return window.crashTest=function(){return setTimeout(function(){return thingThatDoesNotExist.crash},
1)}})();var mc,He,md,Ie,Je,Ke,Le,nd,Nb,Me,Ne,Oe,Pe,od,Qe,Re,Se,Te,pd,Ue,Ve,qd,We,Xe,Ye,Ze,$e,af,bf,cf;Nb="addAttachmentToCard,addChecklistToCard,addMemberToCard,commentCard,copyCommentCard,convertToCardFromCheckItem,createCard,copyCard,deleteAttachmentFromCard,emailCard,moveCardFromBoard,moveCardToBoard,removeChecklistFromCard,removeMemberFromCard,updateCard:idList,updateCard:closed,updateCheckItemStateOnCard";mc=[Nb,"addMemberToBoard,addToOrganizationBoard,copyBoard,createBoard,createList,deleteCard,disablePowerUp,enablePowerUp,makeAdminOfBoard,makeNormalMemberOfBoard,makeObserverOfBoard,moveListFromBoard,moveListToBoard,removeFromOrganizationBoard,unconfirmedBoardInvitation,unconfirmedOrganizationInvitation,updateBoard,updateList:closed"].join();
od=[mc,"updateMember"].join();md=["dateLastActivity","dateLastView"];Ie={fields:"name,closed,dateLastActivity,dateLastView,idOrganization,prefs,shortLink,shortUrl,url",organization:!0,organization_fields:"name,displayName,products,prefs,logoHash",myPermLevel:!0};Le={boards:"open,starred",board_fields:"name,closed,dateLastActivity,dateLastView,idOrganization,prefs,shortLink,shortUrl,url",boardStars:!0,organizations:"all",organization_fields:"name,displayName,products,prefs,logoHash",board_organization:!0,
board_organization_fields:"name,displayName,products,prefs,logoHash",board_myPermLevel:!0};Ue={fields:"",boards:"open,starred",board_fields:md};Ke={fields:md};nd={fields:"all",stickers:!0,attachments:!0};Nb={actions:Nb,action_memberCreator_fields:"fullName,initials,memberType,username,avatarHash,bio,bioData,confirmed,products,url,idPremOrgsAdmin",members:!0,member_fields:"fullName,initials,memberType,username,avatarHash,bio,bioData,confirmed,products,url,status",attachments:!0,fields:"",checklists:"all"};
Ne={fields:"idMembersVoted",membersVoted:!0};Me={members:!0,member_fields:"fullName,initials,memberType,username,avatarHash,bio,bioData,confirmed,products,url,status",attachments:!0,stickers:!0,fields:"",checklists:"all"};Oe={lists:"all",cards:"visible",card_attachments:"cover",card_stickers:!0,card_fields:"badges,closed,dateLastActivity,desc,descData,due,idAttachmentCover,idList,idBoard,idMembers,idShort,labels,name,pos,shortUrl,shortLink,subscribed,url",card_checklists:"none",members:"all",member_fields:"fullName,initials,memberType,username,avatarHash,bio,bioData,confirmed,products,url,status",
membersInvited:"all",membersInvited_fields:"fullName,initials,memberType,username,avatarHash,bio,bioData,confirmed,products,url",checklists:"none",organization:!0,organization_fields:"name,displayName,desc,descData,url,website,prefs,memberships,logoHash,products",myPrefs:!0,fields:"name,closed,dateLastActivity,dateLastView,idOrganization,prefs,shortLink,shortUrl,url,desc,descData,invitations,invited,labelNames,memberships,pinned,powerUps,subscribed"};Je={fields:"",actions:mc,actions_limit:50,action_memberCreator_fields:"fullName,initials,memberType,username,avatarHash,bio,bioData,confirmed,products,url,idPremOrgsAdmin"};
He={fields:"",checklists:"none",cards:"visible",card_fields:"",card_checklists:"all"};Pe={tokens:"all",sessions:"all",credentials:"all",paid_account:!0,credits:"invitation,promoCode",logins:!0};Te={paid_account:!0};Qe={boards:"open,starred",board_fields:"name,closed,dateLastActivity,dateLastView,idOrganization,prefs,shortLink,shortUrl,url,subscribed",boardStars:!0,boardsInvited:"all",boardsInvited_fields:"name,closed,dateLastActivity,dateLastView,idOrganization,prefs,shortLink,shortUrl,url,subscribed",
board_organization:!0,board_organization_fields:"name,displayName,products,prefs,logoHash",credits:"invitation,promoCode",organizations:"all",organization_fields:"name,displayName,products,prefs,logoHash",organizationsInvited:"all",organizationsInvited_fields:"name,displayName,products,prefs,logoHash",paid_account:!0};qd={board:!0,list:!0,fields:"badges,closed,due,idAttachmentCover,idList,idBoard,idMembers,idShort,labels,name,url",attachments:"true",members:"true",stickers:"all",member_fields:"fullName,initials,memberType,username,avatarHash,bio,bioData,confirmed,products,url"};
Re={boards:"open",board_fields:"name,closed,idOrganization,prefs",board_lists:"open",board_memberships:"me",cards:"visible",card_fields:"badges,closed,dateLastActivity,desc,descData,due,idAttachmentCover,idList,idBoard,idMembers,idShort,labels,name,pos,shortUrl,shortLink,subscribed,url",card_attachments:"true",card_stickers:!0,card_members:"true",card_member_fields:"fullName,initials,memberType,username,avatarHash,bio,bioData,confirmed,products,url",organizations:"all",organization_fields:"displayName,name,prefs,products",
organization_memberships:"me",paid_account:!0};Se={fields:"fullName,initials,memberType,username,avatarHash,bio,bioData,confirmed,products,url"};pd={actions:"all",actions_limit:10,organizations:"all",organization_fields:"name,displayName,products,prefs,logoHash",boards:"open",board_fields:"name,prefs,idOrganization",paid_account:!0};We={boards:"open",board_fields:"name,closed,dateLastActivity,dateLastView,idOrganization,prefs,shortLink,shortUrl,url,subscribed",fields:"all",members:"all",member_fields:"fullName,initials,memberType,username,avatarHash,bio,bioData,confirmed,products,url,status",
membersInvited:"all",membersInvited_fields:"fullName,initials,memberType,username,avatarHash,bio,bioData,confirmed,products,url",paid_account:!0};Ye={exports:!0,fields:"all",paid_account:!0};Xe={boards:"open",board_fields:"name,closed,dateLastActivity,dateLastView,idOrganization,prefs,shortLink,shortUrl,url,subscribed",fields:"all",paid_account:!0};bf={paid_account:!0};Ze={member_activity:!0,boards:"open",board_fields:"name,closed,memberships",fields:"all",members:"all",member_fields:"fullName,initials,memberType,username,avatarHash,bio,bioData,confirmed,products,url,status",
membersInvited:"all",membersInvited_fields:"fullName,initials,memberType,username,avatarHash,bio,bioData,confirmed,products,url",paid_account:!0};$e={members:"all"};af={fields:"all"};Ve={notifications:"all",notifications_limit:5,notification_memberCreator_fields:"fullName,initials,memberType,username,avatarHash,bio,bioData,confirmed,products,url",organizations:"all",organization_paid_account:!0,organization_fields:"name,displayName",paid_account:!0};cf={organizations:"all",organization_paid_account:!0};
var ka;ka=new (function(){function c(){}c.prototype._storage=window.localStorage;c.prototype.enabled=function(){return null!=this._storage};c.prototype.set=function(b,d){var e;try{return null!=(e=this._storage)?e[b]=JSON.stringify(d):void 0}catch(c){}};c.prototype.get=function(b){var d;if(b=null!=(d=this._storage)?d[b]:void 0)try{return JSON.parse(b)}catch(e){return null}else return null};c.prototype.unset=function(b){var d,e;if(null!=(null!=(d=this._storage)?d[b]:void 0))return null!=(e=this._storage)?
delete e[b]:void 0};return c}());var rd,P,k=function(c,b){return function(){return c.apply(b,arguments)}},G=[].slice;rd=new (function(){function c(){this.log=k(this.log,this);var b;this.enabled=null!=(b=ka.get("loggers"))?b:{};this.historyMap={};this.logHistory=!1;this.timeSpent={};this.timing={}}c.prototype.log=function(){var b,d,e;e=arguments[0];b=2<=arguments.length?G.call(arguments,1):[];if("undefined"!==typeof console&&null!==console&&console.log&&(0===b.length?(d=!0,b.push(e),e="all"):d=this.enabled.all||
this.enabled[e],d&&(1===b.length&&_.isArray(b[0])&&(b=b[0]),b.unshift(e),$("body").is(".chrome")?console.log(b):console.dir(b)),this.logHistory)){if(null==(d=this.historyMap)[e])d[e]=[];this.historyMap[e].push(b)}};c.prototype.enable=function(b){null==b&&(b="all");this.enabled[b]=!0;this.save()};c.prototype.disable=function(b){null==b&&(b="all");delete this.enabled[b];this.save()};c.prototype.disableAll=function(){this.enabled={};this.save()};c.prototype.enableAll=function(){this.enabled.all=!0;this.save()};
c.prototype.history=function(b){var d,e,c;if(b in this.historyMap){c=this.historyMap[b];d=0;for(e=c.length;d<e;d++)b=c[d],"undefined"!==typeof console&&null!==console&&"function"===typeof console.log&&console.log(b)}};c.prototype.list=function(){"undefined"!==typeof console&&null!==console&&"function"===typeof console.log&&console.log(_.keys(this.historyMap))};c.prototype.save=function(){ka.set("loggers",this.enabled)};c.prototype.time=function(b){return this.timing[b]=performance.now()};c.prototype.endTime=
function(b){var d,e;d=performance.now()-this.timing[b];if(null==(e=this.timeSpent)[b])e[b]=0;return this.timeSpent[b]+=d};return c}());P=rd.log;window.Logger=rd;var ba,sd,bb,k=function(c,b){return function(){return c.apply(b,arguments)}};sd=function(){function c(){this.searchVersion=k(this.searchVersion,this);this.searchString=k(this.searchString,this);this.browser=this.searchString(this.dataBrowser)||"unknown-browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||
"unknown-browser-version";this.OS=this.searchString(this.dataOS)||"unknown-os"}c.prototype.searchString=function(b){var d,e,c;e=0;for(c=b.length;e<c;e++)if(d=b[e],this.versionSearchString=d.versionSearch||d.identity,d.string&&-1!==d.string.indexOf(d.subString)||d.prop)return d.identity};c.prototype.searchVersion=function(b){var d;d=b.indexOf(this.versionSearchString);if(-1!==d)return parseFloat(b.substring(d+this.versionSearchString.length+1))};c.prototype.dataBrowser=[{string:navigator.userAgent,
subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},
{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}];c.prototype.dataOS=[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,
subString:"iPhone",identity:"iPhone"},{string:navigator.userAgent,subString:"iPod",identity:"iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Linux",identity:"Linux"}];return c}();bb=new sd;ba=new (function(){function c(){this.hasDownloadAttribute=k(this.hasDownloadAttribute,this);this.allowsDynamicFavicon=k(this.allowsDynamicFavicon,this);this.isHighDPI=k(this.isHighDPI,this);
this.isTouch=k(this.isTouch,this);this.browserStr=bb.browser.toLowerCase();this.browserVersionStr=(""+bb.browser+"-"+bb.version).toLowerCase();this.osStr=bb.OS.toLowerCase();this.asString=""+this.browserStr+" "+this.browserVersionStr+" "+this.osStr;$(function(b){return function(){return $("body").addClass(b.asString)}}(this))}c.prototype.isTouch=function(){var b;return"ipad"===(b=this.osStr)||"iphone"===b||"android"===b};c.prototype.isHighDPI=function(){return 1<window.devicePixelRatio};c.prototype.allowsDynamicFavicon=
function(){var b;return"chrome"===(b=this.browserStr)||"firefox"===b};c.prototype.hasDownloadAttribute=function(){var b;return"chrome"===(b=this.browserStr)||"firefox"===b||"opera"===b};c.prototype.detectCustomWebkitScrollbars=function(){var b;try{return $("::-webkit-scrollbar"),b="body-webkit-scrollbars"}catch(d){return"body-no-webkit-scrollbars"}finally{$("body").addClass(b)}};return c}());var y,D=[].indexOf||function(c){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===c)return b;return-1};
y=new (function(){function c(){this.check()}var b,d,e;d=b=null;e="token"+window.location.port;c.prototype.isLoggedIn=function(){return"notLoggedIn"!==b};c.prototype.myId=function(){return b};c.prototype.myUsername=function(){var b;return null!=(b=this.me())?b.get("username"):void 0};c.prototype.myToken=function(){return d};c.prototype.me=function(){var d,e,c,m,q;e=aa.get("header",b);if(null==e&&!this.isLoggedIn())for(c in d=ModelCacheCache["for"]("header"),e=new aa({id:"notLoggedIn",notLoggedIn:!0},
{modelCache:d}),d.add(e),m=ModelCacheCache._caches,m)d=m[c],(q=d.getCacheType(),0<=D.call(nb.fullCacheTypes,q))&&d.add(new aa({id:"notLoggedIn",notLoggedIn:!0},{modelCache:d}));return e};c.prototype.isMe=function(d){return null!=d&&d.id?this.isMe(d.id):d===b};c.prototype.confirmed=function(){return this.me().get("confirmed")};c.prototype.canLogIn=function(){var b,d;return!_.isEmpty(null!=(b=null!=(d=this.me())?d.get("loginTypes"):void 0)?b:[])};c.prototype.check=function(){this.updateToken();"undefined"!==
typeof rpc&&null!==rpc&&rpc.handleLogin()};c.prototype.updateToken=function(){d=$.cookie(e)||"";return b=d.split("/")[0]||"notLoggedIn"};c.prototype.consistencyCheck=function(b){var d;d=!this.isLoggedIn()||this.isMe(this.me());d||($.cookie(e,null,{path:"/"}),b.reloadOnError&&window.location.reload());return d};c.prototype.logoutPost=function(){return $("<form>").attr({method:"post",action:"/logout"}).css({display:"none"}).appendTo("body").submit()};return c}());var nc,td;td=[16,17,18,27,20];nc=[37,
39,38,40];var D=[].indexOf||function(c){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===c)return b;return-1},G=[].slice,F={}.hasOwnProperty,l=_.extend(jb,{stopPropagation:function(c){return null!=c?c.stopPropagation():void 0},preventDefault:function(c){return null!=c?c.preventDefault():void 0},stop:function(c){l.stopPropagation(c);return l.preventDefault(c)},securePage:function(){return"https:"===document.location.protocol},getNaturalNumber:function(c){var b;_.isString(c)||(c=String(c));
if(c){if("1"===c.charAt(c.length-2))return""+c+"th";b=c.charAt(c.length-1);switch(b){case "4":case "5":case "6":case "7":case "8":case "9":case "0":return""+c+"th";case "1":return""+c+"st";case "2":return""+c+"nd";case "3":return""+c+"rd"}}},checkEmail:function(c,b){null==b&&(b="");return RegExp('^[^"@\\s\\[\\]\\(\\),:;<>\\\\]+@[-a-z0-9\\.'+b+"]+\\.[a-z"+b+"]+$","i").test(c)},removeDomainFromEmailAddress:function(c,b){null==b&&(b="");return c.replace(RegExp("@[-a-z0-9\\."+b+"]+\\.[a-z"+b+"]+$"),"")},
validName:function(c){return 3<c.length||1<c.length&&this.hasChineseCharacters(c)},hasChineseCharacters:function(c){return/[\u3400-\u9FBF\s]/.test(c)},spaces:function(c){this.longStr||(this.longStr=" ");for(;this.longStr.length<c;)this.longStr+=this.longStr;return this.longStr.substr(0,c)},_pad:function(c,b,d,e){null==d&&(d=" ");c=c.toString();if(c.length>b)return c.substr(0,b);b-=c.length;d=" "===d?this.spaces(b):this.times(d,b);return e?d+c:c+d},rpad:function(c,b,d){return this._pad(c,b,d,!1)},
lpad:function(c,b,d){return this._pad(c,b,d,!0)},times:function(c,b){var d;return _.map(function(){d=[];for(var e=0;0<=b?e<b:e>b;0<=b?e++:e--)d.push(e);return d}.apply(this),function(){return c}).join("")},truncate:function(c,b){var d;return!(null!=c&&c.length)||c.length<b?c:(d=c.substr(0,c.lastIndexOf(" ",b)))?d:c.substr(0,b)},scrollToTop:function(){return $(window).scrollTop(0)},isSubmitKey:function(c){return null!=c&&(13===c||10===c||l.isSubmitKey(c.keyCode)||l.isSubmitKey(c.which))},isForceSubmitKey:function(c){return l.isSubmitKey(c)&&
(c.ctrlKey||c.metaKey)&&!c.shiftKey},getProtocol:function(c){var b,d;return!c?"":null!=(b=null!=(d=/^([a-z]+):/i.exec(c))?d[1]:void 0)?b:""},makeHttp:function(c){if(!c)return"";c=c.replace(/^[a-z]*:\/*/i,"");return"http://"+c},sanitizeWebAddress:function(c){var b;return"http"!==(b=l.getProtocol(c))&&"https"!==b?l.makeHttp(c):c},isInPosition:function(c,b,d){if(null==(null!=d?d.id:void 0))return!1;c=b[c];return(null!=c?c.id:void 0)===d.id},calcPos:function(c,b,d,e,g){var f;b=b.select(function(b){return(!(null!=
d&&d.id===b.id)||g)&&(!e||e(b))});if(l.isInPosition(c,b,d))return null!=(f=d.pos)?f:d.get("pos");f=Math.min(Math.max(c,0),b.length);c=b[f-1];f=b[f];b=(null!=d?d.get("pos"):void 0)||-1;c=null!=c?c.get("pos"):-1;f=null!=f?f.get("pos"):-1;return-1===f?d&&b>c?b:c+65536:d&&b>c&&b<f?b:0<=c?(f+c)/2:f/2},pushSupport:function(){return!(!window.history||!window.history.pushState||l.isNonPushstateAndroid())},parseDate:function(c){return I.parse(c)},randomWait:function(c,b){return Math.floor(c+Math.random()*
b)},toTitleCase:function(c){return c.replace(/\w\S*/g,function(b){return b.charAt(0).toUpperCase()+b.substr(1).toLowerCase()})},calcBoardLayout:function(){return $(window).trigger("resize")},navMenuList:function(c,b,d){var e,g,f,h,m;f=c.find(b);g=c.find(""+b+".selected:first")[0];m=_.indexOf(f,g);g=f[0];h=f[f.length-1];h=0>m-1?h:f[m-1];f=m+1>f.length?g:f[m+1];40===d&&(e=f);38===d&&(e=h);return this.selectMenuItem(c,b,e)},selectMenuItem:function(c){return function(b,d,e){b.find(d).removeClass("selected");
return $(e).addClass("selected")}}(this),insertSelection:function(c,b,d,e){var g;c=l.getElem(c);g=$(c).val();d||e?(""===g.substring(e)?$(c).val(""+(g.substring(0,d)+b)):$(c).val(""+(g.substring(0,d)+b+g.substring(e))),this.setCaretPosition(c,d+(""+b).length)):($(c).val(""+(g+b)),this.setCaretPosition(c,(""+(g+b)).length));return $(c).focus()},getWordFromIndex:function(c,b){var d,e,g,f;g=Math.max(c.lastIndexOf("\n",b-1),c.lastIndexOf(" ",b-1));g+=1;d=Math.max(c.indexOf("\n",b),c.indexOf(" ",b));-1===
d&&(d=c.length);" "===c.charAt(d)&&(g=c.lastIndexOf(" ",b-1)+1);e=d-g;f=""+c.slice(g,d);return{start:g,end:d,length:e,str:f}},getWordFromCaret:function(c){var b;c=l.getElem(c);b=$(c).val();c=this.getCaretPosition(c);return this.getWordFromIndex(b,c)},getCaretPosition:function(c){var b,d;c=l.getElem(c);c.selectionStart?b=c.selectionStart:0<=D.call(document,"selection")&&(c.focus(),b=document.selection.createRange(),d=document.selection.createRange().text.length,b.moveStart("character",-c.value.length),
b=b.text.length-d);return b},setCaretPosition:function(c,b){var d;c=l.getElem(c);if(c.setSelectionRange)return c.focus(),c.setSelectionRange(b,b);if(c.createTextRange)return d=c.createTextRange(),d.collapse(!0),d.moveEnd("character",b),d.moveStart("character",b),d.select()},setCaretAtEnd:function(c){var b;if(c)return b=$(c).val().length,this.setCaretPosition(c,b)},getLastWord:function(c){c=$(c).val().split(" ");return _.last(c)},replaceLastWord:function(c,b){var d;d=RegExp(""+this.getLastWord(c)+
"$");d=$(c).val().replace(d,"");return $(c).val(""+(d+b))},removeWordOnCaret:function(c){var b;b=RegExp(""+l.getWordFromCaret(c).str);b=$(c).val().replace(b,"");$(c).val(""+b)},removeWordAtIndex:function(c,b){var d,e;e=l.getWordFromIndex(c,b);d=c.slice(0,e.start);e=c.slice(e.end);return d+e},removeStringsFromInput:function(c,b){var d,e;null==b&&(b=[]);e=$(c).val();if(0<b.length)return d=RegExp(""+b.join("|"),"g"),d=e.replace(d,"").trim(),$(c).val(d)},removeStringFromInput:function(c,b){var d;d=$(c).val().replace(b,
"");return $(c).val(d.trim())},addStringToInput:function(c,b){var d;d=""+$(c).val()+" "+b;return $(c).val(d)},toggleStringInInput:function(c,b,d){return d?this.addStringToInput(c,b):this.removeStringFromInput(c,b)},stripExtraSpaces:function(c){return null!=c?c.replace(/\s+/g," ").trim():void 0},stripExtraSpacesFromInput:function(c){var b;b=$(c).val();b=this.stripExtraSpaces(b);return $(c).val(b)},getMemNameArray:function(c,b){var d,e,g;_.isString(b)&&(b=aa.get(c,b));return null==b?[]:(""+(null!=(d=
b.get("username"))?d.toLowerCase():void 0)+" "+(null!=(e=b.get("fullName"))?e.toLowerCase():void 0)+" "+(null!=(g=b.get("initials"))?g.toLowerCase():void 0)).split(" ")},filterMembers:function(c){return function(b,d,e){var c,f,h,m,q;h=RegExp("^"+l.escapeForRegex(d),"i");d=[];m=0;for(q=e.length;m<q;m++)c=e[m],f=l.getMemNameArray(b,c),_.find(f,function(b){return h.test(b)})&&d.push(c);return d}}(this),filterLabels:function(c){return function(b){var d,e,c,f,h,m;c=RegExp("^"+l.escapeForRegex(b),"i");
d=[];m=l.labels;f=0;for(h=m.length;f<h;f++)b=m[f],e=boardView.model.getLabelName(b).split(" "),e.push(b),_.find(e,function(b){return c.test(b)})&&d.push(b);return d}}(this),jqGetActiveElement:function(){try{return $(document.activeElement)}catch(c){return $()}},getImgHeightAndWidth:function(c,b){var d;d=new Image;d.src=c;return d.onload=function(){return b({height:this.height,width:this.width})}},getQueryParameter:function(c,b){var d,e;null==b&&(b="");d=RegExp("[?&]"+c+"=([^?&]*)");d=null!=(e=d.exec(location.search))?
e:d.exec(location.hash);e=null!=d?d[1]:void 0;return null!=e?decodeURIComponent(e.replace(/\+/g," ")):b},validFileSize:function(c,b){null==b&&(b=10485760);return(null!=c?c.size:void 0)<b},validCardUpload:function(c){var b;return null!=(b=y.me())&&b.isFeatureEnabled("largeAttachments")?this.validFileSize(c,262144E3):this.validFileSize(c,10485760)},uploadFile:function(c,b){var d,e;e=_.uniqueId("iframe");d=$("<iframe>").attr("name",e).css("display","none").appendTo("body").load(function(e){var c;_.defer(function(){return d.remove()});
try{c=d.contents().text()}catch(h){return b("File too large")}return/File too large/i.test(c)?b(c):b()});c.closest("form").attr("target",e).find("input[name=token]").val(y.myToken()).end().submit();return _.defer(function(){return c.val("")})},hasValidInviteTokenFor:function(c,b){var d,e;if(!this.hasInviteTokenFor(b))return!1;d=ia.get(c,b)||Ta.get(c,b);e=aa.get(c,l.inviteTokenFor(b).split("-")[0]);return null!=e&&("virtual"===d.getMemberType(e)||d.isMember(e)&&"ghost"===e.get("memberType"))},hasInviteTokenFor:function(c){return null!=
c&&null!=$.cookie("invite-token-"+c)},inviteTokenFor:function(c){return $.cookie("invite-token-"+c)},invitationTokens:function(){var c,b,d,e;b=/invite-token-[-a-f0-9]*/g;for(e=[];null!=(c=null!=(d=b.exec(document.cookie))?d[0]:void 0);)e.push($.cookie(c));return e},flashUnconfirmedWarning:function(){var c;c=$(".header-banner-warning");c.addClass("flash");return _.delay(function(b){return function(){return c.removeClass("flash")}}(this),500)},getElem:function(c){return c instanceof jQuery?c[0]:c},
isTrelloAttachment:function(c){return 0===(null!=c?c.indexOf(attachmentsDomain):void 0)},voidDebounced:function(c,b,d){var e;null==b&&(b=setTimeout);null==d&&(d=1);e=null;return function(){var g,f;g=arguments;f=function(b){return function(){e=null;c.apply(b,g)}}(this);clearTimeout(e);e=b(f,d)}},getDebounced:function(c){0<c.length&&P("getDebounced","used callback that takes arguments");null==c.debounced&&(c.debounced=this.voidDebounced(c));return c.debounced},debounceEvents:function(c){c.ond=function(){var b,
d,e,g;d=arguments[0];b=arguments[1];e=3<=arguments.length?G.call(arguments,2):[];return(g=c.on).call.apply(g,[c,d,l.getDebounced(b)].concat(G.call(e)))};return c.offd=function(){var b,d,e,g;d=arguments[0];b=arguments[1];e=3<=arguments.length?G.call(arguments,2):[];return(g=c.off).call.apply(g,[c,d,l.getDebounced(b)].concat(G.call(e)))}},callDebounced:function(c){return l.getDebounced(c)()},getElemTransformMatrix:function(c){c=c.css("-webkit-transform")||c.css("-moz-transform")||c.css("-ms-transform")||
c.css("-o-transform")||c.css("transform");return"none"!==c?c:null},getMatrixDegrees:function(c){c=c.split("(")[1].split(")")[0].split(",");return Math.round(Math.atan2(c[1],c[0])*(180/Math.PI))},getMatrixScale:function(c){var b;b=c.split("(")[1].split(")")[0].split(",");c=b[0];b=b[1];return Math.sqrt(c*c+b*b)},getDegrees:function(c,b){return Math.round(Math.atan2(c,b)*(180/Math.PI))},calcDistanceFromCenter:function(c,b,d){return Math.floor(Math.sqrt(Math.pow(b-(c.offset().left+c.width()/2),2)+Math.pow(d-
(c.offset().top+c.height()/2),2)))},_runShredders:function(){var c,b,d,e,g,f;e=l._shredders;d=new Date;l._shredders=[];g=c=0;for(f=e.length;g<f;g++)b=e[g],d>b.time?(b.fn(),c++):l._shredders.push(b);P("shred","Shred "+c+" objects, "+l._shredders.length+" left");l._shredTimeout=null;return l._startShredTimer()},_startShredTimer:function(){if(!l._shredTimeout&&0<l._shredders.length)return null!=l._shredTimeout?l._shredTimeout:l._shredTimeout=_.delay(l._runShredders,l.getMs({seconds:3}))},shred:function(c){null==
l._shredders&&(l._shredders=[]);l._shredders.push({time:l.dateAfter({seconds:20}),fn:function(b){return function(){var b,e;e=[];for(b in c)F.call(c,b)&&e.push(delete c[b]);return e}}(this)});return l._startShredTimer()},newestId:function(c){return 0<c.length?_.reduce(c,function(b,d){return d.id>b.id?d:b}):null},extendEvents:function(c){return function(){return _.defaults(c,_.result(this.constructor.__super__,"events"))}},relativeUrl:function(c){return c.replace(RegExp("^"+siteDomain),"")},isTextElement:function(c){var b,
d;if(c instanceof HTMLTextAreaElement)return!0;if(!(c instanceof HTMLInputElement))return!1;if("text"===(b=c.type)||"email"===b||"password"===b||"search"===b)return!0;if("submit"===(d=c.type)||"reset"===d||"button"===d||"checkbox"===d)return!1;try{return c.selectionStart,!0}catch(e){return!1}},withoutAlteringSelection:function(c){var b,d,e,g,f,h,m;d=document.activeElement;b=$(d);f=b.is(":focus");null!=d&&l.isTextElement(d)?(d.selectionStart?(h=d.selectionStart,g=d.selectionEnd,e=d.selectionDirection):
m=this.getCaretPosition(d),c(),h?d.setSelectionRange(h,g,e):m&&this.setCaretPosition(d,m),f&&b.focus()):c()},extendParentClassName:function(c){return function(){return _.result(this.constructor.__super__,"className")+(" "+c)}},extendWithModelCacheHelpers:function(c){var b,d,e,g,f;g="Action Board Card Checklist List Member Notification Organization Auth".split(" ");f=[];d=0;for(e=g.length;d<e;d++)b=g[d],f.push(function(b){return Object.defineProperty(c.prototype,b,{get:function(){return this.modelCache.bound[b]}})}(b));
return f},waitForImageLoad:function(c,b,d){var e;e=new Image;e.onload=function(){return b(e)};e.onerror=function(){return"function"===typeof d?d(e):void 0};return e.src=c},bugzscout:function(c,b){var d,e,g,f;d=c.area;e=c.description;g=c.extra;f=c.me;return $.ajax({url:"//our.fogbugz.com/ScoutSubmit.asp",type:"POST",data:{ScoutUserName:"Trello Web Bugzscout",ScoutProject:"Trello Support",ScoutArea:d,Description:e,Extra:g,Email:'"'+f.fullName+'" <'+f.email+">",ForceNewBug:1,FriendlyResponse:0},success:function(){return"function"===
typeof b?b():void 0},error:function(d,e){return"function"===typeof b?b(e):void 0}})},sortMembers:function(c){c.sort(function(b,d){var e,c;e=y.isMe(b);c=y.isMe(d);return e&&!c?-1:!e&&c?1:b.fullName<d.fullName?-1:b.fullName>d.fullName?1:0});return c},firstLessThan:function(c,b){var d,e,g,f;g=0;for(f=b.length;g<f;g++)if(e=b[g],_.isArray(e)){if(d=e[0],e=e[1],c<=d)return _.isFunction(e)?e.call(this,c):e}else return _.isFunction(e)?e.call(this,c):e},hoursLeft:function(c){return(new Date(c)-new Date)/l.getMs({hours:1})},
getDueDateBadgeClasses:function(c){return[this.firstLessThan(this.hoursLeft(c),[[-36,"badge-state-due-past"],[0,"badge-state-due-now"],[24,"badge-state-due-soon"],"badge-state-due-future"])]},getDueDateBadgeTitle:function(c){return this.firstLessThan(this.hoursLeft(c),[[-36,"This card is past due."],[0,"This card is recently overdue!"],[1,"This card is due in less than an hour."],[1.3,"This card is due in about an hour."],[24,function(b){return"This card is due in "+this.firstLessThan(b%1,[[0.3,Math.floor(b).toString()],
[0.7,""+Math.floor(b).toString()+" and a half"],Math.ceil(b).toString()])+" hours."}],"This card is due later."])},getDueDateBadgeAdditionalTitle:function(c){return this.firstLessThan(this.hoursLeft(c),[[-36,"past due"],[0,"recently past due!"],[24,"due soon"],null])},mimeTypeMap:[{"application/vnd.google-apps.spreadsheet":"Google Spreadsheet","application/vnd.google-apps.document":"Google Document","application/vnd.google-apps.presentation":"Google Presentation","application/vnd.google-apps.form":"Google Form",
"application/vnd.google-apps.drawing":"Google Drawing","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"Microsoft Word File","application/application/vnd.ms-word.document.12":"Microsoft Word File","application/application/vnd.msword":"Microsoft Word File","application/vnd.openxmlformats-officedocument.word":"Microsoft Word File","application/msword":"Microsoft Word File","application/doc":"Microsoft Word File","application/vnd.ms-powerpoint.addin.macroEnabled.12":"Microsoft PowerPoint File",
"application/vnd.ms-powerpoint":"Microsoft PowerPoint File","audio/aiff":"AIFF Audio File","audio/x-midi":"MIDI Audio File","audio/mpeg":"MP3 Audio File","application/ogg":"OGG Audio File","video/mpeg":"MP3 Video File","video/quicktime":"Quicktime Video File","audio/wav":"WAV Audio File","text/html":"HTML File","application/xhtml+xml":"HTML File","text/css":"CSS File","application/css-stylesheet":"CSS File","text/javascript":"JavaScript File","text/calendar":"Calendar File","application/rtf":"Rich Text Format File",
"text/x-python":"Python File","application/json":"JSON File","image/svg+xml":"SVG File","image/bmp":"Bitmap Image","image/png":"PNG Image","image/gif":"GIF Image","image/jpeg":"JPG Image","image/x-ico":"Favicon","application/pdf":"PDF File","application/acrobat":"PDF File","application/nappdf":"PDF File","application/x-pdf":"PDF File","application/vnd.pdf":"PDF File","text/pdf":"PDF File","text/x-pdf":"PDF File","application/vnd.oasis.opendocument.text":"Open Document Text File","application/x-iwork-keynote-sffkey":"Apple Keynote",
"application/postscript":"Postscript","application/illustrator":"Adobe Illustrator File","application/photoshop":"Adobe Photoshop File","text/x-vcard":"vCard File","application/zip":"ZIP Archive File"}],isGDriveUrl:function(c){return/^https:\/\/docs\.google\.com\//.test(c)},isDropboxUrl:function(c){return/^https:\/\/www\.dropbox\.com\//.test(c)},isOneDriveUrl:function(c){return/^https:\/\/onedrive\.live\.com\//.test(c)},isBoxUrl:function(c){return/^https:\/\/app\.box\.com\//.test(c)},getAttachmentData:function(c,
b){var d,e,g;e=c.toJSON();e.canUseViewer=!0;e.ext=l.fileExt(e.name);e.removeText="Delete";e.openText="Download";e.openIconClass="movedown";e.doDownload=!0;if((g=e.ext,0<=D.call(this.allViewerableExts(),g))&&!l.hasDownloadAttribute())e.openText="Open in New Tab",e.openIconClass="open",e.doDownload=!1;l.isGDriveUrl(e.url)?(e.isGDriveFile=!0,e.isExternal=!0,d=l.mimeTypeMap[e.mimeType],e.ext=null,e.serviceName="Google Drive",e.meta="Google Drive File",e.openText="Open in Google Drive",e.openIconClass=
"open",e.removeText="Remove",e.isKnownService=!0,e.previewClass="attachment-thumbnail-preview-google-drive-logo",e.doDownload=!1,d&&(e.meta=""+d)):l.isDropboxUrl(e.url)?(e.isExternal=!0,e.serviceName="Dropbox",e.meta="Dropbox File",e.openText="Open in Dropbox",e.openIconClass="open",e.removeText="Remove",e.isKnownService=!0,e.previewClass="attachment-thumbnail-preview-dropbox-logo",d=e.url,e.url=d,e.ext=l.fileExt(d),e.doDownload=!1,e.canUseViewer=!1):l.isOneDriveUrl(e.url)?(e.isExternal=!0,e.serviceName=
"OneDrive",e.meta="OneDrive File",e.openText="Open in OneDrive",e.openIconClass="open",e.removeText="Remove",e.isKnownService=!0,e.previewClass="attachment-thumbnail-preview-one-drive-logo",e.doDownload=!1):l.isBoxUrl(e.url)?(e.isExternal=!0,e.serviceName="Box",e.meta="Box File",e.openText="Open in Box",e.openIconClass="open",e.removeText="Remove",e.isKnownService=!0,e.previewClass="attachment-thumbnail-preview-box-logo",e.doDownload=!1):e.isUpload?e.meta=cb.bytes(e.bytes):(g=Bb.interpret(e.url,b),
e.openText="Open in New Tab",e.openIconClass="open",e.doDownload=!1,null!=g?(e.meta=g.name,e.isKnownService=!0,e.previewClass=g.previewClass,e.name=g.text,e.idName=g.id):(e.meta="Link",e.ext=null!=(d=l.fileExt(e.url))?d:"LINK",e.removeText="Remove"));return e},availableExts:function(){var c,b,d,e,g;if(null==this._availableExts){c=[];g=navigator.mimeTypes;d=0;for(e=g.length;d<e;d++)b=g[d],c=c.concat(b.suffixes.split(","));this._availableExts=_.compact(_.uniq(c))}return this._availableExts},imageExts:function(){var c;
c="gif jpeg jpg png svg webp".split(" ");return null!=this._imageExts?this._imageExts:this._imageExts=c},audioExts:function(){var c;c="3gp 3gpp aac ac3 adts aif aifc aiff bwf cdda gsm m4a m4p mp3 mpeg4 wav".split(" ");return null!=this._audioExts?this._audioExts:this._audioExts=_.intersection(c,this.availableExts())},videoExts:function(){var c;c="avi h264 m4v mov mp4 ogg vfw webm".split(" ");return null!=this._videoExts?this._videoExts:this._videoExts=_.intersection(c,this.availableExts())},googleViewerableExts:function(){var c;
c="doc docx ppt pptx rtf xls xlsx".split(" ");return null!=this._googleViewerableExts?this._googleViewerableExts:this._googleViewerableExts=c},iFrameableExts:function(){var c,b;c=["css","js","txt"];b=["pdf"];return null!=this._iFrameableExts?this._iFrameableExts:this._iFrameableExts=_.intersection(b,this.availableExts()).concat(c)},allViewerableExts:function(){return null!=this._viewerableExts?this._viewerableExts:this._viewerableExts=this.imageExts().concat(this.audioExts()).concat(this.videoExts()).concat(this.googleViewerableExts()).concat(this.iFrameableExts())},
isViewerable:function(c){return 0<=D.call(this.allViewerableExts(),c)},hasDownloadAttribute:function(){return"undefined"!==typeof document.createElement("a").download}}),oc,Ua,k=function(c,b){return function(){return c.apply(b,arguments)}},G=[].slice;Ua=["close","error","message","open"];oc=function(){function c(b,d){var e,c,f;this.url=b;e=null!=d?d:{};this.fxReconnectDelay=e.fxReconnectDelay;this.maxReconnectDelay=e.maxReconnectDelay;this.maxReconnectAttempts=e.maxReconnectAttempts;this.onMessage=
k(this.onMessage,this);this.onError=k(this.onError,this);this.onClose=k(this.onClose,this);this.onOpen=k(this.onOpen,this);this.connect=k(this.connect,this);this._noPing=k(this._noPing,this);_.extend(this,Backbone.Events);this.ws=null;this.resetRetries();c=0;for(f=Ua.length;c<f;c++)e=Ua[c],this.on(e,this["on"+l.capitalize(e)]);"WebSocket"in window?(this.connect(),this.buffer=[],this.connectedOnce=!1,this.trigger("connecting")):this.trigger("connect_failed")}c.CONNECTING="connecting";c.CONNECTED="connected";
c.WAITING_TO_RECONNECT="waiting to reconnect";c.RECONNECTING="reconnecting";c.CLOSED="closed";c.PING_TIMEOUT=3E4;c.prototype.resetRetries=function(){return this.attempts=0};c.prototype._clearPingTimeout=function(){null!=this._pingTimeout&&clearTimeout(this._pingTimeout);return this._pingTimeout=null};c.prototype._resetPingTimeout=function(){this._clearPingTimeout();return this._pingTimeout=setTimeout(this._noPing,c.PING_TIMEOUT)};c.prototype._noPing=function(){if(!this.state!==c.CONNECTED)return this.disconnect()};
c.prototype.connect=function(){var b,d,e,g;if(null!=this.ws){d=0;for(e=Ua.length;d<e;d++)b=Ua[d],this.ws["on"+b]=null}this.ws=new WebSocket(this.url);d=function(b){return function(d){return b.ws["on"+d]=function(){return b.trigger.apply(b,[d].concat(G.call(arguments)))}}}(this);e=0;for(g=Ua.length;e<g;e++)b=Ua[e],d(b);return this.state=c.CONNECTING};c.prototype.onOpen=function(b){this.connectedOnce?this.trigger("reconnect"):this.trigger("connect");this.connectedOnce=!0;this.state=c.CONNECTED;this.flushBuffer();
return this.resetRetries()};c.prototype._triggerFailures=function(){if(this.state===c.CONNECTING)return this.trigger("connect_failed")};c.prototype.onClose=function(b){var d;this.trigger("disconnect",null!=(d=null!=b?b.reason:void 0)?d:"");this._triggerFailures();this._clearPingTimeout();return this.reconnect(b)};c.prototype.onError=function(b){this._triggerFailures();this.disconnect();return this.reconnect()};c.prototype.onMessage=function(b){var d;this._resetPingTimeout();if(""===b.data)P("socket",
"responding to ping"),this.ws.send("");else{try{d=JSON.parse(b.data)}catch(e){}return this.trigger("data",d)}};c.prototype.reconnect=function(b){switch(this.state){case c.CONNECTED:this.ws.close();break;case c.RECONNECTING:case c.WAITING_TO_RECONNECT:return}if(this.attempts>=this.maxReconnectAttempts)this.trigger("reconnect_failed"),this.state=c.CLOSED;else return this.state=c.WAITING_TO_RECONNECT,0===this.attempts&&(this.currentReconnectDelay=this.fxReconnectDelay(b,this.state)),P("socket","attempting reconnect in "+
this.currentReconnectDelay+"ms"),this._reconnectTimer=_.delay(function(b){return function(){b._reconnectTimer=null;b.connect();b.state=c.RECONNECTING;return b.trigger("reconnecting")}}(this),this.currentReconnectDelay),this.attempts++,this.currentReconnectDelay=Math.min(2*this.currentReconnectDelay,this.maxReconnectDelay)};c.prototype.disconnect=function(){var b;this._clearPingTimeout();b=this.state;this.state=c.CLOSED;switch(b){case c.CONNECTED:case c.CONNECTING:case c.RECONNECTING:return this.ws.close(),
this.onClose();case c.WAITING_TO_RECONNECT:return clearTimeout(this._reconnectTimer)}};c.prototype.send=function(b){if(this.state===c.CONNECTED)try{return this.ws.send(b)}catch(d){return this.buffer.push(b),this.onError()}else return this.buffer.push(b)};c.prototype.flushBuffer=function(){var b,d,e,c,f;b=this.buffer;this.buffer=[];f=[];e=0;for(c=b.length;e<c;e++)d=b[e],f.push(this.send(d));return f};return c}();var Ha;Ha=function(){var c,b,d,e,g,f,h;b=0;e=window.sessionStorage;g=null!=(h=null!=e?
e.status:void 0)?h:"active";f=c=null;"undefined"!==typeof document.hidden?(c="hidden",f="visibilitychange"):"undefined"!==typeof document.mozHidden?(c="mozHidden",f="mozvisibilitychange"):"undefined"!==typeof document.msHidden?(c="msHidden",f="msvisibilitychange"):"undefined"!==typeof document.webkitHidden&&(c="webkitHidden",f="webkitvisibilitychange");return d={init:function(){setInterval(d.check,1E4);$(window).focus(function(){return d.addActivity()});$(document).bind("keydown mousedown",function(){d.addActivity()});
null!=c&&(d.getHidden=function(){return document[c]});null!=f&&$(document).bind(f,function(b){return function(){return $(d).triggerHandler("visibilitychange")}}(this))},addActivity:function(){b=(new Date).getTime();ka.set("lastActivity",b);d.setStatus("active")},check:function(){3E5<(new Date).getTime()-Math.max(b,ka.enabled()?parseInt(ka.get("lastActivity")):0)&&d.setStatus("idle")},setStatus:function(b){b!==g&&(g=b,e&&(e.status=g),$(this).triggerHandler("setStatus",g))},getStatus:function(){return g}}}();
$(Ha.init);var ta,k=function(c,b){return function(){return c.apply(b,arguments)}},G=[].slice;ta=new (function(){function c(){this.ajax=k(this.ajax,this);this.hideUploading=k(this.hideUploading,this);this.showUploading=k(this.showUploading,this);this.hideSending=k(this.hideSending,this);this.showSending=k(this.showSending,this);this.hideRetrying=k(this.hideRetrying,this);this.showRetrying=k(this.showRetrying,this);this.hideFail=k(this.hideFail,this);this.showOutOfRetries=k(this.showOutOfRetries,this);
this.showRealError=k(this.showRealError,this);this.retryNext=k(this.retryNext,this);this.serverAlreadySaw=k(this.serverAlreadySaw,this);this.retryableError=k(this.retryableError,this);this.resetRetries=k(this.resetRetries,this);this.success=k(this.success,this);this.addToQueue=k(this.addToQueue,this);this.removeFromQueue=k(this.removeFromQueue,this);this.inQueue=k(this.inQueue,this);this.hasQueue=k(this.hasQueue,this);this.uniqueReqId=k(this.uniqueReqId,this);this._msBackoffMin=this._msBackoff=100;
this._nTriesMax=this._nTriesLeft=12;this._stopped=this._retrying=!1;this._maxLength=10;this._queue=[];this._queueIdSeq=0}c.prototype.uniqueReqId=function(){var b;return""+(null!=(b=y.me())?b.id:void 0)+"-"+Math.random()};c.prototype.hasQueue=function(){return 0<this._queue.length};c.prototype.inQueue=function(b){return _.find(this._queue,function(d){return d.queueId===b.queueId})};c.prototype.removeFromQueue=function(b){return this._queue=_.filter(this._queue,function(d){return d.queueId!==b.queueId})};
c.prototype.addToQueue=function(b){P("AjaxQueue","addToQueue",b);if(this._queue.length+1>this._maxLength)P("AjaxQueue","maxLength exceeded");else return this._queue.push(b),this.showRetrying()};c.prototype.success=function(b){P("AjaxQueue","success",b);if(this.inQueue(b))return this.removeFromQueue(b),this._retrying=!1,this._msBackoff=this._msBackoffMin,this._nTriesLeft=this._nTriesMax,this.retryNext()};c.prototype.resetRetries=function(){P("AjaxQueue","reset");this.hideFail();this.showRetrying();
this._retrying=this._stopped=!1;this._msBackoff=this._msBackoffMin;this._nTriesLeft=this._nTriesMax;return this.retryNext()};c.prototype.retryableError=function(b){P("AjaxQueue","retryableError",b);ta.inQueue(b)?this._retrying=!1:ta.addToQueue(b);return this.retryNext()};c.prototype.serverAlreadySaw=function(b){if(this.inQueue(b))return this.removeFromQueue(b),this.retryNext()};c.prototype.retryNext=function(){var b;if(!this._stopped)if(this.hasQueue()){if(this.showRetrying(),!this._retrying){this._retrying=
!0;b=this._queue[0];if(0<this._nTriesLeft)return P("AjaxQueue","retrying in "+this._msBackoff+"ms",b),setTimeout(function(){return $.ajax(b)},this._msBackoff),this._msBackoff*=2,--this._nTriesLeft;this._stopped=!0;return this.showOutOfRetries()}}else this.hideRetrying()};c.prototype.showRealError=function(b,d,e){var c;P("AjaxQueue","showRealError",e);this.hideRetrying();b="dev"===Na.version.head?"Error: "+(null!=(c=b.responseText)?c:"Ajax failed"):"Change not saved: failed to sync with the Trello server.";
return O.showHtml(v.fill("connect_failed",{msg:b}),"error","AjaxQueueFail")};c.prototype.showOutOfRetries=function(){P("AjaxQueue","showOutOfRetries");this.hideRetrying();return O.showHtml(v.fill("connect_failed",{msg:"Timed out while trying to sync changes with the server.",allowReset:!0}),"error","AjaxQueueFail")};c.prototype.hideFail=function(){return O.hide("AjaxQueueFail")};c.prototype.showRetrying=function(){return O.show("Connection interrupted. Retrying "+l.formatCount(this._queue.length,
"action",!0)+".","error","AjaxQueueRetry")};c.prototype.hideRetrying=function(){return O.hide("AjaxQueueRetry")};c.prototype.showSending=function(){return O.show("Sending...","warning","AjaxQueueSending")};c.prototype.hideSending=function(){return O.hide("AjaxQueueSending")};c.prototype.showUploading=function(b){return O.show(b,"info","AjaxQueueUpload")};c.prototype.hideUploading=function(){return O.hide("AjaxQueueUpload")};c.prototype.ajax=function(b){var d,e,c,f,h;b=_.clone(b);this._stopped||(null==
b.timeout&&(b.timeout=2E4),null==b.showSendingAfter&&(b.showSendingAfter=3E3),b.queueId=this._queueIdSeq++,b.headers={"X-Trello-ReqId":this.uniqueReqId()},b.oldSuccess=b.success,b.oldError=b.error,b.ourComplete=b.complete,delete b.complete,h=b.modelCache,delete b.modelCache,c=d=!1,f=null!=h?h.lock("AjaxQueue.ajax"):void 0,b.success=function(){var b;b=1<=arguments.length?G.call(arguments,0):[];ta.hideSending();ta.hideUploading();d=!0;ta.success(this);"function"===typeof this.oldSuccess&&this.oldSuccess.apply(this,
b);"function"===typeof this.ourComplete&&this.ourComplete();return null!=h?h.unlock(f):void 0},b.error=function(){var b,e;b=1<=arguments.length?G.call(arguments,0):[];ta.hideSending();ta.hideUploading();d=!0;if(0===(e=b[0].status)||408===e||500===e)return ta.retryableError(this);e=function(){ta._stopped=!0;return ta.showRealError.apply(ta,b)};_.isFunction(this.oldError)?this.oldError.apply(this,G.call(b).concat([e])):e();"function"===typeof this.ourComplete&&this.ourComplete();return null!=h?h.unlock(f):
void 0},/^post$/i.test(b.type)&&(e=function(b){return b.lengthComputable&&65536<b.total},b.xhr=function(b){return function(){var d,f;f=new XMLHttpRequest;d=f.upload;null!=d&&(d.addEventListener("progress",function(d){if(e(d))return c=!0,b.showUploading("Uploading ... "+Math.round(100*d.loaded/d.total)+"%")}),d.addEventListener("load",function(d){if(c)return b.showUploading("Processing Upload...")}));return f}}(this)),this.hasQueue()?ta.addToQueue(b):(0<=b.showSendingAfter&&setTimeout(function(b){return function(){if(!d&&
!c)return ta.showSending()}}(this),b.showSendingAfter),this.send(b)))};c.prototype.send=function(b){return $.ajax(b)};return c}());var df,ef,ff,k=function(c,b){return function(){return c.apply(b,arguments)}},G=[].slice;window.dropTheHammer=function(){ka.set("useWebsockets","yes");return"undefined"!==typeof console&&null!==console?"function"===typeof console.log?console.log("Websockets engaged! Reload the page, please. Use pitStop() to turn sockets off."):void 0:void 0};window.pitStop=function(){ka.set("useWebsockets",
"no");return"undefined"!==typeof console&&null!==console?"function"===typeof console.log?console.log("Shutting Websockets down! Reload the page, please. Use dropTheHammer() to turn sockets back on."):void 0:void 0};ff=function(){function c(){this.hasSocketTransport=k(this.hasSocketTransport,this);this.disconnect=k(this.disconnect,this);this.resync=k(this.resync,this);this.send=k(this.send,this);this._messageHandler=k(this._messageHandler,this);var b,d,e,c,f;this.reqid=0;this.dictCallback={};this.dictTime=
{};this.connectedOnce=!1;this.modelIxUpdate={};this.hasSockets="WebSocket"in window&&"no"!==ka.get("useWebsockets");"WebSocket"in window?"no"===ka.get("useWebsockets")&&n("RPC","No Sockets","pitStop"):n("RPC","No Sockets","No WebSocket");if(this.hasSockets){P("rpc","opening newSocket");b="http:"===document.location.protocol?"ws:":"wss:";this.socket=new oc(""+b+"//"+document.location.host+"/1/Session/socket?token="+y.myToken(),{maxReconnectDelay:32E3,maxReconnectAttempts:100,fxReconnectDelay:function(b,
d){var e,c,f,g;g=Ha.getStatus();f="active"===g?l.randomWait(l.getMs({seconds:10}),l.getMs({seconds:30})):l.randomWait(l.getMs({seconds:30}),l.getMs({minutes:2}));e="active"===g?l.randomWait(100,l.getMs({seconds:1})):l.randomWait(l.getMs({seconds:2}),l.getMs({seconds:10}));if(null==b||1006===(null!=b?b.code:void 0)&&this.state===oc.CONNECTED)return f;if(4E3===b.code){try{c=parseInt(b.reason,0)}catch(k){e}return"active"===g?l.randomWait(l.getMs({seconds:c}),4*l.getMs({seconds:c})):l.randomWait(4*l.getMs({seconds:c}),
l.getMs({seconds:c})(16))}return e}});f="connect reconnect connecting reconnecting disconnect connect_failed reconnect_failed error".split(" ");d=function(b){return function(d){return b.socket.on(d,function(b){return P("rpc","socket event",d,b)})}}(this);e=0;for(c=f.length;e<c;e++)b=f[e],d(b);f=["connecting","reconnecting"];d=function(b){return function(d){return b.socket.on(d,function(){P("rpc","connecting");return $(b).triggerHandler("connecting")})}}(this);e=0;for(c=f.length;e<c;e++)b=f[e],d(b);
this.socket.on("connect_failed",function(b){return function(){P("rpc","connect_failed");return $(b).triggerHandler("connect_failed")}}(this));this.socket.on("reconnect_failed",function(b){return function(){P("rpc","reconnect_failed");return $(b).triggerHandler("reconnect_failed")}}(this));this.socket.on("connect",function(b){return function(){P("rpc","connect");$(b).triggerHandler("connect");return b.connectedOnce=!0}}(this));this.socket.on("reconnect",function(b){return function(){P("rpc","reconnect");
clearTimeout(b.timeoutInvokeResponse);delete b.timeoutInvokeResponse;return $(b).triggerHandler("reconnect")}}(this));this.socket.on("disconnect",function(b){return function(d){P("rpc","disconnect",d);clearTimeout(b.timeoutInvokeResponse);return delete b.timeoutInvokeResponse}}(this));this.socket.on("error",function(b){return function(){var d,e;if(b.connectedOnce&&!(null!=(d=b.socket)&&null!=(e=d.socket)&&e.connected))return $(b).triggerHandler("disconnect")}}(this));this.socket.on("data",this._messageHandler)}}
c.prototype._messageHandler=function(b){var d,e;P("rpc","message",b);clearTimeout(this.timeoutInvokeResponse);delete this.timeoutInvokeResponse;null!=b&&b.version?Na.setServerVersion(b):(null!=b.reqid&&(d=this.dictCallback["fx"+b.reqid]),null!=b.result?"function"===typeof d&&d(null,b.result):null!=(e=b.notify)&&e.event?(null!=b.idModelChannel&&rpc.setIxLastUpdate(b.idModelChannel,b.ixLastUpdateChannel),$(this).triggerHandler(b.notify.event,_.extend({idModelChannel:b.idModelChannel},b.notify))):b.error||
P("rpc","unrecognized message",b),b.reqid&&(d=new Date-this.dictTime[b.reqid],P("timing","message",b.reqid,"time",d),delete this.dictCallback["fx"+b.reqid],delete this.dictCallback["fxErr"+b.reqid],delete this.dictTime[b.reqid]))};c.prototype.subscribe=function(b,d,e,c){return this.send({type:"subscribe",modelType:b,idModel:d,tags:e,invitationTokens:l.invitationTokens()},function(b){return function(b,e){null!=b?P("rpc",b):rpc.setIxLastUpdate(d,e);return"function"===typeof c?c(b,response):void 0}}(this))};
c.prototype.unsubscribe=function(b,d,e){return this.send({type:"unsubscribe",modelType:b,idModel:d},function(b){return function(b,d){null!=b&&P("rpc",b);return"function"===typeof e?e(b,d):void 0}}(this))};c.prototype.sendStatus=function(b,d){var e;return this.send({type:"setSessionStatus",status:b,idBoard:"undefined"!==typeof C&&null!==C?null!=(e=C.getCurrentBoard())?e.id:void 0:void 0},function(b){return function(b,e){null!=b&&P("rpc",b);return"function"===typeof d?d(b,e):void 0}}(this))};c.prototype.ping=
function(b){return this.send({type:"ping"},function(d){return function(d,c){null!=d&&P("rpc",d);return"function"===typeof b?b(d,c):void 0}}(this))};c.prototype._getSubscriptions=function(){return this.send({type:"getSubscriptions"},function(b){return function(b,e){if(null!=e)return P("rpc",e)}}(this))};c.prototype.send=function(b,d){var e;this.dictCallback["fx"+this.reqid]=d;this.dictTime[this.reqid]=new Date;b.reqid=this.reqid++;e=JSON.stringify(b);P("rpc","invoke: "+e);this.socket.send(e);null==
this.timeoutInvokeResponse&&(this.timeoutInvokeResponse=setTimeout(function(b){return function(){var d;if(b.socket.state===oc.CONNECTED)return P("rpc","No response from the socket.io server in 10 seconds. Disconnecting."),clearTimeout(b.timeoutInvokeResponse),delete b.timeoutInvokeResponse,null!=(d=b.socket)?d.disconnect():void 0}}(this),1E4))};c.prototype.resync=function(){var b;b=1<=arguments.length?G.call(arguments,0):[];_.isEmpty(b)&&(b=null);return rpc.rpcAJAX.doPoll(b,function(){})};c.prototype.disconnect=
function(){P("rpc","disconnecting");this.socket.disconnect()};c.prototype.hasSocketTransport=function(){return this.hasSockets};return c}();df=function(){function c(){this.idBoardToPoll=null;this.modelIxUpdate={};this.msPoll=2E3;this.msPollIdle=1E4;for(this.ajaxSessionId=Math.random().toString().substring(2);16>this.ajaxSessionId.length;)this.ajaxSessionId+="0";this.failures=0;this.failuresAllowed=1E3}c.prototype.subscribe=function(b,d,e,c){Cb.sendStatus();return"function"===typeof c?c():void 0};
c.prototype.unsubscribe=function(b,d,e){Cb.sendStatus();return"function"===typeof e?e():void 0};c.prototype.sendStatus=function(b,d){var e;return S({url:"/1/Session/"+this.ajaxSessionId,type:"PUT",data:{status:b,idBoard:"undefined"!==typeof C&&null!==C?null!=(e=C.getCurrentBoard())?e.id:void 0:void 0},background:!0,success:function(){return"function"===typeof d?d():void 0},error:function(b){return"function"===typeof d?d(null!=b?b:"sending session status failed"):void 0}})};c.prototype.resync=function(){};
c.prototype._getPollLength=function(){return y.isLoggedIn()&&"active"===Ha.getStatus()?this.msPoll:this.msPollIdle};c.prototype.stopPolling=function(){if(null!=this._pollingTimeout)return clearTimeout(this._pollingTimeout),delete this._pollingTimeout};c.prototype.poll=function(){return this._pollingTimeout=setTimeout(function(b){return function(){if(b.failures>=b.failuresAllowed)$(b).triggerHandler("connect_failed");else return b.doPoll(function(d){if(null!=d){if("syncError"===d)return;$(b).triggerHandler("connecting");
++b.failures}else 0<b.failures&&$(b).triggerHandler("reconnect"),b.failures=0;return b.poll()})}}(this),this._getPollLength())};c.prototype.doPoll=function(){var b,d,e,c,f,h;d=2<=arguments.length?G.call(arguments,0,e=arguments.length-1):(e=0,[]);e=arguments[e++];d=d[0];f=[];if(_.isArray(d)){c=0;for(h=d.length;c<h;c++)b=d[c],f.push(rpc.currentSubscriptions[b])}else if(null==d)for(b in h=rpc.currentSubscriptions,h)c=h[b],f.push(c);else{P("rpc","Bad argument to doPoll: "+d);return}return _.isEmpty(f)?
(P("rpc","No models to poll for "+d),"function"===typeof e?e():void 0):this._doPoll(f,e)};c.prototype._doPoll=function(b,d){var e,c,f,h,m;m=function(){var d,m,k,l;l=[];d=0;for(m=b.length;d<m;d++)k=b[d],f=k.modelType,e=k.idModel,c=k.ixLastUpdate,h=k.tags,l.push("/"+f+"/"+e+"/deltas?ixLastUpdate="+encodeURIComponent(c.toString())+"&tags="+encodeURIComponent(h.join(",")));return l}();return S({data:{urls:m.join(",")},url:"/1/batch",background:!0,success:function(b){return function(c){var f,g,h,m,k,l,
n;g=0;for(m=c.length;g<m;g++)if(f=c[g],200 in f){if(null!=f[200].syncError)return C.syncError(),b.stopPolling(),"function"===typeof d?d("syncError"):void 0;if(f[200].modelIxUpdate){e=_.keys(f[200].modelIxUpdate)[0];rpc.setIxLastUpdate(e,f[200].modelIxUpdate[e]);n=null!=(l=f[200].messages)?l:[];h=0;for(k=n.length;h<k;h++){f=n[h];try{f=JSON.parse(f)}catch(s){continue}$(b).triggerHandler(f.notify.event,_.extend({idModelChannel:f.idModelChannel},f.notify))}}}return"function"===typeof d?d():void 0}}(this),
error:function(){return"function"===typeof d?d("Poll failed"):void 0}})};return c}();ef=function(){function c(){this.resync=k(this.resync,this);this.setIxLastUpdate=k(this.setIxLastUpdate,this);this.getIxLastUpdate=k(this.getIxLastUpdate,this);this.handleLogin=k(this.handleLogin,this);this.rpcReady=k(this.rpcReady,this);this.rpcSocket=this.rpcAJAX=this.rpcCurrent=null;this.currentSubscriptions={};this.fReadyToSubscribe=!1;this.deferredQueue=[];this.handleLogin()}c.prototype.rpcReady=function(){var b,
d,e,c;this.fReadyToSubscribe=!0;this.isUsingSocket()||this.rpcCurrent.poll();$(this).triggerHandler("ready");c=this.deferredQueue;d=0;for(e=c.length;d<e;d++)b=c[d],b();return $(this).bind("reconnect",function(b){return function(){return b.resubscribe()}}(this))};c.prototype.resubscribe=function(){var b,d,e,c;this.rpcCurrent.resync();e=this.currentSubscriptions;c=[];for(b in e)d=e[b],c.push(this.subscribe(d.modelType,b,d.tags));return c};c.prototype.bindSocketEvents=function(){var b,d,e,c,f;c="connecting connect reconnect connect_failed reconnect_failed updateModels deleteModels".split(" ");
f=[];d=0;for(e=c.length;d<e;d++)b=c[d],f.push($(this.rpcCurrent).bind(b,function(b){return function(d,e,c){return $(b).triggerHandler(d,e,c)}}(this)));return f};c.prototype.lazyCreateRPC=function(){var b;if(!this.rpcCurrent)if(this.rpcSocket=new ff,this.rpcCurrent=this.rpcAJAX=new df,this.bindSocketEvents(),this.rpcSocket.hasSocketTransport()){if(!this.rpcSocket.connectedOnce)return b=ya.getTime(),setTimeout(function(b){return function(){if(!b.fReadyToSubscribe)return P("rpc","Socket not responsive. Using AJAX."),
b.rpcSocket.disconnect(),b.rpcReady()}}(this),8E3),this.rpcSocket.ping(function(d){return function(e,c){d.fReadyToSubscribe?(d.rpcSocket.disconnect(),n("RPC","No Sockets","Slow ping",ya.getTime()-b)):(P("rpc","Socket responded to ping in a timely fashion. Using sockets."),d.rpcCurrent=d.rpcSocket,d.bindSocketEvents(),d.rpcReady())}}(this))}else return P("rpc","No socket connect. Using AJAX."),this.rpcReady()};c.prototype.handleLogin=function(){if(y.isLoggedIn())return this.lazyCreateRPC()};c.prototype.sendStatus=
function(b){this.lazyCreateRPC();if(this.fReadyToSubscribe)return this.rpcCurrent.sendStatus(b);this.deferredQueue.push(function(d){return function(){return d.sendStatus(b)}}(this))};c.prototype.unsubscribe=function(b,d,e){this.lazyCreateRPC();this.rpcCurrent.unsubscribe(b,d,e);if(null!=e){if(b=this.currentSubscriptions[d],b.tags=_.without(b.tags,e),_.isEmpty(b.tags))return delete this.currentSubscriptions[d]}else return delete this.currentSubscriptions[d]};c.prototype.subscribe=function(b,d,e){var c;
this.lazyCreateRPC();null!=(c=this.currentSubscriptions[d])?c[e]=_.union(c[e],e):this.currentSubscriptions[d]={tags:e,ixLastUpdate:-1,modelType:b,idModel:d};if(this.fReadyToSubscribe)return this.rpcCurrent.subscribe(b,d,e);P("rpc","deferring subscribe to "+b+" "+d);this.deferredQueue.push(function(c){return function(){return c.rpcCurrent.subscribe(b,d,e)}}(this))};c.prototype.getIxLastUpdate=function(b){return this.currentSubscriptions[b].ixLastUpdate};c.prototype.setIxLastUpdate=function(b,d){var e;
return null!=(e=this.currentSubscriptions[b])?e.ixLastUpdate=d:void 0};c.prototype.resync=function(){var b,d;b=1<=arguments.length?G.call(arguments,0):[];this.lazyCreateRPC();return"function"===typeof(d=this.rpcCurrent).resync?d.resync.apply(d,b):void 0};c.prototype.isUsingSocket=function(){return null!=this.rpcCurrent&&this.rpcCurrent===this.rpcSocket};return c}();window.rpc=new ef;var cb;cb=new (function(){function c(){}c.prototype.textAsHtml=function(b,d){null==d&&(d={});return!b?b:Ja.full.format(b,
d).output};c.prototype.markdownAsHtml=function(b,d){null==d&&(d={});return Ja.full.format(b,d).output};c.prototype.bytes=function(b){var d,e,c,f,h;if(null==b)return"Unknown Size";c=["B","KB","MB","GB"];d=b;e=f=0;for(h=c.length;f<h;e=++f){b=c[e];if(1024>d||e===c.length-1)return c=Math.round(100*d)/100,""+c+" "+b;d/=1024}return"unknown"};return c}());var A,k=function(c,b){return function(){return c.apply(b,arguments)}},F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,
e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c},G=[].slice;A=function(c){function b(d){this.setTimeout=k(this.setTimeout,this);this.handleDOMRemove=k(this.handleDOMRemove,this);this._subviews={};this.modelCache=null!=d?d.modelCache:void 0;b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.subview=function(b,e,c,f){null==c&&(c={});null==f&&(f=""+b.prototype.uniqueId()+"_"+e.cid);f in this._subviews||(this._subviews[f]=new b(_.extend({model:e,
modelCache:this.modelCache},c)));return this._subviews[f]};b.prototype.existingSubview=function(b,e,c){null==c&&(c=""+b.prototype.uniqueId()+"_"+e.cid);if(!(c in this._subviews))throw Error("existingSubview called before subview was created");return this._subviews[c]};b.prototype.existingSubviewOrUndefined=function(b,e,c){null==c&&(c=""+b.prototype.uniqueId()+"_"+e.cid);return this._subviews[c]};b.prototype.collectionSubview=function(b,e,c,f){var h;null==c&&(c={});null==f&&(f=b.prototype.uniqueId());
b=null!=(h=this._subviews)[f]?h[f]:h[f]=new b(_.extend({collection:e,modelCache:this.modelCache},c));null!=c.el&&b.el!==c.el&&b.setElement(c.el);return b};b.prototype.subviewsOfType=function(b){var e,c,f,h;f=this._subviews;h=[];for(e in f)F.call(f,e)&&(c=f[e],c instanceof b&&h.push(c));return h};b.prototype.deleteSubview=function(b,e){null==e&&(e=""+b.constructor.prototype.uniqueId()+"_"+b.model.cid);if(b!==this._subviews[e])throw Error("incorrect key for subview in deleteSubview");b.remove();return delete this._subviews[e]};
b.prototype.removeSubviews=function(){var b,e,c;c=this._subviews;for(b in c)e=c[b],e.remove();return delete this._subviews};b.prototype.remove=function(){var d,e,c,f;this.removeSubviews();if(null!=this._intervals){f=this._intervals;e=0;for(c=f.length;e<c;e++)d=f[e],clearInterval(d)}if(null!=this._timeouts){f=this._timeouts;e=0;for(c=f.length;e<c;e++)d=f[e],clearTimeout(d)}"undefined"!==typeof X&&null!==X&&X.removeHandler(this);return b.__super__.remove.apply(this,arguments)};b.prototype.removeQueued=
function(b){var e,c,f;b||(b=async.cargo(function(b,d){var e,c,f;c=0;for(f=b.length;c<f;c++)e=b[c],e.remove();return _.defer(d)},10),b.push(this));f=this._subviews;for(e in f)c=f[e],b.push(c),c.removeQueued(b);return this._subviews={}};b.prototype.debounce=function(b,e){return l.voidDebounced(b,this.setTimeout,e)};b.prototype.makeDebouncedMethods=function(){var b,e,c,f;e=1<=arguments.length?G.call(arguments,0):[];c=0;for(f=e.length;c<f;c++)b=e[c],this[b+"Debounced"]=this.debounce(this[b])};b.prototype.handleDOMRemove=
function(){return this._delegated=!1};b.prototype.delegateEvents=function(){var d,e,c;if(!this._delegated){this.$el.on("remove",this.handleDOMRemove);b.__super__.delegateEvents.apply(this,arguments);c=this._subviews;for(d in c)e=c[d],e.delegateEvents();this._delegated=!0}};b.prototype.undelegateEvents=function(){var d,e,c;if(this._delegated){this.$el.off("remove",this.handleDOMRemove);b.__super__.undelegateEvents.apply(this,arguments);c=this._subviews;for(d in c)e=c[d],e.undelegateEvents();this._delegated=
!1}};b.prototype.appendSubview=function(b,e){null==e&&(e=this.$el);return this.appendSubviews([b],e)};b.prototype.appendSubviews=function(b,e){var c,f,h;null==e&&(e=this.$el);f=0;for(h=b.length;f<h;f++)c=b[f],c.delegateEvents();return e.append(function(){var e,f,h;h=[];e=0;for(f=b.length;e<f;e++)c=b[e],h.push(c.render().el);return h}())};b.prototype.recursivelyStopListening=function(){var b,e,c;this.stopListening();c=this._subviews;for(b in c)e=c[b],e.recursivelyStopListening()};b.prototype.uniqueId=
function(){this.hasOwnProperty("_uniqueId")||(this._uniqueId=_.uniqueId("view"));return this._uniqueId};b.prototype.destructor=function(){var b,e,c,f,h;this.remove();if(null!=this._using){h=this._using;c=0;for(f=h.length;c<f;c++)e=h[c],"function"===typeof e.destructor&&e.destructor()}this.undelegateEvents();b=0;return async.whilst(function(b){return function(){return b.$el.is(":visible")}}(this),function(e){return function(e){b+=1E3;setTimeout(e,1E3);if(1E4<b)return P("view","Unable to remove a view")}}(this),
function(b){return function(d){b.$el.remove();return l.shred(b)}}(this))};b.prototype.setInterval=function(b,e){null==this._intervals&&(this._intervals=[]);return this._intervals.push(setInterval(b,e))};b.prototype.setTimeout=function(b,e){var c;null==this._timeouts&&(this._timeouts=[]);this._timeouts.push(c=setTimeout(b,e));return c};b.prototype.forceIntoDom=function(){var b;if(0===this.$el.closest("html").length)return b=$("#staging"),0===b.length&&(b=$("<div>").attr("id","staging").css({visibility:"hidden",
position:"absolute",left:0,top:-1E5,width:"100%"}).appendTo("body")),b.append(this.el)};return b}(Backbone.View);"undefined"!==typeof l&&null!==l&&l.extendWithModelCacheHelpers(A);var sb,F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c},G=[].slice;sb=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){this.listenPropagators=
{};this.listenTo(this.collection,{sort:this.sort,"change:closed":this.closed,add:this.addModel,remove:this.removeModel,reset:this.reset});return b.__super__.initialize.apply(this,arguments)};b.prototype.getModels=function(){return this.collection.models};b.prototype.subview=function(){var d,e,c;d=b.__super__.subview.apply(this,arguments);if(null==(e=this.listenPropagators)[c=d.cid])e[c]=this.listenTo(d,"all",function(b){return function(){var e,c;c=arguments[0];e=2<=arguments.length?G.call(arguments,
1):[];return b.trigger.apply(b,[c,d].concat(G.call(e)))}}(this));return d};b.prototype.addModel=function(b,e){var c;P("render","adding "+this.collection.model.name+" to "+this.viewType.name);c=this.subview(this.viewType,b);this.el&&this.insertSubview(c,_.indexOf(this.getModels(),b))};b.prototype.removeModel=function(b,e){var c;P("render","removing "+this.collection.model.name+" from "+this.viewType.name);c=this.subview(this.viewType,b);c.$el.hide();c.destructor();this.deleteSubview(c)};b.prototype.closed=
function(b,e,c){e?this.removeModel(b,c):this.addModel(b,c)};b.prototype.reset=function(b,e){var c,f,h,m,q,k;h=e.previousModels;c={};k=b.models;m=0;for(q=k.length;m<q;m++)f=k[m],c[f.cid]=!0;m=0;for(q=h.length;m<q;m++)f=h[m],c[f.cid]||this.removeModel(f);return this.sort()};b.prototype.sort=function(){var b,e,c,f,h;h=this.getModels();b=c=0;for(f=h.length;c<f;b=++c)e=h[b],this.moveSubviewToPosition(this.subview(this.viewType,e),b)};b.prototype.render=function(b){var e;P("render","rendering "+this.getModels().length+
" "+this.collection.model.name+"s into "+this.viewType.name);this.appendSubviews(function(){var b,d,c,m;c=this.getModels();m=[];b=0;for(d=c.length;b<d;b++)e=c[b],m.push(this.subview(this.viewType,e));return m}.call(this));"function"===typeof b&&b();return this};b.prototype.insertSubview=function(b,e,c){null==c&&(c=this.$el);P("render","inserting "+b.$el.find("h2").text()+" at position "+e);"number"===typeof e?e=0>=e?c.children().eq(0):e<c.children().length?c.children().eq(e):void 0:e instanceof A&&
(e=e.$el);b.$el.is(":empty")&&(b.delegateEvents(),b.render());0<(null!=e?e.length:void 0)?b.$el.insertBefore(e):c.append(b.$el)};b.prototype.moveSubviewToPosition=function(b,e,c){var f,h,m,q;null==c&&(c=this.$el);if(b.$el.is(":empty"))this.insertSubview(b,e,c);else{q=c.children(".placeholder,.card-composer");h=0;for(m=q.length;h<m;h++)f=q[h],$(f).index()<=e&&e++;f=b.$el.index();f!==e&&(P("render","moving "+b.$el.find("h2").text()+" into position "+e),0===e?c.prepend(b.$el):e>=c.children().length?
c.append(b.$el):b.$el.insertAfter(c.children().eq(e-1)))}};return b}(A);var pc;pc=function(){function c(){}c.prototype.limit=50;c.prototype.nextPage=1;c.prototype.shortLoad=!1;c.prototype.loading=!1;c.prototype.idModels=null;c.prototype.loadMoreActions=function(){if(!this.loading)return this.loading=!0,this.model.onId(function(b){return function(){var d;return M["for"](b.modelCache).loadMoreActionData(b.model.typeName.toLowerCase(),b.model.id,b.nextPage,b.limit,b.idModels,null!=(d="function"===typeof b.getActionsFilter?
b.getActionsFilter():void 0)?d:"all",function(d,c){b.loading=!1;if(!d)return b.shortLoad=c.length<b.limit,b.renderActions(),++b.nextPage})}}(this))};c.prototype.hasMoreActions=function(){return!this.loading&&!this.shortLoad&&this.getActions().length>=this.limit};c.prototype.getActions=function(){return this.Action.getListForModel(this.model)};return c}();var tb,F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=
new d;c.__super__=b.prototype;return c};tb=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.allowNewlines=!0;b.prototype._draftKey=function(b){return"draft_"+this.model.id+"_"+b};b.prototype._saveDraft=function(b,e){return ka.set(this._draftKey(b),e)};b.prototype._recallDraft=function(b){return ka.get(this._draftKey(b))};b.prototype._discardDraft=function(b){return ka.unset(this._draftKey(b))};b.prototype.editField=function(b){var e,c,f;e=$(b.target).closest("a");
if(!(0<e.length&&"#"!==e.attr("href"))&&!Q.dragging&&!Q.sorting&&!("function"===typeof window.getSelection&&null!=(c=window.getSelection())&&c.toString()||null!=(f=document.selection)&&f.createRange().text))return l.stop(b),w.hide(),b=$(b.target).closest(".editable"),b=b.attr("attr"),this.edit(b)};b.prototype.edit=function(b){var e,c,f,h,m,q,k,x;-1<b.indexOf(".")&&(x=b.split("."),b=x[1]);e=this.$("[attr="+b+"]");f=this.$(".js-no-higher-edits [attr="+b+"]");e=e.not(f);0!==e.length&&(ma.cancelEdits(),
f=e.find(".edit:first"),0!==f.length&&(h=e.find(".field:first"),q=h.is("textarea"),m=h.parent().is(".card-detail-edit"),c=e.find(".current"),q&&(k=Math.ceil(parseFloat($(c).css("line-height").slice(0,-2))),q=27*k,c=m?Math.max(7*k,c.height()+k):Math.max(2*k,c.height()+k),c>q&&(c=q),h.height(c+16)),f.append(v.fill("edit_controls")),f.hasClass("delete")||f.find(".delete").remove(),f.hasClass("convert")||f.find(".convert").remove(),f.hasClass("options-menu")||f.find(".options-menu").remove(),e.addClass("editing"),
""===h.val()&&h.val(l.traverse(this.model.attributes,null!=x?x:b)),h.data("draftKey",this._draftKey(b)),P("editable",this.model),h.focus().select()))};b.prototype.recallDrafts=function(){var b,e,c;c=this;b=this.$("[attr]");e=this.$(".js-no-higher-edits [attr]");return b.not(e).each(function(){var b,d;b=$(this).attr("attr");d=c._recallDraft(b);if(null!=d)return b=$(this).find(".field:first"),b.val(d),_.defer(function(b){return function(){return $(b).find(".edits-warning").show()}}(this))})};b.prototype.stopEditing=
function(b){l.stop(b);ma.cancelEdits();return!1};b.prototype.clearEdits=function(b){var e;l.stop(b);b=$(b.target).closest(".editable[attr]");e=b.attr("attr");null!=e&&this._discardDraft(e);b.find(".field").val("");b.find(".edits-warning").hide();b.find(".edits-error").hide();ma.cancelEdits();return!1};b.prototype.validate=function(){var b,e,c,f,h;f=this.$(".editing.non-empty .field");e=0;for(c=f.length;e<c;e++)if(b=f[e],/^\s*$/.test($(b).val()))return!1;f=this.$(".editing .field");e=0;for(c=f.length;e<
c;e++)if(b=f[e],b=null!=(h=$(b).val())?h.length:void 0,16384<b)return $(".editing").find(".edits-error").text("Your text is "+(b-16384)+" characters too long to save").show(),!1;return!0};b.prototype.keydownEvent=function(b){ma.isEditing()&&(w.view instanceof qc||w.view instanceof Db?"function"===typeof this.checkInsert&&this.checkInsert(b):l.isForceSubmitKey(b)||13===b.keyCode&&(!$(b.target).is("textarea")||$(b.currentTarget).hasClass("single-line"))&&!b.shiftKey?(l.stop(b),this.commitEdits(b)):
13===b.keyCode&&!this.allowNewlines&&l.stop(b))};b.prototype.commitEdits=function(b){var e,c,f;l.stop(b);e=$(b.target).closest(".editable.editing[attr]");e.find(".edits-error").hide();if(this.validate())return f=this,c=this.model,e.remove("input[type=submit]"),e.removeClass("editing").each(function(){var b,d;b=$(this).attr("attr");d=$(this).find(".field").val();f.allowNewlines||(d=d.replace(/[\r\n]+/g," "));0===jQuery.trim(d).length&&(d="");return c.get(b)===d?f._discardDraft(b):c.update(b,d,function(d){return null!=
d?e.find(".edits-error").text(d).show():f._discardDraft(b)})}).find(".field").val(""),e.find(".edits-warning").hide(),!0};b.prototype.clickSetting=function(b){var e,c,f;e=$(b.target);if(!e.hasClass("disabled")&&!e.closest(".js-disabled").length&&(c=e.attr("href"),!(c&&"#"!==c)&&(c=e.closest(".pref").attr("name"))))f=e.attr("value"),f=function(){switch(f){case "true":return!0;case "false":return!1;default:return f}}(),this.model.setPref(c,f),this.model.save(),l.stop(b)};b.prototype.delegateEvents=
function(d){var e;e={"click .current":"editField","click .js-cancel-edit":"clearEdits","click .js-discard-edits":"clearEdits","click .js-view-edits":"editField","click .js-save-edit":"commitEdits","keydown .field":"keydownEvent","click input":l.stopPropagation,"click textarea":l.stopPropagation};null!=this.model.setPref&&(e["click a"]="clickSetting");return b.__super__.delegateEvents.call(this,_.extend(e,d||this.events))};return b}(A);var pa,k=function(c,b){return function(){return c.apply(b,arguments)}},
F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c};pa=function(c){function b(d){var e,c,f,h,m,q,l;this.model=d.model;l=d.text;this.elem=d.elem;this.top=d.top;f=d.confirmText;c=d.confirmBtnClass;e=d.cancelText;this.title=d.title;this.template=d.template;h=d.data;q=d.fxConfirm;m=d.fxCancel;this.popOnClick=d.popOnClick;this._handleClick=k(this._handleClick,this);this.render=
k(this.render,this);this.getViewTitle=k(this.getViewTitle,this);null==this.template&&(this.template="confirm");this.confirm=this._handleClick(q);this.cancel=m?this._handleClick(m):function(){};this.data=_.extend({text:l,confirmText:f,confirmBtnClass:c,cancelText:e},null!=h?h:{});b.__super__.constructor.apply(this,arguments)}s(b,c);b.toggle=function(b){return w.toggle({elem:b.elem,top:b.top,view:this,options:b})};b.pushView=function(b){return w.pushView({view:this,options:b})};b.prototype.getViewTitle=
function(){return this.title};b.prototype.events={"click .js-confirm":"confirm","click .js-cancel":"cancel"};b.prototype.render=function(){this.$el.html(v.fill(this.template,this.data,{},{member:v.member}));return this};b.prototype._handleClick=function(b){return function(e){return function(c){l.stop(c);e.popOnClick?w.popView():w.hide();"function"===typeof b&&b(c);e.remove();e.unbind();return!1}}(this)};return b}(A);var gf,hf,jf,kf,lf,mf,nf,of,pf,qf,rf,sf,tf,uf,vf,Eb,k=function(c,b){return function(){return c.apply(b,
arguments)}},F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c},D=[].indexOf||function(c){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===c)return b;return-1};of=function(c){function b(){this.viewChannelPicker=k(this.viewChannelPicker,this);this.showFeedbackButton=k(this.showFeedbackButton,this);this.viewMemberMenu=k(this.viewMemberMenu,this);this.viewNotificationsMenu=
k(this.viewNotificationsMenu,this);this.renderUnreadNotifications=k(this.renderUnreadNotifications,this);this.renderAvatar=k(this.renderAvatar,this);this.renderMemberName=k(this.renderMemberName,this);this.renderUpgradeAvailable=k(this.renderUpgradeAvailable,this);this.initialize=k(this.initialize,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="header-user";b.prototype.initialize=function(){var d;this.listenTo(this.modelCache,"add:Notification change:Notification remove:Notification",
this.renderUnreadNotifications);this.listenTo(this.model,"change:initials change:avatarHash change:avatarSource change:fullName change:username",this.renderAvatar);$(Na).bind("change:serverVersion",this.renderUpgradeAvailable);this.idLastNotification=null!=(d=_.chain(this.Notification.all()).pluck("id").compact().sort().last().value())?d:"";this.modelCache.on("add:Notification",function(b){return function(d){if(d.id>b.idLastNotification)return b.idLastNotification=d.id,new Fb(d)}}(this));return b.__super__.initialize.apply(this,
arguments)};b.prototype.destructor=function(){$(Na).unbind("change:serverVersion",this.renderUpgradeAvailable);return b.__super__.destructor.apply(this,arguments)};b.prototype.events={"click .js-open-header-notifications-menu":"viewNotificationsMenu","click .js-open-header-member-menu":"viewMemberMenu","click .js-open-add-menu":"openAddMenu","click .js-toggle-login-popover":"viewLoginMenu","click .js-open-feedback":"openFeedback",shortcut:"shortcut","click .js-open-channel-picker":"viewChannelPicker"};
b.prototype.shortcut=function(b){switch(b){case 66:return this.viewBoardsMenu(),"Header Boards Menu"}};b.prototype.render=function(b){var e;null==b&&(b=!1);P("render","rendering header");b={hasCrown:this.model.isFeatureEnabled("crown"),is_promo:b,showChannelPicker:1<(null!=(e=window.channels)?e.allowed.length:void 0)};this.$el.html(v.fill("header_user",b,{},{header_signup_login:v.header_signup_login}));this.renderUpgradeAvailable();this.renderUnreadNotifications();this.renderAvatar();this.renderMemberName();
return this};b.prototype.renderUpgradeAvailable=function(){P("render","rendering upgrade available");if(C.advertiseUpgrade())return this.$(".upgrade").show()};b.prototype.renderMemberName=function(){var b;return this.$(".js-member-name").text(null!=(b=this.model.get("fullName"))?b:this.model.get("username"))};b.prototype.renderAvatar=function(){P("render","rendering avatar");this.$(".member").html(v.fill("member",this.model.toJSON()));return this};b.prototype.renderUnreadNotifications=function(){var b,
e;b=this.Notification.unreadCount();e=""+l.formatCount(b,"Notification",!0)+". Click to view notifications.";this.$(".js-open-header-notifications-menu").attr("title",e).toggleClass("new-notifications",0<b);C.title();return this};b.prototype.viewLoginMenu=function(b){l.stop(b);n("Header","Login Menu","Open Login Menu");return w.toggle({elem:this.$(".js-toggle-login-popover"),top:40,view:y.me().getView(tf)})};b.prototype.viewNotificationsMenu=function(b){l.stop(b);n("Header","Notifications Menu","Open Notifications Menu");
w.toggle({elem:this.$(".js-open-header-notifications-menu"),top:40,view:wf,hidden:_.bind(this.model.clearAllNotifications,this.model),options:{model:this.model,modelCache:this.modelCache}})};b.prototype.openAddMenu=function(b){l.stop(b);n("Header","Add Menu","Open");b=y.me().getView(kf);w.toggle({elem:this.$(".js-open-add-menu"),top:40,view:b})};b.prototype.viewMemberMenu=function(b){l.stop(b);n("Header","User Menu","Open User Menu");b=y.me().getView(nf);w.toggle({elem:this.$(".js-open-header-member-menu"),
top:40,view:b})};b.prototype.showFeedbackButton=function(){this.$(".js-open-feedback").removeClass("hide");return this};b.prototype.openFeedback=function(b){l.stop(b);Y.show({view:new xf({model:this.Auth.me(),modelCache:this.modelCache}),maxWidth:750})};b.prototype.viewChannelPicker=function(b){l.stop(b);w.toggle({elem:this.$(".js-open-channel-picker"),top:41,view:mf})};return b}(A);mf=function(c){function b(){this.showDev=k(this.showDev,this);return b.__super__.constructor.apply(this,arguments)}
s(b,c);b.prototype.CHANNELS=["stable","beta","alpha"];b.prototype.getViewTitle=function(){return"Switch Channels"};b.prototype.events={"click .js-select":"selectChannel","click .js-select-dev":"showDev","click .js-remove-cookie":"removeCookie"};b.prototype.initialize=function(){var b,e,c,f,h;f=this.CHANNELS;h=[];e=0;for(c=f.length;e<c;e++)b=f[e],0<=D.call(window.channels.allowed,b)&&h.push({name:b,displayName:l.capitalize(b),active:b===window.channels.active});this.channels=h;return this.isDev=window.channels.dev};
b.prototype.selectChannel=function(b){var e;e=b.target.name;return S({url:"/1/members/me/channels/active",type:"PUT",data:{value:e},success:function(b){return function(){window.channels.active=e;w.hide();return document.location.reload()}}(this)})};b.prototype.removeCookie=function(b){l.stop(b);$.cookie("head",null,{path:"/"});return this.render()};b.prototype.render=function(){var b;(b=!!$.cookie("head"))&&this.isDev&&_.defer(this.showDev);this.$el.html(v.fill("header_channel_picker",{channels:this.channels,
cookie:b,dev:this.isDev}));return this};b.prototype.showDev=function(){w.pushView({view:pf});return this};return b}(A);pf=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Select client version"};b.prototype.LATEST_VERSION={"0.0":!0};b.prototype.events={"change .js-select-head":"updateHead","change .js-select-version":"updateVersion"};b.prototype.initialize=function(){var b,e,c;a:{try{c=JSON.parse($.cookie("head"));break a}catch(f){}c=
void 0}this.active=c||{};if(this.active.version)return this.active.version=[null!=(b=this.active.version)?b:0,null!=(e=this.active.patch)?e:0].join(".")};b.prototype.render=function(){this.$el.html(v.fill("header_version_picker",{active:this.formatActive(),heads:[null].concat(this.listHeads()),versions:[null].concat(this.listVersions())}));return this};b.prototype.formatVersion=function(b){return"0.0"===b?"latest":b};b.prototype.formatActive=function(){return{name:this.active.name,version:this.formatVersion(this.active.version)}};
b.prototype.listHeads=function(){var b,e,c;e=window.clientDeployments;c=[];for(b in e)c.push({displayName:l.capitalize(b),value:b,selected:this.active.name===b});return c};b.prototype.listVersions=function(){var b,e,c,f;c=_.extend({},this.LATEST_VERSION,window.clientDeployments[this.active.name]);f=[];for(e in c)b=c[e],f.push({displayName:this.formatVersion(e),value:e,selected:this.active.version===e,active:b});return f};b.prototype.updateHead=function(b){this.active.name=$(b.target).val();this.active.version=
null;return this.render()};b.prototype.updateVersion=function(b){var e;this.active.version=$(b.target).val();this.render();e=this.active.version.split(".");b=e[0];e={name:this.active.name,version:b,patch:e[1]};if(0<=parseInt(b))return $.cookie("head",JSON.stringify(e),{path:"/"}),document.location.reload()};return b}(A);tf=function(c){function b(){this.loginPassword=k(this.loginPassword,this);this.loginGoogle=k(this.loginGoogle,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,
arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Log In"};b.prototype.className="login-popover";b.prototype.initialize=function(){return this.errors={}};b.prototype.events={"click .js-google-login":"loginGoogle","click .js-password-login":"loginPassword"};b.prototype.render=function(){this.$el.html(v.fill("login_popover",{badLogin:this.errors.badLogin,returnUrl:"/"}));return this};b.prototype.loginGoogle=function(b){l.stop(b);n("Header","Log In","Google");TRMixpanel.justLoggedIn();b=$(b.target).closest("form");
b.find('input[name="mode"]').val("popup");b.find('input[name="immediate"]').val(!1);b.find('input[name="returnUrl"]').val(document.location.pathname);return b.submit()};b.prototype.loginPassword=function(b){return TRMixpanel.justLoggedIn()};return b}(A);lf=function(c){function b(){this.toggleBoardsSidebar=k(this.toggleBoardsSidebar,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="header-boards-button";b.prototype.events={"click .js-boards-menu":"toggleBoardsSidebar"};
b.prototype.render=function(){this.$el.html(v.fill("header_boards_menu_button"));return this};b.prototype.toggleBoardsSidebar=function(b){l.stop(b);n("Header","Boards Menu","Toggle Boards Menu");W.getShowSidebar()?W.hideSidebar():W.showSidebar()};return b}(A);nf=function(c){function b(){this.logout=k(this.logout,this);this.reco=k(this.reco,this);this.account=k(this.account,this);this.billing=k(this.billing,this);this.cards=k(this.cards,this);this.profile=k(this.profile,this);this.render=k(this.render,
this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){return this.model.ond("change:loginTypes",this.render)};b.prototype.getViewTitle=function(){return this.model.getMemberViewTitle()};b.prototype.events={"click .js-profile":"profile","click .js-cards":"cards","click .js-billing":"billing","click .js-account":"account","click .js-help":"help","click .js-platforms":"platforms","click .js-shortcuts":"shortcuts","click .js-reco":"reco","click .js-logout":"logout"};
b.prototype.render=function(){var b,e;P("render","rendering HeaderMemberMenuView");b=this.model.toJSON();b.cardsUrl=C.getMemberCardsUrl();b.profileUrl=C.getMemberProfileUrl();b.billingUrl=C.getMemberBillingUrl();b.accountUrl=C.getMemberAccountUrl();b.canLogOut=y.canLogIn();b.hasTrelloGold=this.model.isGold();b.hasAccount=Ea.hasAccount(null!=(e=b.paidAccount)?e.standing:void 0);this.$el.html(v.fill("header_member_menu",b));return this};b.prototype.profile=function(){return n("Header","User Menu","Profile")};
b.prototype.cards=function(){return n("Header","User Menu","Cards")};b.prototype.billing=function(){return n("Header","User Menu","Billing")};b.prototype.account=function(){return n("Header","User Menu","Settings")};b.prototype.help=function(){return n("Header","User Menu","Help")};b.prototype.platforms=function(){return n("Header","User Menu","Platforms")};b.prototype.shortcuts=function(){return n("Header","User Menu","Shortcuts")};b.prototype.reco=function(){return n("Header","User Menu","Recommend")};
b.prototype.logout=function(b){if(y.canLogIn())return y.logoutPost(),n("Header","User Menu","Log Out");w.pushView({view:this.model.getView(Ob)});return l.stop(b)};return b}(A);qf=function(c){function b(){this.openAnnouncement=k(this.openAnnouncement,this);this.renderUnreadAnnouncementCount=k(this.renderUnreadAnnouncementCount,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){db.onAddRemove(this.renderUnreadAnnouncementCount);
eb.onAddRemove(this.renderUnreadAnnouncementCount);eb.ond("change:unread",this.renderUnreadAnnouncementCount);this.updateAllAnnouncements=_.debounce(this.updateAllAnnouncements,6E4,!0);return this.setInterval(function(b){return function(){return b.renderUnreadAnnouncementCount()}}(this),3E4)};b.prototype.events={click:"openAnnouncement",mouseover:"updateAllAnnouncements"};b.prototype.render=function(){this.$el.html(v.fill("woof_header"));this.renderUnreadAnnouncementCount();return this};b.prototype.renderUnreadAnnouncementCount=
function(){var b,e;e=db.unreadCount();b=this.$(".header-btn");0<=D.call(_.pluck(db.toJSON(),"type"),"downtime")?(b.find(".js-phrase").text("Down for maintenance soon\u2026"),b.addClass("woof-alert")):b.find(".js-phrase").text("New stuff!");y.isLoggedIn()&&0<e?b.removeClass("woof-crouch woof-hide").addClass("woof-up"):y.isLoggedIn()&&ka.get("tacoShow")>(new Date).getTime()?b.removeClass("woof-up woof-hide").addClass("woof-crouch"):b.removeClass("woof-up woof-crouch woof-alert").addClass("woof-hide")};
b.prototype.updateAllAnnouncements=function(){return eb.fetch()};b.prototype.openAnnouncement=function(b){l.stop(b);this.updateAllAnnouncements();w.toggle({elem:this.$(".header-btn"),top:40,view:y.me().getView(gf)});n("Header","Announcement","Unread",db.unreadCount())};return b}(A);gf=function(c){function b(){this.openAnnouncementLink=k(this.openAnnouncementLink,this);this.clickGoogle=k(this.clickGoogle,this);this.clickFacebook=k(this.clickFacebook,this);this.clickTwitter=k(this.clickTwitter,this);
this.clickBlog=k(this.clickBlog,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){return eb.onAddRemove(this.render)};b.prototype.getViewTitle=function(){return"Announcements"};b.prototype.events={"click .js-blog":"clickBlog","click .js-t":"clickTwitter","click .js-fb":"clickFacebook","click .js-g":"clickGoogle","click a":"openAnnouncementLink"};b.prototype.render=function(){var b,e,c,f,h,m;b={announcements:eb.toJSON()};
c={announcement:v.announcement};m=eb.getUnread();f=0;for(h=m.length;f<h;f++)e=m[f],e.markRead();ka.set("tacoShow",(new Date).addMinutes(60).getTime());this.$el.html(v.fill("header_announcements",b,{},c));return this};b.prototype.clickBlog=function(){return n("Header","Announcements Menu","Trello Blog")};b.prototype.clickTwitter=function(){return n("Header","Announcements Menu","Twitter Link")};b.prototype.clickFacebook=function(){return n("Header","Announcements Menu","Facebook Link")};b.prototype.clickGoogle=
function(){return n("Header","Announcements Menu","Google+ Link")};b.prototype.openAnnouncementLink=function(b){if(!$(b.target).closest("a").is(".js-blog, .js-t, .js-fb, .js-g, .js-close-popover"))return n("Info","Announcements","Open Announcement Link")};return b}(A);Eb=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="header-banner header-banner-warning";return b}(A);jf=function(c){function b(){this.render=k(this.render,this);this.initialize=
k(this.initialize,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){var b,e,c,f;c={gmail:/@(gmail|googlemail).com$/,yahoo:/@(yahoo|ymail).com$/,live:/@(hotmail|live).com$/,mac:/@(me|mac).com$/};b={gmail:"http://gmail.com",yahoo:"http://mail.yahoo.com",live:"http://live.com",mac:"https://www.icloud.com/"};for(e in c)if(f=c[e],f.test(this.model.get("email"))){this.emailInboxUrl=b[e];break}if(null==this.emailInboxUrl)return S({url:"/checkYourEmail",data:{email:this.model.get("email")},
dataType:"json",success:function(b){return function(d){if(null==d.error)return b.emailInboxUrl=d.url,b.render()}}(this)})};b.prototype.render=function(){var b;b=this.model.toJSON();null!=this.emailInboxUrl&&(b.emailInboxUrl=this.emailInboxUrl,b.knownEmailProvider=!0);this.$el.html(v.fill("header_warning_banner",b));return this};return b}(Eb);vf=function(c){function b(){this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){return this.model.bind("change:loginTypes",
function(b){return function(){b.$el.toggle(!y.canLogIn());return $(window).triggerHandler("resize")}}(this))};b.prototype.events={"click .js-change-password":"changePassword"};b.prototype.render=function(){this.$el.html(v.fill("header_warning_password",this.model.toJSON()));return this};b.prototype.changePassword=function(b){l.stop(b);n("Member View","Account Page","Open Change Password Menu");return w.toggle({elem:this.$(".js-change-password"),top:24,view:this.model.getView(Ob)})};return b}(Eb);
uf=function(c){function b(){this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){return this.model.ond("change:prefs",this.render)};b.prototype.render=function(){var b,e,c;c=this.model.toJSON();b=this.model.get("prefs");e="public"===b.voting;b="public"===b.comments;c.interactions=e&&b?"subscribe, vote or comment on":e?"subscribe or vote on":b?"subscribe or comments on":"subscribe to";e=encodeURIComponent(C.getBoardUrl(this.modelCache,
this.model));c.signupUrl="/signup?returnUrl="+e+"&source=public-board-banner";c.tourUrl="/tour?board="+e+"&source=public-board-banner";this.$el.html(v.fill("header_public_board",c));return this};return b}(Eb);rf=function(c){function b(){this.showLoginOrSignupDialog=k(this.showLoginOrSignupDialog,this);this.switchAccounts=k(this.switchAccounts,this);this.createNewAccount=k(this.createNewAccount,this);this.ignoreInvite=k(this.ignoreInvite,this);this.hideHeader=k(this.hideHeader,this);this.joinModel=
k(this.joinModel,this);this.render=k(this.render,this);this.getGhost=k(this.getGhost,this);this.getMemberAdder=k(this.getMemberAdder,this);this.getInviteToken=k(this.getInviteToken,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.events={"click .js-join-model":"joinModel","click .js-ignore-invite":"ignoreInvite","click .js-switch-accounts":"switchAccounts","click .js-create-new-account":"createNewAccount"};b.prototype.className="header-banner header-banner-warning header-banner-invited";
b.prototype.initialize=function(){this.boardOrOrg=this.options.idBoard?this.Board.get(this.options.idBoard):this.Organization.get(this.options.idOrganization);return M["for"](this.modelCache).loadMemberEmail(this.getGhost().id,function(b){return function(e,c){null!=(null!=c?c.email:void 0)&&S({url:"/1/search/members/",type:"get",data:{query:c.email},dataType:"json",success:function(e){if(!_.isEmpty(e)&&"normal"===e[0].memberType)return b.hasAccount=!0}});return b.render()}}(this))};b.prototype.getInviteToken=
function(){return l.inviteTokenFor(this.boardOrOrg.id)};b.prototype.getMemberAdder=function(){var b;b=this.getInviteToken().split("-")[1];return this.Member.get(b)};b.prototype.getGhost=function(){var b;b=this.getInviteToken().split("-")[0];return this.Member.get(b)};b.prototype.render=function(){var b,e,c;b=this.model.toJSON();b.isLoggedIn=y.isLoggedIn();b[this.boardOrOrg.typeName.toLowerCase()]=this.boardOrOrg.toJSON();b.modelType=this.boardOrOrg.typeName;e=this.getMemberAdder();null!=e&&(b.memberAdder=
e.toJSON(),b.isInviter=y.isMe(e));b.ghost=null!=(c=this.getGhost())?c.toJSON():void 0;$(this.el).html(v.fill("header_invite",b));return this};b.prototype.joinModel=function(b){var e;l.stop(b);return y.isLoggedIn()?(e=_.extend(this.model.toJSON(),{ghostEmail:this.getGhost().get("email")}),hf.toggle({elem:$(b.target),top:35,model:this.model,title:"Add Email Address?",data:e,confirmText:"Add",fxConfirm:function(b){return function(){var d,e,c;e=b.options.idBoard?"board":"organization";d=null!=(c=b.options.idBoard)?
c:b.options.idOrganization;return S({url:"/associate-json/"+e+"/"+d+"/"+l.inviteTokenFor(d),dataType:"json",type:"post",success:function(d){if(null==d.error)return b.deleteTokenCookie(),b.hideHeader(),O.show("You have joined this board","info",null,5E3)}})}}(this)})):this.showLoginOrSignupDialog()};b.prototype.deleteTokenCookie=function(){var b;return $.cookie("invite-token-"+(null!=(b=this.options.idBoard)?b:this.options.idOrganization),null,{path:"/"})};b.prototype.hideHeader=function(){$(this.el).hide();
return l.calcBoardLayout()};b.prototype.ignoreInvite=function(b){l.stop(b);if(null!=this.getGhost())return this.boardOrOrg.memberList.remove(this.getGhost(),{invite:!0,success:function(b){return function(){b.hideHeader();b.deleteTokenCookie();return O.show("You did not join this board","error",null,5E3)}}(this)})};b.prototype.createNewAccount=function(b){l.stop(b);n("Header","Login/Signup Menu","Open Login/Signup Menu: Create New");return this.showLoginOrSignupDialog(!0)};b.prototype.switchAccounts=
function(b){l.stop(b);n("Header","Login/Signup Menu","Open Login/Signup Menu");return this.showLoginOrSignupDialog()};b.prototype.showLoginOrSignupDialog=function(b){b=b?!1:this.hasAccount;return Y.show({view:new sf({model:this.Member.get(y.myId()),modelCache:this.modelCache,idGhost:this.getGhost().id,idModel:this.boardOrOrg.id,hasAccount:b,modelType:this.options.idBoard?"board":"organization"})})};return b}(Eb);hf=function(c){function b(){b.__super__.constructor.apply(this,arguments);this.template=
"confirm_merge"}s(b,c);b.prototype.render=function(){b.__super__.render.apply(this,arguments);this.appendSubview(this.subview(Ka,this.model),this.$(".js-member"));return this};return b}(pa);kf=function(c){function b(){this.newOrg=k(this.newOrg,this);this.newBoard=k(this.newBoard,this);this.newCard=k(this.newCard,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Add"};b.prototype.events={"click .js-new-card":"newCard","click .js-new-board":"newBoard",
"click .js-new-org":"newOrg"};b.prototype.render=function(){this.$el.html(v.fill("header_add_menu"));return this};b.prototype.newCard=function(){n("Header","Add Menu","New Card");return w.pushView({view:new CreateCardView({model:this.model,modelCache:this.modelCache})})};b.prototype.newBoard=function(){n("Header","Add Menu","New Board");return w.pushView({view:new ud({model:this.model,modelCache:this.modelCache})})};b.prototype.newOrg=function(){n("Header","Add Menu","New Org");return w.pushView({view:new Pb({model:this.model,
modelCache:this.modelCache})})};return b}(A);sf=function(c){function b(){this.clickTab=k(this.clickTab,this);this.setFocusTo=k(this.setFocusTo,this);this.clickFormPart=k(this.clickFormPart,this);this.mouseenterFormPart=k(this.mouseenterFormPart,this);this.loginGoogle=k(this.loginGoogle,this);this.loginPassword=k(this.loginPassword,this);this.createAccount=k(this.createAccount,this);this.addMouseenterFormPartEvent=k(this.addMouseenterFormPartEvent,this);this.setDefaultActive=k(this.setDefaultActive,
this);this.render=k(this.render,this);this.remove=k(this.remove,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Log In or Sign Up"};b.prototype.className="login-signup-popover";b.prototype.remove=function(){this.$el.remove();return this};b.prototype.events={"mouseenter .js-default-active":"addMouseenterFormPartEvent","click .js-form-part":"clickFormPart","click .js-tabs a":"clickTab","click .js-google-login":"loginGoogle","click .js-password-login":"loginPassword",
"click .js-create-account":"createAccount"};b.prototype.render=function(){var b;b=this.Member.get(this.options.idGhost).toJSON();b.hasAccount=this.options.hasAccount;$(this.el).html(v.fill("hybrid_signup_login",b));_.defer(this.setDefaultActive);this.$(".js-insert-tooltip").html(y.me().getView(yf).render().el);return this};b.prototype.setDefaultActive=function(){this.setFocusTo(this.$(".js-default-active"));return this.$(".js-active-box").removeClass("start")};b.prototype.addMouseenterFormPartEvent=
function(){this.$(".js-default-active").unbind("mouseenter");return this.$(".js-form-part").bind("mouseenter",this.mouseenterFormPart)};b.prototype.disableCreateAccount=function(){this.createDisabled=!0;return this.$(".js-create-account").attr("disabled","disabled")};b.prototype.enableCreateAccount=function(){this.createDisabled=!1;return this.$(".js-create-account").removeAttr("disabled")};b.prototype.createAccount=function(b){l.stop(b);if(!this.createDisabled)return n("Invite Header","Create Account"),
TRMixpanel.justSignedUp(),this.$(".js-bad-password").hide(),this.$(".js-bad-full-name").hide(),this.$(".js-bad-email").hide(),this.$(".js-used-email").hide(),b=$(b.target).closest("form"),this.disableCreateAccount(),S({type:"POST",dataType:"json",url:"/signup-invitation",data:{email:b.find('input[name="email"]').val(),idModel:this.options.idModel,type:this.options.modelType,fullName:b.find('input[name="fullName"]').val(),password:b.find('input[name="password"]').val(),inviteToken:l.inviteTokenFor(this.options.idModel)},
success:function(b){return function(d){if(d.success||/invalid invitation/.test(d.error))return location.reload();if(/password/.test(d.error))return b.$(".js-bad-password").show(),b.enableCreateAccount();if(/fullName/.test(d.error))return b.$(".js-bad-full-name").show(),b.enableCreateAccount();if(/email/.test(d.error))return b.enableCreateAccount(),/in use/.test(d.error)?b.$(".js-used-email").show():b.$(".js-bad-email").show()}}(this)})};b.prototype.loginPassword=function(b){l.stop(b);n("Invite Header",
"Log In","Password");TRMixpanel.justLoggedIn();b=$(b.target).closest("form");b.find('input[name="returnUrl"]').val(document.location.pathname);return b.submit()};b.prototype.loginGoogle=function(b){l.stop(b);n("Invite Header","Log In","Google");TRMixpanel.justLoggedIn();b=$(b.target).closest("form");b.find('input[name="login"]').val(!0);b.find('input[name="mode"]').val("popup");b.find('input[name="immediate"]').val(!1);b.find('input[name="returnUrl"]').val(document.location.pathname);return b.submit()};
b.prototype.mouseenterFormPart=function(b){if(!ba.isTouch()&&0===this.$("*:input:focus").length&&0===this.$(".js-tooltip-content.active").length)return this.setFocusTo($(b.target).closest(".js-form-part"))};b.prototype.clickFormPart=function(b){if(!ba.isTouch())return this.setFocusTo($(b.target).closest(".js-form-part"))};b.prototype.setFocusTo=function(b){var e,c,f,h,m;b.siblings(".js-form-part").removeClass("active");b.addClass("active");this.$(".js-tab").removeClass("active");this.$(".js-tab[data-content="+
this.$(".js-form-part.active").attr("data-id")+"]").addClass("active");h=["js-signup-form-pos","js-login-form-pos"];m=[];c=0;for(f=h.length;c<f;c++)e=h[c],m.push(this.$(".js-active-box").toggleClass(e,b.hasClass(e)));return m};b.prototype.clickTab=function(b){b=this.$("."+$(b.target).attr("data-content"));return this.setFocusTo(b)};return b}(A);var Va,zf,vd,rc,k=function(c,b){return function(){return c.apply(b,arguments)}},F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,
e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c},D=[].indexOf||function(c){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===c)return b;return-1};Va=function(c){function b(){this.switchSections=k(this.switchSections,this);this.setSectionLabel=k(this.setSectionLabel,this);this.renderArchivedLists=k(this.renderArchivedLists,this);this.loadData=k(this.loadData,this);this.render=k(this.render,this);this.debouncedLoadData=this.debounce(this.loadData,400);
this.results={};b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Archive"};b.viewName="CardAndListArchiveView";b.prototype.displayTypeClass="sidebar-display-wide";b.prototype.className="board-widgets-content fancy-scrollbar";b.prototype.initialize=function(){b.__super__.initialize.apply(this,arguments);this.CARDS_PER_PAGE=10;this.section="cards";this.loading=!0;this.isSearching=!1;this.debouncedRenderCards=this.debounce(this.renderArchivedCards,50);this.listenTo(this.modelCache,
"add:Card remove:Card reset:Card change:Card:closed",function(b){return function(){return b.debouncedRenderCards()}}(this));return this.modelCache.ond("add:List remove:List reset:List change:List:closed",this.renderArchivedLists)};b.prototype.events={"click .js-switch-section":"switchSections","click .js-more-archive-cards":"getMoreCards","keyup .js-search":"keyupArchiveEvent"};b.prototype._getArchivedCards=function(){return this.Card.find(function(b){return function(e){return e.get("idBoard")===
b.model.id&&e.get("closed")}}(this))};b.prototype._getArchivedLists=function(){return this.List.find(function(b){return function(e){return e.get("idBoard")===b.model.id&&e.get("closed")}}(this))};b.prototype.getMoreCards=function(){var b,e,c,f,h;b=this.model;if("cards"===this.section)return this.loading=!0,e=this._getArchivedCards(),c={limit:this.CARDS_PER_PAGE,before:null!=(h="function"===typeof(f=_.min(_.map(e,function(b){return I.parse(b.get("dateLastActivity"))}))).getTime?f.getTime():void 0)?
h:null},M["for"](this.modelCache).loadClosedCards(b.id,c,function(b){return function(d,e){b.hasMoreCards=e.length===c.limit;b.loading=!1;b.renderArchivedCards()}}(this))};b.prototype.getData=function(){var b,e;b=this.model;"cards"===this.section&&(this.loading=!0,e={limit:this.CARDS_PER_PAGE},M["for"](this.modelCache).loadClosedCards(b.id,e,function(b){return function(d,c){b.hasMoreCards=c.length===e.limit;b.loading=!1;b.renderArchivedCards()}}(this)))};b.prototype.render=function(){var b,e,c,f,h,
m,q;b="lists"===this.section;c=!b;b?(f=this._getArchivedLists(),e=function(b){return b.get("name")}):(f=this._getArchivedCards(),e=function(b){var d;return null!=(d=0-new Date(b.get("dateLastActivity")))?d:0});f=_.sortBy(f,e);e=this.model.toJSON();b={loading:this.loading,empty:!this.loading&&0===f.length,emptyMessage:"No archived "+(b?"lists":"cards")+".",hasMoreCards:!this.loading&&this.hasMoreCards&&c};h={editable:this.model.editable(),owned:this.model.owned()};e["section_"+this.section]=b["section_"+
this.section]=!0;e.content=v.fill("archive_items",b,h);this.$el.html(v.fill("board_archive",e));this.setSectionLabel(this.section);this.$archiveItems=this.$(".js-archive-items");if(c){this.$(".archive-controls").addClass("viewing-cards").removeClass("viewing-lists");m=0;for(e=f.length;m<e;m++)c=f[m],null!=(q=this.$archiveItems)&&q.append(c.getView(vd,null,{reOpenText:"Send to Board",canDelete:!0}).render().el)}else{this.$(".archive-controls").addClass("viewing-lists").removeClass("viewing-cards");
q=0;for(e=f.length;q<e;q++)c=f[q],null!=(m=this.$archiveItems)&&m.append(c.getView(rc,null,{reOpenText:"Send to Board",canDelete:!1}).render().el)}_.defer(function(){return Q.refreshCardSortable()});return this};b.prototype.keyupArchiveEvent=function(b){var e,c;if(!(e=b.keyCode,0<=D.call(nc,e))&&!(c=b.keyCode,0<=D.call(td,c)))b=this.$(".js-search").val(),this.$(".js-search-loading").removeClass("hide"),""===b?this.renderArchivedCards("latest"):this.debouncedLoadData()};b.prototype.loadData=function(){var b,
e;e="is:archived "+this.$(".js-search").val();b=this.model.id;M["for"](this.modelCache).loadSearchData({query:e,modelTypes:"cards",idBoards:b,partial:!0},function(b){return function(d,e){b.results=e;d||b.renderArchivedCards("searching")}}(this))};b.prototype.renderArchivedLists=function(){"lists"===this.section&&this.render()};b.prototype.renderArchivedCards=function(b){var e,c,f,h,m,q;null!=b&&(this.isSearching="searching"===b);this.$(".js-search-loading").addClass("hide");this.$(".spinner.loading").toggleClass("hide",
!this.loading);this.$(".js-more-archive-cards").toggleClass("hide",this.isSearching);if("cards"===this.section&&this.model.viewState.getCurrentSidebarView()===this){null!=(f=this.$archiveItems)&&f.empty();b=this.isSearching?this.results.cards:this._getArchivedCards();f=0;for(h=b.length;f<h;f++)e=b[f],e=this.Card.get(e.id),null!=(c=this.$archiveItems)&&c.append(e.getView(vd,null,{reOpenText:"Send to Board",canDelete:!0}).render().el);this.hasMoreCards&&!this.isSearching?null!=(m=this.$archiveItems)&&
m.append("<a class='show-more clear js-more-archive-cards' href='#'>Load more cards.</a>"):0===b.length&&(c={message:"No archived cards."},this.isSearching&&(c.message="No archived card results."),null!=(q=this.$archiveItems)&&q.append(v.fill("empty_list",c)))}Q.debounceArchivedCardsRefresh()};b.prototype.setSectionLabel=function(){var b;this.$(".js-current-section").html(""+l.toTitleCase(this.section));b="lists";"lists"===this.section&&(b="cards");this.$(".js-new-section").html(b)};b.prototype.switchSections=
function(b){l.stop(b);"cards"===this.section?this.section="lists":(this.isSearching=!1,this.section="cards");this.getData();return this.render()};return b}(A);zf=function(c){function b(){this.onReopen=k(this.onReopen,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){return this.listenTo(this.model.boardList,{"change:closed add remove reset":this.render})};b.prototype.render=function(){var b,e,c;e=this.model.boardList;
c={empty:0===e.filter(function(b){return b.get("closed")}).length};this.$el.html(v.fill("closed_boards",c));b=this.$(".js-archive-items");e.forEach(function(e){return function(c){if(c.get("closed"))return c=new rc({model:c,onReopen:e.onReopen}),b.append(c.render().el)}}(this));return this};b.prototype.onReopen=function(b){return C.displayBoard({idBoard:b.id})};return b}(A);rc=function(c){function b(){this.reopen=k(this.reopen,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,
arguments)}s(b,c);b.prototype.tagName="li";b.prototype.className="clearfix";b.prototype.events={"click .js-reopen":"reopen"};b.prototype.render=function(){var b,e,c,f;b=null!=this.model.owned?this.model.owned():this.model.editable();e=this.model.toJSON();e.reOpenText=null!=(f=this.options.reOpenText)?f:"Re-open";e.url="function"===typeof(c=this.model).getUrl?c.getUrl():void 0;this.$el.html(v.fill("archive_item",e,{editable:b}));return this};b.prototype.reopen=function(b){l.preventDefault(b);w.hide();
this.model.update({closed:!1},function(b){return function(){var d;n(b.model.typeName,"Reopen","Via Archive");return"function"===typeof(d=b.options).onReopen?d.onReopen(b.model):void 0}}(this));return!1};return b}(A);vd=function(c){function b(){this.deleteModel=k(this.deleteModel,this);this.openCard=k(this.openCard,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.tagName="div";b.prototype.className="archived-list-card";b.prototype.events=
{"click .list-card":"openCard","click .js-reopen":"reopen","click .js-delete":"deleteModel"};b.prototype.render=function(){var b,e,c,f;b=null!=this.model.owned?this.model.owned():this.model.editable();c={reOpenText:null!=(e=this.options.reOpenText)?e:"Re-open",canDelete:null!=(f=this.options.canDelete)?f:!1};e=this.model.getView(Ca);this.$el.html(e.render().el).append(v.fill("archived_card_options",c,{editable:b}));return this};b.prototype.openCard=function(b){l.stop(b);C.showCardDetail(this.model);
Y.calcPos()};b.prototype.deleteModel=function(b){var e;l.stop(b);pa.toggle({elem:null!=(e=$(b.target).closest(".js-delete"))?e[0]:void 0,top:22,model:this.model,title:"Delete Card?",text:"All actions will be removed from the activity feed and you won't be able to re-open the card. There is no undo.",confirmText:"Delete",confirmBtnClass:"negate",fxConfirm:function(b){return function(d){b.model.destroy();return n("Card","Delete","Via Archive")}}(this)})};return b}(rc);var wd;wd=function(c){return function(b){var d,
e;for(d in b)e=b[d],_.isFunction(e)?b[d]=new De.Template(e):b[d]=wd(e);return b}}(this);v=wd(v);v.fill=function(c,b,d,e){var g;null==b&&(b={});null==d&&(d={});null==e&&(e={});c=v[c];b=_.extend({__ed:null!=d?d.editable:void 0,__own:null!=d?d.owned:void 0,__loggedIn:"undefined"!==typeof y&&null!==y?y.isLoggedIn():void 0,__siteDomain:siteDomain,__avatarDomain:avatarDomain,__logoDomain:logoDomain,__gold:"undefined"!==typeof y&&null!==y?null!=(g=y.me())?g.isGold():void 0:void 0},b,"undefined"!==typeof za&&
null!==za?za.tests(d.idABTest):void 0);return c.render(b,e)};v.fillFromModel=function(c,b,d,e){var g;null==d&&(d={});null==e&&(e={});g={editable:"function"===typeof b.editable?b.editable():void 0,owned:"function"===typeof b.owned?b.owned():void 0};d=_.extend(b.toJSON(),d);return v.fill(c,d,g,e)};v.fillMenu=function(c,b,d){return v.fill("menu-base",{content:v.fill(c,b,d)})};var Cb;Cb=new (function(){function c(){$(rpc).on("ready",function(b){return function(){$(window).on("beforeunload",function(){rpc.isUsingSocket()||
b.sendStatus("disconnected");b.markCurrentBoardAsViewed()});setInterval(b.sendStatus,rpc.isUsingSocket()?l.getMs({minutes:5}):l.getMs({minutes:1}));b.sendStatus();return $(Ha).bind("setStatus",function(){return b.sendStatus()})}}(this));$(rpc).on("updateModels deleteModels",function(b){return function(d,e){var c;null!=e.idModelChannel&&e.idModelChannel===(null!=(c=C.getCurrentBoard())?c.id:void 0)&&b.scheduleMarkCurrentBoardAsViewed()}}(this))}c.prototype.sendStatus=function(b){null==b&&(b=Ha.getStatus());
if(y.isLoggedIn())return rpc.sendStatus(b)};c.prototype.markCurrentBoardAsViewed=function(){var b;clearTimeout(this._markAsViewedTimeout);return null!=(b=C.getCurrentBoard())?b.markAsViewed():void 0};c.prototype.scheduleMarkCurrentBoardAsViewed=function(){clearTimeout(this._markAsViewedTimeout);return this._markAsViewedTimeout=setTimeout(function(b){return function(){return b.markCurrentBoardAsViewed()}}(this),l.getMs({minutes:1}))};return c}());var yf,Af,xd,Bf,k=function(c,b){return function(){return c.apply(b,
arguments)}},F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c};Af=new (function(){function c(){this.hide=k(this.hide,this);this.windowClick=k(this.windowClick,this);this.toggle=k(this.toggle,this);this.show=k(this.show,this);this.tooltip=null;$(window).bind("click",this.windowClick)}c.prototype.show=function(b,d){var e,c,f,h,m;e=$(v.fill("tooltip-content",{tooltipText:b}));
c=$(".tooltip-container");c.html(e);this.tooltip={tooltipText:b,$anchor:d,$elem:e};f=d.offset();h=f.left;m=f.top;f=d.outerHeight();c.css({left:h-5,top:m+f});return e.addClass("active")};c.prototype.toggle=function(b,d){var e;return d.is(null!=(e=this.tooltip)?e.$anchor:void 0)?this.hide():this.show(b,d)};c.prototype.windowClick=function(b){if(0===$(b.target).closest(".js-tooltip-content").length||0!==$(b.target).closest(".js-tooltip-close-button").length)return this.hide()};c.prototype.hide=function(){var b;
this.tooltip=null;b=$(".tooltip-container");b.find(".tooltip-content").removeClass("active");return _.delay(function(d){return function(){return b.empty()}}(this),300)};return c}());xd=function(c){function b(){this.toggleTooltip=k(this.toggleTooltip,this);this.isActive=k(this.isActive,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="tooltip";b.prototype.events={"click .js-tooltip-trigger":"toggleTooltip"};b.prototype.render=function(){this.$el.html(v.fill("tooltip",
{linkText:this.linkText,tooltipText:this.tooltipText}));return this};b.prototype.isActive=function(){return!0};b.prototype.toggleTooltip=function(b){l.stop(b);if(this.isActive())return Af.toggle(this.tooltipText,this.$(".js-tooltip-anchor"))};return b}(A);yf=function(c){function b(){this.isActive=k(this.isActive,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.linkText="How come my info's already there?";b.prototype.tooltipText="The person who invited you kindly pre-filled some info to save you time. Wasn't that nice of them?";
b.prototype.isActive=function(){return 0!==this.$el.closest(".active").length};return b}(xd);Bf=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.linkText="";b.prototype.tooltipText="This user has not yet confirmed that the email address we have on file belongs to them.";return b}(xd);var sc,tc,va,uc,Gb,vc,wc,yd,xc,Aa,ob,yc,F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;
c.prototype=new d;c.__super__=b.prototype;return c},k=function(c,b){return function(){return c.apply(b,arguments)}},D=[].indexOf||function(c){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===c)return b;return-1};va=[{name:"voting",description:"Allow people to vote on cards.",imageClass:"power-up-icon-image-voting",aboutTemplate:"power_ups_about_voting",settingsView:function(c){return new xc({model:c})},backgroundColor:"hsl(82, 25%, 90%)",screenshots:["https://d78fikflryjgj.cloudfront.net/images/powerups/voting/screenshots/5a3055ee42904ad84ba81830694e4a03/screenshot1.png"]},
{name:"cardAging",description:"Cards visibly age with inactivity.",imageClass:"power-up-icon-image-card-aging",aboutTemplate:"power_ups_about_card_aging",settingsView:function(c){return new tc({model:c})},backgroundColor:"hsl(227, 14%, 90%)",screenshots:["https://d78fikflryjgj.cloudfront.net/images/powerups/card-aging/screenshots/d073fc23fd31de74ff54d5d023e64478/screenshot1.png","https://d78fikflryjgj.cloudfront.net/images/powerups/card-aging/screenshots/c80b3b4586309dc983d6de5c3d1a5607/screenshot2.png"]},
{name:"calendar",description:"See your cards with due dates on a calendar.",imageClass:"power-up-icon-image-calendar",aboutTemplate:"power_ups_about_calendar",settingsView:function(c){return new sc({model:c})},backgroundColor:"hsl(204, 30%, 90%)",screenshots:["https://d78fikflryjgj.cloudfront.net/images/powerups/calendar/screenshots/f6a00a55c883ce90c323f6f4b9d8bc57/screenshot1.png","https://d78fikflryjgj.cloudfront.net/images/powerups/calendar/screenshots/a26f919154bc1834a54f02e485dca9dd/screenshot2.png",
"https://d78fikflryjgj.cloudfront.net/images/powerups/calendar/screenshots/b1c5841496fcf25c103ec3951a318a8c/screenshot_mobile1.png"]}];ob=0;for(yc=va.length;ob<yc;ob++)Aa=va[ob],Aa.displayName=lb.powerUpNames[Aa.name];yd=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){var b,e,c;this.listView=new wc({model:this.model});this.currentMode="list";this.detailViews={};c=[];b=0;for(e=va.length;b<e;b++)Aa=va[b],c.push(this.detailViews[Aa.name]=
new uc({model:this.model,powerUp:Aa}));return c};b.prototype.events={"click .js-back-view":"showListView","click .js-power-up-detail":"showDetailView"};b.prototype.render=function(){this.$el.empty().append(this.listView.render().el);return this};b.prototype.showListView=function(b){l.stop(b);this.$el.empty().append(this.listView.render().el);this.listView.delegateEvents();this.currentMode="list";return this.$el.css({background:"",backgroundColor:""})};b.prototype.showDetailView=function(b){var e,
c;l.stop(b);if("detail"!==this.currentMode)return e=$(b.target).closest(".js-power-up-detail").find(".js-power-up-name").attr("data-power-up-name"),this.$el.empty().append(this.detailViews[e].render().el),b=null!=(c=_.find(va,function(b){return b.name===e}).backgroundColor)?c:"",this.$el.css({backgroundColor:b}),this.detailViews[e].delegateEvents(),this.currentMode="detail"};return b}(A);wc=function(c){function b(){this.renderPowerUpsLength=k(this.renderPowerUpsLength,this);return b.__super__.constructor.apply(this,
arguments)}s(b,c);b.prototype.initialize=function(){var b,e,c,f;this.listenTo(this.model,{"change:powerUps":this.renderPowerUpsLength});this.iconViews=[];f=[];e=0;for(c=va.length;e<c;e++)Aa=va[e],b={model:this.model,powerUp:Aa,viewType:"list"},f.push(this.iconViews.push(new Gb(b)));return f};b.prototype.render=function(){this.$el.html(v.fillFromModel("power_ups_list",this.model));this.renderPowerUps();this.renderPowerUpsLength();return this};b.prototype.delegateEvents=function(){var d,e,c,f,h;b.__super__.delegateEvents.apply(this,
arguments);f=this.iconViews;h=[];e=0;for(c=f.length;e<c;e++)d=f[e],h.push(d.delegateEvents());return h};b.prototype.renderPowerUpsLength=function(){var b,e;e=this.model.get("powerUps").length;b=this.$(".js-power-up-count").empty().addClass("hide");if(0<e)return b.text(""+e+" enabled").removeClass("hide")};b.prototype.renderPowerUps=function(){var b,e,c,f,h,m;b=this.$(".js-power-up-list").empty();h=this.iconViews;m=[];c=0;for(f=h.length;c<f;c++)e=h[c],m.push(b.append(e.render().el));return m};return b}(A);
uc=function(c){function b(){this.renderContent=k(this.renderContent,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="power-up-detail";b.prototype.initialize=function(b){this.powerUp=b.powerUp;this.listenTo(this.model,{"change:powerUps":this.renderContent});this.toolbarSelection="settings";this.iconView=new Gb({model:this.model,powerUp:this.powerUp,viewType:"detail"});return this.screenshotsView=new vc({model:this.model,powerUp:this.powerUp})};b.prototype.events=
{"click .js-toolbar-select":"selectContentSection"};b.prototype.render=function(){this.$el.html(v.fillFromModel("power_up_detail",this.model));this.renderIcon();this.renderContent();return this};b.prototype.delegateEvents=function(){b.__super__.delegateEvents.apply(this,arguments);return this.iconView.delegateEvents()};b.prototype.renderIcon=function(){return this.$(".js-power-up-icon").empty().append(this.iconView.render().el)};b.prototype.powerUpEnabled=function(){var b;return b=this.powerUp.name,
0<=D.call(this.model.get("powerUps"),b)};b.prototype.renderContent=function(){this.renderNavBar();if(this.powerUpEnabled())switch(this.toolbarSelection){case "screenshots":return this.renderScreenshots();default:return this.renderSettings()}else return this.renderScreenshots()};b.prototype.renderNavBar=function(){var b,e;b=this.$(".js-power-up-detail-navbar").empty();if(this.powerUpEnabled())return e={screenshots:"screenshots"===this.toolbarSelection,settings:"settings"===this.toolbarSelection},b.html(v.fillFromModel("power_ups_detail_navbar",
this.model,e))};b.prototype.renderSectionContent=function(b){return this.$(".js-power-up-detail-content").empty().append(b)};b.prototype.renderScreenshots=function(){this.renderSectionContent(this.screenshotsView.render().el);return this.screenshotsView.delegateEvents()};b.prototype.renderSettings=function(){var b;b=this.powerUp.settingsView(this.model);this.renderSectionContent(b.render().el);return b.delegateEvents()};b.prototype.selectContentSection=function(b){l.stop(b);this.toolbarSelection=
$(b.target).attr("name");return this.renderContent()};return b}(A);vc=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="power-up-screenshots-wrapper";b.prototype.initialize=function(b){this.powerUp=b.powerUp};b.prototype.render=function(){this.$el.html(v.fill("power_up_detail_screenshots",{screenshots:this.powerUp.screenshots}));return this};return b}(A);Gb=function(c){function b(){this.renderEnabled=k(this.renderEnabled,this);this.render=
k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="power-up-icon js-power-up-detail";b.prototype.initialize=function(b){this.powerUp=b.powerUp;this.viewType=b.viewType;return this.listenTo(this.model,{"change:powerUps":this.renderEnabled})};b.prototype.events={"click .js-toggle-power-up:not(.enabled)":"enablePowerUp","click .js-toggle-power-up.enabled":"disablePowerUp"};b.prototype.render=function(){var b;b=_.clone(this.powerUp);"detail"===this.viewType?
b.powerUpDesc=v.fill(this.powerUp.aboutTemplate):(b.powerUpDesc=this.powerUp.description,b.isListView=!0);this.$el.html(v.fillFromModel("power_up_icon",this.model,b));this.renderEnabled();return this};b.prototype.enablePowerUp=function(){return this.model.addToSet("powerUps",this.powerUp.name)};b.prototype.disablePowerUp=function(){this.model.pull("powerUps",this.powerUp.name);if("calendar"===this.powerUp.name)return C.getCurrentBoardView().closeCalendarIfOpen()};b.prototype.renderEnabled=function(){var b,
e;b=(e=this.powerUp.name,0<=D.call(this.model.get("powerUps"),e));this.$(".js-toggle-btn").text(b?"Disable":"Enable").toggleClass("enabled",b).toggleClass("primary",!b);return this.$(".js-enabled-badge").toggleClass("hide",!b)};b.prototype.renderButtonState=function(){var b;b=this.powerUp.name;D.call(this.model.get("powerUps"),b);this.$(".js-toggle-btn").text(txt)};return b}(A);xc=function(c){function b(){this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);
b.prototype.className="fixed-width voting-prefs";b.prototype.initialize=function(){return this.listenTo(this.model,{"change:prefs":this.render})};b.prototype.events={"click .js-voting-select:not(.disabled)":"selectPerm","mouseenter .js-voting-select":"showSoftCheckMarks","mouseleave .js-voting-select":"clearSoftCheckMarks"};b.prototype.render=function(){var b,e,c;b=this.model.toJSON({prefs:!0,url:!0});e=this.model.getOrganization();b.hasOrg=null!=(null!=e?e.id:void 0);b.orgCanSee=b.hasOrg&&("public"===
(c=this.model.getPref("permissionLevel"))||"org"===c);b.premium=null!=e?e.isFeatureEnabled("observers"):void 0;b.voting_showObservers=(b.premium||b.voting_observers)&&b.hasOrg;null!=e&&e.owned()?(b.orgOwner=!0,b.orgName=e.get("displayName"),this.model.owned()||(b.setOrgNull=!0)):this.model.owned()||(b.noEditOrg=!0);this.$el.html(v.fillFromModel("power_ups_voting_prefs",this.model,b));b=this.$(".icon-check");e=this.$(".checked-option")[0];b=b.index(e);this.displayChecksAbove(b,"checked-option");return this};
b.prototype.selectPerm=function(b){l.stop(b);b=$(b.target).closest(".js-voting-select").attr("name");return this.model.setPref("voting",b)};b.prototype.showSoftCheckMarks=function(b){b=$(b.target).closest(".js-voting-select")[0];b=this.$(".js-voting-select").index(b);return this.displayChecksAbove(b,"soft-check")};b.prototype.clearSoftCheckMarks=function(){return this.displayChecksAbove(-1,"soft-check")};b.prototype.displayChecksAbove=function(b,e){return this.$(".js-voting-select").each(function(c,
f){var h;if(!$(f).hasClass("disabled")&&!$(f).children(".icon-check").hasClass("checked-option"))return h=$(f).children("div.icon-check"),c<=b?h.addClass(e):h.removeClass(e)})};return b}(A);tc=function(c){function b(){this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="fixed-width card-aging-prefs";b.prototype.initialize=function(){return this.listenTo(this.model,{"change:prefs":this.render})};b.prototype.events={"click .js-select:not(.disabled)":"selectMode"};
b.prototype.render=function(){var b;b=this.model.toJSON({prefs:!0,url:!0}).prefs;this.$el.html(v.fillFromModel("power_ups_card_aging_prefs",this.model,{aging_regular:"regular"===b.cardAging,aging_pirate:"pirate"===b.cardAging}));return this};b.prototype.selectMode=function(b){l.stop(b);b=$(b.target).closest(".js-select").attr("name");return this.model.setPref("cardAging",b)};return b}(A);sc=function(c){function b(){this.render=k(this.render,this);this.generateNewFeedURL=k(this.generateNewFeedURL,
this);this.generationComplete=k(this.generationComplete,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="fixed-width calendar-prefs";b.prototype.initialize=function(){this.generating=!1;return this.listenTo(this.model,{"change:prefs":this.render,"change:myPrefs.calendarKey":this.generationComplete})};b.prototype.events={"click .js-calendar-pref-feed:not(.disabled)":"selectFeedEnabled","click .js-calendar-feed-url:not(:disabled)":"focusInput","click .js-regen-calendar-url:not(.disabled)":"generateNewFeedURL"};
b.prototype.generationComplete=function(){this.generating=!1;return this.render()};b.prototype.generateNewFeedURL=function(b){l.stop(b);this.generating=!0;this.model.generateCalendarKey();return this.render()};b.prototype.render=function(){var b,e,c;c=this.model.toJSON({prefs:!0}).prefs;e=this.model.getPref("calendarKey");b="webcal://"+location.host+"/calendar/"+y.me().id+"/"+this.model.id+"/"+e+".ics";e||(this.generating=!0,this.model.generateCalendarKey());this.$el.html(v.fillFromModel("power_ups_calendar_prefs",
this.model,{calendar_feed_enabled:c.calendarFeedEnabled,calendar_feed_generated:null!=e&&!this.generating,calendar_feed_url:b}));return this};b.prototype.focusInput=function(b){return this.$(".js-calendar-feed-url").focus().select()};b.prototype.selectFeedEnabled=function(b){l.stop(b);b="enabled"===$(b.target).closest("a").attr("name");return this.model.setPref("calendarFeedEnabled",b)};return b}(A);var zd,k=function(c,b){return function(){return c.apply(b,arguments)}},D=[].indexOf||function(c){for(var b=
0,d=this.length;b<d;b++)if(b in this&&this[b]===c)return b;return-1};zd=function(){function c(){this.removeDropHover=k(this.removeDropHover,this);this.drop=k(this.drop,this);this.dragend=k(this.dragend,this);this.dragexit=k(this.dragexit,this);this.dragleave=k(this.dragleave,this);this.dragover=k(this.dragover,this);this.dragenter=k(this.dragenter,this);this._isDraggingFiles=k(this._isDraggingFiles,this)}c.prototype._files=function(b){var d,e,c;return null!=(d=null!=(e=b.originalEvent)?null!=(c=e.dataTransfer)?
c.files:void 0:void 0)?d:[]};c.prototype._urls=function(b,d){var e,c,f,h;e=null!=(c=b.originalEvent)?c.dataTransfer:void 0;return null!=(null!=e?e.items:void 0)?(e=_.filter(null!=(f=e.items)?f:[],function(b){return"text/uri-list"===b.type}),async.map(e,function(b,d){return b.getAsString(function(b){return d(null,b)})},function(b,e){return d(e)})):(null!=(h=0<=D.call(null!=e?e.types:void 0,"text/x-moz-url"))?h:1)?d([e.getData("text/plain")]):d([])};c.prototype._isDraggingFiles=function(b){var d,e,
c;b=null!=(d=b.originalEvent)?d.dataTransfer:void 0;return null!=b&&(null!=b.items&&_.any(b.items,function(b){return"file"===b.kind||"text/uri-list"===b.type})||null!=b.types&&_.any(b.types,function(b){return"application/x-moz-file"===b||"text/x-moz-url"===b})||0<(null!=(e=b.files)?e.length:void 0)&&("copy"===(c=b.effectAllowed)||"all"===c)||/mac/i.test(navigator.platform)&&/safari/i.test(navigator.userAgent))};c.prototype.dragenter=function(b){if(this._isDraggingFiles(b))return w.hide(),l.stop(b),
this.didEnter=!0,_.defer(function(b){return function(){return b.didEnter=!1}}(this)),this.model.editable()&&this.$el.addClass("drophover"),!1};c.prototype.dragover=function(b){var d;if(this._isDraggingFiles(b)){if(null!=(null!=(d=b.originalEvent)?d.dataTransfer:void 0))b.originalEvent.dataTransfer.dropEffect="copy";l.stop(b);return!1}};c.prototype.dragleave=function(b){if(this._isDraggingFiles(b))return l.stop(b),this.didEnter||this.removeDropHover(),!1};c.prototype.dragexit=function(b){if(this._isDraggingFiles(b))return l.stop(b),
!1};c.prototype.dragend=function(b){if(this._isDraggingFiles(b))return l.stop(b),this.removeDropHover(),!1};c.prototype.drop=function(b){var d,e,c,f;if(this._isDraggingFiles(b)&&this.model.editable()){l.stop(b);this.$el.removeClass("drophover");if(null!=(null!=(c=this.model)?c.upload:void 0))if(d=this._files(b),e=function(){var b,d,e;return null!=(b=y.me())&&b.isFeatureEnabled("largeAttachments")||null!=(d=this.model.getBoard())&&null!=(e=d.getOrganization())&&e.isFeatureEnabled("largeAttachments")?
O.show("File size exceeds 250MB limit","error","upload",5E3):O.show("File size exceeds 10MB limit","error","upload",5E3)},0<d.length){if(_.any(d,function(b){return!l.validCardUpload(b)})){e();return}async.forEachSeries(d,function(b){return function(d,e){return b.model.upload(d,e)}}(this),function(b){return function(c){O.hide("upload");1<d.length&&O.show("Finished!","info","AjaxQueueUpload",2E3);c&&e();return b.removeDropHover()}}(this));return}if(null!=(null!=(f=this.model)?f.uploadUrl:void 0))return this._urls(b,
function(b){return function(d){return async.forEachLimit(d,2,function(d,e){return _.any([siteDomain,attachmentsDomain,avatarDomain,logoDomain],function(b){return 0===d.indexOf(b)})?e():b.model.uploadUrl(d,"",e)},function(){})}}(this))}};c.prototype.removeDropHover=function(){return $(".drophover").removeClass("drophover")};return c}();var Tb,Db,ub,qc,Ad,Bd,k=function(c,b){return function(){return c.apply(b,arguments)}},F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,
e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c},D=[].indexOf||function(c){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===c)return b;return-1},G=[].slice;Db=function(c){function b(){this.selectAllCommenters=k(this.selectAllCommenters,this);this.selectAllBoardMembers=k(this.selectAllBoardMembers,this);this.selectAllCardMembers=k(this.selectAllCardMembers,this);this.insertMember=k(this.insertMember,this);this.fillMembers=k(this.fillMembers,this);
this.deselectMember=k(this.deselectMember,this);this.hoverItem=k(this.hoverItem,this);this.filterMentionables=k(this.filterMentionables,this);this.keyupEvent=k(this.keyupEvent,this);this.getMembers=k(this.getMembers,this);this.getTextInput=k(this.getTextInput,this);this.getCard=k(this.getCard,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Mention\u2026"};b.prototype.events={"mouseenter .js-select-member":"hoverItem",
"click .js-select-member":"insertMember","click .js-select-all-card-members":"selectAllCardMembers","mouseenter .js-select-all-card-members":"deselectMember","click .js-select-all-board-members":"selectAllBoardMembers","mouseenter .js-select-all-board-members":"deselectMember","click .js-select-all-commenters":"selectAllCommenters","mouseenter .js-select-all-commenters":"deselectMember",keydown:"keydownEvent"};b.prototype.render=function(){var b,e,c,f;this.getMembers();b={};this.options.input&&(b.input=
!0);this.options.button&&(b.button=!0);b.showAllCardMembers=0<(e=this.idCardMems.length)&&12>e;b.showAllBoardMembers=0<(c=this.idBoardMems.length)&&12>c;b.showAllCommenters=0<(f=this.idCommenters.length)&&12>f;this.$el.html(v.fill("popover_auto_mentioner",b));this.memsEl=this.$(".js-available-members");b.button&&(this.$(".js-select-all-card-members .mem-count").text("("+this.idCardMems.length+")"),this.$(".js-select-all-board-members .mem-count").text("("+this.idBoardMems.length+")"),this.$(".js-select-all-commenters .mem-count").text("("+
this.idCommenters.length+")"),(b.showAllCardMembers||b.showAllBoardMembers||b.showAllCommenters)&&this.$(".js-select-multiple-options").removeClass("hide"));this.options.button?this.fillMembers(this.idAllMembers):this.options.input&&this.filterMentionables();_.delay(function(b){return function(){return b.$(".js-filter-mentionables").keyup(b.keyupEvent)}}(this),20);return this};b.prototype.getCard=function(){return this.options.card};b.prototype.getTextInput=function(){return $(this.options.target)};
b.prototype.getMembers=function(){var b,e,c;c=y.myId();e=this.getCard();b=e.getBoard();this.idCardMems=_.without(e.getIdCardMems(),c);this.idBoardMems=_.without(b.getIdBoardMems(),c);this.idCommenters=_.without(e.getIdCommenters(),c);this.idAllMembers=_.uniq(this.idCardMems.concat(this.idBoardMems).concat(this.idCommenters))};b.prototype.clearMemberList=function(){return this.memsEl.empty()};b.prototype.keydownEvent=function(b){var e;if(9===(e=b.keyCode)||13===e)l.stop(b),this.memsEl.find(".item.selected:first .js-select-member").click()};
b.prototype.keyupEvent=function(b){var e,c;if(!(9===(e=b.keyCode)||13===e))if(c=b.keyCode,0<=D.call(nc,c))l.navMenuList(this.memsEl,".item",b.keyCode);else return this.filterMentionables()};b.prototype.filterMentionables=function(b){var e,c,f,h,m,k;this.clearMemberList();this.options.button?e=$(".js-filter-mentionables").val().trim().toLowerCase():this.options.input&&(e=this.getTextInput(),e=l.getWordFromCaret(e),e=e.str.substring(1).toLowerCase());h=RegExp("^"+l.escapeForRegex(e));b=this.idAllMembers;
this.idMatchMems=[];m=0;for(k=b.length;m<k;m++)c=b[m],f=l.getMemNameArray(this.modelCache,c),_.find(f,function(b){return h.test(b)})&&this.idMatchMems.push(c);if(this.options.input&&(1===this.idMatchMems.length&&e===this.Member.get(this.idMatchMems[0]).get("username")||0===this.idMatchMems.length))_.delay(function(){return w.hide()},5);else return this.fillMembers(this.idMatchMems),l.selectMenuItem(this.memsEl,".item",this.memsEl.find(".item").first())};b.prototype.hoverItem=function(b){b=$(b.target).closest(".item");
return l.selectMenuItem(this.memsEl,".item",b)};b.prototype.deselectMember=function(b){return this.memsEl.find(".item").removeClass("selected")};b.prototype._membersFromIds=function(b){return _.compact(_.map(b,function(b){return function(d){return b.Member.get(d)}}(this)))};b.prototype.fillMembers=function(b){var e,c,f;e=this._membersFromIds(b).slice(0,6);this.memsEl.empty();c=0;for(f=e.length;c<f;c++)b=e[c],this.appendSubview(this.subview(Ka,b),this.memsEl);this.$(".js-empty-list").toggleClass("hide",
0<e.length);w.calcPos()};b.prototype.insertMember=function(b){var e,c;l.stop(b);n("Card Detail","Mention Member Autocomplete","Insert");e=$(b.target).closest(".js-select-member").find(".username").text();b=this.getTextInput();this.options.button?l.insertSelection(b,"@"+e+" "):this.options.input&&(c=l.getWordFromCaret(b),l.insertSelection(b,"@"+e+" ",c.start,c.end));w.hide()};b.prototype.selectAllCardMembers=function(b){var e,c,f,h,m;l.stop(b);n("Card Detail","Mention Member Autocomplete","Insert - All Card Members");
b=this.getTextInput().focus();e="";m=this.idCardMems;f=0;for(h=m.length;f<h;f++)c=m[f],c=this.Member.get(c).get("username"),e+="@"+c+" ";l.insertSelection(b,e);w.hide()};b.prototype.selectAllBoardMembers=function(b){var e,c,f,h,m;l.stop(b);n("Card Detail","Mention Member Autocomplete","Insert - All Board Members");b=this.getTextInput().focus();e="";m=this.idBoardMems;f=0;for(h=m.length;f<h;f++)c=m[f],c=this.Member.get(c).get("username"),e+="@"+c+" ";l.insertSelection(b,e);w.hide()};b.prototype.selectAllCommenters=
function(b){var e,c,f,h,m;l.stop(b);n("Card Detail","Mention Member Autocomplete","Insert - All Commenters");b=this.getTextInput().focus();e="";m=this._membersFromIds(this.idCommenters);f=0;for(h=m.length;f<h;f++)c=m[f],c=c.get("username"),e+="@"+c+" ";l.insertSelection(b,e);w.hide()};return b}(A);qc=function(c){function b(){this.getTextInput=k(this.getTextInput,this);this.keydownEvent=k(this.keydownEvent,this);this.insertEmoji=k(this.insertEmoji,this);this.hoverItem=k(this.hoverItem,this);this.getEmojiSuggestions=
k(this.getEmojiSuggestions,this);this.clearEmojiList=k(this.clearEmojiList,this);this.fillEmojiList=k(this.fillEmojiList,this);this.fillDefaultEmojiList=k(this.fillDefaultEmojiList,this);this.keyupEvent=k(this.keyupEvent,this);this.filterEmoji=k(this.filterEmoji,this);this.getInput=k(this.getInput,this);this.render=k(this.render,this);this.updateCustomEmoji=k(this.updateCustomEmoji,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Emoji"};
b.prototype.events={"mouseenter .js-select-emoji":"hoverItem","click .js-select-emoji":"insertEmoji",keydown:"keydownEvent","click .js-upload-emoji":"openEmojiUploader"};b.prototype.initialize=function(){this._customEmoji={};if(y.me().isFeatureEnabled("customEmoji"))return null==y.me().get("customEmoji")&&M["for"](this.modelCache).loadMemberCustomEmoji(y.myId(),this.updateCustomEmoji),this.listenTo(y.me().customEmojiList,"change add remove reset",this.updateCustomEmoji),this.updateCustomEmoji()};
b.prototype.updateCustomEmoji=function(){var b,e,c,f;this._customEmoji={};f=y.me().customEmojiList.models;e=0;for(c=f.length;e<c;e++)b=f[e],this._customEmoji[b.get("name")]=b.get("url");return this.render()};b.prototype.render=function(){var b;b={};this.options.input&&(b.input=!0);this.options.button&&(b.button=!0);this.$el.html(v.fill("popover_emoji_completer",b));this.emojiList=this.$(".js-available-emoji");this.options.input&&this.filterEmoji(this.getInput());this.options.button&&this.fillDefaultEmojiList();
_.delay(function(b){return function(){return b.$(".js-filter-emoji").keyup(b.keyupEvent)}}(this),20);return this};b.prototype.getInput=function(){var b;if(this.options.button)return this.$(".js-filter-emoji").val().toLowerCase();b=this.getTextInput();return l.getWordFromCaret(b).str.substring(1).toLowerCase()};b.prototype.filterEmoji=function(b){this.clearEmojiList();if(this.fillEmojiList(b))return l.selectMenuItem(this.emojiList,".item",this.emojiList.find(".item").first())};b.prototype.keyupEvent=
function(b){var e,c;if(!(9===(e=b.keyCode)||13===e))if(38===(c=b.keyCode)||39===c||40===c||37===c)l.navMenuList(this.emojiList,".item",b.keyCode);else return b=this.getInput(),this.filterEmoji(b)};b.prototype.fillDefaultEmojiList=function(b){var e,c,f,h;b="thumbsup smile ballot_box_with_check heart clap facepalm".split(" ");c=0;for(f=b.length;c<f;c++)e=b[c],e={name:e,image:null!=(h=this._customEmoji[e])?h:Ra[e]},this.emojiList.append(v.fill("select_emoji",e));w.calcPos()};b.prototype.fillEmojiList=
function(b){var e,c,f,h;if(""===b)return this.fillDefaultEmojiList(),!1;c=b.replace(/\W+/g,"");this.$(".js-emoji-name").text(c);this.$(".js-upload-emoji").attr("data-emojiname",c);b=this.getEmojiSuggestions(b).slice(0,6);if(0<b.length){this.$(".js-results").removeClass("hide");this.$(".js-no-results").addClass("hide");c=0;for(f=b.length;c<f;c++)e=b[c],e={name:e,image:null!=(h=this._customEmoji[e])?h:Ra[e]},this.emojiList.append(v.fill("select_emoji",e));w.calcPos()}else this.$(".js-results").addClass("hide"),
this.$(".js-no-results").removeClass("hide");return 0!==b.length};b.prototype.clearEmojiList=function(){return this.emojiList.empty()};b.prototype.getEmojiSuggestions=function(b){var e,c,f;c=RegExp("^"+l.escapeForRegex(b));b=function(){var b;b=[];for(e in this._customEmoji)c.test(e)&&b.push(e);return b}.call(this);f=function(){var b;b=[];for(e in Ra)c.test(e)&&b.push(e);return b}();return _.uniq(G.call(b).concat(G.call(f))).sort()};b.prototype.hoverItem=function(b){b=$(b.target).closest(".item");
return l.selectMenuItem(this.emojiList,".item",b)};b.prototype.insertEmoji=function(b){var e,c;l.stop(b);e=$(b.target).closest(".js-select-emoji").find(".emoji-name").text();b=this.getTextInput();this.options.button?l.insertSelection(b,":"+(""+e).trim()+": "):this.options.input&&(c=l.getWordFromCaret(b),l.insertSelection(b,":"+(""+e).trim()+": ",c.start,c.end));w.hide();n("Emoji Select",e)};b.prototype.keydownEvent=function(b){var e;if(9===(e=b.keyCode)||13===e)return l.stop(b),this.emojiList.find(".item.selected:first .js-select-emoji").click()};
b.prototype.getTextInput=function(){return $(this.options.target)};b.prototype.openEmojiUploader=function(b){l.stop(b);b=this.$(b.target).attr("data-emojiname");w.pushView({keepEdits:!0,view:Ad,options:{model:y.me(),emojiName:b}});n("Card Detail View","Open Custom Emoji Uploader")};return b}(A);ub=function(){function c(){this.getEmojiCompleterView=k(this.getEmojiCompleterView,this);this.getAutoMentionerView=k(this.getAutoMentionerView,this);this.openAutoMentioner=k(this.openAutoMentioner,this);this.openEmojiCompleter=
k(this.openEmojiCompleter,this)}c.prototype.openEmojiCompleter=function(b){l.stop(b);return w.pushView({view:this.getEmojiCompleterView("button")})};c.prototype.openAutoMentioner=function(b){l.stop(b);w.pushView({view:this.getAutoMentionerView("button")});return n("Card Detail","Mention Autocomplete","Open Menu - With Click")};c.prototype.getAutoMentionerView=function(b){var d;d=this.getCard();return new Db({model:d,button:"button"===b,input:"input"===b,target:this.getTextInput(),card:d,modelCache:this.modelCache})};
c.prototype.getEmojiCompleterView=function(b){var d;d=this.getCard();return new qc({model:d,button:"button"===b,input:"input"===b,target:this.getTextInput(),card:d,modelCache:this.modelCache})};c.prototype.commentAddAttachment=function(b){l.stop(b);w.toggle({elem:$(b.target),keepEdits:!0,top:30,view:zc,options:{model:this.model,modelCache:this.modelCache}});n("Card Detail","Comment Box - Open Attachment Type Picker")};c.prototype.commentMentionMember=function(b){l.stop(b);w.toggle({elem:$(b.target),
keepEdits:!0,top:30,view:this.getAutoMentionerView("button")});n("Card Detail","Comment Box - Mention Members")};c.prototype.commentAddEmoji=function(b){l.stop(b);w.toggle({elem:$(b.target),keepEdits:!0,top:30,view:this.getEmojiCompleterView("button")});n("Card Detail","Comment Box - Add Emoji")};return c}();Tb=function(){function c(){}c.prototype.checkInsert=function(b){var d,e,c,f,h,m,k,u;if(w.isVisible&&!ba.isTouch()&&!(b.shiftKey&&(38===(e=b.keyCode)||40===e)||b.altKey&&(38===(f=b.keyCode)||40===
f))){if(27===b.keyCode)return w.hide(),!1;e=[{listClass:".js-available-members",itemClass:".js-select-member"},{listClass:".js-available-emoji",itemClass:".js-select-emoji"}];h=0;for(m=e.length;h<m;h++)if(d=e[h],f=d.listClass,c=d.itemClass,d=$(".pop-over").find(f),0<d.length){if(9===(k=b.keyCode)||13===k)return l.stop(b),d.find(".item:first").hasClass("selected")&&(this.keyAutoMention(b),d=$(".pop-over").find(f)),d.find(".item.selected:first "+c).first().click(),w.hide(),!1;if(38===(u=b.keyCode)||
40===u)return l.stop(b),l.navMenuList(d,".item",b.keyCode),!1}}};c.prototype.keyAutoMention=function(b){var d;if(!ba.isTouch()&&!(16===(d=b.keyCode)||18===d||17===d||38===d||40===d))if(b=l.getWordFromCaret(this.getTextInput()),/^@\S/.test(b.str.substring(0,2))){if(b=this.getAutoMentionerView("input"),w.load(b),0!==b.idMatchMems.length&&(w.show({elem:this.getMentionTarget(),top:35,view:b,preloaded:!0,keepEdits:!0}),!this.getTextInput().is(":focus")))return this.getTextInput().focus()}else if(/^:[^\s:]+$/.test(b.str)){if(b.str.substr(1),
b=this.getEmojiCompleterView("input"),w.load(b),w.show({elem:this.getEmojiTarget(),top:35,view:b,preloaded:!0,keepEdits:!0}),!this.getTextInput().is(":focus"))return this.getTextInput().focus()}else return _.delay(function(){return w.hide()},5)};return c}();Bd=na(ub,function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Options"};b.prototype.events=function(){return{"click .js-open-mention-selector":"openAutoMentioner","click .js-open-emoji-selector":"openEmojiCompleter",
"click .js-upload-emoji":"openEmojiUploader",keydown:"keydownEvent"}};b.prototype.render=function(){this.$el.html(v.fill("popover_insertion_menu",{customEmoji:y.me().isFeatureEnabled("customEmoji")}));return this};b.prototype.keydownEvent=function(b){var e,c;if(9===(e=b.keyCode)||13===e)return l.stop(b),this.emojiList.find(".item.selected:first .js-select-emoji").click();if(9===(c=b.keyCode)||13===c)return l.stop(b),this.memsEl.find(".item.selected:first .js-select-member").click()};b.prototype.openEmojiUploader=
function(b){l.stop(b);return w.pushView({view:y.me().getView(Ad)})};b.prototype.getCard=function(){return this.model.getCard()};b.prototype.getTextInput=function(){return this.options.parent.getTextInput()};return b}(A));Ad=function(c){function b(){this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Upload Emoji"};b.prototype.events=function(){return{"click .js-upload-emoji":"uploadEmoji","change .js-upload-emoji-file":"fileChange",
"input .js-emoji-name":"nameChange"}};b.prototype.initialize=function(){var b,e,c,f,h;this.hasGold=this.model.isFeatureEnabled("customEmoji");this.hasJPS=!1;f=this.model.organizationList.models;h=[];e=0;for(c=f.length;e<c&&!(b=f[e],this.hasJPS=b.isJPS());e++)h.push(void 0);return h};b.prototype.render=function(){var b;b=this.model.toJSON();b.emojiName=this.options.emojiName;b.hasGold=this.hasGold;b.hasJPS=this.hasJPS;b.canUpload=this.hasGold||this.hasJPS;this.$el.html(v.fill("popover_emoji_uploader",
b));this._validate();this.renderEmoji();return this};b.prototype.renderEmoji=function(){var b,e;b=this.$(".js-emoji-name").val()||"???";b=":"+b.toLowerCase().trim().replace(/\s+/g,"_")+":";this.$(".js-emoji-preview-name").text(b);this.$(".js-emoji-preview");b=null!=(e=this.$(".js-upload-emoji-file").prop("files"))?e[0]:void 0;/^image\/.*/.test(null!=b?b.type:void 0)?(e=new FileReader,e.onload=function(b){return function(d){b.$(".js-emoji-conversion").removeClass("hide");return b.$(".js-emoji-preview").attr("src",
d.target.result)}}(this),e.readAsDataURL(b)):this.$(".js-emoji-conversion").addClass("hide");return this};b.prototype.fileChange=function(b){var e,c,f,h,m;c=this.$(".js-emoji-name");e=this.$(".js-upload-emoji-file");""===c.val()&&($(b.target),b=null!=(h=e.prop("files"))?h[0]:void 0,null!=b?f=b.name:e.val()&&(f=null!=(m=/[^\/]+$/.exec(e.val()))?m[0]:void 0),null==f&&(f=""),f=f.split(".")[0],f=f.toLowerCase().replace(/[^a-z0-9_]/g,""),c.val(f),this.$(".js-emoji-name").focus().select());this.renderEmoji();
return this._validate()};b.prototype.nameChange=function(b){this.renderEmoji();return this._validate()};b.prototype._validate=function(b){var e,c,f;b=this.$(".js-emoji-name").val();e=this.$(".js-upload-emoji-file");c=/^[a-zA-Z0-9_\s]+$/.test(b);e=0<(null!=(f=e.prop("files"))?f.length:void 0)||e.val();f=c&&e&&(this.hasGold||this.hasJPS);this.$(".js-invalid-name").toggleClass("hide",c||""===b);return this.$(".js-upload-emoji").toggleClass("disabled",!f)};b.prototype.uploadEmoji=function(b){var e,c,
f,h;l.stop(b);if(!$(".js-upload-emoji").hasClass("disabled"))if(this.$(".error").addClass("hide"),e=this.$(".js-upload-emoji-file"),b=null!=(h=e.prop("files"))?h[0]:void 0,f=this.$(".js-emoji-name").val().trim().toLowerCase().replace(/\s+/g,"_"),!b&&e.val())l.uploadFile(e,function(){return w.hide()});else if(null!=b&&!l.validFileSize(b))O.flash("File Too Large","error");else if(null!=b&&f)return h=new FileReader,c=new FormData,c.append("token",y.myToken()),c.append("file",b),c.append("name",f),h.onload=
function(b){return function(d){return b.model.customEmojiList.create({url:d.target.result,name:f},{data:c,processData:!1,contentType:!1,success:function(){return w.hide()},error:function(){return this.$(".error").removeClass("hide")}})}}(this),h.readAsDataURL(b)};return b}(A);var Oa,Cf,Df,k=function(c,b){return function(){return c.apply(b,arguments)}},F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;
c.__super__=b.prototype;return c};Oa=new (function(){function c(){this._setRawStream=k(this._setRawStream,this);this.stream=null}c.prototype.supportsGetUserMedia=function(){return null!=navigator.getUserMedia||null!=navigator.webkitGetUserMedia};c.prototype.connected=function(){return null!=this.stream};c.prototype.getStream=function(){return this.stream};c.prototype.getError=function(){var b;return null!=(null!=(b=this.error)?b.PERMISSION_DENIED:void 0)?"Access Denied":this.error};c.prototype.connect=
function(b){var d,e;if(null!=this.stream)return b(null,this.stream);this.error=null;d=function(d){return function(e){d.error=e;d.stream=null;return b("Could not connect")}}(this);e={video:!0};if(null!=navigator.getUserMedia)return navigator.getUserMedia(e,function(d){return function(e){d._setRawStream(e);d.stream=e;return b(null,d.stream)}}(this),d);if(null!=navigator.webkitGetUserMedia)return navigator.webkitGetUserMedia(e,function(d){return function(e){d._setRawStream(e);d.stream=webkitURL.createObjectURL(e);
return b(null,d.stream)}}(this),d)};c.prototype._setRawStream=function(b){this.stop();return this.rawStream=b};c.prototype.stop=function(){var b;null!=(b=this.rawStream)&&"function"===typeof b.stop&&b.stop();return this.rawStream=this.stream=null};return c}());Df=function(c){function b(){this.snap=k(this.snap,this);this.connectCamera=k(this.connectCamera,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.events={"click .js-connect-camera":"connectCamera",
"click .js-snap":"snap"};b.prototype.willBePopped=function(){return Oa.stop()};b.prototype.getViewTitle=function(){return"Take a Photo"};b.prototype.render=function(){var b;b={error:Oa.getError(),connected:Oa.connected()};this.$el.html(v.fill("take_photo",b));Oa.connected()&&(b=this.$(".video")[0],b.src=Oa.getStream(),b.play());return this};b.prototype.connectCamera=function(){return Oa.connect(function(b){return function(e){return b.render()}}(this))};b.prototype.snap=function(){var b,e;e=this.$(".video")[0];
b=$("<canvas>").attr({width:640,height:480});b[0].getContext("2d").drawImage(e,0,0,640,480);e=this.model.getView(Cf);e.setImage(b[0].toDataURL("image/png"));Oa.stop();w.pushView({view:e});e.on("done",function(b){return function(d){w.popView();return b.trigger("done",d)}}(this));return e.on("back",function(b){return function(){b.render();return b.connectCamera()}}(this))};return b}(A);Cf=function(c){function b(){this.back=k(this.back,this);this.done=k(this.done,this);this.render=k(this.render,this);
return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Crop Photo"};b.prototype.events=function(){return{"click .js-done":"done","click .js-back":"back"}};b.prototype.setImage=function(b){return this.url=b};b.prototype.render=function(){this.forceIntoDom();this.$el.html(v.fill("crop_photo"));this.$(".crop-image").attr("src",this.url).css({"max-width":4096,"max-height":4096}).crop({width:270,height:270}).on("mousewheel",function(b){var e;e=$(this).data("crop");
return 0>b.originalEvent.wheelDelta?e.zoomIn():e.zoomOut()}).on("crop",function(b){return function(e){b.cropX=e.cropX;b.cropY=e.cropY;b.cropW=e.cropW;return b.cropH=e.cropH}}(this));return this};b.prototype.done=function(){var b,e;e=this.$(".crop-image")[0];b=$("<canvas>").attr({width:270,height:270});b[0].getContext("2d").drawImage(e,this.cropX,this.cropY,this.cropW,this.cropH,0,0,270,270);w.popView();return this.trigger("done",b[0].toDataURL("image/png"))};b.prototype.back=function(){w.popView();
return this.trigger("back")};return b}(A);var Ef,Cd,Ff,Gf,Dd,Hf,Ed,F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c},G=[].slice;Ef=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="calendar-wrapper";b.prototype.events={"click .js-week-view":"switchToWeekViewFromMonth","click .js-month-view":"switchToMonthViewFromWeek",
"click .js-left-arrow":"navigatePrevious","click .js-right-arrow":"navigateNext","click .js-today":"navigateToday","click .js-open-card-composer":"openComposer"};b.prototype.initialize=function(){this.startOfWeek=I.isUS?"sunday":"monday";this.monthView=this.subview(Gf,this.model);this.weekView=this.subview(Ed,this.model);this.composer=new If({model:this.model.composer});return this.model.viewState.clearSelectedCard()};b.prototype.render=function(b){var e;null==b&&(b=new Date);e="Sun Mon Tue Wed Thu Fri Sat".split(" ");
"monday"===this.startOfWeek&&(e=l.rotateArr(e,-1));this.$el.html(v.fill("calendar_toolbar",{days:e}));this.model.localStorageViewState.getCalendarMode()===Ed.prototype.VIEWSTATE_PREF_STR?this.showView(this.weekView,b):this.showView(this.monthView,b);return this};b.prototype.remove=function(){this.stopSubscriptions();this.model.viewState.clearSelectedCard();return b.__super__.remove.apply(this,arguments)};b.prototype.openComposer=function(b){var e;l.stop(b);e=$(b.target).closest(".day-cell, .day-column");
e=new Date(parseInt(e.attr("name")));this.composer.setDate(e);return w.show({clientx:b.clientX,clienty:b.clientY,top:35,view:this.composer,autoPosition:!0})};b.prototype.showView=function(b,e){this.currentSubView=b;this.$(".calendar-header").removeClass("week-view month-view").addClass(this.currentSubView.HEADER_CLASS_NAME);this.$(".calendar-content").empty().append(this.currentSubView.render(e).el);this.model.viewState.clearSelectedCard();this.model.localStorageViewState.updateCalendarMode(this.currentSubView.VIEWSTATE_PREF_STR);
this.currentSubView.delegateEvents();return this.currentSubView.updateRoute()};b.prototype.switchToWeekViewFromMonth=function(){this.showView(this.weekView,this.monthView.currentCenterWeek);return this.addedToDOM()};b.prototype.switchToMonthViewFromWeek=function(){this.model.localStorageViewState.updateCalendarMode("month");this.showView(this.monthView,this.weekView.currentWeek);return this.addedToDOM()};b.prototype.setSubscriptions=function(){this.stopSubscriptions();this.currentSubView===this.monthView?
this.monthView.setSubscriptions():($(qa).on("windowClassChange."+this.uniqueId(),function(b){return function(){var e;e=1<=arguments.length?G.call(arguments,0):[];return b.weekSmallWindowResizeCheck.apply(b,e)}}(this)),this.weekView.setSubscriptions())};b.prototype.stopSubscriptions=function(){this.weekView.stopSubscriptions();this.monthView.stopSubscriptions();return $(qa).off("."+this.uniqueId())};b.prototype.delegateEvents=function(){var d;b.__super__.delegateEvents.apply(this,arguments);return null!=
(d=this.currentSubView)?d.delegateEvents():void 0};b.prototype.addedToDOM=function(){this.setSubscriptions();return this.currentSubView.addedToDOM()};b.prototype.navigateToday=function(){return this.currentSubView.navigateToday()};b.prototype.navigatePrevious=function(){return this.currentSubView.navigatePrevious()};b.prototype.navigateNext=function(){return this.currentSubView.navigateNext()};b.prototype.weekSmallWindowResizeCheck=function(b,e){if("small-window"===e.newClass&&this.currentSubView===
this.weekView)return this.switchToMonthViewFromWeek()};return b}(A);Dd=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="fancy-scrollbar calendar-drag-area";b.prototype.SCROLL_ANIMATION_TIME=400;b.prototype.initialize=function(){var b;b=this.listenToListChanges.bind(this);this.model.listList.each(b);return this.listenTo(this.model.listList,"add remove",b)};b.prototype.addedToDOM=function(){if(this.model.editable())return _.defer(function(){return Q.refreshCalendarCardSortable()})};
b.prototype.delegateEvents=function(){var d,e,c,f,h;b.__super__.delegateEvents.apply(this,arguments);f=this.subviewsOfType(this.DAY_VIEW_TYPE);h=[];e=0;for(c=f.length;e<c;e++)d=f[e],h.push(d.delegateEvents());return h};b.prototype.setSubscriptions=function(){var b,e,c,f,h;f=this.cardSubviews();h=[];e=0;for(c=f.length;e<c;e++)b=f[e],h.push(b.listenToActiveCardChanges());return h};b.prototype.stopSubscriptions=function(){var b,e,c,f,h;f=this.cardSubviews();h=[];e=0;for(c=f.length;e<c;e++)b=f[e],h.push(b.stopListeningToActiveCardChanges());
return h};b.prototype.listenToListChanges=function(b){this.listenTo(b.cardList,"add remove",function(b){if(0<this.cardsWithDueDates([b]).length)return b=new Date(b.get("due")),this.renderCardsOnDates([b])});this.listenTo(b.cardList,"change:due",function(b,d){var c,h,m;m=b.previousAttributes().due;c=b.get("due");h=new Date(null!=m?m:null);d=new Date(null!=c?c:null);if(!h.isSameDay(d)){var k,l;k=[m,c];l=[];h=0;for(m=k.length;h<m;h++)c=k[h],null!=c&&l.push(new Date(c));return this.renderCardsOnDates(l)}});
return this.listenTo(b.cardList,"reset",function(b,d){var c,h,m,k;m=b.models;k=d.previousModels;h=_.difference(m,k).concat(_.difference(k,m));return this.renderCardsOnDates(function(){var b,d,e;e=[];b=0;for(d=h.length;b<d;b++)c=h[b],e.push(new Date(c.get("due")));return e}())})};b.prototype.navigateToday=function(){return this.scrollToDay(this.today,this.SCROLL_ANIMATION_TIME)};b.prototype.getCardView=function(b){return this.subview(Fd,b,b.cid)};b.prototype.cardsWithDueDates=function(b){return _.filter(b,
function(b){return null!=b.get("due")})};b.prototype.cardsDueOnDate=function(b,e){b=this.cardsWithDueDates(b);return _.filter(b,function(b){return e.isSameDay(new Date(b.get("due")))})};b.prototype.cardSubviews=function(){var b,e;e=this.subviewsOfType(this.DAY_VIEW_TYPE);return _.flatten(function(){var c,f,h;h=[];c=0;for(f=e.length;c<f;c++)b=e[c],h.push(b.subviewsOfType(Fd));return h}())};b.prototype.calculateFirstAndLastWeeksFromDOM=function(){var b;b=this.$(".week");this.firstRenderedWeek=new Date(parseInt(b.first().attr("name")));
this.lastRenderedWeek=new Date(parseInt(b.last().attr("name")));return this.lastRenderedSaturday=I.getEndOfWeek(this.lastRenderedWeek)};b.prototype.renderCardsOnDates=function(b){var e,c,f,h,m;if(0<this.$(".week").length){m=[];f=0;for(h=b.length;f<h;f++)c=b[f],this.firstRenderedWeek<c&&c<this.lastRenderedSaturday&&(e=this.cardsDueOnDate(this.model.openCards(),c),c=I.getMidnightInt(c),c=this.existingSubview(this.DAY_VIEW_TYPE,this.model,c),c.cardsDue=e,m.push(c.renderCardsAndHeaders()));return m}};
b.prototype.renderDayViews=function(b){var e,c,f,h;h=[];c=0;for(f=b.length;c<f;c++)e=b[c],h.push(this.getDayView(e).render().el);return h};b.prototype.getDayView=function(b,e){var c;c={day:b,cardsDueOnDate:this.cardsDueOnDate(this.model.openCards(),b)};return this.subview(this.DAY_VIEW_TYPE,this.model,_.extend({data:c,getCardView:this.getCardView.bind(this)},e),I.getMidnightInt(b))};b.prototype.weekRowEl=function(b){var e,c;c=this.renderDayViews(I.getDaysOfWeek(b));e=$(document.createElement(this.WEEK_WRAPPER_ELEMENT));
e.attr("name",I.getMidnightInt(I.getStartOfWeek(b))).addClass("week").append(c);return e};return b}(A);Ed=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className=l.extendParentClassName("calendar-week");b.prototype.WEEK_WRAPPER_ELEMENT="div";b.prototype.VIEWSTATE_PREF_STR="week";b.prototype.HEADER_CLASS_NAME="week-view";b.prototype.WEEKS_KEPT_IN_DOM=5;b.prototype.initialize=function(){b.__super__.initialize.apply(this,arguments);this.DAY_VIEW_TYPE=
Hf;this.today=new Date;return this.scrollLock=!1};b.prototype.render=function(b){null==b&&(b=this.today);this.$el.html(v.fill("calendar_week"));this.currentWeek=I.getStartOfWeek(b);this.appendWeekEl(this.currentWeek);this.prependWeekEl((new Date(this.currentWeek)).addDays(-7));this.appendWeekEl((new Date(this.currentWeek)).addDays(7));return this};b.prototype.addedToDOM=function(){b.__super__.addedToDOM.apply(this,arguments);this.weekWidth=$(".calendar-content").outerWidth();this.resizeWeekCanvas();
this.scrollToDay(this.currentWeek);return this.updateToolbar()};b.prototype.updateRoute=function(){var b,e,c;b=I.dateToObj(this.currentWeek);c=b.year;e=b.month;b=b.day;e=l.lpad(e,2,"0");b=l.lpad(b,2,"0");return C.setBoardLocation(this.model.id,"calendar",[c,e,b],{replace:!0})};b.prototype.setSubscriptions=function(){b.__super__.setSubscriptions.apply(this,arguments);$(window).on("resize."+this.uniqueId(),function(b){return function(){return b.resizeCheck()}}(this));return $(".board-widgets").on("transitionend."+
this.uniqueId()+" webkitTransitionEnd."+this.uniqueId(),function(b){return function(){return b.resizeCheck()}}(this))};b.prototype.stopSubscriptions=function(){b.__super__.stopSubscriptions.apply(this,arguments);$(window).off("."+this.uniqueId());return $(".board-widgets").off("."+this.uniqueId())};b.prototype.resizeCheck=function(){this.weekWidth=$(".calendar-content").outerWidth();this.resizeWeekCanvas();return this.scrollToDay(this.currentWeek)};b.prototype.resizeWeekCanvas=function(){var b;b=
this.$(".week").length;$(".week-horizontal-canvas").width(this.weekWidth*b);return $(".week").width(this.weekWidth)};b.prototype.updateToolbar=function(){var b,e;e=I.getEndOfWeek(this.currentWeek);b=I.isUS?"MMMM dd, yyyy":"dd MMMM, yyyy";b=""+this.currentWeek.toString(b)+" - "+e.toString(b);$(".js-calendar-header").text(b);b=$(".today-button");e=this.currentWeek.isSameDay(I.getStartOfWeek(this.today));return b.toggleClass("on-today",e)};b.prototype.appendWeekEl=function(b){this.$(".week-horizontal-canvas").append(this.weekRowEl(b));
this.resizeWeekCanvas();b=this.$(".week");b.length>this.WEEKS_KEPT_IN_DOM&&(b.first().remove(),this.scrollLeft(-1*this.weekWidth));return this.calculateFirstAndLastWeeksFromDOM()};b.prototype.prependWeekEl=function(b){this.$(".week-horizontal-canvas").prepend(this.weekRowEl(b));b=this.$(".week");b.length>this.WEEKS_KEPT_IN_DOM&&b.last().remove();this.resizeWeekCanvas();this.scrollLeft(this.weekWidth);return this.calculateFirstAndLastWeeksFromDOM()};b.prototype.navigatePrevious=function(){return this.navigateWeek({backwards:!0})};
b.prototype.navigateNext=function(){return this.navigateWeek({backwards:!1})};b.prototype.navigateWeek=function(b){var e,c;b=(null!=b?b:{}).backwards;if(!this.scrollLock)return c=b?-7:7,e=b?this.$(".week").first():this.$(".week").last(),this.currentWeek.addDays(c),e=e.attr("name"),e=new Date(parseInt(e)),this.currentWeek.isSameDay(e)&&(b?this.prependWeekEl((new Date(this.currentWeek)).addDays(-7)):this.appendWeekEl((new Date(this.currentWeek)).addDays(7)),this.model.editable()&&_.defer(function(){return Q.refreshCalendarCardSortable()})),
this.scrollToDay(this.currentWeek,this.SCROLL_ANIMATION_TIME)};b.prototype.scrollLeft=function(b,e){var c;c=$(".calendar-week").prop("scrollLeft");return this.scrollLeftTo(c+b,e)};b.prototype.scrollLeftTo=function(b,e){var c;c=$(".calendar-week");return e?(this.scrollLock=!0,c.animate({scrollLeft:b},{duration:e,complete:function(b){return function(){return b.completeAnimatedScroll()}}(this)})):c.scrollLeft(b)};b.prototype.scrollToDay=function(b,e){var c,f;this.firstRenderedWeek<b&&b<this.lastRenderedSaturday?
(f=I.getMidnightInt(I.getStartOfWeek(b)),c=this.$(".week[name='"+f+"']"),c=c.prop("offsetLeft"),this.scrollLeftTo(c,e),this.currentWeek=new Date(f),this.updateToolbar()):(this.render(b),this.addedToDOM(),this.delegateEvents());return this.updateRoute()};b.prototype.completeAnimatedScroll=function(){return this.scrollLock=!1};return b}(Dd);Gf=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className=l.extendParentClassName("calendar-month");b.prototype.WEEK_WRAPPER_ELEMENT=
"tr";b.prototype.VIEWSTATE_PREF_STR="month";b.prototype.HEADER_CLASS_NAME="month-view";b.prototype.WEEKS_FROM_EDGE_BEFORE_RENDER_NEW_DAYS=5;b.prototype.WEEKS_TO_RENDER_UPON_SCROLL_THRESHHOLD=5;b.prototype.MINIMUM_WEEKS_KEPT_IN_DOM=20;b.prototype.initialize=function(){b.__super__.initialize.apply(this,arguments);this.DAY_VIEW_TYPE=Ff;this.today=new Date;this.currentMonthCells=[];this.scrollLock=!1;this.weeksKeptInDOM=this.MINIMUM_WEEKS_KEPT_IN_DOM;return this.makeDebouncedMethods("shadeDaysUpdateHeader")};
b.prototype.render=function(b){null==b&&(b=this.today);this.$el.html(v.fill("calendar_month"));this.renderBaseWeek(b);this.currentCenterWeek=b;this.currentMonth=I.getFirstOfMonth(b);b=Math.floor(this.weeksKeptInDOM/2);this.renderWeeks(b);this.renderWeeks(-1*b);this.shadeDays();this.setSubscriptions();return this};b.prototype.getDayView=function(d,e){return b.__super__.getDayView.call(this,d,_.extend({scrollIntoView:this.scrollIntoView.bind(this)},e))};b.prototype.addedToDOM=function(){b.__super__.addedToDOM.apply(this,
arguments);this.calculateVariables();this.windowResizeCheck();this.updateHeader();return this.scrollToDay(this.currentCenterWeek)};b.prototype.updateRoute=function(){var b,e;b=I.dateToObj(this.currentMonth);e=b.year;b=b.month;b=l.lpad(b,2,"0");return C.setBoardLocation(this.model.id,"calendar",[e,b],{replace:!0})};b.prototype.setSubscriptions=function(){this.stopSubscriptions();b.__super__.setSubscriptions.apply(this,arguments);$(qa).on("windowClassChange."+this.uniqueId(),function(b){return function(){return b.windowClassChangeCheck()}}(this));
$(window).on("resize."+this.uniqueId(),function(b){return function(){return b.windowResizeCheck()}}(this));return $(".calendar-month").on("scroll."+this.uniqueId()+" ",function(b){return function(){return b.scrollCheck()}}(this))};b.prototype.stopSubscriptions=function(){b.__super__.stopSubscriptions.apply(this,arguments);$(qa).off("."+this.uniqueId());$(window).off("."+this.uniqueId());return $(".calendar-month").off("."+this.uniqueId())};b.prototype.windowClassChangeCheck=function(b,e){var c;if("small-window"===
e.newClass||"small-window"===e.oldClass)return $(".calendar-day.active").removeClass("active"),c=new Date(this.currentCenterWeek),this.calculateVariables(),this.windowResizeCheck(),this.scrollCheck(),this.scrollToDay(c)};b.prototype.calculateVariables=function(){var b;this.tableSpacing=null!=(b=parseInt(this.$(".calendar-table").css("border-spacing")))?b:5;return this.dayCellHeight=this.$(".day-cell").prop("clientHeight")+this.tableSpacing};b.prototype.windowResizeCheck=function(){var b,e,c,f;f=$(window).outerHeight();
c=$("#header").outerHeight();b=$("#board-header").outerHeight();e=$(".calendar-header").outerHeight();this.calendarContentHeight=f-(c+b+e);b=Math.ceil(this.calendarContentHeight/this.dayCellHeight);this.weeksKeptInDOM=Math.max(5*b,this.MINIMUM_WEEKS_KEPT_IN_DOM)};b.prototype.updateHeader=function(){var b;b=""+this.currentMonth.toString("MMMM yyyy");return $(".js-calendar-header").text(b)};b.prototype.renderBaseWeek=function(b){b=this.weekRowEl(b);$(".calendar-month").off("."+this.uniqueId());this.$(".calendar-table").append(b);
return this.calculateFirstAndLastWeeksFromDOM()};b.prototype.renderWeeks=function(b){var e;0<b&&(e=(new Date(this.lastRenderedSaturday)).addDays(7*b),this.renderUpToDay(e));if(0>b)return b=(new Date(this.firstRenderedWeek)).addDays(7*b),this.renderUpToDay(b)};b.prototype.renderUpToDay=function(b){var e,c,f;e=this.$(".calendar-table");c=I.getEndOfWeek(b);for(f=[];this.lastRenderedSaturday<c;)this.lastRenderedSaturday.addDays(7),f.push(this.weekRowEl(this.lastRenderedSaturday));e.append(f);b=I.getStartOfWeek(b);
for(c=[];this.firstRenderedWeek>b;)this.firstRenderedWeek.addDays(-7),c.unshift(this.weekRowEl(this.firstRenderedWeek));e.prepend(c);this.scroll(this.dayCellHeight*c.length);this.deleteExcessWeeks();return this.calculateFirstAndLastWeeksFromDOM()};b.prototype.deleteExcessWeeks=function(){var b,e,c,f,h,m;b=$(".week");if(b.length>this.weeksKeptInDOM){e=this.$(".calendar-table").outerHeight();c=$(".calendar-month").prop("scrollTop");if(c<e/2){m=[];c=e=f=b.length-1;for(h=this.weeksKeptInDOM;f<=h?e<=h:
e>=h;c=f<=h?++e:--e)m.push($(b[c]).remove());return m}e=b.length-this.weeksKeptInDOM;this.scroll(-1*this.dayCellHeight*e);h=[];for(c=f=0;0<=e?f<e:f>e;c=0<=e?++f:--f)h.push($(b[c]).remove());return h}};b.prototype.scrollToDay=function(b,e){var c,f,h;if(!this.scrollLock)return f=this.calendarContentHeight/2/this.dayCellHeight,h=I.getStartOfWeek(b),c=(new Date(h)).addWeeks(-1*Math.ceil(f)),h=(new Date(h)).addWeeks(Math.ceil(f)),this.firstRenderedWeek<=c&&this.lastRenderedWeek>=h?(c=I.getStartOfWeek(b).addWeeks(-1*
Math.floor(f)),c=I.getMidnightInt(c),c=this.$("[name='"+c+"']"),c=c.prop("offsetTop"),this.scrollTo(c-this.tableSpacing+1,e)):(this.render(b),this.addedToDOM(),this.delegateEvents()),this.updateRoute()};b.prototype.completeAnimatedScroll=function(){return this.enableRenderNewDays()};b.prototype.scrollIntoView=function(b){var e,c,f;f=b.top;b=f+b.height;e=$(".calendar-month");c=e.scrollTop();e=c+e.height();if(f<c)return this.scroll(f-c-this.tableSpacing+1,this.SCROLL_ANIMATION_TIME);if(b>e)return this.scroll(b-
e+this.tableSpacing+1,this.SCROLL_ANIMATION_TIME)};b.prototype.scroll=function(b,e){var c;c=$(".calendar-month").prop("scrollTop");return this.scrollTo(c+b,e)};b.prototype.scrollTo=function(b,e){var c;c=$(".calendar-month");return e?(this.scrollLock=!0,c.animate({scrollTop:b},{duration:e,complete:function(b){return function(){return b.completeAnimatedScroll()}}(this)})):c.scrollTop(b)};b.prototype.navigatePrevious=function(){return this.scrollMonth(-1)};b.prototype.navigateNext=function(){return this.scrollMonth(1)};
b.prototype.scrollMonth=function(b){if(!this.scrollLock)return b=(new Date(this.currentMonth)).addMonths(b),b=I.getFirstOfMonth(b).addDays(15),this.scrollToDay(b,this.SCROLL_ANIMATION_TIME)};b.prototype.enableRenderNewDays=function(){this.checkRenderDays();return this.scrollLock=!1};b.prototype.scrollCheck=function(){var b,e,c,f;w.hide();b=$(".calendar-month");e=b.outerHeight();b=b.prop("scrollTop");this.scrollLock||this.checkRenderDays();e/=2;c=(new Date(this.firstRenderedWeek)).addWeeks(Math.floor((b+
e)/this.dayCellHeight));if(!this.currentCenterWeek.isSameDay(c)){this.currentCenterWeek=c;c=I.getEndOfWeek(this.currentCenterWeek);if(this.currentMonth.getMonth()!==this.currentCenterWeek.getMonth()||this.currentMonth.getMonth()!==c)c.getMonth()===this.today.getMonth()?this.currentMonth=I.getFirstOfMonth(c):this.currentMonth=I.getFirstOfMonth(this.currentCenterWeek),this.shadeDaysUpdateHeaderDebounced();this.updateRoute()}c=I.getMidnightInt(this.today);c=this.$("[name='"+c+"']").prop("offsetTop");
b=c<(f=e+b)&&f<c+this.dayCellHeight;return $(".today-button").toggleClass("on-today",b)};b.prototype.shadeDaysUpdateHeader=function(){this.updateHeader();return this.shadeDays()};b.prototype.checkRenderDays=function(){var b,e,c,f;b=$(".calendar-month");e=b.outerHeight();b=b.prop("scrollTop");e=this.$(".calendar-table").outerHeight()-e-b;f=this.dayCellHeight*this.WEEKS_FROM_EDGE_BEFORE_RENDER_NEW_DAYS;e<f&&(c=!0,this.renderWeeks(this.WEEKS_TO_RENDER_UPON_SCROLL_THRESHHOLD));b<f&&(c=!0,this.renderWeeks(-1*
this.WEEKS_TO_RENDER_UPON_SCROLL_THRESHHOLD));if(c&&this.model.editable())return _.defer(function(){return Q.refreshCalendarCardSortable()})};b.prototype.shadeDays=function(){var b,e,c,f,h;b=this.$(".day-cell");h=this.currentMonthCells;c=0;for(f=h.length;c<f;c++)e=h[c],$(e).removeClass("current-month");f=this.currentMonthCells=_.filter(b,this.cellInCurrentMonth,this);h=[];b=0;for(c=f.length;b<c;b++)e=f[b],h.push($(e).addClass("current-month"));return h};b.prototype.cellInCurrentMonth=function(b){b=
parseInt($(b).attr("name"));return(new Date(b)).getMonth()===this.currentMonth.getMonth()};return b}(Dd);Cd=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.events={sortreceive:"sortReceive",sortstop:"sortStop","click .js-expand-day:not(.active)":"expand","click .js-toggle-day":"clickToggleDay"};b.prototype.initialize=function(b){this.data=b.data;this.getCardView=b.getCardView;this.$el.attr("name",I.getMidnightInt(this.data.day));return this.cardsDue=
this.data.cardsDueOnDate};b.prototype.remove=function(){delete this.getCardView;return b.__super__.remove.apply(this,arguments)};b.prototype.render=function(b){var e,c;null==b&&(b={});e=(new Date(this.data.day)).moveToLastDayOfMonth();e=1===this.data.day.getDate()||this.data.day.isSameDay(e);c=this.data.day.toString("MMM");e={date:this.data.day.getDate(),month:e?c:"",fullMonth:this.data.day.toString("MMMM"),isToday:(new Date).isSameDay(this.data.day)};_.extend(b,e);this.$el.html(v.fill("calendar_day",
b,{editable:this.model.editable()}));this.renderCardsAndHeaders();return this};b.prototype.renderCardsAndHeaders=function(){this.updateHeader();return this.renderCardsAndListHeaders()};b.prototype.cardListMap=function(){return _.groupBy(this.cardsDue,function(b){return b.getList().id})};b.prototype.updateHeader=function(){var b;b=this.cardsDue.length;this.$(".day-number-header, .day-cards-header").empty();if(0<b)return this.$(".day-number-header").text(b),this.$(".day-cards-header").text(l.formatNoun(b,
"card"))};b.prototype.renderCardsAndListHeaders=function(){var b,e,c,f,h,m,k,l,x,n;b=this.$(".calendar-day-list");b.empty();m=[];n=this.cardListMap();for(k in n)if(F.call(n,k)){h=n[k];e={listID:k,listName:this.model.getList(k).get("name")};e=v.fill("calendar_day_list_header",e);m.push(e);l=0;for(x=h.length;l<x;l++)e=h[l],c=this.getCardView(e),c.$el.hasClass("ui-sortable-helper")||(f=c.render().el,$(f).attr("name",e.cid),c.delegateEvents(),m.push(f))}b.append(m);if(this.model.editable())return Q.refreshIfInitialized(this.$(".js-calendar-sortable"))};
b.prototype.sortReceive=function(b,e){if(this.validCardDragDrop(e.position.left,e.position.top))return e.item.trigger("moveToCalendarDay",[e,this]);$(e.sender).sortable("cancel");return Q.refreshIfInitialized(this.$(".js-calendar-sortable"))};b.prototype.sortStop=function(b,e){return e.item.trigger("moveInCalendarDay",[e,this])};b.prototype.clickToggleDay=function(b){return this.$(".calendar-day").hasClass("active")?this.contract(b):this.expand(b)};b.prototype.expand=function(b){l.stop(b);if(!Q.sorting)return $(".calendar-day.active").removeClass("active"),
this.$(".calendar-day").addClass("active"),w.hide()};b.prototype.contract=function(b){l.stop(b);this.$(".calendar-day").removeClass("active");return w.hide()};return b}(A);Ff=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.tagName="td";b.prototype.className="day-cell";b.prototype.initialize=function(d){this.scrollIntoView=d.scrollIntoView;return b.__super__.initialize.apply(this,arguments)};b.prototype.render=function(){return b.__super__.render.call(this,
{monthView:!0})};b.prototype.expand=function(){var d;b.__super__.expand.apply(this,arguments);d=this.$(".calendar-day");return this.scrollIntoView({top:this.$el.prop("offsetTop"),height:d.outerHeight()})};b.prototype.validCardDragDrop=function(b,e){return 0<=e&&e<=$(".calendar-content").outerHeight()};return b}(Cd);Hf=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="day-column";b.prototype.validCardDragDrop=function(b,e){return 0<=b&&b<=$(".calendar-content").outerWidth()};
return b}(Cd);var S;S=l.queued(function(c,b){var d,e;null==c.data&&(c.data={});c.data.token=y.myToken();if(null==(d=c.data).invitationTokens)d.invitationTokens=l.invitationTokens().join(",");if(c.background){try{ta.send(c)}catch(g){throw d=g,b(),d;}return b()}e=c.complete;null==c.modelCache&&(c.modelCache=C.getCurrentModelCache());c.complete=function(){null!=e&&e.apply(this,arguments);return b()};try{return ta.ajax(c)}catch(f){throw d=f,b(),d;}},3);var Gd,Jf,Hd,D=[].indexOf||function(c){for(var b=
0,d=this.length;b<d;b++)if(b in this&&this[b]===c)return b;return-1},k=function(c,b){return function(){return c.apply(b,arguments)}},F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c};Gd=function(){function c(){}c.prototype.events={"click .js-change-cc":"changeCreditCard","click .js-change-billing-contact":"changeBillingContact","click .js-switch-to-yearly-billing":"switchToYearlyBilling",
"click .js-start-cancel":"startCancel","click .js-cancel-cancel":"cancelCancel","click .js-cancel":"cancel",'change input[type="radio"]':"showFeedbackTextarea","click .js-reactivate-monthly":"reactivateMonthly","click .js-reactivate-yearly":"reactivateYearly","click .js-renew":"renew","click .js-resolve-billing-issue":"changeCCProblem","click .js-enter-new-credit-card":"changeCCDenied"};c.prototype.setup=function(){var b;this.pollingStart=new Date;this.getBillingStatement();this.monthlyProductNumber=
this.features.productShortNames[this.productPrefix+"Monthly"];this.yearlyProductNumber=this.features.productShortNames[this.productPrefix+"Yearly"];if(ea.processing(null!=(b=this.model.get("paidAccount"))?b.standing:void 0))return this.getPaidAccount()};c.prototype.processBillingStatement=function(b){var d,e,c,f,h;d=0;h=[];c=0;for(f=b.length;c<f;c++)e=b[c],h.push(this.formatBillingStatement(e,d+=e.amount));return h};c.prototype.formatBillingStatement=function(b,d){b.date=I.toShortString(new Date(b.date));
b.balance=d.toFixed(2);if(0===b.item.indexOf("Credit."))return b["return"]=Math.abs(b.amount).toFixed(2);if(0===b.item.indexOf("Refund to your"))return b.refund=Math.abs(b.amount).toFixed(2);b.credit=0<b.amount?b.amount.toFixed(2):"";return b.debit=0>b.amount?(-b.amount).toFixed(2):""};c.prototype.getBillingStatement=function(){return S({url:""+this.model.urlRoot+"/"+this.model.id+"/paidAccount/statement",background:!0,success:function(b){return function(d){var e,c,f;if(null!=b.model.attributes&&
(b.billingStatementData={statement:null!=(c=null!=d?d.statement:void 0)?c:[],balance:null!=(f=null!=d?d.balance:void 0)?f:0,statementUrl:null!=d?d.statementUrl:void 0},b.processBillingStatement(b.billingStatementData.statement),b.billingStatementData.statement=function(){var b,d,c,f;c=this.billingStatementData.statement;f=[];b=0;for(d=c.length;b<d;b++)e=c[b],0!==e.amount&&f.push(e);return f}.call(b),b.billingStatementData.statement.reverse(),b.renderBillingStatement(),new Date<l.dateAfter({date:b.pollingStart,
minutes:10})))return b.setTimeout(_.bind(b.getBillingStatement,b),l.getMs({seconds:5}))}}(this),error:function(b){return function(d){return b.$("#billing-statement").text(d.responseText)}}(this)})};c.prototype.getPaidAccount=function(){return this.paidAccountLoader(function(b){return function(d,e){var c;if(!(d||null==e))return ea.processing(null!=(c=b.model.get("paidAccount"))?c.standing:void 0)&&new Date<l.dateAfter({date:b.pollingStart,minutes:1})?b.setTimeout(_.bind(b.getPaidAccount,b),1E3):b.renderMainContent}}(this))};
c.prototype._urlBase=function(b){var d;return"/"+(null!=(d=this.model.get("name"))?d:this.model.get("username"))};c.prototype.renderMainContent=function(b){var d,e,c,f,h,m,k,u,x,n,s,B,w,y,A,C,D;null==b&&(b=!1);e=this.model.toJSON();e.urlBase=this._urlBase();e.changeCardUrl=this.changeCardUrl;e.productName=this.productName;e.productIconClass=this.productIconClass;e.canSwitchToYearly=!1;_.extend(e,this.pricing);k=e.paidAccount;for(d in k)c=k[d],e["paidAccount_"+d]=c;if(null!=(null!=(u=e.paidAccount)?
null!=(n=u.products)?n[0]:void 0:void 0))e.nextBillingDate=I.toLongDateString(null!=(s=e.paidAccount.billingDates)?s[e.paidAccount.products[0]]:void 0);e.billableMemberCount=this.model.get("billableMemberCount");d=null!=(B=e.paidAccount)?null!=(w=B.products)?w[0]:void 0:void 0;e.monthlyPrice=this.features.getPrice(this.pricing.monthlyProduct);e.yearlyPrice=this.features.getPrice(this.pricing.yearlyProduct);e.yearlyDiscount=this.features.getYearlyDiscount(this.pricing.yearlyProduct,d);e.yearlyIsDiscount=
!/^-/.test(e.yearlyDiscount);e.billedMonthly=this.features.isMonthly(d);e.billedYearly=!e.billedMonthly;e.price=this.features.getPrice(d);e.nextChargeAmount=this.features.getPrice(d);this.features.isPerUser(d)&&(e.isPerUser=!0,e.nextChargeAmount="function"===typeof(f=this.model).totalPerUserPrice?f.totalPerUserPrice(d):void 0,e.totalYearlyPrice="function"===typeof(h=this.model).totalPerUserPrice?h.totalPerUserPrice(this.pricing.yearlyProduct):void 0,e.totalMonthlyPrice="function"===typeof(m=this.model).totalPerUserPrice?
m.totalPerUserPrice(this.pricing.yearlyProduct):void 0);if(this.features.isMonthly(d)&&!(35===d||39===d))e.canSwitchToYearly=!0;e.activeAccount=ea.active(e.paidAccount);e.processingAccount=ea.processing(null!=(y=e.paidAccount)?y.standing:void 0);e.problemAccount=ea.problem(null!=(A=e.paidAccount)?A.standing:void 0);null!=e.paidAccount&&(e.willExpire=ea.willExpire(e.paidAccount));e.willExpire&&(e.expirationDate=I.toLongDateString(e.paidAccount.expirationDates[null!=e?null!=(C=e.paidAccount)?null!=
(D=C.products)?D[0]:void 0:void 0:void 0]));null!=e.accountStanding&&(e.accountStandingDisplay=l.toTitleCase(e.accountStanding));e.cancelledAccount=ea.cancelled(e.paidAccount);e.needCC=ea.needCC(null!=(x=e.paidAccount)?x.standing:void 0);b&&(e.processingReactivation=!0);this.$(".js-content").html(v.fill("billing",e));this.setActiveView(".js-billing");this.renderBillingStatement();"function"===typeof this.renderBanner&&this.renderBanner();return this};c.prototype.renderBillingStatement=function(){if(null!=
this.billingStatementData)return this.$("#billing-statement").html(v.fill("billing_statement",this.billingStatementData))};c.prototype.changeCreditCard=function(b){return n(""+this.model.typeName+" View","Billing Page","Change CC - Good Standing")};c.prototype.changeBillingContact=function(b){l.stop(b);n(""+this.model.typeName+" View","Billing Page","Open Change Billing Contact Info");return w.toggle({elem:this.$(".js-change-billing-contact"),top:20,view:this.model.getView(Jf)})};c.prototype.switchToYearlyBilling=
function(b){var d;l.stop(b);b=(d=this.model.get("paidAccount").products[0],0<=D.call(this.features.prebilledProducts,d))?"You will be charged immediately for the yearly amount and your contract will be extended by a year.  The billing contact will be notified of the change":"You will be charged a prorated amount for the remainder of the month and charged immediately for the yearly amount. The billing contact will be notified of the change.";return pa.toggle({elem:this.$(".js-switch-to-yearly-billing"),
top:35,model:this.model,title:"Switch to Yearly Billing?",text:b,confirmText:"Sounds good. Switch!",confirmBtnClass:"primary",fxConfirm:function(b){return function(d){return S({url:""+b.model.urlRoot+"/"+b.model.id+"/paidAccount/products",type:"POST",data:{products:[b.yearlyProductNumber]},success:function(d){n(b.model.typeName,"Successfully Switched "+b.productName+" to Yearly Billing");return b.model.set(d)}})}}(this)})};c.prototype.startCancel=function(b){l.stop(b);this.$(".js-start-cancel").hide();
b=this.$(".js-random-reasons");b.html(_.shuffle(b.find("label")));return this.$(".js-cancel-feedback").show()};c.prototype.showFeedbackTextarea=function(b){return this.$(".js-long-feedback").show()};c.prototype.cancelCancel=function(b){l.stop(b);this.$(".js-start-cancel").show();return this.$(".js-cancel-feedback").hide()};c.prototype.cancel=function(b){var d,e,c,f,h,m,k,u,x,s,v,B;n("Member View","Billing Page","Open Cancel Trello Gold Dialog");b=null!=(c=this.$("input[type='radio']:checked").val())?
c:"not specified";c=null!=(h=this.$(".js-long-feedback").val())?h:"none given";m=this.model.toJSON();h=this.Auth.me().toJSON();k=null!=(d=m.paidAccount)?null!=(x=d.products)?x[0]:void 0:void 0;e={};e.ID=m.id;if(null!=(s=m.paidAccount)&&s.ixSubscriber)e.ixSubscriber=null!=(v=m.paidAccount)?v.ixSubscriber:void 0;m.displayName&&(e["Organization Display Name"]=m.displayName);m.name&&(e["Organization Name"]=m.name);e["Full Name"]=m.fullName?m.fullName:h.fullName;e.Username=m.username?m.username:h.username;
m.idBoards&&(e["# Boards"]=m.idBoards.length);m.memberships&&(e["# Members"]=m.memberships.length);null!=k&&(e["Next Billing Date"]=I.toLongDateString(null!=(B=m.paidAccount.billingDates)?B[k]:void 0),e.Interval=k===this.yearlyProductNumber?"Yearly":"Monthly",e.Price=this.features.formatPrice(k));e["Trello Version"]=TrelloVersion.replace(/\s+/g," ");d=function(){var b;b=[];for(f in e)u=e[f],b.push(""+f+": "+u);return b}().join("\n");l.bugzscout({me:h,area:"Cancellations",description:"Cancelled "+
this.productName+" - "+e.Interval+"\n",extra:""+d+"\n\nReason: "+b+"\n\nDetails:\n\n"+c});S({url:""+this.model.urlRoot+"/"+this.model.id+"/paidAccount/cancel",type:"POST",success:function(b){return function(d){n(b.model.typeName,"Successfully Canceled Paid Account");b.model.set(d);b.$(".js-start-cancel").hide();b.$(".js-cancel-feedback").hide();return b.$(".js-cancelled").show()}}(this)})};c.prototype.reactivateMonthly=function(b){n(""+this.model.typeName+" View","Billing Page","Reactivate "+this.productName+
" - Monthly");this.reactivate(b,this.monthlyProductNumber,"Monthly")};c.prototype.reactivateYearly=function(b){n(""+this.model.typeName+" View","Billing Page","Reactivate "+this.productName+" - Yearly");this.reactivate(b,this.yearlyProductNumber,"Yearly")};c.prototype.reactivate=function(b,d,e){var c;l.stop(b);null==(null!=(c=this.model.get("paidAccount"))?c.cardType:void 0)?(b=""+this._urlBase()+"/billing/card/"+this.productPrefix+e,C.navigate(b,{trigger:!0})):S({url:""+this.model.urlRoot+"/"+this.model.id+
"/paidAccount/reactivate",type:"POST",data:{products:[d]},success:function(b){return function(d){n(b.model.typeName,"Sucessfully Reactivate "+b.productName+" - "+e);return b.renderMainContent(!0)}}(this)})};c.prototype.renew=function(b){n(""+this.model.typeName+" View","Billing Page","Renew Expiring "+this.productName+" Subscription");S({url:""+this.model.urlRoot+"/"+this.model.id+"/paidAccount/products",type:"POST",data:{products:[this.model.get("paidAccount").products[0]]},success:function(b){return function(e){n(b.model.typeName,
"Successfully Renewed Expiring Yearly "+b.productName+" Subscription");return b.model.set(e)}}(this)})};c.prototype.changeCCProblem=function(b){return n(""+this.model.typeName+" View","Billing Page","Change CC - Resolve Overdue Billing Issue")};c.prototype.changeCCDenied=function(b){return n(""+this.model.typeName+" View","Billing Page","Change CC - Denied")};return c}();Hd=function(c){function b(){this.pollForCCAuth=k(this.pollForCCAuth,this);this.submitPaidForm=k(this.submitPaidForm,this);this.changeCreditCard=
k(this.changeCreditCard,this);this.createPaidAccount=k(this.createPaidAccount,this);this.hideAuthorizing=k(this.hideAuthorizing,this);this.delayShowAuthorizing=k(this.delayShowAuthorizing,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.pollForCCAuth=function(){var b,e;null==this._startedPolling&&(this._startedPolling=Date.now());if(this._startedPolling+l.getMs({seconds:60})<Date.now())return this.hideAuthorizing(),C.organizationBillingView(this.model.get("name"));
b=function(b){return function(d){return ea.active(d)?b.profileView:ea.needCC(null!=d?d.standing:void 0)?b.billingView:!1}}(this);if(e=b(this.model.get("paidAccount")))this.hideAuthorizing(),e();else return S({background:!0,url:""+this.model.urlRoot+"/"+this.model.id+"?paid_account=true",success:function(c){return function(f){return(e=b(f.paidAccount))?(c.model.set(f),c.hideAuthorizing(),e()):_.delay(_.bind(c.pollForCCAuth,c),1E3)}}(this),error:function(b){return function(d){b.hideAuthorizing();return b.billingView()}}(this)})};
b.prototype.events={"click .js-submit-create-paid-account":"createPaidAccount","click .js-submit-change-credit-card":"changeCreditCard","change input[name='product']":"changeProduct"};b.prototype.render=function(){var b,e,c,f,h,m,k,l,x,n,s,B,w;c=this.model.toJSON({prefs:!0});c.productNumber=this.options.productNumber;c.productName=this.options.productName;h=this.features.productShortNames[this.pricing.monthlyProduct];l=this.features.productShortNames[this.pricing.yearlyProduct];(f=oa.isPerUser(this.options.productNumber))&&
(e=this.model.get("billableMemberCount"));c.productOptions=[{id:h,checked:this.options.productNumber===h,isMonthly:!0,isPerUser:f,billableMemberCount:e,totalPerUserPrice:"function"===typeof(x=this.model).totalPerUserPrice?x.totalPerUserPrice(h):void 0,price:this.features.getPrice(h)},{id:l,checked:this.options.productNumber===l,isYearly:!0,isPerUser:f,billableMemberCount:e,totalPerUserPrice:"function"===typeof(n=this.model).totalPerUserPrice?n.totalPerUserPrice(l):void 0,price:this.features.getPrice(l),
save:""+this.features.getYearlyDiscount(this.pricing.yearlyProduct,this.pricing.monthlyProduct)}];e=null!=(m=this.options.products)?m:[];l=[];f=0;for(h=e.length;f<h;f++)m=e[f],l.push(this.features.products[m]);c.productNames=null!=l?l.join(","):void 0;c.billingFullName=null!=(k=null!=(s=c.paidAccount)?s.contactFullName:void 0)?k:y.me().get("fullName");c.billingEmail=null!=(B=null!=(w=c.paidAccount)?w.contactEmail:void 0)?B:y.me().get("email");s=this.options.formAreas;for(b in s)k=s[b],c["formAreas_"+
b]=k;c.action=this.options.action;c.showRecommend=this.pricing.showRecommend;this.$el.html(v.fill("credit_card",c));return this};b.prototype.delayShowAuthorizing=function(){this.finishedAuth=!1;return _.delay(function(b){return function(){if(!b.finishedAuth)return l.scrollToTop(),O.show("Authorizing...","info","authorizing")}}(this),1E3)};b.prototype.hideAuthorizing=function(){this.finishedAuth=!0;return O.hide("authorizing")};b.prototype.changeProduct=function(b){b=$(b.target).val();this.$("input[name='products']").val(b)};
b.prototype.createPaidAccount=function(b){return this.submitPaidForm(b,"js-submit-create-paid-account","paidAccount","products billingContactEmail billingContactFullName name cardNumber expMonth expYear cvv companyName streetAddress1 streetAddress2 city state zipCode country".split(" "))};b.prototype.changeCreditCard=function(b){return null==this.model.get("paidAccount")||null==this.model.get("paidAccount").cardType&&_.isEmpty(this.model.get("paidAccount").products)?this.createPaidAccount(b):this.submitPaidForm(b,
"js-submit-change-credit-card","paidAccount/creditCard","products name cardNumber expMonth expYear cvv companyName streetAddress1 streetAddress2 city state zipCode country".split(" "))};b.prototype.submitPaidForm=function(b,e,c,f){var h,m,k,u,x;k=this.options.productName;m=this.options.productNumber;this.$("input").removeClass("input-error");this.$(".js-tos-error").addClass("hide");l.preventDefault(b);if(this.$("[name=acceptTOS]").is(":checked")){b={};u=0;for(x=f.length;u<x;u++)h=f[u],b[h]=this.$("[name="+
h+"]").val(),this.$("label[for="+h+"].form-error").addClass("hide");this.delayShowAuthorizing();this.$("."+e).attr("disabled","disabled");this.$(".error").hide();return S({showSendingAfter:-1,url:""+this.model.urlRoot+"/"+this.model.id+"/"+c,data:b,type:"POST",success:function(b){return function(d){b.pollForCCAuth();TRMixpanel.trackPurchase(k,m);if("Business Class"===k)return za.event("Bought BC",b.model.id),n("Business Class","Purchase",za.inTest("lockInPrice")?"lock in price":"yearly price");if("Trello Gold"===
k)return n("Trello Gold","Purchase")}}(this),error:function(b){return function(d){var c,f,g;if(/^invalid value for /.test(null!=d?d.responseText:void 0)){if(c=d.responseText.replace("invalid value for ","").split(","),0<(null!=c?c.length:void 0)){f=0;for(g=c.length;f<g;f++)d=c[f],b.$("#"+d).addClass("input-error"),b.$("label[for="+d+"].form-error").removeClass("hide");b.$("#"+c[0]).focus()}}else b.$(".error").text(null!=(c=d.responseText)?c:"error").show(),l.scrollToTop();b.hideAuthorizing();return b.$("."+
e).removeAttr("disabled","disabled")}}(this)})}this.$(".js-tos-error").removeClass("hide")};b.prototype.pollForCCAuth=function(){return b.pollForCCAuth.call(this)};return b}(A);Jf=function(c){function b(){this.changeBillingContact=k(this.changeBillingContact,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Change Billing Contact"};b.prototype.events={"click .js-submit":"changeBillingContact","submit form":"changeBillingContact"};
b.prototype.render=function(){var b,e,c,f,h;b=this.model.toJSON({prefs:!0});b.billingFullName=null!=(e=null!=(c=b.paidAccount)?c.contactFullName:void 0)?e:y.me().get("fullName");b.billingEmail=null!=(f=null!=(h=b.paidAccount)?h.contactEmail:void 0)?f:y.me().get("email");this.$el.html(v.fill("billing_contact",b));return this};b.prototype.changeBillingContact=function(b){var e,c,f,h;l.stop(b);b={};b.billingContactFullName=this.$("input#billingContactFullName").val();b.billingContactEmail=this.$("input#billingContactEmail").val();
this.$(".js-submit").attr("disabled","disabled");h=["billingContactFullName","billingContactEmail"];c=0;for(f=h.length;c<f;c++)e=h[c],this.$("#"+e).removeClass("input-error");return S({url:""+this.model.urlRoot+"/"+this.model.id+"/paidAccount/billingContact",data:b,type:"POST",success:function(b){return function(d){b.model.set(d);return w.hide()}}(this),error:function(b){return function(d){var e;d=null!=(e=d.responseText)?e:"error";b.$(".js-submit").removeAttr("disabled","disabled");if(/billingContactFullName/.test(d))b.$("#billingContactFullName").addClass("input-error");
else if(/email/.test(d))b.$("#billingContactEmail").addClass("input-error");else return b.$(".error").text(d).show()}}(this)})};return b}(A);var Ub;Ub=new (function(){function c(){this.settings={};this._update=_.debounce(this._update,100)}var b;b=function(b,e,c,f,h,m,k,l){null==l&&(l=!0);null==m&&(m=5);b.beginPath();b.moveTo(e+m,c);b.lineTo(e+f-m,c);b.quadraticCurveTo(e+f,c,e+f,c+m);b.lineTo(e+f,c+h-m);b.quadraticCurveTo(e+f,c+h,e+f-m,c+h);b.lineTo(e+m,c+h);b.quadraticCurveTo(e,c+h,e,c+h-m);b.lineTo(e,
c+m);b.quadraticCurveTo(e,c,e+m,c);b.closePath();l&&b.stroke();if(k)return b.fill()};c.prototype._update=function(){if(ba.allowsDynamicFavicon())return async.assembly([function(b){return function(e){var c,f;return null!=b.settings.url?(f=za._hasher(""+b.settings.hasNotifications+"-"+b.settings.tiled+"-"+b.settings.url),c=""+window.backgroundDomain+"/favicon/"+f+".png",l.waitForImageLoad(c,function(){return e(null,c)},function(){return e()})):e()}}(this),function(d){return function(e,c){var f,h,m,
k;if(null!=c)return e(null,c);m=null!=d.settings.url?"/dynamic-favicon?background="+d.settings.url+"&tiled="+(d.settings.tiled?"1":"0")+"&unread="+(d.settings.hasNotifications?"1":"0"):(f=document.createElement("canvas"),f.width=f.height=64,null!=(h="function"===typeof f.getContext?f.getContext("2d"):void 0)?(h.save(),h.fillStyle=null!=(k=d.settings.color)?k:Sa.blue.color,b(h,0,0,64,64,12,!0),h.fillStyle="#f8f8f8",b(h,8,8,20,44,4,!0),b(h,36,8,20,28,4,!0),h.restore(),d.settings.hasNotifications?(h.fillStyle=
"#fff",b(h,40,0,24,24,12,!0),h.fillStyle="#f44",b(h,42,2,20,20,10,!0)):void 0,f.toDataURL("image/png")):null);return e(null,m)}}(this)],function(b,e){if(null==b&&null!=e)return $("#favicon").remove(),$("<link>").attr({id:"favicon",rel:"icon",type:"image/png",sizes:"64x64",href:e}).appendTo("head")})};c.prototype.setNotifications=function(b){this.settings.hasNotifications=b;return this._update()};c.prototype.setBackground=function(b){var e,c;c=b.url;e=b.tiled;b=b.color;this.settings.url=c;this.settings.tiled=
e;this.settings.color=b;return this._update()};return c}());var Kf,Id,Lf,Jd,La,Kd,D=[].indexOf||function(c){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===c)return b;return-1},k=function(c,b){return function(){return c.apply(b,arguments)}},F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c};La=new (function(){function c(){}c.prototype.navigateToSearch=function(b,
d){var e;e=(null!=d?d:{trigger:!1}).trigger;return C.navigate("/search?q="+encodeURIComponent(b),{trigger:e})};c.prototype.init=function(){var b,d,e;this.keywordMap=this.getKeywordMap();this.keywordsWithVariants=_.object(function(){var d,c;d=this.keywordMap;c=[];for(b in d)e=d[b],e.hasOwnProperty("variants")&&c.push([b,e]);return c}.call(this));this.keywords=_.keys(this.keywordMap);this.variants=_.compact(_.flatten(function(){var e,c;e=this.keywordMap;c=[];for(b in e)d=e[b],c.push(d.variants);return c}.call(this)));
this.keywordsAndVariants=this.keywords.concat(this.variants);this.keywordsWithSearchSuggest=_.object(function(){var d,c;d=this.keywordMap;c=[];for(b in d)e=d[b],e.hasOwnProperty("suggestionsSearchModelTypes")&&c.push([b,e]);return c}.call(this))};c.prototype.inputIndex=null;c.prototype.isOnSearchPage=function(){return"search"===C.viewType};c.prototype.getSuggestionObjectContainingVariantOrKey=function(b){var d,e,c;e=this.keywordMap[b];if(null!=e)return{key:b,obj:e};c=this.keywordsWithVariants;for(d in c)if(e=
c[d],0<=D.call(e.variants,b))return{key:d,obj:e};return{}};c.prototype.findKeywords=function(b){return""===b?[]:_.filter(this.keywordsAndVariants,function(d){return RegExp("^"+l.escapeForRegex(b)).test(d)})};c.prototype.findUniqueKeywords=function(b){b=this.findKeywords(b);return _.uniq(b,!1,function(b){return function(e){return b.getSuggestionObjectContainingVariantOrKey(e).key}}(this))};c.prototype.getKeywordMap=function(){return{"is:archived":{variants:["archived","is:closed","closed"],description:"Only include archived cards.",
containsRegex:/\bis:archived\b/},"is:open":{variants:["open"],description:"Only include open cards.",containsRegex:/\bis:open\b/},"is:starred":{variants:["is:starred"],description:"Only include cards on starred boards.",containsRegex:/\bis:starred\b/},"has:attachments":{variants:["attachments"],description:"Only include cards with attachments.",containsRegex:/\bhas:attachments\b/},"has:cover":{variants:["cover"],description:"Only include cards with a cover.",containsRegex:/\bhas:cover\b/},"has:description":{variants:["description"],
description:"Only include cards that have a description.",containsRegex:/\bhas:description\b/},"has:stickers":{variants:["stickers"],description:"Only include cards that have stickers.",containsRegex:/\bhas:stickers\b/},"has:members":{variants:["members"],suggestString:"has:members",description:"Only include cards that have members assigned.",containsRegex:/\bhas:members\b/},"@":{moreInputNeeded:!0,description:"Cards assigned to a member.",containsRegex:/@\S*\b/,suggestionsSearchModelTypes:"members"},
"@me":{variants:["me"],description:"Only include cards assigned to me.",containsRegex:/\b@me\b/},"member:":{moreInputNeeded:!0,description:"Cards assigned to a member.",containsRegex:/\bmember:\S*\b/,suggestionsSearchModelTypes:"members"},"label:":{moreInputNeeded:!0,description:"Cards with this label.",containsRegex:/\blabel:\S*\b/},"#":{moreInputNeeded:!0,description:"Cards with this label.",containsRegex:/\b\#\S*\b/},"board:":{moreInputNeeded:!0,description:"Only cards on a particular board.",
containsRegex:/\bboard:\S*\b/,suggestionsSearchModelTypes:"boards"},"list:":{moreInputNeeded:!0,description:"Cards in the list with matching text.",containsRegex:/\blist:\S*\b/},"name:":{moreInputNeeded:!0,description:"Cards that match text in the name.",containsRegex:/\bname:\S*\b/},"comment:":{moreInputNeeded:!0,description:"Cards that match text in the comment.",containsRegex:/\bcomment:\S*\b/},"checklist:":{moreInputNeeded:!0,description:"Cards that match text in a checklist.",containsRegex:/\bchecklist:\S*\b/},
"description:":{moreInputNeeded:!0,description:"Cards that match text in the description.",containsRegex:/\bdescription:\S*\b/},"due:day":{variants:["day","today"],description:"Cards due in the next 24 hours.",containsRegex:/\bdue:day\b/},"due:week":{description:"Cards due in the next 7 days.",containsRegex:/\bdue:week\b/},"due:month":{description:"Cards due in the next 28 days.",containsRegex:/\bdue:month\b/},"due:overdue":{variants:["overdue"],description:"Cards that are past due.",containsRegex:/\bdue:overdue\b/},
"created:day":{description:"Cards created in the last 24 hours.",containsRegex:/\bcreated:day\b/},"created:week":{description:"Cards created in the last 7 days.",containsRegex:/\bcreated:week\b/},"created:month":{description:"Cards created in the last 28 days.",containsRegex:/\bcreated:month\b/},"edited:day":{description:"Cards edited in the last 24 hours.",containsRegex:/\bedited:day\b/},"edited:week":{description:"Cards edited in the last 7 days.",containsRegex:/\bedited:week\b/},"edited:month":{description:"Cards edited in the last 28 days.",
containsRegex:/\bedited:month\b/}}};return c}());window.Search=La;Kd=function(c){function b(){this.shortcut=k(this.shortcut,this);this.fSearchOpen=!1;this.saveQueryDebounced=_.debounce(this.saveQuery,100);this.openSearchResultsViewDebounced=_.debounce(this.openSearchResultsView,100);this.autosuggestDebounced=_.debounce(this.autosuggest,100);X.addHandler(this,{scope:"search_box"});b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){this.makeDebouncedMethods("renderInputState");
return this.listenTo(ra,{"change:query":this.renderInputQuery})};b.prototype.events={"keydown .js-search-input":"searchKeydown","click .js-search-input":"openSearchResultsView","focus .js-search-input":"openSearchResultsView","click .js-open-search-page":"openSearchPage","click .js-search-focus":"openSearchResultsView","mousedown .js-search-close":"clearSearch",shortcut:"shortcut"};b.prototype.render=function(){this.$el.html(v.fill("header_search"));this.renderInputStateDebounced();this.$(".js-search-input").val(ra.getQuery());
return this};b.prototype.renderInputQuery=function(){var b,e,c;b=this.$(".js-search-input");c=b.val();e=ra.getQuery();0<b.length&&c!==e&&(b.val(e),l.setCaretAtEnd(b))};b.prototype.renderInputState=function(){var b,e;e=this.fSearchOpen;b=this.hasInputValue();this.$(".js-search-input").toggleClass("header-search-input-wide focus",e);this.$(".js-search-icon, .js-close-icon").toggleClass("header-search-icon-dark",e);this.$(".js-search-icon").toggleClass("hide",b);this.$(".js-close-icon").toggleClass("hide",
!b)};b.prototype.hasInputValue=function(){var b;return 0<(null!=(b=this.$(".js-search-input").val())?b.length:void 0)};b.prototype.shortcut=function(b,e){if(191===b&&!e)return this.focusInput(),"Search"};b.prototype.focusInput=function(){var b;b=this.$(".js-search-input");b.length&&l.setCaretAtEnd(b)};b.prototype.clearSearch=function(b){l.stop(b);this.closeSearch()};b.prototype.closeSearch=function(){this.$(".js-search-input").val("").blur();ra.setQuery("");this.fSearchOpen=!1;this.renderInputStateDebounced()};
b.prototype.searchKeydown=function(b){var e,c,f;this.renderInputStateDebounced();if(13===(e=b.keyCode)||9===e||39===e){if(e=$(".js-select-suggestion.selected").length)l.stop(b),$(".js-select-suggestion.selected").click()}else if(38===(c=b.keyCode)||40===c){if(e=$(".js-select-suggestion.selected").length)l.stop(b),l.navMenuList($(".js-search-suggestions-list"),".js-select-suggestion",b.keyCode)}else if(!(f=b.keyCode,0<=D.call(_.flatten([td,37,27]),f)))this.autosuggestDebounced(),this.saveQueryDebounced(),
this.openSearchResultsViewDebounced()};b.prototype.autosuggest=function(b){var e,c,f,h,m,k;e=this.$(".js-search-input");b=l.getWordFromCaret(e).str;f=La.findUniqueKeywords(b);h=ra.getQuery();La.inputIndex=l.getCaretPosition(e);e=_.filter(f,function(b){return!La.getSuggestionObjectContainingVariantOrKey(b).obj.containsRegex.test(h)});ra.setSuggestions(e);e=!1;k=La.keywordsWithSearchSuggest;for(c in k)if(m=k[c],f=m.containsRegex,f.test(b)){e=!0;e=m.suggestionsSearchModelTypes;ra.setSuggestionSearchModelTypes(e);
c=b.replace(RegExp("^"+c),"");ra.setSuggestionSearchTerm(c);return}e||(ra.clearSuggestionSearchTerm(),ra.clearSuggestionSearchModelTypes())};b.prototype.saveQuery=function(){var b;b=this.$(".js-search-input").val();ra.setQuery(b)};b.prototype.getResultsView=function(){return this.subview(Id,null,null,"headerSearchResultsView")};b.prototype.openSearchResultsView=function(b){l.stop(b);!this.fSearchOpen&&!La.isOnSearchPage()&&(b=this.$(".js-search-input"),l.setCaretAtEnd(b),w.show({elem:b,top:b.outerHeight()+
8,view:Id,elActive:b,hidden:_.bind(this.closeSearch,this)}));this.fSearchOpen=!0;this.renderInputStateDebounced()};b.prototype.openSearchPage=function(){return n("Header","Open Search Page")};return b}(A);Id=function(c){function b(){this.renderOrganizationResults=k(this.renderOrganizationResults,this);this.renderMemberResults=k(this.renderMemberResults,this);this.renderBoardResults=k(this.renderBoardResults,this);this.renderCardResults=k(this.renderCardResults,this);this.renderResults=k(this.renderResults,
this);this.render=k(this.render,this);this.getMoreCards=k(this.getMoreCards,this);this.results=null;this.cardPageNumber=this.suggestSerial=this.serial=0;this.cardsLimit=La.isOnSearchPage()?12:8;this.searchStates=["no-results","no-input","searching","search-results","err"];this.searchState="no-results";b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Search Results"};b.prototype.className="search-results-view";b.prototype.displayType="search-over";b.prototype.hideHeader=
!0;b.prototype.maxWidth="600";b.prototype.initialize=function(){this.updateDebounced=_.debounce(this.update,200);this.makeDebouncedMethods("renderSearchedSuggestions");return this.listenTo(ra,{"change:query":this.updateDebounced,"change:suggestions":this.renderSuggestions,"change:suggestionSearchTerm":this.renderSearchedSuggestionsDebounced})};b.prototype.events={"click .js-open-search-page":"openSearchPage","click .js-show-search-tips":"showTips","click .js-member-results .js-list .js-select-member":"trackMemClick",
"click .js-org-results .js-list .list-card":"trackOrgClick","click .js-select-suggestion":"selectSuggestion","mouseenter .js-select-suggestion":"mouseenterSuggestion","mouseleave .js-select-suggestion":"mouseleaveSuggestion","click .js-show-more-cards":"showMoreCards","click .js-show-more-boards":"showMoreBoards","click .js-show-more-members":"showMoreMembers","click .js-show-more-orgs":"showMoreOrgs","mouseenter .search-result-card-hover-target":"highlightCard","mouseleave .search-result-card-hover-target":"unHighlightCard"};
b.prototype.update=function(){var b,e,c;b=null!=b?b:ra.getQuery();this.err=null;this.results=_.isEmpty(b)?{}:null;++this.serial;e=this.serial;this.renderResults();if(!_.isEmpty(b))return b={query:b,partial:"undefined"!==typeof partial&&null!==partial?partial:!0,modelTypes:"cards,boards,organizations,members",board_fields:"name,url,prefs",cards_limit:null!=(c=this.cardsLimit)?c:6,card_members:!0,card_board:!0,card_list:!0,card_stickers:!0,card_attachments:"cover",boards_limit:8,members_limit:8,organizations_limit:6},
M["for"](this.modelCache).loadSearchData(b,function(b){return function(d,c){var g,k;b.err=d;if(e!==b.serial)g=_.pluck(null!=c?null!=(k=c.options)?k.terms:void 0:void 0,"text"),P("search","discarding search for "+g+", serial "+e);else return b.err=d,b.results=c,b.renderResults()}}(this))};b.prototype.getMoreCards=function(b,e){var c,f,h;c=e.partial;c={query:b,partial:null!=c?c:!1,modelTypes:"cards",cards_limit:null!=(f=this.cardsLimit)?f:6,cards_page:null!=(h=this.cardPageNumber)?h:0,card_members:!0,
card_board:!0,card_list:!0,card_stickers:!0,card_attachments:"cover"};M["for"](this.modelCache).loadSearchData(c,function(b){return function(d,e){var c,f;b.err=d;c=_.pluck(null!=(f=null!=e?e.cards:void 0)?f:[],"id");b.err=d;b.results.cards=e.cards;b.$(".js-loading-cards").addClass("hide");return b.renderCardResults(c,{append:!0})}}(this))};b.prototype.render=function(){this.$el.html(v.fill("search_instant_results"));this.update();this.renderSuggestions();this.renderSearchedSuggestionsDebounced();
return this};b.prototype.selectSuggestion=function(b){var e,c;l.stop(b);c=$(b.target).closest(".js-select-suggestion").attr("data-suggestionphrase");b=La.keywordMap[c];e=ra.getQuery();e=l.removeWordAtIndex(e,La.inputIndex);c=l.stripExtraSpaces(""+e+" "+c);null!=b&&b.moreInputNeeded||(c+=" ");ra.clearSuggestions();ra.setQuery(c);ra.clearSuggestionSearchTerm();ra.clearSuggestionSearchModelTypes()};b.prototype.mouseleaveSuggestion=function(b){return this.$(".js-select-suggestion").removeClass("selected")};
b.prototype.mouseenterSuggestion=function(b){return $(b.target).closest(".js-select-suggestion").addClass("selected")};b.prototype.renderSuggestions=function(){var b,e,c,f,h,m,k,l;m=ra.getSuggestions();c=0<m.length;b=this.$(".js-search-suggestions");e=b.find(".js-search-suggestions-list").empty();if(c){c="";k=0;for(l=m.length;k<l;k++)f=m[k],f=La.getSuggestionObjectContainingVariantOrKey(f),h=f.obj,h.phrase=f.key,c+=v.fill("search_suggetion",h);e.append(c);this.$(".js-select-suggestion").first().addClass("selected");
b.removeClass("hide")}else b.addClass("hide");return this};b.prototype.renderSearchedSuggestions=function(){var b,e,c,f;b=this.$(".js-search-suggestions").addClass("hide");e=b.find(".js-search-suggestions-list").empty();++this.suggestSerial;f=this.suggestSerial;c=ra.getSuggestionSearchTerm();""!==c&&(c={query:c,modelTypes:ra.getSuggestionSearchModelTypes(),partial:!0,board_fields:"name,url,prefs",boards_limit:6,members_limit:6},M["for"](this.modelCache).loadSearchData(c,function(c){return function(g,
k){var l,x,n,s,B,w;if(f===c.suggestSerial&&(l=0<(null!=k?null!=(x=k.boards)?x.length:void 0:void 0),x=0<(null!=k?null!=(n=k.members)?n.length:void 0:void 0),n="",(l||x)&&!g)){if(l){w=k.boards;s=0;for(B=w.length;s<B;s++)l=x=w[s],l.phrase='board:"'+x.name+'"',n+=v.fill("search_suggetion_board",l)}else if(x){w=k.members;s=0;for(B=w.length;s<B;s++)l=x=w[s],l.phrase="@"+x.username,x={member:v.member},n+=v.fill("search_suggetion_member",l,"",x)}e.append(n);c.$(".js-select-suggestion").first().addClass("selected");
return b.removeClass("hide")}}}(this)))};b.prototype.renderResults=function(){var b,e,c,f,h,m,k,l,x;e=_.pluck(null!=(b=null!=(k=this.results)?k.cards:void 0)?b:[],"id");b=_.pluck(null!=(c=null!=(l=this.results)?l.boards:void 0)?c:[],"id");c=_.pluck(null!=(f=null!=(x=this.results)?x.members:void 0)?f:[],"id");f=_.pluck(null!=(h=null!=(m=this.results)?m.organizations:void 0)?h:[],"id");this.searchState=null!=this.err?"err":""===ra.getQuery()?"no-input":null==this.results?"searching":_.all([e,b,c,f],
_.isEmpty)?"no-results":(this.renderCardResults(e),this.renderBoardResults(b),this.renderMemberResults(c),this.renderOrganizationResults(f),"search-results");f=this.searchStates;h=0;for(m=f.length;h<m;h++)e=f[h],this.$(".js-"+e).toggleClass("hide",e!==this.searchState);return this};b.prototype.renderCardResults=function(b,e){var c,f,h,m;h=(null!=e?e:{}).append;c=this.$(".js-card-results").addClass("hide");if(0<b.length){f=c.find(".js-list");null==h&&f.empty();var k,l;l=[];h=0;for(k=b.length;h<k;h++)m=
b[h],m=this.Card.get(m),l.push(this.subview(Kf,m));this.appendSubviews(l,f);c.removeClass("hide")}c=b.length===this.cardsLimit;this.$(".js-show-more-cards").toggleClass("hide",!c);return this};b.prototype.renderBoardResults=function(b){var e,c,f;e=this.$(".js-board-results").addClass("hide");if(0<b.length){c=e.find(".js-list").empty();var h,m,k;k=[];h=0;for(m=b.length;h<m;h++)f=b[h],k.push(this.subview(Mf,this.Board.get(f)));this.appendSubviews(k,c);e.removeClass("hide")}this.$(".js-show-more-boards").toggleClass("hide",
!0);return this};b.prototype.renderMemberResults=function(b){var e,c,f;e=this.$(".js-member-results").addClass("hide");if(0<b.length){c=e.find(".js-list").empty();var h,m,k;k=[];h=0;for(m=b.length;h<m;h++)f=b[h],k.push(this.subview(Lf,this.Member.get(f)));this.appendSubviews(k,c);e.removeClass("hide")}this.$(".js-show-more-members").toggleClass("hide",!0);return this};b.prototype.renderOrganizationResults=function(b){var e,c;e=this.$(".js-org-results").addClass("hide");if(0<b.length){var f,h,m;m=
[];f=0;for(h=b.length;f<h;f++)c=b[f],m.push(v.fill("organization_search_list_item",this.Organization.get(c).toJSON()));e.removeClass("hide").find(".js-list").empty().append(m)}this.$(".js-show-more-orgs").toggleClass("hide",!0);return this};b.prototype.trackMemClick=function(){return n("Search","Select Member")};b.prototype.trackOrgClick=function(){return n("Search","Select Organization")};b.prototype.showTips=function(b){l.stop(b);this.$(".js-search-tips-helper").addClass("hide");this.$(".js-search-tips-list").removeClass("hide")};
b.prototype.openSearchPage=function(b){l.stop(b);b=ra.getQuery();w.hide();La.navigateToSearch(b,{trigger:!0})};b.prototype.showMoreCards=function(b){this.$(".js-loading-cards").removeClass("hide");this.$(".js-show-more-cards").addClass("hide");this.cardPageNumber++;this.getMoreCards(ra.getQuery(),{partial:!0})};b.prototype.showMoreBoards=function(b){};b.prototype.showMoreMembers=function(b){};b.prototype.showMoreOrgs=function(b){};b.prototype.highlightCard=function(b){$(b.target).closest(".search-result-card").addClass("search-result-card-highlight-card").closest(".js-list").addClass("search-result-card-highlight-section")};
b.prototype.unHighlightCard=function(b){$(b.target).closest(".search-result-card").removeClass("search-result-card-highlight-card").closest(".js-list").removeClass("search-result-card-highlight-section")};return b}(A);Kf=function(c){function b(){this.openCard=k(this.openCard,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.tagName="div";b.prototype.className="search-result-card";b.prototype.events={"click .list-card":"openCard"};b.prototype.render=
function(){var b,e,c;b=this.model.getBoard();c=this.model.getList();e=this.model.toJSON();e=_.extend(e,{realLink:!0,listName:c.get("name"),boardName:b.get("name"),permLevel:b.getPermLevelIconClass(),archived:c.get("closed")?" (archived)":""});this.$el.html(v.fill("search_results_card",e));b=this.subview(Ca,this.model,{viewPrefix:"search_",hideMenu:!0,applyBoardCardFilter:!1});this.appendSubview(b,this.$(".js-list-card-container"));return this};b.prototype.openCard=function(b){this.model.showDetail();
n("Search","Select Card")};return b}(A);Jd=function(c){function b(){this.appendMemberToSearchResults=k(this.appendMemberToSearchResults,this);this.renderSearchResults=k(this.renderSearchResults,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.renderSearchResults=function(b,e){var c,f,h,m,k,u,x;this.$(".js-org-members").hide();this.$el.find(".js-error").hide();c=this.$el.find(".js-search-results");c.find(".js-list").empty();this.$el.find(".js-uninvited-search-results").hide().empty();
if(""===b)this.clearSearchResults(),this.loadingEl.hide();else{m=_.isEmpty(e);h=3<=b.trim().length;f=1===e.length&&l.checkEmail(b);this.$el.find(".js-no-results").toggleClass("hide",m&&h);c.toggle(!m);h||"function"===typeof this.renderOrgMembers&&this.renderOrgMembers();this.helperEl.hide();if(!m&&null==e[0].id)this.renderEmailInviteToSearchResults(e[0]),c.hide(),this.loadingEl.hide();else{this.$(".js-no-results").addClass("hide");u=0;for(x=e.length;u<x;u++)m=e[u],h=m.joined,k=0<m.similarity,delete m.joined,
delete m.similarity,this.modelCache.update("Member",m),c={id:m.id},h&&(c.extraText="ghost"===m.memberType?"invited":"joined",c.className="disabled"),c.isKnownMember=k||f,this.appendMemberToSearchResults(c);this.loadingEl.hide();f=this.$(".js-search-results .js-list li.js-autoselect:first");l.selectMenuItem(this.$(".js-search-results .js-list"),"li",f)}w.calcPos()}};b.prototype.appendMemberToSearchResults=function(b){var e,c,f;c=this.Member.get(b.id);e="function"===typeof(f=this.model).getOrganization?
f.getOrganization():void 0;e=null!=e&&e.isPremOrgAdmin(c)?_.compact([b.className,"no-option"]).join(" "):b.className;b=this.subview(Ka,c,_.extend({showUnconfirmed:!0},b));this.appendSubview(b,this.$(".js-search-results .js-list"));return b.$("li").addClass(e)};return b}(A);Lf=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.tagName="li";b.prototype.className="search-result-member";b.prototype.events={"mouseenter .js-select-member":"hoverMember","mouseleave .js-select-member":"blurMember"};
b.prototype.render=function(){this.$el.empty();this.appendSubview(this.subview(Ka,this.model,{linkName:!0}));return this};b.prototype.blurMember=function(b){$(b.target).closest(".item").removeClass("selected")};b.prototype.hoverMember=function(b){var e;e=$(b.target).closest(".item");l.selectMenuItem($(b.target).closest(".js-list"),".item",e)};return b}(A);$(function(){return La.init()});var Ld;Ld=function(){function c(){}c.prototype.switchSection=function(b){this.$(".js-content").addClass("hide").detach();
this.$(".js-loading-page").removeClass("hide");this.$(".tabbed-pane-nav-item-button").removeClass("active");this.$(b.target).addClass("active");return n(this.model.typeName+" View","Detail Sidebar","Open "+this.$(b.target).text()+" Page")};return c}();var Ma,fb,vb,M,fa,Md,G=[].slice,F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c},k=function(c,b){return function(){return c.apply(b,
arguments)}},D=[].indexOf||function(c){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===c)return b;return-1};Md=function(){function c(b){this.cache=b}c.prototype._loadApiData=function(){var b,d,e,c,f,h,m,k;e=arguments[0];b=arguments[1];h=arguments[2];m=5<=arguments.length?G.call(arguments,3,k=arguments.length-1):(k=3,[]);c=arguments[k++];f=m[0];d=m[1];return async.auto({result:function(d){var c;_.isString(e)||(e=e.prototype.typeName);c=l.invitationTokens();_.isEmpty(c)||(h.invitationTokens=
c.join(","));null==f&&(f=""+l.pluralize(e)+"/"+b);return QuickLoad("/1/"+f+"?"+$.param(h),function(b,e,c){d(null,b);if(null!=(b=null!=c?c.getResponseHeader("X-Server-Time"):void 0))return Ac.updateServerTime(parseInt(b))},function(c){return 0===(null!=c?c.indexOf("invalid token"):void 0)?y.logoutPost():d("Api load error on "+e+", "+b+", "+h+": "+c)})},header:function(b){return d?b():M.waitFor("headerData",b)}},function(b){return function(d,f){var h;h=f.result;if(d)"function"===typeof c&&c(d);else return null!=
b.cache?b.cache.enqueueDelta(e,h,function(b,d){return"function"===typeof c?c(b,d):void 0}):c(d,h)}}(this))};c.prototype.loadHeaderData=function(b){return y.isLoggedIn()?this._loadApiData(aa,"me",Ve,void 0,!0,b):"function"===typeof b?b(null,{}):void 0};c.prototype.loadBoardsMenuData=function(b){return y.isLoggedIn()?this._loadApiData(aa,"me",Le,b):"function"===typeof b?b(null,{}):void 0};c.prototype.loadBoardData=function(b,d,e){return this._loadApiData(ia,b,d,e)};c.prototype.loadBoardListData=function(b,
d,e){return this._loadApiData(ia,b,d,e)};c.prototype.loadCardData=function(){var b,d,e;b=3<=arguments.length?G.call(arguments,0,e=arguments.length-2):(e=0,[]);d=arguments[e++];e=arguments[e++];b=b[0];return null!=b?this._loadApiData(Ga,d,nd,"boards/"+b+"/cards/"+d,e):this._loadApiData(Ga,d,nd,e)};c.prototype.loadCardActions=function(b,d,e,c){return this._loadApiData(Ga,d,_.extend({actions_limit:e},Nb),"boards/"+b+"/cards/"+d,c)};c.prototype.loadCardVoters=function(b,d){return this._loadApiData(Ga,
b,Ne,"cards/"+b,d)};c.prototype.loadCardCopyData=function(b,d,e){return this._loadApiData(Ga,d,Me,"boards/"+b+"/cards/"+d,e)};c.prototype.loadNotificationData=function(b,d){return this._loadApiData(aa,b,{notifications:"all",notifications_limit:10},d)};c.prototype.loadMoreNotificationData=function(b,d,e){return $.get("/1/members/"+b+"/notifications",{filter:"all",limit:10,page:d}).done(function(b){return function(d){return b.cache.enqueueDelta(wb.prototype.typeName,d,e)}}(this)).fail(function(){return"function"===
typeof e?e("error"):void 0})};c.prototype.loadMemberBoardsData=function(b,d){return this._loadApiData(aa,b,Qe,d)};c.prototype.loadMemberCardsData=function(b,d){return this._loadApiData(aa,b,Re,d)};c.prototype.loadMemberEmail=function(b,d){return this._loadApiData(aa,b,{fields:"email",invitationTokens:l.invitationTokens().join(",")},d)};c.prototype.loadOrganizationMemberGhost=function(b,d,e){var c;b=null!=(c=l.inviteTokenFor(b))?c.split("-")[0]:void 0;return null==b?e(null,{}):this._loadApiData(aa,
b,{fields:"fullName,initials,memberType,username,avatarHash,bio,bioData,confirmed,products,url",invitationTokens:l.invitationTokens().join(",")},function(b,d){return null!=b?e(null,{}):e(null,d)})};c.prototype.loadMyBoardsUnreadData=function(b){return this._loadApiData(aa,"me",Ue,b)};c.prototype.loadMoreActionData=function(){var b,d,e,c,f,h,m;f=arguments[0];e=arguments[1];m=arguments[2];c=arguments[3];b=6<=arguments.length?G.call(arguments,4,d=arguments.length-1):(d=4,[]);h=arguments[d++];d=b[0];
b=b[1];c={filter:"all",limit:c,page:m};null!=d&&(c.idModels=d.join(","));null!=b&&(c.filter=b);return this._loadApiData(pb,e,c,""+f+"s/"+e+"/actions",h)};c.prototype.loadClosedCards=function(b,d,e){var c,f;c=d.limit;d=d.before;f={stickers:!0};null!=c&&(f.limit=c);null!=d&&(f.before=d);return this._loadApiData(Ga,b,f,"boards/"+b+"/cards/closed",e)};c.prototype.loadClosedBoards=function(b){return this._loadApiData(ia,null,{filter:"closed"},"members/me/boards",b)};c.prototype.loadMemberData=function(b,
d){return this._loadApiData(aa,b,{},d)};c.prototype.loadMemberPaidAccount=function(b,d){return this._loadApiData(aa,b,Te,d)};c.prototype.loadMemberAccountData=function(b,d){return this._loadApiData(aa,b,Pe,d)};c.prototype.loadMemberProfileData=function(b,d){pd.action_since=(new Date).addDays(-30).toString();return this._loadApiData(aa,b,pd,d)};c.prototype.loadMemberPasswordData=function(b,d){return this._loadApiData(aa,b,{fields:"loginTypes"},d)};c.prototype.loadMemberCustomBackgrounds=function(b,
d){return this._loadApiData(aa,b,{fields:"",boardBackgrounds:"custom"},d)};c.prototype.loadMemberCustomStickers=function(b,d){return this._loadApiData(aa,b,{fields:"",customStickers:"all"},d)};c.prototype.loadMemberCustomEmoji=function(b,d){return this._loadApiData(aa,b,{fields:"",customEmoji:"all"},d)};c.prototype.loadMemberRecommendData=function(b,d){return this._loadApiData(aa,b,{fields:"fullName,username",credits:"invitation,promoCode"},d)};c.prototype._loadOrganizationPayload=function(b,d,e){return this._loadApiData.call(this,
Ta,d,b,e)};c.prototype.loadOrganizationData=function(){var b;b=1<=arguments.length?G.call(arguments,0):[];return this._loadOrganizationPayload.apply(this,[We].concat(G.call(b)))};c.prototype.loadOrganizationBoardsData=function(){var b;b=1<=arguments.length?G.call(arguments,0):[];return this._loadOrganizationPayload.apply(this,[Xe].concat(G.call(b)))};c.prototype.loadOrganizationPaidAccount=function(){var b;b=1<=arguments.length?G.call(arguments,0):[];return this._loadOrganizationPayload.apply(this,
[bf].concat(G.call(b)))};c.prototype.loadOrganizationMinimal=function(){var b;b=1<=arguments.length?G.call(arguments,0):[];return this._loadOrganizationPayload.apply(this,[af].concat(G.call(b)))};c.prototype.loadOrganizationMembersData=function(){var b;b=1<=arguments.length?G.call(arguments,0):[];return this._loadOrganizationPayload.apply(this,[Ze].concat(G.call(b)))};c.prototype.loadOrganizationMembersMinimal=function(){var b;b=1<=arguments.length?G.call(arguments,0):[];return this._loadOrganizationPayload.apply(this,
[$e].concat(G.call(b)))};c.prototype.loadOrganizationMemberMinimal=function(b,d,e){return this._loadApiData(aa,d,Se,e)};c.prototype.loadOrgMemberCardData=function(b,d,e){return this._loadApiData(Ga,b,qd,"organization/"+b+"/members/"+d+"/cards",e)};c.prototype.loadOrgMemberMinimalData=function(b,d,e){return this._loadApiData(Ga,b,qd,"organization/"+b+"/members/"+d+"/cards",e)};c.prototype.loadOrganizationExportData=function(){var b;b=1<=arguments.length?G.call(arguments,0):[];return this._loadOrganizationPayload.apply(this,
[Ye].concat(G.call(b)))};c.prototype.loadOrgNameById=function(b,d){return this._loadApiData(Ta,b,{fields:"name"},function(b,c){return d(b,null!=c?c.name:void 0)})};c.prototype.loadCurrentBoardData=function(b,d){return this.loadBoardData(b,Oe,d)};c.prototype.loadBoardActions=function(b,d){return this._loadApiData(ia,b,Je,d)};c.prototype.loadBoardChecklists=function(b,d){return this._loadApiData(ia,b,He,d)};c.prototype.loadBoardNames=function(b,d){return async.forEach(b,function(b){return function(d,
c){return b._loadApiData(ia,d,{fields:"name,closed"},c)}}(this),d)};c.prototype.loadMyOrganizations=function(b){return this.loadMemberOrganizations("me",b)};c.prototype.loadMemberOrganizations=function(b,d){return this._loadApiData(aa,b,cf,d)};c.prototype.loadSearchData=function(b,d){za.inTest("elastic_search")&&(b.elasticsearch=!0);return this._loadApiData("search",null,b,"search",d)};return c}();M=new (function(c){function b(){this._loaders={};this._waitComplete={};this._waitCallbacks={}}s(b,c);
b.prototype.triggerWaits=function(b){var e,c,f,h;this._waitComplete[b]=!0;h=null!=(e=this._waitCallbacks[b])?e:[];c=0;for(f=h.length;c<f;c++)e=h[c],e();return delete this._waitCallbacks[b]};b.prototype.waitFor=function(b,e){var c;return this._waitComplete[b]?e():(null!=(c=this._waitCallbacks)[b]?c[b]:c[b]=[]).push(e)};b.prototype["for"]=function(b){var e;_.isString(b)||(b=b.name);return null!=(e=this._loaders)[b]?e[b]:e[b]=new Md(ModelCacheCache["for"](b))};b.prototype.dropLoaderFor=function(b){return delete this._loaders[b.name]};
b.prototype.cacheCallback=function(b,e){return function(c,f){var h,m;if(!c)return h=null!=(m="function"===typeof b?b(f):void 0)?m:b,_.isString(h)&&(h=ModelCacheCache["for"](h)),h.enqueueDelta(e,f)}};return b}(Md));fa=function(c){function b(d,e){this.getView=k(this.getView,this);this.clearCache=k(this.clearCache,this);this.onId=k(this.onId,this);this.toggle=k(this.toggle,this);this.api=k(this.api,this);this.run=k(this.run,this);this.pull=k(this.pull,this);this.addToSet=k(this.addToSet,this);this.update=
k(this.update,this);this._handleError=k(this._handleError,this);this.setReady=k(this.setReady,this);this.ready=k(this.ready,this);this.waitForAttrs=k(this.waitForAttrs,this);this.waitForAttr=k(this.waitForAttr,this);var c,f;this._marked={};this._lockQueue={};this.modelCache=null!=e?e.modelCache:void 0;this._apiQueue=async.queue(function(b,d){return b(d)},1);c=null;this._apiQueue.drain=function(b){return function(){var d;d=c;c=null;return b.modelCache.unlock(d)}}(this);this._apiQueue.saturated=function(b){return function(){return null!=
c?c:c=b.modelCache.lock("TrelloModel "+b.id+" saturated")}}(this);l.debounceEvents(this);b.__super__.constructor.apply(this,arguments);null!=(f=this.modelCache)&&f.add(this)}s(b,c);b.prototype._initSubEventsOn=function(b){return this.listenTo(this,"change:"+b,function(e){return function(c,f){var h,m,k,l;m=null!=(k=c.previousAttributes())?k[b]:void 0;l=[];for(h in f)k=f[h],(null==m||k!==m[h])&&l.push(e.trigger("change:"+b+"."+h));return l}}(this))};b.prototype.waitForLock=function(b,e){var c;c=function(e){return function(){return _.isEmpty(e._lockQueue[b])?
delete e._lockQueue[b]:e._lockQueue[b].shift()(c)}}(this);if(null!=this._lockQueue[b])return this._lockQueue[b].push(e);this._lockQueue[b]=[];return e(c)};b.prototype.set=function(d,e){var c,f,h,m,k,l,x,n,s,v,w;_.isArray(d)&&(d=_.find(d,function(b){return b.id===this.id||b._id===this.id}));if(null!=(null!=d?d._id:void 0))null==d.id&&(d.id=d._id),delete d._id;d=_.clone(d);for(m in d)if(l=d[m],0<=m.indexOf("/")){k=m.split("/");h=k[0];f=3<=k.length?G.call(k,1,x=k.length-1):(x=1,[]);k=k[x++];null==d[h]&&
(d[h]=null!=(v=_.clone(this.get(h)))?v:{});h=d[h];c=n=0;for(s=f.length;n<s;c=++n)c=f[c],h=h[c]=null!=(w=_.clone(h[c]))?w:{};h[k]=l;delete d[m]}return b.__super__.set.apply(this,arguments)};b.prototype.destructor=function(){var b,e,c,f;this.off();if(null!=this._using){f=this._using;e=0;for(c=f.length;e<c;e++)b=f[e],"function"===typeof b.destructor&&b.destructor()}this.clearCache();return l.shred(this)};b.prototype.destroy=function(){b.__super__.destroy.apply(this,arguments);return this.destructor()};
b.prototype.destruct=function(b){var e,c,f,h;if(_.isArray(b)){null==this._using&&(this._using=[]);h=[];c=0;for(f=b.length;c<f;c++)e=b[c],h.push(this._using.push(e));return h}return this.destruct([b])};b.prototype.waitForAttr=function(b,e){var c;return null!=(c=this.get(b))?e(null,c):this.once("change:"+b,function(c){return function(){return c.waitForAttr(b,e)}}(this))};b.prototype.waitForAttrs=function(b,e){return l.mapping(b,this.waitForAttr,function(c,f){return e(c,_.object(b,f))})};b.get=function(b,
e,c){var f;if(_.isArray(e)){var h,m,k;k=[];h=0;for(m=e.length;h<m;h++)f=e[h],k.push(this.get(b,f));return null!=c&&c.compact?_.compact(k):k}return ModelCacheCache["for"](b).get(this.prototype.typeName,e)};b.waitFor=function(){var b,e,c,f,h,m;b=arguments[0];e=arguments[1];h=4<=arguments.length?G.call(arguments,2,m=arguments.length-1):(m=2,[]);c=arguments[m++];f=h[0];return _.isArray(e)?async.map(e,function(e){return function(h){return e.waitFor(b,h,f,c)}}(this),c):ModelCacheCache["for"](b).waitFor(this.prototype.typeName,
e,c)};b.all=function(b){return ModelCacheCache["for"](b).all(this.prototype.typeName)};b.find=function(){var b,e,c,f;c=arguments[0];b=2<=arguments.length?G.call(arguments,1):[];if(1===b.length)return b=b[0],_.filter(this.all(c),b);e=b[0];f=b[1];return this.find(c,function(b){return b.get(e)===f})};b.findOne=function(){var b;b=1<=arguments.length?G.call(arguments,0):[];return _.first(this.find.apply(this,b))};b.prototype.ready=function(b){b&&(this.isReady?b():(this.waitingForReady||(this.waitingForReady=
[]),this.waitingForReady.push(b)))};b.prototype.setReady=function(){var b,e,c,f;this.isReady=!0;if(this.waitingForReady){e=this.waitingForReady;this.waitingForReady=null;c=0;for(f=e.length;c<f;c++)b=e[c],"function"===typeof b&&b()}};b.prototype._handleError=function(b){return function(e,c,f,h){c=e.status;e=e.responseText;return 400<=c&&500>c?("undefined"!==typeof console&&null!==console&&"function"===typeof console.error&&console.error(e),"function"===typeof b?b(e,null):void 0):h()}};b.prototype.update=
function(){var b,e,c,f,h;_.isString(arguments[0])?(b=arguments[0],h=arguments[1],c=4<=arguments.length?G.call(arguments,2,f=arguments.length-1):(f=2,[]),c=c[0],e=arguments[f++],f={},f[b]=h):(f=arguments[0],c=3<=arguments.length?G.call(arguments,1,b=arguments.length-1):(b=1,[]),c=c[0],e=arguments[b++]);null==c&&!_.isFunction(e)&&(c=e,e=null);(null!=c?c:{}).waitForServer||this.set(f);return this._persistUpdate(f,e)};b.prototype._persistUpdate=function(b,e){return this.api({type:"put",data:b},e)};b.prototype.addToSet=
function(){var b,e,c,f,h,m,k;b=arguments[0];m=arguments[1];h=4<=arguments.length?G.call(arguments,2,f=arguments.length-1):(f=2,[]);f=arguments[f++];h=h[0];null==h&&!_.isFunction(f)&&(h=f,f=function(){});e=null!=h?h:{};h=e.waitForServer;e=e.collectionName;c=this;null==e&&(e=b);h||this.set(b,_.uniq((null!=(k=c.get(b))?k:[]).concat(m)));return this.api({method:e,data:{value:m},success:function(e){return function(f,h){var k;k={};k[b]=_.uniq(c.get(b).concat(m));e.modelCache.enqueueDelta(c,k);return"function"===
typeof h?h(null,f):void 0}}(this)},f)};b.prototype.pull=function(){var b,e,c,f,h,m,k;b=arguments[0];m=arguments[1];h=4<=arguments.length?G.call(arguments,2,f=arguments.length-1):(f=2,[]);f=arguments[f++];h=h[0];null==h&&!_.isFunction(f)&&(h=f,f=function(){});e=null!=h?h:{};h=e.waitForServer;e=e.collectionName;c=this;null==e&&(e=b);h||this.set(b,_.without(null!=(k=c.get(b))?k:[],m));return this.api({method:""+e+"/"+m,type:"delete",success:function(e){return function(f,h){var k;k={};k[b]=_.without(c.get(b),
m);e.modelCache.enqueueDelta(c,k);return"function"===typeof h?h(null,f):void 0}}(this)},f)};b.prototype.run=function(b,e,c){return this.api({method:b,data:e},c)};b.prototype.api=function(b,e){var c,f,h,m,k,l;h=b.method;l=b.type;c=b.data;k=b.success;f=b.datatype;m=this;null==f&&(f="");null==h&&(h="");null==l&&(l="post");null==c&&(c={});null==k&&(k=function(b){return function(d,e){var c;d.id===m.id?b.modelCache.enqueueDelta(m,d):_.isArray(d)&&(c=_.find(d,function(b){return b.id===m.id}),null!=c&&b.modelCache.enqueueDelta(m,
c));return e(null,d)}}(this));null==e&&(e=function(){});this.onId(function(b){return function(){var d;d=b.url();null!=h&&""!==h&&(d+="/"+h);return b._apiQueue.push(function(e){return S({url:d,type:l,data:c,datatype:f,success:function(b){return k(b,e)},error:b._handleError(e)})},e)}}(this));return this};b.prototype.toggle=function(){var b,e,c,f,h;e=arguments[0];f=arguments[1];b=arguments[2];h=5<=arguments.length?G.call(arguments,3,c=arguments.length-1):(c=3,[]);c=arguments[c++];return this[b?"addToSet":
"pull"](e,f,h[0],c)};b.prototype.onId=function(b){var e;e=this;if(e.id)b(e.id);else e.once("change:id",function(c){return function(){return b(e.id)}}(this))};b.prototype.clearCache=function(){var b,e,c;if(this.viewCache){c=this.viewCache;for(b in c)e=c[b],"function"===typeof e.destructor&&e.destructor(),delete this.viewCache[b];return delete this.viewCache}};b.prototype.getView=function(b,e,c){var f,h;h=b.prototype.uniqueId();f=e?h+":"+e:h;null==this.viewCache&&(this.viewCache={});e=this.viewCache;
if(!e[f]){if(!b||!_.isFunction(b)){P("render","view does not exist",h);return}c=_.extend({model:this,modelCache:this.modelCache},c);e[f]=new b(c);this.redelegateOnRemove(e[f])}return e[f]};b.prototype.redelegateOnRemove=function(b){return b.$el.on("remove",function(e){return function(){return _.defer(function(){b.delegateEvents();return e.redelegateOnRemove(b)})}}(this))};return b}(Backbone.Model);l.extendWithModelCacheHelpers(fa);Ma=function(c){function b(d,e){this._update=k(this._update,this);this.modelCache=
null!=e?e.modelCache:void 0;l.debounceEvents(this);b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.destructor=function(){var b,e;this.off();null!=(b=this.modelCache)&&b.off(null,null,this);null!=(e=this.sourceModel)&&e.off(null,null,this);return l.shred(this)};b.prototype.create=function(d,e){var c,f;null==e&&(e={});c=this.modelCache.lock("Collection Create");f=e.success;e.success=function(b){return function(){var d;d=1<=arguments.length?G.call(arguments,0):[];b.modelCache.unlock(c);
return"function"===typeof f?f.apply(null,d):void 0}}(this);null==e.modelCache&&(e.modelCache=this.modelCache);return b.__super__.create.call(this,d,e)};b.prototype.onAddRemove=function(b){return this.ond("add remove reset",b)};b.prototype._update=function(b){var e,c;e=_.sortBy(b,function(b){return b.cid});c=_.sortBy(this.models,function(b){return b.cid});if(!_.isEqual(e,c))return this.reset(b)};b.prototype.owner=function(b){this.owner=b;return this};b.prototype.syncModel=function(b,e,c){var f,h,m,
k;this.sourceModel=b;h=(null!=c?c:{}).fxGetIds;this.modelCache=this.sourceModel.modelCache;m=function(b){return function(){var d,c,f;d=b.sourceModel.get(e);return null!=(c=null!=(f="function"===typeof h?h(d):void 0)?f:d)?c:[]}}(this);f=async.cargo(function(b){return function(b,d){var e;e=_.countBy(m());_.any(b,function(b){return b.id in e})&&k(_.keys(e));return d()}}(this));k=function(b){return function(d){return b._update(b.model.get(b.modelCache.name,d,{compact:!0}))}}(this);this.sync=function(b){return function(){return k(m())}}(this);
this.sourceModel.on("change:"+e,this.sync,this);this.modelCache.on("add:"+this.model.prototype.typeName,function(b){return function(d){f.push(d);return b}}(this));this.sync();return this};b.prototype.syncCache=function(b,e,c){var f,h,m;this.modelCache=b;this.sync=function(b){return function(){return b._update(_.filter(b.model.all(b.modelCache),c))}}(this);f=this.model.prototype.typeName;this.modelCache.on("add:"+f,function(b){return function(d){if(c(d))return b.add(d)}}(this),this);this.modelCache.on("remove:"+
f,function(b){return function(d){if(c(d))return b.remove(d)}}(this),this);this.modelCache.on(" reset:"+f,function(b){return function(){return b.sync()}}(this),this);h=0;for(m=e.length;h<m;h++)b=e[h],this.modelCache.on("change:"+f+":"+b,this.sync,this);this.sync();return this};b.prototype.syncSubModels=function(b,e){this.sourceModel=b;null==this.modelCache&&(this.modelCache=this.sourceModel.modelCache);this.sync=function(b){return function(){var d,c,m,k,l,x,n,s;l=null!=(c=b.sourceModel.get(e))?c:[];
m=function(){var b,e,c;c=[];b=0;for(e=l.length;b<e;b++)d=l[b],k=_.find(this.models,function(b){return b.id===d.id}),null!=k?this.modelCache.enqueueDelta(k,d):k=new this.model(d,{modelCache:this.modelCache,collection:this}),c.push(k);return c}.call(b);s=b.models;x=0;for(n=s.length;x<n;x++)c=s[x],null==c.id&&m.push(c);return b._update(m)}}(this);this.sourceModel.on("change:"+e,this.sync,this);this.sync();return this};return b}(Backbone.Collection);l.extendWithModelCacheHelpers(Ma);fb=function(c){function b(){return b.__super__.constructor.apply(this,
arguments)}s(b,c);b.prototype.addPlaceholder=function(b){var e;e=_.uniqueId("placeholder");_.extend(b,{id:e});this.add(b);return function(b){return function(){return b.remove(e)}}(this)};return b}(Ma);vb=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype["default"]=function(){return{}};b.prototype.sync=function(b,e,c){var f,h,m,k;m=c.success;switch(b){case "create":throw Error("not implemented");case "read":return b=null!=(f=ka.get(e.id))?f:{},_.defaults(b,
this["default"]()),"function"===typeof m?m(e,b,c):void 0;case "update":b=e.toJSON();f=this["default"]();delete b.id;for(h in b)k=b[h],_.isEqual(k,f[h])&&delete b[h];_.isEmpty(b)?ka.unset(e.id):ka.set(e.id,b);return"function"===typeof m?m(e,e.toJSON(),c):void 0;case "delete":return ka.unset(e.id),"function"===typeof m?m(e,null,c):void 0}};b.prototype._persistUpdate=function(b,e){var c;ka.set(this.id,_.extend(null!=(c=ka.get(this.id))?c:this["default"](),b));return"function"===typeof e?e(null,this.toJSON()):
void 0};b.prototype.toggle=function(b,e){if(this.inSet(b,e))return this.pull(b,e),!1;this.addToSet(b,e);return!0};b.prototype.inSet=function(b,e){var c;return 0<=D.call(null!=(c=this.get(b))?c:[],e)};b.prototype.addToSet=function(b,e){var c;return this.save(b,(null!=(c=this.get(b))?c:[]).concat(e))};b.prototype.pull=function(b,e){var c;return this.save(b,_.without(null!=(c=this.get(b))?c:[],e))};return b}(fa);Backbone.prepareData=function(c,b,d){var e,g;g={token:y.myToken()};e=function(){switch(c){case "create":case "update":return _.extend(b.toJSON(),
g);case "delete":return g;default:return{}}}();"read"===c&&_.isArray(d.fields)&&(e.fields=d.fields.join(","));return"read"===c?$.param(e):JSON.stringify(e)};Backbone.syncOriginal=Backbone.sync;Backbone.sync=function(c,b,d){var e,g,f;switch(c){case "update":return null!=d?"function"===typeof d.success?d.success(b,{},d):void 0:void 0;case "create":d.wait||(e=b.modelCache.lock("Backbone.sync create"),g=_.once(function(){return b.modelCache.unlock(e)}),f=function(b){return function(){"function"===typeof b&&
b.apply(null,arguments);return g()}},setTimeout(f(),1E4),d.success=f(d.success),d.error=f(d.error));break;case "delete":if(/^placeholder/.test(b.id))return}return Backbone.syncOriginal.apply(Backbone,arguments)};var Nf,Bc,F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c},D=[].indexOf||function(c){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===c)return b;
return-1};Bc=function(c){function b(){b.__super__.constructor.apply(this,arguments);this._initSubEventsOn("prefs")}s(b,c);b.prototype.prefNames=[];b.prototype.toJSON=function(d){var e,c;null==d&&(d={});e=b.__super__.toJSON.apply(this,arguments);c=function(b){return function(d,m,k){var l,x,n,s,v,w;w=[];n=0;for(s=d.length;n<s;n++)x=d[n],l=k?""+k+"_"+x:x,x=null!=(v=null!=m?m[x]:void 0)?v:b.getPref(x),_.isObject(x)&&!_.isArray(x)?w.push(c(_.keys(x),x,l)):(e[l]=x,w.push(e[""+l+"_"+x]=!0));return w}}(this);
d.prefs&&c(this.prefNames);return e};b.prototype.getPref=function(b){var e;return null!=(e=this.get("prefs"))?e[b]:void 0};b.prototype.setPref=function(b,e){return this.update("prefs/"+b,e)};b.prototype.set=function(d,e){var c,f,h;d=_.clone(d);if(null!=d.prefs)for(c in f=d.prefs,f)h=f[c],"none"===h&&(h="disabled"),"owners"===h&&(h="admins"),f[c]=h;return b.__super__.set.apply(this,arguments)};return b}(fa);Nf=function(c){function b(){b.__super__.constructor.apply(this,arguments);this._initSubEventsOn("myPrefs")}
s(b,c);b.prototype.myPrefNames=[];b.prototype.myPrefDefaults={};b.prototype.toJSON=function(d){var e,c,f,h,m,k;null==d&&(d={});e=b.__super__.toJSON.apply(this,arguments);if(d.prefs){k=this.myPrefNames;h=0;for(m=k.length;h<m;h++)c=k[h],f=this.getPref(c),e[c]=f,e[""+c+"_"+f]=!0}return e};b.prototype.getPref=function(d){var e,c;return 0<=D.call(this.myPrefNames,d)?null!=(e=null!=(c=this.get("myPrefs"))?c[d]:void 0)?e:this.myPrefDefaults[d]:b.__super__.getPref.apply(this,arguments)};b.prototype.setPref=
function(d,e){return 0<=D.call(this.myPrefNames,d)?this.setMyPref(d,e):b.__super__.setPref.apply(this,arguments)};b.prototype.setMyPref=function(b,e){var c;this.api({type:"put",method:"myPrefs/"+b,data:{value:e}});c=_.clone(this.get("myPrefs"));c[b]=e;return this.set({myPrefs:c})};return b}(Bc);var Of,Pf,Nd,F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c},D=[].indexOf||
function(c){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===c)return b;return-1};Of=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);return b}(fa);Pf=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.model=Of;b.prototype.initialize=function(){this.memberIndex={};this.on("add",function(b){return this.memberIndex[b.get("idMember")]=b});this.on("remove",function(b){return delete this.memberIndex[b.get("idMember")]});
return this.on("reset",function(){var b,e,c,f,h;this.memberIndex={};f=this.models;h=[];e=0;for(c=f.length;e<c;e++)b=f[e],h.push(this.memberIndex[b.get("idMember")]=b);return h})};b.prototype.getMember=function(b){var e;b=null!=(e=null!=b?b.id:void 0)?e:b;return this.memberIndex[b]};return b}(Ma);Nd=function(){function c(){}c.prototype.orderedVisibleMembers=function(){return this.memberList.sortBy(function(b){return function(d){return function(){if(y.isMe(d))return"0";if(this.isDeactivated(d))return"5";
if(this.isVirtual(d))return"4";switch(d.get("status")){case "active":return"1";case "idle":return"2";default:return"3"}}.call(b)+d.get("fullName")}}(this)).filter(function(b){return function(d){return(!b.isDeactivated(d)||b.canSeeDeactivated(y.me()))&&!b.isObserver(d)}}(this))};c.prototype.getMemberType=function(b){var d,e;d="function"===typeof this.getOrganization&&null!=(e=this.getOrganization())&&e.isPremOrgAdmin(b)?"admin":this.getExplicitMemberType(b);"public"!==d&&("function"===typeof this.isVirtual&&
this.isVirtual(b))&&(d="virtual");return d};c.prototype._refreshMemberships=function(){return this._memberships.update(this.get("memberships"))};c.prototype._getMembershipFor=function(b){this._memberships||(this._memberships=new Pf,this._refreshMemberships(),this.on("change:memberships",function(b){return function(){return b._refreshMemberships()}}(this)));return this._memberships.getMember(b)};c.prototype.getMembershipFor=function(b){var d;return null!=(d=this._getMembershipFor(b))?d.toJSON():void 0};
c.prototype.isMember=function(b){return null!=this._getMembershipFor(b)};c.prototype.isVirtual=function(b){return"ghost"===(null!=b?b.get("memberType"):void 0)};c.prototype.isDeactivated=function(b){var d;return!0===(null!=(d=this._getMembershipFor(b))?d.get("deactivated"):void 0)};c.prototype.isUnconfirmed=function(b){var d;return!0===(null!=(d=this._getMembershipFor(b))?d.get("unconfirmed"):void 0)};c.prototype.isObserver=function(b){return"observer"===this.getExplicitMemberType(b)};c.prototype.isPremOrgAdmin=
function(b){var d,e;_.isString(b)&&(b=this.Member.get(b));b=null!=(d=null!=b?"function"===typeof b.get?b.get("idPremOrgsAdmin"):void 0:void 0)?d:[];d=this.getOrganization?null!=(e=this.getOrganization())?e.id:void 0:this.id;return 0<=D.call(b,d)};c.prototype.getExplicitMemberType=function(b){var d,e;return this.isDeactivated(b)?"deactivated":this.isUnconfirmed(b)?"unconfirmed":(d=this._getMembershipFor(b))?d.get("memberType"):"function"===typeof this.getOrganization&&null!=(e=this.getOrganization())&&
e.isMember(b)?"org":"public"};c.prototype.canSeeDeactivated=function(b){var d,e;return this.isMember(b)||(null!=(d=b.organizationList)?d.get(null!=(e=this.getOrganization())?e.id:void 0):void 0)};return c}();var pb,xb,Cc,Qb,Dc,Qf,Rf,F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c},G=[].slice;pb=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}
s(b,c);b.prototype.typeName="Action";b.prototype.urlRoot="/1/actions";b.getListForModel=function(){var b,e,c,f;e=arguments[0];b=2<=arguments.length?G.call(arguments,1):[];if(2===b.length)f=b[0],c=b[1];else if(1===b.length)b=b[0],f=b.typeName,c=b.id;else return;f=f.toLowerCase();return _.filter(this.all(e),function(b){return b.includesModel(f,c)})};b.prototype.getModel=function(){return this.collection.options.model};b.prototype.triggerCacheEvents=function(b,e){var c,f,h,m;m=this.idModels();f=0;for(h=
m.length;f<h;f++)c=m[f],b.trigger(""+e+":"+this.typeName+":"+c)};b.prototype.isMember=function(b){return this.get("idMemberCreator")===b.id};b.prototype.getDate=function(){return I.parse(this.get("date"))};b.prototype.getBoard=function(){var b,e;return this.Board.get(null!=(b=this.get("data"))?null!=(e=b.board)?e.id:void 0:void 0)};b.prototype.getCard=function(){var b,e;return this.Card.get(null!=(b=this.get("data"))?null!=(e=b.card)?e.id:void 0:void 0)};b.prototype.editable=function(){var b;b=this.get("idMemberCreator");
return"commentCard"===this.get("type")&&y.isMe(b)};b.prototype.deletable=function(){var b,e,c;e=this.get("idMemberCreator");return"commentCard"===this.get("type")&&("observer"!==(null!=(c=this.getBoard())?c.getExplicitMemberType(y.me()):void 0)&&y.isMe(e)||null!=(b=this.getBoard())&&0<b.compareMemberType(y.me(),this.Member.get(e),{mode:"commentDelete"})&&!(!b.isPremOrgAdmin(y.me())&&b.isPremOrgAdmin(e)))};b.prototype.isPlaceholder=function(){return null==this.get("date")};b.prototype.includesModel=
function(b,e){var c,f;b=b.toLowerCase();return(null!=(c=this.get("data"))?null!=(f=c[b])?f.id:void 0:void 0)===e||"member"===b&&this.get("idMemberCreator")===e};b.prototype.idModels=function(){var b,e,c,f;f=null!=(c=this.get("data"))?c:{};c=[];for(b in f)e=f[b],null!=(null!=e?e.id:void 0)&&c.push(e.id);b=this.get("idMemberCreator");null!=b&&c.push(b);return c};b.prototype.takingTooLong=function(){this.isTakingTooLong=!0;return this.trigger("takingTooLong")};return b}(fa);Cc=function(c){function b(b){this.modelCache=
b}s(b,c);b.getActionListMaker=function(b){var e,c;null==this._makers&&(this._makers={});return null!=(e=this._makers)[c=b.name]?e[c]:e[c]=new this(b)};b.prototype.getCardUrl=function(d,e){var c,f;return null!=(null!=(f=c=this.Card.get(e.id))?f.get("url"):void 0)?C.getCardUrl(c):b.__super__.getCardUrl.apply(this,arguments)};b.prototype.getBoardUrl=function(d){var e,c;return null!=(null!=(c=e=this.Board.get(d.id))?c.get("url"):void 0)?C.getBoardUrl(this.modelCache,e):b.__super__.getBoardUrl.apply(this,
arguments)};b.prototype.getMember=function(b){return this.Member.get(b)};b.prototype.getBoard=function(b){return this.Board.get(b)};b.prototype.attachmentPreviewEntity=function(d){var e;e=b.__super__.attachmentPreviewEntity.call(this,d);ba.isHighDPI()&&null!=d.previewUrl2x&&(e.url=d.previewUrl2x);return e};b.prototype.attachmentEntity=function(d){d=b.__super__.attachmentEntity.call(this,d);d.known=Bb.interpret(d.url,this.modelCache);return d};return b}(Lb);l.extendWithModelCacheHelpers(Cc);xb=function(c){function b(){return b.__super__.constructor.apply(this,
arguments)}s(b,c);b.prototype.model=pb;b.prototype.initialize=function(b,e){this.options=e};b.prototype.comparator=function(b){return-b.getDate()||0};b.prototype._getRelatedBoards=function(b){var e,c,f;c=function(){var b,d,c,g,k,l,n;c=this.models;n=[];b=0;for(d=c.length;b<d;b++)if(f=c[b],"moveCardToBoard"===(g=f.get("type"))||"moveCardFromBoard"===g)e=f.get("data"),n.push((null!=(k=e.boardTarget)?k.id:void 0)||(null!=(l=e.boardSource)?l.id:void 0));return n}.call(this);c=_.compact(_.uniq(c));c=_.reject(c,
function(b){return function(d){return null!=b.Board.get(d)}}(this));return 0===c.length?b():M["for"](this.modelCache).loadBoardNames(c,b)};return b}(Ma);Qb=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(b){this.renderOpts=b.renderOpts;this.makeDebouncedMethods("render");this.listenTo(this.collection,"add remove reset",this.renderDebounced);return this.actionViews=[]};b.prototype.getActionListMaker=function(){return Cc.getActionListMaker(this.modelCache)};
b.prototype.render=function(){return this.collection._getRelatedBoards(function(b){return function(){var e,c,f,h,m,k,l,x,n;c=b.saveEdits();f=c[0];c=c[1];e=b.collection.models;e=_.sortBy(e,function(b){return-I.parse(b.get("date"))});e=b.getActionListMaker().groupActions(e,{limit:b.renderOpts.limit});(l=!b.$el.html())&&b.removeActionViews();b.$(".js-board-member-profile-no-activity").toggleClass("hide",0<e.length);k=x=0;for(n=e.length;x<n;k=++x)if(m=e[k],h=_.first(m),l||b.actionGroupNeedsRerender(m,
h,k))h=b.rerenderActionGroup(m,h,k,e,{rerenderAll:l}),b.restoreEdits(f,c,h)}}(this))};b.prototype.saveEdits=function(){var b,e;e=[];b=0;_.each(this.$el.find(".editing textarea"),function(c){return function(c){var g;g=l.getElem(c);e.push(g.val());if(g.is(":focus"))return g.parents(".editing").addClass("focused"),b=l.getCaretPosition(c)}}(this));null!=e&&e.reverse();return[e,b]};b.prototype.restoreEdits=function(b,e,c){if(c.$el.hasClass("editing"))return c.$("textarea").val(b.pop()),b=l.getElem(c.$("textarea")),
c.$el.hasClass("focused")&&l.setCaretPosition(b,e),c.openEditView()};b.prototype.rerenderActionGroup=function(b,e,c,f,h){var m,k;b=1===b.length?/^comment/.test(e.get("type"))?this.subview(Qf,e,this.renderOpts):this.subview(Dc,e,this.renderOpts):this.subview(Rf,e,_.defaults({list:b},this.renderOpts));h.rerenderAll?(this.appendSubview(b),this.actionViews.push(b)):(this.insertActionView(b,c),1===this.actionViews.length&&1===f.length?(this.actionViews[c].remove(),this.actionViews.splice(c,1,b)):null==
this.actionViews[c+1]?this.actionViews.splice(c,1,b):f.length<=this.actionViews.length?this.actionViews[c+1].model.id===(null!=(m=_.first(f[c+1]))?m.id:void 0)?(this.actionViews[c].remove(),this.actionViews.splice(c,1,b)):(this.actionViews.splice(c,0,b),null!=(k=this.actionViews[this.actionViews.length-1])&&k.remove(),this.actionViews=this.actionViews.splice(0,this.actionViews.length-1)):this.actionViews.splice(c,0,b));return b};b.prototype.actionGroupNeedsRerender=function(b,e,c){var f,h,m;if((null!=
(h=this.actionViews[c+1])?null!=(m=h.model)?m.id:void 0:void 0)===e.id)this.actionViews[c].remove(),this.actionViews.splice(c,1);c=this.actionViews[c];if(1===b.length&&(!c||e.id!==c.model.id))return!0;if(1<b.length){if(null==(null!=c?c.list:void 0))return!0;c=c.list;f=h=0;for(m=b.length;h<m;f=++h)if(e=b[f],f=null!=c?c[f]:void 0,(null!=f?f.id:void 0)!==e.id)return!0}return!1};b.prototype.insertActionView=function(b,e){return this.actionViews[e]?(b.delegateEvents(),b.render().$el.insertBefore(this.actionViews[e].el)):
this.appendSubview(b)};b.prototype.removeActionViews=function(){var b,e,c,f;f=this.actionViews;e=0;for(c=f.length;e<c;e++)b=f[e],b.remove();this.actionViews=[]};b.prototype.delegateEvents=function(){var d,e,c,f;b.__super__.delegateEvents.apply(this,arguments);f=this.actionViews;e=0;for(c=f.length;e<c;e++)d=f[e],d.delegateEvents()};b.prototype.undelegateEvents=function(){var d,e,c,f;b.__super__.undelegateEvents.apply(this,arguments);f=this.actionViews;e=0;for(c=f.length;e<c;e++)d=f[e],d.undelegateEvents()};
b.prototype.remove=function(){this.removeActionViews();return b.__super__.remove.apply(this,arguments)};return b}(A);Dc=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="phenom phenom-action clearfix";b.prototype.getActionListMaker=function(){return Cc.getActionListMaker(this.modelCache)};b.prototype.initialize=function(b){var e;this.context=b.context;this.listenTo(this.model,"takingTooLong change",this.render);b=this.model.get("data");if(null!=
(null!=(e=b.card)?e.id:void 0)&&b.board)return this.listenTo(this.modelCache,"remove:Action:"+this.model.get("id"),function(b){return function(){return b.remove()}}(this))};b.prototype.events={"click .js-show-mem-menu":"viewMemberActionMenu","click .js-open-attachment-viewer":"openAttachmentViewer"};b.prototype.destructor=function(){};b.prototype.addAdditionalInfo=function(b){var e,c,f,h;h=b.entities;c=0;for(f=h.length;c<f;c++)if(e=h[c],e[e.type+"Type"]=!0,e&&(e.id||e.idContext))e.isContext=b.isContext=
e.id===this.context.id||e.idContext===this.context.id};b.prototype.addContextData=function(b){var e,c,f,h,m,k,l,x,n,s;this.options.showBoard&&(e=this.Board.get(null!=(c=this.model.get("data"))?null!=(f=c.board)?f.id:void 0:void 0),null!=e&&(b.board=e.toJSON({prefs:!0,url:!0}),b.boardPLevelIconClass=e.getPermLevelIconClass(),b.boardPLevelAltText=e.getPermLevelAltText()));this.options.showOrganization&&(e=this.Organization.get(null!=(h=this.model.get("data"))?null!=(m=h.organization)?m.id:void 0:void 0),
null!=e&&(b.organization=e.toJSON({prefs:!0,url:!0}),b.orgPLevelIconClass=e.getPermLevelIconClass(),b.orgPLevelAltText=e.getPermLevelAltText()));b.showAttachmentPreview=!this.options.compact;b.canDelete=!this.model.isPlaceholder()&&!this.options.compact&&!this.options.readOnly&&this.model.deletable();b.canEdit=!this.model.isPlaceholder()&&!this.options.compact&&!this.options.readOnly&&this.model.editable();b.canPromoteToCard=("4dfa1af85ace37e9f202ad1c"===(k=null!=(l=this.model.getBoard())?l.id:void 0)||
"51c323b425899096b700000f"===k)&&"commentCard"===this.model.get("type")&&(null!=(x=this.model.getCard())?x.editable():void 0);b.member=null!=(n=this.Member.get(this.model.get("idMemberCreator")))?n.toJSON():void 0;return null!=(s=b.member)?s.url=C.getMemberProfileUrl(b.member.id):void 0};b.prototype.renderFromData=function(b){var e,c,f,h,m,k,l,x,n,s;this.addContextData(b);e={entity:v.entity,member:v.member};b.entities=b.entities.slice(1);b.useEmbedly=!this.options.compact&&("commentCard"===(f=this.model.get("type"))||
"copyCommentCard"===f);b.usePreviews=!this.options.compact&&"addAttachmentToCard"===this.model.get("type");P("actions",b);switch(this.model.get("type")){case "commentCard":this.$el.addClass("phenom-comment");break;case "addAttachmentToCard":this.$el.addClass("phenom-attachment");break;default:this.$el.addClass("phenom-other")}this.$el.html(v.fill("action",b,{},e));if(b.useEmbedly){e=this.$(".js-embedly");x=b.entities;k=0;for(l=x.length;k<l;k++)if(f=x[k],"comment"===f.type&&null!=f.embedly)try{for(h in n=
JSON.parse(f.embedly),n)m=n[h],m["type_"+m.type]=!0,m.requireHttps=!0,e.show().append(v.fill("embedly",m))}catch(B){}}if(!b.hasMoreThanOneChild&&"addAttachmentToCard"!==(s=this.model.get("type"))&&"attachmentPreview"!==s&&"commentCard"!==s&&"copyCommentCard"!==s)h=_.last(this.$(".phenom-desc").contents()),n=$.trim(h.nodeValue),m=".",0<n.length&&(m=" "+$.trim(h.nodeValue)+"."),this.$(".phenom-desc").contents().last().remove(),this.$(".phenom-desc").append(_.escape(m));b.usePreviews&&(b=_.filter(b.entities,
function(b){return"attachment"===b.type}),_.isEmpty(b)||(c=this.$(".js-previews"),Bb.previewHtml(b[0].url,function(b,d){c.empty();if(null!=b){if(null!=b.login)return $("<div>").addClass("attachment-extra-info-login").html(b.login).appendTo(c),c.removeClass("hide")}else if(null!=d)return $("<div>").addClass("attachment-extra-info").html(d).appendTo(c),c.removeClass("hide")})));I.update(this.el);this.model.isTakingTooLong?this.$el.addClass("unsent"):this.$el.removeClass("unsent");return this};b.prototype.render=
function(){var b,e,c;P("render","rendering action");b={saved:null!=this.model.id,entities:this.getActionListMaker().getEntityList(this.model).entities,date:this.model.get("date"),hasChildren:!1,dateLastEdited:null!=(e=this.model.get("data"))?e.dateLastEdited:void 0,textData:null!=(c=this.model.get("data"))?c.textData:void 0};this.addAdditionalInfo(b);return this.renderFromData(b)};b.prototype.viewMemberActionMenu=function(b){var e,c;l.stop(b);e=this.Member.get(null!=(c=$(b.target).closest("[idmember]").attr("idmember"))?
c:this.model.get("idMemberCreator"));c=22;0<$(b.target).closest(".member").length&&(c=36);w.toggle({elem:this.$(b.target).closest(".js-show-mem-menu"),top:c,view:Vb,options:{model:e,modelCache:this.modelCache}})};b.prototype.openAttachmentViewer=function(b){var e;e=$(b.target);0<e.closest(".window-main-col").length&&(l.stop(b),b=e.closest(".js-open-attachment-viewer").attr("data-idattachment"),(new Ec({model:this.model.getCard(),modelCache:this.modelCache,idAttachment:b})).render())};return b}(A);
Rf=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(d){this.opts=d.opts;this.list=d.list;return b.__super__.initialize.apply(this,arguments)};b.prototype.render=function(){var b,e,c,f,h;P("render","rendering action");b=this.getActionListMaker().getEntityLists(this.list)[0];e=b.entities;b=b.children;e={saved:null!=this.model.id,entities:e,date:this.model.get("date"),hasChildren:!0,dateLastEdited:null!=(c=this.model.get("data"))?c.dateLastEdited:
void 0,children:_.sortBy(b,function(b){return b.id}),hasMoreThanOneChild:1<b.length};this.addContextData(e);h=e.children;b=0;for(f=h.length;b<f;b++)c=h[b],this.addAdditionalInfo(c);this.addAdditionalInfo(e);return this.renderFromData(e)};return b}(Dc);Qf=na(Tb,ub,function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.events=l.extendEvents({"click .action-comment":"clickComment","click .js-confirm-delete-action":"confirmDeleteAction","click .js-promote-to-card":"promoteToCard",
"click .js-edit-action":"editAction","click .js-save-edit":"saveEdit","keypress .js-text":"saveEdit","keyup .js-text":"keyAutoMention","keydown .js-text":"keydownJsText","click .js-comment-add-attachment":"commentAddAttachment","click .js-comment-mention-member":"commentMentionMember","click .js-comment-add-emoji":"commentAddEmoji"});b.prototype.confirmDeleteAction=function(b){l.stop(b);pa.toggle({elem:$(b.target).closest(".js-confirm-delete-action")[0],top:22,model:this.model,title:"Delete Comment?",
text:"Deleting a comment is forever. There is no undo.",confirmText:"Delete Comment",confirmBtnClass:"negate",fxConfirm:function(b){return function(d){n("Card","Delete Comment");return b.model.destroy()}}(this)})};b.prototype.getTextInput=function(){return this.$(".js-text")};b.prototype.getMentionTarget=function(){return this.$(".js-comment-mention-member:visible")[0]};b.prototype.getEmojiTarget=function(){return this.$(".js-comment-add-emoji:visible")[0]};b.prototype.editAction=function(b){l.stop(b);
if(!this.$el.hasClass("editing"))return this.$el.addClass("editing"),this.$("textarea").focus().select(),this.openEditView()};b.prototype.openEditView=function(){this.$el.append(v.fill("comment_edit_controls",{},{},{comment_options:v.comment_options}));this.$(".js-text").attr("placeholder","")};b.prototype.keydownJsText=function(b){return l.isForceSubmitKey(b)?this.saveEdit(b):this.checkInsert(b)};b.prototype.saveEdit=function(b){var e;if("keypress"!==b.type||l.isForceSubmitKey(b)||13===b.keyCode&&
(!$(b.target).is("textarea")||$(b.currentTarget).hasClass("single-line")))e=this.$(".js-text").val(),/^\s*$/.test(e)?(this.$(".js-text").val("").focus(),this.$(".js-text").attr("placeholder","Must have at least ONE character...")):(l.stop(b),this.$(".js-spinner").show(),this.$(".js-hide-on-sending").hide(),this.$(".current-comment").text(e),ma.cancelEdits(),this.model.set("data",_.extend(this.model.get("data"),{text:e})).update("text",e),n("Card","Edit Comment"))};b.prototype.showError=function(b){};
b.prototype.cancelEdit=function(b){b&&l.stop(b);w.hide();ma.cancelEdits()};b.prototype.clickComment=function(b){"Card"===this.context.typeName||$(b.target).is("a,textarea")||(l.stop(b),b=this.getActionListMaker().getEntityList(this.model).entities,b=_.find(b,function(b){return"card"===b.type}),C.showCardDetail(this.Card.get(b.id)))};b.prototype.promoteToCard=function(){var b,e,c,f;c=this.model.get("idMemberCreator");c=this.Member.get(c);f=this.model.get("data").text;null!=c?(e="Proposed by ["+c.get("fullName")+
"](/"+c.get("username")+")",b="@"+c.get("username")+" Your proposal has been accepted."):(e="Promoted from comment",b=null);return async.waterfall([function(b){return function(d){return b.model.getCard().getList().cardList.create({name:f,desc:e,pos:"bottom"},{success:function(b){return d(null,b)},error:function(){return d("couldn't create card")}})}}(this),function(e){return function(e,c){return null!=b?e.addComment(b):c()}}(this)],function(){})};b.prototype.getCard=function(){return this.model.getCard()};
return b}(Dc));var eb,Sf,db,Od,F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c},k=function(c,b){return function(){return c.apply(b,arguments)}};Sf=function(c){function b(d){b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.typeName="Announcement";b.prototype._key=function(){return"announcement-"+this.id+"-read"};b.prototype.isUnread=function(){return!ka.get(this._key())};
b.prototype.markRead=function(){$.post("/announcements/dismiss",{id:this.id});ka.set(this._key(),!0);return this.trigger("change:unread")};return b}(fa);Od=function(c){function b(d,e){this.requiresLogin=e.requiresLogin;this.dataUrl=e.dataUrl;this.sync=k(this.sync,this);b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.model=Sf;b.prototype.sync=function(b,e,c){if(!this.requiresLogin||y.isLoggedIn())return $.ajax({url:this.dataUrl,success:function(b){return"function"===typeof c.success?
c.success(e,b,c):void 0}})};b.prototype.getUnread=function(){return this.filter(function(b){return b.isUnread()})};b.prototype.unreadCount=function(){return this.filter(function(b){return b.isUnread()}).length};b.prototype.top=function(){return this.detect(function(b){return b.isUnread()})};return b}(Ma);db=eb=null;_.defer(function(){var c,b,d,e;db=new Od([],{requiresLogin:!0,dataUrl:"/announcements"});eb=new Od([],{requiresLogin:!1,dataUrl:"/announcements/all"});d=l.getMs({minutes:10+5*Math.random()});
e=null;b=("function"===typeof document.hasFocus?document.hasFocus():void 0)||!0;c=function(){if(b&&(null==e||Date.now()-e>d))return db.fetch(),e=Date.now()};$(window).on("focus",function(d){b=!0;return c()});$(window).on("blur",function(d){return b=!1});setInterval(c,d/4);return c()});var Tf,Uf,Pa,Pd,Vf,Wf,Xf,Yf,Zf,$f,ag,bg,k=function(c,b){return function(){return c.apply(b,arguments)}},F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=
b.prototype;c.prototype=new d;c.__super__=b.prototype;return c};Pd=function(c){function b(){this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="badges";b.prototype.initialize=function(b){var e,c,f,h;f=[$f,ag,bg,Xf,Wf,Uf,Vf,Yf,Tf,Zf];h=[];e=0;for(c=f.length;e<c;e++)b=f[e],h.push(new b(this,{modelCache:this.modelCache}));this.badges=h};b.prototype.render=function(){var b;this.$el.append(function(){var e,c,f,h;f=this.badges;h=[];e=0;for(c=
f.length;e<c;e++)b=f[e],b.visible()&&h.push(b.render().$el);return h}.call(this));return this};b.prototype.remove=function(){var d,e,c,f,h;b.__super__.remove.apply(this,arguments);f=this.badges;h=[];e=0;for(c=f.length;e<c;e++)d=f[e],h.push(d.remove());return h};return b}(A);Pa=function(){function c(b,d){var e;this.badgesView=b;this.modelCache=d.modelCache;this.render=k(this.render,this);null==this.$el&&(this.$el=$("<div>"));if(0<this.dependentBadges.length){var c,f,h,m;h=this.dependentBadges;m=[];
c=0;for(f=h.length;c<f;c++)e=h[c],m.push("change:badges."+e);this.badgesView.listenTo(this.badgesView.model,m.join(" "),this.render)}}c.prototype.shouldUpdate=!0;c.prototype.dependentBadges=[];c.prototype.additionalClasses=[];c.prototype.rendered=!1;c.prototype.visible=function(){throw Error("Badge subclasses must specify a `visible` predicate");};c.prototype.update=function(){this.shouldUpdate&&this.$el.attr("title",_.result(this,"title")).find(".badge-text").html(this.text?_.result(this,"text"):
"");return this};c.prototype.remove=function(){var b;null!=(b=this.$el)&&b.detach();return this.rendered=!1};c.prototype.render=function(){var b,d;if(this.rendered)return this.visible()?this.update():this.remove(),this;if(!this.visible())return this;d=this.text?_.result(this,"text"):"";b=_.result(this,"icon");this.$el.attr("title",_.result(this,"title")).attr("class","").addClass("badge").addClass(_.result(this,"additionalClasses").join(" ")).toggleClass("badge-state-image-only",!d).html(v.fill("badge",
{text:d,icon:b}));b=_.find(this.badgesView.badges,function(b){return function(d){return d.rendered&&d.position>b.position}}(this));null==b?this.badgesView.$el.append(this.$el):this.$el.insertBefore(b.$el);this.rendered=!0;return this};c.prototype.badge=function(b){var d;return null!=(d=this.badgesView.model.get("badges"))?d[b]:void 0};return c}();l.extendWithModelCacheHelpers(Pa);$f=function(c){function b(){var d,e;b.__super__.constructor.apply(this,arguments);this._cachedNotificationCount=null;e=
function(){var b,e,c,m;c=["add","remove","change"];m=[];b=0;for(e=c.length;b<e;b++)d=c[b],m.push(""+d+":Notification:"+this.badgesView.model.id);return m}.call(this);this.badgesView.listenTo(this.modelCache,e.join(" "),function(b){return function(){b._cachedNotificationCount=null;return b.render()}}(this))}s(b,c);b.prototype.icon="notification";b.prototype.position=0;b.prototype.visible=function(){return 0<this.notificationCount()};b.prototype.notificationCount=function(){null==this._cachedNotificationCount&&
(this._cachedNotificationCount=this.badgesView.model.id?_.count(this.Notification.all(),function(b){return function(e){var c,f;return e.get("unread")&&(null!=(c=e.get("data"))?null!=(f=c.card)?f.id:void 0:void 0)===b.badgesView.model.id}}(this)):0);return this._cachedNotificationCount};b.prototype.text=function(){return this.notificationCount().toString()};b.prototype.title=function(){return"This card has "+l.formatCount(this.notificationCount(),"unread notification")+"."};b.prototype.additionalClasses=
["badge-state-unread-notification"];return b}(Pa);ag=function(c){function b(){b.__super__.constructor.apply(this,arguments);this.badgesView.listenTo(this.badgesView.model,"change:subscribed",this.render)}s(b,c);b.prototype.shouldUpdate=!1;b.prototype.position=1;b.prototype.icon="follow";b.prototype.visible=function(){return this.badgesView.model.get("subscribed")};b.prototype.title="You are subscribed to this card.";return b}(Pa);bg=function(c){function b(){return b.__super__.constructor.apply(this,
arguments)}s(b,c);b.prototype.position=2;b.prototype.dependentBadges=["votes","viewingMemberVoted"];b.prototype.icon="vote";b.prototype.additionalClasses=function(){var b;b=["badge-state-votes"];this.badge("viewingMemberVoted")&&b.push("badge-state-voted");return b};b.prototype.title=function(){return"This card has "+l.formatCount(this.voteCount(),"vote")+"."};b.prototype.text=function(){return l.formatCount(this.voteCount(),"vote")};b.prototype.visible=function(){return 0<this.voteCount()};b.prototype.voteCount=
function(){var b;return null!=(b=this.badge("votes"))?b:0};b.prototype.update=function(){this.$el.toggleClass("badge-state-voted",this.badge("viewingMemberVoted"));return b.__super__.update.apply(this,arguments)};return b}(Pa);Xf=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.shouldUpdate=!1;b.prototype.position=3;b.prototype.dependentBadges=["description"];b.prototype.icon="desc";b.prototype.title="This card has a description.";b.prototype.visible=
function(){return this.badge("description")};return b}(Pa);Wf=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.position=4;b.prototype.dependentBadges=["comments"];b.prototype.icon="comment";b.prototype.title=function(){return"This card has "+l.formatCount(this.commentCount(),"comment")+"."};b.prototype.text=function(){return this.commentCount().toString()};b.prototype.visible=function(){return 0<this.commentCount()};b.prototype.commentCount=function(){var b;
return null!=(b=this.badge("comments"))?b:0};return b}(Pa);Uf=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.position=5;b.prototype.dependentBadges=["attachments"];b.prototype.icon="attachment";b.prototype.attachmentCount=function(){var b;return null!=(b=this.badge("attachments"))?b:0};b.prototype.visible=function(){return 0<this.attachmentCount()};b.prototype.text=function(){return this.attachmentCount().toString()};b.prototype.title=function(){return"This card has "+
l.formatCount(this.attachmentCount(),"attachment")+"."};return b}(Pa);Vf=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.position=6;b.prototype.dependentBadges=["checkItems","checkItemsChecked"];b.prototype.icon="checklist";b.prototype.title=function(){return"This card has "+this.badge("checkItemsChecked")+" of "+this.badge("checkItems")+" checklist items completed."};b.prototype.visible=function(){return this.badge("checkItems")};b.prototype.text=
function(){return""+this.badge("checkItemsChecked")+"/"+this.badge("checkItems")};b.prototype.additionalClasses=function(){return this.isCompleted()?["badge-state-complete"]:[]};b.prototype.isCompleted=function(){return this.badge("checkItemsChecked")===this.badge("checkItems")};b.prototype.update=function(){this.$el.toggleClass("badge-state-complete",this.isCompleted());return b.__super__.update.apply(this,arguments)};return b}(Pa);Yf=function(c){function b(){b.__super__.constructor.apply(this,arguments);
this.badgesView.listenTo(this.badgesView.model,"change:due",this.render)}s(b,c);b.prototype.shouldUpdate=!0;b.prototype.position=7;b.prototype.render=function(){b.__super__.render.apply(this,arguments);this.badgesView.stopListening(I,"renderInterval");this.visible()&&this.badgesView.listenTo(I,"renderInterval",this.render);return this};b.prototype.icon="clock";b.prototype.visible=function(){return null!=this.badgesView.model.get("due")};b.prototype.text=function(){return I.toDateString(this.dueDate(),
{smartYear:!0})};b.prototype.dueDate=function(){return I.parse(this.badgesView.model.get("due"))};b.prototype.hoursLeft=function(){return(this.dueDate()-new Date)/l.getMs({hours:1})};b.prototype.classDispatch=[[-36,"badge-state-due-past"],[0,"badge-state-due-now"],[24,"badge-state-due-soon"],"badge-state-due-future"];b.prototype.additionalClasses=function(){return[this.firstLessThan(this.hoursLeft(),this.classDispatch)]};b.prototype.titleDispatch=[[-36,"This card is past due."],[0,"This card is recently overdue!"],
[1,"This card is due in less than an hour."],[1.3,"This card is due in about an hour."],[24,function(b){return"This card is due in "+this.firstLessThan(b%1,[[0.3,Math.floor(b).toString()],[0.7,""+Math.floor(b).toString()+" and a half"],Math.ceil(b).toString()])+" hours."}],"This card is due later."];b.prototype.title=function(){return this.firstLessThan(this.hoursLeft(),this.titleDispatch)};b.prototype.firstLessThan=function(b,e){var c,f,h,m;h=0;for(m=e.length;h<m;h++)if(f=e[h],_.isArray(f)){if(c=
f[0],f=f[1],b<=c)return _.isFunction(f)?f.call(this,b):f}else return _.isFunction(f)?f.call(this,b):f};b.prototype.update=function(){this.$el.removeClass();this.$el.addClass(_.result(this,"additionalClasses").join(" ")).addClass("badge");return b.__super__.update.apply(this,arguments)};return b}(Pa);Tf=function(c){function b(){b.__super__.constructor.apply(this,arguments);this.badgesView.listenTo(this.badgesView.model,"change:closed",this.render)}s(b,c);b.prototype.shouldUpdate=!1;b.prototype.icon=
"archive";b.prototype.text="Archived";b.prototype.title="This card is in the archive.";b.prototype.visible=function(){return this.badgesView.model.get("closed")};return b}(Pa);Zf=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.render=function(){b.__super__.render.apply(this,arguments);this.rendered&&this.$el.click(function(b){return function(){return b.openLink()}}(this));return this};b.prototype.dependentBadges=["fogbugz"];b.prototype.icon="kiwi";
b.prototype.title="This card has a FogBugz case.";b.prototype.visible=function(){return this.badge("fogbugz")};b.prototype.openLink=function(b){window.open(this.badge("fogbugz"),"FogBugz");return l.stop(b)};return b}(Pa);var cg,ia,dg,eg,fg,gg,Wb,ud,hg,ig,jg,F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c},k=function(c,b){return function(){return c.apply(b,arguments)}},
D=[].indexOf||function(c){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===c)return b;return-1},G=[].slice;hg=function(c){function b(d){this.board=d;b.__super__.constructor.call(this);this.board.onId(function(b){return function(d){b.set({id:"boardViewState-"+d});return b.fetch()}}(this))}s(b,c);b.prototype["default"]=function(){return{calendarMode:"month"}};b.prototype.getCalendarMode=function(b){return this.get("calendarMode")};b.prototype.updateCalendarMode=function(b){return this.update("calendarMode",
b)};return b}(vb);gg=function(c){function b(d,e){this.board=d;this.setArchiveSidebarDropzone=k(this.setArchiveSidebarDropzone,this);this.setShowSidebarFromPref=k(this.setShowSidebarFromPref,this);b.__super__.constructor.call(this,null,e);this.board.onId(function(b){return function(d){b.fetch();b.useSidebarPref()?b.setShowSidebarFromPref():b.set("showSidebar",!qa.fSmall);b.set("listComposerOpen",!1);return b.viewMap={}}}(this));this.listenTo(this,"change:idActiveCard",function(b){return function(){var d,
e;e=b.Card.get(b.previousAttributes().idActiveCard);null!=e&&b.stopListening(e,"change:closed");d=b.getCard();if(null!=d)return b.listenTo(d,"change:closed",function(){return b.selectCardAfter(d)})}}(this))}s(b,c);b.prototype.sync=function(b,e,c){var f;f=c.success;switch(b){case "read":return"function"===typeof f?f(e,this["default"](),c):void 0;default:throw Error("not implemented");}};b.prototype["default"]=function(){return{idActiveCard:null,sidebarViewArray:[gb.prototype.viewName],archiveSidebarDropzoneVisible:!1,
listWidthType:null}};b.prototype.pushSidebarView=function(b){var e;e=this.get("sidebarViewArray");e.push(b.constructor.viewName);return this.setSidebarViewArray(e)};b.prototype.popSidebarView=function(){var b;b=this.get("sidebarViewArray");b.pop();0===b.length&&(b=[gb.viewName]);return this.setSidebarViewArray(b)};b.prototype.clearSidebarViewArray=function(){return this.setSidebarViewArray([gb.viewName])};b.prototype.setSidebarViewArray=function(b){return this.set("sidebarViewArray",b)};b.prototype._createView=
function(b){var e,c,f,h;h=[gb,Va,Qd,Rd,Sd];c=0;for(f=h.length;c<f;c++)if(e=h[c],e.viewName===b)return this.board.getView(e);h=[Fc];c=0;for(f=h.length;c<f;c++)if(e=h[c],e.viewName===b)return this.board.filter.getView(e);return this.board.getView(gb)};b.prototype.getCurrentSidebarView=function(){var b,e;b=_.last(this.get("sidebarViewArray"));return null!=(e=this.viewMap)[b]?e[b]:e[b]=this._createView(b)};b.prototype.setSidebarDisplayType=function(b){return this.set("sidebarDisplayType",null!=b?b:"")};
b.prototype.getSidebarDisplayType=function(){return this.get("sidebarDisplayType")};b.prototype.selectCard=function(b){if(null==b)this.set("idActiveCard",null);else return b.onId(function(e){return function(){e.set("idActiveCard",b.id);return kg.set(b.getFullUrl())}}(this))};b.prototype.isCardSelected=function(b){return null!=b&&this.get("idActiveCard")===b.id};b.prototype.isListSelected=function(b){var e;return(null!=(e=this.getCard())?e.get("idList"):void 0)===b.id};b.prototype.clearSelectedCard=
function(){return this.set("idActiveCard",null)};b.prototype.getCard=function(){return this.Card.get(this.get("idActiveCard"))};b.prototype.getList=function(){var b;return null!=(b=this.getCard())?b.getList():void 0};b.prototype.selectCardAfter=function(b){var e,c;e=b.getList();c=null!=e?e.cardList.openCards():void 0;if(null==e||0===c.length)this.set("idActiveCard",null);else return e=function(b){return function(b){return function(d){return d!==b&&d.get("pos")>=b.get("pos")}}}(this),b=_.find(c,e(b)),
this.selectCard(null!=b?b:_.last(c))};b.prototype.openListComposer=function(){return this.set("listComposerOpen",!0)};b.prototype.closeListComposer=function(){return this.set("listComposerOpen",!1)};b.prototype.useSidebarPref=function(){return y.isLoggedIn()&&(qa.fExtraLarge||qa.fLarge||qa.fMedium)};b.prototype.setShowSidebar=function(b){if(b!==this.get("showSidebar")&&(n("Board View","Toggle Board Sidebar",b?"Show":"Hide"),this.set("showSidebar",b),this.useSidebarPref()))return this.board.setPref("showSidebar",
b)};b.prototype.setShowSidebarFromPref=function(){var b;b=function(b){return function(){return b.set("showSidebar",b.board.getPref("showSidebar"))}}(this);return null!=this.board.get("myPrefs")?b():this.board.once("change:myPrefs",b)};b.prototype.setArchiveSidebarDropzone=function(b){return this.set("archiveSidebarDropzoneVisible",b)};return b}(fa);ia=function(c){function b(){this.offPermChange=k(this.offPermChange,this);this.onPermChange=k(this.onPermChange,this);this.openCards=k(this.openCards,
this);this.generateCalendarKey=k(this.generateCalendarKey,this);this.generateEmailKey=k(this.generateEmailKey,this);this._generateKey=k(this._generateKey,this);this.openLists=k(this.openLists,this);this.filterLabels=k(this.filterLabels,this);this.getObserverList=k(this.getObserverList,this);this.getCheckItem=k(this.getCheckItem,this);this.getBoardInvitation=k(this.getBoardInvitation,this);this.getChecklist=k(this.getChecklist,this);this.getShortUrl=k(this.getShortUrl,this);this.getUrl=k(this.getUrl,
this);this.getList=k(this.getList,this);this.getCard=k(this.getCard,this);this.getDisplayInvitePerms=k(this.getDisplayInvitePerms,this);this.getDisplayCommentPerms=k(this.getDisplayCommentPerms,this);this.getDisplayVotePerms=k(this.getDisplayVotePerms,this);this.getPermDisplayText=k(this.getPermDisplayText,this);this.getRoleText=k(this.getRoleText,this);this.getPermLevelIconClass=k(this.getPermLevelIconClass,this);this.getPermLevelAltText=k(this.getPermLevelAltText,this);this.hasUnseenActivity=k(this.hasUnseenActivity,
this);this.isStarred=k(this.isStarred,this);this.subscribe=k(this.subscribe,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);na(Nd,b);b.prototype.typeName="Board";b.prototype.urlRoot="/1/boards";b.prototype.initialize=function(){b.__super__.initialize.apply(this,arguments);this.destruct([this.listList=(new lg(null,{board:this})).owner(this).syncCache(this.modelCache,["idBoard","closed"],function(b){return function(e){return e.get("idBoard")===b.id&&!e.get("closed")}}(this)),this.invitationList=
new mg([],{modelCache:this.modelCache,board:this}),this.checklistList=new Td([],{modelCache:this.modelCache,board:this}),this.memberList=(new qb).syncModel(this,"memberships",{fxGetIds:function(b){return _.pluck(b,"idMember")}}),this.adminList=(new qb).syncModel(this,"memberships",{fxGetIds:function(b){return function(e){e=_.filter(e,function(e){var c,h;c=b.Member.get(e.idMember);return"admin"===e.memberType||null!=c&&(null!=(h=b.getOrganization())?h.isPremOrgAdmin(c):void 0)});return _.pluck(e,"idMember")}}(this)}),
this.filter=new ng(this,{modelCache:this.modelCache}),this.composer=new og(this,{modelCache:this.modelCache}),this.listComposer=new pg(this,{modelCache:this.modelCache}),this.viewState=new gg(this,{modelCache:this.modelCache}),this.localStorageViewState=new hg(this,{modelCache:this.modelCache})]);return this.cacheShortLink()};b.get=function(d,e){return l.isShortLink(e)?b.findOne(d,function(b){return b.get("shortLink")===e}):b.__super__.constructor.get.apply(this,arguments)};b.prototype.cacheShortLink=
function(){return this.onId(function(b){return function(){return b.waitForAttr("shortLink",function(){return IdCache.setBoardId(b.get("shortLink"),b.id)})}}(this))};b.prototype.close=function(){this.update({closed:!0})};b.prototype.reopen=function(){this.update({closed:!1})};b.prototype.markAsViewed=function(){if(y.isLoggedIn())return S({url:""+this.urlRoot+"/"+this.id+"/markAsViewed",type:"post",background:!0})};b.prototype.subscribe=function(b){b!==this.get("subscribed")&&this.update({subscribed:b})};
b.prototype.isStarred=function(){return null!=this.Auth.me().boardStarList.getBoardStar(this.id)};b.prototype.hasUnseenActivity=function(){var b,e;e=this.get("dateLastView");b=this.get("dateLastActivity");return null!=e&&null!=b&&e<b};b.prototype.getPermLevelAltText=function(b,e){var c,f,h,m,k;null==b&&(b=this.getPref("permissionLevel"));null!=this.attributes?k=this.getOrganization():null!=e&&(k=e);f=" Only people added to the board can view and edit it.";h=c=" Only people added to the board can edit.";
null!=k&&(m=k.get("displayName"),k.isFeatureEnabled("superAdmins")&&(f=" Board members and admins in the "+m+" organization will be able to see and edit this board.",c=" Board members and admins in the "+m+" organization will be able to edit this board.",h=" Board members and admins in the "+m+" organization will be able to edit this board."));switch(b){case "private":return"This board is private. "+f;case "org":return"This board is visible to members of "+(m?m:"the organization")+". "+c;case "public":return"This board is public. It's visible to anyone with the link and will show up in search engines like Google. "+
h;default:return""}};b.prototype.getPermLevelIconClass=function(b){var e;null==b&&(b=null!=(e=this.get("prefs"))?e.permissionLevel:void 0);return"org"===b?"org-private":""!==b&&null!=b?b:""};b.prototype.getRoleText=function(b){switch(b){case "admin":return"Can view and edit cards, remove members, and change settings for the board.";case "normal":return"Can view and edit cards. Can't change settings.";case "observer":return"Can view, comment, and vote on cards. Can't move or edit cards or change settings.";
default:return""}};b.prototype.getPermDisplayText=function(b){var e;null==b&&(b=null!=(e=this.get("prefs"))?e.permissionLevel:void 0);switch(b){case "private":return"Private";case "org":return"Org Visible";case "public":return"Public";default:return""}};b.prototype._translatePref=function(b){"none"===b&&(b="disabled");switch(b){case "disabled":case "members":case "public":return l.toTitleCase(b);case "observers":return"Members and observers";case "org":return"Organization members";default:return""}};
b.prototype.getDisplayVotePerms=function(){var b;return this._translatePref(null!=(b=this.get("prefs"))?b.voting:void 0)};b.prototype.getDisplayCommentPerms=function(){var b;return this._translatePref(null!=(b=this.get("prefs"))?b.comments:void 0)};b.prototype.getDisplayInvitePerms=function(){var b,e;b=null!=(e=this.get("prefs"))?e.invitations:void 0;return"members"===b||"admins"===b?l.toTitleCase(b):""};b.prototype.toJSON=function(d){var e,c;null==d&&(d={});e=b.__super__.toJSON.apply(this,arguments);
d.org&&(c=this.getOrganization(),null!=c&&(e.hasOrg=!0,e.org=c.toJSON({url:!0})));d.url&&null==e.url&&(e.url=C.getBoardUrl(this.modelCache,this));d.shortUrl&&null==e.shortUrl&&(e.shortUrl=C.getBoardShortUrl(this.modelCache,this));return e};b.prototype.calcPos=function(b,e){return l.calcPos(b,this.listList,e,function(b){return!b.get("closed")})};b.prototype.getCard=function(b){return l.isShortId(b)?this.Card.findOne("idShort",Number(b)):this.Card.get(b)};b.prototype.getList=function(b){return this.listList.get(b)};
b.prototype.getUrl=function(){return C.getBoardUrl(this.modelCache,this)};b.prototype.getShortUrl=function(){return C.getBoardShortUrl(this.modelCache,this)};b.prototype.getChecklist=function(b){return Xb.get(b)};b.prototype.getBoardInvitation=function(b){return this.invitationList.get(b)};b.prototype.getCheckItem=function(b){var e,c,f,h,m;h=this.checklistList.models;c=0;for(f=h.length;c<f;c++)if(e=h[c],e=null!=e?null!=(m=e.checkItemList)?m.get(b):void 0:void 0)return e};b.prototype.editable=function(){var b;
return(b=y.me())&&this.editableByMember(b)};b.prototype.editableByMember=function(b){return this.isMember(b)};b.prototype.isMember=function(b){var e;return"virtual"===(e=this.getMemberType(b))||"normal"===e||"admin"===e};b.prototype.owned=function(){var b;return(b=y.me())&&this.ownedByMember(b)};b.prototype.ownedByMember=function(b){return"admin"===this.getMemberType(b)};b.prototype.canJoin=function(){var b,e,c;return(this.isPremOrgAdmin(y.me())||(null!=(b=this.get("prefs"))?b.selfJoin:void 0)&&(null!=
(e=this.getOrganization())?e.isMember(y.me()):void 0))&&(c=this.id,0>D.call(y.me().get("idBoards"),c))};b.prototype.canJoinFromList=function(){var b,e,c,f,h,m;b=this.getOrganization();return(null!=(e=this.get("prefs"))?e.selfJoin:void 0)&&null!=b&&(c=b.id,0<=D.call(null!=(f=null!=(h=y.me())?h.get("idOrganizations"):void 0)?f:[],c))&&(m=this.id,0>D.call(y.me().get("idBoards"),m))};b.prototype.canInviteMembers=function(){var b,e,c;if(null==this.getOrganization()&&!this.getPref("canInvite"))return!1;
if("admins"===(null!=(e=this.get("prefs"))?e.invitations:void 0))b="admin";else if("members"===(null!=(c=this.get("prefs"))?c.invitations:void 0))b="normal";return"admin"===this.getMemberType(y.me())||b===this.getMemberType(y.me())};b.prototype.compareMemberType=function(b,e,c){return l.compareMemberType(this,b,e,c)};b.prototype.isMemberPublic=function(b){return"public"===this.getMemberType(b)};b.prototype.isMemberOrg=function(b){return"org"===this.getMemberType(b)};b.prototype.isMemberObserver=function(b){return"observer"===
this.getMemberType(b)};b.prototype.memberMatchesSetting=function(b,e){switch(this.getPref(e)){case "public":return y.isLoggedIn();case "org":return this.isMember(b)||this.isMemberOrg(b)||this.isMemberObserver(b);case "observers":return this.isMember(b)||this.isMemberObserver(b);case "members":return this.isMember(b);case "admins":return this.ownedByMember(b);default:return!1}};b.prototype.canVote=function(b){return this.memberMatchesSetting(b,"voting")};b.prototype.canComment=function(b){return this.memberMatchesSetting(b,
"comments")};b.prototype.canInvite=function(b){return this.memberMatchesSetting(b,"invitations")};b.prototype.prefNames="permissionLevel voting comments invitations selfJoin background cardAging calendarFeedEnabled".split(" ");b.prototype.myPrefNames="showSidebar showSidebarMembers showSidebarBoardActions showSidebarActivity emailKey idEmailList emailPosition calendarKey fullEmail".split(" ");b.prototype.getLabelName=function(b){var e;e=this.get("labelNames");return(null!=e?e[b]:void 0)||""};b.prototype.isPublic=
function(){return"public"===this.getPref("permissionLevel")};b.prototype.getInviteToken=function(){return util.inviteTokenFor(this.id)};b.prototype.getIdBoardMems=function(){return _.map(this.memberList.models,function(b){return function(b){return b.id}}(this))};b.prototype.getOrganization=function(){return this.Organization.get(this.get("idOrganization"))};b.prototype.joinBoard=function(b){var e,c,f,h;c=y.me();f=(e=this.isPremOrgAdmin(c))?"admin":"normal";c.set("idBoards",c.get("idBoards").concat(this.id));
e&&c.set("idPremOrgsAdmin",(null!=(h=c.get("idPremOrgsAdmin"))?h:[]).concat(this.id));return this.addMember(c,f,b)};b.prototype.addMember=function(){var b,e,c;b=arguments[0];e=3<=arguments.length?G.call(arguments,1,c=arguments.length-1):(c=1,[]);c=arguments[c++];e=e[0];null==e&&(e="normal");this.memberList.add(b);this.api({type:"put",method:"members/"+b.id,data:{type:e}},c);return this.set("memberships",this.get("memberships").concat({idMember:b.id,memberType:"normal"}))};b.prototype.removeMember=
function(b){this.memberList.remove(b);return this.set("memberships",_.reject(this.get("memberships"),function(e){return e.idMember===b.id}))};b.prototype.getObserverList=function(){var b,e,c,f,h;f=this.memberList.models;h=[];e=0;for(c=f.length;e<c;e++)b=f[e],this.isObserver(b)&&h.push(b);return h};b.prototype.filterLabels=function(b){var e,c,f,h,m,k;f=RegExp("^"+l.escapeForRegex(b));e=[];k=l.labelNames;h=0;for(m=k.length;h<m;h++)b=k[h],c=this.getLabelName(b).toLowerCase().split(" "),c.push(b),_.find(c,
function(b){return f.test(b)})&&e.push(b);return e};b.prototype.openLists=function(){return this.listList.filter(function(b){return!b.get("closed")})};b.prototype._generateKey=function(b){return this.api({type:"post",method:""+b+"Key/generate"})};b.prototype.generateEmailKey=function(){return this._generateKey("email")};b.prototype.generateCalendarKey=function(){return this._generateKey("calendar")};b.prototype.openCards=function(){var b;return _.flatten(function(){var e,c,f,h;f=this.openLists();
h=[];e=0;for(c=f.length;e<c;e++)b=f[e],h.push(b.cardList.openCards());return h}.call(this))};b.prototype.onPermChange=function(b){var e,c,f;if(null==this._permChangeHandlers){this._permChangeHandlers=[];e=function(b){return function(){var d,e,c;d=y.me();return b.isObserver(d)?"observer":"normal"===(e=b.getMemberType(d))||"admin"===e?"member":l.hasValidInviteTokenFor(b.modelCache,b.id)?"inviteToken":null!=(c=b.getOrganization())&&c.isMember(d)&&"org"===b.get("prefs").permissionLevel?"org":"public"===
b.get("prefs").permissionLevel?"public":"none"}}(this);c=e();f=function(f){return function(){var m,k,l,x;k=e();m=k!==c;c=k;if(m){x=f._permChangeHandlers;m=0;for(l=x.length;m<l;m++)b=x[m],b(k)}}}(this);if("undefined"!==typeof me&&null!==me)me.boardList.onAddRemove(f);if("undefined"!==typeof me&&null!==me)me.organizationList.onAddRemove(f);this.bind("change:memberships",f);this.bind("change:prefs.permissionLevel",f);this.memberList.onAddRemove(f)}return this._permChangeHandlers.push(b)};b.prototype.offPermChange=
function(b){if(null!=this._permChangeHandlers)return this._permChangeHandlers=_.without(this._permChangeHandlers,b)};b.prototype.getClientBackgroundColor=function(b){var e,c;return null!=(e=null!=(c=Sa[b])?c.color:void 0)?e:Sa.blue.color};return b}(Nf);Wb=function(c){function b(){this.scrollListIntoView=k(this.scrollListIntoView,this);this.updateControllerTitle=k(this.updateControllerTitle,this);this.reopen=k(this.reopen,this);this.closeDropzone=k(this.closeDropzone,this);this.openArchive=k(this.openArchive,
this);this.dblClickAddListMenu=k(this.dblClickAddListMenu,this);this.clearFilters=k(this.clearFilters,this);this.openFilter=k(this.openFilter,this);this.openDesc=k(this.openDesc,this);this.changeVis=k(this.changeVis,this);this.sortStop=k(this.sortStop,this);this.renderArchiveSidebarDropzone=k(this.renderArchiveSidebarDropzone,this);this.calcSidebarHeight=k(this.calcSidebarHeight,this);this.renderInlineListComposer=k(this.renderInlineListComposer,this);this.renderLists=k(this.renderLists,this);this.postListListRender=
k(this.postListListRender,this);this.renderBoardHeaderDescription=k(this.renderBoardHeaderDescription,this);this.renderBoardHeaderSubscribed=k(this.renderBoardHeaderSubscribed,this);this.renderBoardBackground=k(this.renderBoardBackground,this);this.clearBoardBackground=k(this.clearBoardBackground,this);this.renderBoardHeaderCalendar=k(this.renderBoardHeaderCalendar,this);this.toggleStarred=k(this.toggleStarred,this);this.renderBoardHeaderStarred=k(this.renderBoardHeaderStarred,this);this.renderBoardHeader=
k(this.renderBoardHeader,this);this.refreshOrganization=k(this.refreshOrganization,this);this.hideSidebar=k(this.hideSidebar,this);this.showSidebar=k(this.showSidebar,this);this.setSidebarShow=k(this.setSidebarShow,this);this.toggleSidebar=k(this.toggleSidebar,this);this.renderSidebarState=k(this.renderSidebarState,this);this.renderSidebarDisplayType=k(this.renderSidebarDisplayType,this);this.removeSidebarDisplayTypes=k(this.removeSidebarDisplayTypes,this);this.attachVersionTag=k(this.attachVersionTag,
this);this.calcBoardLayout=k(this.calcBoardLayout,this);this.renderFilteringStatus=k(this.renderFilteringStatus,this);this.render=k(this.render,this);this.moveCard=k(this.moveCard,this);this.permChange=k(this.permChange,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="board-wrapper";b.prototype.events={sortstop:"sortStop","click .js-rename-board":"renameBoard","click .js-open-org-menu":"openOrgMenu","click .js-change-vis":"changeVis","click .js-open-desc":"openDesc",
"click .js-close-calendar":"toggleCalendar","click .js-calendar":"toggleCalendar","click .js-filter-cards-indicator":"openFilter","click .js-filter-card-clear":"clearFilters","click .js-board-header-subscribed":"openUnsubscribe","click .js-star-board":"toggleStarred","click .js-show-sidebar":"setSidebarShow","dblclick #board":"dblClickAddListMenu","click .js-open-archive":"openArchive","click .js-close-dropzone":"closeDropzone","click .js-reopen":"reopen",shortcut:"shortcut"};b.prototype.initialize=
function(){var d;b.__super__.initialize.apply(this,arguments);this.model.view=this;this.model.ond("change:closed",this.render).ond("change:name",this.renderBoardHeader).ond("change:idOrganization",this.refreshOrganization).ond("change:memberships",function(b){return function(){return b.renderPermissionLevel()}}(this)).ond("change:desc",this.renderBoardHeaderDescription).ond("change:prefs.background change:prefs.backgroundTile change:prefs.backgroundBrightness",function(b){return function(){return b.renderBoardBackground(!0)}}(this)).ond("change:name",
this.updateControllerTitle).ond("change:powerUps",this.renderBoardHeaderCalendar).ond("change:subscribed",this.renderBoardHeaderSubscribed);this.model.viewState.on("change:showSidebar",this.renderSidebarState).on("change:sidebarDisplayType",this.renderSidebarDisplayType).on("change:archiveSidebarDropzoneVisible",this.renderArchiveSidebarDropzone);this.model.on("change:prefs.permissionLevel",function(b){return function(){b.renderLists();return b.renderPermissionLevel()}}(this));this.listenTo(this.Auth.me().boardStarList,
"add remove reset",function(b){return function(){return b.renderBoardHeaderStarred()}}(this));this.model.on("change:prefs.cardCovers",this.renderLists);this.memberTypeMe=this.model.getMemberType(y.me());this.refreshOrganization();this.listScrollLeft=null;this.savingScroll=!1;this.calcState={};this.model.filter.ond("change",this.renderFilteringStatus);X.addHandler(this,{scope:"board"});this.model.onPermChange(this.permChange);d=this.debounce(function(b){return function(){return b.calcBoardLayout()}}(this),
300);$(window).on("resize."+this.uniqueId(),d);this.versionTag=new qg};b.prototype.remove=function(){this.model.offPermChange(this._permChangeHandlers);$(window).off("."+this.uniqueId());return b.__super__.remove.apply(this,arguments)};b.prototype.permChange=function(b){return"none"===b?C.defaultView():this.render()};b.prototype.shortcut=function(b){var e,c,f;e=this.model.editable();c=y.isLoggedIn();switch(b){case 81:if(c)return this.model.filter.toggleQuietMode(),"Q - My cards";break;case 88:return this.model.filter.clear(),
"X - Clear All Filters";case 87:return this.toggleSidebar(),"W - Toggle Board Sidebar";case 40:case 74:return this.moveCard("down"),["Keyboard Nav","Down"];case 38:case 75:return this.moveCard("up"),["Keyboard Nav","Up"];case 39:return this.moveCard("right"),["Keyboard Nav","Right"];case 37:return this.moveCard("left"),["Keyboard Nav","Left"];case 78:if(e&&(b=this.model.viewState.getList(),e=this.model.viewState.getCard(),null!=b&&null!=e))return e=_.indexOf(b.cardList.openCards(),e),this.model.composer.save({idList:b.id,
index:e+1,vis:!0}),"N - Insert Card";break;case 27:if(e)return Q.sorting?(b=$(".ui-sortable-helper"),e=$(".js-sortable, .js-archived-cards, .js-list-sortable"),0<b.length&&0<e.length&&(b.data("dragCancel",!0),"function"===typeof e.sortable&&e.sortable("cancel"),b.removeData("dragCancel"))):!ma.isEditing()&&(!w.isVisible&&!Y.isVisible&&!$(".new-comment").hasClass("focus"))&&(this.model.composer.get("vis")?this.model.composer.save("vis",!1):this.model.viewState.get("listComposerOpen")?this.model.viewState.set("listComposerOpen",
!1):1<this.model.viewState.get("sidebarViewArray").length&&null!=(f=this.model.getView(Wa))&&f.popWidgetView()),C.showingCalendar(this)&&$(".calendar-day.active").removeClass("active"),!0}};b.prototype.scrollToCard=function(b,e){var c,f,h,m,k,l;l=this.collectionSubview(Yb,this.model.listList).subview(Zb,e);c=l.$(".list-cards");k=c.prop("scrollTop");m=c.outerHeight();h=e.cardList.openCards()[b].view.$el[0];f=h.clientHeight;h=h.offsetTop-f;l.scrollIntoView();if(k+m<h+f)return c.scrollTop(h+f-m);if(k>
h)return c.scrollTop(h)};b.prototype.moveCard=function(b){var e,c,f,h,m,k,l,x,n,s;this.ignoreMouseCardSelects||(this.ignoreMouseCardSelects=!0,$(document).one("mousemove",function(b){return function(d){return b.ignoreMouseCardSelects=!1}}(this)));c=this.model.viewState.getCard();if(null==c)c=_.find(this.model.openLists(),function(b){return!_.isEmpty(b.openCards())}),null!=c&&c.selectFirstCardInList();else if(f=c.getList(),m=f.cardList.openCards(),e=_.indexOf(m,c),c=function(b){return function(d,e,
c,f){d+=e;if(b.model.filter.isFiltering)for(;0<=d&&d<c&&!f(d);)d+=e;return d}}(this),"up"===b||"down"===b){if(e=c(e,"up"===b?-1:1,m.length,function(b){return function(d){return b.model.filter.satisfiesFilter(m[d])}}(this)),0<=e&&e<m.length)return this.scrollToCard(e,f),this.model.viewState.selectCard(m[e])}else if("left"===b||"right"===b)if(k=_.filter(this.model.openLists(),function(b){return 0<b.cardList.openCards().length}),f=_.indexOf(k,f),b=c(f,"left"===b?-1:1,k.length,function(b){return function(d){return _.any(k[d].cardList.openCards(),
function(d){return b.model.filter.satisfiesFilter(d)})}}(this)),0<=b&&b<k.length){b=k[b];h=b.cardList.openCards();f=Math.min(e,h.length-1);n=[1,-1];s=[];l=0;for(x=n.length;l<x;l++)if(e=n[l],e=c(f-e,e,h.length,function(b){return function(d){return b.model.filter.satisfiesFilter(h[d])}}(this)),0<=e&&e<h.length){this.model.viewState.selectCard(h[e]);this.scrollToCard(e,b);break}else s.push(void 0);return s}};b.prototype.render=function(){var b,e,c,f,h,m;this.forceIntoDom();e=this.model;if(e.get("closed"))this.$el.html(v.fillFromModel("board_closed",
e)),this.clearBoardBackground();else{b={};b.url=C.getBoardUrl(this.modelCache,this.model);m=e.prefNames.concat(e.myPrefNames);f=0;for(h=m.length;f<h;f++)c=m[f],b[""+c+"_"+e.getPref(c)]=!0;b.canJoin=e.canJoin();b.canInviteMembers=e.canInviteMembers();b.confirmed=y.me().get("confirmed");this.$el.html(v.fillFromModel("board",e));this.renderBoardHeader();this.renderBoardBackground();this.$(".board-widgets").html(this.model.getView(Wa).render().el);this.renderSidebarState();this.calcBoardLayout();this.renderLists();
C.setLocation({title:b.name});_.defer(function(b){return function(){b.$("#board").dragscrollable({fxIgnore:function(b){var d;d=$(b.target).closest("#board");d=b.offsetY>d.height()-11;b=0<$(b.target).closest(".list").length;return d||b}});return Q.refreshListSortable()}}(this))}return this};b.prototype.renderFilteringStatus=function(){var b;b=this.model.filter.isFiltering();this.$(".js-filter-cards-indicator").toggleClass("hide",!b);this.$(".js-num-cards").toggleClass("hide",!b);return this.$("#board").toggleClass("filtering",
b)};b.prototype.calcBoardLayout=function(){var b,e,c,f;f=$(window).height();c=$("#header").outerHeight();b=$(".header-banner:visible").outerHeight();e=this.$(".board-header").outerHeight();this.$(".board-canvas").height(f-(c+b+e));this.calcSidebarHeight()};b.prototype.attachVersionTag=function(){return this.$("#board").append(this.versionTag.$el)};b.prototype.removeSidebarDisplayTypes=function(){this.$el.removeClass("sidebar-display-wide")};b.prototype.renderSidebarDisplayType=function(){var b;this.removeSidebarDisplayTypes();
b=this.model.viewState.getSidebarDisplayType();this.$el.addClass(b)};b.prototype.renderSidebarState=function(){this.renderSidebarDisplayType();this.$(".board-header-name-text").css("max-width",""+($(".board-header").parent().width()-160)+"px");this.model.viewState.get("showSidebar")?this.showSidebar():this.hideSidebar()};b.prototype.toggleSidebar=function(){return this.model.viewState.setShowSidebar(!this.model.viewState.get("showSidebar"))};b.prototype.setSidebarShow=function(){this.model.viewState.setShowSidebar(!0)};
b.prototype.showSidebar=function(){qa.fSmall&&$("body").addClass("overflow-hidden");this.renderSidebarDisplayType();this.$el.removeClass("disabled-all-widgets")};b.prototype.hideSidebar=function(){$("body").removeClass("overflow-hidden");this.removeSidebarDisplayTypes();this.$el.addClass("disabled-all-widgets")};b.prototype.refreshOrganization=function(){var b,e,c,f,h;c=["name","logoHash","displayName"];b=this.Organization.get(this.model.previous("idOrganization"));e=this.model.getOrganization();
null!=b&&b.unbind(null,this.renderBoardHeader);if(null!=e){f=0;for(h=c.length;f<h;f++)b=c[f],e.ond("change:"+b,this.renderBoardHeader)}return this.renderBoardHeader()};b.prototype.renderBoardHeader=function(){var b,e,c,f;e=this.model;b={};b.isPremOrgAdmin=e.isPremOrgAdmin(y.me());b.canRename=b.isPremOrgAdmin||e.owned();c=e.getOrganization();if(null!=c){b.orgDisplayName=c.get("displayName");b.orgName=c.get("name");if(f=c.get("logoHash"))b.orgLogoUrl=""+logoDomain+"/"+f+"/30.png";b.hasBusinessClass=
c.isPremium()}b.hasCalendar=0<=D.call(this.model.get("powerUps"),"calendar");this.$(".js-board-header").html(v.fillFromModel("board_header",e,b));this.renderPermissionLevel();this.renderBoardHeaderDescription();this.renderBoardHeaderCalendar();this.renderBoardHeaderSubscribed();this.renderFilteringStatus();this.renderBoardHeaderStarred();return this};b.prototype.renderBoardHeaderStarred=function(){this.$(".js-star-board").toggleClass("board-header-btn-enabled",this.model.isStarred());return this};
b.prototype.toggleStarred=function(){var b;b=this.Auth.me().boardStarList;null!=b.getBoardStar(this.model.id)?b.unstarBoard(this.model.id):b.starBoard(this.model.id);return this};b.prototype.renderBoardHeaderCalendar=function(){var b;b=0<=D.call(this.model.get("powerUps"),"calendar");this.$(".js-calendar").toggleClass("hide",!b);return this};b.prototype.getAllBackgroundClasses=function(){return"body-custom-board-background body-custom-board-background-tiled body-light-board-background body-dark-board-background"};
b.prototype.clearBoardBackground=function(){var b;this.model.get("prefs");b=this.getAllBackgroundClasses();$("body").removeClass(b).css({"background-image":""}).css({"background-color":""})};b.prototype.renderBoardBackground=function(b){var e,c,f,h,m,k,u,x;null==b&&(b=!1);this.clearBoardBackground();f=this.model.get("prefs");e=$("body");if(null!=f.backgroundColor)return b=this.model.getClientBackgroundColor(f.background),e.css({"background-color":b}),Ub.setBackground({color:b});f.backgroundTile?h=
m=f.backgroundImage:(m=null!=(c=null!=(k=l.smallestPreviewBiggerThan(f.backgroundImageScaled,$(window).width(),$(window).height()))?k.url:void 0)?c:f.backgroundImage,h=null!=(u=null!=(x=l.smallestPreviewBiggerThan(f.backgroundImageScaled,64,64))?x.url:void 0)?u:f.backgroundImage);c=function(b){return function(){e.addClass("body-custom-board-background");f.backgroundTile&&e.addClass("body-custom-board-background-tiled");switch(f.backgroundBrightness){case "light":e.addClass("body-light-board-background");
break;case "dark":e.addClass("body-dark-board-background")}e.css({"background-image":'url("'+m+'")'});return Ub.setBackground({url:h,tiled:f.backgroundTile})}}(this);return b?l.waitForImageLoad(m,c):c()};b.prototype.renderBoardHeaderSubscribed=function(){var b;b=this.model.get("subscribed");this.$(".js-board-header-subscribed").toggleClass("hide",!b);return this};b.prototype.renderBoardHeaderDescription=function(){var b,e,c;b=this.$(".js-fill-desc");e=this.model.get("desc");if(!e)return b.addClass("hide"),
this;e?c=e:this.model.editable()&&(c="Click to add a description...");b.attr("title",c);b.removeClass("hide");return this};b.prototype.renameBoard=function(b){l.stop(b);n("Board View","Board Header","Open Rename Board From Title");w.toggle({elem:$(b.target).closest("a"),top:35,view:this.model.getView(rg)})};b.prototype.openOrgMenu=function(b){l.stop(b);n("Board View","Board Header","Open Org Menu");w.toggle({elem:$(b.target).closest("a"),top:35,view:this.model.getView(eg)})};b.prototype.renderPermissionLevel=
function(){var b,e;b=this.$("#permission-level");e={};e.permissionLevel=this.model.getPermLevelIconClass();e.permText=this.model.getPermDisplayText();b.html(v.fillFromModel("board_header_permissions",this.model,e));b.attr("title",this.model.getPermLevelAltText());b=this.model.canInvite(y.me());this.$(".js-manage-board-members").toggle(b);return this};b.prototype.postListListRender=function(){P("render","rendering inline composer and calculating list layout");this.renderInlineListComposer();this.attachVersionTag();
return this.renderFilteringStatus()};b.prototype.renderLists=function(){var b;b=this.$("#board").empty();this.collectionSubview(Yb,this.model.listList,{el:b,resetCallback:this.postListListRender}).render();_.defer(function(b){return function(){b.postListListRender();return Q.refreshListCardSortable()}}(this));return this};b.prototype.renderInlineListComposer=function(){var b;this.$(".list.add-list").remove();this.model.editable()&&(b=this.model.getView(sg),this.$("#board").append(b.render().el))};
b.prototype.calcSidebarHeight=function(){var b,e;null!=(b=this.model.getView(gb))&&b.calcActionsHeight();return null!=(e=this.model.getView(Wa))?e.setSidebarContentHeight():void 0};b.prototype.renderArchiveSidebarDropzone=function(b){this.model.viewState.get("archiveSidebarDropzoneVisible")?(this.$el.addClass("active-sidebar-archive-dropzone"),clearTimeout(this.dropzoneTimeoutId)):(this.$el.removeClass("active-sidebar-archive-dropzone"),this.$(".js-sidebar-archive-dropzone").removeClass("hover-state"))};
b.prototype.sortStop=function(b,e){l.stopPropagation(b);!e.item.data("dragCancel")&&!$(e.item).hasClass("list-card")&&e.item.trigger("movelist",[e])};b.prototype.changeVis=function(b){l.stop(b);n("Board View","Board Header","Open Change Visibilty via Header");w.toggle({elem:this.$(".js-change-vis"),top:35,view:tg,options:{model:this.model}})};b.prototype.openDesc=function(b){l.stop(b);n("Board View","Board Header","Edit Description Button via Header");Y.show({view:this.model.getView(dg),displayType:"slim"})};
b.prototype.toggleCalendar=function(){return this.calendarView?this.navigateToBoard():this.navigateToCalendar()};b.prototype.navigateToCalendar=function(){var b;n("Board View","Board Header","Open Calendar View via Header");b=C.getBoardUrl(this.modelCache,this.model.id,"calendar");return C.navigate(b,{trigger:!0})};b.prototype.navigateToBoard=function(){var b;n("Board View","Board Header","Close Calendar View via Header");b=C.getBoardUrl(this.modelCache,this.model.id);return C.navigate(b,{trigger:!0})};
b.prototype.showCalendar=function(b){var e,c,f,h;this.$(".calendar-btn").addClass("board-header-btn-enabled");this.$("#board").addClass("hide");h=this.getCardViews();c=0;for(f=h.length;c<f;c++)e=h[c],e.stopListeningToActiveCardChanges();this.calendarView=new Ef({model:this.model,modelCache:this.modelCache});this.$(".board-canvas").append(this.calendarView.render(b).el);return this.calendarView.addedToDOM()};b.prototype.closeCalendarIfOpen=function(){if(null!=this.calendarView)return this.closeCalendar()};
b.prototype.closeCalendar=function(){var b,e,c,f;this.calendarView.remove();this.calendarView=null;this.$(".calendar-btn").removeClass("board-header-btn-enabled");this.$("#board").removeClass("hide");f=this.getCardViews();e=0;for(c=f.length;e<c;e++)b=f[e],b.listenToActiveCardChanges();return Q.refreshListCardSortable()};b.prototype.getCardViews=function(){var b,e,c,f,h,m,k,l;c=this.collectionSubview(Yb,this.model.listList);e=[];k=c.subviewsOfType(Zb);c=0;for(h=k.length;c<h;c++){b=k[c];b=b.collectionSubview(Ud,
b.model.cardList);l=b.subviewsOfType(Ca);f=0;for(m=l.length;f<m;f++)b=l[f],e.push(b)}return e};b.prototype.openFilter=function(b){var e;l.stop(b);n("Board View","Board Header","Open Filtering via Header");null!=(e=this.model.getView(Wa))&&e.openCardFilter()};b.prototype.clearFilters=function(b){l.stop(b);n("Board View","Board Header","Clear Filtering via Header");this.model.filter.clear()};b.prototype.openUnsubscribe=function(b){l.stop(b);pa.toggle({elem:$(b.target).closest(".js-board-header-subscribed")[0],
top:22,model:this.model,title:"Unsubscribe?",text:"You can re-subscribe via the board menu",confirmText:"Unsubscribe",confirmBtnClass:"negate",fxConfirm:function(b){return function(d){n("Board View","Board header","Unsubscribe");return b.model.subscribe(!1)}}(this)})};b.prototype.dblClickAddListMenu=function(b){l.stop(b);this.model.isMember(y.me())&&0===$(b.target).closest(".list").length&&(n("Board View","Open Add List Menu via Double Click"),w.show({clientx:b.clientX,clienty:b.clientY,top:35,view:this.model.getView(cg,
"dblClick",{dblClick:!0})}))};b.prototype.openArchive=function(b){l.stop(b);n("Board View","Open Archive from Bottom Dropzone");this.model.getView(Wa).openArchivedItems()};b.prototype.closeDropzone=function(b){l.stop(b);n("Board View","Close Bottom Dropzone")};b.prototype.reopen=function(){return this.model.reopen()};b.prototype.updateControllerTitle=function(){return C.title(this.model.get("name"))};b.prototype.scrollListIntoView=function(b){return this.collectionSubview(Yb,this.listList).subview(Zb,
b).scrollIntoView()};return b}(A);fg=function(c){function b(){this.showMemberMenu=k(this.showMemberMenu,this);this.deselectMembers=k(this.deselectMembers,this);this.hoverItem=k(this.hoverItem,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Observers"};b.prototype.events={"click .js-select-member":"showMemberMenu","mouseenter .js-select-member":"hoverItem","mouseleave .js-list":"deselectMembers"};b.prototype.render=
function(){this.$el.html(v.fillFromModel("observer_list",this.model));this.renderObservers();return this};b.prototype.hoverItem=function(b){this.deselectMembers();b=$(b.target).closest(".item");return l.selectMenuItem(this.$(".js-list"),".item",b)};b.prototype.deselectMembers=function(b){return this.$(".js-list .item").removeClass("selected")};b.prototype.showMemberMenu=function(b){l.stop(b);n("Board View","Show Observer Menu");b=$(b.target).closest("a").attr("idmember");b=this.Member.get(b);w.pushView({view:new Gc({board:this.model,
model:b})})};b.prototype.renderObservers=function(){var b,e;b=this.$(".js-list");var c,f,h,m;h=this.model.getObserverList();m=[];c=0;for(f=h.length;c<f;c++)e=h[c],m.push(this.subview(Ka,e,{showStatus:!0,showUnconfirmed:!0}));this.appendSubviews(m,b);return this};return b}(A);cg=function(c){function b(){this.cancel=k(this.cancel,this);this.addList=k(this.addList,this);this.renderValue=k(this.renderValue,this);this.updateListList=k(this.updateListList,this);this.getClosestListPos=k(this.getClosestListPos,
this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Add List"};b.prototype.events={"change .js-select-list-pos":"renderValue","click .js-add-list":"addList","submit form":"addList","click .js-cancel":"cancel"};b.prototype.getLists=function(){this.lists=this.model.openLists();return this.listsLength=this.lists.length+1};b.prototype.render=function(){this.$el.html(v.fill("popover_add_list"));_.delay(function(b){return function(){b.options.dblClick&&
b.getClosestListPos();b.getLists();return b.updateListList()}}(this),10);return this};b.prototype.getClosestListPos=function(){var b,e,c;e=$(".list");c=[];this.closestListIdx=0;e.each(function(b){return function(b){b=parseInt(Math.abs($(e[b]).offset().left+$(e[b]).width()/2-w.el_left),10);return c.push(b)}}(this));this.closestListIdx=_.indexOf(c,_.min(c));b=$(e[this.closestListIdx]);if(0<b.length&&w.el_left>b.offset().left+b.width()/2&&this.closestListIdx<e.length-1)return this.closestListIdx+=1};
b.prototype.updateListList=function(){var b,e,c,f;e=$(this.el).find(".js-select-list-pos");b=c=0;for(f=this.listsLength;0<=f?c<f:c>f;b=0<=f?++c:--c)$("<option>").val(b).text(b+1).appendTo(e);b=e.find("option:last");this.options.dblClick&&(b=e.find("option:eq("+this.closestListIdx+")"));b.attr("selected","selected");return this.renderValue()};b.prototype.renderValue=function(){var b;b=parseInt(this.$(".js-select-list-pos").val(),10)+1;$(".js-pos-value").text(l.getNaturalNumber(b))};b.prototype.addList=
function(b){var e,c,f;l.stop(b);b=this.$(".js-list-name").val().trim();""===b?this.$(".js-list-name").focus().select():(e=this.$(".js-select-list-pos"),e=parseInt(e.find("option:selected").val(),10),f=e===this.listsLength-1?!1:!0,c="List"===b?!1:!0,w.hide(),this.model.listList.create({name:b,pos:this.model.calcPos(e),closed:!1},{success:function(b){return function(d){c&&f?n("Board","Add List","Successfully Add List - Changed Name, Changed Position"):c?n("Board","Add List","Successfully Add List - Changed Name, Default Position"):
f?n("Board","Add List","Successfully Add List - Default Name, Changed Position"):n("Board","Add List","Successfully Add List - Default Name, Default Position");return b.model.view.scrollListIntoView(d)}}(this)}))};b.prototype.cancel=function(b){l.stop(b);w.hide();n("Board Menu","Add List Menu","Click Cancel Button")};return b}(A);dg=function(c){function b(){this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){this.model.ond("change:name change:desc",
this.render)};b.prototype.events={"click .js-edit-desc":"editDesc"};b.prototype.render=function(){var b,e,c;e=this.model.get("desc");c=this.model.get("descData");b={hasDesc:!!e};this.$el.html(v.fillFromModel("board_desc",this.model,b));b.hasDesc&&$(this.el).find(".board-description>div.current").html(cb.markdownAsHtml(e,{textData:c}));return this};b.prototype.editDesc=function(b){l.stop(b);this.edit("desc")};return b}(tb);jg=function(c){function b(){this.exportJSON=k(this.exportJSON,this);this.printModel=
k(this.printModel,this);this.cancel=k(this.cancel,this);this.focusUrl=k(this.focusUrl,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Share, Print, and Export"};b.prototype.events={"click .js-print":"printModel","click .js-export-json":"exportJSON","click .js-export-csv":"exportCSV","click input[type='text']":"focusUrl","submit form":"cancel"};b.prototype.render=function(){var b,e;e=this.model.getOrganization();
b=this.model.toJSON();b.hasCsvExport=!1;null!=e&&(null!=e&&e.isFeatureEnabled("csvExport"))&&(b.hasCsvExport=!0,b.csvURL="/b/"+this.model.get("shortLink")+".csv");null!=e&&e.isPremium()&&!(null!=e&&e.isJPS())&&(b.needsUpgradeForCsv=!0,b.upgradeUrl="/"+e.get("name")+"/billing");b.jsonURL="/b/"+this.model.get("shortLink")+".json";b.pLevelClass=this.model.getPermLevelIconClass();b.pLevelAltText=this.model.getPermLevelAltText();"org"===this.model.get("prefs").permissionLevel?b.helperText="visible to org":
"private"===this.model.get("prefs").permissionLevel&&(b.helperText="private");this.$el.html(v.fill("popover_share",b));return this};b.prototype.focusUrl=function(b){this.$(".js-url").focus().select();return!1};b.prototype.cancel=function(b){l.stop(b);return!1};b.prototype.printModel=function(b){l.stop(b);n("Board Menu","Share, Print, and Export Menu","Print");w.hide();_.defer(function(){return window.print()})};b.prototype.exportJSON=function(b){return n("Board Menu","Share, Print, and Export Menu",
"Export JSON")};b.prototype.exportCSV=function(b){return n("Board Menu","Share, Print, and Export Menu","Export CSV")};return b}(A);ud=function(c){function b(){this.newOrg=k(this.newOrg,this);this.submit=k(this.submit,this);this.helperAddOrg=k(this.helperAddOrg,this);this.changeOrg=k(this.changeOrg,this);this.canChangeOrg=k(this.canChangeOrg,this);this.setPermissionLevel=k(this.setPermissionLevel,this);this.selectVis=k(this.selectVis,this);this.openChangeVis=k(this.openChangeVis,this);this.getAdditionalVisPermissions=
k(this.getAdditionalVisPermissions,this);this.disableSubmitDueToVisRestrictions=k(this.disableSubmitDueToVisRestrictions,this);this.resetVisChooser=k(this.resetVisChooser,this);this._renderBoardVisChooser=k(this._renderBoardVisChooser,this);this.disableSubmit=k(this.disableSubmit,this);this.enableSubmit=k(this.enableSubmit,this);this.renderBoardVisChooser=k(this.renderBoardVisChooser,this);this.renderBoardVisDisplay=k(this.renderBoardVisDisplay,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,
arguments)}s(b,c);b.prototype.getViewTitle=function(){return this.options.copyBoard?"Copy Board":"Create Board"};b.prototype.events={"change select[name='org-id']":"changeOrg","click .js-helper-add-org":"helperAddOrg","submit form":"submit","click .js-submit":"submit","click .js-create-org":"newOrg","click .js-change-vis":"openChangeVis","click .js-select":"selectVis"};b.prototype.getOrganization=function(){switch(this.model.typeName){case "Organization":return this.model;case "Board":return this.model.getOrganization();
default:return null}};b.prototype.render=function(){var b,e,c,f,h,m;b=_.map(y.me().organizationList.models,function(b){return b.toJSON()});e=null!=(c=this.getOrganization())?c.id:void 0;f=0;for(h=b.length;f<h;f++)c=b[f],c.selectOrg=c.id===e?!0:!1;e=null!=e;b={orgs:b,hasOrg:e,canAddToOrgs:0!==b.length,isCopyBoard:this.options.copyBoard,isNewBoard:this.options.newBoard,pLevel:"private"};this.options.copyBoard&&this.model.owned()?b.pLevel=this.model.get("prefs").permissionLevel:e&&(b.pLevel="org");if(null!=
(m=this.options)&&m.newOrgBoard)b.hideOrg=!0;this.$el.html(v.fill("board_new",b));this.renderBoardVisChooser();return this};b.prototype.renderBoardVisDisplay=function(b){var e;e=this.getPermissionLevel();b?b="<p>Checking visibility permissions\u2026</p>":""!==e?(b={visIconClass:ia.prototype.getPermLevelIconClass(e),visDisplayText:ia.prototype.getPermDisplayText(e).toLowerCase()},b=v.fill("board_new_vis",b)):b="<p>There was an error setting the visibility.</p>";this.$(".js-vis-display").html(b);return this};
b.prototype.renderBoardVisChooser=function(b){var e,c,f,h,m,k,l,x;e=(c=this.$("select[name='org-id']").val())&&""!==c?this.Organization.get(c):null;h={};x=["private","org","public"];k=0;for(l=x.length;k<l;k++)f=x[k],h["permText_"+f]=ia.prototype.getPermLevelAltText(f,e),h["iconClass_"+f]=ia.prototype.getPermLevelIconClass(f,e);h.visRestrictionText="You can not create a board with this visibility due to a restriction created by an org admin.";h.hasOrg=null!=e;null!=e&&e.isFeatureEnabled("restrictvis")?
null!=e&&null!=e.get("memberships")&&null!=e.get("products")&&null!=e&&e.isFeatureEnabled("restrictVis")?(this.disableSubmit(),h=_.extend(h,this.getAdditionalVisPermissions(b,e)),this._renderBoardVisChooser(h),this.renderBoardVisDisplay()):(this.disableSubmit(),this.renderBoardVisDisplay(!0),M["for"](this.modelCache).loadOrganizationMinimal(c,function(c){return function(f){if(null==f)return h=_.extend(h,c.getAdditionalVisPermissions(b,e)),c._renderBoardVisChooser(h),c.renderBoardVisDisplay()}}(this))):
(c=["private","public"],null!=e?c.unshift("org"):h.disabledVis_org=!0,0<=D.call(c,b)?m=b:this.options.copyBoard&&this.model.owned()&&(m=this.model.get("prefs").permissionLevel),0>D.call(c,m)&&(m=c[0]),h["permissionLevel_"+m]=!0,this.setPermissionLevel(m),this.enableSubmit(),this._renderBoardVisChooser(h),this.renderBoardVisDisplay());return this};b.prototype.enableSubmit=function(){return this.$(".js-submit").removeClass("disabled")};b.prototype.disableSubmit=function(){return this.$(".js-submit").addClass("disabled")};
b.prototype._renderBoardVisChooser=function(b){this.$(".js-vis-chooser").html(v.fill("board_menu_vis",b));return this};b.prototype.resetVisChooser=function(){this.$(".js-no-valid-org-privs").addClass("hide")};b.prototype.disableSubmitDueToVisRestrictions=function(b){b.owned()?(this.$(".js-org-account-url").attr("href","/"+b.get("name")+"/account"),this.$(".js-not-admin-text").addClass("hide"),this.$(".js-admin-text").removeClass("hide")):(this.$(".js-not-admin-text").removeClass("hide"),this.$(".js-admin-text").addClass("hide"));
this.$(".js-no-valid-org-privs").removeClass("hide");this.$(".js-vis-chooser").addClass("hide");this.$(".js-vis-display").addClass("hide")};b.prototype.getAdditionalVisPermissions=function(b,e){var c,f,h;c={};h="org";if(null!=e&&e.isFeatureEnabled("restrictVis")){f=[];_.each(["private","org","public"],function(b){return function(d){if(b.canChangeOrg(e,d))return f.push(d);c["disabledVis_"+d]=!0;return c["showVisRestriction_"+d]=!0}}(this));if(0===f.length){this.setPermissionLevel("");this.disableSubmitDueToVisRestrictions(e);
return}h=0<=D.call(f,b)?b:0<=D.call(f,"org")?"org":_.first(f);this.enableSubmit()}else null!=b?h=b:this.options.copyBoard&&this.model.owned()&&(h=this.model.get("prefs").permissionLevel);this.setPermissionLevel(h);c["permissionLevel_"+h]=!0;return c};b.prototype.openChangeVis=function(b){l.stop(b);this.$(".js-vis-display").addClass("hide");this.$(".js-vis-chooser").removeClass("hide")};b.prototype.selectVis=function(b){l.stop(b);b=$(b.target).closest(".js-select");b.hasClass("disabled")||(this.$(".js-vis-display").removeClass("hide"),
this.$(".js-vis-chooser").addClass("hide"),b=b.attr("name"),this.renderBoardVisChooser(b),n("New Board","Change Visibility",b))};b.prototype.setPermissionLevel=function(b){return this.$("input[name='permissionLevel']").val(b)};b.prototype.getPermissionLevel=function(){var b;return null!=(b=this.$('input[name="permissionLevel"]').val())?b:""};b.prototype.canChangeOrg=function(b,e){var c,f;c=y.me();if(!(null!=b&&b.isFeatureEnabled("restrictVis")))return!0;a:{switch(b.getMembershipFor(c).memberType){case "admin":c=
2;break a;case "normal":c=1;break a}c=void 0}f=function(){var c,f;switch(null!=(c=b.get("prefs"))?null!=(f=c.boardVisibilityRestrict)?f[e]:void 0:void 0){case "none":return 3;case "admin":return 2;default:return 1}}();return c>=f};b.prototype.changeOrg=function(b){this.resetVisChooser();this.$(".js-vis-display").removeClass("hide");this.$(".js-vis-chooser").addClass("hide");return this.renderBoardVisChooser(this.getPermissionLevel())};b.prototype.helperAddOrg=function(b){l.stop(b);w.pushView({view:this.model.getView(ig)})};
b.prototype.submit=function(b){var e;l.stop(b);b={name:this.$('input[name="name"]').val().trim(),idOrganization:null!=(e=this.$('select[name="org-id"]').val())?e:"",prefs_permissionLevel:this.getPermissionLevel()};if(!this.$(".js-submit").hasClass("disabled"))if(""===b.name)this.$('input[name="name"]').focus().select();else return this.options.copyBoard&&(b.idBoardSource=this.model.id,b.keepFromSource=this.$("input:checkbox:checked").map(function(){return this.name}).get().join()),this.options.newBoard?
n("New Board","New"):this.options.copyBoard&&n("New Board","Copy"),b.idOrganization&&"private"!==b.prefs_permissionLevel&&(b.prefs_selfJoin=!0),y.me().boardList.create(b,{modelCache:this.modelCache,silent:!0,success:function(b){return function(d){var e,c;b.options.copyBoard&&O.hide("copying");(c=d.id,0>D.call(e=y.me().get("idBoards"),c))&&y.me().set("idBoards",e.concat(d.id));C.displayBoard({idBoard:d.id})}}(this)}),this.options.copyBoard&&O.show("Copying...","info","copying"),w.hide()};b.prototype.newOrg=
function(b){l.stop(b);return w.pushView({view:new Pb({model:this.model,modelCache:this.modelCache})})};return b}(A);eg=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return""+this.model.getOrganization().get("displayName")};b.prototype.events={"click .js-change-org":"openChangeOrg","click .js-view-org":"viewOrg"};b.prototype.render=function(){var b,e;e=this.model.getOrganization();b=e.toJSON();b.canChangeOrg=(null!=e?e.owned():
void 0)||this.model.owned();null!=e&&e.owned()&&!this.model.owned()&&(b.setOrgNull=!0);this.$el.html(v.fill("popover_board_header_org_menu",b));return this};b.prototype.openChangeOrg=function(b){var e;this.model.owned()?(w.pushView({view:Hc,options:{model:this.model,modelCache:this.modelCache}}),n("Board Header","Change Org from Board Header Org Menu")):(b=this.model.get("idOrganization"),null!=(e=this.Organization.get(b))&&e.boardList.remove(this.model),this.model.update("idOrganization",""),w.hide(),
n("Board Header","Remove Org from Board Header Org Menu"))};b.prototype.viewOrg=function(){return n("Board Header","View Org From Board Header Org Menu")};return b}(A);ig=function(c){function b(){this.newOrg=k(this.newOrg,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Add an Organization"};b.prototype.events={"click .js-create-org":"newOrg"};b.prototype.render=function(){this.$el.html(v.fill("popover_helper_new_board_add_org"));
return this};b.prototype.newOrg=function(b){l.stop(b);return w.pushView({view:new Pb({model:this.model,modelCache:this.modelCache})})};return b}(A);var Vd,ug,F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c};Vd=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.typename="CustomBoardBackground";return b}(fa);ug=function(c){function b(){return b.__super__.constructor.apply(this,
arguments)}s(b,c);b.prototype.model=Vd;b.prototype.url=function(){return"/1/member/"+this.member.id+"/boardBackgrounds"};b.prototype.initialize=function(b,e){this.member=e.member};return b}(fb);var zc,Fd,Ga,$b,vg,wg,ac,xg,Ud,bc,Wd,Xd,Ca,Yd,yg,Ic,Zd,zg,k=function(c,b){return function(){return c.apply(b,arguments)}},F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c},G=
[].slice,D=[].indexOf||function(c){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===c)return b;return-1};Ga=function(c){function b(){this.uploadUrl=k(this.uploadUrl,this);this.unbindMarkRead=k(this.unbindMarkRead,this);this.markRelatedNotificationsRead=k(this.markRelatedNotificationsRead,this);this.markRelatedNotificationsReadNow=k(this.markRelatedNotificationsReadNow,this);this.getCheckItem=k(this.getCheckItem,this);this.subscribe=k(this.subscribe,this);this.getVoterDisplayData=k(this.getVoterDisplayData,
this);this.vote=k(this.vote,this);this.addComment=k(this.addComment,this);this.getFullUrl=k(this.getFullUrl,this);this.getUrl=k(this.getUrl,this);this.getList=k(this.getList,this);this.getIndexInList=k(this.getIndexInList,this);this.getBoard=k(this.getBoard,this);this.reopen=k(this.reopen,this);this.close=k(this.close,this);this.hasChecklist=k(this.hasChecklist,this);this.hasMember=k(this.hasMember,this);this.removeMember=k(this.removeMember,this);this.addMember=k(this.addMember,this);this.toggleMember=
k(this.toggleMember,this);this.moveToList=k(this.moveToList,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.typeName="Card";b.prototype.urlRoot="/1/cards";b.prototype.initialize=function(){this.destruct([this.memberList=(new qb).syncModel(this,"idMembers"),this.memberVotedList=(new qb).syncModel(this,"idMembersVoted"),this.checklistList=(new Td).syncCache(this.modelCache,["idCard"],function(b){return function(e){return e.get("idCard")===b.id}}(this)),this.attachmentList=
(new Ag).syncSubModels(this,"attachments"),this.actionList=(new xb).syncCache(this.modelCache,[],function(b){return function(e){var c,f,h;return e.includesModel(b.typeName,b.id)?(c=e.get("data"),(null!=(f=c.board)?f.id:void 0)===b.get("idBoard")||"commentCard"===(h=e.get("type"))||"copyCommentCard"===h):!1}}(this)),this.stickerList=(new Bg(this.get("stickers"),{card:this,modelCache:this.modelCache})).syncSubModels(this,"stickers"),this.memberEditingList=new qb]);this.bind("change:id",this.actionList.sync);
this._initSubEventsOn("badges");this.cacheShortLink();return this.cacheBoardId()};b.prototype.cacheShortLink=function(){return this.onId(function(b){return function(){return b.waitForAttr("shortLink",function(){return IdCache.setCardId(b.get("shortLink"),b.id)})}}(this))};b.prototype.cacheBoardId=function(){return this.onId(function(b){return function(){return b.waitForAttr("idBoard",function(){return IdCache.setBoardIdForCard(b.id,b.get("idBoard"))})}}(this))};b.get=function(d,e){return l.isShortLink(e)?
b.findOne(d,function(b){return b.get("shortLink")===e}):b.__super__.constructor.get.apply(this,arguments)};b.prototype.updateEditing=function(b){null==this._editingTimeout&&(this._editingTimeout={});this.memberEditingList.add(b);null!=this._editingTimeout[b.id]&&(clearTimeout(this._editingTimeout[b.id]),delete this._editingTimeout[b.id]);return this._editingTimeout[b.id]=setTimeout(function(e){return function(){return e.memberEditingList.remove(b)}}(this),$d)};b.prototype.sync=function(d,e,c){return"create"===
d&&!(null!=this.get("idBoard")&&null!=this.get("idList"))?(this.waitForAttrs(["idBoard","idList"],function(f){return function(h){f.set(h);return b.__super__.sync.call(f,d,e,c)}}(this)),this.getBoard().onId(function(b){return function(d){return b.set("idBoard",d)}}(this)),this.getList().onId(function(b){return function(d){return b.set("idList",d)}}(this))):b.__super__.sync.apply(this,arguments)};b.prototype.set=function(d,e){var c;if(null!=d&&d.labels){var f=d,h,m,k,l,x;k=d.labels;x=[];h=0;for(m=k.length;h<
m;h++)c=k[h],x.push(null!=(l=c.color)?l:c);f.labels=x}null!=d&&d.badges&&(d.badges=_.extend({},this.get("badges"),d.badges));return b.__super__.set.apply(this,arguments)};b.prototype.moveToList=function(b,e){var c;c=this;return b.onId(function(f){return function(f){var m,k,l,x;k=b.calcPos(e,c);m=b.getBoard().composer;k===c.get("pos")&&c.get("idList")===f&&!c.get("closed")?(k=m.get("index"),k===e?m.set("index",k+1):k===e+1&&m.set("index",k-1)):(l=c.get("idList"),x=c.getIndexInList(),c.update({pos:k,
idList:f,closed:!1}),null!=m&&m.get("vis")&&(k=m.get("index"),m.get("idList")===f&&m.get("index")>=e&&k++,m.get("idList")===l&&m.get("index")>x&&k--,m.set("index",k)))}}(this))};b.prototype.moveToNextList=function(){var b,e;e=this.getBoard().openLists();b=_.indexOf(e,this.getList());b<e.length-1&&this.moveToList(e[b+1],1E9)};b.prototype.moveToPrevList=function(){var b,e;e=this.getBoard().openLists();b=_.indexOf(e,this.getList());0<b&&this.moveToList(e[b-1],1E9)};b.prototype.toggleMember=function(){var b,
e,c;b=arguments[0];e=3<=arguments.length?G.call(arguments,1,c=arguments.length-1):(c=1,[]);c=arguments[c++];e=e[0];null==e&&(e=!this.hasMember(b));e&&y.isMe(b)&&this.set("subscribed",!0);return this.toggle("idMembers",b,e,c)};b.prototype.addMember=function(b,e){return this.toggleMember(b,!0,e)};b.prototype.removeMember=function(b,e){return this.toggleMember(b,!1,e)};b.prototype.hasMember=function(b){return this.memberList.get(b)};b.prototype.getIdCardMems=function(){return _.map(this.memberList.models,
function(b){return function(b){return b.id}}(this))};b.prototype.getIdCommenters=function(){var b;b=[];_.each(this.Action.getListForModel(this),function(e){return function(e){if("commentCard"===e.get("type"))return e=e.get("idMemberCreator"),b.push(e)}}(this));return this.idCommenters=_.uniq(b)};b.prototype.hasChecklist=function(b){return this.checklistList.get(b)};b.prototype.close=function(b){this.update({closed:!0},b)};b.prototype.reopen=function(){var b;b=this.getList();null!=b&&this.update({closed:!1,
pos:b.calcPos(b.cardList.length,this)})};b.prototype.getBoard=function(){var b,e;return null!=(b=this.Board.get(this.get("idBoard")))?b:null!=(e=this.getList())?e.getBoard():void 0};b.prototype.getIndexInList=function(){return _.indexOf(this.getList().cardList.models,this)};b.prototype.getList=function(){var b,e;return null!=(b=this.List.get(this.get("idList")))?b:null!=(e=this.collection)?e.owner:void 0};b.prototype.getUrl=function(){return C.getCardUrl(this)};b.prototype.getFullUrl=function(){return""+
siteDomain+this.getUrl()};b.prototype.editable=function(){return this.getBoard().editable()};b.prototype.addComment=function(b){var e,c,f;e=this;c=_.max([new Date,null!=(f=e.actionList.sort().first())?f.getDate().addSeconds(1):void 0]).toISOString();if(""!==b)e.onId(function(f){return function(m){var k,l;m=e.getBoard();k=new pb({type:"commentCard",date:c,data:{text:b,card:{id:e.id,name:e.get("name")},board:{id:m.id,name:m.get("name")},textData:{emoji:y.me().allCustomEmoji()}},idMemberCreator:y.myId()},
{modelCache:f.modelCache});l=setTimeout(function(){return k.takingTooLong()},2E3);return S({url:"/1/cards/"+e.id+"/actions/comments",type:"post",data:{text:b},dataType:"json",success:function(b){clearTimeout(l);k.isTakingTooLong=!1;return f.modelCache.enqueueDelta(k,b)}})}}(this))};b.prototype.changeDueDateMaintainTime=function(b){var e,c;e=null!=(c=new Date(this.get("due")))?c:(new Date).setHours(12,0,0,0);b=I.getDateWithSpecificTime(e,b);return this.update({due:b})};b.prototype.vote=function(b){if(this.getBoard().canVote(y.me()))return this.waitForLock("vote",
function(e){return function(c){var f,h;if(b===e.voted())return c();f=null!=(h=_.clone(e.get("badges")))?h:{};b?(f.votes++,f.viewingMemberVoted=!0):(f.votes--,f.viewingMemberVoted=!1);e.set("badges",f);e.toggle("idMembersVoted",y.myId(),b,{collectionName:"membersVoted"},c)}}(this))};b.prototype.voted=function(){var b,e;return null!=(b=null!=(e=this.get("badges"))?e.viewingMemberVoted:void 0)?b:!1};b.prototype.hasStickers=function(){return 0<this.stickerList.length};b.prototype.hasCover=function(){return null!=
this.attachmentList.get(this.get("idAttachmentCover"))};b.prototype.getVoterDisplayData=function(b){return this.onId(function(e){return function(){return M["for"](e.modelCache).loadCardVoters(e.id,b)}}(this))};b.prototype.getAllAgingClasses=function(){return"aging-level-0 aging-level-1 aging-level-2 aging-level-3 aging-pirate aging-regular"};b.prototype.getAgingData=function(){var b,e;b=this.getBoard();e=Date.now()-new Date(this.get("dateLastActivity"));b={level:function(){switch(!1){case !(e<l.getMs({days:7})):return 0;
case !(e<l.getMs({days:14})):return 1;case !(e<l.getMs({days:28})):return 2;default:return 3}}(),mode:b.get("prefs").cardAging};b.agingClassesToAdd="aging-level-"+b.level+" aging-"+b.mode;/64$/.test(this.id)&&(b.agingClassesToAdd+=" aging-treasure");return b};b.prototype.toggleVote=function(){this.vote(!this.voted())};b.prototype.subscribe=function(b){var e;b!==this.get("subscribed")&&(e=this.get("badges"),e.subscribed=b,this.update({subscribed:b}))};b.prototype.getCheckItem=function(b){var e,c,f,
h;e=c=0;for(f=this.checklistList.length-1;0<=f?c<=f:c>=f;e=0<=f?++c:--c)if(e=this.checklistList.at(e),e=null!=e?null!=(h=e.checkItemList)?h.get(b):void 0:void 0)return e;return null};b.prototype.getLabels=function(){var b,e,c,f,h;f=l.labelNames;h=[];e=0;for(c=f.length;e<c;e++)b=f[e],h.push(this.getLabel(b));return h};b.prototype.getActiveLabels=function(){var b,e,c,f,h;f=this.getLabels();h=[];e=0;for(c=f.length;e<c;e++)b=f[e],b.isActive&&h.push(b);return h};b.prototype.getCard=function(){return this};
b.prototype.hasLabel=function(b){var e;e=this.get("labels");null==e&&(e=[]);return 0<=D.call(e,b)};b.prototype.setLabel=function(b,e){this.toggle("labels",b,e)};b.prototype.getLabel=function(b){return{shortcut:String.fromCharCode(49+_.indexOf(l.labelNames,b)),color:b,name:this.getBoard().getLabelName(b),isActive:this.hasLabel(b)}};b.prototype.toggleLabel=function(b){this.setLabel(b,!this.hasLabel(b))};b.prototype.markRelatedNotificationsReadNow=function(){var b,e,c,f,h,m;e=function(b){return function(d){var e,
c;return d.get("unread")&&(null!=(e=d.get("data"))?null!=(c=e.card)?c.id:void 0:void 0)===b.id}}(this);h=wb.all("header");m=[];c=0;for(f=h.length;c<f;c++)b=h[c],e(b)&&m.push(b.markRead());return m};b.prototype.markRelatedNotificationsRead=function(){return"active"!==Ha.getStatus()||"function"===typeof Ha.getHidden&&Ha.getHidden()?$(Ha).one("setStatus."+this.id+" visibilitychange."+this.id,this.markRelatedNotificationsRead):l.callDebounced(this.markRelatedNotificationsReadNow)};b.prototype.unbindMarkRead=
function(){return $(Ha).off("setStatus."+this.id+" visibilitychange."+this.id,this.markRelatedNotificationsRead)};b.prototype.toJSON=function(d){var e;null==d&&(d={});e=b.__super__.toJSON.apply(this,arguments);d.url&&(e.url=C.getCardUrl(this));return e};b.prototype.upload=function(){var b,e,c,f,h;e=arguments[0];b=3<=arguments.length?G.call(arguments,1,h=arguments.length-1):(h=1,[]);f=arguments[h++];c=b[0];Da.addProcessingAttachment();b=new FormData;b.append("token",y.myToken());null!=c?b.append("file",
e,c):b.append("file",e);return S({url:"/1/cards/"+this.id+"/attachments",data:b,type:"post",processData:!1,contentType:!1,error:function(b){return function(b,d,h,m){var k;return 413===b.status?f("Error uploading "+(null!=(k=e.name)?k:c)):m()}}(this),success:function(b){return f()},complete:function(b){return Da.removeProcessingAttachment()},timeout:l.getMs({hours:6})})};b.prototype.uploadUrl=function(b,e,c){Da.addProcessingAttachment();return S({url:"/1/cards/"+this.id+"/attachments",type:"post",
data:{url:b,name:e},error:function(b){return function(b,d,e,f){return c(d)}}(this),success:function(b){return c()},complete:function(b){return Da.removeProcessingAttachment()}})};b.prototype.removeCover=function(){return this.update({idAttachmentCover:""})};b.prototype.makeCover=function(b){return this.update({idAttachmentCover:b.id})};b.prototype.calcChecklistPos=function(b,e){return l.calcPos(b,this.checklistList,e)};b.prototype._neighbor=function(b){var e,c,f;c=this.getList().openCards();f=this.getBoard().filter;
e=_.indexOf(c,this);if(0<=e){for(e+=b;null!=c[e]&&!f.satisfiesFilter(c[e]);)e+=b;return c[e]}return null};b.prototype.prevCard=function(){return this._neighbor(-1)};b.prototype.nextCard=function(){return this._neighbor(1)};return b}(fa);xg=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.model=Ga;b.prototype.initialize=function(b,e){this.bind("change:pos",this.sort);this.list=e.list};b.prototype.url="/1/cards";b.prototype.comparator=function(b){return b.get("pos")||
0};b.prototype.openCards=function(){return this.filter(function(b){return!b.get("closed")})};return b}(Ma);Yd=function(){function c(){this.getMemberOnCardHtml=k(this.getMemberOnCardHtml,this)}c.prototype.openMemberOnCardMenu=function(b){var d,e;l.stop(b);b=this.$(b.target).closest(".member");d=b.attr("data-idmem");e=this.Member.get(d);d=this.model;w.toggle({elem:b,top:b.hasClass("member")?35:16,view:Cg,options:{model:e,modelCache:this.modelCache,card:d}})};c.prototype.getMemberOnCardHtml=function(b){var d,
e,c;d=b.toJSON();e=this.model.getBoard().getOrganization();d.isVirtual=(null!=e?e.isVirtual(b):void 0)||(null!=(c=this.model.getBoard())?c.isVirtual(b):void 0);null!=e&&(d.isDeactivated=e.isDeactivated(b));return v.fill("member_on_card",d,"",{member:v.member})};return c}();Ca=na(zd,Yd,function(c){function b(){this.doClicks=k(this.doClicks,this);this.dropFront=k(this.dropFront,this);this.dragenterFront=k(this.dragenterFront,this);this.showDetail=k(this.showDetail,this);this.deselectCard=k(this.deselectCard,
this);this.mouseLeaveEvent=k(this.mouseLeaveEvent,this);this.mouseEnterEvent=k(this.mouseEnterEvent,this);this.selectCard=k(this.selectCard,this);this.moveIn=k(this.moveIn,this);this.moveTo=k(this.moveTo,this);this.moveInCalendarDay=k(this.moveInCalendarDay,this);this.moveToCalendarDay=k(this.moveToCalendarDay,this);this.openQuickCardEditor=k(this.openQuickCardEditor,this);this.renderPowerUpEffects=k(this.renderPowerUpEffects,this);this.renderFiltered=k(this.renderFiltered,this);this.renderCover=
k(this.renderCover,this);this.showCover=k(this.showCover,this);this.renderLabels=k(this.renderLabels,this);this.renderLink=k(this.renderLink,this);this.renderName=k(this.renderName,this);this.renderStickers=k(this.renderStickers,this);this.showStickers=k(this.showStickers,this);this.addNewStickerToList=k(this.addNewStickerToList,this);this.hookDroppable=k(this.hookDroppable,this);this.render=k(this.render,this);this.paste=k(this.paste,this);this.shortcut=k(this.shortcut,this);this.setActiveCard=k(this.setActiveCard,
this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.HOOK_DROPPABLE_QUEUE=new async.queue(function(b,e){return b.hookDroppable(_.defer(e))},1);b.prototype.className="list-card js-member-droppable";b.prototype.filterDeactivated=!0;b.prototype.showMemberStatus=!1;b.prototype.applyBoardCardFilter=!0;b.prototype.events={moveto:"moveTo",movein:"moveIn",moveToCalendarDay:"moveToCalendarDay",moveInCalendarDay:"moveInCalendarDay","click .js-open-quick-card-editor":"openQuickCardEditor","click .js-member-on-card-menu":"openMemberOnCardMenu",
click:"showDetail",mouseover:"selectCard",mouseenter:"mouseEnterEvent",mouseleave:"mouseLeaveEvent",dragenter:"dragenterFront",dragover:"dragover",dragleave:"dragleave",dragexit:"dragexit",dragend:"dragend",drop:"dropFront",mousedown:"mousedown",mouseup:"mouseup",shortcut:"shortcut",paste:"paste"};b.prototype.initialize=function(){var b,e,c,f;this.onCalendar||(this.model.view=this);f=["filterDeactivated","showMemberStatus","applyBoardCardFilter"];e=0;for(c=f.length;e<c;e++)b=f[e],null!=this.options[b]&&
(this[b]=this.options[b]);this.makeDebouncedMethods("renderName","renderLabels","renderCover","renderFiltered","renderPowerUpEffects","renderStickers");return Qa.enqueue("initialize_"+this.cid,function(b){return function(){var d,e;b.listenTo(b.model,{"change:name":b.renderNameDebounced,"change:labels":b.renderLabelsDebounced,"change:idAttachmentCover":b.renderCoverDebounced,"change:name change:labels change:due":b.renderFilteredDebounced,"change:dateLastActivity":b.renderPowerUpEffectsDebounced});
b.listenTo(b.model.memberList,"add remove reset",function(){b.renderMembers();return b.renderFiltered()});b.listenTo(b.model.stickerList,{"add remove reset change sort":b.renderStickersDebounced});d=b.model.getBoard();b.listenTo(d,"change:powerUps change:prefs.cardAging",b.renderPowerUpEffectsDebounced);b.listenTo(d.filter,"changeAny",b.renderFiltered);e=d.viewState;b.listenTo(e,"change:cardMode",function(){if(e.get("idActiveCard")===b.model.id&&"editStickers"===e.get("cardMode"))return b.editStickers()});
return b.listenToActiveCardChanges()}}(this))};b.prototype.destructor=function(){var d;d=this.model.getBoard();null!=d&&(d.offd("change:prefs",this.render),d.filter.offd("change",this.renderFiltered),this.stopListeningToActiveCardChanges());this.subview(Pd,this.model).recursivelyStopListening();return b.__super__.destructor.apply(this,arguments)};b.prototype.listenToActiveCardChanges=function(){var b;b=this.model.getBoard().viewState;return this.listenTo(b,"change:idActiveCard",this.setActiveCard)};
b.prototype.stopListeningToActiveCardChanges=function(){var b;b=this.model.getBoard().viewState;return this.stopListening(b,"change:idActiveCard",this.setActiveCard)};b.prototype.setActiveCard=function(){var b;if(this.model.getBoard().viewState.isCardSelected(this.model))return X.addHandler(this,{scope:"card"}),$(".list-card.active-card").removeClass("active-card"),null!=(b=this.$el)?b.addClass("active-card"):void 0};b.prototype.getKeyScope=function(){return"cardView"};b.prototype.shortcut=function(b){var e,
c,f;c=y.isLoggedIn();e=this.model.editable();f=this.onCalendar;switch(b){case 13:return this.showDetail(),"Enter - Open Card";case 69:if(e)return this.openQuickCardEditor(),"E - Open Quick Card Editor";break;case 84:return C.showCardDetail(this.model,"editTitle"),"T - Open Card and Edit Title";case 68:if(e)return this.showPopOver(cc),["D - Due Dates","On Board View"];break;case 76:if(e)return this.showPopOver(ac),["L - Edit Labels","On Board View"];break;case 49:case 50:case 51:case 52:case 53:case 54:case 97:case 98:case 99:case 100:case 101:case 102:return b-=
49<=b&&54>=b?49:97,this.model.toggleLabel(l.labelNames[b]),"1-6 - Toggle Specific Label";case 65:case 77:if(e)return this.showPopOver(bc),["A - Assign Members","Board View"];break;case 32:if(e)return this.model.toggleMember(y.myId()),"Space - Toggle Assigning Self";break;case 67:case 46:if(e)return this.model.close(),"C / Delete - Archive Card";break;case 190:if(e&&!f)return this.model.moveToNextList(),"> - Move to Next List";break;case 188:if(e&&!f)return this.model.moveToPrevList(),"< - Move to Previous List";
break;case 86:if(c)return this.model.toggleVote(),"V - Vote";break;case 83:if(c)return b=this.model.get("subscribed"),this.model.subscribe(!b),["S - Subscribe",b?"Unsubscribe":"Subscribe"]}};b.prototype.paste=function(b,e){var c;if("image"===b)return c=new Date,this.model.upload(e,"upload "+c.toString("yyyy-MM-dd")+" at "+c.toString("h.mm.ss tt").toLowerCase()+".png",function(){}),["Paste - Upload Image From Clipboard","Card"]};b.prototype.showPopOver=function(b){return w.toggle({elem:this.$(".js-card-menu"),
view:b,options:{model:this.model,showShortcuts:!0,hideOnSelect:!0}})};b.prototype.render=function(){var b,e,c,f,h,m,k,l;P("render","rendering card "+this.model.get("name"));b=this.model.toJSON();b.showCover=this.showCover();b.showEditor=this.model.editable()&&!this.options.hideMenu;this.model.hasStickers()&&(b.hasStickers=!0);b.labels=this.model.getActiveLabels();h=this.model.getBoard().getOrganization();b.members=[];l=this.model.memberList.models.reverse();m=0;for(k=l.length;m<k;m++)c=l[m],f=c.toJSON(),
f.isVirtual=(null!=h?h.isVirtual(c):void 0)||this.model.getBoard().isVirtual(c),null!=h&&(f.isDeactivated=h.isDeactivated(c)),b.members.push(f);this.$el.toggleClass("js-archive-card",this.model.get("closed"));this.showCover()&&(e=this.model.hasCover());this.$el.toggleClass("has-cover",e);this.model.hasStickers()&&this.$el.addClass("has-stickers");e={label:v.label,member_on_card:v.member_on_card,member:v.member};this.el.innerHTML=v.fill("card_in_list",b,{editable:this.model.editable()},e);this.setActiveCard();
this.renderFiltered();this.renderBadges();Qa.enqueue("render_"+this.cid,function(b){return function(){b.renderCover();b.renderStickers();b.renderPowerUpEffects();b.model.onId(b.renderLink);b._droppableHookedSinceRender=!1;if(!ba.isTouch())return Ca.HOOK_DROPPABLE_QUEUE.push(b)}}(this));return this};b.prototype.hookDroppable=function(b){if(null==this.$el||this._droppableHookedSinceRender)return"function"===typeof b?b():void 0;this._droppableHookedSinceRender=!0;ba.isTouch()||this.$el.droppable({refreshPositions:!0,
inBounds:function(b){return function(b){var d,e,c,k,l;c=Q.boardOffset;d=Q.boardHeight;e=Q.boardWidth;return c.left<(k=b.pageX)&&k<c.left+e&&c.top<(l=b.pageY)&&l<c.top+d}}(this),accept:".js-list-draggable-board-members .member, .js-draggable-sticker",hoverClass:"active-card",drop:function(b){return function(d,c){var h,m,k,u,x,s;c.draggable.hasClass("member")?(k=c.draggable.data("id"),c.draggable.clone(),u=b.model.memberList.detect(function(b){return b.id===k}),u||(b.model.addMember(k),n("Card","Add Member by Board Sidebar"))):
c.draggable.hasClass("js-draggable-sticker")&&(u=c.draggable.data("sticker"),s=c.helper.offset(),h=b.$el.offset().top+1,m=b.$el.offset().left+1,x=b.$el.outerWidth()-1-1,m=s.left-m,h=s.top-h,x=100*(m/x),m=b.$(".js-card-stickers").height(),h=b.$el.hasClass("has-stickers")||b.$el.hasClass("has-cover")?100*(h/m):0,h>m&&(h=m),m=l.getElemTransformMatrix(c.helper.find(".sticker-select-fixed")),m=null!=m?l.getMatrixDegrees(m)%360:0,b.addNewStickerToList(u,x,h,m))}}(this)});return"function"===typeof b?b():
void 0};b.prototype.addNewStickerToList=function(b,e,c,f){var h,m;h=null!=(m=b.id)?m:b.get("image");n("Card","Sticker",h);this.model.stickerList.create({image:h,left:e,top:c,rotate:f,zIndex:this.model.stickerList.nextZIndex(),imageUrl:b.get("url"),imageScaled:b.get("scaled")},{modelCache:this.modelCache})};b.prototype.showStickers=function(){return!this.onCalendar};b.prototype.renderStickers=function(b){var e,c;if(this.showStickers()){e=this.$(".list-card-stickers-area");b=this.$(".js-card-stickers").empty();
if(c=this.model.hasStickers()){this.$el.addClass("has-stickers");e.removeClass("hide");var f,h,m;h=this.model.stickerList.models;m=[];c=0;for(f=h.length;c<f;c++)e=h[c],m.push(this.subview(Jc,e));this.appendSubviews(m,b)}else this.$el.removeClass("has-stickers"),e.addClass("hide");return this}this.$el.removeClass("has-stickers")};b.prototype.renderName=function(){var b;b=this.model.toJSON();b=v.fill("card_title_on_card_front",b);this.$(".js-card-name").html(b);return this};b.prototype.renderLink=function(){var b;
b=C.getCardUrl(this.model);this.$(".js-card-name").attr("href",b);return this};b.prototype.renderLabels=function(){var b,e,c,f,h;f=this.model.getActiveLabels();h=[];e=0;for(c=f.length;e<c;e++)b=f[e],h.push(v.fill("label",b));b=h.join("");this.$(".js-card-labels").empty().append(b);return this};b.prototype.showCover=function(){return this.model.getBoard().getPref("cardCovers")&&this.model.hasCover()&&!this.onCalendar};b.prototype.renderCover=function(){var b,e,c,f,h;this.showCover()&&(c=this.model.attachmentList.get(this.model.get("idAttachmentCover")));
null!=c?(f=ba.isHighDPI()?600:300,f=null!=(b=c.smallestPreviewBiggerThan(f))?b:c.biggestPreview(),h=null!=f?f.url:c.get("url"),b=this.$(".js-card-cover"),b.css({"background-color":null!=(e=c.get("edgeColor"))?e:"transparent","background-image":'url("'+h+'")'}).removeClass("hide").toggleClass("no-preview-size",null==f),null!=f&&(e=this.$(".js-card-stickers"),h=Math.min(f.height,250),f=217*f.height/f.width,f<=h?(b.css({height:f,"background-size":"cover"}),e.css("height",f)):(b.css({height:h,"background-size":"contain"}),
e.css("height",h)))):this.$(".js-card-cover").css({"background-image":""}).addClass("hide").removeClass("no-preview-size");this.$el.toggleClass("has-cover",null!=c);return this};b.prototype.renderFiltered=function(b){null==this._visible&&(this._visible=!0);b=this.model.getBoard();b=null==b||!C.onBoardView(b.id)||!this.applyBoardCardFilter||b.filter.satisfiesFilter(this.model);this._visible!==b&&(this.$el.toggleClass("hide",!b).height(b?"":0),this._visible=b);return this};b.prototype.renderBadges=
function(){var b;b=this.subview(Pd,this.model);this.$(".badges").replaceWith(b.render().el);return this};b.prototype.renderMembers=function(b){var e;this.model.getBoard().getOrganization();e=this.model.memberList.models.reverse();var c,f,h;h=[];c=0;for(f=e.length;c<f;c++)b=e[c],h.push(this.getMemberOnCardHtml(b));b=h.join("");this.$(".js-list-card-members").empty().append(b);return this};b.prototype.renderPowerUpEffects=function(){var b,e;b=this.model.getBoard();this.$el.removeClass(this.model.getAllAgingClasses());
if(0<=D.call(null!=(e=b.get("powerUps"))?e:[],"cardAging")&&!this.model.get("closed"))return b=this.model.getAgingData(),this.$el.addClass(b.agingClassesToAdd)};b.prototype.openQuickCardEditor=function(b){l.stop(b);b=this.$el.offset();b={width:this.$el.width(),left:b.left,top:b.top};w.hide();(new Dg({model:this.model,modelCache:this.modelCache})).render(b);n("Card Front","Open Quick Card Editor");return this};b.prototype.moveToCalendarDay=function(b,e,c){var f;if(e.sender.hasClass("js-archive-items"))return c=
c.data.day,b=null!=(f=new Date(this.model.get("due")))?f:(new Date).setHours(12,0,0,0),f=I.getDateWithSpecificTime(b,c),this.model.update({due:f,closed:!1});c.getCardView(this.model).delegateEvents();if(Q.isInSidebarArchiveDropzone){if(!this.model.get("closed"))return this.model.close(),c.renderCardsAndListHeaders()}else return f=new Date(c.data.day),this.model.changeDueDateMaintainTime(f),c.updateHeader(),c.renderCardsAndListHeaders()};b.prototype.moveInCalendarDay=function(b,e,c){c.getCardView(this.model).delegateEvents();
Q.isInSidebarArchiveDropzone&&(this.model.get("closed")||this.model.close());return c.renderCardsAndListHeaders()};b.prototype.moveTo=function(b,e,c,f){var h,m,k;0===e.item.parents(".list").length?(l.callDebounced(null!=(h=c.renderCards)?h:function(){}),l.callDebounced(null!=(m=null!=(k=this.model.getList())?k.view.renderCards:void 0)?m:function(){})):(h=this.model.get("closed"),(b=Q.isInSidebarArchiveDropzone)?h||this.model.update("closed",!0):(b=e.item.parents(".list").find(".list-card:not(.placeholder,.js-composer)"),
b=b.index(e.item),f||e.item.remove(),this.model.moveToList(c.model,b)))};b.prototype.moveIn=function(b,e,c){c.model.id===this.model.get("idList")&&this.moveTo(b,e,c,!0)};b.prototype.selectCard=function(b){var e,c;!w.isVisible&&!(Q.sorting||null!=(e=this.model.getBoard())&&null!=(c=e.view)&&c.ignoreMouseCardSelects)&&this.model.getBoard().viewState.selectCard(this.model)};b.prototype.mouseEnterEvent=function(){this.selectCard();Ca.HOOK_DROPPABLE_QUEUE.push(this)};b.prototype.mouseLeaveEvent=function(){this.deselectCard();
Ca.HOOK_DROPPABLE_QUEUE.push(this)};b.prototype.deselectCard=function(){var b,e;if(!w.isVisible&&!(Q.sorting||null!=(b=this.model.getBoard())&&null!=(e=b.view)&&e.ignoreMouseCardSelects))$(".list-card.active-card").removeClass("active-card"),X.removeHandlerScope("card"),this.model.getBoard().viewState.selectCard(null)};b.prototype.showDetail=function(b){if((!b||!b.ctrlKey&&!b.metaKey&&!b.shiftKey)&&this.doClicks()&&!this._wasLongPress)return l.stop(b),C.showCardDetail(this.model)};b.prototype.dragenterFront=
function(b){var e;e=this.$el.outerHeight();this.$(".list-card-dropzone").css({height:""+e+"px","line-height":""+e+"px"});return this.dragenter(b)};b.prototype.dropFront=function(b){n("Card Front","Drop Attachment Upload");return this.drop(b)};b.prototype.doClicks=function(){return!Q.sorting};b.prototype._cancelLongPress=function(){clearTimeout(this._longPressTimeout);this._longPressTimeout=null;if(this._wasLongPress)return _.defer(function(b){return function(){return b._wasLongPress=!1}}(this))};
b.prototype.mousedown=function(b){var e,c;if(this.model.editable()&&(this._cancelLongPress(),b=null!=(c=this._longPressHandler(b))?c:{},e=b.handler,c=b.timeout,null!=e))return this._longPressTimeout=setTimeout(function(b){return function(){b._cancelLongPress();if(!b.$el.hasClass("ui-sortable-helper"))return b._wasLongPress=!0,$(document).unbind(".sortable"),e()}}(this),c)};b.prototype.mouseup=function(b){return this._cancelLongPress()};b.prototype._longPressHandler=function(b){return 0<$(b.target).closest(".sticker").length?
{handler:function(e){return function(){return e.editStickers(b)}}(this),timeout:500}:null};return b}(A));Ud=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.viewType=Ca;b.prototype.getModels=function(){return this.collection.openCards()};b.prototype.render=function(){var b,e,c,f,h,m;P("render","rendering "+this.getModels().length+" "+this.collection.model.name+"s into "+this.viewType.name);f=new async.queue(function(b){return function(d,e){var c;b.appendSubviews(function(){var b,
e,f;f=[];b=0;for(e=d.length;b<e;b++)c=d[b],f.push(this.subview(this.viewType,c));return f}.call(b));return _.defer(e)}}(this),1);if(!("chrome"===(e=ba.browserStr)||"firefox"===e||"opera"===e)&&"windows"===ba.osStr)e=function(b){return function(){_.defer(function(){return $("#board").css({bottom:1})});return _.delay(function(){return $("#board").css({bottom:0})},150)}}(this),b=_.debounce(e,1E3),f.drain=function(){return b()};c=this.getModels();for(e=[];0<c.length;)e.push(c.splice(0,20));h=0;for(m=
e.length;h<m;h++)c=e[h],f.push([c]);return this};b.prototype.insertSubview=function(b,e,c){var f;null==c&&(c=this.$el);P("render","inserting "+b.$el.find("h2").text()+" at position "+e);"number"===typeof e?e=0>=e?c.children().eq(0):e<c.children().length?c.children().eq(e):void 0:e instanceof A&&(e=e.$el);f=b.model;b.$el.is(":empty")?(b.delegateEvents(),b.render()):!c.hasClass("hide")&&!f.getBoard().filter.satisfiesFilter(f)&&b.renderFiltered();0<(null!=e?e.length:void 0)?b.$el.insertBefore(e):c.append(b.$el);
return Q.refreshIfInitialized(this.$el)};return b}(sb);Fd=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.onCalendar=!0;return b}(Ca);Ic=function(c){function b(){this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){return this.cardView=this.subview(Ca,this.model,{filterDeactivated:!1,showMemberStatus:!1})};b.prototype.className="list-card-container";b.prototype.render=function(){var b;
b={listName:this.model.getList().get("name"),boardName:this.model.getBoard().get("name"),showBoard:this.options.dateSort};this.$el.html(v.fill("member_cards_card",b));this.appendSubview(this.cardView,this.$(".js-card"));return this};return b}(A);zc=function(c){function b(){this.openBoxFilePicker=k(this.openBoxFilePicker,this);this.openOneDriveFilePicker=k(this.openOneDriveFilePicker,this);this.openDropboxFilePicker=k(this.openDropboxFilePicker,this);this.openGoogleDriveFilePicker=k(this.openGoogleDriveFilePicker,
this);this._loadOnce=k(this._loadOnce,this);this.startUpload=k(this.startUpload,this);this.render=k(this.render,this);this.getViewTitle=k(this.getViewTitle,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Attach From..."};b.prototype.initialize=function(){return this.listenTo(Hb,"loaded",this.render)};b.prototype.events={"click .js-google-drive-attachment":"openGoogleDriveFilePicker","click .js-dropbox-attachment":"openDropboxFilePicker",
"click .js-one-drive-attachment":"openOneDriveFilePicker","click .js-box-attachment":"openBoxFilePicker","change .js-attach-file":"startUpload","click .js-gold-promo":"openPromo","click .js-add-attachment-url":"addUrl","keydown .js-attachment-url":"keydown"};b.prototype._scripts={dropbox:"https://www.dropbox.com/static/api/1/dropbox.js",box:"https://app.box.com/js/static/select.js",oneDrive:"https://js.live.net/v5.0/wl.js"};b.prototype.getData=function(){return async.forEach([this._scripts.dropbox,
this._scripts.oneDrive,this._scripts.box],function(b){return function(e,c){return b._loadOnce(e,c)}}(this))};b.prototype.render=function(){var b,e,c,f;b=this.model.toJSON();b.hasLargeAttachments=(null!=(e=y.me())?e.isFeatureEnabled("largeAttachments"):void 0)||(null!=(c=this.model.getBoard())?null!=(f=c.getOrganization())?f.isFeatureEnabled("largeAttachments"):void 0:void 0);b.googleDriveReady=Hb.loaded;this.$el.html(v.fill("attachment_type_picker",b));return this};b.prototype.startUpload=function(b){var e,
c,f;f=$(b.target);e=this.$(".js-file-too-large").hide();c=f[0].files;b=function(b){if(b)return e.show(),n("Card Detail","Attachment","Upload Error - File Too Large");n("Card Detail","Upload Attachment Complete - Via Picker");1<c.length&&O.show("Finished!","info","AjaxQueueUpload",2E3);return w.hide()};0<(null!=c?c.length:void 0)?_.any(c,function(b){return!l.validCardUpload(b)})?b("too large"):async.forEachSeries(c,function(b){return function(d,e){return b.model.upload(d,e)}}(this),b):l.uploadFile(f,
b)};b.prototype._loadOnce=function(b,e){null==this._loadedScripts&&(this._loadedScripts={});return this._loadedScripts[b]?e():$.getScript(b,function(c){return function(){c._loadedScripts[b]=!0;return e()}}(this))};b.prototype.openGoogleDriveFilePicker=function(b){l.stop(b);return async.auto({picker:function(b){return gapi.load("picker",b)},oauthToken:function(b){var d;d=Hb.validToken();return Hb.authorize(d,b)},open:["picker","oauthToken",function(b){return function(d,c){var h,m;m=c.oauthToken;h=
new google.picker.DocsView;h.setIncludeFolders(!0);(new google.picker.PickerBuilder).enableFeature(google.picker.Feature.MULTISELECT_ENABLED).addView(h).setOAuthToken(m).setDeveloperKey(window.googleDrive.publicAPIKey).setCallback(function(d){null!=d.docs&&async.forEachSeries(d.docs,function(d,c){return S({url:"/1/cards/"+b.model.id+"/attachments",type:"post",data:{url:d.url,name:d.name,mimeType:d.mimeType},success:function(){c();n("Card Detail","Upload Google Drive File");return w.hide()}})},function(){})}).build().setVisible(!0);
return $("iframe.picker-frame[src*=authserviceid]").attr("src",function(){return $(this).attr("src").replace(/authserviceid/g,"fixgoogle")})}}(this)]},function(b){if(b)throw b;})};b.prototype.openDropboxFilePicker=function(b){l.stop(b);return this._loadOnce(this._scripts.dropbox,function(b){return function(){Dropbox.init({appKey:"c1ezquoytg5upju"});return Dropbox.choose({linkType:"preview",iframe:!0,success:function(d){async.forEachSeries(d,function(d,c){return S({url:"/1/cards/"+b.model.id+"/attachments",
type:"post",data:{url:d.link,name:d.name},success:function(){c();n("Card Detail","Upload Dropbox File");return w.hide()}})},function(){})}})}}(this))};b.prototype.openOneDriveFilePicker=function(b){l.stop(b);return this._loadOnce(this._scripts.oneDrive,function(b){return function(){var d;WL.init({client_id:null!=(d=window.oneDriveClientId)?d:"0000000040119A6B",redirect_uri:""+siteDomain+"/onedrive_callback.html"});return WL.login({scope:"wl.skydrive wl.signin"}).then(function(d){return WL.fileDialog({mode:"open",
select:"single"}).then(function(d){var c;async.forEachSeries(_.toArray(null!=d?null!=(c=d.data)?c.files:void 0:void 0),function(d,c){return S({url:"/1/cards/"+b.model.id+"/attachments",type:"post",data:{url:d.link,name:d.name},success:function(){c();n("Card Detail","Upload OneDrive File");return w.hide()}})},function(){})})})}}(this))};b.prototype.openBoxFilePicker=function(b){l.stop(b);return this._loadOnce(this._scripts.box,function(b){return function(){var d,c;d=new BoxSelect({clientId:"zclwcvudmddhz0cscz3w6awtcfs8bne3",
linkType:"shared",multiselect:!0});c=function(h){d.unregister(d.SUCCESS_EVENT_TYPE,c);async.forEachSeries(h,function(d,c){return S({url:"/1/cards/"+b.model.id+"/attachments",type:"post",data:{url:d.url,name:d.name},success:function(){c();n("Card Detail","Upload Box File");return w.hide()}})},function(){})};d.success(c);return d.launchPopup()}}(this))};b.prototype.openPromo=function(b){var e;l.stop(b);return Y.show({view:null!=(e=y.me())?e.getView(Kc):void 0})};b.prototype.keydown=function(b){if(l.isSubmitKey(b))return this.addUrl()};
b.prototype.addUrl=function(b){b=this.$(".js-attachment-url").val().split(/\s+/);b=_.filter(b,function(b){return/\S/.test(b)});if(!_.isEmpty(b)&&10>b.length)return w.pushView({view:zg}),async.forEach(b,function(b){return function(d,c){return S({url:"/1/cards/"+b.model.id+"/attachments",type:"post",data:{url:d},success:function(){return n("Card Detail","Upload link")},complete:function(){return c()}})}}(this),function(){return w.hide()})};return b}(A);zg=function(c){function b(){return b.__super__.constructor.apply(this,
arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Sending Links\u2026"};b.prototype.render=function(){this.$el.html('<div class="spinner loading"></div>');return this};return b}(A);wg=na(zd,Tb,ub,Yd,function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="clearfix";b.prototype.defaultActionLimit=50;b.prototype.maxActionLimit=1E3;b.prototype.maximumCommentLength=16384;b.prototype.initialize=function(){this.fShowExtraActions=!1;this.makeDebouncedMethods("render",
"renderCover","renderStickers","renderName","renderDescription","renderArchived","renderLabels","renderList","renderVotes","renderDueDate","renderSubscribe","renderAttachments","renderMembers","renderAging");this.listenTo(this.model,{"change:name":this.renderNameDebounced,"change:desc":this.renderDescriptionDebounced,"change:closed":this.renderArchivedDebounced,"change:labels":this.renderLabelsDebounced,"change:idList":this.renderListDebounced,"change:idMembersVoted":this.renderVotesDebounced,"change:due":this.renderDueDateDebounced,
"change:subscribed":this.renderSubscribeDebounced,"change:dateLastActivity":this.renderAgingDebounced,"change:idAttachmentCover":function(){this.renderAttachmentsDebounced();return this.renderCoverDebounced()},remove:this.closeDialog});this.listenTo(this.model.memberList,{"add remove reset":this.renderMembersDebounced});this.listenTo(this.model.memberVotedList,{"add remove reset":this.renderVotesDebounced});this.listenTo(this.model.checklistList,{"add reset":this.renderChecklists,remove:this.removeChecklist,
sort:this.sortChecklists});this.listenTo(this.model.attachmentList,{"add remove reset":this.renderAttachmentsDebounced});this.listenTo(this.model.stickerList,{"add remove reset change sort":this.renderStickersDebounced});this.listenTo(this.model.memberEditingList,{"add remove reset change:action":this.renderEditing});this.listenTo(this.model.getBoard(),{"change:labelNames":this.renderLabelsDebounced,"change:prefs":function(b){var e;e=function(e){var c,h;return(null!=(c=b.get("prefs"))?c[e]:void 0)!==
(null!=(h=b.previous("prefs"))?h[e]:void 0)};e("cardCovers")&&this.renderCover();if((e("cardAging")||e("comments")||e("voting"))&&0===this.$(".editing").length)return this.renderDebounced()}});this.getData();this.listenTo(Da,"change:processingAttachmentsLength",function(){return this.renderProcessingAttachments()});return this.actionListView=this.collectionSubview(Qb,this.model.actionList,{renderOpts:{context:this.model,compact:!1}})};b.prototype.events={"click .js-edit-labels":"editLabelsSidebar",
"click .js-change-card-members":"changeMembersSidebar","click .js-add-checklist-menu":"addChecklistSidebar","click .js-add-due-date":"dueDateSidebar","click .js-attach":"openAttachPicker","click .js-move-card":"moveCard","click .js-copy-card":"copyCard","click .js-subscribe":"subscribe","click .js-unsubscribe":"unsubscribe","click .js-vote":"vote","click .js-unvote":"unvote","click .js-archive-card":"archiveCard","click .js-unarchive-card":"unarchiveCard","click .js-delete-card":"deleteCardSidebar",
"click .js-more-menu":"showMoreMenu","click .js-open-card-cover-in-viewer":"openCoverInViewer","click .js-open-move-from-header":"openMoveFromHeader","click .js-details-edit-members":"editMembersMain","click .js-details-edit-labels":"editLabelsMain","click .js-edit-label .card-label":"editLabelsMainSingleLabel","click .js-details-edit-due-date":"showDueDateBadgeMenu","click .js-show-votes":"showVotes","click .js-edit-desc":"editDesc","click .js-member-on-card-menu":"openMemberOnCardMenu","click .js-format-help":"openFormatHelp",
"click .js-view-some-attachments":"showFewerAttachments","click .js-view-all-attachments":"showMoreAttachments","click .js-show-all-actions":"showAllActions","click .js-show-extra-actions":"showExtraActions","click .js-hide-extra-actions":"hideExtraActions","keydown .js-new-comment-input":"keydownCommentEvent","input .js-new-comment-input":"checkLength","click .js-add-comment:not(:disabled)":"submitComment","click .js-attach-comment":"attachComment","click .js-truncate-comment":"truncateComment",
"click .js-cancel-comment":"clearComment","click .js-new-comment":"inputComment","focus .js-new-comment-input":"inputComment","keyup .js-new-comment-input":"keyAutoMention","click .js-comment-add-attachment":"commentAddAttachment","click .js-comment-mention-member":"commentMentionMember","click .js-comment-add-emoji":"commentAddEmoji",dragenter:"dragenterBack",dragover:"dragover",dragleave:"dragleave",dragexit:"dragexit",dragend:"dragend",drop:"dropBack","sortstop .js-checklist-list":"sortStop",shortcut:"shortcut"};
b.prototype.shortcut=function(b){var e,c,f;e=this.model.getBoard();c=this.model.editable();f=y.isLoggedIn();switch(b){case 32:if(c)return this.model.toggleMember(y.myId()),["Space - Toggle Assigning Self","Card Detail"];break;case 65:case 77:if(c)return this.changeMembersSidebar(),["A - Assign Members","Card Detail"];break;case 69:if(c)return this.editDesc(),["E - Edit Description","Card Detail"];break;case 76:if(c)return this.editLabelsSidebar(),["L - Edit Labels","Card Detail"];break;case 68:if(c)return null!=
this.model.get("due")?this.showDueDateBadgeMenu():this.dueDateSidebar(),["D - Due Dates","Card Detail"];break;case 67:case 46:if(c)return this.archiveCard(),["C / Delete - Archive Card"];break;case 84:if(c)return this.editTitle(),"T - Edit Title";break;case 190:if(c)return this.model.moveToNextList(),"> - Move to Next List";break;case 188:if(c)return this.model.moveToPrevList(),"< - Move to Previous List";break;case 9:if(c)return this.clickNextTabbable(),"Tab - Open Editable";break;case 49:case 50:case 51:case 52:case 53:case 54:case 97:case 98:case 99:case 100:case 101:case 102:if(c)return b-=
49<=b&&54>=b?49:97,this.model.toggleLabel(l.labelNames[b]),"1-6 - Toggle Specific Label";break;case 86:if(e.canVote(y.me()))return this.model.toggleVote(),"V - Vote";break;case 83:if(f)return b=this.model.get("subscribed"),this.model.subscribe(!b),["S - Subscribe",b?"Unsubscribe":"Subscribe"];break;case 74:if(null!=(b=this.model.nextCard()))return C.showCardDetail(b,null,!0),"J - Down";break;case 75:if(null!=(b=this.model.prevCard()))return C.showCardDetail(b,null,!0),"K - Up"}};b.prototype.paste=
function(b,c){var g;if("image"===b)return g=new Date,this.model.upload(c,"upload "+g.toString("yyyy-MM-dd")+" at "+g.toString("h.mm.ss tt").toLowerCase()+".png",function(){}),["Paste - Upload Image From Clipboard","Card Detail"]};b.prototype.getData=function(){this.loading=!0;this.$(".js-loading-card-actions").show();this.model.onId(function(b){return function(){return async.series([function(c){var g;g=b.fShowAllActions?b.maxActionLimit:b.defaultActionLimit;return M["for"](b.modelCache).loadCardActions(b.model.get("idBoard"),
b.model.id,g,c)}],function(c){b.loading=!1;b.$(".js-loading-card-actions").hide();b.toggleActionButton();return b.renderExtraActions()})}}(this))};b.prototype.render=function(){var b;this.fShowAllActions=this.fShowAllAttachments=!1;b={canComment:this.model.getBoard().canComment(y.me()),canVote:this.model.getBoard().canVote(y.me()),hasVoted:this.model.voted(),canSubscribe:y.isLoggedIn(),hasAttachments:0<this.model.attachmentList.length,dateAdded:null!=this.model.id?l.idToDate(this.model.id):new Date,
me:y.me().toJSON(),loading:this.loading};b.showActions=b.canVote||b.canSubscribe;this.$el.toggleClass("editable",this.model.editable()).html(v.fillFromModel("card_detail",this.model,b,{member:v.member,comment_options:v.comment_options}));this.actionListView.setElement(this.$(".js-list-actions")[0]);this.commentInput=this.$(".new-comment-input")[0];this.renderCover().renderStickers().renderName().renderDescription().renderList().renderActionList().renderMembers().renderArchived().renderChecklists().renderSubscribe().renderVotes().renderDueDate().renderAttachments().renderLabels().renderAging().renderEditing();
this.recallDrafts();_.defer(_.bind(this.fixSidebar,this));I.update(this.el);return this};b.prototype.getSidebarLeft=function(){return parseFloat($(".window").css("left"))+$(".window").width()-this.$(".window-sidebar").outerWidth()};b.prototype.resetSidebarPos=function(){return this.$(".window-sidebar").css({left:"",top:"",position:"relative"})};b.prototype.fixSidebarPos=function(){return this.$(".window-sidebar").css({left:this.getSidebarLeft(),top:0,position:"fixed"})};b.prototype.forceUpdateSidebarPos=
function(){return $(".window-overlay").scrollTop()<=this.sidebarScrollTop||qa.fSmall?this.resetSidebarPos():this.fixSidebarPos()};b.prototype.fixSidebar=function(){var b,c,g,f;b=$(".window-overlay").off("scroll.fixSidebar");this.sidebarScrollTop=this.$(".window-sidebar").offset().top;g=c=!1;f=function(f){return function(){b.scrollTop()<=f.sidebarScrollTop||qa.fSmall||f.$(".window-sidebar").height()>$(window).height()?g||(f.resetSidebarPos(),c=!1,g=!0):c||(f.fixSidebarPos(),c=!0,g=!1)}}(this);b.on("scroll.fixSidebar",
function(){return requestAnimationFrame(f)})};b.prototype.editDesc=function(b){l.stop(b);this.edit("desc")};b.prototype.editTitle=function(b){this.$(".card-detail-title .current").click()};b.prototype.archiveCard=function(b){this.model.close();n("Card Detail","Sidebar","Archive Button")};b.prototype.unarchiveCard=function(b){n("Card Detail","Sidebar","Re-Open Button");this.model.reopen()};b.prototype.deleteCardSidebar=function(b){pa.toggle({elem:this.$(".js-delete-card"),model:this.model,top:35,title:"Delete Card?",
text:"All actions will be removed from the activity feed and you won't be able to re-open the card. There is no undo. You can archive a card to remove it from the board and preserve the activity.",confirmText:"Delete",confirmBtnClass:"negate",fxConfirm:function(b){return function(d){Y.hide();b.model.destroy();return n("Card","Delete")}}(this)});n("Card Detail","Sidebar","Open Delete Confirm")};b.prototype.showMoreMenu=function(b){l.stop(b);w.toggle({elem:this.$(".js-more-menu"),top:30,view:vg,options:{model:this.model,
modelCache:this.modelCache}});n("Card Detail","Sidebar","Open More Menu")};b.prototype.openCoverInViewer=function(b){l.stop(b);this.showCover()&&(b=this.model.attachmentList.get(this.model.get("idAttachmentCover")),(new Ec({model:this.model,modelCache:this.modelCache,attachmentModel:b})).render(),n("Card Detail","Open Attachment Viewer via Cover",b.getType()))};b.prototype.openMoveMenu=function(b,c){w.toggle({elem:b,top:c,view:Xd,options:{model:this.model,modelCache:this.modelCache}})};b.prototype.openMoveFromHeader=
function(b){l.stop(b);this.openMoveMenu(this.$(".js-open-move-from-header"),20);n("Card Detail","Move Button (via Header)")};b.prototype.moveCard=function(b){l.stop(b);this.openMoveMenu(this.$(".js-move-card"),35);n("Card Detail","Sidebar","Open Move Menu")};b.prototype.copyCard=function(b){l.stop(b);w.toggle({elem:this.$(".js-copy-card"),top:35,view:$b,options:{model:this.model,modelCache:this.modelCache}});n("Card Detail","Sidebar","Open Copy Menu")};b.prototype.openLabelsPopOver=function(b,c){w.toggle({elem:b,
top:c,view:ac,options:{model:this.model,modelCache:this.modelCache}})};b.prototype.editLabelsMainSingleLabel=function(b){l.stop(b);this.openLabelsPopOver(this.$(b.target).closest(".card-label"),35);n("Card Detail","Edit Labels Main Column - Single Label")};b.prototype.editLabelsMain=function(b){l.stop(b);this.openLabelsPopOver(this.$(".js-details-edit-labels"),35);n("Card Detail","Edit Labels Main Column - Plus Button")};b.prototype.editLabelsSidebar=function(b){l.stop(b);this.openLabelsPopOver(this.$(".js-edit-labels"),
35);n("Card Detail","Sidebar","Edit Labels Button")};b.prototype.showVotes=function(b){l.stop(b);this.model.getVoterDisplayData();w.toggle({elem:this.$(".js-show-votes"),top:35,view:Eg,options:{model:this.model,modelCache:this.modelCache}});n("Card Detail","Header Vote Button")};b.prototype.doClicks=function(){return!Q.sorting};b.prototype.showCover=function(){return this.model.getBoard().getPref("cardCovers")&&this.model.hasCover()};b.prototype.checkShowCover=function(){var b,c;b=this.showCover();
c=this.model.hasStickers();b?this.$(".js-card-cover-box").removeClass("hide window-cover-stickers-only").addClass("has-cover"):c?this.$(".js-card-cover-box").removeClass("hide has-cover").addClass("window-cover-stickers-only"):this.$(".js-card-cover-box").addClass("hide");this.sidebarScrollTop=this.$(".window-sidebar").offset().top};b.prototype.clearCover=function(){this.$(".js-card-cover-box").css({"background-color":"","background-image":""});return $(".dialog-close-button").removeClass("dialog-close-button-light dialog-close-button-dark")};
b.prototype.renderCover=function(){var b,c,g,f,h,m,k;this.clearCover();this.showCover()&&(c=this.model.attachmentList.get(this.model.get("idAttachmentCover")),null!=c&&(h=ba.isHighDPI()?1400:700,m=c.get("previews"),h=null!=(g=l.smallestPreviewBiggerThan(m,h))?g:l.biggestPreview(m),g=null!=h?h.url:c.get("url"),null!=(null!=(f=l.smallestPreviewBiggerThan(c.get("previews"),100,100))?f.url:void 0)||c.get("url"),b=this.$(".js-card-cover-box"),async.assembly([function(b){var d,f;if(null!=(d=c.get("edgeColor"))){d=
d.match(/[0-9a-f]{2}/ig);var g,h,m;m=[];g=0;for(h=d.length;g<h;g++)f=d[g],m.push(parseInt(f,16));return b(null,m)}return b("no edgeColor")},function(c,e){var f,g,h,m;m=e[0];h=e[1];f=e[2];b.css("background-color","rgb("+m+", "+h+", "+f+")");f=(m+h+f)/3;150<f?g="dark":105>f&&(g="light");null!=g&&$(".dialog-close-button").addClass("dialog-close-button-"+g)}],function(){}),f=Math.max(40,Math.min(null!=(k=null!=h?h.height:void 0)?k:160,160)),this.$(".js-card-cover-box").css({"background-image":'url("'+
g+'")',height:f,"background-size":(null!=h?h.height:void 0)<f?"initial":"contain"})));this.checkShowCover();return this};b.prototype.renderStickers=function(){var b,c,g;b=this.$(".js-display-stickers").empty();g=this.model.stickerList.models;if(0<g.length){var f,h,m;m=[];f=0;for(h=g.length;f<h;f++)c=g[f],m.push(this.subview(Jc,c,{board:this.model}));this.appendSubviews(m,b)}this.checkShowCover();return this};b.prototype.renderName=function(){var b;b=this.model.get("name");this.$(".js-card-title").text(b);
C.title(""+b+" on "+this.model.getBoard().get("name"));return this};b.prototype.renderDescription=function(){var b,c;b=this.model.get("desc");c=Ja.full.format(null!=b?b:"",{textData:this.model.get("descData")}).output;this.$(".js-card-desc").empty().append(c).data("unmarkeddown",b);b=!/^\s*$/.test(c);this.$(".js-show-with-desc").toggleClass("hide",!b);this.$(".js-hide-with-desc").toggleClass("hide",b);return this};b.prototype.renderList=function(){var b;b=this.model.getList();null!=b&&this.$(".js-current-list").removeClass("hide").html(v.fill("card_detail_list",
{listName:b.get("name")},{editable:this.model.editable()}));return this};b.prototype.renderArchived=function(){var b;b=!0===this.model.get("closed");this.$(".js-archive-banner").toggleClass("hide",!b);this.$(".js-archive-card").toggleClass("hide",b);this.$(".js-unarchive-card").toggleClass("hide",!b);this.$(".js-delete-card").toggleClass("hide",!b);return this};b.prototype.showAllActions=function(b){this.fShowAllActions=!0;this.toggleActionButton();return this.getData()};b.prototype.toggleActionButton=
function(){var b,c;b=this.fShowAllActions||0<(null!=(c=this.model.actionList)?c.length:void 0)&&this.model.actionList.length!==this.defaultActionLimit;return this.$(".js-show-all-actions").toggleClass("hide",b)};b.prototype.hideExtraActions=function(b){l.stop(b);this.fShowExtraActions=!1;this.renderExtraActions()};b.prototype.showExtraActions=function(b){l.stop(b);this.fShowExtraActions=!0;this.renderExtraActions()};b.prototype.renderExtraActions=function(b){var c,g;b=this.model.actionList.length;
g=this.model.get("badges").comments;c=this.model.get("badges").comments;8<b&&(0<g||0<c)&&g+c!==b?(this.$(".js-list-actions").toggleClass("hide-extra-actions",!this.fShowExtraActions),this.$(".js-show-extra-actions").toggleClass("hide",this.fShowExtraActions),this.$(".js-hide-extra-actions").toggleClass("hide",!this.fShowExtraActions)):(this.$(".js-list-actions").removeClass("hide-extra-actions"),this.$(".js-show-extra-actions").addClass("hide"),this.$(".js-hide-extra-actions").addClass("hide"))};
b.prototype.renderActionList=function(){this.model.onId(function(b){return function(){return b.actionListView.render()}}(this));return this};b.prototype.renderMembers=function(b){var c,g;b=this.$(".js-card-detail-members-list").empty();g=this.model.memberList.filterDeactivated({model:this.model.getBoard()}).models;var f,h,m;m=[];f=0;for(h=g.length;f<h;f++)c=g[f],m.push(this.getMemberOnCardHtml(c));c=m.join("");b.html(c);this.model.editable()&&(c={classes:"js-details-edit-members"},b.append(v.fill("card_detail_add_button",
c)));this.$(".js-card-detail-members").toggleClass("hide",0===g.length);return this};b.prototype.renderLabels=function(){var b,c,g;c=this.model.getActiveLabels();b=this.$(".js-card-detail-labels-list").empty();var f,h,m;m=[];f=0;for(h=c.length;f<h;f++)g=c[f],m.push(v.fill("label",g));g=m.join("");b.append(g);this.model.editable()&&(g={classes:"js-details-edit-labels"},b.append(v.fill("card_detail_add_button",g)).addClass("editable-labels js-edit-label"));this.$(".js-card-detail-labels").toggleClass("hide",
0===c.length);return this};b.prototype.renderSubscribe=function(){var b,c,g;b=this.$(".js-subscribe-sidebar-button");c={subscribed:this.model.get("subscribed")||(null!=(g=this.model.get("badges"))?g.subscribed:void 0)};b.html(v.fill("card_detail_subscribe",c));this.$(".js-subscribed-indicator-header").toggleClass("hide",!c.subscribed);return this};b.prototype.renderAging=function(){var b,c,g;c=this.model.getBoard();c=0<=D.call(null!=(b=c.get("powerUps"))?b:[],"cardAging");b=this.$(".js-card-detail-age-badge").removeClass(this.model.getAllAgingClasses());
c&&(g=this.model.getAgingData(),b.removeData("date").attr("dt",this.model.get("dateLastActivity")),"pirate"===g.mode&&b.addClass(g.agingClassesToAdd),I.update(this.$(".js-card-detail-age")));this.$(".js-card-detail-age").toggleClass("hide",!c);return this};b.prototype.renderDueDate=function(){var b,c,g,f;c=null!=(g=this.model.get("due"))?g:null;null!=c?(g=this.model.editable(),f=I.toLongString(new Date(c)),b=l.getDueDateBadgeAdditionalTitle(c),null!=b&&(f+=" ("+b+")"),b=[],b.push(l.getDueDateBadgeClasses(c)),
g&&b.push("js-details-edit-due-date","badge-state-clickable"),this.$(".js-card-detail-due-date-badge").removeClass(function(b,d){return(d.match(/badge-state-\S+/g)||[]).join(" ")}).addClass(b.join(" ")).attr("title",l.getDueDateBadgeTitle(c)).html(f),this.$(".js-card-detail-due-date").removeClass("hide")):this.$(".js-card-detail-due-date").addClass("hide");return this};b.prototype.renderVotes=function(){var b,c,g,f,h,m;c=this.model.toJSON();c.voted=this.model.voted();c.canVote=this.model.getBoard().canVote(y.me());
this.$(".js-vote-sidebar-button").html(v.fill("card_detail_vote_btn_sidebar",c));if(b=null!=(g=null!=(f=c.badges)?f.votes:void 0)?g:0)this.$(".js-card-detail-votes-badge").html(l.formatCount(b,"vote")).toggleClass("badge-state-voted",null!=(h=null!=(m=c.badges)?m.viewingMemberVoted:void 0)?h:!1);this.$(".js-card-detail-votes").toggleClass("hide",0===b);return this};b.prototype.sortChecklists=function(){var b;b=this.$(".js-checklist-list");l.withoutAlteringSelection(function(c){return function(){return c.model.checklistList.forEach(function(g){g=
c.existingSubview(dc,g);return b.append(g.el)})}}(this));return this};b.prototype.removeChecklist=function(b){return this.deleteSubview(this.existingSubview(dc,b))};b.prototype.renderChecklists=function(){var b,c,g,f;P("render","rendering checklists");b=this.$(".js-checklist-list").empty();g=function(){var b,d,f,g;f=this.model.checklistList.models;g=[];b=0;for(d=f.length;b<d;b++)c=f[b],g.push(this.subview(dc,c,{card:this.model}));return g}.call(this);this.appendSubviews(g,b);Q.refreshIfInitialized(b);
null!=(f=this.model)&&f.editable()&&this.$(".js-checklist-list").sortable({axis:"y",handle:".window-module-title",delay:"75",distance:"7",tolerance:"pointer",placeholder:"checklist placeholder",items:".checklist",start:function(b,d){var c;c=$(d.helper).outerHeight();return $(d.placeholder).height(c)}});return this};b.prototype.showFewerAttachments=function(b){l.stop(b);this.fShowAllAttachments=!1;this.renderAttachments()};b.prototype.showMoreAttachments=function(b){l.stop(b);this.fShowAllAttachments=
!0;this.renderAttachments()};b.prototype.renderAttachments=function(){var b,c,g,f,h,m,k;h=0<(null!=(b=this.model.attachmentList)?b.length:void 0);m=this.model.attachmentList.models.slice(0,4);k=4<=this.model.attachmentList.length;c=this.$(".js-attachments-section");b=c.find(".js-attachment-list").empty();c.find(".js-num-attachments").text(this.model.attachmentList.length-4);g=c.find(".js-show-fewer-attachments").addClass("hide");f=c.find(".js-show-more-attachments").addClass("hide");c.toggleClass("hide",
!h);if(h){k&&(this.fShowAllAttachments?(g.removeClass("hide"),m=this.model.attachmentList.models):f.removeClass("hide"));f=[];c=0;for(g=m.length;c<g;c++)h=m[c],f.push(this.subview(Fg,h));this.appendSubviews(f,b)}return this};b.prototype.renderProcessingAttachments=function(){var b;this.$(".js-attachment-thumb-processing").remove();b=Da.getProcessingAttachmentsLength();return _.times(b,this.addProcessingAttachmentElement)};b.prototype.addProcessingAttachmentElement=function(){this.$(".js-attachments-section .js-attachment-list").prepend(v.fill("attachment_thumb_processing"))};
b.prototype.renderEditing=function(){var b,c,g,f;f=this.model.memberEditingList.models;b={members:function(){var b,d,k;k=[];b=0;for(d=f.length;b<d;b++)c=f[b],y.isMe(c)||null==c.get("editing")||(g=c.toJSON(),g.icon=function(){switch(c.get("editing").action){case "commenting":return"comment";case "editing":return"edit";default:return"edit"}}(),k.push(g));return k}()};return this.$(".js-editing-members").empty().append(v.fill("edit_in_progress",b)).toggleClass("hide",0===b.members.length)};b.prototype.sortStop=
function(b,c){l.stopPropagation(b);c.item.trigger("movechecklist",[c])};b.prototype.keydownEvent=function(d){b.__super__.keydownEvent.apply(this,arguments);return y.me().editing({idBoard:this.model.getBoard().id,idCard:this.model.id,action:"editing"})};b.prototype.keydownCommentEvent=function(b){y.me().editing({idBoard:this.model.getBoard().id,idCard:this.model.id,action:"commenting"});9===b.keyCode&&($(b.target).hasClass("new-comment-input")&&this.model.editable()&&!(w.view instanceof Db)&&""===
$(b.target).val())&&(l.stop(b),this.submitComment(b));return l.isForceSubmitKey(b)?this.submitComment(b):this.checkInsert(b)};b.prototype.checkLength=function(b){b=this.$(".new-comment-input").val().length>this.maximumCommentLength;this.$(".js-add-comment").prop("disabled",b);this.$(".too-long").toggleClass("hide",!b);return this.$(".too-long").find(".js-attach-comment").toggle("undefined"!==typeof Blob&&null!==Blob)};b.prototype._cancelEditing=function(){return y.me().editing({idBoard:this.model.getBoard().id})};
b.prototype.submitComment=function(b){var c;n("Card Detail","Comment","Submit Comment");l.stop(b);b=$(this.commentInput);c=$.trim(b.val());b.val("").css("height","");this._cancelEditing();this.model.addComment(c);ma.cancelEdits();this.clearComment();return!1};b.prototype.clearEdits=function(){this._cancelEditing();return b.__super__.clearEdits.apply(this,arguments)};b.prototype.commitEdits=function(){this._cancelEditing();return b.__super__.commitEdits.apply(this,arguments)};b.prototype.stopEditing=
function(){this._cancelEditing();return b.__super__.stopEditing.apply(this,arguments)};b.prototype.truncateComment=function(b){b=this.$(".new-comment-input");b.val(b.val().substr(0,this.maximumCommentLength));return this.checkLength()};b.prototype.attachComment=function(b){b=new Blob([this.$(".new-comment-input").val()],{type:"text/plain"});this.model.upload(b,"comment.txt",function(){});ma.cancelEdits();return this.clearComment()};b.prototype.inputComment=function(b){l.stopPropagation(b);b=this.$(".new-comment");
ma.cancelEdits(this.commentInput);b.addClass("focus")};b.prototype.clearComment=function(b){l.stop(b);this.stopEditing(b);$(this.commentInput).val("").focus().blur();this.checkLength();$(".new-comment").removeClass("focus");return w.hide()};b.prototype.getCard=function(){return this.model};b.prototype.getTextInput=function(){return this.$(".new-comment-input")};b.prototype.getMentionTarget=function(){return this.$(".js-comment-mention-member:visible")[0]};b.prototype.getEmojiTarget=function(){return this.$(".js-comment-add-emoji:visible")[0]};
b.prototype.openEditMembersPopOver=function(b,c){w.toggle({elem:b,top:c,view:bc,options:{model:this.model,modelCache:this.modelCache}})};b.prototype.editMembersMain=function(b){l.stop(b);this.openEditMembersPopOver(this.$(".js-details-edit-members"),35);n("Card Detail","Edit Members via Main Column")};b.prototype.changeMembersSidebar=function(b){l.stop(b);this.openEditMembersPopOver(this.$(".js-change-card-members"),35);n("Card Detail","Sidebar","Open Manage Member Menu")};b.prototype.addChecklistSidebar=
function(b){l.preventDefault(b);w.toggle({elem:b.target,top:35,view:Gg,options:{model:this.model,modelCache:this.modelCache,cardView:this}});n("Card Detail","Add Checklist Button","Open Add Checklist Menu");return!1};b.prototype.showDueDateBadgeMenu=function(b){l.stop(b);w.toggle({elem:this.$(".js-details-edit-due-date"),top:35,view:cc,options:{model:this.model,modelCache:this.modelCache}});n("Card Detail","Due Date Badge","Open Due Date Menu")};b.prototype.openAttachPicker=function(b){var c,g;l.stop(b);
b=$(b.target).closest(".js-attach");$(b).hasClass("inline")?(c=26,g="Via Inline Button"):(c=35,g="Via Sidebar Button");w.toggle({elem:b,top:c,view:zc,options:{model:this.model,modelCache:this.modelCache}});n("Card Detail","Open Attachment Type Picker",g);return!1};b.prototype.dueDateSidebar=function(b){l.preventDefault(b);w.toggle({elem:this.$(".js-add-due-date"),top:35,view:cc,options:{model:this.model,modelCache:this.modelCache}});n("Card Detail","Sidebar","Open Due Date Menu");return!1};b.prototype.subscribe=
function(b){this.model.subscribe(!0);n("Card Detail","Sidebar","Subscribe");return!1};b.prototype.unsubscribe=function(b){this.model.subscribe(!1);n("Card Detail","Sidebar","Unsubscribe");return!1};b.prototype.vote=function(b){l.preventDefault(b);this.model.vote(!0);n("Card Detail","Sidebar","Vote");return!1};b.prototype.unvote=function(b){l.preventDefault(b);n("Card Detail","Sidebar","Unvote");this.model.vote(!1);return!1};b.prototype.openFormatHelp=function(b){n("Card Detail","Formatting Help");
w.toggle({elem:this.$(".js-format-help"),top:30,view:yg,options:{model:this.model},keepEdits:!0});return!1};b.prototype.dragenterBack=function(b){var c;c=$(".window-overlay").scrollTop()+200;this.$(".dropzone").css({"padding-top":""+c+"px"});return this.dragenter(b)};b.prototype.dropBack=function(b){n("Card Detail","Drop Attachment Upload");return this.drop(b)};b.prototype.focusChecklistAdd=function(b){return this.existingSubview(dc,b).focusNewTaskInput()};b.prototype.closeDialog=function(){return Y.hide()};
b.prototype.clickNextTabbable=function(){return $(".card-detail-title .edit").is(":visible")?$(".new-comment-input").focus():$(".card-detail-title .current").click()};return b}(tb));bc=function(c){function b(){this.selectMem=k(this.selectMem,this);this.keyupEvent=k(this.keyupEvent,this);this.hoverMemberSelect=k(this.hoverMemberSelect,this);this.fillMems=k(this.fillMems,this);this.filterMembers=k(this.filterMembers,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}
s(b,c);b.prototype.getViewTitle=function(){return"Members"};b.prototype.events={"click .js-select-member":"selectMem","mouseenter .pop-over-member-list .item":"hoverMemberSelect",keyup:"keyupEvent",keydown:"keydownEvent"};b.prototype.render=function(){$(this.el).html(v.fill("popover_select_members",{},{}));this.memListEl=this.$(".js-mem-list");this.allMembers=l.sortMembers(this.model.getBoard().memberList.filterDeactivated({force:!0}).models);this.fillMems(this.allMembers);return this};b.prototype.filterMembers=
function(b){var c,g,f,h,m,k;if(""===b)return this.allMembers;f=RegExp("^"+l.escapeForRegex(b.toLowerCase()));c=[];k=this.allMembers;h=0;for(m=k.length;h<m;h++)b=k[h],g=l.getMemNameArray(this.modelCache,b.id),_.find(g,function(b){return f.test(b)})&&c.push(b);return c.slice(0,8)};b.prototype.fillMems=function(b){var c,g,f,h;this.memListEl.empty();c=9<b.length;g=!1;c!==this.memListEl.hasClass("collapsed")&&(g=!0,this.memListEl.toggleClass("collapsed",c));if(0===b.length)this.memListEl.append("<p class='empty' style='padding: 24px 6px;'>No results</p>");
else{f=0;for(h=b.length;f<h;f++)c=b[f],this.appendSubview(this.subview(ae,c,{showUnconfirmed:!0,card:this.model}),this.memListEl);g&&w.calcPos({notNew:!0})}};b.prototype.hoverMemberSelect=function(b){b=$(b.target).closest(".item");return l.selectMenuItem(this.memListEl,".item",b)};b.prototype.keydownEvent=function(b){var c;if(9===(c=b.keyCode)||13===c)l.stop(b),this.$(".js-mem-list .item.selected:first .js-select-member").first().click(),$(".js-search-mem").val("").focus(),this.fillMems(this.allMembers)};
b.prototype.keyupEvent=function(b){var c,g;if(!(9===(c=b.keyCode)||13===c||16===c||17===c||18===c||20===c||27===c)){if(38===(g=b.keyCode)||40===g)return l.navMenuList(this.memListEl,".item",b.keyCode);b=$(".js-search-mem").val().trim();b=this.filterMembers(b);this.fillMems(b);this.focusSearch();if(b.length<this.allMembers.length)return b=this.memListEl.find(".item").first(),l.selectMenuItem(this.memListEl,".item",b)}};b.prototype.selectMem=function(b){var c,g;l.preventDefault(b);g=this.model;c=$(b.target).closest(".js-select-member");
b=c.closest(".item");c=c.attr("idMember");b.hasClass("active")?(g.removeMember(c),b.removeClass("active"),n(g.typeName,"Change Member","Remove Member")):(g.addMember(c),b.addClass("active"),n(g.typeName,"Change Member","Add Member"));this.focusSearch();return!1};b.prototype.focusSearch=function(){return $(".js-search-mem").focus()};return b}(A);yg=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Formatting Help"};b.prototype.render=
function(){this.$el.html(v.fill("formatting_help"));return this};return b}(A);Wd=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.events={"click .js-copy-card":"copyCard","click .js-delete":"deleteCard","click .js-url":"focusUrl"};b.prototype.initialize=function(){return this.listenTo(this.model,"change:shortUrl",function(b){return function(){b.render();return b.focusUrl()}}(this))};b.prototype.copyCard=function(b){n("Card Detail","Card Copy Button",
"Via More Menu");w.pushView({view:$b,options:{model:this.model,modelCache:this.modelCache}})};b.prototype.focusUrl=function(b){return this.$(".js-url").focus().select()};b.prototype.getShortLinkData=function(){null==this.model.get("shortUrl")&&this.model.fetch({fields:["shortUrl"]})};b.prototype.deleteCardConfirm=function(b){pa.pushView({model:this.model,title:"Delete Card?",text:"All actions will be removed from the activity feed and you won't be able to re-open the card. There is no undo. You can archive a card to remove it from the board and preserve the activity.",
confirmText:"Delete",confirmBtnClass:"negate",fxConfirm:function(b){return function(d){Y.hide();b.model.destroy();return n("Card","Delete")}}(this)})};b.prototype.render=function(){var b,c,g;b=_.extend({dateAdded:l.idToDate(this.model.id),pLevelClass:null!=(c=this.model.board)?c.getPermLevelIconClass():void 0,pLevelAltText:null!=(g=this.model.board)?g.getPermLevelAltText():void 0},this.templateData());this.$el.html(v.fillFromModel(this.templateName,this.model,b,{meta:v.card_menu_meta}));this.getShortLinkData();
I.update(this.el);return this};b.prototype.deleteCard=function(b){l.stop(b);n("Card Detail","Delete Button","Via More Menu");this.deleteCardConfirm()};return b}(A);vg=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"More"};b.prototype.events=l.extendEvents({"click .js-print":"printModel","click .js-export-json":"exportJSON"});b.prototype.templateName="card_detail_more_menu";b.prototype.templateData=function(){return{jsonURL:"/"+
this.model.typeName.toLowerCase()+"/"+this.model.id+"/"+l.makeSlug(this.model.get("name"))+".json"}};b.prototype.printModel=function(b){l.stop(b);w.hide();n("Card Detail","Print","Via More Menu");_.defer(function(){return window.print()})};b.prototype.exportJSON=function(b){return n("Card Detail","Export JSON")};return b}(Wd);(function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"More Actions"};b.prototype.initialize=function(){return this.listenTo(this.model,
"change:idMembersVoted",function(b){return function(){b.render();return b.focusUrl()}}(this))};b.prototype.events=l.extendEvents({"click .js-attach":"openAttachPicker","click .js-vote":"vote"});b.prototype.templateName="card_menu";b.prototype.templateData=function(){return{hasVoted:this.model.voted(),canVote:this.model.getBoard().canVote(y.me()),showMore:!0}};b.prototype.openAttachPicker=function(b){l.stop(b);n("Card Menu","Open Attachment Type Picker");w.pushView({view:this.model.getView(zc)});return!1};
b.prototype.vote=function(b){l.preventDefault(b);n("Card Menu","Vote");this.model.toggleVote();this.render();return!1};return b})(Wd);Zd=function(){function c(){}c.prototype.renderValues=function(){var b,d,c,g;d=this.$(".js-select-board option:selected").val();c=this.$(".js-select-list option:selected").val();g=parseInt(this.$(".js-select-position option:selected").prop("index"),10)+1;b=this.Board.get(d);d=b.get("name");b=_.find(b.listList.models,function(b){return function(b){return b.id===c}}(this));
this.$(".js-board-value").text(d);null!=b?(d=b.get("name"),g=l.getNaturalNumber(g),this.$(".js-list-value").text(d),this.$(".js-pos-value").text(g),this.$(".js-select-list,.js-select-position,.js-commit-position").removeAttr("disabled")):(this.$(".js-list-value").html("<i>No Lists</i>"),this.$(".js-pos-value").html("<i>N/A</i>"),this.$(".js-select-list,.js-select-position,.js-commit-position").attr("disabled","disabled"))};c.prototype.updateBoardData=function(){var b,d,c,g,f,h;d=this.$(".js-select-board").find("option:selected").val();
if(d===this.model.getBoard().id){this._boardData=this.model.getBoard();h=this._boardData.listList.models;g=0;for(f=h.length;g<f;g++)c=h[g],c.cardCount=this._boardData.listList.get(c.id).cardList.openCards().length;return this.updateListList()}if(null!=d)return this.$(".js-submit").attr("disabled","disabled"),b=this.$(".select-list,.select-position"),b.attr("disabled","disabled"),M["for"](this.modelCache).loadBoardListData(d,{lists:"open",list_fields:"name,pos,idBoard",cards:"visible",card_fields:"idList,idBoard,pos"},
function(c){return function(){c._boardData=c.Board.get(d);c.updateListList();b.removeAttr("disabled");return c.$(".js-submit").removeAttr("disabled")}}(this))};c.prototype.updateListList=function(){var b,d,c,g,f,h,m,k;d=this.$(".js-select-board");c=this.$(".js-select-list").empty();g=d.find("option:selected").val();d=this.model.getList().id;g=g===this.model.getBoard().id?d:null!=(f=this._boardData.listList.at(0))?f.id:void 0;k=this._boardData.openLists();h=0;for(m=k.length;h<m;h++)f=k[h],b=f.get("name"),
f.id===d&&(b+=" (current)"),b=$("<option>").val(f.id).text(b).appendTo(c),f.id===g&&b.attr("selected","selected");return this.updatePositionList()};c.prototype.updatePositionList=function(){var b,d,c,g,f,h,m,k,u,x;d=this.$(".js-select-list");c=this.$(".js-select-position").empty();h=d.find("option:selected").val();if(null!=h){d=null!=(g=this._boardData.listList.get(h))?g:this._boardData.listList.at(0);g=(null!=d?d.id:void 0)===this.model.getList().id;h=this._boardData.listList.get(h).cardList.length;
g?(u=g=_.indexOf(this.model.getList().cardList.openCards(),this.model),this.showCurrentPosition||(h-=1)):(g=-1,u=h);for(f=x=0;0<=h?x<=h:x>=h;f=0<=h?++x:--x)b=m=String(f+1),f===g?b+=" (current)":0<h&&(0===f?b+=" (top)":f===h&&(b+=" (bottom)")),k=0===f?"top":f===h?"bottom":d.calcPos(f),b=$("<option>").val(k).text(b).appendTo(c),f===u&&(this.$(".js-pos-value").html(l.getNaturalNumber(m)),b.attr("selected","selected"))}this.renderValues()};return c}();$b=na(Zd,function(c){function b(){return b.__super__.constructor.apply(this,
arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Copy Card"};b.prototype.showCurrentPosition=!0;b.prototype.events={"change .js-select-position":"renderValues","change .js-select-list":"updatePositionList","change .js-select-board":"updateBoardData","keydown textarea[name='name']":"keydownEvent","click .js-submit":"submit","submit form":"submit"};b.prototype.render=function(){var b,c,g,f,h,m,k,l;c=this.model.toJSON();c.numChecklists=this.model.checklistList.length;c.numMembers=c.idMembers.length;
c.numLabels=c.labels.length;c.numAttachments=c.badges.attachments;c.numComments=c.badges.comments;c.numStickers=c.stickers.length;c.hasChecklists=0<c.numChecklists;c.hasMembers=0<c.idMembers.length;c.hasLabels=0<c.labels.length;c.hasAttachments=0<c.badges.attachments;c.hasComments=0<c.badges.comments;c.hasStickers=0<c.stickers.length;c.hasStuff=0<c.numChecklists+c.idMembers.length+c.labels.length+c.badges.attachments+c.badges.comments+c.stickers.length;c.loading=this.loading;c.organizations=y.me().getOpenBoardsByOrg(!0);
k=c.organizations;g=0;for(h=k.length;g<h;g++){b=k[g];l=b.boards;f=0;for(m=l.length;f<m;f++)b=l[f],b.id===this.model.get("idBoard")&&(b.selected=!0)}g={move_card_controls:v.move_card_controls};this.$el.html(v.fill("card_copy",c,{editable:this.model.editable()},g));w.calcPos();this.updateBoardData();return this};b.prototype.getData=function(){this.loading=!0;return M["for"](this.modelCache).loadCardCopyData(this.model.get("idBoard"),this.model.id,function(b){return function(c){b.loading=!1;return b.render()}}(this))};
b.prototype.keydownEvent=function(b){13===b.keyCode&&(l.stop(b),this.submit(b))};b.prototype.submit=function(b){var c,g,f,h,m;l.stop(b);f=this.$('textarea[name="name"]');""===f.val().trim()?f.focus().select():(c=this.$(".js-select-board"),g=this.$(".js-select-list"),b=this.$(".js-select-position"),h=c.find("option:selected").val(),m=g.find("option:selected").val(),c=b.find("option:selected").val(),parseInt(b.find("option:selected").prop("index"),10),b={idCardSource:this.model.get("id"),idBoard:h,
idList:m,pos:c,name:f.val().trim(),closed:!1,keepFromSource:this.$("input:checkbox:checked").map(function(b){return function(b,d){return d.name}}(this)).get().join(),badges:{}},f=this.Auth.me().boardList.find(function(b){return b.id===h}),f=f.listList.find(function(b){return b.id===m}),f.cardList.create(b,{success:function(b){return function(b){w.hide();return n("Card","Copy Card")}}(this)}))};return b}(A));Xd=na(Zd,function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,
c);b.prototype.getViewTitle=function(){return"Move Card"};b.prototype.initialize=function(){return this.listenTo(y.me().boardList,"add remove reset",this.render)};b.prototype.events={"change .js-select-position":"renderValues","change .js-select-list":"updatePositionList","change .js-select-board":"updateBoardData","click .js-submit":"commitChange"};b.prototype.render=function(){var b,c,g,f,h,m,k,l;c={organizations:y.me().getOpenBoardsByOrg(!0)};k=c.organizations;g=0;for(h=k.length;g<h;g++){b=k[g];
l=b.boards;f=0;for(m=l.length;f<m;f++)b=l[f],b.id===this.model.get("idBoard")&&(b.selected=!0)}this.$el.html(v.fill("popover_move_card",c,{},{move_card_controls:v.move_card_controls}));this.updateBoardData();return this};b.prototype.commitChange=function(b){var c,g,f;c=this.$(".js-select-board");g=this.$(".js-select-list");b=this.$(".js-select-position");c=c.find("option:selected").val();g=g.find("option:selected").val();f=b.find("option:selected").val();b=parseInt(b.find("option:selected").prop("index"),
10);c===this.model.getBoard().id?(c=this.model.getBoard().listList.get(g),this.model.moveToList(c,b),n("Card","Move Menu","Same Board")):null!=c&&(null!=g&&null!=f)&&(n("Card","Move Menu","Changed Board"),this.model.getList().cardList.remove(this.model),Y.hide(),S({url:"/1/cards/"+this.model.id,type:"put",data:{idList:g,idBoard:c,pos:f},success:function(b){return function(d){b.model.board=null;b.model.set("idBoard",d.idBoard);b.model.set("idList",d.idList);b.model.set("pos",d.pos);return IdCache.setBoardIdForCard(b.model.id,
d.idBoard)}}(this)}));$(".quick-card-editor").remove();w.hide()};return b}(A));ac=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Labels"};b.prototype.initialize=function(){this.listenTo(y.me(),"change:prefs",this.render);this.listenTo(this.model.getBoard(),"change:labelNames",this.render);return this.listenTo(this.model,"change:labels",this.render)};b.prototype.events={"click .card-label":"toggleLabel","click .js-edit-label-titles":"openEditLabelTitles",
"click .js-toggle-color-blind-mode":"toggleColorBlindMode",shortcut:"shortcut"};b.prototype.shortcut=function(b){switch(b){case 49:case 50:case 51:case 52:case 53:case 54:case 97:case 98:case 99:case 100:case 101:case 102:return b-=49<=b&&54>=b?49:97,this.$(".card-label").eq(b).click(),"1-6 - Toggle Specific Label"}};b.prototype.render=function(){var b,c;b={labels:this.model.getLabels(),showShortcuts:this.options.showShortcuts,hideEditTitles:this.options.hideEditTitles};c={editable:this.model.editable()};
b.cbModeEnabled=y.me().get("prefs").colorBlind;b.cbToggleText="Enable";b.cbModeEnabled&&(b.cbToggleText="Disable");this.$el.html(v.fill("popover_change_labels",b,c));return this};b.prototype.toggleLabel=function(b){var c;c=$(b.target).closest(".card-label");if(b=c.attr("label"))n(this.model.typeName,"Labels Menu","Change Label"),this.model.toggleLabel(b),this.options.hideOnSelect?w.hide():c.toggleClass("active")};b.prototype.openEditLabelTitles=function(b){l.stop(b);w.pushView({view:be,options:{model:this.model.getBoard(),
modelCache:this.modelCache}});n(this.model.typeName,"Labels Menu","Open Edit Label Titles")};b.prototype.toggleColorBlindMode=function(b){y.me().toggleColorBlindMode();n(this.model.typeName,"Labels Menu","Toggle Color Blind Friendly Mode.")};return b}(A);var Gg,Hg,Ig,Jg,ce,Xb,Td,Kg,dc,k=function(c,b){return function(){return c.apply(b,arguments)}},F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=
b.prototype;return c};Xb=function(c){function b(){this.editable=k(this.editable,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.typeName="Checklist";b.prototype.urlRoot=function(){return"/1/checklists"};b.prototype.initialize=function(){return this.destruct([this.checkItemList=(new Ig).syncSubModels(this,"checkItems")])};b.prototype.sync=function(d,c,g){return"create"===d&&!(null!=this.get("idBoard")&&null!=this.get("idCard"))?(this.waitForAttrs(["idBoard","idCard"],
function(f){return function(h){f.set(h);return b.__super__.sync.call(f,d,c,g)}}(this)),this.getBoard().onId(function(b){return function(d){return b.set("idBoard",d)}}(this)),this.getCard().onId(function(b){return function(d){return b.set("idCard",d)}}(this))):b.__super__.sync.apply(this,arguments)};b.prototype.getCard=function(){var b;return null!=(b=this.Card.get(this.get("idCard")))?b:this.collection.sourceModel};b.prototype.getBoard=function(){var b;return null!=(b=this.getCard())?b.getBoard():
void 0};b.prototype.getCompletedCount=function(b){var c;c=0;this.checkItemList.each(function(b){if(null!=b.get("state")&&"complete"===b.get("state"))return c++});return c};b.prototype.getCheckItem=function(b){return this.checkItemList.get(b)};b.prototype.editable=function(){return this.getBoard().editable()};b.prototype.calcPos=function(b,c){return l.calcPos(b,this.checkItemList,c)};return b}(fa);Td=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.model=
Xb;b.prototype.initialize=function(){return this.listenTo(this,"change:pos",this.sort)};b.prototype.comparator=function(b){return b.get("pos")};b.prototype.idList=function(){return this.pluck("id")};return b}(fb);Gg=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Add Checklist"};b.prototype.initialize=function(b){this.cardView=b.cardView};b.prototype.events={"click .js-add-checklist":"addChecklist","submit form":"addChecklist"};
b.prototype.render=function(){var b,c,g,f,h,m;g=[];g.checklistCards=[];m=this.Card.find(function(b){return function(d){return d.get("idBoard")===b.model.getBoard().id&&!d.get("closed")}}(this));f=0;for(h=m.length;f<h;f++)c=m[f],b=c.toJSON(),b.checklists=[],c.checklistList.forEach(function(c){return function(c){var e,f;if(0<(null!=(e=c.checkItemList)?e.length:void 0))return e=l.formatCount(null!=(f=c.checkItemList)?f.length:void 0,"Item"),b.checklists.push(_.extend(c.toJSON(),{length:e}))}}(this)),
0<b.checklists.length&&g.checklistCards.push(b);0<g.checklistCards.length&&(g.hasChecklistCards=!0);this.$el.html(v.fill("checklist_add_menu",g));return this};b.prototype.addChecklist=function(b){var c,g;l.stop(b);g=this.$(".js-checklist-title").val();c=this.$(".js-checklist-copy-source").val();0===g.length?this.$(".js-checklist-title").focus().select():(b=""!==c?"Copied Checklist Items":"No Checklist Items Copied",n("Checklist","Create",""+("Checklist"===g?"Default Title (Checklist), "+b+")":"Renamed Title, "+
b+")")),b=this.model.checklistList.create({name:g,idChecklistSource:c,idCard:this.model.id}),this.cardView.focusChecklistAdd(b),w.hide())};return b}(A);Hg=function(c){function b(){this.getCard=k(this.getCard,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.typeName="CheckItem";b.prototype.urlRoot=function(){var b;b=this.getChecklist();return""+b.getCard().url()+"/checklist/"+b.id+"/checkItem"};b.prototype.sync=function(d,c,g){var f;return null!=(f=this.getChecklist())?
f.onId(function(){return b.__super__.sync.call(this,d,c,g)}):void 0};b.prototype.getChecklist=function(){return this.collection.sourceModel};b.prototype.getCard=function(){return this.getChecklist().getCard()};b.prototype.editable=function(){return this.getChecklist().editable()};b.prototype.getContext=function(){return this.getChecklist()};b.prototype.move=function(b){this.update("pos",this.getChecklist().calcPos(b,this));this.collection.sort({silent:!0})};return b}(fa);Ig=function(c){function b(){return b.__super__.constructor.apply(this,
arguments)}s(b,c);b.prototype.model=Hg;b.prototype.initialize=function(){return this.listenTo(this,"change:pos",this.sort)};b.prototype.comparator=function(b){return b.get("pos")};return b}(fb);ce=na(Tb,ub,function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="checklist-item";b.prototype.allowNewlines=!1;b.prototype.initialize=function(){this.listenTo(this.model,{"change:name":this.render,"change:state":this.renderItemState});return b.__super__.initialize.apply(this,
arguments)};b.prototype.events={"keyup .js-checkitem-input":"keyAutoMention","click .js-toggle-checklist-item":"toggleState","click .js-delete-item":"delete","click .js-convert-item-to-card":"convertToCard","click .js-open-editing-menu":"openEditingMenu",movecheckitem:"moveCheckItem"};b.prototype.getCard=function(){return this.model.getCard()};b.prototype.render=function(){var b;b=this.model.toJSON();b.checked="complete"===b.state;b.nameHtml=Ja.checkItems.format(b.name,{textData:b.nameData}).output;
$(this.el).html(v.fill("checklist_item",b,{editable:this.model.editable()}));this.renderItemState();this.recallDrafts();return this};b.prototype.getTextInput=function(){return this.$(".js-checkitem-input")};b.prototype.getMentionTarget=function(){return this.$(".js-open-editing-menu:visible")[0]};b.prototype.getEmojiTarget=function(){return this.$(".js-open-editing-menu:visible")[0]};b.prototype.renderItemState=function(b){b=this.model.toJSON();b.checked="complete"===b.state;this.$el.toggleClass("checklist-item-state-complete",
b.checked)};b.prototype.toggleState=function(b){this.model.editable()&&(b=(b="complete"===this.model.get("state"))?"incomplete":"complete",this.model.update("state",b),n("Checklist","Toggle Checklist Item State",b))};b.prototype["delete"]=function(b){l.stop(b);this.model.destroy();n("Checklist","Delete Single Checklist Item")};b.prototype.convertToCard=function(b){l.stop(b);this.model.run("convertToCard");this.model.getChecklist().checkItemList.remove(this.model);n("Checklist","Convert Checklist Item to Card")};
b.prototype.moveCheckItem=function(b,c,g,f){if(f||this.model.getChecklist()===g)return b=c.item.parent().children(),c=b.index(c.item),c=g.calcPos(c,this.model),f?(this.model.update({pos:c,idChecklist:g.id}),this.model.collection.remove(this.model),g.checkItemList.add(this.model)):this.model.update("pos",c),g.checkItemList.sort({silent:!0}),n("Checklist","Reorder Checklist Item")};b.prototype.openEditingMenu=function(b){l.stop(b);return w.toggle({elem:b.target,top:36,view:Bd,options:{model:this.model,
parent:this},keepEdits:!0})};return b}(tb));dc=na(Tb,ub,function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="checklist clearfix";b.prototype.initialize=function(){this.listenTo(this.model.checkItemList,{"add remove reset change:state":this.renderProgress});return this.listenTo(this.model,{"change:name":this.renderName})};b.prototype.events={"keydown .js-new-checklist-item-input":"keydownChecklistEvent","click .js-add-checklist-item":"submitTask",
"click .js-cancel-checklist-item":"cancelItemEditing","click .js-new-checklist-item-input":"focusNewTaskInput","click .js-open-checklist-menu":"openChecklistMenu","sortstop .js-checklist-items-list":"sortStop","sortreceive .js-checklist-items-list":"sortReceive",movechecklist:"moveChecklist","click .js-open-editing-menu":"openEditingMenu","keyup .js-new-checklist-item-input":"keyAutoMention"};b.prototype.render=function(){var b,c;P("render","rendering checklist state "+this.model.get("name"));this.$el.html(v.fillFromModel("checklist",
this.model));b=this.$(".js-checklist-items-list");null!=(c=this.getCard())&&c.editable()&&b.sortable({axis:"y",delay:"75",distance:"7",tolerance:"pointer",placeholder:"checklist-item placeholder",items:".checklist-item",connectWith:".js-checklist-items-list",start:function(b,d){var c;Q.sorting=!0;c=$(d.helper).outerHeight();return $(d.placeholder).height(c)},stop:function(){return _.defer(function(){return Q.sorting=!1})}});this.newCheckItemInput=this.$(".js-new-checklist-item-input");this.newCheckItemInput.fixPlaceholder();
this.renderName();return this.renderCheckItems()};b.prototype.renderName=function(){this.$("div.checklist-title[attr=name] .current").text(this.model.get("name"));return this};b.prototype.sortCheckItems=function(){var b;b=this.$(".js-checklist-items-list");l.withoutAlteringSelection(function(c){return function(){return c.model.checkItemList.each(function(g,f){var h;h=c.existingSubview(ce,g);return b.append(h.el)})}}(this));return this};b.prototype.renderProgress=function(){var b,c;b=this.model.getCompletedCount(this.getCard());
c=this.model.checkItemList.length;b=0<c?Math.round(100*b/c):0;this.$(".js-checklist-progress-bar").width(b+"%");this.$(".js-checklist-progress-percent").text(b+"%");return this};b.prototype.renderCheckItems=function(){var b;b=this.$(".js-checklist-items-list");this.collectionSubview(Jg,this.model.checkItemList,{el:b}).render();Q.refreshIfInitialized(b);this.renderProgress();return this};b.prototype.getCard=function(){return this.options.card};b.prototype.cancelItemEditing=function(b){$(b.target).closest(".js-new-checklist-item").find(".js-new-checklist-item-input").val("");
ma.cancelEdits();return!1};b.prototype.focusNewTaskInput=function(b){var c;this.$(".js-new-checklist-item").hasClass("focus")||(ma.cancelEdits(this.newCheckItemInput),null!=(c=this.newCheckItemInput)&&c.focus().select(),this.$(".js-new-checklist-item").addClass("focus"))};b.prototype.keydownChecklistEvent=function(b){if($(b.target).hasClass("js-new-checklist-item-input")){if(w.view instanceof qc||w.view instanceof Db)return this.checkInsert(b);if(l.isSubmitKey(b))return this.submitTask(b),this.focusNewTaskInput()}};
b.prototype.getTextInput=function(){return this.$(".js-new-checklist-item-input")};b.prototype.getMentionTarget=function(){return this.$(".js-open-editing-menu:visible")[0]};b.prototype.getEmojiTarget=function(){return this.$(".js-open-editing-menu:visible")[0]};b.prototype.submitTask=function(b){var c,g;l.stop(b);g=this.newCheckItemInput.val().trim();if(/^\s*$/.test(g))return l.stop(b),this.focusNewTaskInput(),!1;b=_.compact(g.split(/\r\n|\r|\n/));c=this.model;async.forEachSeries(b,function(b){return function(b,
d){var f;f=0<c.checkItemList.length?c.checkItemList.at(c.checkItemList.length-1).get("pos")+l.spacing:l.spacing;f+=Math.floor(1024*Math.random());f={name:b.trim(),pos:f,nameData:{emoji:y.me().allCustomEmoji()}};return c.checkItemList.create(f,{success:function(){return d()}})}}(this),function(b){return function(b){}}(this));this.newCheckItemInput.val("");this.focusNewTaskInput();n("Checklist","Add Checklist Item",1===b.length?"Single Item":"Multiple Items")};b.prototype.sortStop=function(b,c){l.stopPropagation(b);
c.item.trigger("movecheckitem",[c,this.model,!1])};b.prototype.sortReceive=function(b,c){l.stopPropagation(b);c.item.trigger("movecheckitem",[c,this.model,!0])};b.prototype.openChecklistMenu=function(b){l.stop(b);w.toggle({elem:this.$(".js-open-checklist-menu"),top:35,view:Kg,options:{model:this.model,card:this.getCard()}});return n("Checklist","Open Checklist Menu")};b.prototype.moveChecklist=function(b,c){var g,f;g=this.model.getCard();null!=g&&(f=c.item.parent().children(),f=f.index(c.item),this.model.update("pos",
g.calcChecklistPos(f,this.model)),this.model.collection.sort({silent:!0}),n("Checklist","Reorder Checklist"))};b.prototype.openEditingMenu=function(b){l.stop(b);return w.toggle({elem:b.target,top:36,view:Bd,options:{model:this.model,parent:this},keepEdits:!0})};return b}(tb));Jg=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.viewType=ce;return b}(sb);Kg=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=
function(){return this.model.get("name")};b.prototype.initialize=function(){return this.card=this.options.card};b.prototype.events={"click .js-delete-all-checklist-items":"confirmDeleteChecklistItems","click .js-delete-checklist":"confirmDeleteChecklist"};b.prototype.render=function(){this.$el.html(v.fill("popover_checklist_menu",{}));return this};b.prototype.confirmDeleteChecklistItems=function(b){l.stop(b);b=this.model.get("name");pa.pushView({model:this.model,title:"Delete All Items in "+b+"?",
text:"Deleting checklist items is permanent and there is no way to get them back.",confirmText:"Delete All Items",confirmBtnClass:"negate",fxConfirm:function(b){return function(d){var c,h,m,k;n("Checklist","Delete All Checklist Items");c=[];b.model.checkItemList.each(function(b){return c.push(b)});k=[];h=0;for(m=c.length;h<m;h++)d=c[h],k.push(d.destroy());return k}}(this)})};b.prototype.confirmDeleteChecklist=function(b){l.stop(b);b=this.model.get("name");pa.pushView({model:this.model,title:"Delete "+
b+"?",text:"Deleting a checklist is permanent and there is no way to get it back.",confirmText:"Delete Checklist",confirmBtnClass:"negate",fxConfirm:function(b){return function(d){n("Checklist","Delete Checklist");return b.model.destroy()}}(this)})};return b}(tb);var Lg,Mg,F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c};Lg=function(c){function b(){return b.__super__.constructor.apply(this,
arguments)}s(b,c);b.prototype.typename="CustomEmoji";return b}(fa);Mg=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.model=Lg;b.prototype.url=function(){return"/1/member/"+this.member.id+"/customEmoji"};b.prototype.initialize=function(b,c){this.member=c.member};return b}(fb);var Ng,Og,F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;
return c};Ng=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.typename="CustomSticker";return b}(fa);Og=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.model=Ng;b.prototype.url=function(){return"/1/member/"+y.me().id+"/customStickers"};b.prototype.initialize=function(b,c){this.member=c.member};return b}(fb);var sg,Lc,Pg,pg,Qg,lg,Yb,Rg,Sg,Zb,k=function(c,b){return function(){return c.apply(b,arguments)}},
F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c};Lc=function(c){function b(){this.openCards=k(this.openCards,this);this.getIndexInList=k(this.getIndexInList,this);this.selectLastCardInList=k(this.selectLastCardInList,this);this.selectFirstCardInList=k(this.selectFirstCardInList,this);this.selectCardInList=k(this.selectCardInList,this);this.getPrevList=k(this.getPrevList,
this);this.getNextList=k(this.getNextList,this);this.getAdjacentList=k(this.getAdjacentList,this);this.getBoard=k(this.getBoard,this);this.reopen=k(this.reopen,this);this.subscribe=k(this.subscribe,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.typeName="List";b.prototype.urlRoot="/1/lists";b.prototype.initialize=function(){return this.destruct([this.cardList=(new xg(null,{list:this})).owner(this).syncCache(this.modelCache,["idList","closed"],function(b){return function(c){return b.id&&
c.get("idList")===b.id&&!c.get("closed")}}(this))])};b.prototype.sync=function(d,c,g){return"create"===d&&null==this.get("idBoard")?(this.waitForAttrs(["idBoard"],function(f){return function(h){f.set(h);return b.__super__.sync.call(f,d,c,g)}}(this)),this.getBoard().onId(function(b){return function(d){return b.set("idBoard",d)}}(this))):b.__super__.sync.apply(this,arguments)};b.prototype.subscribe=function(b){b!==this.get("subscribed")&&this.update({subscribed:b})};b.prototype.move=function(b){this.update({pos:this.getBoard().calcPos(b,
this)});this.collection.sort({silent:!0})};b.prototype.close=function(){this.update({closed:!0})};b.prototype.reopen=function(){this.update({closed:!1,pos:this.getBoard().calcPos(this.collection.length,this)})};b.prototype.onChange=function(){};b.prototype.calcPos=function(b,c,g){return l.calcPos(b,this.cardList,c,function(b){return!b.get("closed")},g)};b.prototype.getBoard=function(){var b,c;return null!=(b=this.Board.get(this.get("idBoard")))?b:null!=(c=this.collection)?c.owner:void 0};b.prototype.getAdjacentList=
function(b){var c,g;g=this.getBoard().openLists();c=this.getIndexInList();return g[(c+b+g.length)%g.length]};b.prototype.getNextList=function(){return this.getAdjacentList(1)};b.prototype.getPrevList=function(){return this.getAdjacentList(-1)};b.prototype.selectCardInList=function(b){b=this.cardList.openCards()[b];null!=b&&this.getBoard().viewState.selectCard(b)};b.prototype.selectFirstCardInList=function(){return this.selectCardInList(0)};b.prototype.selectLastCardInList=function(){return this.selectCardInList(this.cardList.openCards().length-
1)};b.prototype.editable=function(){return this.getBoard().editable()};b.prototype.getIndexInList=function(){return _.indexOf(this.getBoard().openLists(),this)};b.prototype.openCards=function(){return this.cardList.filter(function(b){return!b.get("closed")})};return b}(fa);lg=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.model=Lc;b.prototype.initialize=function(b,c){this.bind("change:pos",this.sort);this.board=c.board};b.prototype.comparator=function(b){return b.get("pos")||
0};b.prototype.calcPos=function(b,c,g){return l.calcPos(b,this,c,function(b){return!b.get("closed")},g)};b.prototype.url=function(){return"/1/boards/"+this.board.id+"/lists"};b.prototype.openLists=function(){return this.filter(function(b){return!b.get("closed")})};return b}(Ma);Zb=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="list";b.prototype.events={"click .js-open-list-menu":"openMenu","mousedown .list-cards":"eventStopPropagation",
dblclick:"eventStopPropagation","click .js-open-card-composer":"openCardComposer",movelist:"moveList",sortreceive:"sortReceive",sortstop:"sortStop"};b.prototype.initialize=function(){b.__super__.initialize.apply(this,arguments);this.makeDebouncedMethods("toggleComposerLink","renderComposer","renderCardCount");this.listenTo(this.model,{"change:name":this.renderName,"change:subscribed":this.renderSubscribed});this.listenTo(this.model.cardList,{"add remove change:idList change:closed reset":this.renderCardCountDebounced});
this.listenTo(this.model.getBoard().composer,{"change:idList change:index change:vis":this.renderComposerDebounced,"change:idList change:vis":this.toggleComposerLinkDebounced});this.model.getBoard().onPermChange(this.renderEditable)};b.prototype.remove=function(){var d;null!=(d=this.model.getBoard())&&d.offPermChange(this.renderEditable);return b.__super__.remove.apply(this,arguments)};b.prototype.render=function(){var b;P("render","rendering list "+this.model.get("name"));this.$el.html(v.fill("list",
this.model.toJSON(),{editable:this.model.editable()}));b=this.$(".js-list-cards");this.cardListView=this.collectionSubview(Ud,this.model.cardList,{el:b});this.cardListView.render();this.toggleComposerLinkDebounced();this.renderComposerDebounced();this.renderCardCount();this.renderEditable();this.setListCardsHeight();return this};b.prototype.renderName=function(){this.$(".js-list-name").text(this.model.get("name"));return this};b.prototype.renderSubscribed=function(){this.$(".js-list-subscribed").toggleClass("hide",
!this.model.get("subscribed"));return this};b.prototype.renderEditable=function(){var b;b=this.model.editable();this.$(".js-list-cards").toggleClass("js-sortable",b);this.$(".js-list-header").toggleClass("editable",b);this.$(".js-open-card-composer").toggleClass("hide",!b);return this};b.prototype.setListCardsHeight=function(){"explorer-10"===ba.browserVersionStr&&_.defer(function(b){return function(){var c,g;g=b.$(".list-header").outerHeight();c=b.$(".open-card-composer").outerHeight();c=$("#board").height()-
g-c-10;return b.$(".list-cards").css({"max-height":c})}}(this))};b.prototype.toggleComposerLink=function(){return this.$(".js-open-card-composer").toggleClass("hide",this.composerOpen()||!this.model.editable())};b.prototype.composerOpen=function(){var b,c;b=null!=(c=this.model.getBoard())?c.composer:void 0;return null!=b&&b.get("vis")&&b.get("idList")===this.model.id};b.prototype.renderComposer=function(){var b,c;this.composerOpen()&&(b=this.model.getBoard().composer,c=C.getCurrentBoardView().subview(Tg,
b),this.insertComposerAtIndex(b.get("index"),c),c.scrollIntoView(),_.debounce(c.delegateEvents(),150));return this};b.prototype.insertComposerAtIndex=function(b,c){return 0===b?this.$(".list-cards").prepend(c.render().el):this.$(".list-card").not(".js-composer").eq(b-1).after(c.render().el)};b.prototype.renderCardCount=function(){return this.$(".js-num-cards").text(l.formatCount(this.model.cardList.openCards().length,"card"))};b.prototype.editTitle=function(b){if(this.model.editable())return this.$(".js-list-name").click()};
b.prototype.openCardComposer=function(b){l.stop(b);w.hide();this.model.getBoard().composer.save({idList:this.model.id,index:this.model.cardList.openCards().length,vis:!0});n("Card Composer","Open","Via Bottom of List")};b.prototype.triggerOnItem=function(b,c,g){l.stopPropagation(b);c.item.data("dragCancel")||_.defer(function(b){return function(){return c.item.trigger(g,[c,b])}}(this))};b.prototype.sortReceive=function(b,c){this.triggerOnItem(b,c,"moveto")};b.prototype.sortStop=function(b,c){this.triggerOnItem(b,
c,"movein")};b.prototype.openMenu=function(b){var c;c=this.model;if(!Q.sorting)return l.preventDefault(b),n("List Menu","Open List Menu"),w.toggle({elem:b.target,top:24,view:c.getView(Rg)}),!1};b.prototype.moveList=function(b,c){var g;g=c.item.parent().children().index(c.item);this.model.move(g)};b.prototype.eventStopPropagation=function(b){l.stopPropagation(b)};b.prototype.scrollIntoView=function(){var b,c,g,f;c=this.$el.offset().left;g=c+this.$el.width();f=this.$("#board");b=f.scrollLeft();if(0>
c)return f.scrollLeft(b+c-16);if(g>f.width())return f.scrollLeft(b+(g-f.width()))};return b}(tb);Yb=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.viewType=Zb;b.prototype.initialize=function(){arguments[0].resetCallback&&(this.resetCallback=arguments[0].resetCallback);b.__super__.initialize.apply(this,arguments);if(this.resetCallback)return this.listenTo(this.collection,{reset:this.resetCollection,"change:idBoard":this.boardChange})};b.prototype.getModels=
function(){return this.collection.openLists()};b.prototype.boardChange=function(b,c){if(c!==this.collection.board.get("id"))return this.collection.remove(b),Q.refreshIfInitialized(this.$el)};b.prototype.resetCollection=function(){return"function"===typeof this.resetCallback?this.resetCallback():void 0};b.prototype.addModel=function(){b.__super__.addModel.apply(this,arguments);return"function"===typeof this.resetCallback?this.resetCallback():void 0};b.prototype.insertSubview=function(d){b.__super__.insertSubview.apply(this,
arguments);0<d.$el.find(".ui-sortable").length?Q.refreshIfInitialized(this.$el):Q.refreshListCardSortable()};return b}(sb);pg=function(c){function b(d,c){this.board=d;b.__super__.constructor.call(this,null,c);this.board.onId(function(b){return function(d){b.set({id:"boardListComposerSettings-"+d});return b.fetch()}}(this))}s(b,c);b.prototype["default"]=function(){return{title:null,vis:!1}};b.prototype.clear=function(){return this.save(this["default"]())};b.prototype.clearItems=function(){this.save({title:""})};
b.prototype.getBoard=function(){return this.board};b.prototype.toJSON=function(d){var c,g;c=(null!=d?d:{}).board;g=b.__super__.toJSON.apply(this,arguments);c&&(g.board=this.getBoard().toJSON());return g};return b}(vb);sg=function(c){function b(){this.addList=k(this.addList,this);this.renderClose=k(this.renderClose,this);this.renderOpen=k(this.renderOpen,this);this.renderListComposer=k(this.renderListComposer,this);this.setClose=k(this.setClose,this);this.setOpen=k(this.setOpen,this);this.render=k(this.render,
this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="list add-list idle";b.prototype.initialize=function(){return this.model.viewState.ond("change:listComposerOpen",this.renderListComposer)};b.prototype.events={"click .js-open-add-list":"setOpen","click .js-cancel-edit":"setClose","click .js-save-edit":"addList",submit:"addList"};b.prototype.render=function(){var b;b=this.model.toJSON({board:!0});this.$el.html(v.fill("list_add",b));this.renderListComposer();this.model.editable()&&
this.$el.removeClass("fade hide");return this};b.prototype.setOpen=function(b){l.stop(b);this.model.viewState.set("listComposerOpen",!0)};b.prototype.setClose=function(b){l.stop(b);this.model.viewState.set("listComposerOpen",!1)};b.prototype.renderListComposer=function(){return this.model.viewState.get("listComposerOpen")?this.renderOpen():this.renderClose()};b.prototype.renderOpen=function(b){l.stop(b);this.$el.hasClass("idle")&&(this.$el.removeClass("idle"),$(".list-area-wrapper").scrollLeft($(".list-area").outerWidth()+
100),_.defer(function(b){return function(){return b.$(".list-name-input").select()}}(this)));w.hide()};b.prototype.renderClose=function(b){l.stop(b);this.$el.addClass("idle")};b.prototype.addList=function(b){var c,g;l.stop(b);b=this.$(".list-name-input");g=this.model.openLists().length+1;c=b.val().trim();""===c?b.focus().select():(this.setClose(),_.defer(function(b){return function(){return b.model.listList.create({name:c,pos:b.model.calcPos(g),closed:!1},{success:function(b){return n("Board","Add List - via Inline List Composer")}})}}(this)))};
return b}(A);Rg=function(c){function b(){this.closeList=k(this.closeList,this);this.archiveCards=k(this.archiveCards,this);this.moveCards=k(this.moveCards,this);this.toggleSubscribe=k(this.toggleSubscribe,this);this.copyList=k(this.copyList,this);this.moveList=k(this.moveList,this);this.addCard=k(this.addCard,this);this.render=k(this.render,this);this.initialize=k(this.initialize,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"List Actions"};
b.prototype.initialize=function(){return this.model.ond("change:subscribed",this.render)};b.prototype.events={"click .js-add-card":"addCard","click .js-move-list":"moveList","click .js-copy-list":"copyList","click .js-list-subscribe":"toggleSubscribe","click .js-move-cards":"moveCards","click .js-archive-cards":"archiveCards","click .js-close-list":"closeList"};b.prototype.render=function(){var b;b=this.model.toJSON();this.$el.html(v.fill("list_menu",b,{editable:this.model.editable()}));return this};
b.prototype.addCard=function(b){l.stop(b);w.hide();this.model.getBoard().composer.save({idList:this.model.id,index:0,vis:!0});n("List Menu","Add Card");n("Card Composer","Open","Via List Menu")};b.prototype.moveList=function(b){l.stop(b);n("List Menu","Open Move List Popover");w.pushView({view:this.model.getView(Sg)})};b.prototype.copyList=function(b){l.stop(b);n("List Menu","Open Copy List Popover");w.pushView({view:this.model.getView(Qg)})};b.prototype.toggleSubscribe=function(b){l.preventDefault(b);
this.model.get("subscribed")?(this.model.subscribe(!1),n("List Menu","Subscribe","Unsubscribe")):(this.model.subscribe(!0),n("List Menu","Subscribe","Subscribe"))};b.prototype.moveCards=function(b){l.stop(b);n("List Menu","Open Move All Cards in List");w.pushView({view:this.model.getView(Pg)})};b.prototype.archiveCards=function(b){l.stop(b);n("List Menu","Open Archive All Cards in List");pa.pushView({model:this.model,title:"Archive All Cards in this List?",text:'This will remove all the cards in this list from the board. To view archived cards and bring them back to the board, click "Menu" > "Archived Items".',
confirmText:"Archive All",confirmBtnClass:"negate",fxConfirm:function(b){return function(d){var c,h,m;w.hide();c=b.model.openCards();h=0;for(m=c.length;h<m;h++)d=c[h],d.set({closed:!0});return b.model.run("archiveAllCards",{},b.listViewListen)}}(this)})};b.prototype.closeList=function(b){l.stop(b);b=this.model;n("List Menu","Archive List");w.hide();b.close();return!1};return b}(A);Pg=function(c){function b(){this.selectList=k(this.selectList,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,
arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Move All Cards in List"};b.prototype.events={"click .js-select-list":"selectList"};b.prototype.render=function(){var b,c,g,f,h;b=this.model.toJSON();b.lists=[];g=this.model.getBoard().openLists();f=0;for(h=g.length;f<h;f++)c=g[f],c=_.clone(c.toJSON()),c.id===this.model.id&&(c.current=!0),b.lists.push(c);this.$el.html(v.fill("list_bulk_card_move",b));return this};b.prototype.selectList=function(b){var c,g,f,h;b=$(b.target).closest(".js-select-list");
c=b.attr("name");if(!b.hasClass("disabled")){c=this.List.get(c);n("Card","Moved in Bulk via List Menu");h=this.model.cardList.openCards();g=0;for(f=h.length;g<f;g++)b=h[g],b.moveToList(c,1E3);w.hide()}};return b}(A);Qg=function(c){function b(){this.submit=k(this.submit,this);this.keydownEvent=k(this.keydownEvent,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Copy List"};b.prototype.tagName="form";b.prototype.events=
{"click .js-submit":"submit",submit:"submit","keydown textarea[name='name']":"keydownEvent"};b.prototype.render=function(){var b;b=this.model.toJSON();this.$el.html(v.fill("list_copy",b,{editable:this.model.editable()}));return this};b.prototype.keydownEvent=function(b){13===b.keyCode&&(l.stop(b),this.submit(b))};b.prototype.submit=function(b){var c,g;l.stop(b);g=this.$('textarea[name="name"]');""===g.val().trim()?g.focus().select():(b=this.model.getBoard(),c=b.listList.calcPos(this.model.getIndexInList()+
1,this.model,!0),c={idListSource:this.model.id,idBoard:this.model.get("idBoard"),pos:c,name:g.val().trim(),closed:!1},b.listList.create(c),w.hide(),n("List","Copy List"))};return b}(A);Sg=function(c){function b(){this.commitChange=k(this.commitChange,this);this.updateListList=k(this.updateListList,this);this.updateBoardData=k(this.updateBoardData,this);this.renderValues=k(this.renderValues,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=
function(){return"Move List"};b.prototype.tagName="form";b.prototype.events={"change .js-select-list-pos":"renderValues","change .js-select-board":"updateBoardData","click .js-commit-position":"commitChange",submit:"commitChange"};b.prototype.render=function(){var b,c,g,f,h,m,k,l,x;g=this.model;c={organizations:y.me().getOpenBoardsByOrg(!0)};l=c.organizations;f=0;for(m=l.length;f<m;f++){b=l[f];x=b.boards;h=0;for(k=x.length;h<k;h++)b=x[h],b.id===g.get("idBoard")&&(b.selected=!0)}this.$el.html(v.fill("popover_move_list",
c));this.updateBoardData();return this};b.prototype.renderValues=function(){var b,c,g;b=$(this.el);c=b.find(".js-select-board option:selected").val();g=parseInt(b.find(".js-select-list-pos option:selected").text(),10);c=this.Board.get(c).get("name");g=l.getNaturalNumber(g);b.find(".js-board-value").text(c);b.find(".js-pos-value").text(g)};b.prototype.updateBoardData=function(){var b,c,g,f,h,m;b=$(this.el);g=b.find(".js-select-board").find("option:selected").val();if(g===this.model.getBoard().id){this._boardData=
this.model.getBoard();m=this._boardData.listList.models;f=0;for(h=m.length;f<h;f++)b=m[f],b.cardCount=this._boardData.listList.get(b.id).cardList.openCards().length;return this.updateListList()}c=b.find(".select-list,.select-position");c.attr("disabled","disabled");return M["for"](this.modelCache).loadBoardListData(g,{lists:"open",list_fields:"name,pos,idBoard"},function(b){return function(){b._boardData=b.Board.get(g);b.updateListList();return c.removeAttr("disabled")}}(this))};b.prototype.updateListList=
function(){var b,c,g,f,h,m,k,l;m=this.model;c=this.$(".js-select-list-pos");c.empty();g=this._boardData.openLists();this._boardData.id===this.model.getBoard().id?(f=_.indexOf(g,this.model),g=g.length):(f=-1,g=g.length+1);for(h=l=0;0<=g?l<g:l>g;h=0<=g?++l:--l)b=h+1,h===f&&(b+=" (current)"),k=this._boardData.listList.calcPos(h,m),b=$("<option>").val(k).text(b).appendTo(c),h===f&&b.attr("selected","selected");parseInt(this.$(".js-select-list-pos").val(),10);return this.renderValues()};b.prototype.commitChange=
function(b){var c;l.stop(b);b=this.$(".js-select-list-pos");c=parseInt(b.find("option:selected").val(),10);b=this.$(".js-select-board option:selected").val();this.model.getBoard().composer.save("vis",!1);b===this.model.getBoard().id?(this.model.update({pos:c}),n("List Menu","Move Menu","Successfully Moved")):null!=b&&null!=c&&(this.model.update({idBoard:b,pos:c}),n("List Menu","Move Menu","Changed Board"));w.hide()};return b}(A);var Mc,de,Ug,ee,Ob,fe,$d,xf,Vg,aa,Wg,Nc,Xg,Yg,ge,Zg,$g,ah,bh,ch,dh,eh,
fh,ec,qb,gh,hh,he,ie,ih,jh,Ib,Eg,kh,ae,Ka,lh,mh,k=function(c,b){return function(){return c.apply(b,arguments)}},F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c},D=[].indexOf||function(c){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===c)return b;return-1},G=[].slice;$d=1E4;aa=function(c){function b(){this.isFeatureEnabled=k(this.isFeatureEnabled,this);return b.__super__.constructor.apply(this,
arguments)}s(b,c);b.prototype.typeName="Member";b.prototype.nameAttr="fullName";b.prototype.urlRoot="/1/members";b.prototype.initialize=function(){b.__super__.initialize.apply(this,arguments);this.destruct([this.boardList=(new je).syncModel(this,"idBoards"),this.organizationList=(new nh).syncModel(this,"idOrganizations")]);y.isMe(this)&&(this.destruct([this.boardStarList=(new oh([],{member:this})).syncSubModels(this,"boardStars"),this.customStickerList=(new Og([],{member:this})).syncSubModels(this,
"customStickers"),this.boardBackgroundList=(new ug([],{member:this})).syncSubModels(this,"boardBackgrounds"),this.customEmojiList=(new Mg([],{member:this})).syncSubModels(this,"customEmoji"),this.loginList=(new ph([],{member:this})).syncSubModels(this,"logins")]),this.isFeatureEnabled("customEmoji")&&M["for"](this.modelCache).loadMemberCustomEmoji(this.get("id")));this.on("change:editing",function(b){var c,g;return null!=(c=this.Card.get(null!=(g=b.get("editing"))?g.idCard:void 0))?c.updateEditing(b):
void 0})};b.prototype.isLoggedIn=function(){return!this.get("notLoggedIn")};b.prototype.hasAtMe=function(b){var c;if(!this.isLoggedIn()||null==this.get("username")||null==this.get("fullName"))return!1;c=_.compact([this.get("username")].concat(this.get("fullName").split(/\s+/)));return _.find(c,function(c){return 2<=c.length&&RegExp("(^|\\W)@"+l.escapeForRegex(c)+"($|\\W)","i").test(b)})};b.prototype.viewBoardProfile=function(b){var c;null!=b&&b.id&&(b=b.id);c=new Zg({model:this,board:this.Board.get(b),
modelCache:this.modelCache});C.saveMemberBoardProfileLocation(this,b);return Y.show({view:c,displayType:"slim",hide:function(c){return function(){return C.setBoardLocation(b)}}(this)})};b.prototype.getMembershipData=function(b){var c,g,f,h,m,k,l,x,n,s,v,w;c=b.adminList.models;l=y.isMe(this);m=_.some(c,function(b){return function(d){return d.id!==b.id}}(this));c=1<c.length;x=1<b.memberList.length;g=b.getMembershipFor(this);n="admin"===b.getExplicitMemberType(this)||"admin"===(null!=g?g.memberType:
void 0);v="observer"===b.getExplicitMemberType(this)||"observer"===(null!=g?g.memberType:void 0);s=!(n||v);w=b.isVirtual(this);k=b.owned();f=!s&&m&&k;h=!v&&m&&k;g=!n&&k;b=(m=(l&&m&&"org"!==b.getExplicitMemberType(this)||k&&!l)&&x)&&"Organization"===b.typeName&&k&&!b.isDeactivated(this)&&!w;return{isMe:l,canRemove:m,canDeactivate:b,canChangeRole:k,memberIsAdmin:n,memberIsObserver:v,memberIsNormal:s,memberIsVirtual:w,canMakeMember:f,canMakeObserver:h,canMakeAdmin:g,isMoreThanOneAdmin:c,isMoreThanOneMember:x}};
b.prototype.isDismissed=function(b){var c;return 0<=D.call(null!=(c=this.get("oneTimeMessagesDismissed"))?c:[],b)};b.prototype.dismiss=function(b){return this.addToSet("oneTimeMessagesDismissed",b)};b.prototype.owned=function(){return y.isMe(this)};b.prototype.prefNames=["minutesBetweenSummaries"];b.prototype.getMemberViewTitle=function(){var b;b=this.get("username");return""+this.get("fullName")+" ("+b+")"};b.prototype.toggleColorBlindMode=function(){null!=this.get("prefs")&&(this.get("prefs").colorBlind?
this.setPref("colorBlind",!1).save():this.setPref("colorBlind",!0).save(),$("body").toggleClass("color-blind-mode-enabled",this.get("prefs").colorBlind))};b.prototype.getOpenBoardsByOrg=function(b){var c,g,f,h,m,k,l,x;f={};k=this.boardList.models;h=0;for(m=k.length;h<m;h++)c=k[h],!c.get("closed")&&!(b&&"observer"===c.get("myPermLevel"))&&(g=c.toJSON(),c=null!=(l=g.idOrganization)?l:"",null==f[c]&&(f[c]={boards:[],displayName:""===c?"Boards":null!=(x=this.Organization.get(c))?x.get("displayName"):
void 0}),f[c].boards.push(g));b=_.sortBy(_.keys(f),function(b){return""===b?"":f[b].displayName});k=[];h=0;for(m=b.length;h<m;h++)c=b[h],k.push(f[c]);return k};b.prototype.checkColorBlindMode=function(){var b;return $("body").toggleClass("color-blind-mode-enabled",!0===(null!=(b=this.get("prefs"))?b.colorBlind:void 0))};b.prototype.isFeatureEnabled=function(b){return Ea.isFeatureEnabled(b,this.get("products"))};b.prototype.isGold=function(){return Ea.hasProduct(this.get("products"))};b.prototype.allCustomEmoji=
function(){var b,c,g,f,h;b={};if(this.isFeatureEnabled("customEmoji")){h=this.customEmojiList.models;g=0;for(f=h.length;g<f;g++)c=h[g],b[c.get("name")]=c.get("url")}return b};b.prototype.toJSON=function(d){var c,g;null==d&&(d={});c=b.__super__.toJSON.apply(this,arguments);d.hasPassword&&(c.hasPassword=0<=D.call(c.loginTypes,"password"));c.accountStanding=Ea.standingName(null!=(g=this.get("paidAccount"))?g.standing:void 0);return c};b.prototype.editing=function(b){null==b&&(b={});if(!_.isEqual(b,this.lastMessage)&&
(this.lastMessage=b,clearTimeout(this.clearLastTimeout),this.clearLastTimeout=setTimeout(function(b){return function(){return b.lastMessage=null}}(this),$d/2),y.isLoggedIn()))return S({url:""+this.urlRoot+"/"+this.id+"/editing",type:"post",background:!0,data:_.clone(b)})};b.prototype.removeMembershipConfirmation=function(b){var c,g,f,h;g=this.getMemberViewTitle();c="Organization"===b.typeName;f=b.get(c?"displayName":"name");y.isMe(this)?(h="Leave "+b.typeName+"?",g="Leave "+f+"?",g=c?g+" You will remain on all your boards in this organization.":
g+" You will be removed from all cards on this board.",b="Leave "+b.typeName):(h="Remove Member?",g="Remove "+g+" from "+f+"?",g=c?g+" The member will remain on all their boards in this organization. They will receive a notification.":g+" The member will be removed from all cards on this board. They will receive a notification.",b="Remove Member");return{title:h,text:g,confirmText:b,confirmBtnClass:"negate"}};b.prototype.clearAllNotifications=function(){S({url:"/1/notifications/all/read",type:"post"})};
return b}(Bc);qb=function(c){function b(){this.remove=k(this.remove,this);this.idList=k(this.idList,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.model=aa;b.prototype.sortField="fullName";b.prototype.idList=function(){return this.pluck("id")};b.prototype.remove=function(d,c){var g;if(null==this.sourceModel)return b.__super__.remove.apply(this,arguments);b.__super__.remove.call(this,d);g=null!=c&&c.invite?"/1/"+this.sourceModel.typeName+"/"+this.sourceModel.id+"/ghost/"+
d.id:"/1/"+this.sourceModel.typeName+"/"+this.sourceModel.id+"/members/"+d.id;null!=c&&c.mass&&(g+="/all");return S({url:g,type:"delete",success:function(b){null!=b&&b.unreadable&&C.displayErrorPage({errorType:"notFound"});return null!=c?"function"===typeof c.success?c.success():void 0:void 0}})};b.prototype.filterDeactivated=function(d){var c,g,f;d=null!=d?d:{};f=d.model;c=d.force;null==f&&(f=this.sourceModel);null==c&&(c=!1);g=y.me();return new b(this.filter(function(b){return((null!=f?f.isMember(b):
void 0)||(null!=f?f.isMemberObserver(b):void 0))&&!(null!=f&&f.isDeactivated(b))||(null!=f?f.canSeeDeactivated(g):void 0)&&!c},this.options))};b.prototype.comparator=function(b){return b.get(this.sortField)};return b}(Ma);Ib=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);na(Ld,b);b.prototype.initialize=function(){this.listenTo(this.model,"change:initials change:avatarHash change:avatarSource change:fullName change:username change:bio change:prefs change:paidAccount",
this.render);this.listenTo(this.model,"change:initials change:fullName change:username change:bio",this.renderDetails)};b.prototype.events={"click .js-change-avatar-profile":"changeAvInProfile","click .js-edit-profile":"editProfile","click .js-submit-profile":"submitProfile","submit .js-profile-form":"submitProfile","click .js-cancel-edit-profile":"cancelEditProfile","click .tabbed-pane-nav-item-button:not(.active)":"switchSection","click .js-gold-ad":"clickGoldAd"};b.prototype.delegateEvents=function(d){return b.__super__.delegateEvents.call(this,
_.extend({},b.prototype.events,d||this.events))};b.prototype.render=function(){var b,c,g,f;c=y.isMe(this.model);b=this.model.toJSON();0<this.model.organizationList.models.length&&(b.showOrgs=!0);c&&(g=null!=(f=b.paidAccount)?f.standing:void 0,b.hasAccount=Ea.hasAccount(g),b.accountProblem=Ea.problem(g),b.isMe=!0);b.hasCrown=this.model.isFeatureEnabled("crown");this.$el.html(v.fill("member_detail",b,{editable:c}));this.renderDetails();c&&this.renderAd();this.renderMainContent();return this};b.prototype.renderDetails=
function(){var b,c;c=y.isMe(this.model);b=this.model.toJSON();b.bioHtml=cb.textAsHtml(b.bio,{convertNewlines:!0,textData:b.bioData});b.hasCrown=this.model.isFeatureEnabled("crown");this.$(".js-current-details").empty().append(v.fill("member_detail_profile_info",b,{editable:c}));c&&this.$(".js-profile-form").empty().append(v.fill("member_detail_profile_edit",b,{editable:c}));return this};b.prototype.renderAd=function(){var b,c,g;c={};this.$el.removeClass("has-ad");b=this.$(".js-header-ad").empty();
if(!(null!=(g=y.me())&&g.isGold()))this.$el.addClass("has-ad"),b.append(v.fill("ad_gold_banner",c))};b.prototype.setActiveView=function(b){this.$(".tabbed-pane-nav-item-button").removeClass("active");this.$(b).addClass("active")};b.prototype.changeAvInProfile=function(b){l.stop(b);n("Member View","Header","Change Avatar Menu");w.toggle({elem:this.$(".js-change-avatar-profile"),top:93,view:this.model.getView(Mc)})};b.prototype.editProfile=function(b){l.stop(b);this.$(".js-current-details").addClass("hide");
this.$(".js-profile-form").removeClass("hide");n("Member View","Click Edit Profile")};b.prototype.cancelEditProfile=function(b){l.stop(b);this.$(".js-current-details").removeClass("hide");this.$(".js-profile-form").addClass("hide")};b.prototype.submitProfile=function(b){var c,g,f,h;l.stop(b);if(!this.disabled){b={};h=["fullName","username","bio","initials"];g=0;for(f=h.length;g<f;g++)c=h[g],b[c]=this.$(".js-profile-form [name="+c+"]").val();b.username=b.username.toLowerCase().replace(/[^a-z0-9_]/g,
"");b.initials=b.initials.toUpperCase();this.disableSubmit();this.model.update(b,{waitForServer:!0},function(b){return function(d){b.disabled=!1;b.$(".js-submit-profile").removeAttr("disabled");if(d)return b.$(".js-profile-form-error").removeClass("hide").text(d);b.$(".js-profile-form-error").addClass("hide");b.cancelEditProfile();return n("Member","Successfully Change User Info")}}(this))}};b.prototype.disableSubmit=function(){this.disabled=!0;this.$(".js-submit-profile").attr("disabled","disabled")};
b.prototype.clickGoldAd=function(b){return n("Member View","Clicked Gold Ad (in Profile Header)")};return b}(A);ih=na(pc,function(c){function b(){this.getActionsFilter=k(this.getActionsFilter,this);this.loadMoreActionsAndRemoveDateLimit=k(this.loadMoreActionsAndRemoveDateLimit,this);this.hasMoreActionsOrDateLimited=k(this.hasMoreActionsOrDateLimited,this);this.renderActions=k(this.renderActions,this);this.renderMainContent=k(this.renderMainContent,this);return b.__super__.constructor.apply(this,arguments)}
s(b,c);b.prototype.events={"click .js-more-actions":"loadMoreActionsAndRemoveDateLimit"};b.prototype.initialize=function(){b.__super__.initialize.apply(this,arguments);this.limit=10;this.daysBack=30;this.actionListView=this.collectionSubview(Qb,new xb(this.getActions(),{modelCache:this.modelCache}),{renderOpts:{context:this.model,showBoard:!0,showOrganization:!0,readOnly:!0}});this.model.organizationList.onAddRemove(this.renderMainContent);return this.listenTo(this.modelCache,"add:Action:"+this.model.id,
function(b){return function(){b.actionListView.collection.reset(b.getActions(),{silent:!0});return b.renderActions()}}(this))};b.prototype.renderMainContent=function(){var b;b=this.model.toJSON();this.setActiveView(".js-member-profile");this.$(".js-content").html(v.fill("member_profile",b));_.defer(function(b){return function(){var d;0<b.model.organizationList.length?(d=new qh({model:b.model}),b.$(".js-list-orgs").html(d.render().el)):b.$(".js-list-orgs").closest(".window-module").hide();b.actionListView.setElement(b.$(".list-actions")[0]);
return b.renderActions()}}(this));return this};b.prototype.renderActions=function(){0===this.actionListView.collection.length?this.actionListView.$el.html(v.fill("actions_empty",{daysBack:this.daysBack})):this.actionListView.render();this.$(".js-more-actions").toggleClass("hide",!this.hasMoreActionsOrDateLimited());return this};b.prototype.hasMoreActionsOrDateLimited=function(){return null!=this.daysBack||this.hasMoreActions()};b.prototype.loadMoreActionsAndRemoveDateLimit=function(){this.daysBack=
null;return this.loadMoreActions()};b.prototype.getActionsFilter=function(){return od};return b}(Ib));hh=function(c){function b(){this.loadMoreNotifications=k(this.loadMoreNotifications,this);this.destructor=k(this.destructor,this);this.renderNotificationList=k(this.renderNotificationList,this);this.render=k(this.render,this);this.initialize=k(this.initialize,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.events={"click .js-more-notifications":"loadMoreNotifications"};
b.prototype.className="member-notifications-view";b.prototype.initialize=function(){this.nextPage=1;this.isMore=!0;return this.modelCache.ond("add:Notification remove:Notification change:Notification",this.renderNotificationList)};b.prototype.render=function(){var b;b=this.model.toJSON({prefs:!0});b.empty=0===this.Notification.all().length;this.$el.html(v.fill("member_notifications",b));this.isMore||this.$(".js-more-notifications").hide();this.renderNotificationList();return this};b.prototype.renderNotificationList=
function(){var b,c,g,f,h;b=this.$(".js-list-notifications");b.empty();h=this.Notification.sortedByDateDescending();g=0;for(f=h.length;g<f;g++)c=h[g],c=c.getView(rh),b.append(c.render().el);return this};b.prototype.destructor=function(){this.model.clearAllNotifications();return b.__super__.destructor.apply(this,arguments)};b.prototype.loadMoreNotifications=function(){return M["for"](this.modelCache).loadMoreNotificationData(this.model.get("username"),this.nextPage,function(b){return function(c,g){if(!c&&
(b.nextPage++,b.renderNotificationList(),10>g.length))return b.isMore=!1,b.$(".js-more-notifications").hide()}}(this))};return b}(A);$g=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){return this.model.organizationList.onAddRemove(function(b){return function(){return b.render()}}(this))};b.prototype.className="member-boards-view";b.prototype.render=function(){var b,c,g,f,h,m;g=new async.queue(function(b){return function(d,c){b.$el.append(d.render().el);
return _.defer(c)}}(this),1);this.$el.empty().prepend(this.subview(ec,this.model,{allowDismiss:!0}).render().el);g.push(this.subview(sh,this.model));g.push(this.subview(th,this.model));m=_.sortBy(this.model.organizationList.models,function(b){return b.get("displayName")});f=0;for(h=m.length;f<h;f++)c=m[f],b="orgboardlistview-"+c.id,b=this.subview(uh,this.model,{organization:c},b),g.push(b);return this};return b}(A);eh=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,
c);b.prototype.initialize=function(){b.__super__.initialize.apply(this,arguments);this.listenTo(this.model.boardList,"add remove reset",function(){return this.renderMainContent()});return this.listenTo(Da,"change:cardsPageSortType",function(){return this.renderCardsSection()})};b.prototype.events={"click .js-toggle-sort":"toggleSort"};b.prototype.renderMainContent=function(){this.setActiveView(".js-member-cards");this.$(".js-content").html(v.fill("member_cards_base"));this.renderCardsSection();return this};
b.prototype.getCards=function(){return this.Card.find(function(b){return!b.get("closed")})};b.prototype.getSortType=function(){return Da.getCardsPageSortType()};b.prototype.renderFilterText=function(){var b;b="Sorting by <strong>"+this.getSortType()+"</strong>.";this.$(".js-sort-text").html(b)};b.prototype.toggleSort=function(b){l.stop(b);n("Member View","Cards Page","Open Sorting and Filtering Options");w.toggle({elem:this.$(".js-toggle-sort"),top:30,view:this.model.getView(dh)})};b.prototype.clearContent=
function(){return this.$(".js-cards-content").empty()};b.prototype.renderCardsSection=function(){switch(this.getSortType()){case "board":this.renderBoardSort();break;case "date":this.renderDateSort()}};b.prototype._appendNoVisibleCards=function(){var b;b={message:y.isMe(this.model)?"No visible cards. You must be added to a card for it to appear here.":"This member is not added to any cards you are able to see.",classes:"gutter",style:"padding: 60px 10px;"};this.$(".js-cards-content").append(v.fill("empty_list",
b))};b.prototype.renderBoardSort=function(){var b,c,g,f,h,m,k;this.clearContent();this.renderFilterText();g=this.getCards();f=!1;k=this.model.boardList.models;h=0;for(m=k.length;h<m;h++)b=k[h],b.get("closed")||(c=_.filter(g,function(c){return function(c){return c.get("idBoard")===b.id}}(this)),_.isEmpty(c)||(f=!0,c=this.subview(bh,b),this.appendSubview(c,this.$(".js-cards-content"))));f||this._appendNoVisibleCards();return this};b.prototype.renderDateSort=function(){var b,c,g,f,h,m,k,l,x;this.clearContent();
this.renderFilterText();f=function(b,d){return function(c){return(null==b||null!=c&&c>=(new Date).addDays(b))&&(null==d||null!=c&&c<(new Date).addDays(d))}};c=function(b){b=b.get("due");return null!=b?I.parse(b):null};f={"Due in the Next Day":{fxTest:f(0,1),data:{isDueSoon:!0}},"Due in the Next 7 Days":{fxTest:f(1,7)},"Due in the Next Month":{fxTest:f(7,28)},"Due Later":{fxTest:f(28,null)},"Overdue Cards":{fxTest:f(null,0),data:{isOverdue:!0}},"Cards with No Due Date":{fxTest:function(b){return null==
b},data:{iconType:"card"}}};h=_.sortBy(this.getCards(),function(b){return function(b){return b.get("due")}}(this));l=!1;for(x in f)g=f[x],m=g.fxTest,g=g.data,k=function(){var f,g,k;k=[];f=0;for(g=h.length;f<g;f++)b=h[f],m(c(b))&&k.push(b);return k}(),_.isEmpty(k)||(l=!0,g=_.extend({header:x},g),g=this.subview(ch,y.me(),{templateData:g,fxTest:m},"datesectionview-"+x),this.appendSubview(g,this.$(".js-cards-content")));l||this._appendNoVisibleCards();return this};return b}(Ib);dh=function(c){function b(){return b.__super__.constructor.apply(this,
arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Sort Cards"};b.prototype.initialize=function(){return this.listenTo(Da,"change:cardsPageSortType",function(){return this.render()})};b.prototype.events={"click .js-sort-by-board":"sortByBoard","click .js-sort-by-due-date":"sortByDueDate"};b.prototype.render=function(){var b;b={};b[Da.getCardsPageSortType()]=!0;this.$el.html(v.fill("member_cards_filter",b));return this};b.prototype.sortByBoard=function(b){l.stop(b);Da.sortCardsPageByBoard();
w.hide();n("Member View","Cards Page","Sort by Board")};b.prototype.sortByDueDate=function(b){l.stop(b);Da.sortCardsPageByDate();w.hide();n("Member View","Cards Page","Sort by Due Date")};return b}(A);ch=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="window-module";b.prototype.getCards=function(){var b,c,g,f;c=function(b){b=b.get("due");return null!=b?I.parse(b):null};f=this.options.fxTest;g=this.Card.find(function(b){return!b.get("closed")});
return function(){var h,m,k;k=[];h=0;for(m=g.length;h<m;h++)b=g[h],f(c(b))&&k.push(b);return k}()};b.prototype.render=function(){var b;b={iconType:"clock",isOverdue:!1,isDueSoon:!1};_.extend(b,this.options.templateData);0<this.getCards().length?(this.$el.html(v.fill("member_cards_date",b)),this.renderCards()):this.$el.empty();return this};b.prototype.renderCards=function(){var b,c,g,f,h;c=[];h=this.getCards();g=0;for(f=h.length;g<f;g++)b=h[g],c.push(this.subview(Ic,b,{dateSort:!0}));this.appendSubviews(c,
this.$(".js-list"));b=l.formatCount(this.getCards().length,"Card",!0);return this.$(".js-card-total").html(b)};return b}(A);bh=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="window-module";b.prototype.getCards=function(){var b;b=this.Card.find(function(b){return!b.get("closed")});return _.filter(b,function(b){return function(d){return d.get("idBoard")===b.model.id}}(this))};b.prototype.render=function(){var b,c;b=this.model.toJSON({prefs:!0});
b.boardUrl=this.model.getUrl();b.permissionLevel_org&&(b.permissionLevel="org-private");b.idOrganization&&!this.options.hideOrg&&(b.org=null!=(c=this.Organization.get(b.idOrganization))?c.toJSON():void 0);0<this.getCards().length?(this.$el.html(v.fill("member_cards_board",b)),this.renderCards()):this.$el.empty();return this};b.prototype.renderCards=function(){var b,c,g,f,h;c=[];h=this.getCards();g=0;for(f=h.length;g<f;g++)b=h[g],c.push(this.subview(Ic,b,{dateSort:!0}));this.appendSubviews(c,this.$(".js-list"));
b=l.formatCount(this.getCards().length,"Card",!0);this.$(".js-card-total").html(b);return this};return b}(A);Wg=function(c){function b(){this.deleteConfirm=k(this.deleteConfirm,this);this.toggleCB=k(this.toggleCB,this);this.renderMainContent=k(this.renderMainContent,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){b.__super__.initialize.apply(this,arguments);return this.model.ond("change:loginTypes change:prefs change:tokens change:credentials",this.renderMainContent)};
b.prototype.events={"click .js-change-avatar":"changeAvatar","click .js-change-name-and-bio":"changeUserInfo","click .js-change-email":"changeEmail","click .js-change-password":"changePassword","click .js-change-email-freq":"changeEmailFreq","click .js-allow-desktop-notifications":"allowDesktopNote","click .js-toggle-cb-mode":"toggleCB","click .js-confirm-delete-member":"deleteConfirm"};b.prototype.renderMainContent=function(){var b,c,g;b=this.model.toJSON({prefs:!0,hasPassword:!0});b["avatarSource_"+
b.avatarSource]=!0;b.canAllowDesktopNotifications=Fb.notEnabled();b.cbEnabled=this.model.get("prefs").colorBlind;this.$(".js-content").html(v.fill("member_account",b,{editable:y.isMe(this.model)}));this.$(".js-member-applications").html(this.model.getView(Xg).render().el);this.$(".js-member-sessions").html(this.model.getView(jh).render().el);c=this.$(".js-credentials-section");b=this.$(".js-credentials-list");0<this.model.get("logins").length?(b.empty(),g=this.collectionSubview(gh,this.model.loginList,
{model:this.model}),this.appendSubview(g,b),c.removeClass("hide")):c.addClass("hide");this.$(".js-content").prepend(this.subview(ec,this.model,{allowDismiss:!1}).render().el);this.setActiveView(".js-member-account");return this};b.prototype.changeUserInfo=function(b){l.stop(b);n("Member View","Account Page","Open Change User Info Menu");return w.toggle({elem:this.$(".js-change-name-and-bio"),top:50,view:this.model.getView(fe)})};b.prototype.changeEmail=function(b){l.stop(b);n("Member View","Account Page",
"Open Change Email Menu");return w.toggle({elem:this.$(".js-change-email"),top:50,view:this.model.getView(Ug)})};b.prototype.changeAvatar=function(b){l.stop(b);n("Member View","Account Page","Open Change Avatar Menu");return w.toggle({elem:this.$(".js-change-avatar"),top:50,view:this.model.getView(Mc)})};b.prototype.changePassword=function(b){l.stop(b);n("Member View","Account Page","Open Change Password Menu");return w.toggle({elem:this.$(".js-change-password"),top:50,view:this.model.getView(Ob)})};
b.prototype.changeEmailFreq=function(b){l.stop(b);n("Member View","Account Page","Open Change Frequency Menu");return w.toggle({elem:this.$(".js-change-email-freq"),top:50,view:this.model.getView(de,"account")})};b.prototype.allowDesktopNote=function(b){l.stop(b);n("Member View","Account Page","Allow Desktop Notifications");return Fb.requestPermission(function(b){return function(){b.render()}}(this))};b.prototype.toggleCB=function(b){l.stop(b);n("Member View","Account Page","Toggle Color Blind Mode");
this.model.toggleColorBlindMode()};b.prototype.deleteConfirm=function(b){l.stop(b);n("Member View","Account Page","Open Delete Account Confirmation Menu");w.toggle({elem:this.$(".js-confirm-delete-member"),top:35,view:this.model.getView(fh)})};return b}(Ib);fe=function(c){function b(){this.saveChanges=k(this.saveChanges,this);this.showError=k(this.showError,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Change Name and Bio"};
b.prototype.events={"click .js-save-changes":"saveChanges"};b.prototype.render=function(){var b;b=this.model.toJSON({prefs:!0});this.$el.html(v.fill("popover_change_user_info",b));return this};b.prototype.getValue=function(b){return this.$("[name="+b+"]").val()};b.prototype.showError=function(b){return this.$("#account-error").text(null!=b?b:"error").show()};b.prototype.saveChanges=function(b){var c,g,f,h,m;l.preventDefault(b);b={};this.$("#account-error").hide();m=["fullName","initials","username",
"bio"];f=0;for(h=m.length;f<h;f++)c=m[f],b[c]=$.trim(this.getValue(c));b.username=b.username.toLowerCase().replace(/[^a-z0-9_]/g,"");b.initials=b.initials.toUpperCase();g=C.getMemberProfileUrl(this.model.get("username"))===C.location;this.model.update(b,{waitForServer:!0},function(b){return function(d){if(d)return b.showError(d);w.popView();g&&C.setLocation({location:C.getMemberProfileUrl(b.model.get("username"))});return n("Member","Successfully Change User Info")}}(this))};return b}(A);Ug=function(c){function b(){this.saveChanges=
k(this.saveChanges,this);this.showError=k(this.showError,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Change Email"};b.prototype.events={"click .js-save-changes":"saveChanges"};b.prototype.render=function(){var b;b=this.model.toJSON({prefs:!0});this.$el.html(v.fill("popover_change_email",b));return this};b.prototype.showError=function(b){return this.$("#account-error").text(null!=b?b:"error").show()};b.prototype.saveChanges=
function(b){l.preventDefault(b);return this.model.run("changeEmail",{email:this.$('[name="email"]').val()},function(b){return function(d){if(d)return b.showError(d);w.popView();O.flash("Email Sent","confirm");return n("Member","Changed Email Address")}}(this))};return b}(A);Ob=function(c){function b(){this.saveChanges=k(this.saveChanges,this);this.showPasswordError=k(this.showPasswordError,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=
function(){return this.model.ond("change:loginTypes",this.render)};b.prototype.getViewTitle=function(){return 0>D.call(this.model.get("loginTypes"),"password")?"Set Password":"Change Password"};b.prototype.events={"click .js-save-changes":"saveChanges"};b.prototype.render=function(){var b;b=this.model.toJSON({prefs:!0,hasPassword:!0});this.$el.html(v.fill("popover_change_set_password",b));return this};b.prototype.getValue=function(b){return this.$("[name="+b+"]").val()};b.prototype.showPasswordError=
function(b){return this.$("#password-error").text(null!=b?b:"error").show()};b.prototype.saveChanges=function(b){var c,g;l.preventDefault(b);this.$("#password-error").hide();g=this.getValue("oldpassword");b=this.getValue("password");c=this.getValue("password2");if(b||c)b!==c?this.showPasswordError("Passwords must match."):this.model.run("updatePassword",{oldPassword:g,newPassword:b},function(b){return function(d){if(null!=d)return/newPassword/.test(d)?b.showPasswordError("New password must be at least 4 characters long"):
/oldPassword/.test(d)?b.showPasswordError("The old password was incorrect"):b.showPasswordError(d);n("Member","Changed Password");return w.popView()}}(this))};return b}(A);de=function(c){function b(){this.changeFreq=k(this.changeFreq,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Send Emails..."};b.prototype.initialize=function(){return this.model.ond("change:prefs",this.render)};b.prototype.events={"click li a":"changeFreq"};
b.prototype.render=function(){var b;b=this.model.toJSON({prefs:!0});this.$el.html(v.fill("popover_set_email_freq",b));return this};b.prototype.changeFreq=function(b){n("Member","Changed Email Frequency");b=parseInt($(b.target).closest("a").attr("value"));this.model.setPref("minutesBetweenSummaries",b).save();w.popView()};return b}(A);Mc=function(c){function b(){this.takePhoto=k(this.takePhoto,this);this.clearAvatar=k(this.clearAvatar,this);this.useGravatar=k(this.useGravatar,this);this.useUploadedAvatar=
k(this.useUploadedAvatar,this);this.uploadResult=k(this.uploadResult,this);this.startUpload=k(this.startUpload,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Change Avatar"};b.prototype.initialize=function(){return this.model.ond("change:avatarSource change:uploadedAvatarHash",this.render)};b.prototype.events={"change .js-upload-avatar":"startUpload","click .js-use-gravatar":"useGravatar","click .js-use-uploaded-avatar":"useUploadedAvatar",
"click .js-take-photo":"takePhoto","click .js-no-avatar":"clearAvatar"};b.prototype.render=function(){var b,c;b=this.model.toJSON({prefs:!0});b["avatarSource_"+b.avatarSource]=!0;b.canTakePhoto=Oa.supportsGetUserMedia();this.$el.html(v.fill("avatar_change",b));c=this.$(".js-grav");c.find("img");b="https://secure.gravatar.com/avatar/"+(""+this.model.get("gravatarHash")+".png?s=50&r=PG&d=404")+("&_="+Math.random());l.waitForImageLoad(b,function(){return c.show()});return this};b.prototype.startUpload=
function(b){var c,g,f;g=$(b.target);b=null!=(c=g[0])?null!=(f=c.files)?f[0]:void 0:void 0;c=this.$(".js-error").hide();if(null!=b&&!l.validFileSize(b))c.text("Images can not be larger than 10mb.").show(),n("Member","Avatar","Upload Error - File Too Large"),w.calcPos();else{n("Member","Avatar","Use Uploaded - New");if(!b&&g.val())return l.uploadFile(g,this.uploadResult);if(null!=b)return c=new FormData,c.append("token",y.myToken()),c.append("file",b),S({url:g.closest("form").attr("action"),data:c,
type:"post",processData:!1,contentType:!1,error:function(b){return function(d){return b.uploadResult(Error(d.responseText))}}(this),success:function(b){return function(){return b.uploadResult.apply(b,[null].concat(G.call(arguments)))}}(this),timeout:12E4})}};b.prototype.uploadResult=function(b){var c;c=this.$(".js-error").hide();if(b)return c.show().text(b),w.calcPos()};b.prototype.useUploadedAvatar=function(b){n("Member","Avatar","Use Uploaded - Existing");this.model.update("avatarSource","upload");
return w.popView()};b.prototype.useGravatar=function(b){n("Member","Avatar","Use Gravatar");this.model.update("avatarSource","gravatar");return w.popView()};b.prototype.clearAvatar=function(b){n("Member","Avatar","Use Initials");this.model.update("avatarSource","none");return w.popView()};b.prototype.takePhoto=function(b){b=this.model.getView(Df);w.pushView({view:b});n("Member","Avatar","Take Photo");b.connectCamera();return b.on("done",function(b){return function(d){var c,h,m;c=atob(d.split(",")[1]);
d=function(){var b,d,e;e=[];m=b=0;for(d=c.length;0<=d?b<d:b>d;m=0<=d?++b:--b)e.push(c.charCodeAt(m));return e}();d=new Blob([new Uint8Array(d)],{type:"image/png"});h=new FormData;h.append("token",y.myToken());h.append("file",d,"avatar.png");return S({url:"/1/member/"+b.model.id+"/avatar",data:h,type:"post",processData:!1,contentType:!1,error:function(b,d,c,e){if(413!==b.status)return e()},timeout:6E4})}}(this))};return b}(A);fh=function(c){function b(){this.cancelDeleteMember=k(this.cancelDeleteMember,
this);this.deleteMember=k(this.deleteMember,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Delete Account?"};b.prototype.events={"click .js-delete-member":"deleteMember","click .js-cancel-delete":"cancelDeleteMember"};b.prototype.render=function(){this.$el.html(v.fill("popover_confirm_member_delete",this.model.toJSON()));return this};b.prototype.deleteMember=function(b){l.stop(b);this.$(".js-delete-member").attr("disabled",
"disabled");this.model.run("deleteAccount",{msg:"troodbye!"},function(){w.hide();O.flash("Email Sent","confirm");n("Member","Sent Account Delete Email")})};b.prototype.cancelDeleteMember=function(b){l.stop(b);w.hide()};return b}(A);Xg=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.render=function(){var b,c,g,f,h;b=this.model.toJSON({prefs:!0});g=b.tokens;b.hasTokens=0<(null!=g?g.length:void 0);this.$el.html(v.fill("member_application_list",b));if(null!=
g){b=this.$(".member-applications");f=0;for(h=g.length;f<h;f++)c=g[f],b.append(this.model.getView(mh,c.id,c).render().el)}return this};return b}(A);jh=function(c){function b(){this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){return this.model.ond("change:sessions",this.render)};b.prototype.events={"click .js-log-out-other":"logOutOther"};b.prototype.render=function(){var b,c,g,f,h;b=this.model.toJSON();this.$el.html(v.fill("member_session_list",
b));g=b.sessions;if(null!=g){b=this.$(".js-sessions");f=0;for(h=g.length;f<h;f++)c=g[f],b.append(this.model.getView(lh,c.id,c).render().el)}return this};b.prototype.logOutOther=function(b){l.stop(b);this.model.run("logoutOtherSessions");this.model.set("sessions",_.filter(this.model.get("sessions"),function(b){return function(b){return b.isCurrent}}(this)));return this.render()};return b}(A);mh=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className=
"application clearfix";b.prototype.events={"click .js-revoke":"revoke"};b.prototype.render=function(){var b,c,g,f,h,m;m=this.options;b=m.dateExpires;g=m.permissions;b={identifier:m.identifier,dateApproved:I.toLongString(I.parse(m.dateCreated)),dateExpires:b?I.toLongString(I.parse(b)):null,neverExpires:null==b};_.isEmpty(g)?b.permissions="read access on your public boards and organizations":(g=function(){var b,d,m;m=[];b=0;for(d=g.length;b<d;b++)c=g[b],f="",c.read&&(f+="read"),c.write&&(f+=" and write"),
h=function(){if("*"===c.idModel)switch(c.modelType){case "*":return"your account and all boards and organizations";case "Board":return"all your boards";case "Organization":return"all your organizations";default:return"unknown"}else switch(c.modelType){case "Member":return"your account";case "Board":return"a specific board";case "Organization":return"a specific organization";default:return"unknown"}}(),m.push(""+f+" access on "+h);return m}(),b.permissions=g.join(", "));this.$el.html(v.fill("member_application",
b));return this};b.prototype.revoke=function(b){l.stop(b);this.model.set("tokens",_.filter(this.model.get("tokens"),function(b){return function(d){return d.id!==b.options.id}}(this)));return this.model.pull("tokens",this.options.id,function(b){return function(){return n("Member","Applications","Revoke App")}}(this))};return b}(A);lh=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="member-account-session";b.prototype.events={"click .js-revoke":"revoke"};
b.prototype.render=function(){var b;b=this.options;b["type_"+this.options.type]=!0;this.$el.html(v.fill("member_session",b));I.update(this.el);return this};b.prototype.revoke=function(b){return $.get("/login/revoke",{id:this.options.id},function(b){return function(){return b.model.set("sessions",_.filter(b.model.get("sessions"),function(d){return d.id!==b.options.id}))}}(this))};return b}(A);Vg=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className=
"member-login";b.prototype.events={"click .js-primary":"setPrimary","click .js-remove":"confirmDeleteLogin"};b.prototype.initialize=function(){return this.listenTo(this.model,"change",this.render)};b.prototype.render=function(){var b;b=this.model.toJSON();b.dateAdded=l.idToDate(b.id);this.$el.html(v.fill("member_login",b));I.update(this.el);return this};b.prototype.setPrimary=function(b){return S({url:"/1/members/me/logins/"+this.model.id+"/primary",type:"put",success:function(b){return function(d){return b.model.set("primary",
!0)}}(this)})};b.prototype.confirmDeleteLogin=function(b){l.stop(b);if(this.model.hasConflict())this.trigger("requestSetPassword");else return pa.toggle(this.popover({title:"Remove Credential?",text:"Once you remove this credential, you won't be able to log into Trello with\nthe email "+this.model.get("email")+" anymore.",confirmText:"Delete Credential",confirmBtnClass:"negate",fxConfirm:function(b){return function(){return b.deleteLogin()}}(this)}))};b.prototype.deleteLogin=function(){return S({url:"/1/members/me/logins/"+
this.model.id,type:"delete",success:function(b){return function(c){return b.model.trigger("destroy",b.model,b.model.collection)}}(this)})};b.prototype.popover=function(b){return _.extend({elem:this.$(".js-remove"),top:30},b)};return b}(A);gh=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.viewType=Vg;b.prototype.initialize=function(){this.on("requestSetPassword",this.showSetPassword);return b.__super__.initialize.apply(this,arguments)};b.prototype.showSetPassword=
function(b){return pa.toggle(b.popover({title:"Cannot remove credential",text:"You must set a password or log in with a different Google account to remove this credential.",confirmText:"Set Password",confirmBtnClass:"confirm",fxConfirm:function(c){return function(g){return w.show(b.popover({view:Ob,options:{model:c.model}}))}}(this)}))};return b}(sb);Ka=function(c){function b(){this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){};
b.prototype.render=function(){var b;b=this.model.toJSON();"ghost"===this.model.get("memberType")&&(b.isVirtual=!0);b.unconfirmed=this.options.showUnconfirmed&&!b.isVirtual&&!b.confirmed;b.showStatus=this.options.showStatus;b.isKnownMember=this.options.isKnownMember;b.extraText=this.options.extraText;b["status_"+this.model.get("status")]=!0;this.options.linkName?b.url="/"+this.model.get("username"):delete b.url;this.$el.html(v.fill("select_member",b,{},{member:v.member}));b.unconfirmed&&this.$(".js-insert-tooltip").html(this.subview(Bf,
this.model).render().$el);this.$(".js-member").data("id",this.model.id);return this};return b}(A);ae=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){return this.listenTo(this.options.card,"change:idMembers",this.renderActive)};b.prototype.renderActive=function(){var b;return this.$(".js-member-item").toggleClass("active",(b=this.model.id,0<=D.call(this.options.card.get("idMembers"),b)))};b.prototype.render=function(){b.__super__.render.apply(this,
arguments);this.renderActive();return this};return b}(Ka);ie=function(){function c(){}c.prototype.pricing={monthlyProduct:"trelloGoldMonthly",yearlyProduct:"trelloGoldYearly",showRecommend:!0};c.prototype.features=Ea;c.prototype.productPrefix="trelloGold";return c}();ge=na(Gd,ie,ge=function(c){function b(){this.initialize=k(this.initialize,this);this.paidAccountLoader=k(this.paidAccountLoader,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.apiPath="members";b.prototype.productName=
"Trello Gold";b.prototype.changeCardUrl=function(){return C.getMemberBillingCardUrl(this.model)};b.prototype.productIconClass=function(){return"crown"};b.prototype.paidAccountLoader=function(b){return M["for"](this.modelCache).loadMemberPaidAccount(this.model.id,b)};b.prototype.initialize=function(){b.__super__.initialize.apply(this,arguments);return this.setup()};return b}(Ib));Yg=function(c){function b(){this.getFormOpts=k(this.getFormOpts,this);this.renderMainContent=k(this.renderMainContent,this);
return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.renderMainContent=function(){var b;b=this.getFormOpts();this.$(".js-content").empty().append((new he(b)).render().el);this.setActiveView(".js-member-billing");return this};b.prototype.getFormOpts=function(){var b,c,g,f,h;b={model:this.model,productName:"Trello Gold"};Ea.hasAccount(null!=(c=this.model.get("paidAccount"))?c.standing:void 0)?_.extend(b,{formAreas:{creditCard:!0},action:"js-submit-change-credit-card",productNumber:null!=
(g=null!=(f=this.model.get("paidAccount"))?f.products[0]:void 0)?g:Ea.getProductNumber("trelloGoldMonthly")}):_.extend(b,{formAreas:{creditCard:!0,billingContactHidden:!0,subscribingTo:!0,billingOptions:!0},action:"js-submit-create-paid-account",productNumber:Ea.getProductNumber(null!=(h=this.options.product)?h:"trelloGoldMonthly")});return b};return b}(Ib);he=na(ie,he=function(c){function b(){this.billingView=k(this.billingView,this);this.profileView=k(this.profileView,this);return b.__super__.constructor.apply(this,
arguments)}s(b,c);b.prototype.profileView=function(){return C.defaultView()};b.prototype.billingView=function(){return C.memberBillingView(this.model.get("username"))};return b}(Hd));Eg=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Voters"};b.prototype.events={"click .js-more-members-voted":"showAll","click .js-vote":"vote","click .js-unvote":"unvote"};b.prototype.initialize=function(){return this.listenTo(this.model.memberVotedList,
"add remove reset",this.render)};b.prototype.showAll=function(){return this.render(!0)};b.prototype.render=function(b){var c,g;g=this.model.memberVotedList;var f,h,m,k;m=g.models;k=[];f=0;for(h=m.length;f<h;f++)c=m[f],k.push(c.toJSON());c={members:k};!0!==b&&(c.members=c.members.slice(0,48),c.fewMembers=14>g.length,c.moreMembers=48<g.length,c.lengthDiff=g.length-48,c.canVote=this.model.getBoard().canVote(y.me()),c.voted=_.include(this.model.get("idMembersVoted"),y.myId()));this.$el.html(v.fill("members_voted",
c,{},{member:v.member}));w.calcPos();return this};b.prototype.vote=function(b){l.preventDefault(b);this.model.vote(!0);return!1};b.prototype.unvote=function(b){l.preventDefault(b);this.model.vote(!1);0===this.model.get("idMembersVoted").length&&w.hide();return!1};return b}(A);ee=function(c){function b(){this.makeObserver=k(this.makeObserver,this);this.makeMember=k(this.makeMember,this);this.makeAdmin=k(this.makeAdmin,this);this.isAdminAndMe=k(this.isAdminAndMe,this);this.getMemberType=k(this.getMemberType,
this);this.apiChangeRole=k(this.apiChangeRole,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Change Permissions"};b.prototype.initialize=function(){this.parent=this.options.parent;this.listenTo(this.parent,"change:memberships",this.render)};b.prototype.events={"click .js-make-admin":"makeAdmin","click .js-make-member":"makeMember","click .js-make-observer":"makeObserver"};b.prototype.render=function(){var b,c,g,f,h;b=this.model.getMembershipData(this.parent);
"Board"===this.parent.typeName&&(null!=(c=this.parent.getOrganization())&&c.isFeatureEnabled("observers"))&&_.extend(b,{showObserver:!0});h=["admin","normal","observer"];g=0;for(f=h.length;g<f;g++)c=h[g],b["roleText_"+c]=this.parent.getRoleText(c);this.$el.html(v.fill("popover_change_roles",b));return this};b.prototype.apiChangeRole=function(b){this.$el.find("ul a").addClass("disabled");S({type:"PUT",url:"/1/"+this.parent.typeName.toLowerCase()+"/"+this.parent.id+"/members/"+this.model.id,data:{type:b},
success:function(c){return function(){n("Member","Change Role",b);return w.hide()}}(this)})};b.prototype.getMemberType=function(){return this.parent.getExplicitMemberType(this.model)};b.prototype.isAdminAndMe=function(){return"admin"===this.getMemberType()&&y.isMe(this.model)};b.prototype.makeAdmin=function(b){l.stop(b);$(b.target).closest("a").hasClass("disabled")||"admin"!==this.getMemberType()&&this.apiChangeRole("admin")};b.prototype.makeMember=function(b){l.stop(b);$(b.target).closest("a").hasClass("disabled")||
"normal"!==this.getMemberType()&&(this.isAdminAndMe()?pa.pushView({title:"Remove Admin Privileges?",text:"By becoming a normal member, you will lose all admin privileges such as the ability to change settings. To regain privileges, you will need another admin to change your role back to admin.",confirmText:"Make Me a Normal Member",fxConfirm:function(b){return function(d){return b.apiChangeRole("normal")}}(this)}):this.apiChangeRole("normal"))};b.prototype.makeObserver=function(b){l.stop(b);$(b.target).closest("a").hasClass("disabled")||
"observer"!==this.getMemberType()&&(this.isAdminAndMe()?pa.pushView({title:"Remove Admin Privileges?",text:"By becoming an observer, you will lose all admin privileges such as the ability to change settings. To regain privileges, you will need another admin to change your role back to admin.",confirmText:"Make Me an Observer",fxConfirm:function(b){return function(d){return b.apiChangeRole("observer")}}(this)}):this.apiChangeRole("observer"))};return b}(A);kh=function(c){function b(){this.apiChangeRole=
k(this.apiChangeRole,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.apiChangeRole=function(d){b.__super__.apiChangeRole.apply(this,arguments);if("admin"!==d&&this.isAdminAndMe())return C.navigate(C.getOrganizationUrl(this.parent),{trigger:!0})};return b}(ee);Zg=na(pc,function(c){function b(){this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.events={"click .js-more-actions":"loadMoreActions"};b.prototype.initialize=
function(){this.board=this.options.board;this.board.memberList.onAddRemove(this.render);this.actionListView=this.collectionSubview(Qb,new xb(this.Action.getListForModel(this.model),{modelCache:this.modelCache}),{renderOpts:{context:this.model}});this.listenTo(this.modelCache,"add:Action:"+this.model.id+" remove:Action:"+this.model.id,function(b){return function(){b.actionListView.collection.reset(b.Action.getListForModel(b.model),{silent:!0});return b.renderActions()}}(this));this.idModels=[this.board.id];
this.nextPage=0;return this.loadMoreActions()};b.prototype.render=function(){this.$el.html(v.fill("board_member_profile",this.model.toJSON()));this.actionListView.setElement(this.$(".list-actions")[0]);return this.renderActions()};b.prototype.renderActions=function(){this.actionListView.render();this.$(".js-more-actions").toggle(this.hasMoreActions());return this};b.prototype.getActionsFilter=function(){return od};return b}(A));ec=function(c){function b(){return b.__super__.constructor.apply(this,
arguments)}s(b,c);b.prototype.initialize=function(){this.makeDebouncedMethods("render");this.listenTo(this.model,"change:oneTimeMessagesDismissed",this.renderDebounced);return this.listenTo(this.model,"change:paidAccount",this.renderDebounced)};b.prototype.events={"click .js-close-modal":"closeGoldEarned","click .js-close-intro-helper":"closeGoldIntro","click .js-start-using-gold":"startUsingGold"};b.prototype.render=function(){var b,c,g,f,h;this.$el.empty();if(!y.isMe(this.model))return this;f=this.viewShown;
if(this.model.isGold()&&!this.model.isDismissed("GoldIntro"))this.viewShown="intro",this.$el.append(v.fill("member_gold_intro"));else if((!this.model.isDismissed("GoldEarned")||!this.options.allowDismiss)&&!this.activating)if(this.viewShown="earned",b=this.model.get("credits"),c=_.filter(b,function(b){var d;return!b.applied&&0<b.count&&("invitation"===(d=b.type)||"promoCode"===d)}),b=_.reduce(c,function(b,d){return b+d.count},0))12<b&&(b=12),g=_.chain(c).filter(function(b){return"invitation"===b.type&&
null!=b.memberInvited}).pluck("memberInvited").pluck("fullName").value(),h=_.filter(c,function(b){return"promoCode"===b.type}),c=l.humanReadableList(g),b={hasInvitations:0<g.length,hasPromoCodes:0<h.length,joinedNames:c,countMonths:l.formatCount(b,"month"),showClose:this.options.allowDismiss},this.$el.append(v.fill("member_gold_earned",b));null!=f&&f!==this.viewShown&&this.delegateEvents();return this};b.prototype.refreshPaidAccount=function(){null==this.startedPolling&&(this.startedPolling=Date.now());
if(this.startedPolling+l.getMs({minutes:1})<Date.now())O.hide("activating"),O.show("Activating Trello Gold is taking a while, please check back later","error","activating-failed");else return M["for"](this.modelCache).loadMemberPaidAccount(this.model.id,function(b){return function(c,g){if(!(c||null==g))return b.model.isGold()?(delete b.startedPolling,b.activating=!1,O.hide("activating")):b.setTimeout(_.bind(b.refreshPaidAccount,b),l.getMs({seconds:1}))}}(this))};b.prototype.startUsingGold=function(b){l.stop(b);
this.activating=!0;O.show("Activating Trello Gold...","info","activating");this.render();return this.model.run("unpaidAccount",{products:[Ea.productShortNames.trelloGoldMonthly]},function(b){return function(d,c){if(null==d&&c)return b.refreshPaidAccount()}}(this))};b.prototype.closeGoldEarned=function(b){l.stop(b);return this.model.dismiss("GoldEarned")};b.prototype.closeGoldIntro=function(b){l.stop(b);return this.model.dismiss("GoldIntro")};return b}(A);ah=function(c){function b(){this.renderCards=
k(this.renderCards,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.render=function(b){var c;this.cards=b;b=this.model.toJSON({prefs:!0});b.boardUrl=this.model.getUrl();b.permissionLevel_org&&(b.permissionLevel="org-private");b.idOrganization&&!this.options.hideOrg&&(b.org=null!=(c=Ta.get(b.idOrganization))?c.toJSON():void 0);0<this.cards.length?(this.$el.html(v.fill("member_cards_board",b)),this.renderCards()):this.$el.empty();return this};
b.prototype.renderCards=function(){var b,c,g,f,h;c=[];h=this.cards;g=0;for(f=h.length;g<f;g++)b=h[g],c.push(this.subview(Ic,b,{dateSort:!0}));this.appendSubviews(c,this.$(".js-list"));return this};return b}(A);xf=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){return this.fDisabledSubmit=!1};b.prototype.events={"click .js-feedback-form-submit":"submitFeedback"};b.prototype.render=function(){this.$el.html(v.fill("early_version_feedback_form"));
return this};b.prototype.focusFeedback=function(b){l.stop(b);this.$(".js-feedback-form-text").focus().select()};b.prototype.enableSubmit=function(){this.fDisabledSubmit=!1;this.$(".js-feedback-form-submit").removeAttr("disabled");this.$(".js-feedback-form-text").removeAttr("disabled")};b.prototype.disableSubmit=function(){this.fDisabledSubmit=!0;this.$(".js-feedback-form-text").attr("disabled","disabled");this.$(".js-feedback-form-submit").attr("disabled","disabled")};b.prototype.submitFeedback=function(b){var c,
g;l.stop(b);c=this.$(".js-feedback-form");c.find("input[name],textarea[name]");b=this.Auth.me().toJSON();g=new sd;c=c.find(".js-feedback-form-text").val();""===c?this.focusFeedback():this.fDisabledSubmit||(this.disableSubmit(),this.$(".js-feedback-form-submit").val("Submitting\u2026"),g="\n"+c+"\n\n\n------------\n\nTrello Username: "+b.username+"\n\nTrelloVersion:\n\n"+TrelloVersion+"\n\nOS: "+g.OS+"\nBrowser: "+g.browser+" "+g.version+"\n",l.bugzscout({me:b,area:"Beta",description:"New Trello Feedback: "+
TrelloVersion+"\n",extra:g},function(b){return function(d){b.enableSubmit();b.$(".js-submitted-feedback").removeClass("hide");b.$(".js-feedback-form-text").val("").focus().select();return b.$(".js-feedback-form-submit").val("Submit")}}(this)))};return b}(A);Nc=function(c){function b(){this.openOption=k(this.openOption,this);this.hoverMember=k(this.hoverMember,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.hoverMember=function(b){b=$(b.target).closest(".item");return l.selectMenuItem(this.$(".pop-over-member-list"),
".item",b)};b.prototype.openOption=function(b){var c,g;l.stop(b);n("Invitations","Open Role Selector");g=$(b.target).closest(".js-select-member").find(".username").text();g=this.Member.findOne("username",g);0<$(b.target).closest(".item.js-email-invite").length&&(c=$(b.target).closest(".js-email-invite").find(".full-name").attr("name"));g?w.pushView({view:g.getView(ke,"selectRole",{parent:this.model}).setOptions({onSendInvite:this.willBePopped})}):w.pushView({view:y.me().getView(vh,"selectRole",{parent:this.model}).setOptions({email:c,
onSendInvite:this.willBePopped})})};return b}(A);var wf,wb,wh,le,rh,ne,k=function(c,b){return function(){return c.apply(b,arguments)}},F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c},D=[].indexOf||function(c){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===c)return b;return-1};wb=function(c){function b(){this.getUrlOfTarget=k(this.getUrlOfTarget,this);this.navigateToView=
k(this.navigateToView,this);this.markRead=k(this.markRead,this);this.getTemplateData=k(this.getTemplateData,this);this.getExpandedData=k(this.getExpandedData,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.typeName="Notification";b.prototype.urlRoot="/1/notifications";b.sortedByDateDescending=function(b){return _.sortBy(this.all(b),function(b){return-(new Date(b.get("date"))).getTime()})};b.unreadCount=function(b){var c,g,f,h;f=this.all(b);h=[];c=0;for(g=f.length;c<g;c++)b=
f[c],b.get("unread")&&h.push(b);return h.length};b.prototype.getModel=function(){return this.collection.options.model};b.prototype.triggerCacheEvents=function(b,c){var g,f,h,m;m=this.idModels();f=0;for(h=m.length;f<h;f++)g=m[f],b.trigger(""+c+":"+this.typeName+":"+g)};b.prototype.idModels=function(){var b,c,g,f;g=null!=(c=this.get("data"))?c:{};f=[];for(b in g)c=g[b],null!=(null!=c?c.id:void 0)&&f.push(c.id);return f};b.prototype.getExpandedData=function(){var b,c,g,f,h;c=_.extend({},null!=(g=this.toJSON().data)?
g:{},{date:this.get("date"),unread:this.get("unread")});c[this.get("type")]=!0;c.memberCreator=null!=(h=this.Member.get(this.get("idMemberCreator")))?h.toJSON():void 0;g=null!=(b=this.get("member"))?b.id:void 0;null!=g&&(c.member=null!=(f=this.Member.get(g))?f.toJSON():void 0);f=function(b){var d,f,g,h;g=_.keys(b)[0];d=l.capitalize(g);f=b[g];return null!=y.me().get("id"+d+"sInvited")&&(h=f.id,0<=D.call(y.me().get("id"+d+"sInvited"),h))&&!_.any(this.Notification.all(),function(b){return b.get("type")===
"invitedTo"+d&&b.get("data")[g].id===f.id&&b.get("date")>c.date})};b=c.board;g=c.organization;0===this.get("type").indexOf("invitedTo")&&(null!=b&&(c.stillInvited=f({board:b})),null!=g&&(c.stillInvited=f({organization:g})),c.confirmed=y.me().get("confirmed"));return c};b.prototype.getTemplateData=function(b){var c,g,f,h,m,k,u;b=_.extend({useHTML:!0,truncate:250},null!=b?b:{});c=b.useHTML;f=b.truncate;b=this.getExpandedData();b.entities=(new le({modelCache:this.modelCache})).getEntityList(this.toJSON());
"member"===b.entities[0].type&&(b.member=null!=(g=this.Member.get(b.entities[0].id))?g.toJSON():void 0,null==b.member&&(b.memberDeleted=!0),b.entities.shift(1));g={convertNewlines:!0,board:b.board,textData:b.textData};if(c){u=b.entities;m=0;for(k=u.length;m<k;m++)c=u[m],null!=c.text&&(h=_.isNumber(f)?l.truncate(c.text,f):c.text,c.html=Ja.comments.format(h,g).output+(h.length<c.text.length?"&hellip;":""))}return b};b.prototype.markRead=function(){return this.update({unread:!1})};b.prototype.navigateToView=
function(){var b;b=this.get("data");return null!=b&&null!=b.card&&null!=b.board?(C.displayBoard({idBoard:b.board.id,idCard:b.card.id}),!0):"memberJoinedTrello"===this.get("type")?(C.navigate("/recommend",{trigger:!0}),!0):!1};b.prototype.getUrlOfTarget=function(){var b;b=this.get("data");return null!=b.card?C.getCardUrlWithoutModels(b.board.id,b.card.id,b.card.name):null!=b.board?C.getBoardUrl(ModelCacheCache["for"]("header"),b.board):null!=b.organization?C.getOrganizationUrl(b.organization.id):C.getMemberNotificationsUrl()};
return b}(fa);ne=function(c){function b(){this.viewMemberActionMenu=k(this.viewMemberActionMenu,this);this.clickedNotification=k(this.clickedNotification,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.enablePopupMenu=!0;b.prototype.showStatus=!1;b.prototype.className="phenom phenom-notification clearfix";b.prototype.events={click:"clickedNotification","click .js-show-mem-menu":"viewMemberActionMenu"};b.prototype.render=function(){var b,
c;b=this.model.getTemplateData();if("cardDueSoon"===this.model.get("type"))b.isDueDateNotification=!0,b.hasIcon=!0,this.$el.addClass("due-soon");else if("declinedInvitationToBoard"===(c=this.model.get("type"))||"declinedInvitationToOrganization"===c)b.hasIcon=!0,b.isDeclinedInvitationNotification=!0;P("notifications",b);this.$el.html(v.fill("notification",b,{},{entity:v.entity,member:v.member}));b.unread?this.$el.addClass("unread"):this.$el.removeClass("unread");I.update(this.el);return this};b.prototype.clickedNotification=
function(b){this.model.markRead();this.isHeader?n("Header","Notifications Menu","Clicked Notification"):this.isNotifications&&n("Member View","Notifications Page","Clicked Notification");if(!$(b.target).is("a"))return this.model.navigateToView(),l.stop(b)};b.prototype.viewMemberActionMenu=function(b){var c,g;l.stop(b);c=this.Member.get(null!=(g=$(b.target).closest("[idmember]").attr("idmember"))?g:this.model.get("idMemberCreator"));0<$(b.target).closest(".pop-over").length?w.pushView({view:Vb,options:{model:c,
modelCache:this.modelCache}}):(g=22,0<$(b.target).closest(".member").length&&(g=36),w.toggle({elem:this.$(".js-show-mem-menu"),top:g,view:Vb,options:{model:c,modelCache:this.modelCache}}))};return b}(A);le=function(c){function b(d){this.modelCache=d.modelCache;b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getCardUrl=function(d,c){var g,f;return null!=(null!=(f=g=this.Card.get(c.id))?f.get("url"):void 0)?C.getCardUrl(g):b.__super__.getCardUrl.apply(this,arguments)};b.prototype.getBoardUrl=
function(d){var c,g;return null!=(null!=(g=c=this.Board.get(d.id))?g.get("url"):void 0)?C.getBoardUrl(this.modelCache,c):b.__super__.getBoardUrl.apply(this,arguments)};b.prototype.getMember=function(b){return this.Member.get(b)};b.prototype.getDateMs=function(b){return Ac.serverToClient(b).getTime()};return b}(jd);l.extendWithModelCacheHelpers(le);wh=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.isHeader=!0;b.prototype.goToProfile=!0;return b}(ne);
rh=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.isNotifications=!0;b.prototype.goToProfile=!1;return b}(ne);wf=function(c){function b(){this.allowDekstopNote=k(this.allowDekstopNote,this);this.changeEmailFrequency=k(this.changeEmailFrequency,this);this.viewAllNotifications=k(this.viewAllNotifications,this);this.render=k(this.render,this);this.markUnread=k(this.markUnread,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=
function(){return"Notifications"};b.prototype.className="header-notification-list";b.prototype.events={"click .js-view-all-notifications":"viewAllNotifications","click .js-change-email-frequency":"changeEmailFrequency","click .js-allow-desktop-notifications":"allowDekstopNote"};b.prototype.markUnread=function(){var b,c,g,f;g=this.menuRows;for(b in g)c=g[b],c.model.get("unread")&&null!=(f=this.Notification.get(b))&&f.markRead()};b.prototype.render=function(){var b,c,g,f,h,m;this.$el.empty();c={};this.menuRows=
{};b=0;f=this.Notification.sortedByDateDescending();h=0;for(m=f.length;h<m;h++){g=f[h];if(4<b)break;b++;this.menuRows[g.id]=g.getView(wh,"header");this.$el.append(this.menuRows[g.id].render().el)}if(0<f.length){c.hasNotifications=!0;h=this.Notification.sortedByDateDescending().slice(5);m=[];b=0;for(f=h.length;b<f;b++)g=h[b],g.get("unread")&&m.push(g);g=m.length;c.unreadText=0===g?"":" ("+g+" more unread)";c.noteUrl="/"+this.model.get("username")+"/notifications";c.canAllowDesktopNotifications=Fb.notEnabled()}else c.hasNotifications=
!1;this.$el.append(v.fill("header_notification_list_menu",c));return this};b.prototype.viewAllNotifications=function(){return n("Header","Notifications Menu","See All Notifications")};b.prototype.changeEmailFrequency=function(b){l.stop(b);n("Header","Notifications Menu","Change Email Frequency");w.pushView({view:this.model.getView(de,"notifications")})};b.prototype.allowDekstopNote=function(b){l.stop(b);n("Header","Notifications Menu","Allow Desktop Notifications");Fb.requestPermission(function(b){return function(){b.render()}}(this))};
return b}(A);var xh,yh,zh,Ah,Pb,Bh,Ch,Ta,Dh,Eh,Fh,oe,Gh,Hh,Ih,Jh,Kh,nh,Lh,qh,Mh,Nh,Oh,Oc,Ph,pe,Qh,Rh,hb,Sh,k=function(c,b){return function(){return c.apply(b,arguments)}},F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c},G=[].slice,D=[].indexOf||function(c){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===c)return b;return-1};Ta=function(c){function b(){this.getRoleText=
k(this.getRoleText,this);this.getPermLevelAltText=k(this.getPermLevelAltText,this);this.getPermLevelDisplayText=k(this.getPermLevelDisplayText,this);this.getPermLevelIconClass=k(this.getPermLevelIconClass,this);this.isFeatureEnabled=k(this.isFeatureEnabled,this);this.isLinkedToGoogleApps=k(this.isLinkedToGoogleApps,this);this.owned=k(this.owned,this);this.canSetVisibility=k(this.canSetVisibility,this);this.canAddBoard=k(this.canAddBoard,this);this.ownedByMember=k(this.ownedByMember,this);this.isJPS=
k(this.isJPS,this);this.isPremiumYearly=k(this.isPremiumYearly,this);this.isPremiumMonthly=k(this.isPremiumMonthly,this);this.isPremium=k(this.isPremium,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);na(Nd,b);b.prototype.typeName="Organization";b.prototype.nameAttr="displayName";b.prototype.urlRoot="/1/organizations";b.prototype.initialize=function(){b.__super__.initialize.call(this);return this.destruct([this.invitationList=new Th([]),this.boardList=(new je).syncModel(this,"idBoards"),
this.memberList=(new qb).syncModel(this,"memberships",{fxGetIds:function(b){return _.pluck(b,"idMember")}}),this.adminList=(new qb).syncModel(this,"memberships",{fxGetIds:function(b){return function(b){return _.pluck(_.filter(b,function(b){var d;d=b.memberType;b=b.deactivated;return"admin"===d&&!b}),"idMember")}}(this)})])};b.prototype.prefNames=["permissionLevel","orgInviteRestrict","boardVisibilityRestrict","externalMembersDisabled"];b.prototype.editable=function(){var b,c;b=y.me();c=this.getMembershipFor(b);
return b&&"admin"===(null!=c?c.memberType:void 0)};b.prototype.isPremium=function(){return oa.hasProduct(this.get("products"))};b.prototype.isPremiumMonthly=function(){return this.isPremium()&&oa.isMonthly(this.get("products"))};b.prototype.isPremiumYearly=function(){return this.isPremium()&&"yearly"===oa.getInterval(this.get("products"))};b.prototype.totalPerUserPrice=function(b){var c;c=this.get("billableMemberCount");if(oa.isPerUser(b)&&null!=c)return c*oa.getPrice(b)};b.prototype.isJPS=function(){return 0<
_.intersection([96,97],this.get("products")).length};b.prototype.isMember=function(b){var c;return"virtual"===(c=this.getMemberType(b))||"normal"===c||"admin"===c};b.prototype.ownedByMember=function(b){return"admin"===this.getMemberType(b)};b.prototype.canAddBoard=function(b){if(!this.isFeatureEnabled("restrictVis"))return!0;b=b.get("prefs").permissionLevel;return this.canSetVisibility(b)};b.prototype.canSetVisibility=function(b){if(!this.isFeatureEnabled("restrictVis"))return!0;b=this.get("prefs").boardVisibilityRestrict[b];
return!b||"org"===b||"admin"===b&&this.owned()};b.prototype.owned=function(){return"admin"===this.getMemberType(y.me())};b.prototype.isLinkedToGoogleApps=function(){return this.isFeatureEnabled("googleApps")&&this.get("prefs").associatedDomain};b.prototype.isFeatureEnabled=function(b){return oa.isFeatureEnabled(b,this.get("products"))};b.prototype.toJSON=function(d){var c,g;null==d&&(d={});c=b.__super__.toJSON.apply(this,arguments);d.url&&(c.url=C.getOrganizationUrl(this.get("name")));_.extend(c,
this.premiumFeatures());c.accountStanding=oa.standingName(null!=(g=this.get("paidAccount"))?g.standing:void 0);return c};b.prototype.premiumFeatures=function(){var b,c,g,f,h;c={};h=oa.features(this.get("products"));g=0;for(f=h.length;g<f;g++)b=h[g],c["premium:"+b]=!0;return c};b.prototype.getPermLevelIconClass=function(b){var c;null==b&&(b=null!=(c=this.get("prefs"))?c.permissionLevel:void 0);return b};b.prototype.getPermLevelDisplayText=function(b){var c;null==b&&(b=null!=(c=this.get("prefs"))?c.permissionLevel:
void 0);return l.toTitleCase(b)};b.prototype.getPermLevelAltText=function(b){var c;null==b&&(b=null!=(c=this.get("prefs"))?c.permissionLevel:void 0);switch(b){case "private":return"This organization is private. It's not indexed or visible to those outside the org.";case "public":return"This organization is public. It's visible to anyone with the link and will show up in search engines like Google. Only those invited to the org can add and edit org boards."}};b.prototype.getRoleText=function(b){var c;
c="";this.isFeatureEnabled("superAdmins")&&(c=" Will have admin rights on all boards in this organization.");switch(b){case "admin":return"Can view, create and edit org boards, and change settings for the organization."+c;case "normal":return"Can view, create, and edit org boards, but not change settings.";default:return""}};return b}(Bc);nh=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.model=Ta;b.prototype.initialize=function(){this.bind("change:name",
this.sort)};b.prototype.comparator=function(b){var c;return(null!=(c=b.get("name"))?c.toUpperCase():void 0)||""};return b}(Ma);hb=function(c){function b(){this.submitProfile=k(this.submitProfile,this);this.cancelEditProfile=k(this.cancelEditProfile,this);this.editProfile=k(this.editProfile,this);this.membershipChange=k(this.membershipChange,this);this.renderDetails=k(this.renderDetails,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);na(Ld,b);b.prototype.initialize=
function(){this.makeDebouncedMethods("render");this.listenTo(this.model,"change:logoHash change:products change:paidAccount change:prefs",this.render);this.listenTo(this.model,"change:name change:displayName change:website change:desc",this.renderDetails);this.listenTo(this.model,"change:memberships",this.membershipChange);this.listenTo(this.model.memberList,"add remove reset",this.renderDebounced);this.memberTypeMe=this.model.getMemberType(y.me())};b.prototype.events={"click .js-change-org-logo":"changeLogoInProfile",
"click .js-edit-profile":"editProfile","click .js-submit-profile":"submitProfile","submit .js-profile-form":"submitProfile","click .js-cancel-edit-profile":"cancelEditProfile","click .tabbed-pane-nav-item-button:not(.active)":"switchSection"};b.prototype.render=function(){var b,c,g;b=this.model.toJSON({prefs:!0,url:!0,premium:!0});this.model.editable()&&(c=null!=(g=b.paidAccount)?g.standing:void 0,b.hasAccount=oa.hasAccount(c),b.accountActive=oa.active(b.paidAccount),b.accountProblem=oa.problem(c),
b.accountInactive=oa.inactive(c));b.isInOrg=this.model.isMember(y.me());b.hasBusinessClass=this.model.isPremium();b.isOrgAdmin=this.model.owned();b.isBusinessClassAdmin=this.model.isPremium()&&this.model.owned();b.pLevelAltText=this.model.getPermLevelAltText();b.pLevelDisplayText=this.model.getPermLevelDisplayText();b.websiteHref=l.sanitizeWebAddress(b.website);b.descriptionHtml=cb.textAsHtml(b.desc,{convertNewlines:!0,textData:b.descData});this.$el.html(v.fill("org_detail",b,{editable:this.model.editable()}));
this.renderDetails();this.model.isMember(y.me())&&this.renderAd();this.renderMainContent();return this};b.prototype.renderDetails=function(){var b;b=this.model.toJSON({prefs:!0,url:!0,premium:!0});b.hasBusinessClass=this.model.isPremium();b.isOrgAdmin=this.model.owned();b.pLevelAltText=this.model.getPermLevelAltText();b.pLevelDisplayText=this.model.getPermLevelDisplayText();b.websiteHref=l.sanitizeWebAddress(b.website);b.descriptionHtml=cb.textAsHtml(b.desc,{convertNewlines:!0,textData:b.descData});
this.$(".js-current-details").empty().append(v.fill("org_detail_profile_info",b,{editable:this.model.editable()}));this.model.editable()&&this.$(".js-profile-form").empty().append(v.fill("org_detail_profile_edit",b,{editable:this.model.editable()}));return this};b.prototype.renderAd=function(){var b,c,g;this.$el.removeClass("has-ad");b=this.$(".js-header-ad").empty();this.model.isPremium()?this.model.isJPS()||(g="ad_bc_banner_upgrade",c=this.model.owned()?"/"+this.model.get("name")+"/billing":"/"+
this.model.get("name")+"/plans",c={url:c},this.$el.addClass("has-ad"),b.append(v.fill(g,c))):(g="ad_bc_banner",c={url:"/"+this.model.get("name")+"/plans"},this.$el.addClass("has-ad"),b.append(v.fill(g,c)))};b.prototype.delegateEvents=function(d){return b.__super__.delegateEvents.call(this,_.extend({},b.prototype.events,d||this.events))};b.prototype.membershipChange=function(){var b;b=this.model.getMemberType(y.me());if(b!==this.memberTypeMe)return this.memberTypeMe=b,this.render()};b.prototype.setActiveView=
function(b){this.$(".tabbed-pane-nav-item-button").removeClass("active");this.$(b).addClass("active")};b.prototype.changeLogoInProfile=function(b){l.stop(b);n("Organization View","Detail Sidebar","Open Change Logo Menu - From Profile Image");w.toggle({elem:this.$(".js-change-org-logo"),top:$(b.target).parent().height()+10,view:this.model.getView(zh)})};b.prototype.editProfile=function(b){l.stop(b);this.$(".js-current-details").addClass("hide");this.$(".js-profile-form").removeClass("hide");n("Member View",
"Click Edit Profile")};b.prototype.cancelEditProfile=function(b){l.stop(b);this.$(".js-current-details").removeClass("hide");this.$(".js-profile-form").addClass("hide")};b.prototype.submitProfile=function(b){var c,g,f,h;l.stop(b);if(!this.disabled){b={};h=["displayName","name","website","desc"];g=0;for(f=h.length;g<f;g++)c=h[g],b[c]=this.$(".js-profile-form [name="+c+"]").val();b.name=b.name.toLowerCase().replace(/[^a-z0-9_]/g,"");this.disableSubmit();this.model.update(b,{waitForServer:!0},function(b){return function(d){b.disabled=
!1;b.$(".js-submit-profile").removeAttr("disabled");if(d)return b.$(".js-profile-form-error").removeClass("hide").text(d);b.$(".js-profile-form-error").addClass("hide");b.cancelEditProfile();return n("Organization","Changed Name and Details")}}(this))}};b.prototype.disableSubmit=function(){this.disabled=!0;this.$(".js-submit-profile").attr("disabled","disabled")};return b}(A);zh=function(c){function b(){this.removeLogo=k(this.removeLogo,this);this.uploadResult=k(this.uploadResult,this);this.startUpload=
k(this.startUpload,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Change Logo"};b.prototype.initialize=function(){return this.model.ond("change:logoHash",this.render)};b.prototype.events={"change .js-upload-logo":"startUpload","click .js-remove-logo":"removeLogo"};b.prototype.render=function(){var b;b=this.model.toJSON({prefs:!0});this.$el.html(v.fill("popover_org_logo",b));return this};b.prototype.startUpload=
function(b){var c,g,f,h;f=$(b.target);c=this.$(".js-error").hide();b=null!=(g=f[0])?null!=(h=g.files)?h[0]:void 0:void 0;if(null!=b&&!l.validFileSize(b))c.text("Images can not be larger than 10mb.").show(),n("Organization","Logo","Upload Error - File Too Large"),w.calcPos();else{if(!b&&f.val())return l.uploadFile(f,this.uploadResult);if(null!=b)return g=new FormData,g.append("token",y.myToken()),g.append("file",b),S({url:f.closest("form").attr("action"),data:g,type:"post",processData:!1,contentType:!1,
error:function(b){return function(d){return b.uploadResult(Error(d.responseText))}}(this),success:function(b){return function(){return b.uploadResult.apply(b,[null].concat(G.call(arguments)))}}(this),timeout:12E4})}};b.prototype.uploadResult=function(b){var c;c=this.$(".js-error").hide();if(b)return n("Organization","Logo","Error - "+b),c.show().text(b),w.calcPos();n("Organization","Logo","Use Uploaded - New");return w.hide()};b.prototype.removeLogo=function(b){l.stop(b);S({url:"/1/organizations/"+
this.model.id+"/logo",type:"DELETE",success:function(b){return function(){n("Organization","Logo","Remove Logo");return w.hide()}}(this)})};return b}(A);qh=function(c){function b(){this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.tagName="ul";b.prototype.className="org-list";b.prototype.initialize=function(b){this.model.organizationList.onAddRemove(this.render).ond("change:closed",this.render)};b.prototype.render=function(){var b,c,g,f;b=this.model;
$(this.el).html("");f=b.organizationList.models;b=0;for(g=f.length;b<g;b++)c=f[b],c=new Lh({model:c}),$(this.el).append(c.render().el);return this};return b}(A);Lh=function(c){function b(){this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.tagName="li";b.prototype.render=function(){var b;b=this.model.toJSON({prefs:!0,url:!0});b.visIconClass=this.model.getPermLevelIconClass();b.hasBusinessClass=this.model.isPremium();this.$el.html(v.fill("organization_list_item",
b));return this};return b}(A);Hh=function(c){function b(){this.showPrivateBoards=k(this.showPrivateBoards,this);this.closeBCIntro=k(this.closeBCIntro,this);this.renderMainContent=k(this.renderMainContent,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){b.__super__.initialize.apply(this,arguments);this.listenTo(this.model,"change",this.renderDebounced)};b.prototype.events={"click .js-show-other-private-boards-section":"showPrivateBoards","click .js-close-intro-helper":"closeBCIntro"};
b.prototype.renderMainContent=function(){var b;b=this.model.toJSON();b.isJPS=this.model.isJPS();b.hasBusinessClass=this.model.isPremium();b.isBusinessClassAdmin=this.model.isPremium()&&this.model.owned();this.model.getMembershipFor(y.me());this.$(".js-content").empty();b.isBusinessClassAdmin&&!y.me().isDismissed("BCIntro-"+this.model.id)&&this.$(".js-content").append(v.fill("org_bc_intro",b));this.$(".js-content").append(v.fill("org_profile",b,{editable:this.model.editable(),owned:this.model.owned()}));
this.renderBoards();this.setActiveView(".js-org-profile");return this};b.prototype.closeBCIntro=function(){y.me().dismiss("BCIntro-"+this.model.id);n("Organization View","Profile Page","Dismiss BC Intro Helper");this.renderMainContent();l.scrollToTop()};b.prototype.renderBoards=function(){this.$(".js-main-boards-section").empty();this.model.getMembershipFor(y.me())?this.$(".js-main-boards-section").append(this.subview(Uh,this.model).render().el).append(this.subview(Vh,this.model).render().el):this.$(".js-main-boards-section").append(this.subview(Wh,
this.model).render().el);this.model.isPremium()&&this.model.owned()&&this.$(".js-other-private-boards-section").empty().append(this.subview(Xh,this.model).render().el);return this};b.prototype.showPrivateBoards=function(b){l.stop(b);n("Organization View","Profile Page","Show Other Member's Private Boards");this.$(b.target).closest("a").addClass("hide");this.$(".js-other-private-boards-section").removeClass("hide")};return b}(hb);Dh=function(c){function b(){this.orgDeleteConfirm=k(this.orgDeleteConfirm,
this);this.renderMainContent=k(this.renderMainContent,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.events={"click .js-change-org-vis":"openChangeOrgVis","click .js-restrict-inv-org":"openChangeOrgInviteRestrictions","click .js-restrict-board-vis":"openChangeBoardVisRestrictions","click .js-confirm-delete-org":"orgDeleteConfirm","click .js-toggle-non-org-member-board-invites":"toggleNonOrgMemberBoardInvites"};b.prototype.renderMainContent=function(){var b;b=this.model.toJSON({prefs:!0,
url:!0,premium:!0});b.externalMembersDisabled=b.prefs.externalMembersDisabled;b.hasBusinessClass=this.model.isPremium();this.$(".js-content").html(v.fill("org_account",b,{editable:this.model.editable()}));this.setActiveView(".js-org-account");return this};b.prototype.openChangeOrgVis=function(b){l.stop(b);n("Organization View","Account Page","Open Change Org Visibility");w.toggle({elem:this.$(".js-change-org-vis"),top:50,view:this.model.getView(Ah)})};b.prototype.openChangeOrgInviteRestrictions=function(b){l.stop(b);
n("Organization View","Account Page","Open Restrict Org Invites by Email Domain");w.toggle({elem:this.$(".js-restrict-inv-org"),top:50,view:this.model.getView(Rh),autoPosition:!0})};b.prototype.toggleNonOrgMemberBoardInvites=function(b){l.stop(b);n("Organization View","Account Page","Toggle Allow Inviting Non-Org Members to Boards");w.toggle({elem:this.$(".js-toggle-non-org-member-board-invites"),top:50,view:this.model.getView(Eh)})};b.prototype.openChangeBoardVisRestrictions=function(b){l.stop(b);
n("Organization View","Account Page","Open Change Board Visibility");w.toggle({elem:this.$(".js-restrict-board-vis"),top:50,view:this.model.getView(Qh)})};b.prototype.orgDeleteConfirm=function(b){l.stop(b);n("Organization View","Account Page","Open Delete Org Dialog");this.$(".js-delete-org").attr("disabled","disabled");pa.toggle({elem:$(b.target),top:35,model:this.model,title:"Delete Organization?",text:"Deleting an organization is permanent. Are you sure you want to delete this organization? There is no undo. Boards with this organization won't be deleted. Your boards in this organization will appear in your personal boards list.",
confirmText:"Delete Forever",confirmBtnClass:"negate",fxConfirm:function(b){return function(d){return b.model.destroy({success:function(){n("Organization","Successfully Delete");w.hide();return C.navigate("/",{trigger:!0})}})}}(this)})};return b}(hb);Eh=function(c){function b(){this.togglePref=k(this.togglePref,this);this.render=k(this.render,this);this.getViewTitle=k(this.getViewTitle,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Inviting Non-Org Members"};
b.prototype.initialize=function(){return this.model.bind("change:prefs",this.render)};b.prototype.events={"click a":"togglePref"};b.prototype.render=function(){var b;b=this.model.toJSON({prefs:!0,url:!0,premium:!0});b.externalMembersDisabled=b.prefs.externalMembersDisabled;this.$el.html(v.fill("org_prefs_nonorg_invites",b,{editable:this.model.editable()}));return this};b.prototype.togglePref=function(b){l.stop(b);this.model.setPref("externalMembersDisabled",!this.model.getPref("externalMembersDisabled"))};
return b}(A);Jh=function(c){function b(){this.clickCreateNewExport=k(this.clickCreateNewExport,this);this["export"]=k(this["export"],this);this.renderExports=k(this.renderExports,this);this.renderMainContent=k(this.renderMainContent,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){return this.listenTo(this.model,"change:exports",this.renderExports)};b.prototype.events={"click .js-create-new-export":"clickCreateNewExport","click .js-download-export":"downloadExport"};
b.prototype.renderMainContent=function(){var b;b={};b.hasCSV=this.model.isFeatureEnabled("csvExport");this.$(".js-content").html(v.fill("org_export",b,{editable:this.model.editable()}));this.renderExports();this.setActiveView(".js-org-export");return this};b.prototype.renderExports=function(){var b,c,g,f,h,m;c=this.model.toJSON({prefs:!0});b=this.$(".js-list-exports").empty();if(_.isEmpty(c.exports))g=v.fill("org_export_empty");else{g="";m=c.exports;f=0;for(h=m.length;f<h;f++)c=m[f],c=_.clone(c),
c.size=cb.bytes(c.size),c.time=I.toLongString(I.parse(c.startedAt)),c.generating=null==c.exportUrl,g+=v.fill("org_export_item",c)}b.append(g);return this};b.prototype["export"]=function(b){return S({url:"/1/organizations/"+this.model.get("name")+"/exports",method:"post",data:{attachments:b},success:function(c){return function(g){n("Organization","Export",""+(b?"With Attachments":"Without Attachments"));if(null!=g)return c.model.get("exports").unshift(g),c.model.trigger("change:exports")}}(this),error:function(b){return function(b,
d){return-1<b.responseText.indexOf("in progress")?O.show("Your organization already has an export in progress","error","alert",5E3):d()}}(this)})};b.prototype.clickCreateNewExport=function(b){l.stop(b);return this.$("#includeAttachments").is(":checked")?this["export"](!0):this["export"](!1)};b.prototype.downloadExport=function(b){n("Organization","Download Export")};return b}(hb);Oh=function(c){function b(){this.openManageMembers=k(this.openManageMembers,this);this.searchMembers=k(this.searchMembers,
this);this.getGoogleAppsData=k(this.getGoogleAppsData,this);this.startLinkingGoogleApps=k(this.startLinkingGoogleApps,this);this.renderMembers=k(this.renderMembers,this);this.getMembers=k(this.getMembers,this);this.updateMembers=k(this.updateMembers,this);this.hideHidden=k(this.hideHidden,this);this.showAll=k(this.showAll,this);this.renderMainContent=k(this.renderMainContent,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){b.__super__.initialize.apply(this,
arguments);this.getGoogleAppsData();this.model.ond("change:memberships",this.updateMembers).ond("hideMember",this.renderMainContent).ond("unhideMember",this.renderMainContent)};b.prototype.events={"keyup .js-search":"searchMembers","click .js-link-google-apps":"startLinkingGoogleApps","click .js-show-all":"showAll","click .js-hide-hidden":"hideHidden","click .js-manage-members":"openManageMembers"};b.prototype.renderMainContent=function(){var b;b=this.model.toJSON({prefs:!0});b.canLinkGoogleApps=
this.model.isFeatureEnabled("googleApps")&&(!this.model.get("prefs").associatedDomain||this.googleAppsFetchFailed)&&this.model.editable();b.canShowAll=this.model.isFeatureEnabled("googleApps")&&null!=this.mappingsData&&_.find(this.mappingsData,function(b){return function(d){var c;return null!=(c=b.Member.findOne("gMail",d.gMail))?c.get("hidden"):void 0}}(this));b.showingAll=this.showingAll;this.$(".js-content").html(v.fill("org_members",b,{editable:this.model.editable()}));this.setActiveView(".js-org-members");
this.renderMembers(this.getMembers());return this};b.prototype.showAll=function(){this.showingAll=!0;return this.renderMainContent()};b.prototype.hideHidden=function(){this.showingAll=!1;return this.renderMainContent()};b.prototype.updateMembers=function(){this.renderMembers(this.getMembers());return this.getGoogleAppsData()};b.prototype.getMembers=function(){var b,c,g,f,h,m;g=_.clone(this.model.memberList.models);if(null!=this.mappingsData){m=this.mappingsData;c=0;for(h=m.length;c<h;c++)f=m[c],null!=
f.idMember?(b=this.Member.get(f.idMember),null==b?b=new aa({id:f.idMember,fullName:f.fullName,gMail:f.gMail,initials:f.initials,hidden:f.hidden},{modelCache:this.modelCache}):b.set("gMail",f.gMail)):(b=this.Member.findOne("gMail",f.gMail),null==b&&(b=new aa({fullName:f.fullName,gMail:f.gMail,initials:f.initials,hidden:f.hidden},{modelCache:this.modelCache}),f.idMember=b.cid)),0>D.call(g,b)&&g.push(b)}f=_.sortBy(g,function(b){return b.get("fullName")});b=[];c=0;for(h=f.length;c<h;c++)g=f[c],"deactivated"===
this.model.getMemberType(g)&&b.push(g);c=[];h=0;for(m=f.length;h<m;h++)g=f[h],"virtual"===this.model.getMemberType(g)&&c.push(g);return _.difference(f,c,b).concat(b).concat(c)};b.prototype.renderMembers=function(b){var c,g,f;c=this.$(".js-member-list").empty();if(0===b.length)c.append("<p class='quiet gutter' style='padding: 15px 0;'>No results.</p>");else{g=null!=this.mappingsData;var h,m,k;k=[];h=0;for(m=b.length;h<m;h++)f=b[h],k.push(this.subview(Nh,f,{org:this.model,showAll:this.showingAll,googleAppsLoaded:g}));
this.appendSubviews(k,c)}w.hide();return this};b.prototype.startLinkingGoogleApps=function(b){l.stop(b);n("Organization View","Members Page","Start Linking Google Apps Domain");return $(b.target).hasClass("disabled")?(l.stop(b),!1):w.toggle({elem:this.$(".js-link-google-apps"),top:40,view:this.model.getView(Kh)})};b.prototype.getGoogleAppsData=function(){if(this.model.isLinkedToGoogleApps()&&this.model.editable())return S({url:"/1/organizations/"+this.model.id+"/googleApps/mappings",success:function(b){return function(c){b.mappingsData=
c;return b.renderMainContent()}}(this),error:function(b){return function(){b.$(".js-google-apps-linker").show();return b.googleAppsFetchFailed=!0}}(this)})};b.prototype.searchMembers=function(b){var c,g,f,h,m,k,u;b=$(this.el).find(".js-search").val().trim().toLowerCase();if(this.oldTerm!==b){this.oldTerm=b;f=b.split(/\s+/);h=_.map(f,function(b,d){return d===f.length-1?RegExp("^"+l.escapeForRegex(b),"i"):RegExp("^"+l.escapeForRegex(b)+"$","i")});c=[];u=this.getMembers();m=0;for(k=u.length;m<k;m++)b=
u[m],g=l.getMemNameArray(this.modelCache,b),_.all(h,function(b){return _.find(g,function(d){return b.test(d)})})&&c.push(b);this.renderMembers(c)}};b.prototype.openManageMembers=function(b){l.stop(b);n("Organization View","Members Page","Open Manage Members");w.toggle({elem:this.$(".js-manage-members"),top:35,view:Bh,options:{model:this.model}})};return b}(hb);Kh=function(c){function b(){this.render=k(this.render,this);this.getViewTitle=k(this.getViewTitle,this);return b.__super__.constructor.apply(this,
arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Link Google Apps Domain"};b.prototype.events={"click .js-link":"link"};b.prototype.render=function(){var b;b=this.model.toJSON();this.$el.html(v.fill("org_link_ga_helper",b,{editable:this.model.editable()}));return this};b.prototype.link=function(){n("Organization View","Members Page","Google Apps Marketplace link");ka.enabled()&&ka.set("idOrganizationLinking",this.model.id)};return b}(A);Nh=function(c){function b(){this.reactivateMember=
k(this.reactivateMember,this);this.removeOrDeactivate=k(this.removeOrDeactivate,this);this.viewActivity=k(this.viewActivity,this);this.changeRole=k(this.changeRole,this);this.inviteToOrg=k(this.inviteToOrg,this);this.hideMember=k(this.hideMember,this);this.unhideMember=k(this.unhideMember,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="member-list-item-detail clearfix";b.prototype.initialize=function(){this.org=this.options.org;
this.model.ond("change",this.render);this.org.ond("change:memberships",this.render)};b.prototype.events={"click .js-change-role":"changeRole","click .js-remove-or-deactivate":"removeOrDeactivate","click .js-reactivate":"reactivateMember","click .js-invite-to-org":"inviteToOrg","click .js-view-activity":"viewActivity","click .js-hide-member":"hideMember","click .js-unhide-member":"unhideMember"};b.prototype.render=function(){var b,c,g;c=this.org.getMemberType(this.model);b=this.model.toJSON();b.canRemove=
this.model.getMembershipData(this.org).canRemove;b.orgMemberType=l.toTitleCase(c);b.isMe=y.isMe(this.model);b.ownsOrg=this.org.owned();b.orgIsBC=this.org.isPremium();b.isDeactivated="deactivated"===c;b.isAppsMember=null!=this.model.get("gMail");b.isOrgMember="public"!==c;b.isVirtual="virtual"===c;b.isOrganizationAdmin="admin"===c;b.showGoogleApps=this.org.isLinkedToGoogleApps()&&this.org.editable()&&(null!=(g=this.options)?g.googleAppsLoaded:void 0);this.org.owned()&&(b.allowTypeChange="deactivated"!==
c&&"unconfirmed"!==c&&"virtual"!==c,b.allowReactivate="deactivated"===c,b.showActivity="virtual"!==c);this.$el.html(v.fill("member_list_item_detail",b,{},{member:v.member}));this.$el.removeClass("deactivated not-apps-member not-org-member");b.isDeactivated&&this.$el.addClass("deactivated");b.showGoogleApps&&(b.isAppsMember||this.$el.addClass("not-apps-member"),b.isOrgMember||this.$el.addClass("not-org-member"));I.update(this.el);!b.isOrgMember&&(this.model.get("hidden")&&!this.options.showAll)&&this.$el.addClass("hide");
return this};b.prototype.unhideMember=function(){if(this.model.get("gMail"))return this.model.set("hidden",!1),this.org.trigger("unhideMember"),S({url:"/1/organization/"+this.org.id+"/hiddenGoogleAppsMembers",type:"delete",data:{gMail:this.model.get("gMail")}})};b.prototype.hideMember=function(){if(this.model.get("gMail"))return this.model.set("hidden",!0),this.org.trigger("hideMember"),S({url:"/1/organization/"+this.org.id+"/hiddenGoogleAppsMembers",type:"post",data:{gMail:this.model.get("gMail")}})};
b.prototype.inviteToOrg=function(b){n("Organization View","Members Page","Add Google Apps Member");return this.model.id?S({url:"/1/organization/"+this.org.id+"/members/"+this.model.id,type:"put",data:{type:"normal"},dataType:"json",error:function(b){return function(b,d){O.show(b.responseText,"error","alert",3E3);n("Invitations","Error: "+b.responseText)}}(this)}):S({url:"/1/organizations/"+this.org.id+"/members",type:"put",data:{fullName:this.model.get("fullName"),email:this.model.get("gMail"),type:"normal"},
dataType:"json",success:function(b){return function(){return O.show("Invitation sent","info","alert",3E3)}}(this),error:function(b){return function(b,d){O.show(b.responseText,"error","alert",3E3);n("Invitations","Error: "+b.responseText)}}(this)})};b.prototype.changeRole=function(b){l.stop(b);n("Organization View","Members Page","Change Role Button");w.toggle({elem:this.$(".js-change-role"),top:35,view:this.model.getView(kh,"",{parent:this.org})})};b.prototype.viewActivity=function(b){l.stop(b);n("Organization View",
"Members Page","View Member Activity");w.toggle({elem:this.$(".js-view-activity"),top:35,view:this.model.getView(Ch,"",{org:this.org})})};b.prototype.removeOrDeactivate=function(b){this.$(".js-remove-or-deactivate").hasClass("disabled")||(l.stop(b),n("Organization View","Members Page","Remove or Deactivate Member Button"),w.toggle({elem:this.$(".js-remove-or-deactivate"),top:35,view:this.model.getView(Sh,"",{org:this.org})}))};b.prototype.reactivateMember=function(b){l.stop(b);n("Organization View",
"Members Page","Reactivate");S({url:"/1/organizations/"+this.org.id+"/members/"+this.model.id+"/deactivated",type:"PUT",data:{value:!1}})};return b}(A);Ch=function(c){function b(){this.viewBoards=k(this.viewBoards,this);this.viewCards=k(this.viewCards,this);this.render=k(this.render,this);this.getViewTitle=k(this.getViewTitle,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Org Activity for "+this.model.get("fullName")};b.prototype.initialize=
function(){return this.org=this.options.org};b.prototype.events={"click .js-view-org-boards-for-member":"viewBoards","click .js-view-member-org-cards":"viewCards"};b.prototype.render=function(b){var c,g,f,h,m,k;g=this.model.toJSON();c=0;m=_.filter(this.org.boardList.models,function(b){return function(b){return!b.get("closed")}}(this));f=0;for(h=m.length;f<h;f++)b=m[f],(k=this.model,0<=D.call(b.memberList.models,k))&&c++;g.boardCount=l.formatCount(c,"Board",!0);g.hasBoards=0<c;this.org.isFeatureEnabled("orgCards")&&
(g.orgCardsUrl=C.getOrganizationMemberCardsUrl(this.org.get("name"),g.username));this.$el.html(v.fill("org_member_activity",g));I.update(this.el);return this};b.prototype.viewCards=function(){return n("Organization View","Members Page","Activity - View Org Cards")};b.prototype.viewBoards=function(b){l.stop(b);n("Organization View","Members Page","Activity - View Boards");w.pushView({view:this.model.getView(Gh,""+this.model.username+"-boards-for-"+this.org.name,{parent:this.org})})};return b}(A);Gh=
function(c){function b(){this.render=k(this.render,this);this.getViewTitle=k(this.getViewTitle,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Boards for "+this.model.get("fullName")};b.prototype.initialize=function(){this.org=this.options.parent};b.prototype.render=function(){var b,c,g,f,h,m,k;f=this.model.toJSON();g=[];k=_.filter(this.org.boardList.models,function(b){return function(d){return _.contains(d.memberList.models,b.model)&&!d.get("closed")}}(this));
h=0;for(m=k.length;h<m;h++)c=k[h],b=c.toJSON(),b.memberType=l.toTitleCase(c.getMemberType(this.model)),b.url=c.getUrl(),g.push(b);f.boards=g;this.$el.html(v.fill("org_boards_for_member",f));return this};return b}(A);Sh=function(c){function b(){this.removeMember=k(this.removeMember,this);this.deactivateMember=k(this.deactivateMember,this);this._checkIfLostVisibility=k(this._checkIfLostVisibility,this);this.render=k(this.render,this);this.getViewTitle=k(this.getViewTitle,this);return b.__super__.constructor.apply(this,
arguments)}s(b,c);b.prototype.getViewTitle=function(){return this.org.isPremium()?"Remove or Deactivate Member":"Remove Member"};b.prototype.initialize=function(){return this.org=this.options.org};b.prototype.events={"click .js-deactivate":"deactivateMember","click .js-soft-remove":"removeMember"};b.prototype.render=function(){var b,c;c=this.org.getMemberType(this.model);b=this.model.toJSON();b.orgMemberType=l.toTitleCase(c);b.ownsOrg=this.org.owned();b.orgIsBC=this.org.isPremium();b.isDeactivated=
"deactivated"===c;b.isOrgMember="Public"!==b.orgMemberType;b.isVirtual="Virtual"===b.orgMemberType;b.canDeactivate=this.org.isPremOrgAdmin(y.me())&&!b.isVirtual&&!b.isDeactivated;b.isMe=y.isMe(this.model);this.$el.html(v.fill("org_remove_or_deactivate_member",b));return this};b.prototype._checkIfLostVisibility=function(){if(y.isMe(this.model))return C.navigate("/",{trigger:!0})};b.prototype.deactivateMember=function(b){l.stop(b);S({url:"/1/organizations/"+this.org.id+"/members/"+this.model.id+"/deactivated",
type:"PUT",data:{value:!0},success:function(b){return function(){n("Organization","Deactivate Member From Organization");w.hide();return b._checkIfLostVisibility()}}(this)})};b.prototype.removeMember=function(b){l.stop(b);$(this.el).find("#hardRemove").is(":checked")||"deactivated"===this.org.getMemberType(this.model)?(b="Hard Remove",this.org.memberList.remove(this.model,{mass:!0})):(b="Soft Remove",this.org.memberList.remove(this.model));n("Organization","Remove Member From Organization",b);w.hide();
this._checkIfLostVisibility()};return b}(A);Mh=function(c){function b(){this.renderCards=k(this.renderCards,this);this.renderMainContent=k(this.renderMainContent,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.renderMainContent=function(){var b;if(!this.model.isFeatureEnabled("orgCards"))return C.displayErrorPage({errorType:"notFound"});b=this.model.toJSON({prefs:!0});b.memberData=this.options.member.toJSON();b.memberData.bioHtml=cb.textAsHtml(this.options.member.get("bio"),
{textData:this.options.member.get("bioData")});this.setActiveView(".js-org-members");b.members=[];this.$(".js-content").html(v.fill("org_member_cards",b,{editable:this.model.editable()},{member:v.member,member_profile:v.member_profile_info}));_.defer(function(b){return function(){return b.renderCards()}}(this));return this};b.prototype.renderCards=function(){var b,c,g,f,h,m;c=this.Board.find(function(b){return function(d){var c;return d.idOrganization===(null!=(c=b.model)?c.idOrganization:void 0)&&
!d.get("closed")}}(this));f=!1;h=0;for(m=c.length;h<m;h++)b=c[h],g=this.Card.find(function(c){return function(e){var f;return e.get("idBoard")===b.id&&!e.get("closed")&&(f=c.options.member.id,0<=D.call(e.get("idMembers"),f))}}(this)),g.length&&(f=!0,this.$(".js-cards").append(this.subview(ah,b,{hideOrg:!0}).render(g).el));f||(c=this.model.isPremOrgAdmin(y.me())?"This member is not added to any cards in this organization.":"This member is not added to any cards you are able to see.",c={message:c,classes:"gutter",
style:"padding: 60px 10px;"},this.$(".js-content").append(v.fill("empty_list",c)));return this};return b}(hb);Ph=function(c){function b(){this.pollForCCAuth=k(this.pollForCCAuth,this);this.hideAuthorizing=k(this.hideAuthorizing,this);this.delayShowAuthorizing=k(this.delayShowAuthorizing,this);this.renewExpiringYearly=k(this.renewExpiringYearly,this);this.reactivate=k(this.reactivate,this);this.renderMainContent=k(this.renderMainContent,this);return b.__super__.constructor.apply(this,arguments)}s(b,
c);b.prototype.events={"click .js-learn-more-plans":"learnMore","click .js-upgrade-to-business-class":"upgrade","click .js-reactivate":"reactivate","click .js-renew-expiring-yearly-business-class-sub":"renewExpiringYearly"};b.prototype.renderMainContent=function(){var b;b=this.model.toJSON({prefs:!0});b.activeAccount=this.model.isPremium();b.isJPS=this.model.isJPS();b.cancelledAccount=oa.cancelled(b.paidAccount);b.isBCAdmin=this.model.isPremOrgAdmin(y.me());b.isOrgAdmin=this.model.owned();null!=b.paidAccount&&
(b.willExpire=oa.willExpire(b.paidAccount));b.willExpire&&(b.yearlyExpirationDate=I.toLongDateString(b.paidAccount.expirationDates[b.paidAccount.products[0]]));b.cardUrl="#";b.isOrgAdmin&&(b.cardUrl="/"+b.name+"/billing/card/businessClassMonthly");b.bcMonthlyPrice=oa.formatPrice("businessClassMonthly");b.bcYearlyPrice=oa.formatPrice("businessClassYearly");this.$(".js-content").html(v.fill("org_plans",b,{editable:this.model.editable()}));return this};b.prototype.learnMore=function(b){return n("Organization View",
"Plans View","Click Learn More Link")};b.prototype.upgrade=function(b){if(!$(b.target).hasClass("disabled"))return n("Organization View","Plans View","Click Upgrade Button")};b.prototype.reactivate=function(b){l.stop(b);n("Organization View","Plans View","Reactivate Business Class - Monthly");this.delayShowAuthorizing();S({url:"/1/organizations/"+this.model.id+"/paidAccount/reactivate",type:"POST",data:{products:[35]},success:function(b){return function(d){n("Organization","Sucessfully Reactivate Business Class - Monthly");
return b.pollForCCAuth()}}(this)})};b.prototype.renewExpiringYearly=function(b){n("Organization View","Plans View","Renew Expiring Yearly Business Class Subscription");S({url:"/1/organizations/"+this.model.id+"/paidAccount/products",type:"POST",data:{products:[36]},success:function(b){return function(d){n("Organization","Successfully Renewed Expiring Yearly Business Class Subscription");return b.model.set(d)}}(this)})};b.prototype.delayShowAuthorizing=function(){this.finishedAuth=!1;return _.delay(function(b){return function(){if(!b.finishedAuth)return l.scrollToTop(),
O.show("Authorizing...","info","authorizing")}}(this),1E3)};b.prototype.hideAuthorizing=function(){this.finishedAuth=!0;return O.hide("authorizing")};b.prototype.pollForCCAuth=function(){return Oc.pollForCCAuth.call(this)};return b}(hb);pe=function(){function c(){}c.prototype.pricing={monthlyProduct:"businessClassMonthly",yearlyProduct:"businessClassYearly"};c.prototype.features=oa;c.prototype.productPrefix="businessClass";return c}();oe=na(Gd,pe,oe=function(c){function b(){this.initialize=k(this.initialize,
this);this.paidAccountLoader=k(this.paidAccountLoader,this);this.renderBanner=k(this.renderBanner,this);this.changeCardUrl=k(this.changeCardUrl,this);var d;this.events=_.extend({"click .js-open-confirm-jps-upgrade":"confirmUpgrade"},null!=(d=this.events)?d:{});b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.apiPath="organizations";b.prototype.productName="Business Class";b.prototype.changeCardUrl=function(){return C.getOrganizationBillingCardUrl(this.model)};b.prototype.productIconClass=
function(){return"briefcase"};b.prototype.renderBanner=function(){var b,c;this.model.isPremium()&&!this.model.isJPS()&&(c=this.model.toJSON(),b=c.billableMemberCount,null!=b&&(c.formattedMemberCount=l.formatCount(b,"member"),this.model.isPremiumMonthly()?(c.price=5*b,c.monthlyUpgrade=!0):this.model.isPremiumYearly()&&(c.price=45*b,b=oa.getPrice(this.model.get("products")),c.price<b?c.yearlyCheaperUpgrade=!0:c.yearlyUpgrade=!0)),this.$(".js-content").prepend(v.fill("jps_upgrade_banner",c)));return this};
b.prototype.confirmUpgrade=function(b){l.stop(b);w.toggle({elem:$(b.target),top:50,view:Ih,options:{model:this.model,modelCache:this.modelCache}})};b.prototype.paidAccountLoader=function(b){return M["for"](this.modelCache).loadOrganizationPaidAccount(this.model.id,b)};b.prototype.initialize=function(){b.__super__.initialize.apply(this,arguments);return this.setup()};return b}(hb));Ih=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Upgrade Your Organization"};
b.prototype.events={"click .js-upgrade-bc":"upgradeToPerUser"};b.prototype.render=function(){var b,c;c=this.model.toJSON();b=c.billableMemberCount;null!=b&&(c.formattedMemberCount=l.formatCount(b,"member"),this.model.isPremiumMonthly()?(c.price=5*b,c.monthlyUpgrade=!0):this.model.isPremiumYearly()&&(c.price=45*b,b=oa.getPrice(this.model.get("products")),c.price<b?c.yearlyCheaperUpgrade=!0:c.yearlyUpgrade=!0));this.$el.html(v.fill("popover_confirm_jps_upgrade",c));return this};b.prototype.upgradeToPerUser=
function(){var b;if(this.model.isPremium())return b="monthly"===oa.getInterval(this.model.get("products"))?[96]:[97],S({url:""+this.model.urlRoot+"/"+this.model.id+"/paidAccount/products",type:"POST",data:{products:b},success:function(b){return function(d){n(b.model.typeName,"Successfully Switched to Per-User");return b.model.set(d)}}(this)})};return b}(A);Fh=function(c){function b(){this.getFormOpts=k(this.getFormOpts,this);this.renderMainContent=k(this.renderMainContent,this);return b.__super__.constructor.apply(this,
arguments)}s(b,c);b.prototype.renderMainContent=function(){var b;b=this.getFormOpts();this.$(".js-content").empty().append((new Oc(b)).render().el);this.setActiveView(".js-billing");return this};b.prototype.getFormOpts=function(){var b,c,g,f,h;b={model:this.model,action:"js-submit-change-credit-card",productName:"Business Class"};oa.hasAccount(null!=(c=this.model.get("paidAccount"))?c.standing:void 0)?_.extend(b,{productNumber:null!=(g=null!=(f=this.model.get("paidAccount"))?f.products[0]:void 0)?
g:oa.getProductNumber("businessClassMonthly"),formAreas:{creditCard:!0},action:"js-submit-change-credit-card"}):_.extend(b,{productNumber:null!=(h=oa.getProductNumber(this.options.product))?h:oa.getProductNumber("businessClassMonthly"),formAreas:{creditCard:!0,billingContactHidden:!0,subscribingTo:!0,billingOptions:!0},action:"js-submit-create-paid-account"});return b};return b}(hb);Oc=na(pe,Oc=function(c){function b(){this.billingView=k(this.billingView,this);this.profileView=k(this.profileView,
this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.profileView=function(){return C.organizationBoardsView(this.model.get("name"),this.model.id)};b.prototype.billingView=function(){return C.organizationBillingView(this.model.get("name"))};return b}(Hd));Bh=function(c){function b(){this.willBePopped=k(this.willBePopped,this);this.willBePushedDown=k(this.willBePushedDown,this);this.canRemoveInvitation=k(this.canRemoveInvitation,this);this.removeInvitation=k(this.removeInvitation,
this);this.clearSearchResults=k(this.clearSearchResults,this);this.sendEmailInvite=k(this.sendEmailInvite,this);this.renderEmailInviteToSearchResults=k(this.renderEmailInviteToSearchResults,this);this.addMember=k(this.addMember,this);this.keydownEvent=k(this.keydownEvent,this);this.search=k(this.search,this);this.searchPaste=k(this.searchPaste,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);na(Jd,Nc,b);b.prototype.getViewTitle=function(){return"Members"};
b.prototype.initialize=function(){this.savedSearch=""};b.prototype.events={"click .js-search-results .js-select-member":"addMember","paste .js-search-input":"searchPaste","click .js-remove-invitation":"removeInvitation","click .js-send-email-invite":"sendEmailInvite","submit .js-email-data":"sendEmailInvite","click .js-open-option":"openOption","mouseenter .js-select-member":"hoverMember"};b.prototype.render=function(){var b;this.$el.html(v.fill("manage_members",{canInviteMembers:!0,canAddMembers:!0,
placeholder:"Search or add email address"},{editable:this.model.editable()}));null!=(b=Pc.addMemberToOrganizationAd(y.me(),this.model))&&this.$(".js-ad").html(this.model.getView(b).render().el);_.delay(function(b){return function(){b.input=b.$(".js-search-input");b.input.click(function(b){return l.stop(b)}).keyup(_.debounce(b.search,500)).keydown(b.keydownEvent).focus();if(b.savedSearch)return b.input.val(b.savedSearch),b.search(),b.savedSearch=""}}(this),10);this.lastSearch="";this.loadingEl=this.$(".js-loading");
this.helperEl=this.$(".js-helper");w.calcPos();return this};b.prototype.searchPaste=function(){this.loadingEl.show();return this.input.keyup()};b.prototype.search=function(b){var c;null!=this.lastSearch&&this.lastSearch===this.input.val()||(this.lastSearch=this.input.val(),c=this.input.val().toLowerCase().trim(),""===c?this.clearSearchResults():(this.loadingEl.show(),S({url:"/1/search/members/",type:"get",data:{idOrganization:this.model.id,query:c,_cache:l.newestId(this.model.get("memberships"))},
dataType:"json",success:function(b){return function(d){return b.renderSearchResults(c,d)}}(this)})))};b.prototype.keydownEvent=function(b){var c,g;if(!(16===(c=b.keyCode)||18===c||17===c||39===c||37===c||27===c))if(13===b.keyCode)0<this.$(".js-search-results .js-list .selected .js-select-member").length?(l.stop(b),this.$(".js-search-results .js-list .selected:first .js-select-member").click()):0<this.$(".js-search-results .js-list .email-invite").length&&(l.stop(b),this.$(".email-invite:first").click());
else if(38===(g=b.keyCode)||40===g)l.stop(b),l.navMenuList(this.$(".js-search-results .js-list"),"li",b.keyCode)};b.prototype.addMember=function(b){var c,g;l.stop(b);0<$(b.target).closest(".item.disabled").length||(this.clearSearchResults(),c=$(b.target).closest(".js-select-member").attr("idMember"),g=this.Member.get(c),S({url:"/1/organization/"+this.model.id+"/members/"+c,type:"put",data:{type:"normal"},dataType:"json",success:function(b){return function(d){if(null==d.token&&!b.model.memberList.find(function(b){return b.id===
c}))return b.model.memberList.add(g),n("Invitations","Add Member to Organization","Role: Member")}}(this),error:function(b){return function(d,c){O.show(d.responseText,"error","alert",3E3);b.input.focus().select();n("Invitations","Error: "+d.responseText)}}(this)}))};b.prototype.renderEmailInviteToSearchResults=function(b){var c;c=_.compact(l.removeDomainFromEmailAddress(b.email).split(/[\s\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/)).join(" ").replace(/[\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,"");
b.fullName=l.toTitleCase(c);return this.$(".js-uninvited-search-results").append(v.fill("invite_add_name",b,"",{member:v.member})).show()};b.prototype.sendEmailInvite=function(b){var c,g;l.stop(b);c=this.$(".js-send-email-invite");null==c.attr("disabled")&&(b=this.$(".js-email-data .js-full-name"),g=b.val().trim(),l.validName(g)?(b={fullName:g,email:this.$(".js-email-data .js-email").val().trim(),type:"normal"},c.attr("disabled","disabled"),S({url:"/1/organizations/"+this.model.id+"/members",type:"put",
dataType:"json",data:b,success:function(b){return function(d){var g;g=new aa(d,{modelCache:b.modelCache});b.model.memberList.get(g.id)||b.model.memberList.add(g);n("Invitations","Send Email Org Invite to New Member","Role: "+d.type);TRMixpanel.trackInvitation("org");c.removeAttr("disabled");return w.hide()}}(this),error:function(b){return function(d,g){b.$(".js-uninvited-search-results").empty().hide();O.show(d.responseText,"error","alert",3E3);c.removeAttr("disabled");b.input.focus().select();n("Invitations",
"Error: "+d.responseText)}}(this)})):(l.setCaretAtEnd(b),$(".js-name-error").show()))};b.prototype.clearSearchResults=function(){this.helperEl.show();this.lastSearch="";this.input.val("").focus().select();this.$(".js-uninvited-search-results").hide().empty();return $(".js-search-results").hide()};b.prototype.removeInvitation=function(b){b=$(b.currentTarget).closest(".invitation").data("id");ib.prototype["delete"]({model:this.model,idInvitation:b,success:function(b){return function(){n("Invitations",
"Delete Organization Invite");return b.search}}(this)});l.setCaretAtEnd(this.input[0])};b.prototype.canRemoveInvitation=function(b){return b.get("idMemberInviter")===y.myId()||this.model.owned()};b.prototype.willBePushedDown=function(){return this.savedSearch=this.input.val()};b.prototype.willBePopped=function(){return this.savedSearch=""};return b}(A);Pb=function(c){function b(){this.getValue=k(this.getValue,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=
function(){return"Create Organization"};b.prototype.events={"click .js-save":"submit","submit form":"submit"};b.prototype.getValue=function(b){var c;return null!=(c=this.$("[name="+b+"]").val())?c.trim():void 0};b.prototype.render=function(){this.$el.html(v.fill("org_create"));return this};b.prototype.submit=function(b){var c,g,f,h;l.stop(b);b={};h=["displayName","desc"];g=0;for(f=h.length;g<f;g++)c=h[g],b[c]=this.getValue(c);y.me().organizationList.create(b,{modelCache:this.modelCache,silent:!0,
success:function(b){return function(b){C.organizationBoardsView(b.get("name"),b.id);w.hide()}}(this)})};return b}(A);Ah=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Select Visibility"};b.prototype.tagName="ul";b.prototype.className="pop-over-list";b.setVisibility=function(b){return function(c){l.stop(c);n("Organization","Changed Visibility");this.model.setPref("permissionLevel",b);return w.hide()}};b.prototype.events=
{"click .js-select-members":b.setVisibility("private"),"click .js-select-public":b.setVisibility("public")};b.prototype.render=function(){var b;b=this.model.toJSON({prefs:!0});b["permissionLevel_"+this.model.get("prefs").permissionLevel]=!0;b.publicText=this.model.getPermLevelAltText("public");b.privateText=this.model.getPermLevelAltText("private");this.$el.html(v.fill("change_org_vis",b));return this};return b}(A);Rh=function(c){function b(){this.removeRestriction=k(this.removeRestriction,this);
this.addRestriction=k(this.addRestriction,this);this.renderRestrictions=k(this.renderRestrictions,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Org Membership Restrictions"};b.prototype.initialize=function(){return this.model.ond("change:prefs",this.renderRestrictions)};b.prototype.events={"keydown .js-input-restricted":"addRestriction","click .js-restricted-address":"removeRestriction"};b.prototype.render=function(){var b,c;b=this.model.toJSON({prefs:!0});
b.hasRestrictions=0<(null!=(c=this.model.get("prefs").orgInviteRestrict)?c.length:void 0);this.$el.html(v.fill("org_prefs_restrict_invites",b));this.renderRestrictions();return this};b.prototype.renderRestrictions=function(){var b,c,g,f,h;b=this.$(".js-list");b.empty();if(0<(null!=(c=this.model.get("prefs").orgInviteRestrict)?c.length:void 0)){h=this.model.get("prefs").orgInviteRestrict;g=0;for(f=h.length;g<f;g++)c=h[g],b.append(v.fill("org_pref_restriction",{restriction:c}));return this.$(".js-restriction-list").show()}return this.$(".js-restriction-list").hide()};
b.prototype.addRestriction=function(b){var c;if(13===b.keyCode)return c=$(b.target).val(),/^@/.test(c)?c="*"+c:-1===c.indexOf("@")&&0<c.indexOf(".")&&(c="*@"+c),this.$(".js-loading").removeClass("hide"),S({url:"/1/organizations/"+this.model.id+"/prefs/orgInviteRestrict",type:"put",data:{value:c},dataType:"json",success:function(c){return function(){$(b.target).val("").select().focus();c.$(".js-loading").addClass("hide");return c.$(".js-errors").hide()}}(this),error:function(b){return function(d){b.$(".js-loading").addClass("hide");
return b.$(".js-errors").text(d.responseText).show()}}(this)})};b.prototype.removeRestriction=function(b){var c;c=$(b.target).closest("a").attr("data-pattern");$(b.target).closest("li").remove();return S({url:"/1/organizations/"+this.model.id+"/prefs/orgInviteRestrict",type:"delete",data:{value:c},dataType:"json",success:function(b){return function(){b.$(".js-input-restricted").select().focus();return b.$(".js-errors").hide()}}(this)})};return b}(A);Qh=function(c){function b(){this.render=k(this.render,
this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Board Creation Restriction"};b.prototype.initialize=function(){return this.model.ond("change:prefs",this.render)};b.prototype.events={"click a":"changeRestriction"};b.prototype.render=function(){var b;b=this.model.toJSON({prefs:!0});this.$el.html(v.fill("org_prefs_vis",b));return this};b.prototype.changeRestriction=function(b){var c;c=$(b.target);b="boardVisibilityRestrict/"+c.closest("ul").attr("data-vis");
c=c.attr("data-restriction");return this.model.setPref(b,c)};return b}(A);window.cchelper=function(){var c,b,d;c={name:"Mr. Magick CC",cardNumber:5462311111542453,cvv:123,streetAddress1:"Main Street",city:"Home Town",state:"NY",zipCode:12345,country:"US",acceptTOS:!0};for(b in c)d=c[b],$("input[name="+b+"]").val(d);c={expMonth:12,expYear:20};for(b in c)d=c[b],$("select[name="+b+"]").val(d);return $("input[name=acceptTOS]").prop("checked",!0)};xh=function(c){function b(){this.chooseOrg=k(this.chooseOrg,
this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Choose an Organization"};b.prototype.events={"click .js-select-org":"chooseOrg"};b.prototype.render=function(){var b,c,g,f;b={};f=function(){var b,d,f,k;f=this.model.organizationList.models;k=[];b=0;for(d=f.length;b<d;b++)c=f[b],c.isPremium()||(g=c.toJSON({prefs:!0}),g.product=this.options.product,g.isAdmin=c.owned(),g.altText="private"===g.permissionLevel?"This org is private. It's only viewable to people who have been invited.":
"This org is public. It's viewable to anybody on the Internet with the link.",k.push(g));return k}.call(this);b.orgs=_.sortBy(f,function(b){return b.name});b.hasBCOrgs=_.any(this.model.organizationList.models,function(b){return b.isPremium()});b.hasOrgs=0<b.orgs.length;b.isLoggedIn=y.isLoggedIn();this.$el.html(v.fill("power_up_org_picker",b));return this};b.prototype.chooseOrg=function(b){return n("Business Class Promo Page","Choose Org via 'Add This'","Product: "+this.options.product)};return b}(A);
yh=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.events={"click .js-select-org":"chooseOrg","click .js-disabled":"stop","click .js-create-org":"createOrg"};b.prototype.render=function(){var b,c,g,f,h,m,k;b={};var u,x,n,s;n=this.model.organizationList.models;s=[];u=0;for(x=n.length;u<x;u++)m=n[u],c=m.owned(),f=m.isPremium(),g=m.isJPS(),k=c&&!f?"/"+m.get("name")+"/billing/card":f&&!g&&c?"/"+m.get("name")+"/billing":"/"+m.get("name")+"/plans",h=l.formatCount(m.get("memberships").length,
"member"),s.push(_.extend(m.toJSON(),{memberCount:h,isAdmin:c,isPremium:f,isJPS:g,orgUrl:k}));b.orgs=s;this.$el.html(v.fill("select_org_to_upgrade",b));return this};b.prototype.chooseOrg=function(b){return n("Business Class Choose Org Page","Choose Org")};b.prototype.stop=function(b){return l.stop(b)};b.prototype.createOrg=function(b){l.stop(b);w.toggle({elem:$(b.target),top:20,view:Pb,options:{model:this.model,modelCache:this.modelCache}});n("Business Class Choose Org Page","Create New Org")};return b}(A);
F={}.hasOwnProperty;s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c};k=function(c,b){return function(){return c.apply(b,arguments)}};D=[].indexOf||function(c){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===c)return b;return-1};va=[{name:"voting",description:"Allow people to vote on cards.",imageClass:"power-up-icon-image-voting",aboutTemplate:"power_ups_about_voting",settingsView:function(c){return new xc({model:c})},
backgroundColor:"hsl(82, 25%, 90%)",screenshots:["https://d78fikflryjgj.cloudfront.net/images/powerups/voting/screenshots/5a3055ee42904ad84ba81830694e4a03/screenshot1.png"]},{name:"cardAging",description:"Cards visibly age with inactivity.",imageClass:"power-up-icon-image-card-aging",aboutTemplate:"power_ups_about_card_aging",settingsView:function(c){return new tc({model:c})},backgroundColor:"hsl(227, 14%, 90%)",screenshots:["https://d78fikflryjgj.cloudfront.net/images/powerups/card-aging/screenshots/d073fc23fd31de74ff54d5d023e64478/screenshot1.png",
"https://d78fikflryjgj.cloudfront.net/images/powerups/card-aging/screenshots/c80b3b4586309dc983d6de5c3d1a5607/screenshot2.png"]},{name:"calendar",description:"See your cards with due dates on a calendar.",imageClass:"power-up-icon-image-calendar",aboutTemplate:"power_ups_about_calendar",settingsView:function(c){return new sc({model:c})},backgroundColor:"hsl(204, 30%, 90%)",screenshots:["https://d78fikflryjgj.cloudfront.net/images/powerups/calendar/screenshots/f6a00a55c883ce90c323f6f4b9d8bc57/screenshot1.png",
"https://d78fikflryjgj.cloudfront.net/images/powerups/calendar/screenshots/a26f919154bc1834a54f02e485dca9dd/screenshot2.png","https://d78fikflryjgj.cloudfront.net/images/powerups/calendar/screenshots/b1c5841496fcf25c103ec3951a318a8c/screenshot_mobile1.png"]}];ob=0;for(yc=va.length;ob<yc;ob++)Aa=va[ob],Aa.displayName=lb.powerUpNames[Aa.name];yd=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){var b,c,g;this.listView=new wc({model:this.model});
this.currentMode="list";this.detailViews={};g=[];b=0;for(c=va.length;b<c;b++)Aa=va[b],g.push(this.detailViews[Aa.name]=new uc({model:this.model,powerUp:Aa}));return g};b.prototype.events={"click .js-back-view":"showListView","click .js-power-up-detail":"showDetailView"};b.prototype.render=function(){this.$el.empty().append(this.listView.render().el);return this};b.prototype.showListView=function(b){l.stop(b);this.$el.empty().append(this.listView.render().el);this.listView.delegateEvents();this.currentMode=
"list";return this.$el.css({background:"",backgroundColor:""})};b.prototype.showDetailView=function(b){var c,g;l.stop(b);if("detail"!==this.currentMode)return c=$(b.target).closest(".js-power-up-detail").find(".js-power-up-name").attr("data-power-up-name"),this.$el.empty().append(this.detailViews[c].render().el),b=null!=(g=_.find(va,function(b){return b.name===c}).backgroundColor)?g:"",this.$el.css({backgroundColor:b}),this.detailViews[c].delegateEvents(),this.currentMode="detail"};return b}(A);wc=
function(c){function b(){this.renderPowerUpsLength=k(this.renderPowerUpsLength,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){var b,c,g,f;this.listenTo(this.model,{"change:powerUps":this.renderPowerUpsLength});this.iconViews=[];f=[];c=0;for(g=va.length;c<g;c++)Aa=va[c],b={model:this.model,powerUp:Aa,viewType:"list"},f.push(this.iconViews.push(new Gb(b)));return f};b.prototype.render=function(){this.$el.html(v.fillFromModel("power_ups_list",this.model));
this.renderPowerUps();this.renderPowerUpsLength();return this};b.prototype.delegateEvents=function(){var c,e,g,f,h;b.__super__.delegateEvents.apply(this,arguments);f=this.iconViews;h=[];e=0;for(g=f.length;e<g;e++)c=f[e],h.push(c.delegateEvents());return h};b.prototype.renderPowerUpsLength=function(){var b,c;c=this.model.get("powerUps").length;b=this.$(".js-power-up-count").empty().addClass("hide");if(0<c)return b.text(""+c+" enabled").removeClass("hide")};b.prototype.renderPowerUps=function(){var b,
c,g,f,h,m;b=this.$(".js-power-up-list").empty();h=this.iconViews;m=[];g=0;for(f=h.length;g<f;g++)c=h[g],m.push(b.append(c.render().el));return m};return b}(A);uc=function(c){function b(){this.renderContent=k(this.renderContent,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="power-up-detail";b.prototype.initialize=function(b){this.powerUp=b.powerUp;this.listenTo(this.model,{"change:powerUps":this.renderContent});this.toolbarSelection="settings";this.iconView=
new Gb({model:this.model,powerUp:this.powerUp,viewType:"detail"});return this.screenshotsView=new vc({model:this.model,powerUp:this.powerUp})};b.prototype.events={"click .js-toolbar-select":"selectContentSection"};b.prototype.render=function(){this.$el.html(v.fillFromModel("power_up_detail",this.model));this.renderIcon();this.renderContent();return this};b.prototype.delegateEvents=function(){b.__super__.delegateEvents.apply(this,arguments);return this.iconView.delegateEvents()};b.prototype.renderIcon=
function(){return this.$(".js-power-up-icon").empty().append(this.iconView.render().el)};b.prototype.powerUpEnabled=function(){var b;return b=this.powerUp.name,0<=D.call(this.model.get("powerUps"),b)};b.prototype.renderContent=function(){this.renderNavBar();if(this.powerUpEnabled())switch(this.toolbarSelection){case "screenshots":return this.renderScreenshots();default:return this.renderSettings()}else return this.renderScreenshots()};b.prototype.renderNavBar=function(){var b,c;b=this.$(".js-power-up-detail-navbar").empty();
if(this.powerUpEnabled())return c={screenshots:"screenshots"===this.toolbarSelection,settings:"settings"===this.toolbarSelection},b.html(v.fillFromModel("power_ups_detail_navbar",this.model,c))};b.prototype.renderSectionContent=function(b){return this.$(".js-power-up-detail-content").empty().append(b)};b.prototype.renderScreenshots=function(){this.renderSectionContent(this.screenshotsView.render().el);return this.screenshotsView.delegateEvents()};b.prototype.renderSettings=function(){var b;b=this.powerUp.settingsView(this.model);
this.renderSectionContent(b.render().el);return b.delegateEvents()};b.prototype.selectContentSection=function(b){l.stop(b);this.toolbarSelection=$(b.target).attr("name");return this.renderContent()};return b}(A);vc=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="power-up-screenshots-wrapper";b.prototype.initialize=function(b){this.powerUp=b.powerUp};b.prototype.render=function(){this.$el.html(v.fill("power_up_detail_screenshots",{screenshots:this.powerUp.screenshots}));
return this};return b}(A);Gb=function(c){function b(){this.renderEnabled=k(this.renderEnabled,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="power-up-icon js-power-up-detail";b.prototype.initialize=function(b){this.powerUp=b.powerUp;this.viewType=b.viewType;return this.listenTo(this.model,{"change:powerUps":this.renderEnabled})};b.prototype.events={"click .js-toggle-power-up:not(.enabled)":"enablePowerUp","click .js-toggle-power-up.enabled":"disablePowerUp"};
b.prototype.render=function(){var b;b=_.clone(this.powerUp);"detail"===this.viewType?b.powerUpDesc=v.fill(this.powerUp.aboutTemplate):(b.powerUpDesc=this.powerUp.description,b.isListView=!0);this.$el.html(v.fillFromModel("power_up_icon",this.model,b));this.renderEnabled();return this};b.prototype.enablePowerUp=function(){return this.model.addToSet("powerUps",this.powerUp.name)};b.prototype.disablePowerUp=function(){this.model.pull("powerUps",this.powerUp.name);if("calendar"===this.powerUp.name)return C.getCurrentBoardView().closeCalendarIfOpen()};
b.prototype.renderEnabled=function(){var b,c;b=(c=this.powerUp.name,0<=D.call(this.model.get("powerUps"),c));this.$(".js-toggle-btn").text(b?"Disable":"Enable").toggleClass("enabled",b).toggleClass("primary",!b);return this.$(".js-enabled-badge").toggleClass("hide",!b)};b.prototype.renderButtonState=function(){var b;b=this.powerUp.name;D.call(this.model.get("powerUps"),b);this.$(".js-toggle-btn").text(txt)};return b}(A);xc=function(c){function b(){this.render=k(this.render,this);return b.__super__.constructor.apply(this,
arguments)}s(b,c);b.prototype.className="fixed-width voting-prefs";b.prototype.initialize=function(){return this.listenTo(this.model,{"change:prefs":this.render})};b.prototype.events={"click .js-voting-select:not(.disabled)":"selectPerm","mouseenter .js-voting-select":"showSoftCheckMarks","mouseleave .js-voting-select":"clearSoftCheckMarks"};b.prototype.render=function(){var b,c,g;b=this.model.toJSON({prefs:!0,url:!0});c=this.model.getOrganization();b.hasOrg=null!=(null!=c?c.id:void 0);b.orgCanSee=
b.hasOrg&&("public"===(g=this.model.getPref("permissionLevel"))||"org"===g);b.premium=null!=c?c.isFeatureEnabled("observers"):void 0;b.voting_showObservers=(b.premium||b.voting_observers)&&b.hasOrg;null!=c&&c.owned()?(b.orgOwner=!0,b.orgName=c.get("displayName"),this.model.owned()||(b.setOrgNull=!0)):this.model.owned()||(b.noEditOrg=!0);this.$el.html(v.fillFromModel("power_ups_voting_prefs",this.model,b));b=this.$(".icon-check");c=this.$(".checked-option")[0];b=b.index(c);this.displayChecksAbove(b,
"checked-option");return this};b.prototype.selectPerm=function(b){l.stop(b);b=$(b.target).closest(".js-voting-select").attr("name");return this.model.setPref("voting",b)};b.prototype.showSoftCheckMarks=function(b){b=$(b.target).closest(".js-voting-select")[0];b=this.$(".js-voting-select").index(b);return this.displayChecksAbove(b,"soft-check")};b.prototype.clearSoftCheckMarks=function(){return this.displayChecksAbove(-1,"soft-check")};b.prototype.displayChecksAbove=function(b,c){return this.$(".js-voting-select").each(function(g,
f){var h;if(!$(f).hasClass("disabled")&&!$(f).children(".icon-check").hasClass("checked-option"))return h=$(f).children("div.icon-check"),g<=b?h.addClass(c):h.removeClass(c)})};return b}(A);tc=function(c){function b(){this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="fixed-width card-aging-prefs";b.prototype.initialize=function(){return this.listenTo(this.model,{"change:prefs":this.render})};b.prototype.events={"click .js-select:not(.disabled)":"selectMode"};
b.prototype.render=function(){var b;b=this.model.toJSON({prefs:!0,url:!0}).prefs;this.$el.html(v.fillFromModel("power_ups_card_aging_prefs",this.model,{aging_regular:"regular"===b.cardAging,aging_pirate:"pirate"===b.cardAging}));return this};b.prototype.selectMode=function(b){l.stop(b);b=$(b.target).closest(".js-select").attr("name");return this.model.setPref("cardAging",b)};return b}(A);sc=function(c){function b(){this.render=k(this.render,this);this.generateNewFeedURL=k(this.generateNewFeedURL,
this);this.generationComplete=k(this.generationComplete,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="fixed-width calendar-prefs";b.prototype.initialize=function(){this.generating=!1;return this.listenTo(this.model,{"change:prefs":this.render,"change:myPrefs.calendarKey":this.generationComplete})};b.prototype.events={"click .js-calendar-pref-feed:not(.disabled)":"selectFeedEnabled","click .js-calendar-feed-url:not(:disabled)":"focusInput","click .js-regen-calendar-url:not(.disabled)":"generateNewFeedURL"};
b.prototype.generationComplete=function(){this.generating=!1;return this.render()};b.prototype.generateNewFeedURL=function(b){l.stop(b);this.generating=!0;this.model.generateCalendarKey();return this.render()};b.prototype.render=function(){var b,c,g;g=this.model.toJSON({prefs:!0}).prefs;c=this.model.getPref("calendarKey");b="webcal://"+location.host+"/calendar/"+y.me().id+"/"+this.model.id+"/"+c+".ics";c||(this.generating=!0,this.model.generateCalendarKey());this.$el.html(v.fillFromModel("power_ups_calendar_prefs",
this.model,{calendar_feed_enabled:g.calendarFeedEnabled,calendar_feed_generated:null!=c&&!this.generating,calendar_feed_url:b}));return this};b.prototype.focusInput=function(b){return this.$(".js-calendar-feed-url").focus().select()};b.prototype.selectFeedEnabled=function(b){l.stop(b);b="enabled"===$(b.target).closest("a").attr("name");return this.model.setPref("calendarFeedEnabled",b)};return b}(A);var Yh,oh,F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,
e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c};Yh=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.typename="BoardStar";return b}(fa);oh=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.model=Yh;b.prototype.url=function(){return"/1/member/"+this.member.id+"/boardStars"};b.prototype.initialize=function(b,c){this.member=c.member;return this.bind("change:pos",this.sort)};
b.prototype.comparator=function(b){return b.get("pos")||0};b.prototype.getBoardStar=function(b){return _.find(this.models,function(c){return c.get("idBoard")===b})};b.prototype.starBoard=function(b){var c;if(!this.getBoardStar(b))return c=this.length?this.at(this.length-1).get("pos")+l.spacing:l.spacing,this.create({idBoard:b,pos:c},{modelCache:this.modelCache})};b.prototype.unstarBoard=function(b){b=this.getBoardStar(b);if(null!=b)return b.destroy()};b.prototype.updateStarBoard=function(b,c){var g,
f;g=this.getBoardStar(b);f=l.calcPos(c,this,g);if(null!=g)return g.update({pos:f})};b.prototype.getBoards=function(){var b;b=this.getBoardIds();return _.compact(this.Board.get(b))};b.prototype.getBoardIds=function(){var b,c,g,f,h;c=_.sortBy(this.models,function(b){return b.get("pos")});h=[];g=0;for(f=c.length;g<f;g++)b=c[g],h.push(b.get("idBoard"));return h};return b}(fb);var Zh,Qc,$h,Bg,Rc,Jc,k=function(c,b){return function(){return c.apply(b,arguments)}},F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=
c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c};Rc=function(c){function b(){this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="sticker-select js-draggable-sticker";b.prototype.enabled=function(){var b;return"standard"===this.model.get("type")||y.me().isFeatureEnabled("additionalStickers")||(null!=(b=this.options.org)?b.isFeatureEnabled("additionalStickers"):void 0)};
b.prototype.render=function(){var b,c,g;b=this.model.toJSON();b.url=null!=(c=null!=(g=l.smallestPreviewBiggerThan(b.scaled,80))?g.url:void 0)?c:b.url;b.pending=null==b.image&&null==b.id&&null==b.error;this.$el.toggleClass("disabled",!this.enabled()).html(v.fill("sticker_select_item",b)).data("sticker",this.model);return this};return b}(A);Zh=function(c){function b(){this.deleteSticker=k(this.deleteSticker,this);this.toggleSelectable=k(this.toggleSelectable,this);this.initialize=k(this.initialize,
this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){this.toggleSelectable();this.model.onId(function(b){return function(){return b.toggleSelectable()}}(this));return this.listenTo(this.model,"change:error",this.render)};b.prototype.events={"click .js-delete-sticker":"deleteSticker"};b.prototype.enabled=function(){var b;return y.me().isFeatureEnabled("customStickers")||(null!=(b=this.options.org)?b.isFeatureEnabled("customStickers"):void 0)};b.prototype.toggleSelectable=
function(){var b;b=null!=this.model.id;this.$el.toggleClass("js-draggable-sticker",b);return this.$el.toggleClass("sticker-unselectable",!b)};b.prototype.deleteSticker=function(b){l.stop(b);return pa.toggle({elem:$(b.target).closest(".js-delete-sticker"),top:32,model:this.model,title:"Delete Sticker?",text:"Deleting a sticker is permanent. There is no undo.",confirmText:"Delete",confirmBtnClass:"negate",fxConfirm:function(b){return function(c){return b.model.destroy()}}(this)})};return b}(Rc);Qc=
function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.typename="Sticker";return b}(fa);Bg=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.model=Qc;b.prototype.url=function(){return"/1/cards/"+this.card.get("id")+"/stickers"};b.prototype.initialize=function(b,c){this.card=c.card;this.bind("change:zIndex",this.sort)};b.prototype.comparator=function(b){return b.get("zIndex")||0};b.prototype.nextZIndex=function(b){var c;
return 0<this.length?(c=_.max(this.pluck("zIndex")),(null!=b?b.get("zIndex"):void 0)===c&&1===this.filter(function(b){return b.get("zIndex")===c}).length?c:c+1):1};return b}(fb);Jc=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="sticker";b.prototype.showEditControls=function(){return!1};b.prototype.render=function(){var b,c,g;b=this.model.toJSON();b.url=null!=(c=null!=(g=l.smallestPreviewBiggerThan(b.imageScaled,80))?g.url:void 0)?c:b.imageUrl;
b.showEditControls=this.showEditControls();this.$el.html(v.fill("sticker_on_card",b)).css({left:""+b.left+"%",top:""+b.top+"%"});return this};return b}(A);$h=function(c){function b(){this.removeSticker=k(this.removeSticker,this);this.startMove=k(this.startMove,this);this.startRotate=k(this.startRotate,this);this.editSticker=k(this.editSticker,this);this.mouseleave=k(this.mouseleave,this);this.mouseenter=k(this.mouseenter,this);this.saveStickerAttrs=k(this.saveStickerAttrs,this);this.isMovingOrRotating=
k(this.isMovingOrRotating,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){this.listenTo(this.model,"stopEditing",this.stopEditing);this.listenTo(this.model,"startEditing",this.editSticker);this.listenTo(this.model,"disableEditing",this.disableEditing);return this.listenTo(this.model,"enableEditing",this.enableEditing)};b.prototype.events={mouseenter:"mouseenter",mouseleave:"mouseleave",mousedown:"editSticker","mousedown .js-remove-sticker":"removeSticker",
"mousedown .js-rotate-sticker":"startRotate","mousedown .js-move-sticker":"startMove"};b.prototype.showEditControls=function(){return!0};b.prototype.disableEditing=function(){return this.$el.addClass("editing-disabled")};b.prototype.enableEditing=function(){return this.$el.removeClass("editing-disabled")};b.prototype.endCurrentEdit=function(){$(document).off(".stickerrotate .stickermove .stickerautomove");this.$el.removeClass("moving rotating");return $(".quick-card-editor").removeClass("invalid dragging")};
b.prototype.stopEditing=function(b){var c,g,f,h;l.stop(b);if(this.isEditing()){this.endCurrentEdit();this.$el.removeClass("editing");$(".quick-card-editor").removeClass("quick-card-editor-editing-stickers");f=this.model.collection.models;h=[];c=0;for(g=f.length;c<g;c++)b=f[c],h.push(b.trigger("enableEditing"));return h}};b.prototype.isEditing=function(){return this.$el.is(".moving, .rotating, .editing")};b.prototype.isEditingDisabled=function(){return this.$el.is(".editing-disabled")};b.prototype.isMovingOrRotating=
function(){return this.$el.is(".moving, .rotating")};b.prototype.saveStickerAttrs=function(b){var c,g,f,h;c=b.position;f=b.rotation;b=function(b){return Math.round(100*b)/100};h={zIndex:this.model.collection.nextZIndex(this.model)};c&&(c=this.$el.closest(".list-card"),g=c.find(".js-card-stickers"),c=g.width(),g=g.height(),h.left=b(100*(parseFloat(this.$el.css("left"))/c)),h.top=b(100*(parseFloat(this.$el.css("top"))/g)));f&&(f=l.getElemTransformMatrix(this.$el.find(".sticker-image")),h.rotate=b(l.getMatrixDegrees(f)%
360));this.model.update(h)};b.prototype.mouseenter=function(b){!this.isEditingDisabled()&&(!this.isEditing()&&!this.isMovingOrRotating())&&this.$el.addClass("hover")};b.prototype.mouseleave=function(b){this.$el.removeClass("hover")};b.prototype.editSticker=function(b){var c,g,f,h,m,k,u;if(!(null!=b&&1!==b.which)){l.stop(b);null!=b&&"mousedown"===b.type&&(f=b.pageX,h=b.pageY,g=function(b){return function(){$(document).off(".stickerautomove");return clearTimeout(c)}}(this),$(document).on("mousemove.stickerautomove",
function(b){return function(c){if(25<Math.pow(c.pageX-f,2)+Math.pow(c.pageY-h,2))return g(),b.startMove(c)}}(this)),$(document).on("mouseup.stickerautomove",g),c=setTimeout(g,1E3));m=_.clone(this.model.collection.models);k=0;for(u=m.length;k<u;k++)b=m[k],b!==this.model&&(b.trigger("stopEditing"),b.trigger("disableEditing"));_.defer(function(b){return function(){w.hide();b.$el.addClass("editing");return $(".quick-card-editor").addClass("quick-card-editor-editing-stickers")}}(this))}};b.prototype.startRotate=
function(b){var c,g,f,h,m,k;if(this.isEditing())return l.preventDefault(b),c=this.$el.offset().left+this.$el.width()/2,g=this.$el.offset().top+this.$el.height()/2,f=b.pageX,h=b.pageY,l.calcDistanceFromCenter(this.$el,f,h),k=0,b=l.getElemTransformMatrix(this.$el.find(".sticker-image")),null!=b&&(k=l.getMatrixDegrees(b)),m=!1,$(document).on("mousemove.stickerrotate",function(b){return function(d){var n,s;m||(b.$el.removeClass("hover").addClass("rotating"),$(".quick-card-editor").addClass("dragging"),
m=!0);n=d.pageX;d=d.pageY;l.calcDistanceFromCenter(b.$el,n,d);n-=c;s=d-g;d=l.getDegrees(h-g,f-c);n=l.getDegrees(s,n);n=k+(n-d);b.$el.find(".sticker-image").css({transform:"rotate("+n+"deg)","-webkit-transform":"rotate("+n+"deg)"})}}(this)),$(document).on("mouseup.stickerrotate",function(b){return function(){return m?(b.saveStickerAttrs({rotation:!0}),b.endCurrentEdit()):$(document).off(".stickerrotate")}}(this)),!1};b.prototype.startMove=function(b){var c,g,f,h,m,k,u,x,n,s,v;if(this.isEditing())return l.stop(b),
f=this.$el.closest(".list-card"),f=f.find(".js-card-stickers"),n=f.offset(),u=n.left,x=n.top,v=this.$el.width(),s=this.$el.height(),n=f.width(),f=f.height(),c=n-10,g=f-10,null!=b?(m=this.$el.offset().left+this.$el.width()/2-b.pageX,k=this.$el.offset().top+this.$el.height()/2-b.pageY):k=m=0,h=!1,$(document).on("mousemove.stickermove",function(b){return function(d){var f,l;h||(b.$el.removeClass("hover").addClass("moving"),$(".quick-card-editor").addClass("dragging"),h=!0);f=d.pageX-u-v/2+m;d=d.pageY-
x-s/2+k;l=!0;f>c&&(f=c,l=!1);-40>f&&(f=-40,l=!1);d>g&&(d=g,l=!1);-40>d&&(d=-40,l=!1);$(".quick-card-editor").toggleClass("invalid",!l);return b.$el.css({left:f,top:d})}}(this)),$(document).on("mouseup.stickermove",function(b){return function(){return h?(b.saveStickerAttrs({position:!0}),b.endCurrentEdit()):$(document).off(".stickermove")}}(this)),!1};b.prototype.removeSticker=function(b){this.isEditing()&&(b=_.once(function(b){return function(){b.stopEditing();b.model.destroy();b.$el.remove()}}(this)),
this.$el.one("transitionEnd webkitTransitionEnd",b),setTimeout(b,100),this.$el.addClass("fade-out"))};return b}(Jc);var ai,ph,F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c};ai=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.typename="Login";b.prototype.hasConflict=function(){var b;b=this.collection.types();return!_.any([function(b){return function(){return _.isEmpty(b.get("types"))}}(this),
function(c){return function(){return"password"in b}}(this),function(c){return function(){return 2<=b.google}}(this)],function(b){return b()})};return b}(fa);ph=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.model=ai;b.prototype.initialize=function(){return this.on("change:primary",this.resetPrimary,this)};b.prototype.resetPrimary=function(b){var c,g,f;if(b.get("primary")){f=this.without(b);c=0;for(g=f.length;c<g;c++)b=f[c],b.set("primary",!1);return this.sort()}};
b.prototype.comparator=function(b){return Number(!b.get("primary"))+b.id};b.prototype.types=function(){return _.countBy(_.flatten(this.pluck("types")))};return b}(Ma);var nb,G=[].slice,D=[].indexOf||function(c){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===c)return b;return-1};nb=function(){function c(b){var c;this.name=b;_.extend(this,Backbone.Events);this._cache={};this._locked=[];this._lockIndex=0;this._deltaQueue=[];for(c in this._collections)this._cache[c]={};l.debounceEvents(this);
this.createBoundObjects();if("board"===this.getCacheType())this.on("add:Board:"+this.name.split("_")[1],function(b){null!=b.get("idOrganization")&&ModelCacheCache.ensureSubscriptions();return b.on("change:idOrganization",function(){return ModelCacheCache.ensureSubscriptions()})})}c.fullCacheTypes=["board","organization"];c.prototype._collections={Action:{type:pb,test:"actions"},Card:{type:Ga,test:"cards"},Checklist:{type:Xb,test:"checklists"},Board:{type:ia,test:function(b){return/^board($|s)/.test(b)}},
List:{type:Lc,test:function(b){return/^lists?/.test(b)}},Member:{type:aa,test:function(b){return/^member/.test(b)&&"memberships"!==b&&"memberType"!==b}},Notification:{type:wb,test:"notifications"},Organization:{type:Ta,test:function(b){return/^organization/.test(b)}}};c.prototype.getRequiredSubscriptions=function(){var b,c,e,g,f;e=y.isLoggedIn()?[{modelType:"Member",idModel:y.myId(),tags:["messages","updates"]}]:[];g=function(){var e;switch(this.getCacheType()){case "organization":return[{modelType:"Organization",
idModel:this.name.split("_")[1],tags:["allActions","updates"]}];case "board":return b=this.name.split("_")[1],f=[{modelType:"Board",idModel:b,tags:["clientActions","updates"]}],(c=null!=(e=this.get("Board",b))?e.get("idOrganization"):void 0)&&f.push({modelType:"Organization",idModel:c,tags:["allActions","updates"]}),f;default:return[]}}.call(this);return e.concat(g)};c.prototype.createBoundObjects=function(){var b,c,e,g,f,h,k,l,u,x,n,s;c=["get","waitFor","all","find","findOne"];b={Action:["getListForModel"],
Notification:["sortedByDateDescending","unreadCount"]};this.bound={};x=[pb,ia,Ga,Xb,Lc,aa,wb,Ta];h=0;for(l=x.length;h<l;h++){g=x[h];this.bound[g.prototype.typeName]={};s=c.concat(null!=(n=b[g.prototype.typeName])?n:[]);f=function(b){return function(c,d){return b.bound[c.prototype.typeName][d]=function(){var e;e=1<=arguments.length?G.call(arguments,0):[];return c[d].apply(c,[b].concat(G.call(e)))}}}(this);k=0;for(u=s.length;k<u;k++)e=s[k],f(g,e)}return this.bound.Auth={me:function(b){return function(){return aa.get(b,
y.myId())}}(this)}};c.prototype.getCacheType=function(){return this.name.split("_")[0]};c.prototype.updateDeltas=function(b,c){var e,g,f,h;h=[];g=0;for(f=c.length;g<f;g++)e=c[g],null!=e._id&&(null==e.id&&(e.id=e._id),delete e._id),h.push(this.enqueueDelta(b,e));return h};c.prototype.deleteDeltas=function(b,c){var e,g,f,h,k;k=[];g=0;for(f=c.length;g<f;g++)e=c[g],k.push(this.enqueueDelta(b,{id:null!=(h=e.id)?h:e._id,deleted:!0}));return k};c.prototype.clearAll=function(){var b,c,e,g,f;for(e in this._collections){f=
null!=(g=this._cache[e])?g:{};for(b in f)c=f[b],c.destructor();this._cache[e]={}}return clearInterval(this._syncTimer)};c.prototype.get=function(b,c){var e;return null!=(e=this._cache[b])?e[c]:void 0};c.prototype.waitFor=function(b,c,e){var g;g=this.get(b,c);return null!=g?e(null,g):this.once("add:"+b+":"+c,function(f){return function(){return f.waitFor(b,c,e)}}(this))};c.prototype.all=function(b){return _.values(this._cache[b])};c.prototype.add=function(b){var c;if(!(b.id&&null!=this.get(b.typeName,
b.id))&&null!=this._collections[b.typeName])return c=b.id?b.id:b.cid,this._cache[b.typeName][c]=b,this.trigger("add:"+b.typeName,b),b.onId(function(c){return function(d){delete c._cache[b.typeName][b.cid];c._cache[b.typeName][d]=b;c.trigger("add:"+b.typeName+":"+d,b);return"function"===typeof b.triggerCacheEvents?b.triggerCacheEvents(c,"add",b):void 0}}(this)),b.off(null,null,this),b.on("change",function(c){return function(){var d,f,h;"function"===typeof b.triggerCacheEvents&&b.triggerCacheEvents(c,
"change",b);c.trigger("change:"+b.typeName,b);f=b.changedAttributes();h=[];for(d in f)h.push(c.trigger("change:"+b.typeName+":"+d,b));return h}}(this),this),b.on("destroy",function(b){return function(c){return b.remove(c)}}(this),this)};c.prototype.remove=function(b){var c,e,g,f;if(null!=b){if(b instanceof Ga){f=b.actionList.models;e=0;for(g=f.length;e<g;e++)c=f[e],this.remove(c)}delete this._cache[b.typeName][b.id];delete this._cache[b.typeName][b.cid];this.trigger("remove:"+b.typeName,b);null!=
b.id&&this.trigger("remove:"+b.typeName+":"+b.id,b);"function"===typeof b.triggerCacheEvents&&b.triggerCacheEvents(this,"remove",b);b.off(null,null,this);return"function"===typeof b.destructor?b.destructor():void 0}};c.prototype.update=function(b,c,e){var g,f,h,k,l,u,x;if(_.isArray(c)){g=0;for(f=c.length;g<f;g++)h=c[g],this.update(b,h)}else if(c.deleted)b=this.get(b,c.id),this.remove(b);else{l=_.clone(c);k=function(b){return function(e,f){var g;g=c[e];_.isNumber(g)?l[""+e+"Count"]=g:b.update(f,g);
return delete l[e]}}(this);x=this._collections;for(g in x)if(u=x[g],u=u.test,_.isString(u))null!=c[u]&&k(u,g);else for(f in c)u(f)&&k(f,g);g=_.isString(b)?this.get(b,c.id):b;null!=g?g.set(l):null!=(null!=(h=this._collections[b])?h.type:void 0)&&new this._collections[b].type(l,{modelCache:this})}return"function"===typeof e?e(null,c):void 0};c.prototype.lock=function(b){var c;c=this._lockIndex++;P("MC",""+b+" took lock "+c);this._locked.push(c);return c};c.prototype.locked=function(){return!_.isEmpty(this._locked)};
c.prototype.unlock=function(b){return 0<=D.call(this._locked,b)?(P("MC","gave lock "+b),this._locked=_.without(this._locked,b),this.locked()||this.processDeltas(),!0):!1};c.prototype.enqueueDelta=function(b,c,e){P("MC","got an update for "+(_.isString(b)?b:b.typeName));return this.locked()?this._deltaQueue.push({modelOrType:b,delta:c,next:e}):this.update(b,c,e)};c.prototype.processDeltas=function(){var b,c,e,g,f,h,k,l;g=this._deltaQueue;this._deltaQueue=[];f=function(b){return!_.isString(b)&&null==
b.id};P("MC","Running "+g.length+" updates");h=0;for(k=g.length;h<k;h++)e=g[h],c=e.modelOrType,b=e.delta,e=e.next,f(c)&&this.update(c,b,e);l=[];h=0;for(k=g.length;h<k;h++)e=g[h],c=e.modelOrType,b=e.delta,e=e.next,f(c)||l.push(this.update(c,b,e));return l};return c}();window.ModelCacheCache=new (function(){function c(){this._caches={}}c.prototype.addCache=function(b){var c;c=this._caches[b]=new nb(b);$(c).on("outOfSync",function(b){return function(){return b.dropCache(c)}}(this));this.ensureSubscriptions();
return c};c.prototype.cachesSubscribedToModel=function(b){var c,e,g,f;e=[];f=this._caches;for(g in f)c=f[g],_.any(c.getRequiredSubscriptions(),function(c){return c.idModel===b})&&e.push(c);return e};c.prototype["for"]=function(b){var c,e;if(b instanceof nb)return b;null==this._caches[b]&&(c=this.addCache(b),(e=c.getCacheType(),0<=D.call(nb.fullCacheTypes,e))&&this.copyHeaderCacheTo(c));return this._caches[b]};c.prototype.hasCache=function(b){return null!=this._caches[b]};c.prototype.copyHeaderCacheTo=
function(b){var c,e,g,f,h,k,l;if(e=this["for"]("header")){e=e._cache;l=[];for(h in e)k=e[h],l.push(function(){var e;e=[];for(g in k)f=k[g],c=$.extend(!0,{},f.attributes),e.push(new b._collections[h].type(c,{modelCache:b}));return e}());return l}};c.prototype.dropCache=function(b){M.dropLoaderFor(b);b.clearAll();delete this._caches[b.name];return this.ensureSubscriptions()};c.prototype.ensureSubscriptions=function(){var b,c,e,g,f,h,k,l,u,x,n,s;l=_.flatten(function(){var c,d;c=this._caches;d=[];for(f in c)b=
c[f],d.push(b.getRequiredSubscriptions());return d}.call(this));k={};x=0;for(n=l.length;x<n;x++)u=l[x],g=u.modelType,e=u.idModel,u=u.tags,null==k[e]&&(k[e]={tags:[],modelType:g}),(s=k[e].tags).push.apply(s,u);l=rpc.currentSubscriptions;for(e in l)g=l[e],u=g.tags,g=g.modelType,(null==(h=k[e])||!_.isEmpty(c=_.difference(u,h.tags)))&&rpc.unsubscribe(g,e,c);for(e in k)c=k[e],u=c.tags,g=c.modelType,(null==(h=rpc.currentSubscriptions[e])||!_.isEmpty(_.difference(u,h.tags)))&&rpc.subscribe(g,e,u)};return c}());
window.IdCache=new (function(){function c(){this._shortLinkToId={Card:{},Board:{}};this._idCardToIdBoard={}}c.prototype.getId=function(b,c){if(l.checkId(c))return c;if(l.isShortLink(c))return this._shortLinkToId[b][c];throw Error("Not a shortLink or id: "+c);};c.prototype.setId=function(b,c,e){if(!l.checkId(e))throw Error("Not an id: "+e);if(!l.isShortLink(c))throw Error("Not a shortLink: "+c);return this._shortLinkToId[b][c]=e};c.prototype.setCardId=function(b,c){return this.setId("Card",b,c)};c.prototype.setBoardId=
function(b,c){return this.setId("Board",b,c)};c.prototype.setBoardIdForCard=function(b,c){return this._idCardToIdBoard[this.getCardId(b)]=this.getBoardId(c)};c.prototype.getCardId=function(b){return this.getId("Card",b)};c.prototype.getBoardId=function(b){return this.getId("Board",b)};c.prototype.getBoardIdForCard=function(b){return this._idCardToIdBoard[this.getCardId(b)]};return c}());$(rpc).bind("updateModels",function(c,b){var d,e,g,f;f=ModelCacheCache.cachesSubscribedToModel(b.idModelChannel);
e=0;for(g=f.length;e<g;e++)d=f[e],d.updateDeltas(b.typeName,b.deltas)});$(rpc).bind("deleteModels",function(c,b){var d,e,g,f;f=ModelCacheCache.cachesSubscribedToModel(b.idModelChannel);e=0;for(g=f.length;e<g;e++)d=f[e],d.deleteDeltas(b.typeName,b.deltas)});var bi,F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c};bi=function(c){function b(){return b.__super__.constructor.apply(this,
arguments)}s(b,c);b.prototype.initialize=function(){var b;this.updatePinnedDrawer();qa.ensureRun();this.listenTo(W,"change:pinBoardsListSidebar",function(){return this.updatePinnedDrawer()});b=this.debounce(function(b){qa.calc();w.calcPos({notNew:!0});ma.setSurfaceHeight();Y.isVisible&&Y.calcPos()},300);$(window).on("resize.windowEvent",b);b=window.devicePixelRatio;_.isNumber(b)?n("Pixel Ratio",1.5<=b?"High":"Normal",b):n("Pixel Ratio","Not available");ma.setSurfaceHeight()};b.prototype.updatePinnedDrawer=
function(){return $("body").toggleClass("pinned-drawer",W.getPinSidebar())};return b}(A);var ci,mg,ib,qe,di,Th,ke,vh,k=function(c,b){return function(){return c.apply(b,arguments)}},F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c},G=[].slice;ib=function(c){function b(){this.respond=k(this.respond,this);this["delete"]=k(this["delete"],this);this.create=k(this.create,
this);this.getParent=k(this.getParent,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.typeName="Invitation";b.prototype.initialize=function(b,c){P("invitation",c);this.invitationList=c.collection;this.setReady()};b.prototype.getParent=function(){return this.invitationList.options.model};b.prototype.create=function(b){var c,g,f,h;f=b.model;c=b.data;h=b.success;g=b.error;return S({url:"/1/"+f.typeName+"/"+f.id+"/invitations",type:"post",data:c,dataType:"json",error:function(b){return function(){var c,
d,e;c=2<=arguments.length?G.call(arguments,0,d=arguments.length-1):(d=0,[]);d=arguments[d++];c=c[0];if("Member email restricted by organization administrators"===c.responseText.trim())b.$(".error").show();else return"Member already invited"!==(e=c.responseText.trim())&&("Member already a member"!==e&&"Member email restricted by organization administrators"!==e)&&d(),"function"===typeof g?g(c):void 0}}(this),success:function(b){return function(b){return"function"===typeof h?h(b):void 0}}(this)})};
b.prototype["delete"]=function(b){var c,g,f,h;f=b.model;g=b.idInvitation;h=b.success;c=b.error;return S({url:"/1/"+f.typeName+"/"+f.id+"/invitations/"+g,type:"delete",dataType:"json",error:function(b){return function(){var b,d;b=2<=arguments.length?G.call(arguments,0,d=arguments.length-1):(d=0,[]);d=arguments[d++];b=b[0];"Invitation not found"!==b.responseText.trim()&&d();return"function"===typeof c?c(b):void 0}}(this),success:function(b){return function(b){return"function"===typeof h?h(b):void 0}}(this)})};
b.prototype.respond=function(b){var c,g,f,h,k;f=b.model;h=b.response;c=b.data;k=b.success;g=b.error;return S({url:"/1/"+f.typeName+"/"+f.id+"/invitations/"+h,type:"post",dataType:"json",data:c,error:function(b){return function(){var b,c;b=2<=arguments.length?G.call(arguments,0,c=arguments.length-1):(c=0,[]);c=arguments[c++];b=b[0];"already a member"!==b.responseText.trim()&&c();return"function"===typeof g?g(b):void 0}}(this),success:function(b){return function(b){return"function"===typeof k?k(b):
void 0}}(this)})};return b}(fa);qe=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.model=ib;b.prototype.initialize=function(b,c){this.options=c};b.prototype.comparator=function(b){return b.get("dateExpires")?-I.parse(b.get("dateExpires")):-Infinity};return b}(Ma);ci=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.typeName="BoardInvitation";return b}(ib);mg=function(c){function b(){return b.__super__.constructor.apply(this,
arguments)}s(b,c);b.prototype.model=ci;return b}(qe);di=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.typeName="OrganizationInvitation";return b}(ib);Th=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.model=di;return b}(qe);ke=function(c){function b(){this.invite=k(this.invite,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Add As..."};b.prototype.initialize=
function(){this.parent=this.options.parent;this.member=this.model;this.isBoard=this.isOrg=!1;this.objText="";this.didSendInvite=!0;if(this.parent instanceof ia)return this.isBoard=!0,this.objText="Board",this.invitationList=this.parent.invitationList;if(this.parent instanceof Ta)return this.isOrg=!0,this.objText="Org",this.invitationList=this.parent.invitationList};b.prototype.setOptions=function(b){_.extend(this.options,b);return this};b.prototype.events={"click .js-invite":"invite"};b.prototype.render=
function(){var b,c,g,f,h;b={showObserver:!1};b.showAdmin=this.parent.owned(this.member);if(this.isBoard&&null!=(c=this.parent.getOrganization())&&c.isFeatureEnabled("observers"))b.showObserver=!0;h=["admin","normal","observer"];g=0;for(f=h.length;g<f;g++)c=h[g],b["roleText_"+c]=this.parent.getRoleText(c);this.$el.html(v.fill("manage_members_select_role",b));return this};b.prototype.invite=function(b){var c,g;l.stop(b);b=$(b.target).closest(".js-invite");g=null;$(b).hasClass("js-select-admin")?g="Admin":
$(b).hasClass("js-select-member")?g="Member":$(b).hasClass("js-select-observer")&&(g="Observer");this.isBoard&&(b=_.pluck(null!=(c=this.parent.organization)?c.memberList.models:void 0,"id"),_.include(b,this.member.id));c={};c.type="Member"===g?"normal":g.toLowerCase();S({url:"/1/"+this.parent.typeName.toLowerCase()+"/"+this.parent.id+"/members/"+this.member.id,type:"put",data:c,dataType:"json",success:function(b){return function(b){return n("Invitations","Add Member to Board","Role: "+g)}}(this),
error:function(b){return function(b,c){O.show(b.responseText,"error","alert",3E3);n("Invitations","Error: "+b.responseText)}}(this)});if("function"===typeof(c=this.options).onSendInvite)c.onSendInvite();this.options.onSendInvite=null;w.hide()};return b}(A);vh=function(c){function b(){this.invite=k(this.invite,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.invite=function(b){var c;l.stop(b);b=$(b.target).closest(".js-invite");c=null;$(b).hasClass("js-select-admin")?c=
"Admin":$(b).hasClass("js-select-member")?c="Member":$(b).hasClass("js-select-observer")&&(c="Observer");b={};b.email=this.options.email;b.type="Member"===c?"normal":c.toLowerCase();ib.prototype.create.call(this,{model:this.parent,data:b,success:function(b){return function(d){return n("Invitations","Send Email "+b.objText+" Invite to New Member","Role: "+c)}}(this)});w.popView()};return b}(ke);var Vb,Gc,Cg,ei,Sc,fi,re,F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,
e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c},k=function(c,b){return function(){return c.apply(b,arguments)}};re=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="member";b.prototype.events={click:"showMenu"};b.prototype.initialize=function(){var b,c;this.showStatus=this.enablePopupMenu=!0;this.model&&(this.enablePopupMenu=null!=(b=this.options.enablePopupMenu)?b:!0,this.options.goToBoardProfile&&
(this.goToBoardProfile=!0),this.showStatus=null!=(c=this.options.showStatus)?c:!0,this.listenTo(this.model,"change",this.render));this.showBoardAdmin&&this.listenTo(this.getBoard(),"change:memberships",this.render);this.showOrganizationAdmin&&this.listenTo(this.getOrganization(),"change:memberships",this.render)};b.prototype.render=function(){var b,c,g,f,h;if(this.model){P("render","rendering "+this.constructor.name+" "+this.model.get("fullName"));b=this.model.toJSON();b.showStatus=this.showStatus;
b["status_"+b.status]=!0;b.url=C.getMemberProfileUrl(b.id);c=function(b){return function(c){c=c.getMembershipFor(b.model);return"admin"===(null!=c?c.memberType:void 0)}}(this);this.showBoardAdmin&&(b.isBoardAdmin=c(this.getBoard())||("function"===typeof this.getBoard?null!=(g=this.getBoard().getOrganization())?g.isPremOrgAdmin(this.model):void 0:void 0));b.isGhost="ghost"===this.model.get("memberType");this.showOrganizationAdmin&&(b.isOrganizationAdmin=c(this.getOrganization()));if((c=null!=(f="function"===
typeof this.getOrganization?this.getOrganization():void 0)?f:"function"===typeof this.getBoard?this.getBoard():void 0)&&c.isDeactivated(this.model))b.isDeactivated=!0,b.showStatus=!1;c&&c.isUnconfirmed(this.model)&&(b.showStatus=!1)}else b={deleted:!0};this.$el.html(v.fill("member",b));this.model.isFeatureEnabled("crown")&&this.$el.addClass("has-crown");this.enablePopupMenu||this.$el.addClass("member-no-menu");b.isDeactivated&&this.$el.addClass("member-deactivated");b.isGhost&&this.$el.addClass("member-virtual");
this.$el.data("id",null!=(h=this.model)?h.id:void 0);return this};b.prototype.showMenu=function(b){var c;if((this.doClicks()&&this.enablePopupMenu||this.goToBoardProfile)&&this.model){l.stop(b);if(this.goToBoardProfile&&(c=this.getBoard())){this.model.viewBoardProfile(this.getBoard());return}this.options.goToProfile?C.memberProfileView(this.model.get("username")):(b=$(b.target).closest(".member"),w.toggle({elem:b,top:b.hasClass("member")?35:16,view:this.getMenuView()}))}};b.prototype.doClicks=function(){return!Q.sorting};
return b}(A);Sc=function(c){function b(){this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){b.__super__.initialize.apply(this,arguments);return this.model.ond("change",this.render)};b.prototype.getViewTitle=function(){return this.model.getMemberViewTitle()};b.prototype.displayType="miniprofile";b.prototype.delegateEvents=function(c){return b.__super__.delegateEvents.call(this,_.extend({"click .js-profile":"showProfile","click .js-edit-profile":"editProfile",
"click .js-view-large":"viewLarge","click .js-change-av":"changeAvatar"},c||this.events))};b.prototype.render=function(){var b;b=this.model.toJSON();b.isMe=y.isMe(this.model);b.showEmail=null!=b.email&&!b.isMe;null==b.email&&("ghost"===this.model.get("memberType")&&!this.loaded)&&this.loadEmail();this.$el.html(v.fill("mini_profile",b,{},{member:v.member}));this.renderMenu();return this};b.prototype.loadEmail=function(){return M["for"](this.modelCache).loadMemberEmail(this.model.id,function(b){return function(c,
g){return b.loaded=!0}}(this))};b.prototype.showProfile=function(){n("Mini Profile","Click Profile")};b.prototype.editProfile=function(b){n("Mini Profile","Click Edit Profile");w.pushView({view:this.model.getView(fe)})};b.prototype.viewLarge=function(b){n("Mini Profile","View Large Avatar");w.pushView({view:this.model.getView(ei)})};b.prototype.changeAvatar=function(b){n("Mini Profile","Change Avatar");w.pushView({view:this.model.getView(Mc)})};return b}(A);ei=function(c){function b(){return b.__super__.constructor.apply(this,
arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Avatar"};b.prototype.displayType="avdetail";b.prototype.events={"click .js-profile":"showProfile"};b.prototype.render=function(){var b;b=this.model.toJSON();this.$el.html(v.fill("member_large_avatar",b));_.delay(function(b){return function(){return w.calcPos()}}(this),150);return this};b.prototype.showProfile=function(){n("Mini Profile","Large Avatar - Click Profile")};return b}(A);(function(c){function b(){this.getMenuView=k(this.getMenuView,
this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getMenuView=function(){return this.model.getView(Vb,this.model.cid)};return b})(re);Vb=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.renderMenu=function(){};return b}(Sc);Cg=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.events={"click .js-remove-member":"removeMember"};b.prototype.initialize=function(){b.__super__.initialize.apply(this,
arguments);this.card=this.options.card};b.prototype.renderMenu=function(){this.$el.append(v.fillMenu("member_on_card_menu",this.model.toJSON(),{editable:this.card.editable()}));return this};b.prototype.removeMember=function(b){w.hide();this.card.removeMember(this.model.id)};return b}(Sc);fi=function(c){function b(){this.getMenuView=k(this.getMenuView,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.showBoardAdmin=!0;b.prototype.getBoard=function(){return this.options.parent};
b.prototype.getMenuView=function(){return this.model.getView(Gc,"board",{board:this.options.parent})};return b}(re);Gc=function(c){function b(){this.removeMember=k(this.removeMember,this);this.changeRole=k(this.changeRole,this);this.renderMenu=k(this.renderMenu,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="board-member-menu";b.prototype.initialize=function(){this.board=this.options.board;return b.__super__.initialize.apply(this,arguments)};b.prototype.events=
{"click .js-remove-member":"removeMember","click .js-change-role":"changeRole"};b.prototype.renderMenu=function(){var b,c,g;b=_.extend(this.model.toJSON(),"function"===typeof(c=this.board).premiumFeatures?c.premiumFeatures():void 0,this.model.getMembershipData(this.board));b.boardProfileUrl=C.getMemberBoardProfileUrl(this.model.get("username"),this.board.id);b.type=null;b.memberIsVirtual?(b.type="Virtual",b.isGhost=!0):this.board.isDeactivated(this.model)?(b.type="Deactivated",b.canChangeRole=!1):
null!=(g=this.board.getOrganization())&&g.isPremOrgAdmin(this.model)?(b.type="Admin",b.canChangeRole=!1):b.memberIsAdmin?b.type="Admin":b.memberIsNormal?b.type="Normal":b.memberIsObserver&&(b.type="Observer");this.$el.append(v.fillMenu("member_on_board_menu",b,{editable:this.board.editable(),owned:this.board.owned()}));return this};b.prototype.changeRole=function(b){w.pushView({view:this.model.getView(ee,"",{parent:this.board})})};b.prototype.removeMember=function(b,c){l.stop(b);pa.pushView(_.extend(this.model.removeMembershipConfirmation(this.board),
{fxConfirm:function(b){return function(c){b.board.removeMember(b.model);return w.hide()}}(this)}))};return b}(Sc);var ng,Fc,k=function(c,b){return function(){return c.apply(b,arguments)}},F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c},D=[].indexOf||function(c){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===c)return b;return-1},G=[].slice;ng=function(c){function b(c,
e){this.board=c;this._resetNewCards=k(this._resetNewCards,this);b.__super__.constructor.call(this,null,e);this.board.onId(function(b){return function(c){b.set({id:"boardCardFilterSettings-"+c});b.fetch();return b._resetNewCards()}}(this));this.dueMap={day:1,week:7,month:28,overdue:0};this.newCardsWithoutIds=[];this.ond("change:title change:labels change:idMembers change:due",this._resetNewCards);this.ond("change",function(b){return function(){return b.trigger("changeAny")}}(this))}s(b,c);b.prototype["default"]=
function(){return{idMembers:[],labels:[],title:null,due:null,limitMembers:!0,newCards:[]}};b.prototype.clear=function(){return this.save(this["default"]())};b.prototype.getBoard=function(){return this.board};b.prototype._resetNewCards=function(){this.newCardsWithoutIds=[];return this.save("newCards",[])};b.prototype.toggleQuietMode=function(){var b,c,g,f;b=y.myId();if(null!=b){g=this["default"]();g.idMembers=[b];b=!0;for(c in g)f=g[c],b&&(b=_.isEqual(this.get(c),f));return b?this.clear():this.save(g)}};
b.prototype.toggleLabel=function(b){return this.toggle("labels",b)};b.prototype.toggleMember=function(b){return this.toggle("idMembers",b)};b.prototype.isFiltering=function(){var b;return _.some([!_.isEmpty(this.get("idMembers")),!_.isEmpty(this.get("labels")),null!=(b=this.get("title"))?b.trim():void 0,null!=this.get("due")])};b.prototype.satisfiesFilter=function(b){var c,g,f,h,k,l,u,n;if(null==b)return!1;if(b.get("closed")||(g=b.id,0<=D.call(null!=(f=this.get("newCards"))?f:[],g))||0<=D.call(this.newCardsWithoutIds,
b))return!0;n=["labels","idMembers"];f=0;for(u=n.length;f<u;f++)if(g=n[f],!_.isEmpty(this.get(g))&&_.isEmpty(_.intersection(this.get(g),b.get(g))))return!1;if(null!=this.get("due")){g=b.get("due");if(null==g)return!1;f=new Date;switch(this.get("due")){case "overdue":if(I.parse(g)>=f)return!1;break;default:if(!(f<=(k=I.parse(g))&&k<=f.addDays(this.dueMap[this.get("due")])))return!1}}k=this.get("title");if(null!=k&&(g=function(b){return _.compact(b.toLowerCase().split(/[\s\x21\x22\x24-\x26\x28-\x2C\x2F\x3A-\x3F\x5B-\x60\x7B-\x7F]+/))},
k=g(k),!_.isEmpty(k)&&(f=null!=b.get("idShort")?g(null!=(c=b.get("idShort"))?c.toString():void 0):[],b=_.flatten([g(b.get("name")),f]),c=2<=k.length?G.call(k,0,l=k.length-1):(l=0,[]),h=k[l++],_.isEmpty(c)||_.isEmpty(_.intersection(c,b)))))if(l=function(b){return b.substring(0,h.length)===h},!_.any(b,l))return!1;return!0};b.prototype.addNewCard=function(b){this.newCardsWithoutIds.push(b);return b.onId(function(c){return function(g){c.newCardsWithoutIds=_.without(c.newCardsWithoutIds,b);return c.addToSet("newCards",
g)}}(this))};b.prototype.toJSON=function(c){var e,g,f,h,k,q,u,n,s,v;f=null!=c?c:{};e=f.board;f=f.expanded;h=b.__super__.toJSON.apply(this,arguments);e&&(h.board=this.board.toJSON());f&&(n=null!=(v=this.get("title"))?v:"",q=RegExp("^"+l.escapeForRegex(n),"i"),k=this.board.toJSON({labelNames:!0}).labelNames,h.labels=function(){var b,c,d,e;d=l.labelNames;e=[];b=0;for(c=d.length;b<c;b++)g=d[b],e.push({labelName:k[g],color:g,isActive:0<=D.call(this.get("labels"),g),matchesFilter:""!==n&&(q.test(g)||q.test(k[g]))});
return e}.call(this),h.members=function(){var b,c,d,e,f,g;d=this.board.memberList.models;g=[];b=0;for(c=d.length;b<c;b++)u=d[b],g.push(_.extend(u.toJSON(),{isActive:(e=u.id,0<=D.call(null!=(f=this.get("idMembers"))?f:[],e)),matchesFilter:""!==n&&("me"===n&&y.isMe(u)||_.any(l.getMemNameArray(this.modelCache,u.id),function(b){return q.test(b)}))}));return g}.call(this),h.members=l.sortMembers(h.members),h.dueOptions=function(){var b,c,d,e;d=_.keys(this.dueMap);e=[];b=0;for(c=d.length;b<c;b++)s=d[b],
e.push({time:s,desc:"overdue"===s?"Overdue":"Due in the next "+s,isActive:s===this.get("due")});return e}.call(this));return h};return b}(vb);Fc=function(c){function b(){this.selectFirstItem=k(this.selectFirstItem,this);this.hoverSelect=k(this.hoverSelect,this);this.clearAllSelected=k(this.clearAllSelected,this);this.clearFilter=k(this.clearFilter,this);this.toggleDateFilter=k(this.toggleDateFilter,this);this.toggleMemberFilter=k(this.toggleMemberFilter,this);this.toggleLabelFilter=k(this.toggleLabelFilter,
this);this._clearAndFocusInput=k(this._clearAndFocusInput,this);this.showAllMembers=k(this.showAllMembers,this);this.keyUpEvent=k(this.keyUpEvent,this);this.keyDownEvent=k(this.keyDownEvent,this);this.renderFilterOptions=k(this.renderFilterOptions,this);this.render=k(this.render,this);this.initialize=k(this.initialize,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Filter Cards"};b.viewName="CardFilterView";b.prototype.className="board-widgets-content fancy-scrollbar";
b.prototype.initialize=function(){this.listenTo(this.model.board,"change:labelNames change:memberships",this.renderFilterOptions);return this.listenTo(this.model,"change",this.renderFilterOptions)};b.prototype.events={"click .js-toggle-label-filter":"toggleLabelFilter","click .js-select-member":"toggleMemberFilter","click .js-show-all-members":"showAllMembers","click .js-clear-all":"clearFilter","click .js-due-filter":"toggleDateFilter","mouseenter .item":"hoverSelect","mouseenter .js-clear-all":"clearAllSelected",
"mouseenter .js-show-all-members":"clearAllSelected","keydown .js-input":"keyDownEvent","keyup .js-input":"keyUpEvent"};b.prototype.render=function(){var b;this.isFiltering=!1;b=this.model.toJSON();this.$el.html(v.fill("filter_cards",b));this.renderFilterOptions();return this};b.prototype.renderFilterOptions=function(){var b,c,g,f,h,k,l,u,n,s;c=this.model.toJSON({board:!0,expanded:!0});f=_.any(c.labels,function(b){return b.matchesFilter});h=_.any(c.members,function(b){return b.matchesFilter});g=this.model.get("title")&&
(f||h);if(null!=(b=this.model.get("limitMembers"))?b:1){k=b=0;s=c.members;l=u=0;for(n=s.length;u<n;l=++u)if(l=s[l],!g||g&&l.matchesFilter)b++,6<b&&(l.exceedsLimit=!0,k++)}c.remainingMemsCount=k;c.limitMembers=0<k;_.extend(c,{filtering:g,showHelper:!g,showClearAll:!g,showLabels:!g||f,showMembers:!g||h,showDueTimes:!g});c.isFiltering=this.model.isFiltering();this.$(".js-filter-search-results").html(v.fill("filter_cards_search_results",c,{},{member:v.member,select_member:v.select_member}));g&&this.selectFirstItem();
null===this.model.get("title")&&this.$(".js-input").val("");return this};b.prototype.keyDownEvent=function(b){var c,g,f;c=this.$(".item.selected").first();0===c.length&&(g=this.$(".item.matches-filter"),1===g.length&&(c=g));27!==b.keyCode&&(13===b.keyCode?c.find("a").click():(38===(f=b.keyCode)||40===f)&&l.navMenuList(c.parent(),".item",b.keyCode))};b.prototype.keyUpEvent=function(b){var c;if(!(27===(c=b.keyCode)||13===c||38===c||40===c))return this.model.save({title:this.$(".js-input").val(),limitMembers:!0})};
b.prototype.showAllMembers=function(b){this.model.save("limitMembers",!1)};b.prototype._clearAndFocusInput=function(){this.model.save({title:""});return this.$(".js-input").val("").focus()};b.prototype.toggleLabelFilter=function(b){var c;c=this.model.toJSON({expanded:!0});_.any(c.labels,function(b){return b.matchesFilter})&&this._clearAndFocusInput();return this.model.toggleLabel($(b.target).closest("a").attr("name"))};b.prototype.toggleMemberFilter=function(b){var c;c=this.model.toJSON({expanded:!0});
_.any(c.members,function(b){return b.matchesFilter})&&this._clearAndFocusInput();l.stop(b);return this.model.toggleMember($(b.target).closest("a").attr("idMember"))};b.prototype.toggleDateFilter=function(b){b=$(b.target).closest("a").attr("time");return this.model.get("due")===b?this.model.save("due",null):this.model.save("due",b)};b.prototype.clearFilter=function(b){return this.model.clear()};b.prototype.clearAllSelected=function(){return this.$("li").removeClass("selected")};b.prototype.hoverSelect=
function(b,c){this.clearAllSelected();return l.selectMenuItem($(b.target).closest("ul"),".item",$(b.target).closest(".item"))};b.prototype.selectFirstItem=function(){return l.selectMenuItem(this.$(".js-filter-search-results ul:visible:first"),".item:visible",$(".item:visible:first"))};return b}(A);var je,fc,Mf,Xa,uh,th,Uh,Xh,Vh,sh,Wh,F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;
return c},D=[].indexOf||function(c){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===c)return b;return-1},k=function(c,b){return function(){return c.apply(b,arguments)}};je=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.model=ia;b.prototype.initialize=function(){this.bind("change:name",this.sort)};b.prototype.comparator=function(b){var c;c=b.getOrganization();c=(null!=c?c.get("displayName"):void 0)||"";b=b.get("name")||"";return l.rpad(c,
64).toUpperCase()+b.toUpperCase()};return b}(Ma);Xa=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){this.debouncedPostRenderBoardsEvent=this.debounce(this.postRenderBoardsEvent,150);this.initedSortable=!1;this.listenTo(this.model.boardList,"add remove reset",this.renderBoards)};b.prototype.className="window-module";b.prototype.getBoards=function(){return[]};b.prototype.hideSectionIfEmpty=function(){return!1};b.prototype.showOrgName=
function(){return!1};b.prototype.getTemplateData=function(){return{}};b.prototype.postRenderBoardsEvent=function(){};b.prototype.render=function(){var b;b=this.getTemplateData();this.$el.html(v.fill("board_list",b));this.renderBoards();this.debouncedPostRenderBoardsEvent();return this};b.prototype.renderBoards=function(){var b,c;b=this.$(".js-board-list").empty();this.$el.removeClass("hide");if(0<this.getBoards().length){var g,f,h,k;h=this.getBoards();k=[];g=0;for(f=h.length;g<f;g++)c=h[g],k.push(this.subview(fc,
c,{showOrgName:this.showOrgName()}));this.appendSubviews(k,b)}else this.hideSectionIfEmpty()?this.$el.addClass("hide"):b.append("<p class='quiet' style='padding: 8px 12px;'>No boards.</p>");return this};return b}(A);th=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getBoards=function(){var b;b=function(b){return function(c){var d;c=null!=(d=c.getOrganization())?d.id:void 0;return null!=c&&0<=D.call(b.model.get("idOrganizations"),c)}}(this);return _.filter(this.model.boardList.models,
function(c){return!b(c)&&!c.get("closed")})};b.prototype.getTemplateData=function(){return{title:"My Boards",iconClass:"member"}};return b}(Xa);sh=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){b.__super__.initialize.apply(this,arguments);return this.listenTo(this.model.boardStarList,"add remove reset change:pos",function(){return this.renderBoards()})};b.prototype.hideSectionIfEmpty=function(){return!0};b.prototype.showOrgName=
function(){return!0};b.prototype.getBoards=function(){return _.filter(this.model.boardStarList.getBoards(),function(b){return!b.get("closed")})};b.prototype.getTemplateData=function(){return{title:"Starred Boards",iconClass:"star"}};b.prototype.postRenderBoardsEvent=function(){var b;if(!ba.isTouch()){b=this.$(".js-board-list");if(this.initedSortable)return Q.refreshIfInitialized(b);this.initedSortable=!0;return b.sortable({containment:"#surface",delay:"75",distance:"7",forcePlaceholderSize:!0,items:"> li",
placeholder:"placeholder",scroll:!0,stop:function(b,c){_.defer(function(b){return function(){return c.item.trigger("moveto",[c,b])}}(this))},tolerance:"pointer"})}};return b}(Xa);uh=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){b.__super__.initialize.apply(this,arguments);return this.listenTo(this.getOrganization(),"change:name change:displayName change:logoHash",this.render)};b.prototype.getBoards=function(){return _.filter(this.model.boardList.models,
function(b){return function(c){var g;return(null!=(g=c.getOrganization())?g.id:void 0)===b.getOrganization().id&&!c.get("closed")}}(this))};b.prototype.getOrganization=function(){return this.options.organization};b.prototype.getTemplateData=function(){var b,c;c=this.getOrganization();b=c.toJSON();b.title=c.get("displayName");b.iconClass="org";b.url=C.getOrganizationUrl(c);b.hasBusinessClass=c.isPremium();return b};return b}(Xa);Wh=function(c){function b(){return b.__super__.constructor.apply(this,
arguments)}s(b,c);b.prototype.getBoards=function(){return _.filter(this.model.boardList.models,function(b){return"public"===b.getPref("permissionLevel")&&!b.get("closed")})};b.prototype.getTemplateData=function(){return{title:"Boards",iconClass:"board"}};return b}(Xa);Uh=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getBoards=function(){return _.filter(this.model.boardList.models,function(b){return function(c){return null!=b.Auth.me().boardList.get(c.id)&&
!c.get("closed")}}(this))};b.prototype.getTemplateData=function(){return{title:"My Org Boards",iconClass:"board"}};return b}(Xa);Vh=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getBoards=function(){return _.filter(this.model.boardList.models,function(b){return function(c){var g;return null==b.Auth.me().boardList.get(c.id)&&("org"===(g=c.getPref("permissionLevel"))||"public"===g)&&!c.get("closed")}}(this))};b.prototype.getTemplateData=function(){return{title:"Other Org-Visible Boards",
iconClass:"board"}};return b}(Xa);Xh=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getBoards=function(){return _.filter(this.model.boardList.models,function(b){return function(c){return null==b.Auth.me().boardList.get(c.id)&&"private"===c.getPref("permissionLevel")&&!c.get("closed")}}(this))};b.prototype.getTemplateData=function(){return{title:"Other Members\u2019 Private Boards",iconClass:"board"}};return b}(Xa);fc=function(c){function b(){this.render=
k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.tagName="li";b.prototype.initialize=function(){var b;this.model.ond("change:prefs change:name change:idOrganization change:actionsCount",this.render);this.listenTo(y.me().boardStarList,"add remove reset change:pos",function(){return this.renderStarred()});this.model.ond("change:dateLastActivity change:dateLastView",function(b){return function(){return b.renderUnread()}}(this));if(null!=(b=this.options)&&b.showOrgName)return this.listenTo(this.model,
"change:idOrganization",function(b){return function(c){c=b.Organization.get(b.model.previous("idOrganization"));null!=c&&b.stopListening(c,"change:displayName");b.listenToOrgNameChange();return b.render()}}(this)),this.listenToOrgNameChange()};b.prototype.listenToOrgNameChange=function(){if(null!=this.model.getOrganization())return this.listenTo(this.model.getOrganization(),"change:displayName",this.render)};b.prototype.events={"click .js-open-board":"openBoard","click .js-star-board":"starBoard",
moveto:"moveTo"};b.prototype.render=function(){var b,c,g,f,h;c=this.model.toJSON({prefs:!0});c.url=C.getBoardUrl(this.modelCache,this.model);this.model.getPref("backgroundTile")?(c.backgroundTile=!0,c.backgroundImageThumbnail=this.model.getPref("backgroundImage")):c.backgroundImageThumbnail=null!=(b=null!=(g=l.smallestPreviewBiggerThan(this.model.getPref("backgroundImageScaled"),400,200))?g.url:void 0)?b:this.model.getPref("backgroundImage");c.backgroundImageThumbnailUrl="url('"+c.backgroundImageThumbnail+
"')";null==c.backgroundImageThumbnail&&(c.backgroundColor=this.model.getClientBackgroundColor("blue"));null!=this.model.getPref("backgroundColor")&&(b=this.model.getPref("background"),c.backgroundColor=this.model.getClientBackgroundColor(b));c.backgroundBrightness=this.model.getPref("backgroundBrightness");if(null!=(f=this.options)&&f.showOrgName)c.orgname=null!=(h=this.model.getOrganization())?h.get("displayName"):void 0;this.$el.html(v.fill("board_list_item",c));this.renderStarred();this.renderUnread();
return this};b.prototype.trackBoardClick=function(){return n("Member View","Boards Page","Opened Board")};b.prototype.openBoard=function(b){_.defer(function(){if(!W.getPinSidebar())return W.hideSidebar()});return this.trackBoardClick()};b.prototype.starBoard=function(b){var c;l.stop(b);c=this.model.id;b=this.Auth.me().boardStarList;null==b.getBoardStar(c)?b.starBoard(c):b.unstarBoard(c)};b.prototype.renderUnread=function(){var b;b=this.model.hasUnseenActivity()&&!C.onBoardView(this.model.id);this.$(".js-unread").toggleClass("any",
b);this.$el.toggleClass("has-unread-activity",b);return this};b.prototype.moveTo=function(b,c){var g;g=c.item.closest(".js-board-list").find("li").index(c.item);y.me().boardStarList.updateStarBoard(this.model.id,g)};b.prototype.renderStarred=function(){null!=y.me().boardStarList.getBoardStar(this.model.id)?(this.$el.addClass("starred"),this.$(".icon-star").addClass("icon-star-active")):(this.$el.removeClass("starred"),this.$(".icon-star").removeClass("icon-star-active"));return this};return b}(A);
Mf=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.events={mouseenter:"select",mouseleave:"deselect"};b.prototype.delegateEvents=function(c){return b.__super__.delegateEvents.call(this,_.extend({},fc.prototype.events,c||this.events))};b.prototype.select=function(){return this.$el.addClass("selected")};b.prototype.deselect=function(){return this.$el.removeClass("selected")};b.prototype.trackBoardClick=function(){return n("Search","Select Board")};return b}(fc);
var gi,yb,hi,se,ii,Hc,Qd,gb,Wa,ji,Rd,ki,te,tg,li,mi,be,Kc,rg,ue,ni,Sd,k=function(c,b){return function(){return c.apply(b,arguments)}},F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c},D=[].indexOf||function(c){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===c)return b;return-1};Wa=function(c){function b(){this.setSidebarContentHeight=k(this.setSidebarContentHeight,
this);this.openCardFilter=k(this.openCardFilter,this);this.pushWidgetView=k(this.pushWidgetView,this);this.renderWidget=k(this.renderWidget,this);this.initialize=k(this.initialize,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){X.addHandler(this,{scope:"board_sidebar"})};b.prototype.events={"click .js-hide-sidebar":"hideSidebar","click .js-pop-widget-view":"popWidgetView",shortcut:"shortcut"};b.prototype.shortcut=function(b){switch(b){case 70:return this.openCardFilter(),
"F - Search and Filter Cards"}};b.prototype.render=function(){this.$el.html(v.fill("board_sidebar"));this.renderWidget();return this};b.prototype.renderWidget=function(b){var c,g,f,h,k,q,u;f=this.$(".board-widgets-title");h=f.find(".text").empty();g=this.$(".board-widgets-content-wrapper").empty();q=this.model.viewState.getCurrentSidebarView();this.forceIntoDom();this.model.viewState.setSidebarDisplayType(null!=(c=q.displayTypeClass)?c:"");c=q.render().$el;null!=b&&c.addClass(b);null!=q.getViewTitle?
(f.addClass("in-frame"),h.append("function"===typeof q.getViewTitle?q.getViewTitle():void 0)):f.removeClass("in-frame");g.append(c);this.setSidebarContentHeight();null!=(u=this.model.getView(gb))&&u.calcActionsHeight();c.scrollTop(0);k=this.$(".js-autofocus")[0];if(null!=k&&this.model.viewState.get("showSidebar")&&!ba.isTouch())if(null!=b)$(".board-widgets-content").one("transitionend webkitTransitionEnd",function(b){return function(b){return l.setCaretAtEnd(k)}}(this));else l.setCaretAtEnd(k);null!=
b&&c.removeClass(b);q.delegateEvents();return this};b.prototype.pushWidgetView=function(b){this.model.viewState.pushSidebarView(b);this.renderWidget("right-of-frame");w.hide()};b.prototype.popWidgetView=function(){this.model.viewState.popSidebarView();this.renderWidget("left-of-frame");w.hide()};b.prototype.hideSidebar=function(){return this.model.viewState.setShowSidebar(!1)};b.prototype.openCardFilter=function(c){var e,g,f,h;l.stop(c);e=this.model.filter.getView(Fc);f=this.model.viewState.get("showSidebar");
c=this.model.viewState.getCurrentSidebarView()===e;g=this.$(".js-autofocus")[0];c?f?f&&l.setCaretAtEnd(g):($(".board-widgets-content").one("transitionend webkitTransitionEnd",function(b){return function(b){return l.setCaretAtEnd(g)}}(this)),this.model.viewState.setShowSidebar(!0)):(f||this.model.viewState.setShowSidebar(!0),this.model.viewState.clearSidebarViewArray(),null!=(h=this.model.getView(b))&&h.pushWidgetView(e))};b.prototype.openArchivedItems=function(c){var e;l.stop(c);c=this.model.getView(Va);
this.model.viewState.get("showSidebar")||this.model.viewState.setShowSidebar(!0);this.model.viewState.getCurrentSidebarView()!==c&&(null!=(e=this.model.getView(b))&&e.pushWidgetView(c),c.getData())};b.prototype.setSidebarContentHeight=function(){var b;b=$(window).height()-$("#header").outerHeight()-$(".board-widgets-title:visible").outerHeight()-20;return 1<this.model.viewState.get("sidebarViewArray").length?this.$(".board-widgets-content").height(b):this.$(".board-widgets-content").height(b+10)};
return b}(A);gb=function(c){function b(){this.showPowerUps=k(this.showPowerUps,this);this.leaveConfirm=k(this.leaveConfirm,this);this.closeConfirm=k(this.closeConfirm,this);this.copyBoard=k(this.copyBoard,this);this.shareBoard=k(this.shareBoard,this);this.toggleSubscribe=k(this.toggleSubscribe,this);this.viewAllActivityList=k(this.viewAllActivityList,this);this.openAddMembers=k(this.openAddMembers,this);this.joinBoard=k(this.joinBoard,this);this.showCardFilter=k(this.showCardFilter,this);this.showObservers=
k(this.showObservers,this);this.renderObservers=k(this.renderObservers,this);this.renderMembers=k(this.renderMembers,this);this.toggleWidgetNav=k(this.toggleWidgetNav,this);this.calcActionsHeight=k(this.calcActionsHeight,this);this.renderSubscribeState=k(this.renderSubscribeState,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.viewName="BoardSidebarDefaultView";b.prototype.className="board-widgets-content default fancy-scrollbar";b.prototype.initialize=
function(){this.collapseWidgetNav=!0;this.makeDebouncedMethods("render");this.model.memberList.ond("change:status",this.renderMembers).onAddRemove(this.renderDebounced);this.model.ond("change:memberships",this.renderDebounced).ond("change:subscribed",this.renderSubscribeState).ond("change:prefs:canInvite",this.renderDebounced).on("change:prefs.selfJoin",this.renderDebounced).on("change:prefs.invitations",this.renderDebounced);this.actionListView=this.collectionSubview(Qb,new xb(this.Action.getListForModel(this.model),
{modelCache:this.modelCache}),{renderOpts:{limit:10,context:this.model,compact:!0,excludeTypes:["copyCommentCard"]}});return this.listenTo(this.modelCache,"add:Action:"+this.model.id+" remove:Action:"+this.model.id+" change:Action:"+this.model.id,function(b){return function(){return b.actionListView.collection.reset(b.Action.getListForModel(b.model))}}(this))};b.prototype.events={"click .js-toggle-widget-nav":"toggleWidgetNav","click .js-open-card-filter":"showCardFilter","click .js-open-stickers":"openStickers",
"click .js-open-settings":"openSettings","click .js-open-archive":"openArchivedItems","click .js-open-power-ups":"showPowerUps","click .js-join-board":"joinBoard","click .js-change-background":"changeBackground","click .js-email":"openEmailSettings","click .js-board-subscribe":"toggleSubscribe","click .js-copy-board":"copyBoard","click .js-share":"shareBoard","click .js-close-board":"closeConfirm","click .js-leave-board":"leaveConfirm","click .js-open-manage-board-members":"openAddMembers","click .js-show-observers":"showObservers",
"click .js-view-all-activity-list":"viewAllActivityList"};b.prototype.render=function(){var b,c,g,f,h,k,q,u,n;this.$(".board-widgets-title").hide();g=y.me();c=this.model.toJSON();c.canJoin=this.model.canJoin();c.canInviteMembers=this.model.canInviteMembers();c.confirmed=g.get("confirmed");c.collapseWidgetNav=this.collapseWidgetNav;f=this.model.getOrganization();if(this.model.owned()||null!=f&&f.isFeatureEnabled("superAdmins")&&null!=f&&f.owned())c.canCloseBoard=!0;c.canLeaveBoard=("normal"===(h=this.model.getExplicitMemberType(g))||
"admin"===h||"observer"===h)&&g.getMembershipData(this.model).canRemove;null!=(null!=(k=Sa[this.model.getPref("background")])?k.tile:void 0)?c.backgroundImageUrl=this.model.getPref("backgroundImage"):null!=this.model.getPref("backgroundImageScaled")||null!=this.model.getPref("backgroundImage")?c.backgroundImageUrl=null!=(q=null!=(u=null!=(n=l.previewBetween(this.model.getPref("backgroundImageScaled"),90,60,600,400))?n.url:void 0)?u:this.model.get("fullSizeUrl"))?q:this.model.getPref("backgroundImage"):
null!=this.model.getPref("backgroundColor")?c.backgroundColor=this.model.getClientBackgroundColor(this.model.getPref("background")):c.backgroundColor=this.model.getClientBackgroundColor("blue");this.$el.html(v.fill("board_widget_default",c,{editable:this.model.editable(),owned:this.model.owned()}));null!=(b=Pc.boardMenuAd(g,this.model))&&this.$(".js-ad").html(this.model.getView(b).render().el);this.actionListView.setElement(this.$(".js-sidebar-list-actions")[0]);this.renderMembers();this.renderActions();
this.calcActionsHeight();this.renderSubscribeState();return this};b.prototype.renderSubscribeState=function(){var b;b=this.model.toJSON();this.$(".js-subscribed-state").html(v.fill("board_menu_subscribed_state",b))};b.prototype.calcActionsHeight=function(){var b,c,g,f,h,k;c=$("#board").height();if(0!==c){b=this.$(".board-widget:not(.board-widget-activity)");h=f=0;for(k=b.length;h<k;h++)g=b[h],f+=$(g).outerHeight()+8;b=c-f;200>b||qa.fSmall?(this.$el.addClass("short"),b=""):this.$el.removeClass("short");
return this.$(".board-actions-list").css({"max-height":b})}};b.prototype.toggleWidgetNav=function(b){l.stop(b);w.hide();n("Board View","Board Menu","Toggle Widget Nav");b=this.$(".js-toggle-widget-nav").closest(".board-widget");b.hasClass("collapsed")?(b.removeClass("collapsed"),this.collapseWidgetNav=!1):(b.addClass("collapsed"),this.collapseWidgetNav=!0);this.calcActionsHeight()};b.prototype.renderMembers=function(){var b,c,g;b=this.$(".js-list-board-members").empty();g=function(){var b,d,g,k;g=
this.model.orderedVisibleMembers();k=[];b=0;for(d=g.length;b<d;b++)c=g[b],k.push(this.subview(fi,c,{parent:this.model}));return k}.call(this);this.appendSubviews(g,b);this.renderObservers();_.defer(function(){return Q.refreshDraggable()});return this};b.prototype.renderObservers=function(){var b,c,g;b=this.$(".js-list-observers");g=this.model.getObserverList().length;c={count:l.formatCount(g,"Observer")};0<g?b.html(v.fill("board_observer_count",c)):b.empty();return this};b.prototype.showObservers=
function(b){l.stop(b);n("Board View","Show Observers");w.toggle({elem:this.$(".js-show-observers"),top:30,view:fg,options:{model:this.model},shown:function(){return Q.refreshDraggable()}})};b.prototype.renderActions=function(){this.actionListView.render();return this};b.prototype.showCardFilter=function(b){var c;l.stop(b);n("Board View","Board Menu","Open Card Filter Menu");null!=(c=this.model.getView(Wa))&&c.pushWidgetView(this.model.filter.getView(Fc))};b.prototype.openStickers=function(b){var c;
l.stop(b);n("Board View","Board Menu","Open Stickers");null!=(c=this.model.getView(Wa))&&c.pushWidgetView(this.model.getView(Sd))};b.prototype.openSettings=function(b){var c;l.stop(b);n("Board View","Board Menu","Open Settings");null!=(c=this.model.getView(Wa))&&c.pushWidgetView(this.model.getView(Qd))};b.prototype.openArchivedItems=function(b){var c;l.stop(b);n("Board View","Board Menu","Open Archived Items");b=this.model.getView(Va);null!=(c=this.model.getView(Wa))&&c.pushWidgetView(b);b.getData()};
b.prototype.joinBoard=function(b){n("Board View","Join Board via Sidebar");l.preventDefault(b);this.$(".board-widget .js-join-board").closest(".board-widget").remove();this.model.joinBoard();return!1};b.prototype.openAddMembers=function(b){var c;l.stop(b);n("Board View","Add Members via Sidebar Button");c=new yb({model:this.model,modelCache:this.modelCache});c.getOrgData();w.toggle({elem:$(b.target).closest(".js-open-manage-board-members"),top:35,view:c})};b.prototype.viewAllActivityList=function(b){l.stop(b);
n("Board View","View All Board Activity","From End of List");Y.show({view:new gi({model:this.model,modelCache:this.modelCache}),displayType:"slim"})};b.prototype.toggleSubscribe=function(b){l.preventDefault(b);$(b.target).hasClass("disabled")||(this.model.get("subscribed")?this.model.subscribe(!1):this.model.subscribe(!0),n("Board View","Board Menu","Subscribe/Unsubscribe"))};b.prototype.shareBoard=function(b){l.stop(b);w.toggle({elem:$(b.target).closest("a"),top:32,view:this.model.getView(jg)});
n("Board View","Board Menu","Open Share, Print, and Export Menu")};b.prototype.copyBoard=function(b){l.stop(b);$(b.target).hasClass("disabled")||(n("Board View","Board Menu","Open Copy Board"),w.toggle({elem:$(b.target).closest("a"),top:32,view:this.model.getView(ud,"copy",{copyBoard:!0}),autoPosition:!0}))};b.prototype.changeBackground=function(b){var c;l.stop(b);n("Board View","Board Menu","Change Background");null!=(c=this.model.getView(Wa))&&c.pushWidgetView(this.model.getView(Rd))};b.prototype.openEmailSettings=
function(b){l.stop(b);w.toggle({elem:$(b.target).closest("a"),top:32,view:this.model.getView(mi)});n("Board View","Board Menu","Open Email Settings - Menu")};b.prototype.closeConfirm=function(b){l.stop(b);n("Board View","Board Menu","Open Close Menu");pa.toggle({elem:$(b.target).closest("a"),top:32,model:this.model,title:"Close Board?",text:'You can re-open the board by clicking the "Boards" menu from the header, selecting "View Closed Boards", finding the board and clicking "Re-open".',confirmText:"Close",
confirmBtnClass:"negate",fxConfirm:function(b){return function(c){b.model.close();return n("Board","Close Board")}}(this)})};b.prototype.leaveConfirm=function(b){var c;l.stop(b);n("Board View","Board Menu","Open Leave Menu");c=y.me();pa.toggle(_.extend(c.removeMembershipConfirmation(this.model),{elem:$(b.target).closest("a"),top:32,fxConfirm:function(b){return function(d){return b.model.removeMember(c)}}(this)}))};b.prototype.showPowerUps=function(b){l.stop(b);Y.show({view:new yd({model:this.model}),
displayType:"power-ups"});n("Board View","Board Menu","Open Power-Ups")};return b}(A);Sd=function(c){function b(){this.setUploadImage=k(this.setUploadImage,this);this.selectSticker=k(this.selectSticker,this);this.renderCustomStickers=k(this.renderCustomStickers,this);this.renderPremiumStickers=k(this.renderPremiumStickers,this);this.renderStandardStickers=k(this.renderStandardStickers,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=
function(){b.__super__.initialize.apply(this,arguments);M["for"](this.modelCache).loadMemberCustomStickers(y.me().id);return this.listenTo(this.Member.get(y.myId()).customStickerList,"change add remove reset",this.renderCustomStickers)};b.prototype.getViewTitle=function(){return"Stickers"};b.viewName="StickerPickerView";b.prototype.className="board-widgets-content fancy-scrollbar";b.prototype.displayTypeClass="sidebar-display-wide";b.prototype.events={"click .js-sticker":"selectSticker","click .js-gold-promo":"openGoldPromo",
"click .js-bc-promo":"openBCPromo","change .js-upload-image":"setUploadImage"};b.prototype.render=function(){this.$el.html(v.fill("sticker_select"));this.renderStandardStickers();this.renderPremiumStickers();this.renderCustomStickers();this.refreshDraggable();return this};b.prototype._getStickers=function(b){var c,g,f;f=[];for(g in Mb)c=Mb[g],b(c)&&f.push(new Qc(_.extend({image:g},c),{modelCache:this.modelCache}));return f};b.prototype._loadStickers=function(b){var c;b.addClass("sticker-list-loading");
c=b.find(".sticker-select-image");return async.forEach(c,function(b,c){var d;d=$(b);d.load(function(){return c()});return d.error(function(){return c()})},function(c){return b.removeClass("sticker-list-loading")})};b.prototype.renderStandardStickers=function(){var b,c,g;b=this.$(".js-standard-sticker-list");c=function(){var b,c,d,e;d=this._getStickers(function(b){return"standard"===b.type});e=[];b=0;for(c=d.length;b<c;b++)g=d[b],e.push(g.getView(Rc).render().el);return e}.call(this);b.append(c);this._loadStickers(b);
return this};b.prototype.renderPremiumStickers=function(){var b,c,g,f,h,k,l,u,n,s;c=this.Member.get(y.myId());k=null!=(b=this.model.getOrganization())?b:null;b=this.$(".js-premium-stickers");h=(null!=c?c.isFeatureEnabled("additionalStickers"):void 0)||(null!=k?k.isFeatureEnabled("additionalStickers"):void 0);for(l in ha)f=ha[l].displayName,c=$(v.fill("sticker_pack_selection_list",{displayName:f})),g=c.filter(".js-sticker-list"),n=this._getStickers(function(b){return"premium"===b.type&&b.pack.displayName===
f}),s=function(){var b,c,d;d=[];b=0;for(c=n.length;b<c;b++)u=n[b],d.push(u.getView(Rc,""+f,{org:k}).render().el);return d}(),g.append(s),this._loadStickers(g),b.append(c),h||g.append(v.fill("product_promo_button"));return this};b.prototype.renderCustomStickers=function(){var b,c,g,f,h,k;f=this.Member.get(y.myId());h=null!=(b=this.model.getOrganization())?b:null;b=this.$(".js-custom-sticker-list").empty();if((c=(null!=f?f.isFeatureEnabled("customStickers"):void 0)||(null!=h?h.isFeatureEnabled("customStickers"):
void 0))&&null!=f)k=function(){var b,c,d,e;d=f.customStickerList.models;e=[];b=0;for(c=d.length;b<c;b++)g=d[b],e.push(g.getView(Zh,"custom",{org:h}).render().el);return e}(),b.append(k);c||b.append(v.fill("product_promo_button"));b.append(v.fill("sticker_select_item_upload",{id:y.myId()}));_.defer(function(b){return function(){return b.refreshDraggable()}}(this));return this};b.prototype.refreshDraggable=function(){_.defer(function(b){return function(){if(!ba.isTouch())return b.$(".js-draggable-sticker:not(.disabled)").draggable({revert:"invalid",
revertDuration:150,appendTo:"#surface",containment:"#surface",zIndex:100,helper:"clone",delay:"75",distance:"7",start:function(b,c){var d;Q.startSort(b,c);d=(20*Math.random()-10)%360;$(c.helper).find(".sticker-select-fixed").css({transform:"rotate("+d+"deg)","-webkit-transform":"rotate("+d+"deg)"});n("Board View","Drag Sticker from Sidebar")},stop:function(b,c){l.stopPropagation(b);Q.endSort()},drag:function(b,c){_.throttle(Q.getScrollListForMemberSidebarDrag(b,c),100)},custom:{refreshContainers:function(){var b,
c,d,h,k,l;l=[];for(c=h=k=this.containers.length-1;0>=k?0>=h:0<=h;c=0>=k?++h:--h)b=this.containers[c].element,d=$(b).closest(".list"),d.length&&(b=d),d=b.offset(),this.containers[c].containerCache.left=d.left,this.containers[c].containerCache.top=d.top,this.containers[c].containerCache.width=b.outerWidth(),l.push(this.containers[c].containerCache.height=b.outerHeight());return l}}})}}(this))};b.prototype.selectSticker=function(b){};b.prototype.setUploadImage=function(b){l.stop(b);b=this.$(".js-upload-image");
if(null==b.prop("files")&&b.val())l.uploadFile(b,function(){});else if(b=b[0].files,0<b.length)return this.uploadStickers(b)};b.prototype.uploadStickers=function(b){var c,g,f,h,k,q;f=y.me().customStickerList;q=[];g=h=0;for(k=b.length;h<k;g=++h)c=b[g],q.push(function(b){return function(b){var d;b=new FileReader;if(l.validFileSize(c))return d=new FormData,d.append("token",y.myToken()),d.append("file",c),b.onload=function(b){return f.create({url:b.target.result},{data:d,processData:!1,contentType:!1,
error:function(b){b.set("error","Failed");return setTimeout(function(){return b.destroy()},5E3)}})},b.readAsDataURL(c);O.flash("File Too Large","error")}}(this)(g));return q};b.prototype.openGoldPromo=function(b){var c;Y.show({view:null!=(c=y.me())?c.getView(Kc):void 0});n("Board Menu","Open Trello Gold Promo - via Sticker Picker")};b.prototype.openBCPromo=function(b){return n("Board Menu","Open Business Class Promo - via Sticker Picker")};return b}(A);Kc=function(c){function b(){return b.__super__.constructor.apply(this,
arguments)}s(b,c);b.prototype.render=function(){var b,c;b={username:null!=(c=y.me())?c.get("username"):void 0};this.$el.html(v.fill("promo_gold_content",b,{},{card:v.card_in_list}));ve(this.$el);return this};return b}(A);Qd=function(c){function b(){this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Settings"};b.viewName="BoardSettingsView";b.prototype.className="board-widgets-content fancy-scrollbar";b.prototype.events=
{"click .js-change-labels:not(.disabled)":"changeLabels","click .js-change-org:not(.disabled)":"changeOrg","click .js-toggle-covers:not(.disabled)":"toggleCovers","click .js-change-comments:not(.disabled)":"changeCommentingPerms","click .js-change-add-members:not(.disabled)":"changeAddMemberPerms","click .js-toggle-org-mem-join:not(.disabled)":"toggleSelfJoin"};b.prototype.initialize=function(){this.model.ond("change",this.render)};b.prototype.render=function(){var b,c;b=this.model.toJSON({prefs:!0,
url:!0,labels:!0});b.cardCovers=b.prefs.cardCovers;c=this.model.getOrganization();b.orgDisplayName=null!=c?c.get("displayName"):void 0;b.hasOrg=null!=(null!=c?c.id:void 0);b.commentsDisplay=this.model.getDisplayCommentPerms();b.invitationsDisplay=this.model.getDisplayInvitePerms();b.canChangeOrg=(null!=c?c.owned():void 0)||this.model.owned();null!=c&&c.owned()&&!this.model.owned()&&(b.setOrgNull=!0);this.$el.html(v.fill("board_menu_settings",b,{editable:this.model.editable(),owned:this.model.owned()}));
return this};b.prototype.changeLabels=function(b){l.stop(b);w.toggle({elem:$(b.target).closest("a"),top:36,view:be,options:{model:this.model,modelCache:this.modelCache}});n("Board View","Settings","Change Labels")};b.prototype.changeOrg=function(b){var c;l.stop(b);this.model.owned()?(w.toggle({elem:$(b.target).closest("a"),top:52,view:Hc,options:{model:this.model,modelCache:this.modelCache}}),n("Board View","Settings","Change Org")):(b=this.model.get("idOrganization"),null!=(c=this.Organization.get(b))&&
c.boardList.remove(this.model),this.model.update("idOrganization",""),w.hide(),n("Board View","Settings","Remove Org"))};b.prototype.toggleCovers=function(b,c){l.stop(b);this.model.setPref("cardCovers",!this.model.getPref("cardCovers"));n("Board View","Settings","Enable/Disable Cover Images")};b.prototype.changeCommentingPerms=function(b){l.stop(b);w.toggle({elem:$(b.target).closest("a"),top:52,view:this.model.getView(ki)});n("Board View","Settings","Open Change Commenting Permissions")};b.prototype.changeAddMemberPerms=
function(b){l.stop(b);w.toggle({elem:$(b.target).closest("a"),top:52,view:this.model.getView(ji)});n("Board View","Settings","Open Change Add Member Permissions")};b.prototype.toggleSelfJoin=function(b){l.stop(b);this.model.setPref("selfJoin",!this.model.getPref("selfJoin"));this.model.save();n("Board View","Settings","Toggle Allow Org Join")};return b}(A);Rd=function(c){function b(){this.setUploadImage=k(this.setUploadImage,this);this.uploadBackgroundsAndAddPreviews=k(this.uploadBackgroundsAndAddPreviews,
this);this.fillBackgroundList=k(this.fillBackgroundList,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Change Background"};b.viewName="ChangeBoardBackgroundView";b.prototype.displayTypeClass="sidebar-display-wide";b.prototype.className="board-widgets-content fancy-scrollbar";b.prototype.events={"click .js-gold-promo":"openGoldPromo","click .js-bc-promo":"openBCPromo","change .js-upload-image":"setUploadImage"};b.prototype.initialize=function(){var c;
b.__super__.initialize.apply(this,arguments);this.makeDebouncedMethods("render","renderCustomBackgrounds");this.listenTo(this.Auth.me().boardBackgroundList,"change add remove reset",this.renderCustomBackgroundsDebounced);if(y.me().isFeatureEnabled("customBoardBackgrounds")||null!=(c=this.model.getOrganization())&&c.isFeatureEnabled("customBoardBackgrounds"))return M["for"](this.modelCache).loadMemberCustomBackgrounds(y.myId())};b.prototype.fillBackgroundList=function(b,c,g){var f;null==g&&(g=ue);
b.find(".js-select-background:not(.js-uploader)").remove();this.appendSubviews(function(){var b,d,k;k=[];b=0;for(d=c.length;b<d;b++)f=c[b],k.push(this.subview(g,f,{board:this.model}));return k}.call(this),b)};b.prototype.render=function(){var b,c,g,f,h;f=this.model.toJSON();f.enabled_additionalBackgrounds=y.me().isFeatureEnabled("additionalBoardBackgrounds")||(null!=(b=this.model.getOrganization())?b.isFeatureEnabled("additionalBoardBackgrounds"):void 0);f.enabled_customBoardBackgrounds=y.me().isFeatureEnabled("customBoardBackgrounds")||
(null!=(c=this.model.getOrganization())?c.isFeatureEnabled("customBoardBackgrounds"):void 0);f.idMember=y.myId();this.$el.html(v.fill("board_change_background",f));h=function(b){return function(b,c){var d,e,f,g;g=[];for(e in Sa)d=Sa[e],d.type===b&&((null!=(f=d.pack)?f.name:void 0)===c&&!d.discontinued)&&g.push(new Vd(_.extend({name:e},d)));return g}}(this);b=this.$(".js-default-list");g=this.$(".js-gold-photos-list");c=this.$(".js-gold-patterns-list");this.fillBackgroundList(b,h("default"));this.fillBackgroundList(g,
h("premium","Photos"));this.fillBackgroundList(c,h("premium","Patterns and Textures"));f.enabled_additionalBackgrounds||(g.append(v.fill("product_promo_button")),c.append(v.fill("product_promo_button")));this.renderCustomBackgrounds();return this};b.prototype.renderCustomBackgrounds=function(){var b,c;c=y.me().isFeatureEnabled("customBoardBackgrounds")||(null!=(b=this.model.getOrganization())?b.isFeatureEnabled("customBoardBackgrounds"):void 0);b=this.$(".js-custom-list");c?(c=this.Member.get(y.myId()),
c=c.boardBackgroundList.filter(function(b){return"custom"===b.get("type")}),this.fillBackgroundList(b,c,ni),b.find(".js-uploader").appendTo(b)):b.append(v.fill("product_promo_button"));return this};b.prototype.uploadBackgroundsAndAddPreviews=function(b){var c,g,f,h,k;k=[];g=f=0;for(h=b.length;f<h;g=++f)c=b[g],k.push(function(b){return function(d){var f;d=new FileReader;if(l.validFileSize(c))return f=new FormData,f.append("token",y.myToken()),f.append("file",c),d.onload=function(c){return b.Member.get(y.myId()).boardBackgroundList.create({type:"custom",
fullSizeUrl:c.target.result},{data:f,processData:!1,contentType:!1,error:function(b){b.set("error","Failed");return setTimeout(function(){return b.destroy()},5E3)},success:function(c){var d;d=b.model;_.extend(d.attributes.prefs,{backgroundColor:c.get("color"),backgroundImage:c.get("fullSizeUrl"),backgroundImageScaled:c.get("scaled"),backgroundTile:c.get("tile"),backgroundBrightness:c.get("brightness")});return d.setPref("background",c.id)}})},d.readAsDataURL(c);O.flash("File Too Large","error")}}(this)(g));
return k};b.prototype.setUploadImage=function(b){l.stop(b);b=this.$(".js-upload-image");n("Board","Upload custom background");null==b.prop("files")&&b.val()?l.uploadFile(b,function(){}):(b=b[0].files,0<b.length&&this.uploadBackgroundsAndAddPreviews(b))};b.prototype.openGoldPromo=function(b){var c;Y.show({view:null!=(c=y.me())?c.getView(Kc):void 0});n("Board Menu","Open Trello Gold Promo - via Change Background")};b.prototype.openBCPromo=function(b){return n("Board Menu","Open Business Class Promo - via Change Background")};
return b}(A);ue=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){b.__super__.initialize.apply(this,arguments);return this.listenTo(this.model,"change:error",this.render)};b.prototype.className="board-background-select js-select-background";b.prototype.events={click:"selectBackground","click .js-background-attribution":"clickAttribution"};b.prototype.render=function(){var b,c,g;b=this.model.toJSON();b.pending=null==this.getId()&&
null==b.error;null==b.color&&(b.backgroundImageThumbnail=null!=(c=null!=(g=l.previewBetween(this.model.get("scaled"),90,60,600,400))?g.url:void 0)?c:this.model.get("fullSizeUrl"));this.$el.html(v.fill("board_background_selection",b));this.$el.toggleClass("board-background-still-uploading",b.pending);return this};b.prototype.clickAttribution=function(b){b.stopPropagation();return n("Board Menu","Change Background","Clicked Attribution")};b.prototype.getId=function(){return this.model.get("name")};
b.prototype.selectBackground=function(b){var c,g;l.stop(b);null!=this.getId()&&(b=this.options.board,_.extend(b.attributes.prefs,{backgroundColor:this.model.get("color"),backgroundImage:this.model.get("fullSizeUrl"),backgroundImageScaled:this.model.get("scaled"),backgroundTile:null!=(c=this.model.get("tile"))?c:!1,backgroundBrightness:null!=(g=this.model.get("brightness"))?g:"unknown"}),b.setPref("background",this.getId()),n("Board Menu","Change Background",this.getId()))};return b}(A);ni=function(c){function b(){return b.__super__.constructor.apply(this,
arguments)}s(b,c);b.prototype.initialize=function(){b.__super__.initialize.apply(this,arguments);return this.listenTo(this.model,"change:id",this.render)};b.prototype.events={"click .js-options":"openOptions",click:"selectBackground"};b.prototype.openOptions=function(b){l.stop(b);return w.toggle({elem:this.$(".js-options"),top:30,view:new li({model:this.model})})};b.prototype.getId=function(){return this.model.id};return b}(ue);li=function(c){function b(){return b.__super__.constructor.apply(this,
arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Background Options"};b.prototype.initialize=function(){return this.listenTo(this.model,"change",this.render)};b.prototype.events={"click .js-delete-background":"deleteBackground","click .js-select-option":"selectOption"};b.prototype.render=function(){var b,c;c=this.model.toJSON();c.tile=this.model.get("tile");b=this.model.get("brightness");c.brightnessLight="light"===b;c.brightnessDark="dark"===b;this.$el.html(v.fill("board_background_options",
c));return this};b.prototype.selectOption=function(b){b=$(b.target).closest(".js-select-option");null!=b.attr("data-board-brightness")?this.model.update("brightness",b.attr("data-board-brightness")):null!=b.attr("data-background-display-type")&&(b=b.attr("data-background-display-type"),this.model.update("tile","tile"===b))};b.prototype.deleteBackground=function(b){l.stop(b);return pa.pushView({elem:$(b.target).closest(".js-delete-background"),top:32,model:this.model,title:"Delete Background?",text:"Deleting a background is permanent. There is no undo.",
confirmText:"Delete",confirmBtnClass:"negate",fxConfirm:function(b){return function(c){b.model.destroy();b.remove();return n("Board Menu","Change Background","Delete Uploaded Background")}}(this)})};return b}(A);te=function(c){function b(){this.selectPerm=k(this.selectPerm,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Change Permissions"};b.prototype.initialize=function(){this.model.ond("change",this.render)};
b.prototype.events={"click .js-select":"selectPerm"};b.prototype.render=function(){var b,c,g;b=this.model.toJSON({prefs:!0,url:!0});b.cardCovers=b.prefs.cardCovers;c=this.model.getOrganization();b.hasOrg=null!=(null!=c?c.id:void 0);b.orgCanSee=b.hasOrg&&("public"===(g=this.model.getPref("permissionLevel"))||"org"===g);b.premium=null!=c?c.isFeatureEnabled("observers"):void 0;b.voting_showObservers=(b.premium||b.voting_observers)&&b.hasOrg;b.comments_showObservers=(b.premium||b.comments_observers)&&
b.hasOrg;b.pLevelClass=this.model.getPermLevelIconClass();null!=c&&c.owned()?(b.orgOwner=!0,b.orgName=c.get("displayName"),this.model.owned()||(b.setOrgNull=!0)):this.model.owned()||(b.noEditOrg=!0);c=this.getTemplate();this.$el.html(v.fillMenu(c,b,{editable:this.model.editable(),owned:this.model.owned()}));return this};b.prototype.selectPerm=function(b){var c;l.stop(b);n("Board","Change "+this.getPerm());c=$(b.target).closest(".js-select");!c.hasClass("disabled")&&!c.closest(".js-disabled").length&&
(b=this.getPerm(),c=c.attr("name"),this.model.setPref(b,c),this.model.save(),w.popView())};return b}(A);ki=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Commenting Permissions"};b.prototype.getTemplate=function(){return"board_menu_commenting"};b.prototype.getPerm=function(){return"comments"};return b}(te);ji=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=
function(){return"Add Member Permissions"};b.prototype.getTemplate=function(){return"board_menu_invitations"};b.prototype.getPerm=function(){return"invitations"};return b}(te);tg=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return this.model.owned()?"Change Visibility":"Visibility"};b.prototype.tagName="ul";b.prototype.initialize=function(){this.listenTo(this.model,"change",this.render)};b.prototype.className="pop-over-list";
b.prototype.events={"click .js-select":"selectVis"};b.prototype.render=function(){var b,c,g,f,h,k;b=this.model.toJSON({prefs:!0,url:!0});c=this.model.getOrganization();b.hasOrg=null!=c;b.disabledVis_private=!this.model.owned()||null!=c&&!c.canSetVisibility("private")||null==c&&!this.model.getPref("canBePrivate");b.disabledVis_org=!this.model.owned()||null!=c&&!c.canSetVisibility("org")||null==c&&!this.model.getPref("canBeOrg");b.disabledVis_public=!this.model.owned()||null!=c&&!c.canSetVisibility("public")||
null==c&&!this.model.getPref("canBePublic");k=["private","org","public"];f=0;for(h=k.length;f<h;f++)g=k[f],b["permText_"+g]=this.model.getPermLevelAltText(g,c),b["iconClass_"+g]=this.model.getPermLevelIconClass(g,c),b["disabledVis_"+g]&&(null!=c&&!c.canSetVisibility(g)&&this.model.owned())&&(b["showVisRestriction_"+g]=!0);b.visRestrictionText="Due to a restriction created by an org admin, you can not select this visibility.";this.$el.html(v.fill("board_menu_vis",b,{editable:this.model.editable(),
owned:this.model.owned()}));return this};b.prototype.selectVis=function(b){l.stop(b);b=$(b.target).closest(".js-select");!b.hasClass("disabled")&&!b.closest(".js-disabled").length&&(b=b.attr("name"),"org"===b&&!this.model.getOrganization()?w.pushView({view:ii,options:{model:this.model,disableNone:!0}}):(this.model.setPref("permissionLevel",b),this.model.save(),n("Board","Change Board Visibility",b),w.popView()))};return b}(A);rg=function(c){function b(){this.rename=k(this.rename,this);this.render=
k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Rename Board"};b.prototype.events={"click .js-rename-board":"rename","submit form":"rename"};b.prototype.render=function(b){b={};b.boardName=this.model.get("name");this.$el.html(v.fill("popover_rename_board",b));return this};b.prototype.rename=function(b){var c;l.stop(b);b=this.$(".js-board-name");c=b.val().trim();""===c?b.focus().select():(n("Board","Successfully Rename Board"),
this.model.update("name",c),w.hide())};return b}(A);se=function(c){function b(){this.selectVis=k(this.selectVis,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Change Visibility"};b.prototype.tagName="ul";b.prototype.events={"click .js-select":"selectVis"};b.prototype.className="pop-over-list";b.prototype.render=function(){var b,c,g,f,h,k,l,u,n;h=this.options.organization;c=["public","org","private"];b=h.owned()?
["admin","org"]:["org"];f={explanationText:""+h.get("displayName")+" has restrictions on board visibility.  Please choose a setting that is allowed in that organization."};f["permissionLevel_"+this.model.get("prefs").permissionLevel]=!0;g=!1;l=0;for(u=c.length;l<u;l++)k=c[l],f["permText_"+k]=ia.prototype.getPermLevelAltText(k),f["iconClass_"+k]=ia.prototype.getPermLevelIconClass(k),(n=h.get("prefs").boardVisibilityRestrict[k],0>D.call(b,n))?f["disabledVis_"+k]=!0:g=!0;if(!g)return f={isOrgAdmin:h.owned(),
orgSettingsUrl:C.getOrganizationAccountUrl(h),organization:h.toJSON()},this.$el.html(v.fill("cant_add_board_to_org",f)),this;this.$el.html(v.fill("board_menu_vis",f,{editable:this.model.editable(),owned:this.model.owned()}));return this};b.prototype.selectVis=function(b){var c;l.stop(b);b=$(b.target).closest(".js-select");if(!b.hasClass("disabled")&&!b.closest(".js-disabled").length)return b=b.attr("name"),this.options.idOrganizationSource&&null!=(c=this.Organization.get(this.options.idOrganizationSource))&&
c.boardList.remove(this.model),this.model.update({idOrganization:this.options.organization.id,"prefs/permissionLevel":b}),this.options.organization.boardList.add(this.model),w.hide()};return b}(A);Hc=function(c){function b(){this.submit=k(this.submit,this);this.changeOrg=k(this.changeOrg,this);this.updateModel=k(this.updateModel,this);this.showOrgBoardVisPerms=k(this.showOrgBoardVisPerms,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=
function(){return"Change Organization"};b.prototype.events={"click .js-submit":"submit"};b.prototype.render=function(){var b,c,g,f,h;b=this.model.toJSON({org:!0});g=this.model.owned()?y.me().organizationList.models:[];var k;k=[];f=0;for(h=g.length;f<h;f++)c=g[f],k.push(c.toJSON());b.orgs=k;b.hasOrgs=0!==b.orgs.length;if(b.idOrganization){h=b.orgs;g=0;for(f=h.length;g<f;g++)c=h[g],c.id===b.idOrganization&&(c.select=!0)}this.$el.html(v.fill("popover_change_board_org",b));return this};b.prototype.showOrgBoardVisPerms=
function(b,c){return w.pushView({view:this.model.getView(se,b.id,{organization:b,idOrganizationSource:c})})};b.prototype.updateModel=function(b){return this.model.update({idOrganization:b})};b.prototype.changeOrg=function(b,c){var g;b!==c&&(c&&null!=(g=this.Organization.get(c))&&g.boardList.remove(this.model),this.updateModel(b),b&&this.Organization.get(b).boardList.add(this.model));return w.hide()};b.prototype.canAddToOrg=function(b){return b.canAddBoard(this.model)};b.prototype.submit=function(b){var c,
g,f,h;l.stop(b);n("Board","Change Org");f=this.$(".js-org").val();g=this.model.get("idOrganization");h=this.Organization.get(f);c=function(b){return function(){return b.changeOrg(f,g)}}(this);return null!=h&&h.isFeatureEnabled("restrictVis")?M["for"](this.modelCache).loadOrganizationMembersData(f,function(b){return function(d){return null==d&&null!=h&&!b.canAddToOrg(h)?b.showOrgBoardVisPerms(h,g):c()}}(this)):c()};return b}(A);ii=function(c){function b(){this.orgSelected=k(this.orgSelected,this);
this.updateModel=k(this.updateModel,this);this.submit=k(this.submit,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.events={"click .js-submit":"submit","change .js-org":"orgSelected"};b.prototype.initialize=function(c){this.disableNone=null!=c?c.disableNone:void 0;return b.__super__.initialize.apply(this,arguments)};b.prototype.render=function(){b.__super__.render.apply(this,arguments);this.disableNone&&this.$(".js-submit").addClass("disabled").attr("disabled",
"disabled");return this};b.prototype.showOrgBoardVisPerms=function(b,c){return w.pushView({view:this.model.getView(se,b.id,{organization:b,idOrganizationSource:c})})};b.prototype.submit=function(c){return b.__super__.submit.apply(this,arguments)};b.prototype.canAddToOrg=function(b){return!b.isFeatureEnabled("restrictVis")||b.canSetVisibility("org")};b.prototype.updateModel=function(b){return this.model.update({idOrganization:b,"prefs/permissionLevel":"org"})};b.prototype.orgSelected=function(){if(this.disableNone)return"(none)"===
this.$(".js-org").children().filter(":selected").text()?this.$(".js-submit").addClass("disabled").attr("disabled","disabled"):this.$(".js-submit").removeClass("disabled").removeAttr("disabled")};return b}(Hc);yb=function(c){function b(){this.willBePopped=k(this.willBePopped,this);this.willBePushedDown=k(this.willBePushedDown,this);this.viewMoreOrgMembers=k(this.viewMoreOrgMembers,this);this.addAllOrgMembers=k(this.addAllOrgMembers,this);this.addOrgMember=k(this.addOrgMember,this);this.addOtherMember=
k(this.addOtherMember,this);this.addMember=k(this.addMember,this);this.orgMembersAvailable=k(this.orgMembersAvailable,this);this.sendEmailInvite=k(this.sendEmailInvite,this);this.canRemoveInvitation=k(this.canRemoveInvitation,this);this.removeInvitation=k(this.removeInvitation,this);this.clearSearchResults=k(this.clearSearchResults,this);this.createInvitation=k(this.createInvitation,this);this.keydownEvent=k(this.keydownEvent,this);this.search=k(this.search,this);this.searchPaste=k(this.searchPaste,
this);this.showMemberMenu=k(this.showMemberMenu,this);this.renderEmailInviteToSearchResults=k(this.renderEmailInviteToSearchResults,this);this.renderOrgMembers=k(this.renderOrgMembers,this);this.renderBoardMembers=k(this.renderBoardMembers,this);this.getOrgData=k(this.getOrgData,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);na(Jd,Nc,b);b.prototype.getViewTitle=function(){return"Members"};b.prototype.initialize=function(){var b;b=this.model.getOrganization();
if(null!=b)b.memberList.onAddRemove(this.renderOrgMembers);this.model.memberList.onAddRemove(this.renderOrgMembers);if(null!=b)b.ond("change:prefs",this.render);this.savedSearch=""};b.prototype.events={"click .js-board-members .js-select-member":"showMemberMenu","click .js-search-results .js-select-member":"addOtherMember","paste .js-search-input":"searchPaste","click .js-org-members .js-select-member":"addOrgMember","click .js-org-members .js-add-all-org-members":"addAllOrgMembers","click .js-org-members .js-more-org-members":"viewMoreOrgMembers",
"click .js-remove-invitation":"removeInvitation","click .js-send-email-invite":"sendEmailInvite","submit .js-email-data":"sendEmailInvite","click .js-open-option":"openOption","mouseenter .js-select-member":"hoverMember"};b.prototype.render=function(){var b,c,g;c={placeholder:"Search or add email address"};c.canAddMembers=this.model.canInviteMembers();g=this.model.getOrganization();null!=g&&(c.orgName=g.get("displayName"));c.canInviteMembers=c.canAddMembers&&!(null!=g&&g.isFeatureEnabled("disableExternalMembers")&&
g.getPref("externalMembersDisabled"));c.disableAddingExternalMembers=this.model.isMember(y.me())&&(null!=g?g.isFeatureEnabled("disableExternalMembers"):void 0)&&g.getPref("externalMembersDisabled");c.isBCOrgAdmin=null!=g?g.isPremOrgAdmin(y.me()):void 0;c.orgSettingsURL=null!=g?C.getOrganizationAccountUrl(g):"";this.$el.html(v.fill("manage_members",c,{editable:this.model.editable()}));null!=(b=Pc.addMemberToBoardAd(y.me(),g))&&this.$(".js-ad").html(this.model.getView(b).render().el);c.canAddMembers?
_.delay(function(b){return function(){b.renderOrgMembers();b.input=b.$(".js-search-input");b.input.click(function(b){return l.stop(b)}).keyup(_.debounce(b.search,500)).keydown(b.keydownEvent).focus();if(b.savedSearch)return b.input.val(b.savedSearch),b.search(),b.savedSearch=""}}(this),10):_.delay(function(b){return function(){return b.renderBoardMembers()}}(this),10);this.lastSearch="";this.loadingEl=this.$(".js-loading");this.helperEl=this.$(".js-helper");w.calcPos();return this};b.prototype.getOrgData=
function(){var b;b=this.model.getOrganization();if(null!=b&&this.model.editable())return M["for"](this.modelCache).loadOrganizationMembersMinimal(b.id,function(c){return function(g){if(null==g)return b.trigger("change:memberships"),c.renderOrgMembers()}}(this))};b.prototype.renderBoardMembers=function(){var b,c,g,f,h;c=this.$(".js-board-members").hide();b=c.find(".js-list").empty();7<this.model.memberList.models.length&&b.addClass("collapsed");h=this.model.memberList.models;g=0;for(f=h.length;g<f;g++)b=
h[g],this.appendSubview(this.subview(Ka,b),$boardMmeberList);c.show();w.calcPos()};b.prototype.renderOrgMembers=function(){var b,c,g,f,h,k;g=this.$(".js-org-members").hide();c=g.find(".js-list").empty();b=g.find(".js-num-org-mem").empty();f=g.find(".js-more-org-members").addClass("hide");k=this.model.getOrganization();null!=k&&(h=this.orgMembersAvailable(),0<h.length&&(7<h.length&&f.removeClass("hide"),f=h.slice(0,7),_.each(f,function(b){return function(b){var d;d=b.toJSON();null!=k&&k.isPremOrgAdmin(b)&&
(d.className="no-option");return c.append(v.fill("select_member",d,{},{member:v.member}))}}(this)),b.html(h.length),g.show()),w.calcPos())};b.prototype.renderEmailInviteToSearchResults=function(b){var c,g,f;c=_.compact(l.removeDomainFromEmailAddress(b.email).split(/[\s\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/)).join(" ").replace(/[\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,"");b.fullName=l.toTitleCase(c);b.canAddAsObserver=null!=(g=this.model.getOrganization())?g.isFeatureEnabled("observers"):void 0;
c=null!=(f=this.model.getOrganization())?f.get("prefs").externalMembersDisabled:void 0;this.$(".js-no-results").toggleClass("hide",!c);if(!c)return this.$(".js-uninvited-search-results").append(v.fill("invite_add_name",b,"",{member:v.member})).show()};b.prototype.showMemberMenu=function(b){l.stop(b);b=$(b.target).closest(".js-select-member").attr("idMember");b=this.Member.get(b);w.pushView({view:b.getView(Gc,"board",{board:this.model})})};b.prototype.searchPaste=function(){this.loadingEl.show();return this.input.keyup()};
b.prototype.search=function(b){var c,g,f;null!=this.lastSearch&&this.lastSearch===this.input.val()||(this.lastSearch=this.input.val(),c=this.input.val().toLowerCase().trim(),""===c?this.clearSearchResults():(this.loadingEl.show(),S({url:"/1/search/members/",type:"get",data:{idBoard:this.model.id,query:c,idOrganization:null!=(g=this.model.getOrganization())?g.id:void 0,onlyOrgMembers:null!=(f=this.model.getOrganization())?f.getPref("externalMembersDisabled"):void 0,_cache:l.newestId(this.model.get("memberships"))},
dataType:"json",success:function(b){return function(d){return b.renderSearchResults(c,d)}}(this)})))};b.prototype.keydownEvent=function(b){var c,g;if(!(16===(c=b.keyCode)||18===c||17===c||39===c||37===c||27===c))if(13===b.keyCode)0<this.$(".js-search-results .js-list .selected .js-select-member").length?(l.stop(b),this.$(".js-search-results .js-list .selected:first .js-select-member").click()):0<this.$(".js-search-results .js-list .email-invite").length&&(l.stop(b),this.$(".email-invite:first").click());
else if(38===(g=b.keyCode)||40===g)l.stop(b),l.navMenuList(this.$(".js-search-results .js-list"),"li",b.keyCode)};b.prototype.createInvitation=function(b){return S(_.extend({url:"/1/board/"+this.model.id+"/members",type:"put",dataType:"json"},b))};b.prototype.clearSearchResults=function(){this.helperEl.show();this.lastSearch="";this.input.val("").focus().select();this.$(".js-search-results").hide();this.$(".js-uninvited-search-results").empty().hide();return this.renderOrgMembers()};b.prototype.removeInvitation=
function(b){b=$(b.currentTarget).closest(".invitation").data("id");ib.prototype["delete"]({model:this.model,idInvitation:b,success:function(b){return function(){n("Invitations","Delete Board Invite");return b.search}}(this)});l.setCaretAtEnd(this.input[0])};b.prototype.canRemoveInvitation=function(b){return b.get("idMemberInviter")===y.myId()||this.model.owned()};b.prototype.sendEmailInvite=function(b){var c,g;l.stop(b);c=this.$(".js-send-email-invite");null==c.attr("disabled")&&(b=this.$(".js-email-data .js-full-name"),
g=b.val().trim(),l.validName(g)?(b={fullName:g,email:this.$(".js-email-data .js-email").val().trim(),type:"normal"},this.$("#addAsObserver").is(":checked")&&(b.type="observer"),c.attr("disabled","disabled"),S({url:"/1/board/"+this.model.id+"/members",type:"put",dataType:"json",data:b,success:function(b){return function(d){new aa(d,{modelCache:b.modelCache});b.renderOrgMembers();n("Invitations","Send Email Board Invite to New Member","Role: "+d.type);TRMixpanel.trackInvitation();c.removeAttr("disabled");
return w.hide()}}(this),error:function(b){return function(d,g){$(".manage-member-section.js-error").removeClass("hide").find(".error").html(d.responseText);b.$(".js-uninvited-search-results").empty().hide();c.removeAttr("disabled");b.input.focus().select();n("Invitations","Error: "+d.responseText)}}(this)})):(l.setCaretAtEnd(b),$(".js-name-error").show()))};b.prototype.orgMembersAvailable=function(){var b,c;c=this.model.getOrganization();var g,f,h,k;h=c.memberList.models;k=[];g=0;for(f=h.length;g<
f;g++)b=h[g],c.isDeactivated(b)||k.push(b);return _.difference(k,this.model.memberList.models)};b.prototype.addMember=function(b){b=this.Member.get(b);this.model.addMember(b);this.renderOrgMembers()};b.prototype.addOtherMember=function(b){var c,g;l.stop(b);if(!(0<$(b.target).closest(".item.disabled").length))return b=$(null!=b?b.target:void 0).closest(".js-select-member").attr("idMember"),this.clearSearchResults(),g=this.model.getOrganization(),(c=this.Member.get(b))&&null!=g&&g.isMember(c)?n("Invitations",
"Add Org Member to Board","Role: Member"):n("Invitations","Add Other Member to Board","Role: Member"),this.addMember(b)};b.prototype.addOrgMember=function(b){l.stop(b);n("Invitations","Add Org Member to Board","Role: Member");b=$(null!=b?b.target:void 0).closest(".js-select-member").attr("idMember");return this.addMember(b)};b.prototype.addAllOrgMembers=function(b){var c;l.stop(b);n("Invitations","Add All Org Members to Board");c=this.orgMembersAvailable();return pa.pushView({model:this.model,title:"Add All Organization Members?",
text:"This will add all remaining members of the organization ("+l.formatCount(c.length,"member")+") to this board.",confirmText:"Add All Members",confirmBtnClass:"primary",fxConfirm:function(b){return function(d){var h,k,l;l=[];h=0;for(k=c.length;h<k;h++)d=c[h],l.push(b.model.addMember(d));return l}}(this)})};b.prototype.viewMoreOrgMembers=function(b){l.stop(b);n("Invitations","View More Org Members");w.pushView({view:this.model.getView(hi)})};b.prototype.willBePushedDown=function(){return this.savedSearch=
this.input.val()};b.prototype.willBePopped=function(){return this.savedSearch=""};return b}(A);hi=function(c){function b(){this.enableSelfJoin=k(this.enableSelfJoin,this);this.filterAndFillMembers=k(this.filterAndFillMembers,this);this.keyupEvent=k(this.keyupEvent,this);this.render=k(this.render,this);this.renderOrgMembers=k(this.renderOrgMembers,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);na(Nc,b);b.prototype.getViewTitle=function(){return"Organization Members"};b.prototype.initialize=
function(){var b;if(null!=(b=this.model.getOrganization()))b.memberList.onAddRemove(this.render)};b.prototype.events={"click .js-board-members .js-select-member":"addOrgMember","click .js-board-members .js-add-all-org-members":"addAllOrgMembers","click .js-enable-self-join":"enableSelfJoin",keyup:"keyupEvent","click .js-open-option":"openOption","mouseenter .js-select-member":"hoverMember"};b.prototype.renderOrgMembers=function(b){var c,g,f,h;b=b?this.Member.get(b):this.model.getView(yb).orgMembersAvailable();
g=this.$(".js-board-members .js-list").empty().show();f=0;for(h=b.length;f<h;f++)c=b[f],c=c.toJSON(),g.append(v.fill("select_member",c,{},{member:v.member}));this.$(".js-board-members .js-num-org-mem").empty().text(b.length)};b.prototype.render=function(){var b,c;b=this.model.toJSON({prefs:!0});b.placeholder="Search for organization members";b.orgName=null!=(c=this.model.getOrganization())?c.get("displayName"):void 0;b.canInvite=!0;this.$el.html(v.fill("manage_members",b,{editable:this.model.editable()}));
this.renderOrgMembers();this.$(".js-board-members").removeClass("hide");this.$(".js-add-all-org-members").removeClass("hide");this.$(".js-enable-self-join").removeClass("hide");return this};b.prototype.keyupEvent=function(b){var c,g,f,h;c=$(".js-search-input").val().trim();if(!(16===(g=b.keyCode)||18===g||17===g))13===b.keyCode?(l.stop(b),0<this.$(".js-org-members .js-list .selected").length&&(b=this.$(".js-org-members .js-list .selected:first .js-select-member").attr("idMember"),b=this.Member.get(b),
this.model.addMember(b),this.$(".js-search-input").focus().select())):38===(f=b.keyCode)||40===f?(l.stop(b),l.navMenuList($(null!=(h=w.view)?h.el:void 0).find(".js-org-members .js-list"),".item",b.keyCode)):0<c.length?(this.filterAndFillMembers(c),$(".js-org-members .js-list").removeClass("collapsed"),$(".js-add-all-org-members").addClass("hide")):(this.renderOrgMembers(),$(".js-org-members .js-list").addClass("collapsed"),$(".js-add-all-org-members").removeClass("hide"))};b.prototype.filterAndFillMembers=
function(b){var c;c=_.pluck(this.model.getView(yb).orgMembersAvailable(),"id");b=l.filterMembers(this.modelCache,b,c);b=b.slice(0,7);0<b.length?(this.renderOrgMembers(b),b=this.$(".js-org-members .js-list .item:first"),l.selectMenuItem(this.$(".js-org-members .js-list"),".item",b)):this.$(".js-org-members .js-list").html("<li><p class='empty'>No matched members</p></li>")};b.prototype.addOrgMember=function(b){this.model.getView(yb).addOrgMember(b);return this.render()};b.prototype.addAllOrgMembers=
function(b){return this.model.getView(yb).addAllOrgMembers(b)};b.prototype.enableSelfJoin=function(b){$(b.target).hide();n("Board View","Members Menu - Enable Self Join");this.model.setPref("selfJoin","enabled");this.model.save();return this.render()};return b}(A);be=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Label Names"};b.prototype.tagName="form";b.prototype.className="edit-labels js-edit-labels";b.prototype.events=
{"submit .js-edit-labels":"saveLabels","click .js-save":"saveLabels"};b.prototype.render=function(){var b;b=this.model.toJSON({labels:!0});this.$el.html(v.fill("board_labels",b));return this};b.prototype.saveLabels=function(b){var c,g,f,h,k;l.stop(b);f={};g=this.$(".js-label-title");h=0;for(k=g.length;h<k;h++)c=g[h],b=$(c).attr("name"),c=$(c).val().trim(),f["labelNames/"+b]=c;this.model.update(f);w.popView();n("Board","Save Label Changes")};return b}(A);mi=function(c){function b(){this.sendAddressEmail=
k(this.sendAddressEmail,this);this.generateAddress=k(this.generateAddress,this);this.updateList=k(this.updateList,this);this.updatePosition=k(this.updatePosition,this);this.updateValue=k(this.updateValue,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Add Cards via Email"};b.prototype.initialize=function(){b.__super__.initialize.apply(this,arguments);this.modelCache.ond("add:List remove:List change:List:closed reset:List",
this.render);this.model.ond("change:myPrefs",this.render);this.allowEmail=!0;if(null==this.model.getPref("emailKey"))return this.model.generateEmailKey()};b.prototype.events={"change .js-select-position":"updatePosition","change .js-select-list":"updateList","click .js-generate-address":"generateAddress","click .js-send-address":"sendAddressEmail","click .js-autofocus":"focusInput"};b.prototype.render=function(){var b,c,g,f,h,k;c=this.model.getPref("idEmailList");h="None";f=!1;var q,u,n,s;n=this.model.openLists();
s=[];q=0;for(u=n.length;q<u;q++)b=n[q],g={id:b.id,name:b.get("name")},b.id===c&&(f=!0,g.selected=!0,h=g.name),s.push(g);null!=c&&!f&&(b=this.List.get(c),null!=b?(h=c=b.get("name")+" (archived)",s.push({id:b.id,name:c,selected:!0})):(h="None",s.push({id:null,name:"None",selected:!0})));b={email:null!=(k=this.model.getPref("fullEmail"))?k:"",lists:s,listName:h,positionName:l.capitalize(this.model.getPref("emailPosition"))};b["position_"+this.model.getPref("emailPosition")]=!0;this.$el.html(v.fill("board_menu_email",
b));return this};b.prototype.focusInput=function(b){$(b.target).focus().select()};b.prototype.updateValue=function(b,c){var g;g=this.$el.find(b).val();if(null!=g&&g!==this.model.getPref(c))return this.model.setPref(c,g)};b.prototype.updatePosition=function(){return this.updateValue(".js-select-position","emailPosition")};b.prototype.updateList=function(){return this.updateValue(".js-select-list","idEmailList")};b.prototype.generateAddress=function(b){l.stop(b);pa.pushView({model:this.model,title:"Generate new email address?",
text:"The old email address will no longer work.  There is no undo.  Go ahead?",confirmText:"Generate new email address",confirmBtnClass:"negate",popOnClick:!0,fxConfirm:function(b){return function(c){b.model.set({"myPrefs/emailKey":null});b.allowEmail=!0;return b.model.generateEmailKey()}}(this)})};b.prototype.sendAddressEmail=function(b){l.stop(b);this.allowEmail&&(this.allowEmail=!1,this.model.api({method:"emailKey/message",type:"post"},function(b){return function(){return O.flash("Email Sent",
"confirm")}}(this)))};return b}(A);gi=na(pc,function(c){function b(){this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.events={"click .js-more-actions":"loadMoreActions"};b.prototype.initialize=function(){this.fullHistory=this.options.fullHistory;null==this.fullHistory&&(this.fullHistory=!1);this.actionListView=this.collectionSubview(Qb,new xb(this.getActions(),{modelCache:this.modelCache}),{renderOpts:{compact:!this.fullHistory,key:"boardactivity",
context:this.model}});this.makeDebouncedMethods("renderMoreActionsLink");this.listenTo(this.modelCache,"add:Action:"+this.model.id,function(b){return function(){b.actionListView.collection.reset(b.getActions(),{silent:!0});return b.renderMoreActionsLinkDebounced()}}(this));this.loadMoreActions()};b.prototype.render=function(){this.$el.html(v.fill("board_activity",this.model.toJSON()));this.actionListView.setElement(this.$(".list-activity")[0]);this.renderActions();return this};b.prototype.renderActions=
function(){this.actionListView.render();return this.renderMoreActionsLink()};b.prototype.renderMoreActionsLink=function(){this.$(".js-more-actions").toggle(this.hasMoreActions());return this};b.prototype.getActionsFilter=function(){return mc};return b}(A));F={}.hasOwnProperty;s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c};(function(c){function b(){return b.__super__.constructor.apply(this,
arguments)}s(b,c);b.prototype.typeName="BoardPreference";return b})(fa);var we,oi,pi,qi,gc,ri,si,W,F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c},k=function(c,b){return function(){return c.apply(b,arguments)}},D=[].indexOf||function(c){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===c)return b;return-1};W=new (function(c){function b(){b.__super__.constructor.call(this);
this.set({id:"sidebarState-"+y.myId()});this.fetch()}s(b,c);b.prototype["default"]=function(){return{pinBoardsListSidebar:!1,showBoardsListSidebar:!1,idRecentBoards:[],collapsedDrawerSections:[]}};b.prototype.getPinSidebar=function(){return this.get("pinBoardsListSidebar")};b.prototype.showPinSidebar=function(){return this.save("pinBoardsListSidebar",!0)};b.prototype.hidePinSidebar=function(){return this.save("pinBoardsListSidebar",!1)};b.prototype.getShowSidebar=function(){return this.get("showBoardsListSidebar")};
b.prototype.showSidebar=function(){return this.save("showBoardsListSidebar",!0)};b.prototype.hideSidebar=function(){return this.save("showBoardsListSidebar",!1)};b.prototype.getRecentBoards=function(){return this.get("idRecentBoards")};b.prototype.pullBoard=function(b){var c,g;for(g=_.clone(this.getRecentBoards());-1<(c=_.indexOf(g,b));)g.splice(c,1);return this.save("idRecentBoards",g)};b.prototype.pushBoard=function(b){var c;c=_.clone(this.getRecentBoards());_.contains(c,b)&&(c=_.without(c,b));
c.unshift(b);c=c.slice(0,16);return this.save("idRecentBoards",c)};b.prototype.getCollapsedSections=function(){var b;return null!=(b=this.get("collapsedDrawerSections"))?b:this["default"]().collapsedDrawerSections};b.prototype.isCollapsed=function(b){return _.contains(this.getCollapsedSections(),b)};b.prototype.collapseSection=function(b){return this.addToSet("collapsedDrawerSections",b)};b.prototype.expandSection=function(b){return this.pull("collapsedDrawerSections",b)};return b}(vb));si=function(c){function b(){this.renderAllBoardsSection=
k(this.renderAllBoardsSection,this);this.renderBoardsSections=k(this.renderBoardsSections,this);this.toggleSections=k(this.toggleSections,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.UNREAD_POLL_RATE_ACTIVE=l.getMs({minutes:5});b.prototype.UNREAD_POLL_RATE_IDLE=l.getMs({minutes:60});b.prototype.className=function(){return"boards-drawer"};b.prototype.initialize=function(){this.ready=!1;this.listenTo(this.model.organizationList,"add remove reset",
this.renderBoards);this.renderSidebarState();this.listenTo(W,"change:showBoardsListSidebar",function(){this.renderSidebarState();return this.ensureUnreadData()});this.listenTo(W,"change:pinBoardsListSidebar",function(){this.renderSidebarState();this.updatePinned();this.updateHeight();return this.ensureUnreadData()});X.addHandler(this,{scope:"header"});this.ensureUnreadData()};b.prototype.events={"mouseenter .sidebar-boards-list li":"hoverItem","keyup .js-search-boards":"keyEvent","click .js-pin":"pinDrawer",
"click .js-unpin":"unpinDrawer","click .js-open-closed-boards":"openClosedBoards","mouseleave .sidebar-boards-list":"deselectBoards",shortcut:"shortcut"};b.prototype.render=function(){var b;b={};b.allBoardsUrl=C.getMemberBoardsUrl();this.renderSidebarState();this.updatePinned();this.$el.html(v.fill("sidebar_boards_list",b));this.ready=!0;this.renderBoardsSections();this.updateHeight();this.updatePinned();this.debouncedResizeEvent=this.debounce(function(b){return function(){return b.updateHeight()}}(this),
300);$(window).bind("resize",this.debouncedResizeEvent);return this};b.prototype.ensureUnreadData=function(){var b;b=function(b){return function(){return"active"===Ha.getStatus()?b.UNREAD_POLL_RATE_ACTIVE:b.UNREAD_POLL_RATE_IDLE}}(this);null!=this._lastPoll&&Date.now()-this._lastPoll>1.5*b()&&(this.refreshUnreadData(),this._lastPoll=Date.now());if(W.getShowSidebar()||W.getPinSidebar()){if(null==this._unreadTimeout)return this._unreadTimeout=this.setTimeout(function(b){return function(){b.refreshUnreadData();
b._unreadTimeout=null;b._lastPoll=Date.now();return b.ensureUnreadData()}}(this),b())}else if(null!=this._unreadTimeout)return clearTimeout(this._unreadTimeout),this._unreadTimeout=null};b.prototype.shortcut=function(b){switch(b){case 66:return W.getPinSidebar()?this.focusInput():W.getShowSidebar()?W.hideSidebar():W.showSidebar(),!0}};b.prototype.clearSearch=function(){this.$(".js-search-boards").val("");this.toggleSections("all")};b.prototype.focusInput=function(){return this.$(".js-search-boards").focus().select()};
b.prototype.refreshUnreadData=function(){var b,c,g,f,h,k;M["for"](this.modelCache).loadMyBoardsUnreadData();c=this.Auth.me();h=W.getRecentBoards();k=[];g=0;for(f=h.length;g<f;g++)b=h[g],!c.boardList.get(b)&&!c.boardStarList.getBoardStar(b)?k.push(M["for"](this.modelCache).loadBoardData(b,Ke)):k.push(void 0);return k};b.prototype.openClosedBoards=function(b){l.stop(b);Y.show({view:new zf({model:y.me()})});M["for"](this.modelCache).loadClosedBoards();n("Boards Drawer","Open Closed Boards")};b.prototype.renderStarredBoardsSection=
function(){return this.appendSubview(this.subview(ri,y.me(),{},"starred-boards"),this.$(".js-starred-boards"))};b.prototype.renderRecentBoardsSection=function(){M.waitFor("boardsData",function(b){return function(){return b.appendSubview(b.subview(qi,y.me(),{},"recent-boards"),b.$(".js-recent-boards"))}}(this));return this};b.prototype.renderSidebarState=function(){W.getShowSidebar()||W.getPinSidebar()?(this.$el.addClass("show"),w.hide(),_.defer(function(b){return function(){return b.focusInput()}}(this))):
(this.$el.removeClass("show"),this.clearSearch());w.calcPos();return this};b.prototype.updateHeight=function(){var b;b=W.getPinSidebar()?$(window).height()-50:$(window).height()-64;return this.$(".board-drawer-content").css({"max-height":b})};b.prototype.unpinDrawer=function(){n("Boards Drawer","Unpin Drawer");return W.hidePinSidebar()};b.prototype.pinDrawer=function(){n("Boards Drawer","Pin Drawer");return W.showPinSidebar()};b.prototype.updatePinned=function(){this.$el.toggleClass("boards-drawer-pinned",
W.getPinSidebar());this.$(".js-pin").toggleClass("hide",W.getPinSidebar());this.$(".js-unpin").toggleClass("hide",!W.getPinSidebar());return this.updateHeight()};b.prototype.getActivityCounts=function(b){return M["for"](this.modelCache).loadBoardsMenuData(b)};b.prototype.search=function(){var b,c,g,f,h,k,q,u,n;b=this.model;g=this.$(".js-search-boards").val().toLowerCase().trim();if(this.oldTerm!==g)if(this.oldTerm=g,""===g)this.toggleSections("all");else{this.toggleSections("search");q=_.map(g.split(/\s+/),
function(b){return RegExp(""+l.escapeForRegex(b),"i")});g=_.union(b.boardList.models,b.boardStarList.getBoards());k=_.filter(g,function(b){return _.every(q,function(c){return c.test(b.get("name"))})});g=function(){var b,d,f;f=[];b=0;for(d=k.length;b<d;b++)c=k[b],c.get("closed")||f.push(c);return f}();h=this.Member.get(y.myId()).boardStarList.getBoardIds();f=W.getRecentBoards();g=g.sort(function(b,c){var d,e,g,k,m,l,q,u;return(d=b.id,0<=D.call(h,d))&&(e=c.id,0>D.call(h,e))?-1:(g=c.id,0<=D.call(h,g))&&
(k=b.id,0>D.call(h,k))?1:(m=b.id,0<=D.call(f,m))&&(l=c.id,0>D.call(f,l))?-1:(q=c.id,0<=D.call(f,q))&&(u=b.id,0>D.call(f,u))?1:b.get("name")<c.get("name")?-1:b.get("name")>c.get("name")?1:0});g=g.slice(0,7);b=this.$(".js-board-results").empty();if(0<g.length){u=0;for(n=g.length;u<n;u++)c=g[u],this.appendSubview(this.subview(we,c,{showOrgName:!0},"board-search-"+c.id),b);l.selectMenuItem($(".sidebar-boards-list"),"li",$(".sidebar-boards-list li:first"))}else b.append('<p class="empty">No Boards Found</p>');
return this}};b.prototype.toggleSections=function(b){"all"===b?(this.$(".js-boards-list-container").removeClass("hide"),this.$(".js-board-results-container").addClass("hide")):"search"===b&&(this.$(".js-boards-list-container").addClass("hide"),this.$(".js-board-results-container").removeClass("hide"))};b.prototype.renderBoardsSections=function(){this.renderStarredBoardsSection();this.renderRecentBoardsSection();this.renderAllBoardsSection();return this};b.prototype.renderAllBoardsSection=function(){var b,
c,g,f,h,k,l,u;if(!this.ready)return this;f=this.model;g=function(){var b,d,g,h;g=f.boardList.models;h=[];b=0;for(d=g.length;b<d;b++)c=g[b],c.get("closed")||h.push(c);return h}();b=this.$(".js-all-boards").empty();if(0===g.length)b.append('<p class="empty">No Boards</p>'),h=function(b){return function(){b.stopListening(y.me().boardList,"add reset",h);return b.renderAllBoardsSection()}}(this),this.listenTo(y.me().boardList,"add reset",h);else{this.appendSubview(this.subview(oi,y.me(),{},"my-boards"),
b);u=this.model.organizationList.models;k=0;for(l=u.length;k<l;k++)g=u[k],this.appendSubview(this.subview(pi,y.me(),{org:g},"group-"+g.id),b)}return this};b.prototype.hoverItem=function(b){b=$(b.target).closest("li");l.selectMenuItem($(".sidebar-boards-list"),"li",b)};b.prototype.deselectBoards=function(b){$(".sidebar-boards-list li").removeClass("selected")};b.prototype.keyEvent=function(b){var c,g,f;if(!(16===(c=b.keyCode)||(17===c||18===c||37===c||39===c)||(b.shiftKey||b.altKey||b.ctrlKey)&&(38===
(g=b.keyCode)||40===g)))if(38===(f=b.keyCode)||40===f)l.navMenuList($(".sidebar-boards-list"),"li:visible",b.keyCode);else if(13===b.keyCode)b=$(".sidebar-boards-list li.selected:visible:first a"),0<b.length&&(b.click(),w.hide(),this.focusInput());else return this.search()};return b}(A);gc=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.events={"click .js-collapse-section":"collapseSection","click .js-expand-section":"expandSection"};b.prototype.initialize=
function(){this.debouncedRenderBoards=this.debounce(this.renderBoards,10);this.debouncedPostRenderBoardsEvent=this.debounce(this.postRenderBoardsEvent,150);this.sectionId=this.sectionId();this.initedSortable=!1;this.listenTo(W,"change:collapsedDrawerSections",function(){return this.renderCollapsed()});return this.listenTo(this.model.boardList,"add remove reset change:closed",this.debouncedRenderBoards)};b.prototype.render=function(){var b;b=this.getHeaderInfo();b.sectionId=this.sectionId;this.$el.html(v.fill("boards_sidebar_section",
b));this.renderBoards();this.renderCollapsed();return this};b.prototype.getBoards=function(){return[]};b.prototype.getHeaderInfo=function(){return"Boards"};b.prototype.sectionId=function(){return null};b.prototype.showOrgName=function(){return!1};b.prototype.postRenderBoardsEvent=function(){};b.prototype.collapseSection=function(b){return W.collapseSection(this.sectionId)};b.prototype.expandSection=function(b){return W.expandSection(this.sectionId)};b.prototype.renderCollapsed=function(){var b;b=
W.isCollapsed(this.sectionId);this.$(".js-collapse-section").toggleClass("hide",b);this.$(".js-expand-section").toggleClass("hide",!b);this.$(".js-board-list").toggleClass("hide",b);this.$(".js-sidebar-section-header").toggleClass("bold",!b)};b.prototype.renderBoards=function(){var b,c,g,f,h,k;b=this.$(".js-board-list").empty();f=_.filter(this.getBoards(),function(b){return!(null!=b&&b.get("closed"))});if(0<f.length){this.$el.removeClass("hide");g=[];h=0;for(k=f.length;h<k;h++)c=f[h],g.push(this.subview(we,
c,{showOrgName:this.showOrgName()},"board-"+c.id));this.appendSubviews(g,b)}else this.$el.addClass("hide");this.debouncedPostRenderBoardsEvent();return this};return b}(A);ri=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){b.__super__.initialize.apply(this,arguments);return this.listenTo(this.model.boardStarList,"add remove reset change:pos",function(){return this.debouncedRenderBoards()})};b.prototype.getBoards=function(){return this.model.boardStarList.getBoards()};
b.prototype.showOrgName=function(){return!0};b.prototype.sectionId=function(){return"starred-boards"};b.prototype.getHeaderInfo=function(){return{title:"Starred Boards",iconClass:"star"}};b.prototype.postRenderBoardsEvent=function(){var b;if(!ba.isTouch()){b=this.$(".js-board-list");if(this.initedSortable)return Q.refreshIfInitialized(b);this.initedSortable=!0;return b.sortable({axis:"y",containment:"#surface",delay:"75",distance:"7",forcePlaceholderSize:!0,items:"> li",placeholder:"placeholder",
scroll:!0,helper:"clone",stop:function(b,c){_.defer(function(b){return function(){return c.item.trigger("moveto",[c,b])}}(this))},tolerance:"pointer"})}};return b}(gc);qi=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){b.__super__.initialize.apply(this,arguments);this.listenTo(W,"change:idRecentBoards",function(){return this.debouncedRenderBoards()});this.listenTo(this.model.boardStarList,"add remove reset",function(){return this.debouncedRenderBoards()});
return this._idBoardsFetching=[]};b.prototype.sectionId=function(){return"recent-boards"};b.prototype.showOrgName=function(){return!0};b.prototype.getBoards=function(){var b,c,g,f,h,k,l,u,n;f=_.difference(W.getRecentBoards(),this.model.boardStarList.getBoardIds()).slice(0,7);c=this.Board.get(f);h=[];g=k=0;for(l=c.length;k<l;g=++k)b=c[g],null==b&&(u=f[g],0>D.call(this._idBoardsFetching,u))&&h.push(f[g]);(n=this._idBoardsFetching).push.apply(n,h);0<h.length&&async.forEach(h,function(b){return function(c,
d){return M["for"](b.modelCache).loadBoardData(c,Ie,function(b){null!=b&&W.pullBoard(c);return d()})}}(this),function(b){return function(){b._idBoardsFetching=_.difference(b._idBoardsFetching,h);return b.debouncedRenderBoards()}}(this));return _.compact(c)};b.prototype.getHeaderInfo=function(){return{title:"Recent Boards",iconClass:"clock"}};return b}(gc);oi=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){b.__super__.initialize.apply(this,
arguments);return this.listenTo(this.model.boardList,"add remove reset change:idOrganization",this.debouncedRenderBoards)};b.prototype.getBoards=function(){var b,c,g,f,h,k;c=function(b){return function(c){var d;c=null!=(d=c.getOrganization())?d.id:void 0;return null!=c&&0<=D.call(b.model.get("idOrganizations"),c)}}(this);h=this.model.boardList.models;k=[];g=0;for(f=h.length;g<f;g++)b=h[g],!c(b)&&!b.get("closed")&&k.push(b);return k};b.prototype.sectionId=function(){return"my-boards"};b.prototype.getHeaderInfo=
function(){return{title:"My Boards",iconClass:"board"}};return b}(gc);pi=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){b.__super__.initialize.apply(this,arguments);this.listenTo(this.model.boardList,"add remove reset change:idOrganization",this.debouncedRenderBoards);return this.listenTo(this.getOrg(),"change:name change:displayName change:logoHash",this.render)};b.prototype.getOrg=function(){return this.options.org};b.prototype.sectionId=
function(){return"org-"+this.getOrg().get("id")};b.prototype.getBoards=function(){var b,c,g,f,h,k;f=this.model.boardList.models;k=[];c=0;for(g=f.length;c<g;c++)b=f[c],(null!=(h=b.getOrganization())?h.id:void 0)===this.getOrg().id&&!b.get("closed")&&k.push(b);return k};b.prototype.getHeaderInfo=function(){var b,c;b={};c=this.getOrg();if(null!=c&&(b=c.toJSON(),b.isOrg=!0,b.url=C.getOrganizationUrl(c.get("name")),c=c.get("logoHash")))b.orgLogoUrl=""+logoDomain+"/"+c+"/30.png";return b};b.prototype.postRenderBoardsEvent=
function(){this.renderBCStatus()};b.prototype.renderBCStatus=function(){this.$(".js-has-business-class").toggleClass("hide",!this.getOrg().isPremium())};return b}(gc);we=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.trackBoardClick=function(){return n("Header","Boards Menu","Opened Board")};return b}(fc);var If,og,Tg,hc,Tc,Uc,ic,ti,F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=
b.prototype;c.prototype=new d;c.__super__=b.prototype;return c},k=function(c,b){return function(){return c.apply(b,arguments)}},D=[].indexOf||function(c){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===c)return b;return-1};og=function(c){function b(c,e){this.board=c;b.__super__.constructor.call(this,null,e);this.board.onId(function(b){return function(c){b.set({id:"boardCardComposerSettings-"+c});return b.fetch()}}(this))}s(b,c);b.prototype.typeName="CardComposer";b.prototype["default"]=
function(){return{idList:null,index:null,idMembers:[],labels:[],pos:"bottom",title:null,vis:!1}};b.prototype.clear=function(){return this.save(this["default"]())};b.prototype.clearItems=function(){this.save({idMembers:[],labels:[],title:""})};b.prototype.moveToNext=function(){var b;this.save({idList:this.get("idList"),index:(null!=(b=this.get("index"))?b:0)+1,idMembers:[],labels:[],pos:"bottom",title:"",vis:!0})};b.prototype.getBoard=function(){return this.board};b.prototype.getList=function(){return this.getBoard().listList.get(this.get("idList"))};
b.prototype.getLabels=function(){var b,c,g,f,h,k;b=this.get("labels");h=l.labelNames;k=[];g=0;for(f=h.length;g<f;g++)c=h[g],k.push({color:c,name:this.getBoard().getLabelName(c),isActive:_.include(b,c)});return k};b.prototype.editable=function(){return this.getBoard().editable()};b.prototype.addMember=function(b){return this.addToSet("idMembers",b)};b.prototype.removeMember=function(b){return this.pull("idMembers",b)};b.prototype.toggleLabel=function(b){return this.toggle("labels",b)};b.prototype.toJSON=
function(c){var e,g,f;g=null!=c?c:{};e=g.board;f=g.list;g=b.__super__.toJSON.apply(this,arguments);e&&(g.board=this.getBoard().toJSON());f&&(g.list=this.getList().toJSON());return g};return b}(vb);Tg=function(c){function b(){this.scrollIntoView=k(this.scrollIntoView,this);this.clearAndHide=k(this.clearAndHide,this);this.hide=k(this.hide,this);this.clearItems=k(this.clearItems,this);this.openMenu=k(this.openMenu,this);this.clearSelectedItems=k(this.clearSelectedItems,this);this.renderSelectedItems=
k(this.renderSelectedItems,this);this.keyupEvent=k(this.keyupEvent,this);this.pasteEvent=k(this.pasteEvent,this);this.createMultipleCards=k(this.createMultipleCards,this);this.createCard=k(this.createCard,this);this.submitCard=k(this.submitCard,this);this.renderVisibility=k(this.renderVisibility,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="card-composer";b.prototype.initialize=function(){this.listenTo(this.model,"change:labels change:idMembers",
this.renderSelectedItems);return this.listenTo(this.model,"change:vis",this.renderVisibility)};b.prototype.events={"click .js-add-card":"submitCard","click .js-cancel":"clearAndHide","click .js-cc-menu":"openMenu",keyup:"keyupEvent",paste:"pasteEvent",keydown:"keydownEvent"};b.prototype.render=function(b,c){var g;g=this.model.toJSON({board:!0});this.renderVisibility();this.$el.html(v.fill("card_composer_inline",g));this.renderSelectedItems();_.defer(function(b){return function(){l.setCaretAtEnd(b.$(".js-card-title")[0]);
return"function"===typeof c?c():void 0}}(this));return this};b.prototype.renderVisibility=function(){this.$el.toggleClass("hide",!this.model.get("vis"));return this};b.prototype.submitCard=function(b){var c,g,f,h;b&&l.preventDefault(b);w.hide();h=jQuery.trim(this.$(".js-card-title").val());""===h?this.$el.find(".js-card-title").focus().select():(f=!0===b.shiftKey,c=_.compact(h.split(/\r\n|\r|\n/)),g=c.length,1===g?this.createCard(h,f):100>=g?pa.toggle({elem:$(b.target),top:36,title:"Create",text:"If you want, we can create a card for every new line. That would be "+
g+" cards. You can also create one card with a long title.",confirmText:"Create "+g+" Cards",cancelText:"Just One Card",fxConfirm:function(b){return function(d){return b.createMultipleCards(c,f)}}(this),fxCancel:function(b){return function(c){return b.createCard(h,f,!1,!0)}}(this)}):pa.toggle({elem:$(b.target),top:36,title:"Too Many Cards",text:"That\u2019s going to create a card for every new line. That\u2019s "+g+" cards. You can\u2019t add over 100 cards to a board at once.",confirmText:"Okay\u2026",
fxConfirm:function(b){return function(b){return w.hide()}}(this)}))};b.prototype.createCard=function(b,c,g,f){var h,k;b=b.trim();f&&(b=b.replace(/(\r\n|\n|\r)/gm," "));k=_.clone(this.model.get("idMembers"));h=_.clone(this.model.get("labels"));""!==b&&(b={name:b,pos:this.model.getList().calcPos(this.model.get("index")),closed:!1,labels:h,idMembers:k,dateLastActivity:Date.now()},this.model.moveToNext(),f=this.model.getList().cardList.create(b,{success:function(b){return function(b){0<h.length&&0<k.length?
n("Card Composer","Card Added","With Members and Labels"):0<k.length?n("Card Composer","Card Added","With Members"):0<h.length?n("Card Composer","Card Added","With Labels"):n("Card Composer","Card Added","No items included")}}(this),modelCache:this.modelCache}),b=this.model.getBoard(),b.filter.addNewCard(f),g&&b.viewState.selectCard(f),c&&C.showCardDetail(f))};b.prototype.createMultipleCards=function(b,c){var g,f,h,k,l;f=b.length;g=k=0;for(l=b.length;k<l;g=++k)h=b[g],b.length-1===g?this.createCard(h,
c,!0):this.createCard(h);n("Card Composer","Added Mulitple Cards",f)};b.prototype.pasteEvent=function(){this.$(".js-card-title").focus().keyup()};b.prototype.keydownEvent=function(b){var c,g,f,h,k;c=this.$(".js-card-title");h=$(b.target).closest(".js-card-title").hasClass("js-card-title");f=$(b.target).closest(".js-add-card").hasClass("js-add-card");if((h||f)&&!w.isVisible&&13===b.keyCode)l.stop(b),this.submitCard(b);else if(9===(k=b.keyCode)||13===k){c.focus();h=l.getWordFromCaret(c[0]);f=$(null!=
(g=w.view)?g.el:void 0);g=!1;if(w.view instanceof Uc)f.find(".js-members-list .item.selected:first .js-select-member").first().click(),g=!0;else if(w.view instanceof Tc)f.find(".edit-labels-pop-over .card-label.selected").first().click(),g=!0;else if(w.view instanceof ic)0<f.find(".js-pos-results").length&&(f.find(".js-pos-results li.selected:first a").first().click(),g=!0);else{if(w.view instanceof hc){l.stop(b);f.find(".js-card-results .list-card").first().click();this.model.set("title","");return}9===
b.keyCode&&""===c.val()&&(l.stop(b),this.hide(),b.shiftKey?$(this.el).closest(".list").find(".editable:first .current").click():$(this.el).closest(".list").next().find(".editable:first .current").click())}g&&(l.stop(b),l.insertSelection(c,"",h.start,h.end),this.model.set("title",c.val()));this.renderSelectedItems();w.hide()}};b.prototype.keyupEvent=function(b){var c,g,f,h,k,q,u;c=this.$(".js-card-title");if(!(9===(f=b.keyCode)||13===f))if(27===b.keyCode&&c.focus(),h=b.keyCode,0<=D.call(nc,h))l.stop(b),
c=$(null!=(u=w.view)?u.el:void 0),w.view instanceof Uc?l.navMenuList(c.find(".js-members-list"),".item",b.keyCode):w.view instanceof Tc?l.navMenuList(c.find(".edit-labels-pop-over"),".card-label",b.keyCode):w.view instanceof ic?0<c.find(".js-pos-results").length&&l.navMenuList(c.find(".js-pos-results"),"li",b.keyCode):w.view instanceof hc&&l.navMenuList(c.find(".js-card-results"),".list-card",b.keyCode);else if(!ba.isTouch()&&$(b.target).closest(".js-card-title").hasClass("js-card-title"))if(u=l.getWordFromCaret(c[0]),
k=/^@\S/.test(u.str.substring(0,2)),h=/^\#\S/.test(u.str.substring(0,2)),q=/^\^\S/.test(u.str.substring(0,2)),f=/^\%\S/.test(u.str.substring(0,2)),u=u.str.substring(1).toLowerCase(),k||h||q||f){if(!(16===(g=b.keyCode)||18===g||17===g)){if(k)return b=new Uc({model:this.model,modelCache:this.modelCache}),g=_.pluck(this.model.getBoard().memberList.filterDeactivated({force:!0}).models,"id"),g=l.filterMembers(this.modelCache,u,g),0<g.length?(w.load(b),b.render(g,!0),w.show({elem:this.$(".js-cc-menu"),
top:30,view:b,preloaded:!0}),c.focus(),c=$(b.el).find(".js-members-list .item:first"),l.selectMenuItem($(b.el).find(".js-members-list"),".item",c)):w.hide();if(h)return b=this.model.getView(Tc),g=this.model.getBoard().filterLabels(u),0<g.length?(w.load(b),b.render(g),w.show({elem:this.$(".js-cc-menu"),top:30,view:b,preloaded:!0}),c.focus(),c=$(b.el).find(".edit-labels-pop-over .card-label:first"),l.selectMenuItem($(b.el).find(".edit-labels-pop-over"),"li",c)):w.hide();if(q)return b=this.model.getView(ic),
g=b.filterPos(u),g.hasData?(w.load(b),b.renderPositionResults(g),w.show({elem:this.$(".js-cc-menu"),top:30,view:b,preloaded:!0}),c.focus(),c=$(b.el).find(".js-pos-results li:first"),l.selectMenuItem($(b.el).find(".js-pos-results"),"li",c)):w.hide();if(f)return b=this.model.getView(hc,"fromComposer",{fromComposer:!0}),w.load(b),b.render(),b.renderResults(u),0<$(".pop-over .js-card-results .list-card").length?(w.show({elem:this.$(".js-cc-menu"),top:30,view:b,preloaded:!0}),c.focus()):w.hide()}}else return this.model.set("title",
this.$(".js-card-title").val()),w.hide()};b.prototype.renderSelectedItems=function(){var b,c,g,f,h,k,q,u;c=this.model.get("idMembers");f=!_.isEmpty(c);b=this.$(".js-list-card-composer-members").empty();k=this.Member.get(c);g=0;for(h=k.length;g<h;g++)c=k[g],b.append("<div class='member js-remove-member' idMember='"+c+"'>"+v.fill("member",c.toJSON())+"</div>");h=this.model.get("labels");g=!_.isEmpty(h);b=this.$(".js-list-card-composer-labels").empty();u=l.labelNames;k=0;for(q=u.length;k<q;k++)c=u[k],
0<=D.call(h,c)&&b.append("<div class='card-label card-label-"+c+"' name='"+c+"'></div>");this.$(".js-clear-all-items").toggle(g||f)};b.prototype.clearSelectedItems=function(b){this.$(".js-card-title").val("").focus().select();this.renderSelectedItems()};b.prototype.openMenu=function(b){l.stop(b);n("Card Composer","Open Selector Menu");return w.toggle({elem:b.target,top:36,view:this.model.getView(ti)})};b.prototype.clearItems=function(b){return this.model.clearItems()};b.prototype.hide=function(b){this.model.save("vis",
!1)};b.prototype.clearAndHide=function(b){this.clearItems();return this.hide()};b.prototype.scrollIntoView=function(){var b;b=this.$el.offset().top;return this.$el.closest(".list-cards").scrollTop(b+this.$el.height())};return b}(A);ti=function(c){function b(){this.openCopyFrom=k(this.openCopyFrom,this);this.openPosSelector=k(this.openPosSelector,this);this.openLabelSelector=k(this.openLabelSelector,this);this.openMemSelector=k(this.openMemSelector,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,
arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Options"};b.prototype.events={"click .js-mem-selector":"openMemSelector","click .js-label-selector":"openLabelSelector","click .js-pos-selector":"openPosSelector","click .js-copy-from":"openCopyFrom"};b.prototype.render=function(){this.$el.html(v.fill("popover_selector_menu"));return this};b.prototype.openMemSelector=function(b){l.stop(b);return w.pushView({view:bc,options:{model:this.model,modelCache:this.modelCache}})};b.prototype.openLabelSelector=
function(b){l.stop(b);return w.pushView({view:ac,options:{model:this.model,modelCache:this.modelCache,hideEditTitles:!0}})};b.prototype.openPosSelector=function(b){l.stop(b);return w.pushView({view:ic,options:{model:this.model,modelCache:this.modelCache}})};b.prototype.openCopyFrom=function(b){l.stop(b);return w.pushView({view:hc,options:{model:this.model,modelCache:this.modelCache}})};return b}(A);Uc=function(c){function b(){this.addOrRemoveMember=k(this.addOrRemoveMember,this);this.keyupEvent=k(this.keyupEvent,
this);this.hoverMemberSelect=k(this.hoverMemberSelect,this);this.filterAndFillMembers=k(this.filterAndFillMembers,this);this.fillMems=k(this.fillMems,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Select Members"};b.prototype.events={"mouseenter .item":"hoverMemberSelect","click .item":"addOrRemoveMember",keyup:"keyupEvent"};b.prototype.render=function(b,c){var g;b||(b=_.pluck(this.model.getBoard().memberList.filterDeactivated({force:!0}).models,
"id"));g={showSearch:!0};if(5>=b.length||c)g.showSearch=!1;this.$el.html(v.fill("popover_member_searcher",g));this.fillMems(b);0<this.$(".js-filter-emoji").length&&_.delay(function(b){return function(){return b.$(".js-filter-emoji").focus().select()}}(this),20);0<this.$(".js-filter-members").length&&_.delay(function(b){return function(){return b.$(".js-filter-members").focus().select()}}(this),20);return this};b.prototype.fillMems=function(b){var c,g,f,h;c=this.$(".js-members-list");c.empty();h=b.slice(0,
5);b=0;for(f=h.length;b<f;b++)g=h[b],g=this.Member.get(g),this.appendSubview(this.subview(ae,g,{card:this.model}),c)};b.prototype.filterAndFillMembers=function(b){var c;c=_.pluck(this.model.getBoard().memberList.models,"id");b=l.filterMembers(this.modelCache,b,c);0<b.length?(this.fillMems(b),b=this.$(".js-members-list .item:first"),l.selectMenuItem(this.$(".js-members-list"),".item",b)):this.$(".js-members-list").html("<li><p class='empty'>No matched members</p></li>")};b.prototype.hoverMemberSelect=
function(b){b=$(b.target).closest(".item");return l.selectMenuItem(this.$(".js-members-list"),".item",b)};b.prototype.keyupEvent=function(b){var c,g,f;c=$(".js-filter-members").val().trim().toLowerCase();9===(g=b.keyCode)||13===g?(l.stop(b),this.$(".js-members-list .item.selected:first .js-select-member").first().click()):38===(f=b.keyCode)||40===f?(l.stop(b),l.navMenuList(this.$(".js-members-list"),".item",b.keyCode)):this.filterAndFillMembers(c)};b.prototype.addOrRemoveMember=function(b){l.stop(b);
b=$(b.target).closest(".item");b.toggleClass("active");b.find(".username").text();b=b.find("[idMember]").attr("idMember");this.model.toggle("idMembers",b)?n("Card Composer","Add Member"):n("Card Composer","Remove Member")};return b}(A);Tc=function(c){function b(){this.addOrRemoveLabel=k(this.addOrRemoveLabel,this);this.hoverLabelSelect=k(this.hoverLabelSelect,this);this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Select Labels"};
b.prototype.events={"mouseenter .item":"hoverLabelSelect","click .card-label":"addOrRemoveLabel"};b.prototype.render=function(b){var c,g,f,h,k,q;h=[];b||(b=l.labelNames);g=this.model.get("labels");k=0;for(q=b.length;k<q;k++)c=b[k],f=_.include(g,c),h.push({color:c,name:this.model.getBoard().getLabelName(c),isActive:f});this.$el.html(v.fill("popover_change_labels",{labels:h,hideEditTitles:!0}));return this};b.prototype.hoverLabelSelect=function(b){b=$(b.target).closest(".card-label");return l.selectMenuItem(this.$(".edit-labels-pop-over"),
".card-label",b)};b.prototype.addOrRemoveLabel=function(b){l.stop(b);b=$(b.target).closest(".card-label");b.toggleClass("active");b=b.attr("label");this.model.toggle("labels",b)?n("Card Composer","Add Label"):n("Card Composer","Remove Label")};return b}(A);ic=function(c){function b(){this.changePosition=k(this.changePosition,this);this.changeList=k(this.changeList,this);this.updatePositionList=k(this.updatePositionList,this);this.updateListList=k(this.updateListList,this);this.renderPositionResults=
k(this.renderPositionResults,this);this.filterPos=k(this.filterPos,this);this.selectPosResult=k(this.selectPosResult,this);this.hoverPosResultsSelect=k(this.hoverPosResultsSelect,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Select Position"};b.prototype.events={"change .js-select-list":"changeList","change .js-select-position":"changePosition","mouseenter .js-pos-results li":"hoverPosResultsSelect","click .js-select-pos-keyword":"selectPosResult",
"click .js-select-pos-pos":"selectPosResult","click .js-select-pos-list":"selectPosResult"};b.prototype.render=function(){this.$el.html(v.fill("move_card_controls",{hideBoard:!0}));this.updateListList();return this};b.prototype.hoverPosResultsSelect=function(b){b=$(b.target).closest("li");return l.selectMenuItem(this.$(".js-pos-results"),"li",b)};b.prototype.selectPosResult=function(b){var c,g,f;l.stop(b);g=$(b.target).closest("a");f=g.attr("name");b=this.model.getList().cardList.openCards().length;
c=b+1;g.hasClass("js-select-pos-keyword")?"top"===f?(this.model.set("index",0),n("Card Composer","Select Position in List by Autocomplete",'Top of List - Used "Top"')):"bottom"===f&&(this.model.set("index",c),n("Card Composer","Select Position in List by Autocomplete",'Bottom of List - Used "Bottom"')):g.hasClass("js-select-pos-pos")?(this.model.set("index",parseInt(f,10)-1),n("Card Composer","Select Position in List by Autocomplete","Selected Position - Used Number")):g.hasClass("js-select-pos-list")&&
(c=b===this.model.get("pos"),this.model.set("idList",f),c?(this.model.set("index",b),n("Card Composer","Select List by Autocomplete","Bottom")):n("Card Composer","Select List by Autocomplete","Not Bottom"));w.hide()};b.prototype.filterPos=function(b){var c,g,f,h,k,q,u,n,s,v;u=RegExp("^"+l.escapeForRegex(b));k=RegExp("^"+l.escapeForRegex(b)+"$");c=this.model.getList().cardList.openCards();b={keywordList:function(){var b,c,d,e;d=["top","bottom"];e=[];b=0;for(c=d.length;b<c;b++)f=d[b],u.test(f)&&e.push(f);
return e}(),indexList:function(){var b,d,f;f=[];g=b=1;for(d=c.length+1;1<=d?b<=d:b>=d;g=1<=d?++b:--b)k.test(String(g))&&f.push(g);return f}(),listList:[]};v=this.model.getBoard().openLists();n=0;for(s=v.length;n<s;n++)h=v[n],q=_.compact(h.get("name").toLowerCase().split(/\s+/)),_.find(q,function(b){return u.test(b)})&&b.listList.push(h.toJSON());b.hasData=!_.isEmpty(b.keywordList)||!_.isEmpty(b.indexList)||!_.isEmpty(b.listList);return b};b.prototype.renderPositionResults=function(b){var c,g,f,h;
c=this.model.getList();g=this.model.get("index")+1;f="of";1!==g&&g!==c.cardList.openCards().length+1&&(l.getNaturalNumber(g),f="in");c=this.model.toJSON({list:!0});_.extend(c,{indexPrep:f,keywordList:function(){var c,e,f,g;f=b.keywordList;g=[];c=0;for(e=f.length;c<e;c++)h=f[c],g.push({value:h,natural:l.capitalize(h)});return g}(),indexList:function(){var c,e,f,h;f=b.indexList;h=[];c=0;for(e=f.length;c<e;c++)g=f[c],h.push({value:g,natural:l.getNaturalNumber(g)});return h}(),listList:b.listList});this.$el.html(v.fill("popover_filter_pos_results",
c))};b.prototype.updateListList=function(){var b,c,g,f,h,k,l,u;g=this.model.getList();f=g.id;g=this.model.getBoard();c=this.$(".js-select-list");c.empty();u=_.sortBy(g.openLists(),function(b){return b.get("pos")});k=0;for(l=u.length;k<l;k++)g=u[k],b=h=g.get("name"),g.id===f&&(b+=" (selected)"),b=$("<option value='"+g.id+"'>"+_.escape(b)+"</option>"),c.append(b),g.id===f&&(b.attr("selected","selected"),this.$(".js-list-value").text(h));return this.updatePositionList()};b.prototype.updatePositionList=
function(){var b,c,g,f,h,k,q,u;c=this.$(".js-select-list");g=this.$(".js-select-position");c=c.find("option:selected").val();g.empty();h=this.model.getList();null!=this.model.getBoard().listList.get(c)||this.model.getBoard().openLists.at(0);c=h.cardList.openCards();this.model.get("index")>c.length&&this.model.set("index",c.length);if(0===c.length)$("<option>").val("0").text("1").appendTo(g),this.$(".js-pos-value").html(l.getNaturalNumber(1));else{f=q=0;for(u=c.length;0<=u?q<=u:q>=u;f=0<=u?++q:--q)b=
k=String(f+1),h=!1,0<c.length&&(0===f?b+=" (top)":f===c.length&&(b+=" (bottom)")),f===this.model.get("index")&&(h=!0),b=$("<option>").val(f).text(b).appendTo(g),h&&(b.attr("selected","selected"),this.$(".js-pos-value").html(l.getNaturalNumber(k)))}};b.prototype.changeList=function(){var b,c,g;c=this.model.get("pos");b=this.model.getList().cardList.openCards().length;g=b===c;c=this.$(".js-select-list").find("option:selected").val();this.model.set("idList",c);g?(this.model.set("index",b),n("Card Composer",
"Change Position by Click","Change List - Bottom")):n("Card Composer","Change Position by Click","Change List - Not Bottom");w.hide()};b.prototype.changePosition=function(){var b;b=this.$(".js-select-position");b=parseInt(b.find("option:selected").val(),10);this.model.set("index",b);n("Card Composer","Change Position by Click","Change Position in List");w.hide()};return b}(A);hc=function(c){function b(){this.chooseCard=k(this.chooseCard,this);this.selectCard=k(this.selectCard,this);this.renderResults=
k(this.renderResults,this);this.keydownEvent=k(this.keydownEvent,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Search for Card to Copy..."};b.prototype.events={"click .list-card":"chooseCard","mouseenter .list-card":"selectCard"};b.prototype.render=function(){var b;b={};b.showInput=!this.options.fromComposer;this.$el.html(v.fill("card_copy_from",b));this.options.fromComposer||_.delay(function(b){return function(){return b.$(".js-input").keydown(_.debounce(b.keydownEvent,
150))}}(this),20);return this};b.prototype.keydownEvent=function(b){var c;l.stop(b);13===b.keyCode?this.$(".list-card.selected").first().click():38===(c=b.keyCode)||40===c?l.navMenuList(this.$(".js-card-results"),".list-card",b.keyCode):""===this.$(".js-input").val().trim()?this.$(".js-card-results").empty():this.renderResults()};b.prototype.renderResults=function(b){var c,g,f,h,k,q,u,n,s,y,B,H,A,C;h=this.$(".js-card-results");s=/[\s\x21-\x22\x24-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/;g=/[\x21-\x22\x24-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/;
if(b)y=RegExp("^("+b+")");else{b=this.$(".js-input").val().trim().toLowerCase();b=b.replace(g,"");if(""===b)return;b=b.split(/\s+/);y=RegExp("^("+b.join("|")+")")}h.empty();q=[];f=this.model.getBoard().openLists();B=0;for(u=f.length;B<u;B++){g=f[B];A=g.cardList.openCards();n=0;for(H=A.length;n<H;n++)k=A[n],g={card:k},g.nameList=_.compact(k.get("name").toLowerCase().split(s)),_.find(g.nameList,function(b){return y.test(b)})&&q.push(g)}q=_.sortBy(q,function(c){return-_.intersection(c.nameList,b).length});
if(_.isEmpty(q))h.append("<p class='empty'>No results</p>");else{B=q.slice(0,8);s=0;for(q=B.length;s<q;s++){g=B[s];u=g.card;g=u.toJSON();g.url="#";g.labels=u.getActiveLabels();f=v.fill("card_in_list",g,{},{label:v.label});g=$("<div class='list-card clearfix' cardId='"+g.id+"'>"+f+"</div>");n=u.memberList.models;f=g.find(".list-card-members");H=0;for(A=n.length;H<A;H++)k=n[H],f.append("<div class='member'> "+v.fill("member",k.toJSON())+" </div>");c=g.find(".badges");null!=(C=u.badgeList)&&C.forEach(function(b){b.get("isArchived")||
(b=b.getView(BadgeView,"cardcopy"),c.append(b.render().el))});h.append(g)}l.selectMenuItem(h,".list-card",h.find(".list-card").first());w.calcPos()}};b.prototype.selectCard=function(b){var c;c=this.$(".js-card-results");l.selectMenuItem(c,".list-card",$(b.target).closest(".list-card"))};b.prototype.chooseCard=function(b){n("Card Composer","Select Card to Copy");b=$(b.target).closest(".list-card").attr("cardId");w.pushView({view:$b,options:{model:this.Card.get(b),modelCache:this.modelCache}})};return b}(A);
If=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="calendar-card-composer";b.prototype.initialize=function(){return this.board=this.model.getBoard()};b.prototype.events={"change .js-select-list":"updatePositionList","change .js-select-position":"renderValues","click .js-add-card":"addCard",keydown:"keydownEvent"};b.prototype.getViewTitle=function(){return"Add Card"};b.prototype.setDate=function(b){this.date=b;return this.date.setHours(12)};
b.prototype.remove=function(){var c;c={title:this.$(".js-card-title").val(),idList:this.$(".js-select-list").val(),pos:this.$(".js-select-position").val()};this.model.set(c).save();return b.__super__.remove.apply(this,arguments)};b.prototype.render=function(){var b;b={title:this.model.get("title")};this.$el.html(v.fill("popover_card_from_calendar",b));this.updateListList();this.updatePositionList();_.defer(function(b){return function(){return l.setCaretAtEnd(b.$(".js-card-title")[0])}}(this));return this};
b.prototype.keydownEvent=function(b){13===b.keyCode&&this.addCard(b)};b.prototype.addCard=function(b){var c,g;l.stop(b);if(c=$.trim(this.$(".js-card-title").val()))return w.hide(),this.model.moveToNext(),b=this.selectedList(),g=parseInt(this.$(".js-select-position").val()),c={closed:!1,dateLastActivity:new Date,due:this.date.toString(),idList:b.id,pos:b.calcPos(g),name:c},b.cardList.create(c)};b.prototype.updateListList=function(){var b,c;b=this.$(".js-select-list");b.empty();c=this.board.openLists();
_.each(c,function(c){return $("<option>").val(c.id).text(c.get("name")).appendTo(b)});b.val(this.model.get("idList"));b.val()||b.find("option").first().prop("selected",!0);return this.renderValues()};b.prototype.updatePositionList=function(){var b,c,g,f,h;b=this.$(".js-select-position");g=this.selectedList();b.empty();f=g.cardList.length;c=function(){h=[];for(var b=0;0<=f?b<=f:b>=f;0<=f?b++:b--)h.push(b);return h}.apply(this);_.each(c,function(f){var g;g=function(){switch(f){case 0:return" (Top)";
case c.length-1:return" (Bottom)";default:return""}}();return $("<option>").val(f).text(f+1+g).appendTo(b)});b.val(this.model.get("pos"));b.val()||b.find("option").last().prop("selected",!0);return this.renderValues()};b.prototype.selectedList=function(){var b;b=this.$(".js-select-list").val();return _.findWhere(this.board.listList.models,{id:b})};b.prototype.renderValues=function(){var b;this.$el.find(".js-list-value").text(this.selectedList().get("name"));b=parseInt(this.$(".js-select-position").val());
return this.$el.find(".js-pos-value").text(b+1)};return b}(A);var cc,k=function(c,b){return function(){return c.apply(b,arguments)}},F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c},D=[].indexOf||function(c){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===c)return b;return-1};cc=function(c){function b(){this.updateDate=k(this.updateDate,this);this.dateKeyDown=
k(this.dateKeyDown,this);this.removeDueDate=k(this.removeDueDate,this);this.submitDueDate=k(this.submitDueDate,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.getViewTitle=function(){return"Change Due Date"};b.prototype.tagName="form";b.prototype.className="dpicker-widget clearfix";b.prototype.initialize=function(){var b;b=this.model.getBoard();this.listenTo(b,{"change:powerUps":this.renderCalendar})};b.prototype.events={"click .js-save-edit":"submitDueDate","click .js-remove-date":"removeDueDate",
"keydown .js-dpicker-date-input":"dateKeyDown","blur .js-dpicker-date-input":"updateDate","click .js-enable-calendar-powerup":"enableCal"};b.prototype._closeDialog=function(b){l.stop(b);return w.hide()};b.prototype._getDate=function(){var b,c;if(this.$(".js-dpicker-date-input").is(".input-error"))return null;b=this.$(".js-dpicker-date-input").val();c=this._cleanTime(this.$(".js-dpicker-time-input").val());return I.parse(""+b+" "+c)};b.prototype.submitDueDate=function(c){var e;l.stop(c);e=this._getDate();
if(I.validDate(e))return this._closeDialog(c),c=e.getTime(),b.lastDueDate=c,this.model.update("due",c)};b.prototype.removeDueDate=function(b){this._closeDialog(b);return this.model.update("due",null)};b.prototype.dateKeyDown=function(b){if(l.isSubmitKey(b))return this.updateDate(b)};b.prototype.updateDate=function(b){var c,g,f;c=this.$(".js-dpicker-date-input");b=this.$(".js-dpicker-cal");f=c.val().replace(/\s/g,"").replace(/[\-.]/g,"/");g=Date.parse(I.convertDateFormat(f));f=_.select(f.split("/"),
function(b){return 0<b});if(!g||2>_.select(f,function(b){return 3>b.length&&31>=b}).length)c.addClass("input-error");else if(c.removeClass("input-error"),3>f.length&&g<Date.today()&&g.setFullYear(g.getFullYear()+1),this._lastCalDate.toDateString()!==g.toDateString())return this._lastCalDate=g,b.datepicker("setDate",I.toShortString(g))};b.prototype.renderCalendar=function(){var b,c,g,f;g=this.model.getBoard();c=this.$(".js-cal-enabled").addClass("hide");b=this.$(".js-enable-cal").addClass("hide");
f=0<=D.call(null!=g?g.get("powerUps"):void 0,"calendar");g=(null!=g?g.owned():void 0)&&!f;f?c.removeClass("hide"):g&&b.removeClass("hide");w.calcPos();return this};b.prototype.render=function(){var c,e,g,f,h,k,l,u,n,s,y,B,H;c=this.model.getBoard();e=null!=(g=this.model.get("badges"))?g.due:void 0;g=this.model.toJSON();g.hasDueDate=null!=e;this.$el.html(v.fill("date_picker",g,{owned:c.owned()}));this.renderCalendar();u=this.$(".js-dpicker-time-input");n=this.$(".js-dpicker-time-select");f=this.$(".js-dpicker-date-input");
c=this.$(".js-dpicker-cal");e?e=I.parse(e):null!=b.lastDueDate&&(e=new Date(b.lastDueDate));_.isDate(e)||(e=Date.today().add({days:1,hours:12}));c.datepicker({altField:".js-dpicker-date-input",defaultDate:e,showOtherMonths:!0,selectOtherMonths:!0,dateFormat:I.isUS?"mm/dd/yy":"dd/mm/yy",onSelect:function(){return f.removeClass("input-error")},firstDay:I.isUS?0:1});w.calcPos();f.val(e.toString(I.isUS?"MM/dd/yyyy":"dd/MM/yyyy"));u.val(e.toString(I.timeFormat()));this._lastCalDate=e;k=["AM","PM"];c=[12,
1,2,3,4,5,6,7,8,9,10,11];s=0;for(B=k.length;s<B;s++){g=k[s];y=0;for(H=c.length;y<H;y++)h=c[y],l='<option value="'+h+":00 "+g+'">'+h+":00 "+g+"</option>",h='<option value="'+h+":30 "+g+'">'+h+":30 "+g+"</option>",n.append(l,h)}e=e.toString("h:00 tt");n.find('option[value="'+e+'"]').attr("selected",!0);n.change(function(){var b;b=n.find("option:selected").val();return u.val(b)});qa.fSmall&&(u.hide(),n.addClass("show"));u.keyup(function(b){return function(){if(b._timeOK(u.val()))return u.removeClass("input-error")}}(this));
u.change(function(b){return function(){return b._timeOK(u.val())?u.removeClass("input-error"):u.addClass("input-error")}}(this));return this};b.prototype._timeOK=function(b){return null!=this._cleanTime(b)};b.prototype._cleanTime=function(b){return I.normalizeTime(b)};b.prototype.enableCal=function(b){l.stop(b);b=this.model.getBoard();null!=b&&b.addToSet("powerUps","calendar");n("Card Menu","Enable Calendar via Due Date Menu")};return b}(A);var Bb,G=[].slice;Bb=new (function(){function c(){}c.prototype._knownUrls=
[{name:"Trello Board",match:/^https:\/\/trello\.com\/b\/([a-zA-Z0-9]{8})(?:$|\/)/,previewClass:"attachment-thumbnail-preview-trello-logo",icon:"https://d78fikflryjgj.cloudfront.net/images/services/e1b7406bd79656fdd26ca46dc8963bee/trello.png",text:function(b,c,e){var g,f,h;h=b[1];g=function(){var b;return null!=(b=c.get("Board",IdCache.getBoardId(h)))?b.get("name"):void 0};if(null!=(f=g()))return f;M["for"](c).loadBoardNames([h],function(b){b=$("#"+e);return null!=(f=g())?b.text(f):"private board"});
return"board\u2026"}},{name:"Trello Card",match:/^https:\/\/trello\.com\/c\/([a-zA-Z0-9]{8})(?:$|\/)/,previewClass:"attachment-thumbnail-preview-trello-logo",icon:"https://d78fikflryjgj.cloudfront.net/images/services/e1b7406bd79656fdd26ca46dc8963bee/trello.png",text:function(b,c,e){var g,f,h;h=b[1];g=function(){var b;return null!=(b=c.get("Card",IdCache.getCardId(h)))?b.get("name"):void 0};if(null!=(f=g()))return f;M["for"](c).loadCardData(h,function(b){b=$("#"+e);return null!=(f=g())?b.text(f):"private card"});
return"card\u2026"}},{name:"FogBugz Case",match:/^https?:\/\/([^\.]+)\.fogbugz\.com\/(?:f\/cases\/|default\.asp\?)([\d]+)/,previewClass:"attachment-thumbnail-preview-fogbugz-logo",icon:"https://d78fikflryjgj.cloudfront.net/images/services/a1385c9ce999f8389ec7dc43c1b24b2c/fogbugz.png",text:function(b){return"Case "+b[2]}},{name:"Kiln Commit",match:/^https?:\/\/([^\.]+)\.(?:fogbugz\.com\/kiln|kilnhg\.com)\/Code\/([^\/]+)\/([^\/]+)\/([^\/]+)\/History\/([^\/]+)/,previewClass:"attachment-thumbnail-preview-kiln-logo",
icon:"https://d78fikflryjgj.cloudfront.net/images/services/6c1d65d72873b01d740adfbb9de22234/kiln.png",text:function(b){var c,e,g;e=b[2];g=b[3];c=b[4];b=b[5];return"Group"===g?""+e+" \u00bb "+c+": "+b:""+e+" \u00bb "+g+" \u00bb "+c+": "+b},dataUrl:function(b){return b.replace(/\/Code\//,"/trello/Code/")},_processJSON:function(b,c){var e,g,f,h;if(null!=c.reviews){h=c.reviews;e=0;for(f=h.length;e<f;e++)g=h[e],g.status=function(){switch(g.sStatus){case "active":return"In Review";case "rejected":return"Review Rejected";
case "needswork":return"Review Needs Work";case "abandoned":return"Review Abandoned";case "approved":return"Review Approved"}}(),g.url=b.replace(/\/Code\/.*$/,"/Review/"+g.sReview)}c.sAuthor&&(c.author=c.sAuthor.replace(/\s<.*$/,""));c.hash&&(c.shortHash=c.hash.substr(0,6));c.sDescription&&(e=new Fa({restrict:{block:["paragraph","newline"],inline:["break","email","emoji","url"]}}),c.shortCommitMessage=c.sDescription.split("\n")[0],c.commitMessageHtml=e.format(c.sDescription).output);c.url=b;return c},
previewHtml:function(b,c){return v.fill("kiln_changeset_preview",this._processJSON(b,c))},previewHtmlError:function(b,c){var e;return/unable to access/i.test(c)?(b=null!=(e=/^https?:\/\/[-a-z0-9\.]+(\/kiln)?/.exec(b))?e[0]:void 0,{login:'You may be able to see more about this changeset by\n<a href="'+b+'" target="kiln">logging into Kiln</a>.'}):null},thumbnailHtml:function(b,c,e){return v.fill("kiln_changeset_thumbnail",_.extend({},this._processJSON(b,c),e))}},{name:"Kiln Code Review",match:/^https?:\/\/([^\.]+)\.(?:fogbugz\.com\/kiln|kilnhg\.com)\/Review\/(K[^\/]+)/,
previewClass:"attachment-thumbnail-preview-kiln-logo",icon:"https://d78fikflryjgj.cloudfront.net/images/services/6c1d65d72873b01d740adfbb9de22234/kiln.png",text:function(b){return"Review "+b[2]}},{name:"GitHub Commit",match:/^https?:\/\/github\.com\/([^\/]+)\/([^\/]+)\/commit\/([^\/]{40})$/,previewClass:"attachment-thumbnail-preview-github-logo",icon:"https://d78fikflryjgj.cloudfront.net/images/services/8cab38550d1f23032facde191031d024/github.png",text:function(b){return""+b[1]+"/"+b[2]+": "+b[3].substr(0,
8)}},{name:"GitHub Issue",match:/^https?:\/\/github\.com\/([^\/]+)\/([^\/]+)\/issues\/(\d+)$/,previewClass:"attachment-thumbnail-preview-github-logo",icon:"https://d78fikflryjgj.cloudfront.net/images/services/8cab38550d1f23032facde191031d024/github.png",text:function(b){return""+b[1]+"/"+b[2]+": #"+b[3]}},{name:"GitHub Pull Request",match:/^https?:\/\/github\.com\/([^\/]+)\/([^\/]+)\/pull\/(\d+)$/,previewClass:"attachment-thumbnail-preview-github-logo",icon:"https://d78fikflryjgj.cloudfront.net/images/services/8cab38550d1f23032facde191031d024/github.png",
text:function(b){return""+b[1]+"/"+b[2]+": Pull Request #"+b[3]}}];c.prototype.interpret=function(b,c){var e,g,f,h,k,l,u,n,s;s=this._knownUrls;u=0;for(n=s.length;u<n;u++)if(l=s[u],h=l.name,f=l.match,k=l.previewClass,e=l.icon,l=l.text,null!=(f=f.exec(b)))try{return g=_.uniqueId("known"),{id:g,name:h,previewClass:k,icon:e,text:l(f,c,g)}}catch(v){}return null};c.prototype._runHandler=function(){var b,c,e,g,f,h,k,l;g=arguments[0];h=arguments[1];b=4<=arguments.length?G.call(arguments,2,c=arguments.length-
1):(c=2,[]);f=arguments[c++];l=this._knownUrls;c=0;for(k=l.length;c<k;c++)if(e=l[c],e.match.test(h)&&null!=e[g]){c=e.dataUrl;$.ajax({url:c(h),xhrFields:{withCredentials:!0},headers:{"X-Trello":"Is it me you're looking for?"},success:function(c){return f(null,e[g].apply(e,[h,c].concat(G.call(b))))},error:function(c,d,k){c=""+g+"Error";k="function"===typeof e[c]?e[c].apply(e,[h,k].concat(G.call(b))):void 0;return f(null!=k?k:"could not load")}});return}f()};c.prototype.previewHtml=function(b,c){return this._runHandler("previewHtml",
b,c)};c.prototype.thumbnailHtml=function(b,c,e){return this._runHandler("thumbnailHtml",b,c,e)};return c}());var ui,Ag,Fg,F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c},G=[].slice,k=function(c,b){return function(){return c.apply(b,arguments)}};ui=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.typeName="Attachment";
b.prototype.urlRoot=function(){return""+this.getCard().url()+"/attachments"};b.prototype.getCard=function(){return this.collection.sourceModel};b.prototype.editable=function(){return this.getCard().editable()};b.prototype.smallestPreviewBiggerThan=function(b){return l.smallestPreviewBiggerThan(this.get("previews"),b)};b.prototype.previewBetween=function(b,c,g,f){return l.previewBetween.apply(l,[this.get("previews")].concat(G.call(arguments)))};b.prototype.biggestPreview=function(){return l.biggestPreview(this.get("previews"))};
b.prototype.smallestPreview=function(){return l.smallestPreview(this.get("previews"))};b.prototype.getType=function(){var b,c;b=l.getAttachmentData(this);null!=b.ext?c=b.ext:null!=b.meta&&(c=b.meta);return c};return b}(fa);Ag=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.model=ui;b.prototype.comparator=function(b){return-I.parse(b.get("date"))||0};b.prototype.initialize=function(b,c){this.options=c};return b}(fb);Fg=function(c){function b(){this.render=
k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="attachment-thumbnail";b.prototype.events={"click .js-open-viewer":"openViewer","click .js-download":"download","click .js-make-cover":"makeCover","click .js-remove-cover":"removeCover","click .js-confirm-delete":"confirmDelete"};b.prototype.render=function(){var b,c,g,f,h,k,q;f=l.getAttachmentData(this.model,this.modelCache);null==f.canUseViewer&&(f.canUseViewer=!0);h=this.model.smallestPreviewBiggerThan(110);
ba.isHighDPI()&&(c=this.model.smallestPreviewBiggerThan(220),h=null!=c?c:h);null!=h?(f.isImage=!0,g=this.model.getCard(),c=g.getBoard(),f.cardCovers=null!=c?null!=(k=c.get("prefs"))?k.cardCovers:void 0:void 0,f.isCover=f.cardCovers&&g.get("idAttachmentCover")===this.model.id,f.imgSrc=h.url,f.edgeColor=null!=(q=f.edgeColor)?q:"transparent",f.ext=null):null==f.ext||6<f.ext.length?(f.ext=null,f.canUseViewer=!1):l.isViewerable(f.ext)||(f.canUseViewer=!1);ba.isTouch()&&(f.canUseViewer=!1);this.$el.html(v.fill("attachment_thumb",
f,{editable:this.model.editable()}));this.renderCoverState();I.update(this.el);f.isKnownService&&(b=this.$(".js-attachment-thumbnail-details"),Bb.thumbnailHtml(f.url,f,function(c,e){if(null==c&&null!=e)return b.html(e),I.update(b)}));return this};b.prototype.openViewer=function(b){b.metaKey||(l.stop(b),(new Ec({model:this.model.getCard(),modelCache:this.modelCache,attachmentModel:this.model})).render(),n("Attachment","Open Attachment Viewer",this.model.getType()))};b.prototype.renderCoverState=function(){var b,
c,g,f,h;g=null!=(b=this.model.getCard())?null!=(c=b.getBoard())?c.getPref("cardCovers"):void 0:void 0;b=this.$(".js-make-cover").addClass("hide");c=this.$(".js-remove-cover").addClass("hide");if(0<(null!=(f=this.model.get("previews"))?f.length:void 0)&&g)g=(null!=(h=this.model.getCard())?h.get("idAttachmentCover"):void 0)===this.model.id,b.toggleClass("hide",g),c.toggleClass("hide",!g)};b.prototype.download=function(b){l.stopPropagation(b);n("Attachment","Attachment Thumbnail","Download")};b.prototype.makeCover=
function(b){l.stop(b);w.hide();this.model.getCard().makeCover(this.model);n("Attachment","Attachment Thumbnail","Make Cover")};b.prototype.removeCover=function(b){l.stop(b);w.hide();this.model.getCard().removeCover(null);n("Attachment","Attachment Thumbnail","Remove Cover")};b.prototype.confirmDelete=function(b){var c;l.stop(b);b=l.getAttachmentData(this.model,this.modelCache);c="Deleting an attachment is permanent. There is no undo.";b.isExternal&&(c="Remove this "+b.serviceName+" file? There is no undo.");
pa.toggle({elem:this.$(".js-confirm-delete"),top:20,model:this.model,title:""+b.removeText+" Attachment?",text:c,confirmText:b.removeText,confirmBtnClass:"negate",fxConfirm:function(b){return function(c){b.model.destroy();return n("Attachment","Delete Attachment",b.model.getType())}}(this)});n("Attachment","Attachment Thumbnail","Confirm Delete")};return b}(A);var Ec,k=function(c,b){return function(){return c.apply(b,arguments)}},F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}
for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c},D=[].indexOf||function(c){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===c)return b;return-1};Ec=function(c){function b(){this["delete"]=k(this["delete"],this);this.closeDeleteConfirm=k(this.closeDeleteConfirm,this);this.openDeleteConfirm=k(this.openDeleteConfirm,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="attachment-viewer";b.prototype.initialize=
function(){var b,c;w.hide();this.allowsCardCovers=null!=(c=this.model.getBoard())?c.getPref("cardCovers"):void 0;this.currentAttachment=this.options.attachmentModel;b=this.options.idAttachment;if(null!=b)return this.currentAttachment=this.model.attachmentList.find(function(c){return c.id===b})};b.prototype.events={"click .js-show-next-frame":"showNextFrame","click .js-show-prev-frame":"showPrevFrame","mouseenter .js-show-next-frame":"hintNextFrame","mouseenter .js-show-prev-frame":"hintPrevFrame",
"mouseleave .js-show-next-frame":"clearHint","mouseleave .js-show-prev-frame":"clearHint","click .js-stop":"stop","click .js-close-viewer":"close","click .js-open-delete-confirm":"openDeleteConfirm","click .js-close-delete-confirm":"closeDeleteConfirm","click .js-delete":"delete","click .js-make-cover":"makeCover","click .js-remove-cover":"removeCover",shortcut:"shortcut"};b.prototype.shortcut=function(b){switch(b){case 27:return this.close(),["Esc - Close Attachment Viewer","Attachment Viewer"];
case 39:return this.showNextFrame(),["Right Arrow - Next Attachment","Attachment Viewer"];case 37:return this.showPrevFrame(),["Left Arrow - Previous Attachment","Attachment Viewer"]}};b.prototype.getAttachmentModels=function(){return this.model.attachmentList.models};b.prototype.getAttachmentModelsLength=function(){return this.getAttachmentModels().length};b.prototype.getCurrentAttachmentIndex=function(){return _.indexOf(this.getAttachmentModels(),this.currentAttachment)};b.prototype.getNextAttachmentIndex=
function(){var b;b=this.getCurrentAttachmentIndex()+1;return b>=this.getAttachmentModelsLength()?null:b};b.prototype.getNextModel=function(){var b;b=this.getNextAttachmentIndex();return null!=b?this.getAttachmentModels()[b]:null};b.prototype.getPrevAttachmentIndex=function(){var b;b=this.getCurrentAttachmentIndex()-1;return 0>b?null:b};b.prototype.getPrevModel=function(){var b;b=this.getPrevAttachmentIndex();return null!=b?this.getAttachmentModels()[b]:null};b.prototype.render=function(){var b;b=
this.model.toJSON();b.numAttachments=this.getAttachmentModelsLength();this.$el.html(v.fill("attachment_viewer",b));this.addNewFrame(this.currentAttachment,"center");b=this.getNextModel();null!=b&&this.addNewFrame(b,"right");b=this.getPrevModel();null!=b&&this.addNewFrame(b,"left");this.setDetailsAndControls();$("body").append(this.$el);"undefined"!==typeof X&&null!==X&&X.addHandler(this,{scope:"attachment_viewer",modal:!0,top:!0});return this};b.prototype.setDetailsAndControls=function(){var b,c;
b=l.getAttachmentData(this.currentAttachment,this.modelCache);b.canMakeCover=this.allowsCardCovers&&0<(null!=(c=b.previews)?c.length:void 0);b.isCover=this.allowsCardCovers&&this.model.get("idAttachmentCover")===this.currentAttachment.id;this.$(".js-display-frame-details").empty().append(v.fill("attachment_viewer_frame_details",b,{editable:this.model.editable()}));this.$(".js-show-prev-frame").toggleClass("hide",null==this.getPrevAttachmentIndex());this.$(".js-show-next-frame").toggleClass("hide",
null==this.getNextAttachmentIndex());I.update(this.el)};b.prototype.addNewFrame=function(b,c){var g,f,h,k,q,u,n,s;g=l.getAttachmentData(b,this.modelCache);null!=c&&(g.directionClass="attachment-viewer-frame-"+c);q=(f=g.ext,0<=D.call(l.imageExts(),f))||0<(null!=(n=g.previews)?n.length:void 0);f=(u=g.ext,0<=D.call(l.audioExts(),u));u=(k=g.ext,0<=D.call(l.videoExts(),k));k=(h=g.ext,0<=D.call(l.iFrameableExts(),h));h=(s=g.ext,0<=D.call(l.googleViewerableExts(),s));g.isExternal?g.isPlaceholder=!0:q?g.isImage=
!0:f?g.isAudio=!0:u?g.isVideo=!0:k?g.isIFrameable=!0:h?(g.isIFrameable=!0,q=encodeURIComponent(g.url),g.url="https://docs.google.com/viewer?embedded=true&url="+q):(g.isPlaceholder=!0,g.openText="Download");this.$(".js-frames").append(v.fill("attachment_viewer_frame",g,{editable:this.model.editable()}));_.defer(function(){return $(".attachment-viewer-frame").addClass("attachment-viewer-frame-loaded")});return this};b.prototype.focusFrame=function(b,c){var g,f,h,k;this.currentAttachment=b;g=_.find(this.$(".attachment-viewer-frame"),
function(c){return function(c){return $(c).attr("data-idAttachment")===b.id}}(this));switch(c){case "right":f=this.$(".attachment-viewer-frame-left");k="attachment-viewer-frame-left";h=this.getNextModel();break;case "left":f=this.$(".attachment-viewer-frame-right"),k="attachment-viewer-frame-right",h=this.getPrevModel()}this.$(".attachment-viewer-frame-center").removeClass("attachment-viewer-frame-center").addClass(k);$(g).removeClass("attachment-viewer-frame-left attachment-viewer-frame-right").addClass("attachment-viewer-frame-center");
f.remove();null!=h?this.addNewFrame(h,c):this.clearHint();this.setDetailsAndControls()};b.prototype.showNextFrame=function(b){l.stop(b);b=this.getNextModel();null!=b&&this.focusFrame(b,"right");n("Attachment Viewer","Show Next Frame")};b.prototype.showPrevFrame=function(b){l.stop(b);b=this.getPrevModel();null!=b&&this.focusFrame(b,"left");n("Attachment Viewer","Show Previous Frame")};b.prototype.hintNextFrame=function(){this.$el.addClass("attachment-viewer-frames-next-hint")};b.prototype.hintPrevFrame=
function(){this.$el.addClass("attachment-viewer-frames-prev-hint")};b.prototype.clearHint=function(){this.$el.removeClass("attachment-viewer-frames-next-hint attachment-viewer-frames-prev-hint")};b.prototype.stop=function(b){return l.stopPropagation(b)};b.prototype.openDeleteConfirm=function(b){l.stop(b);this.$(".js-meta").addClass("hide");this.$(".js-confirm-delete").removeClass("hide");n("Attachment Viewer","Open Delete Attachment Confirm")};b.prototype.closeDeleteConfirm=function(b){l.stop(b);
this.$(".js-meta").removeClass("hide");this.$(".js-confirm-delete").addClass("hide");n("Attachment Viewer","Close Delete Attachment Confirm")};b.prototype["delete"]=function(b){l.stop(b);this.currentAttachment.destroy();this.close();n("Attachment Viewer","Delete Attachment")};b.prototype.renderToggleCover=function(){var b;b=this.allowsCardCovers&&0<this.currentAttachment.get("previews").length;this.$(".js-cover-options").toggleClass("hide",!b);b=this.allowsCardCovers&&this.model.get("idAttachmentCover")===
this.currentAttachment.id;this.$(".js-make-cover-box").toggleClass("hide",b);this.$(".js-remove-cover-box").toggleClass("hide",!b)};b.prototype.makeCover=function(){this.model.makeCover(this.currentAttachment);this.renderToggleCover();n("Attachment Viewer","Make Cover")};b.prototype.removeCover=function(){this.model.removeCover(null);this.renderToggleCover();n("Attachment Viewer","Remove Cover")};b.prototype.close=function(){this.remove();X.removeHandler(this);n("Attachment Viewer","Close Viewer")};
return b}(A);var xe,k=function(c,b){return function(){return c.apply(b,arguments)}},F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c};xe=function(c){function b(){this.render=k(this.render,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.render=function(b){var c,g;c=null!=(g=null!=b?b.timeInSeconds:void 0)?g:60;c=Math.floor(c/60);return this.$el.html(v.fill("upgrade",
{stopped:null!=b?b.stopped:void 0,timeInMinutes:c,plural:1<c}))};b.prototype.events={"click .js-upgrade":"upgrade","click .js-stop-upgrade":"stopUpgrade"};b.prototype.upgrade=function(b){C.upgradeNow();return!1};b.prototype.stopUpgrade=function(b){C.stopUpgrade();return!1};return b}(A);var ye,F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c};ye=function(c){function b(){return b.__super__.constructor.apply(this,
arguments)}s(b,c);b.prototype.initialize=function(){var b;this.shareUrl=""+siteDomain+"/"+(null!=(b=this.getMe())?b.get("username"):void 0)+"/recommend";return this.shareMessageText=["It's like a whiteboard with super powers.","It's like sticky notes on steroids.","It's like three cups of coffee for your productivity.","It's like organization powered by rocket fuel."]};b.prototype.events={"click .js-user-reco-link":"clickRecoLinkShare","click .js-twitter-share":"clickTwitterShare","click .js-facebook-share":"clickFacebookShare"};
b.prototype.getMe=function(){return this.Member.get(y.myId())};b.prototype.render=function(){var b,c,g,f,h,k,q,u,n,s;g={};g.me=null!=(c=this.getMe())?c.toJSON():void 0;g.shareUrl=this.shareUrl;g.twitterShareUrl=this.constructTwitterUrl();g.facebookShareUrl=this.constructFacebookUrl();f=null!=(u=this.getMe().get("credits"))?u:[];u=_.filter(f,function(b){return b.count&&"invitation"===b.type});k=_.filter(f,function(b){return b.count&&"promoCode"===b.type});b=u.length;q=h=0;for(n=u.length;q<n;q++)c=
u[q],h+=c.count;n=q=0;for(s=k.length;n<s;n++)c=k[n],q+=c.count;q&&(g.promoMonths=l.formatCount(q,"free month",!0));h=Math.min(12,h);g.freeMonths=l.formatCount(h,"free month",!0);c=_.filter(f,function(b){var c;return!b.applied&&0<b.count&&("invitation"===(c=b.type)||"promoCode"===c)});c=_.reduce(c,function(b,c){return b+c.count},0);0<b&&(g.joined=1===b?"1 person":""+b+" people");this.$el.html(v.fill("reco",g));this.$(".js-redeem").empty().toggleClass("hide",0===c);0<c&&this.$(".js-redeem").empty().append(this.subview(ec,
this.getMe(),{allowDismiss:!1}).render().el);g=Math.min(100,Math.floor(100*h/12));this.$(".js-reco-progress-bar-current").css({width:""+g+"%"});b=this.$(".js-joined-members").empty();h=0;for(f=u.length;h<f;h++)c=u[h],null!=c.memberInvited&&(g=c.memberInvited,g.via=c.via,b.append(v.fill("reco_joined_member",g,{},{member:v.member})));return this};b.prototype.getShareMessageText=function(){var b;b=Math.floor(Math.random()*this.shareMessageText.length);return this.shareMessageText[b]};b.prototype.constructTwitterUrl=
function(){var b;b="You need @trello. "+this.getShareMessageText()+" "+this.shareUrl+" (And it's free.)";return"https://twitter.com/intent/tweet?text="+encodeURIComponent(b)+"&related=trello"};b.prototype.constructFacebookUrl=function(){var b;b="Try Trello. "+this.getShareMessageText()+" (And it's free.)";return"https://www.facebook.com/sharer/sharer.php?u="+this.shareUrl+"&t="+encodeURIComponent(b)};b.prototype.clickRecoLinkShare=function(){return n("Reco","Click Share Link")};b.prototype.clickTwitterShare=
function(){return n("Reco","Click Twitter Share Link")};b.prototype.clickFacebookShare=function(){return n("Reco","Click Facebook Share Link")};return b}(A);var Dg,F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c};Dg=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="quick-card-editor";b.prototype.initialize=
function(){this.makeDebouncedMethods("renderStickers");this.listenTo(this.model,{"change:labels":this.renderLabels});this.listenTo(this.model.memberList,"add remove reset",function(b){return function(){return b.renderMembers()}}(this));return this.listenTo(this.model.stickerList,"add remove reset change sort",function(){return this.renderStickersDebounced()})};b.prototype.events={"keydown .js-edit-card-title":"quickCardEditKeydown","click .js-save-edits":"saveEdits","click .js-stop":"stopCard","click .js-edit-labels":"editLabels",
"click .js-edit-members":"editMembers","click .js-move-card":"moveCard","click .js-copy-card":"copyCard","click .js-edit-due-date":"editDueDate","click .js-archive":"archive",click:"checkCloseEditor","click .js-close-editor":"closeEditor"};b.prototype.showCover=function(){return this.model.getBoard().getPref("cardCovers")&&this.model.hasCover()};b.prototype.showStickers=function(){return!0};b.prototype.renderCover=Ca.prototype.renderCover;b.prototype.renderBadges=Ca.prototype.renderBadges;b.prototype.renderLabels=
Ca.prototype.renderLabels;b.prototype.renderMembers=Ca.prototype.renderMembers;b.prototype.getMemberOnCardHtml=Ca.prototype.getMemberOnCardHtml;b.prototype.shortcut=function(b){switch(b){case 27:return this.checkCloseEditor(),["Esc - Close Quick Card Editor","Quick Card Editor"];case 13:return this.save(),["Enter - Save Quick Card Edits","Quick Card Editor"]}};b.prototype.render=function(b){var c,g,f;c=this.model.toJSON();c.labels=this.model.getLabels();c.showCover=this.showCover();c.hasStickers=
this.model.hasStickers();c.quickEdit=!0;g={card:v.card_in_list};c.left=this.cLeft=b.left;c.top=this.cTop=b.top;c.width=this.cWidth=b.width;b=this.cWidth+this.cLeft+160;$(window).height();f=$(window).width();b>f&&(c.leftButtons=!0);this.$el.html(v.fill("quick_card_editor",c,{},g));this.renderStickers().renderCover().renderLabels().renderBadges().renderMembers().checkShowCover();$("body").append(this.$el);this.calcHeight();this.focusInput();"undefined"!==typeof X&&null!==X&&X.addHandler(this,{scope:"quick_card_editor",
modal:!0,top:!0});_.defer(function(){return this.$(".quick-card-editor-buttons").addClass("fade-in")});return this};b.prototype.calcHeight=function(){var b,c,g,f;f=$(window).height();$(window).width();b=this.$(".quick-card-editor-card").outerHeight();this.cTop+b>f&&(b=f-b-8,this.$(".quick-card-editor-card").css({top:b}));b=this.$(".quick-card-editor-buttons");c=b.outerHeight();g=b.offset();c+g.top>f&&b.css({top:-36})};b.prototype.renderStickers=function(){var b,c;if(0<this.$(".sticker.moving, .sticker.rotating").length)return this;
b=this.$(".js-card-stickers").empty();var g,f,h,k;h=this.model.stickerList.models;k=[];g=0;for(f=h.length;g<f;g++)c=h[g],k.push(this.subview($h,c));this.appendSubviews(k,b);this.$(".list-card").toggleClass("has-stickers",this.model.hasStickers());return this};b.prototype.checkShowCover=function(){this.$(".list-card").toggleClass("has-cover",this.showCover()).toggleClass("has-stickers",this.model.hasStickers());return this};b.prototype.focusInput=function(){return this.$(".js-edit-card-title").focus().select()};
b.prototype.showPopOver=function(b,c,g){l.stop(b);w.toggle({elem:$(b.target).closest("a"),top:34,view:c,options:{model:this.model,modelCache:this.modelCache}});n("Quick Card Editor",g)};b.prototype.editLabels=function(b){return this.showPopOver(b,ac,"Open Label Edit")};b.prototype.editMembers=function(b){return this.showPopOver(b,bc,"Open Member Edit")};b.prototype.moveCard=function(b){return this.showPopOver(b,Xd,"Open Move Card")};b.prototype.copyCard=function(b){return this.showPopOver(b,$b,"Open Copy Card")};
b.prototype.editDueDate=function(b){return this.showPopOver(b,cc,"Open Due Date Edit")};b.prototype.archive=function(b){l.stop(b);this.model.close();this.closeEditor();n("Quick Card Editor","Archive")};b.prototype.quickCardEditKeydown=function(b){if(13===b.keyCode)return this.saveEdits(b)};b.prototype.saveEdits=function(b){l.stop(b);b=this.$(".js-edit-card-title").val().trim();""!==b?(w.hide(),this.model.update({name:b}),this.remove()):this.$(".js-edit-card-title").focus().select();n("Quick Card Editor",
"Save Name")};b.prototype.checkCloseEditor=function(b){w.isVisible?w.hide():0<this.$(".sticker.editing").length?this.stopEditingStickers():this.closeEditor(b)};b.prototype.closeEditor=function(b){this.remove();w.hide();X.removeHandler(this);n("Quick Card Editor","Close")};b.prototype.stopEditingStickers=function(){var b,c,g,f;f=_.clone(this.model.stickerList.models);c=0;for(g=f.length;c<g;c++)b=f[c],b.trigger("stopEditing")};b.prototype.stopCard=function(b){l.stopPropagation(b);w.hide()};return b}(A);
var Da,ra,F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c};Da=new (function(c){function b(){b.__super__.constructor.call(this);this.set({id:"memberState-"+y.myId()});this.fetch()}s(b,c);b.prototype["default"]=function(){return{cardsPageSortType:"board",processingAttachmentsLength:0}};b.prototype.getCardsPageSortType=function(){return this.get("cardsPageSortType")};
b.prototype.sortCardsPageByBoard=function(){return this.save("cardsPageSortType","board")};b.prototype.sortCardsPageByDate=function(){return this.save("cardsPageSortType","date")};b.prototype.getProcessingAttachmentsLength=function(){return this.get("processingAttachmentsLength")};b.prototype.addProcessingAttachment=function(){var b;b=this.getProcessingAttachmentsLength()+1;return this.save("processingAttachmentsLength",b)};b.prototype.removeProcessingAttachment=function(){var b;b=this.getProcessingAttachmentsLength()-
1;0>b&&(b=0);return this.save("processingAttachmentsLength",b)};b.prototype.clearProcessingAttachments=function(){return this.save("processingAttachmentsLength",0)};return b}(vb));ra=new (function(c){function b(){b.__super__.constructor.call(this);this.set({query:"",suggestions:[],suggestionSearchTerm:"",suggestSearchModelTypes:""})}s(b,c);b.prototype.getQuery=function(){return this.get("query")};b.prototype.setQuery=function(b){b!==this.getQuery()&&this.set("query",b);if(""===b)return this.clearSuggestions()};
b.prototype.toggleStringInQuery=function(b){var c;c=this.getQuery();return RegExp(""+l.escapeForRegex(b)).test(c)?this.removeStringFromQuery(b):this.addStringToQuery(b)};b.prototype.removeRegexFromQuery=function(b){var c;c=this.getQuery();if(b.test(c))return b=c.replace(b,""),b=l.stripExtraSpaces(b),""!==b&&(b+=" "),this.setQuery(b)};b.prototype.removeStringFromQuery=function(b){var c;c=this.getQuery();if(RegExp(""+l.escapeForRegex(b)).test(c))return b=c.replace(b,""),b=l.stripExtraSpaces(b),""!==
b&&(b+=" "),this.setQuery(b)};b.prototype.addStringToQuery=function(b){var c;c=this.getQuery();if(!RegExp(""+l.escapeForRegex(b)).test(c))return b=l.stripExtraSpaces(""+c+" "+b)+" ",this.setQuery(b)};b.prototype.getSuggestions=function(){return this.get("suggestions")};b.prototype.setSuggestions=function(b){return this.set("suggestions",b)};b.prototype.clearSuggestions=function(){return this.set("suggestions",[])};b.prototype.getSuggestionSearchTerm=function(){return this.get("suggestionSearchTerm")};
b.prototype.setSuggestionSearchTerm=function(b){return this.set("suggestionSearchTerm",b)};b.prototype.clearSuggestionSearchTerm=function(){return this.set("suggestionSearchTerm","")};b.prototype.getSuggestionSearchModelTypes=function(){return this.get("suggestSearchModelTypes")};b.prototype.setSuggestionSearchModelTypes=function(b){return this.set("suggestSearchModelTypes",b)};b.prototype.clearSuggestionSearchModelTypes=function(){return this.set("suggestSearchModelTypes","")};return b}(fa));var qg,
k=function(c,b){return function(){return c.apply(b,arguments)}},F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c};qg=function(c){function b(){this.render=k(this.render,this);this.initialize=k(this.initialize,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="version-tag";b.prototype.initialize=function(){$(Na).bind("change:serverVersion",
this.render);b.__super__.initialize.apply(this,arguments);return this.render()};b.prototype.render=function(){this.$el.text(Na.getVersionDisplay());return this};return b}(A);var Vc,Wc,Xc,ze,qa,k=function(c,b){return function(){return c.apply(b,arguments)}};ze={width:0,className:"small-window"};Xc={width:750,className:"medium-window"};Wc={width:900,className:"large-window"};Vc={width:1280,className:"extra-large-window"};qa=new (function(){function c(){this.ensureRun=k(this.ensureRun,this);this.calc=
k(this.calc,this)}c.prototype.calc=function(){var b,c,e,g,f,h;"undefined"!==typeof ya&&null!==ya&&ya.time("WindowSize.calc");this.ranCalc=!0;c=this.className;b=$(window).width();$("#surface").height("initial");this.fExtraLarge=this.fLarge=this.fMedium=this.fSmall=!1;b>Vc.width?(this.className=Vc.className,this.fExtraLarge=!0):b>Wc.width?(this.className=Wc.className,this.fLarge=!0):b>Xc.width?(this.className=Xc.className,this.fMedium=!0):($("#surface").height($(window).height()),this.className=ze.className,
this.fSmall=!0);b="unknown-window";g=[Vc,Wc,Xc,ze];f=0;for(h=g.length;f<h;f++)e=g[f],b=b+" "+e.className;c!==this.className&&($("body").removeClass(b).addClass(this.className),$(this).triggerHandler("windowClassChange",{newClass:this.className,oldClass:c}));return"undefined"!==typeof ya&&null!==ya?ya.timeEnd("WindowSize.calc"):void 0};c.prototype.ensureRun=function(){if(!this.ranCalc)return this.calc()};return c}());var ma,k=function(c,b){return function(){return c.apply(b,arguments)}};ma=new (function(){function c(){this.isEditing=
k(this.isEditing,this);this.cancelEdits=k(this.cancelEdits,this)}c.prototype.cancelEdits=function(b){$(".edit-controls:not(.keep)").remove();$(".editing").removeClass("editing");$(".checklist-new-item").removeClass("focus");$("input").not(b||"none").blur();$("textarea").not(b||"none").blur();b=$(".editable");if(0<b.length)return b.each(function(b){var c,g,f,h;c=$(".editable")[b];h=$(c).find(".edits-warning:first");b=$(c).find(".current:first");g=$(c).find(".field:first");c=g.data("draftKey");if((null!=
(f=b.data("unmarkeddown"))?f!==g.val():g.val()!==b.text())&&""!==g.val()&&null!=c)return ka.set(c,g.val()),h.show()})};c.prototype.isEditing=function(){return 0<$(".editing").length+$(".checklist-new-item.focus").length};c.prototype.setSurfaceHeight=function(){return $("#surface").css({"min-height":$(window).height()})};return c}());var Q,k=function(c,b){return function(){return c.apply(b,arguments)}};Q=new (function(){function c(){this.scrollWhileSorting=k(this.scrollWhileSorting,this);this.getScrollListForCardSort=
k(this.getScrollListForCardSort,this);this.getScrollListForMemberSidebarDrag=k(this.getScrollListForMemberSidebarDrag,this);this.refresh=k(this.refresh,this);this.refreshDraggable=k(this.refreshDraggable,this);this.refreshListCardSortable=k(this.refreshListCardSortable,this);this.refreshCalendarCardSortable=k(this.refreshCalendarCardSortable,this);this.refreshCardSortable=k(this.refreshCardSortable,this);this.refreshListSortable=k(this.refreshListSortable,this);this.getBoardMeasurements=k(this.getBoardMeasurements,
this);this.detachMousePos=k(this.detachMousePos,this);this.attachMousePos=k(this.attachMousePos,this);this.resetMouse=k(this.resetMouse,this);this.endSort=k(this.endSort,this);this.startSort=k(this.startSort,this)}c.prototype.startSort=function(b,c,e){c=C.getCurrentModelCache();this._lockIndex=null!=c?c.lock("DragSort.startSort"):void 0;Q.sorting=!0;Q.resetMouse();Q.getBoardMeasurements(e);Q.attachMousePos();W.hideSidebar();this.scrollSetTimeoutId=setInterval(Q.scrollWhileSorting,16);1>$(b.target).closest(".pop-over").length&&
w.hide()};c.prototype.endSort=function(){var b;b=C.getCurrentModelCache();null!=b&&b.unlock(this._lockIndex);Q.scrollList=null;Q.detachMousePos();Q.resetMouse();b=C.getCurrentBoard();b.viewState.get("archiveSidebarDropzoneVisible")&&b.viewState.setArchiveSidebarDropzone(!1);clearInterval(this.scrollSetTimeoutId);_.defer(function(){return Q.sorting=!1})};c.prototype.resetMouse=function(){this.mouseX=this.mouseY=null;return this.hasMousedLeft=this.hasMousedRight=!1};c.prototype.attachMousePos=function(){var b,
c;$(window).height();b=$(".board-canvas").width();c=C.getCurrentBoard().viewState.get("archiveSidebarDropzoneVisible");$(document).on("mousemove.dragsort",function(e){return function(g){c&&e.mouseX>b?(Q.isInSidebarArchiveDropzone=!0,$(".list-card.placeholder").addClass("hide"),$(".js-sidebar-archive-dropzone").addClass("hover-state")):(Q.isInSidebarArchiveDropzone=!1,$(".list-card.placeholder").removeClass("hide"),$(".js-sidebar-archive-dropzone").removeClass("hover-state"));null!=e.mouseX&&null!=
e.mouseY&&(g.pageX<e.mouseX-40?e.hasMousedLeft=!0:g.pageX>e.mouseX+40&&(e.hasMousedRight=!0));e.mouseX=g.pageX;return e.mouseY=g.pageY}}(this))};c.prototype.detachMousePos=function(){return $(document).off("mousemove.dragsort")};c.prototype.getBoardMeasurements=function(b){var c;this.pxBoardBorder=200;this.pxListBorder=170;this.pxMemberBoardBorder=40;this.$listArea=$("#board")[0];this.scrollFactor=0.1;c=$(".board-canvas");this.boardWidth=c.outerWidth();this.boardOffset=c.offset();this.boardHeight=
c.height();null!=b&&b.isMemberDrag?(this.leftEdge=this.boardOffset.left+this.pxMemberBoardBorder,this.rightEdge=this.boardOffset.left+this.boardWidth-this.pxMemberBoardBorder):(this.leftEdge=this.boardOffset.left+this.pxBoardBorder,this.rightEdge=this.boardOffset.left+this.boardWidth-this.pxBoardBorder);this.cardAreaWidth=$("#board").outerWidth();this.topEdge=this.boardOffset.top+this.pxListBorder;this.bottomEdge=this.boardOffset.top+this.boardHeight-this.pxListBorder};c.prototype.refreshListSortable=
function(){return Qa.enqueue("refreshListSortable",function(){if(!ba.isTouch())return $(".js-list-sortable").sortable({handle:".list-header",tolerance:"pointer",placeholder:"list placeholder",scroll:!1,delay:"75",distance:"7",items:".list:not(.add-list)",start:function(b,c){var e,g;Q.startSort(b,c);$(c.helper).appendTo("body");"function"===typeof(e=$(".js-list-sortable")).sortable&&e.sortable("refreshPositions",!0);g=$(c.helper).width();e=$(c.helper).height();$(c.placeholder).width(g).height(e);$(".list.add-list").addClass("fade");
$(".list.add-list").one("transitionend webkitTransitionEnd",function(b){return $(this).addClass("hide")})},stop:function(b,c){l.stopPropagation(b);Q.endSort();$(".list.add-list").removeClass("hide").removeClass("fade").off("transitionend webkitTransitionEnd")}})})};c.prototype.refreshCardSortable=function(){return Qa.enqueue("refreshCardSortable",function(b){return function(){var c;c=C.getCurrentBoardView();return C.showingCalendar(c)?b.refreshCalendarCardSortable():b.refreshListCardSortable()}}(this))};
c.prototype.refreshCalendarCardSortable=function(){return Qa.enqueue("refreshCalendarCardSortable",function(b){return function(){if(!ba.isTouch())return $(".js-calendar-sortable, .js-archived-cards").sortable({connectWith:".js-calendar-sortable",placeholder:"list-card placeholder-none",scroll:!1,distance:"7",delay:"75",items:".list-card:not('.placeholder-none,.hide,.js-composer')",start:function(b,c){var g,f;$(c.helper).appendTo(".calendar-drag-area");null!=(f=$(".js-calendar-sortable, .js-archived-cards"))&&
"function"===typeof f.sortable&&f.sortable("refreshPositions",!0);g=C.getCurrentBoard();_.defer(function(){null!=g&&g.viewState.get("showSidebar")&&(null!=g?g.viewState.getCurrentSidebarView():void 0)instanceof Va&&g.viewState.setArchiveSidebarDropzone(!0);return Q.startSort(b,c)})},stop:function(b,c){var g;l.stopPropagation(b);Q.endSort();g=C.getCurrentBoard();if(null!=g&&g.viewState.get("showSidebar")&&(null!=g?g.viewState.getCurrentSidebarView():void 0)instanceof Va&&Q.isInSidebarArchiveDropzone)g.viewState.setArchiveSidebarDropzone(!1),
_.defer(function(){return g.viewState.getCurrentSidebarView().renderArchivedCards()})},over:function(b,c){return $(this).parents(".calendar-day").addClass("drop")},out:function(b,c){return $(this).parents(".calendar-day").removeClass("drop")}})}}(this))};c.prototype.refreshListCardSortable=function(){return Qa.enqueue("refreshListCardSortable",function(){if(!ba.isTouch())return $(".js-sortable, .js-archived-cards").sortable({connectWith:".js-sortable",placeholder:"list-card placeholder",scroll:!1,
delay:"75",distance:"7",items:".list-card:not('.placeholder,.hide,.js-composer')",start:function(b,c){var e;Q.draggedCardList=$(b.target).closest(".js-sortable");Q.getScrollListForCardSort(c);$(c.helper).appendTo("body");null!=(e=$(".js-sortable, .js-archived-cards"))&&"function"===typeof e.sortable&&e.sortable("refreshPositions",!0);e=C.getCurrentBoard();null!=e&&e.viewState.get("showSidebar")&&(null!=e?e.viewState.getCurrentSidebarView():void 0)instanceof Va&&e.viewState.setArchiveSidebarDropzone(!0);
Q.startSort(b,c);e=$(c.helper).height()+1;$(c.placeholder).height(e)},stop:function(b,c){var e;l.stopPropagation(b);Q.endSort();e=C.getCurrentBoard();null!=e&&e.viewState.get("showSidebar")&&((null!=e?e.viewState.getCurrentSidebarView():void 0)instanceof Va&&Q.isInSidebarArchiveDropzone)&&_.defer(function(){return e.viewState.getCurrentSidebarView().renderArchivedCards()})},over:function(b,c){Q.getScrollListForCardSort(c)},custom:{refreshContainers:function(){var b,c,e,g,f,h;h=[];for(c=g=f=this.containers.length-
1;0>=f?0>=g:0<=g;c=0>=f?++g:--g)b=this.containers[c].element,e=$(b).closest(".list"),e.length&&(b=e),e=b.offset(),this.containers[c].containerCache.left=e.left,this.containers[c].containerCache.top=e.top,this.containers[c].containerCache.width=b.outerWidth(),h.push(this.containers[c].containerCache.height=b.outerHeight());return h}}})})};c.prototype.refreshDraggable=function(){return Qa.enqueue("refreshDraggable",function(){if(!ba.isTouch())return $(".js-list-draggable-board-members .member:not(.deactivated)").draggable({revert:"invalid",
revertDuration:150,appendTo:"#surface",containment:"#surface",zIndex:100,helper:"clone",delay:"75",distance:"7",start:function(b,c){n("Board View","Drag Member from Sidebar");$(".list-card.active-card").removeClass("active-card");Q.startSort(b,c,{isMemberDrag:!0});Q.getScrollListForMemberSidebarDrag(b,c);1>$(b.target).closest(".pop-over").length&&w.hide()},stop:function(b,c){l.stopPropagation(b);Q.endSort()},drag:function(b,c){_.throttle(Q.getScrollListForMemberSidebarDrag(b,c),100)},custom:{refreshContainers:function(){var b,
c,e,g,f,h;h=[];for(c=g=f=this.containers.length-1;0>=f?0>=g:0<=g;c=0>=f?++g:--g)b=this.containers[c].element,e=$(b).closest(".list"),e.length&&(b=e),e=b.offset(),this.containers[c].containerCache.left=e.left,this.containers[c].containerCache.top=e.top,this.containers[c].containerCache.width=b.outerWidth(),h.push(this.containers[c].containerCache.height=b.outerHeight());return h}}})})};c.prototype.refresh=function(){this.refreshListSortable();this.refreshCardSortable();this.refreshDraggable()};c.prototype.getScrollListForMemberSidebarDrag=
function(b,c){var e,g;e=$(".list");g=!1;e.each(function(b){return function(c){if(!g&&(c=$(e[c]),b.mouseX<c.offset().left+c.width()))return Q.scrollList=c.find(".list-cards")[0],g=!0}}(this))};c.prototype.getScrollListForCardSort=function(b){var c;Q.scrollList=null!=b?null!=(c=b.placeholder)?c.parents(".list-cards")[0]:void 0:void 0};c.prototype.throttledSortableRefreshPosition=_.throttle(function(){var b;return null!=(b=Q.draggedCardList)?"function"===typeof b.sortable?b.sortable("refreshPositions"):
void 0:void 0},100);c.prototype.throttledSortableRefresh=_.throttle(function(){return Q.refreshIfInitialized(Q.draggedCardList)},350);c.prototype.debounceArchivedCardsRefresh=_.debounce(function(){return Q.refreshIfInitialized($(".js-archived-cards"))},250);c.prototype.scrollWhileSorting=function(){var b,c;if(this.sorting){if(!Q.isInBottomArchiveDropzone&&!Q.isInSidebarArchiveDropzone&&(b=this.$listArea.scrollLeft,this.mouseX<this.leftEdge&&this.hasMousedLeft?(b-=1.8*Math.sqrt(this.leftEdge-this.mouseX),
this.$listArea.scrollLeft=b,this.throttledSortableRefreshPosition()):this.mouseX>this.rightEdge&&this.hasMousedRight&&(b+=1.8*Math.sqrt(this.mouseX-this.rightEdge),this.$listArea.scrollLeft=b,this.throttledSortableRefreshPosition()),null!=(null!=(c=this.scrollList)?c.scrollTop:void 0)))return this.mouseY<this.topEdge?(c=1.7*Math.sqrt(this.topEdge-this.mouseY),this.scrollList.scrollTop-=c):this.mouseY>this.bottomEdge&&(c=1.7*Math.sqrt(this.mouseY-this.bottomEdge),this.scrollList.scrollTop+=c),this.throttledSortableRefreshPosition()}else Q.endSort()};
c.prototype.refreshIfInitialized=function(b){if(null!=b&&b.hasClass("ui-sortable"))return b.sortable("refresh")};return c}());var w,k=function(c,b){return function(){return c.apply(b,arguments)}};w=new (function(){function c(){this.clearDisplayTypes=k(this.clearDisplayTypes,this);this.hide=k(this.hide,this);this.toggle=k(this.toggle,this);this.popView=k(this.popView,this);this.pushView=k(this.pushView,this);this.checkPosition=k(this.checkPosition,this);this.show=k(this.show,this);this.load=k(this.load,
this);this.calcPos=k(this.calcPos,this);this.viewStack=[];this.el_width=1;this.el_top=this.el_left="";this.view=null;this.args={};this.isVisible=!1;$(function(c){return function(){b=$(".pop-over").removeClass("fancy-scrollbar");e=$(".pop-over .header");d=$(".pop-over .content").addClass("fancy-scrollbar");g=b.find(".js-back-view");g.click(function(b){return c.popView()});return b.find(".js-close-popover").click(function(b){l.stop(b);return c.hide()})}}(this))}var b,d,e,g,f;f=g=d=e=b=null;c.prototype.shortcut=
function(b){switch(b){case 27:return this.popView(),["Esc - Pop Pop-over View","Pop Over"]}};c.prototype.calcPos=function(c){var f,g,k,l,n,s,v,w,y,A,C,D,F;if(this.isVisible||!(null!=c&&c.notNew)){w=$(window).width();v=$(window).height();null!=(s=this.view)&&s.maxWidth?this.view.maxWidth>w?b.width(w):b.width(this.view.maxWidth):b.width("");s=b.outerWidth();c&&!c.notNew&&(this.args=c);c=null!=(null!=(g=this.args)?g.clientx:void 0)&&null!=(null!=(k=this.args)?k.clienty:void 0);$(null!=(y=this.args)?
y.elem:void 0).is(":visible")?(this.args.elem.el&&(this.elem=this.args.elem.el),this.el_width=$(this.args.elem).outerWidth(),this.el_left=$(this.args.elem).offset().left,this.el_top=$(this.args.elem).offset().top+(_.isNumber(this.args.top)?this.args.top:28)):c&&(this.el_left=this.args.clientx,this.el_top=this.args.clienty);f=null!=(A=this.view)&&A.hideHeader&&(qa.fMedium||qa.fLarge||qa.fExtraLarge)?v-68:qa.fMedium||qa.fLarge||qa.fExtraLarge?v-e.outerHeight()-68:"";if(!(null!=(C=this.args)&&C.clientx)||
!(null!=(D=this.args)&&D.clienty))if(!_.include(["block","inline-block","inline"],$(null!=(F=this.args)?F.elem:void 0).css("display")))return;n=0<this.el_top?this.el_top:5;k=b.outerHeight();g=n+k;if(qa.fLarge||qa.fExtraLarge)v+=$(window).scrollTop(),g>v&&(n=v-k-8),k>v-44&&(n=44);l=0<this.el_left?this.el_left:5;l+s+16>w&&(l=w-(s+5));this.isVisible||b.css({left:-1E4,top:-1E4}).show();_.defer(function(c){return function(){b.css({left:l,top:n});return d.css({maxHeight:f})}}(this))}};c.prototype.load=
function(c,f,g){var k;_.isFunction(c)?(null==f&&(f={}),null==f.modelCache&&(f.modelCache=C.getCurrentModelCache()),this.view=new c(f)):(this.view=c,g=f);this.clearDisplayTypes();b.addClass(this.view.displayType);"function"===typeof(k=this.view).getData&&k.getData();e.find(".header-title").text(this.view.getViewTitle());g?d.empty().append(this.view.el):d.empty().append(this.view.render().el);this.view.delegateEvents();g||"undefined"!==typeof X&&null!==X&&X.addHandler(this.view,{scope:"popover_view",
modal:!0});return this.view};c.prototype.show=function(c){c.keepEdits||ma.cancelEdits(c.elActive);c.preloaded||(this.hide(),c.view=this.load(c.view,c.options));this.viewStack.push(c.view);this.calcPos(c);_.defer(function(c){return function(){if(0<b.find(".js-autofocus").length&&(!ba.isTouch()||!b.find(".js-autofocus:first").hasClass("js-no-touch-autofocus")))return b.find(".js-autofocus:first").focus().select()}}(this));this.isVisible=!0;"function"===typeof c.shown&&c.shown(b);f=c.hidden;null!=c&&
c.autoPosition?this.positionInterval=setInterval(this.checkPosition,250):clearInterval(this.checkPosition);"undefined"!==typeof X&&null!==X&&X.addHandler(this,{scope:"popover",modal:!0})};c.prototype.checkPosition=function(){var c,d,e,f;if(this.isVisible){if(d=b.offset().top,f=$(window).scrollTop(),d!==f)if(e=$(window).height(),c=b.outerHeight(),d<f&&c<=e)b.css({top:f});else if(d+c>f+e&&(c=f+Math.max(0,e-c),c!==d))return b.css({top:c})}else this.clearInterval(this.positionInterval)};c.prototype.pushView=
function(c){var d;d=_.last(this.viewStack);null!=d&&"function"===typeof d.willBePushedDown&&d.willBePushedDown();c.view=this.load(c.view,c.options);this.viewStack.push(c.view);g.show();if(0<b.find(".js-autofocus").length){if(ba.isTouch()&&b.find(".js-autofocus:first").hasClass("js-no-touch-autofocus"))return;_.delay(function(c){return function(){return b.find(".js-autofocus:first").focus().select()}}(this),10)}return this.calcPos()};c.prototype.popView=function(){var c;c=_.last(this.viewStack);null!=
c&&("function"===typeof c.willBePopped&&c.willBePopped(),X.removeHandler(c),c.remove());this.viewStack.pop();if(c=_.last(this.viewStack)){this.load(c,!0);1===this.viewStack.length&&g.hide();if(0<b.find(".js-autofocus").length){if(ba.isTouch()&&b.find(".js-autofocus:first").hasClass("js-no-touch-autofocus"))return;_.delay(function(c){return function(){return b.find(".js-autofocus:first").focus().select()}}(this),10)}return this.calcPos()}w.hide()};c.prototype.toggle=function(b){var c,d;return(this.args&&
(null!=(c=this.args.elem)?c[0]:void 0))===(null!=(d=b.elem)?d[0]:void 0)?this.hide():this.show(b)};c.prototype.hide=function(){var c,e,k,l;clearInterval(this.positionInterval);b.hide();l=this.viewStack.reverse();e=0;for(k=l.length;e<k;e++)c=l[e],"function"===typeof c.willBePopped&&c.willBePopped(),c.remove();d.empty();g.hide();this.clearDisplayTypes();"undefined"!==typeof X&&null!==X&&X.removeHandlerScope("popover_view");"undefined"!==typeof X&&null!==X&&X.removeHandler(this);this.viewStack=[];this.args=
this.view=null;this.isVisible=!1;"function"===typeof f&&f(b);return f=null};c.prototype.clearDisplayTypes=function(){return b.removeClass("miniprofile avdetail woof search-over")};return c}());var Y,k=function(c,b){return function(){return c.apply(b,arguments)}};Y=new (function(){function c(){this.init=k(this.init,this)}var b,d,e;e=d=b=null;c.prototype.shortcut=function(b){switch(b){case 27:return this.hide(),["Esc - Hide Dialog","Dialog"]}};c.prototype.init=function(){b=$(".window");d=b.find(".window-wrapper");
this.scrolltop=0;this.isVisible=!1};c.prototype.calcPos=function(c){var e,h,k;Y.isVisible||(b.css({left:-2E4,top:-2E4}),e=48,qa.fSmall&&(e=8));h=$(window).width();""!==c?0>h-c?b.css({width:h-24}):b.css({width:c-24}):b.css({width:""});d.width("1");qa.fSmall?(d.width(h-16),$("#surface").height($(window).height()),c=8):(d.width(""),c=(h-b.width())/2);Y.isVisible?b.css({left:c}):b.css({left:c,top:e}).show();null!=(null!=(k=this.view)?k.forceUpdateSidebarPos:void 0)&&Y.isVisible&&this.view.forceUpdateSidebarPos()};
c.prototype.show=function(c){var f;this.isVisible&&this.hide(c.isNavigating);ma.cancelEdits();w.hide();this.clear();e=c.hide;this.scrolltop=$(window).scrollTop();$("body").addClass("window-up");null!=(f=C.getCurrentBoard())&&f.composer.save("vis",!1);null!=c.displayType&&b.addClass(c.displayType);d.empty().append(v.fill("dialog_close_button"));c.view?(this.view=c.view,d.append(this.view.render().el),this.view.delegateEvents(),"undefined"!==typeof X&&null!==X&&X.addHandler(this.view,{scope:"dialog_view",
modal:!0})):c.html&&(this.view=null,d.append(c.html));null!=c.maxWidth?this.calcPos(c.maxWidth):this.calcPos("");this.isVisible=!0;_.defer(function(b){return function(){$(".window").css({height:1E5});$(".window-overlay").scrollTop(1);$(".window-overlay").scrollTop(0);return $(".window").css({height:""})}}(this));b.find(".js-autofocus:first,.focus-dummy").focus().select();b.find(".js-submit-okay").click(function(){var d,e,f,k,l;e=b.find("form:first");l=e.find(".non-empty");f=0;for(k=l.length;f<k;f++)if(d=
l[f],/^\s*$/.test($(d).val()))return;Y.hide();"function"===typeof c.okay&&c.okay({form:e})});b.find(".js-submit-cancel").click(function(){Y.hide();"function"===typeof c.cancel&&c.cancel()});b.find("input[type=submit]").click(function(b){l.preventDefault(b)});b.find(".js-close-window").click(function(b){l.stop(b);Y.hide(null,!0)});"undefined"!==typeof X&&null!==X&&X.addHandler(this,{scope:"dialog",modal:!0})};c.prototype.hide=function(c,d){if(this.isVisible&&!ma.isEditing()&&!$(".new-comment").hasClass("focus")||
d)"function"===typeof e&&e(c),e=null,null!=this.view&&("undefined"!==typeof X&&null!==X&&X.removeHandler(this.view),this.view.remove(),this.view=null),"undefined"!==typeof X&&null!==X&&X.removeHandler(this),b.hide(),$("body").removeClass("window-up"),_.defer(function(b){return function(){$(window).scrollTop(b.scrolltop);return b.scrolltop=0}}(this)),this.isVisible=!1,this.removeSpecialClasses(),$(".window-overlay").off("scroll.fixSidebar"),w.hide()};c.prototype.clear=function(){this.removeSpecialClasses();
d.width("");d.empty()};c.prototype.removeSpecialClasses=function(){b.removeClass("slim single-column power-ups wide-content")};return c}());$(Y.init);var Qa,G=[].slice;Qa=new (function(){function c(){this.holding=!1;this.fxs={};this._unnamed=0}c.prototype.hold=function(){return this.holding=!0};c.prototype.enqueue=function(){var b,c;c=2<=arguments.length?G.call(arguments,0,b=arguments.length-1):(b=0,[]);b=arguments[b++];c=c[0];null==c&&(c="unnamed_"+this._unnamed++);this.holding?this.fxs[c]=b:b()};
c.prototype.release=function(){var b;this.holding=!1;b=this.fxs;this.fxs={};_.defer(function(){var c,e;for(e in b)c=b[e],c()})};return c}());var vi,k=function(c,b){return function(){return c.apply(b,arguments)}},F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c},D=[].indexOf||function(c){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===c)return b;return-1},
G=[].slice;vi=function(c){function b(){this.syncError=k(this.syncError,this);this.stopUpgrade=k(this.stopUpgrade,this);this.upgradeNow=k(this.upgradeNow,this);this.upgradeClient=k(this.upgradeClient,this);this.advertiseUpgrade=k(this.advertiseUpgrade,this);this.defaultView=k(this.defaultView,this);this.getMemberBillingCardProductUrl=k(this.getMemberBillingCardProductUrl,this);this.getMemberBillingCardUrl=k(this.getMemberBillingCardUrl,this);this.getMemberBillingUrl=k(this.getMemberBillingUrl,this);
this._memUrl=k(this._memUrl,this);this.getOrganizationMembersUrl=k(this.getOrganizationMembersUrl,this);this.getOrganizationExportUrl=k(this.getOrganizationExportUrl,this);this.getOrganizationPlansUrl=k(this.getOrganizationPlansUrl,this);this.getOrganizationBillingCardProductUrl=k(this.getOrganizationBillingCardProductUrl,this);this.getOrganizationBillingCardUrl=k(this.getOrganizationBillingCardUrl,this);this.getOrganizationBillingUrl=k(this.getOrganizationBillingUrl,this);this.getOrganizationAccountUrl=
k(this.getOrganizationAccountUrl,this);this.getOrganizationMemberCardsUrl=k(this.getOrganizationMemberCardsUrl,this);this._orgUrl=k(this._orgUrl,this);return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.initialize=function(){this._savedTitle="";M["for"]("header").loadHeaderData(function(b){return function(b,c){var d,h,k,l;if(null!=c)for(h in k=ModelCacheCache._caches,k)d=k[h],(l=d.getCacheType(),0<=D.call(nb.fullCacheTypes,l))&&d.enqueueDelta("Member",c);return M.triggerWaits("headerData")}}(this));
return _.delay(function(){return M["for"]("header").loadBoardsMenuData(function(b){return function(b,c){var d,h,k,l;if(null!=c)for(h in k=ModelCacheCache._caches,k)d=k[h],(l=d.getCacheType(),0<=D.call(nb.fullCacheTypes,l))&&d.enqueueDelta("Member",c);return M.triggerWaits("boardsData")}}(this))},500)};b.prototype.routes={"":"defaultView",landing:"landingView",tour:"tourView","business-class":"businessClassView",enterprise:"enterpriseView",gold:"goldView","search(?*query)":"searchView","select-org-to-upgrade":"businessClassSelectOrgView",
platforms:"platformsView",platform:"platformsView",browser:"platformsView",browsers:"platformsView",devices:"platformsView",apps:"platformsView",mobile:"platformsView",supported:"platformsView",ios:"platformsView",iphone:"platformsView",ipad:"platformsView",android:"platformsView","api/generateToken":"generateTokenView","board/*path":"oldBoardView","b/:shortLink(/*path)":"boardView",shortcuts:"shortcutsView",blank:"blankView",recommend:"recoView","org/:id":"organizationById","card/board/(:slug/):idBoard/:idCard":"oldCardView",
"card/(:slug/):idBoard/:idCard":"oldCardView","c/:id(/*path)":"cardView",":username/boards":"memberBoardsView",":username/notifications":"memberNotificationsView",":username/recommend":"landingView",":username/cards":"memberCardsView",":name/account":"userOrOrgAccountView",":name/billing":"userOrOrgBillingView",":name/billing/card":"userOrOrgBillingCardView",":name/billing/card/:product":"userOrOrgBillingCardView",":name/members":"organizationMembersView",":name/:username/cards":"organizationMemberCardsView",
":name/export":"organizationExportView",":name/plans":"organizationPlansView",":name(/)":"userOrOrgProfileView","*splat":"displayErrorPage"};b.prototype.viewType="none";b.prototype.topLevelView=function(b,c,g){null==this.applicationView&&(this.applicationView=new bi);null==g&&(g={});null==g.modelCache&&(g.modelCache=this.getCurrentModelCache());return this.applicationView.subview(b,c,g)};b.prototype.title=function(b){var c,g;null!=b&&(this._savedTitle=b);b=(c=wb.unreadCount(ModelCacheCache["for"]("header")))?
"("+c+") ":"";if(0<(null!=(g=this._savedTitle)?g.length:void 0))b+=""+this._savedTitle+" | ";b+="Trello";if(null!=(g=window.fluid))g.dockBadge=c?c:null;Ub.setNotifications(0<c);return document.title=b};b.prototype.setLocation=function(b){var c,g;g=b.title;c=b.location;b=b.options;null!=g&&this.title(g);c&&(/^#/.test(c)&&(c=c.substr(1)),this.navigate(c,b),this.location=c)};b.prototype.load=function(b){return this.setLocation({location:b})};b.prototype.getPermanentOrganizationUrl=function(b){return"/org/"+
b};b.prototype.getOrganizationUrl=function(b){return"/"+(_.isString(b)?b:b.get("name"))};b.prototype._orgUrl=function(b,c){return""+this.getOrganizationUrl(b)+c};b.prototype.getOrganizationMemberCardsUrl=function(b,c){return this._orgUrl(b,"/"+c+"/cards")};b.prototype.getOrganizationAccountUrl=function(b){return this._orgUrl(b,"/account")};b.prototype.getOrganizationBillingUrl=function(b){return this._orgUrl(b,"/billing")};b.prototype.getOrganizationBillingCardUrl=function(b){return this._orgUrl(b,
"/billing/card")};b.prototype.getOrganizationBillingCardProductUrl=function(b,c){return null!=c?this._orgUrl(b,"/billing/card/"+c):this.getOrganizationBillingCardUrl(b)};b.prototype.getOrganizationPlansUrl=function(b){return this._orgUrl(b,"/plans")};b.prototype.getOrganizationExportUrl=function(b){return this._orgUrl(b,"/export")};b.prototype.getOrganizationMembersUrl=function(b){return this._orgUrl(b,"/members")};b.prototype.showingCalendar=function(b){return 0<(null!=b?b.$(".calendar-wrapper").length:
void 0)};b.prototype.getBoardUrl=function(b,c,g,f){var h;null==f&&(f=[]);if(null!=(null!=c?c.id:void 0))c=c.id;b=b.get("Board",c);c=null!=(h=null!=b?b.get("url"):void 0)?l.relativeUrl(h):(b=null!=b?b.get("name"):void 0)?"/board/"+l.makeSlug(b)+"/"+c:"/board/"+c;g&&(c+="/"+g);b=0;for(h=f.length;b<h;b++)g=f[b],c+="/"+g;return c};b.prototype.getBoardShortUrl=function(b,c,g){if(null!=(null!=c?c.id:void 0))c=c.id;b=ia.get(b,c);null!=(null!=b?b.get("shortUrl"):void 0)?b=l.relativeUrl(shortUrl):(b=null!=
b?b.get("shortLink"):void 0,b="/b/"+b);g&&(b+="/"+g);return b};b.prototype.getMemberBoardProfileUrl=function(b,c){return""+this.getBoardUrl(this.getCurrentModelCache(),c)+"/member/"+b};b.prototype.setBoardLocation=function(b,c,g,f){var h;null==c&&(c="");null==g&&(g=[]);h=ia.get("board_"+b,b).get("name");this.setLocation({title:h,location:this.getBoardUrl(this.getCurrentModelCache(),b,c,g),options:f})};b.prototype._memUrl=function(b,c){return""+this.getMemberUrl(b)+c};b.prototype.getMemberProfileUrl=
function(b){null==b&&(b=y.myUsername());return"/"+b};b.prototype.getMemberNotificationsUrl=function(b){null==b&&(b=y.myUsername());return"/"+b+"/notifications"};b.prototype.getMemberBoardsUrl=function(b){null==b&&(b=y.myUsername());return b===y.myUsername()?"/":"/"+b+"/boards"};b.prototype.getMemberCardsUrl=function(b){null==b&&(b=y.myUsername());return"/"+b+"/cards"};b.prototype.getMemberAccountUrl=function(b){null==b&&(b=y.myUsername());return"/"+b+"/account"};b.prototype.getMemberBillingUrl=function(b){null==
b&&(b=y.myUsername());return"/"+b+"/billing"};b.prototype.getMemberBillingCardUrl=function(b){null==b&&(b=y.myUsername());return"/"+b+"/billing/card"};b.prototype.getMemberBillingCardProductUrl=function(b,c){null==b&&(b=y.myUsername());return null!=c?"/"+b+"/billing/card/"+c:this.getMemberBillingCardUrl(b)};b.prototype.getPermanentCardUrl=function(b,c,g){return g?"/card/"+g.get("username")+"/"+b+"/"+c:"/card/board/"+b+"/"+c};b.prototype.getCardUrl=function(b){var c,g;if(null!=(c=b.get("url")))return l.relativeUrl(c);
c=b.get("name");return this.getCardUrlWithoutModels(b.get("idBoard"),null!=(g=b.get("idShort"))?g:b.id,c)};b.prototype.getCardUrlWithoutModels=function(b,c,g){return null==c?null:l.isShortId(c)?"/card/"+l.makeSlug(g)+"/"+b+"/"+c:"/card/board/"+l.makeSlug(g)+"/"+b+"/"+c};b.prototype.saveMemberBoardProfileLocation=function(b,c){var g;g=b.get("fullName");return this.setLocation({title:""+g,location:this.getMemberBoardProfileUrl(b.get("username"),c)})};b.prototype.onMemberView=function(){return"member"===
this.viewType};b.prototype.onAnyOrganizationView=function(){return"organization"===this.viewType};b.prototype.onOrganizationView=function(b){return this.onAnyOrganizationView()&&this.idModel===b};b.prototype.onAnyBoardView=function(){return"board"===this.viewType};b.prototype.onBoardView=function(b){var c;if(this.onAnyBoardView()){if(l.checkId(b))return this.idModel===b;if(l.isShortLink(b))return(null!=(c=ia.get(this.getCurrentModelCache(),this.idModel))?c.get("shortLink"):void 0)===b}return!1};b.prototype.onBrowseView=
function(){return"browse"===this.viewType};b.prototype.onErrorView=function(){return"error"===this.viewType};b.prototype.defaultView=function(){return y.isLoggedIn()?this.memberBoardsView():this.landingView()};b.prototype.getCurrentBoardView=function(){var b;return null!=(b=this.applicationView)?b.existingSubviewOrUndefined(Wb,this.getCurrentBoard()):void 0};b.prototype.getCurrentBoard=function(){return!this.onAnyBoardView()?null:ia.get(this.getCurrentModelCache(),this.idModel)};b.prototype.getModelCache=
function(b,c,g){switch(b){case "board":return ModelCacheCache["for"]("board_"+g);case "member":return ModelCacheCache["for"]("member_"+g);case "organization":return ModelCacheCache["for"]("organization_"+g);case "none":break;default:return ModelCacheCache["for"]("other_"+b+"_"+c+"_"+g)}};b.prototype.getCurrentModelCache=function(){return this.getModelCache(this.viewType,this.subViewType,this.idModel)};b.prototype.cleanModelCacheCache=function(){var b,c,g,f,h,k,l,n,s;f=this.getCurrentModelCache();
k={organization:0,board:5};g={organization:[],board:[]};s=ModelCacheCache._caches;for(h in s)if(b=s[h],h!==f.name)switch(n=b.getCacheType(),n){case "organization":case "board":g[n].push(b);break;case "header":null;break;default:ModelCacheCache.dropCache(b)}b=[];for(n in g)c=g[n],l=k[n],c.length<=l||(_.sortBy(c,"lastUsed"),b.push(function(){var b;for(b=[];c.length>l;)b.push(ModelCacheCache.dropCache(c.shift()));return b}()));return b};b.prototype.saveBoardsView=function(){if(!this.overBoardsPage)return this.overBoardsPage=
!0,this._idBoard=this.idModel,this._boardPath=/\/b\/[^\/]*\/(.*)/.exec(this.location)[1]};b.prototype.loadBoardsView=function(){this.overBoardsPage=!1;this.setViewType("board",null,this._idBoard);this.boardView(this._idBoard,this._boardPath);delete this._idBoard;return delete this._boardPath};b.prototype.clearPreviousView=function(){var b;this.overBoardsPage&&(this.overBoardsPage=!1);ra.setQuery("");null!=(b=this.applicationView)&&b.removeQueued();delete this.applicationView;w.hide();Y.isVisible&&
Y.hide(!0);$("#content").html("");$("#surface").height("");$("body").scrollTop("0").removeClass("landing-body tour-body trelloGold-body businessClass-body promo-page onem-page onem-single-page single-column tabbed-page search-page body-board-view body-custom-board-background body-custom-board-background-tiled body-light-board-background body-dark-board-background").css({"background-image":"","background-color":""});$("#edit-sticker").hide();$(".attachment-viewer").remove();Da.clearProcessingAttachments();
if(!this.onAnyBoardView())return Ub.setBackground({color:Sa.blue.color})};b.prototype.setViewType=function(b,c,g){Cb.markCurrentBoardAsViewed();this.viewType=b;this.viewSubType=c;this.idModel=g;Cb.markCurrentBoardAsViewed();return this.cleanModelCacheCache()};b.prototype.boardView=function(b,c,g){var f,h,k;null==c&&(c="");f=c.split("/");h=f[1];k=f[2];c=f[3];f=f[4];b={idBoard:b,section:h};"calendar"===h&&(null!=k&&null!=c)&&(_.extend(b,{year:k,month:c}),null!=f&&_.extend(b,{day:f}));"member"===h&&
null!=k&&(b.usernameBoardProfile=k);return this.displayBoard(b,g)};b.prototype.oldBoardView=function(b,c){var g,f;f={};g=b.split("/");f.idBoard=1===g.length?g[0]:g[1];3===g.length?f.section=g[2]:4===g.length&&(f.usernameBoardProfile=g[3]);this.displayBoard(f,c)};b.prototype.showCardDetail=function(b,c,g){var f,h,k;if(null!=b)if(!this.onBoardView(null!=(h=b.getBoard())?h.id:void 0)||b.modelCache!==this.getCurrentModelCache())this.navigate(this.getCardUrl(b),{trigger:!0});else if(b.markRelatedNotificationsRead(),
ModelCacheCache["for"]("header").off("add:Notification",b.markRelatedNotificationsRead,b),ModelCacheCache["for"]("header").on("add:Notification",b.markRelatedNotificationsRead,b),n("Card Front","Open Card Detail"),h=new wg({modelCache:this.getCurrentModelCache(),model:b}),f=b.getBoard(),k=this.showingCalendar(b.getBoard()&&this.applicationView.existingSubviewOrUndefined(Wb,b.getBoard())),Y.show({view:h,hide:function(c){return function(e){ModelCacheCache["for"]("header").off("add:Notification",b.markRelatedNotificationsRead);
b.unbindMarkRead();$(".attachment-viewer").remove();if(!e)return c.setBoardLocation(f.id,k?"calendar":void 0),c.title(f.get("name"))}}(this),isNavigating:g}),b.onId(function(c){return function(){c.title(""+b.get("name")+" on "+b.getBoard().get("name"));return c.navigate(c.getCardUrl(b))}}(this)),null!=c)h[c]()};b.prototype.displayBoard=function(b,c){var g,f,h,k,q,n,s,v,w;P("controller",["boardView",b.idBoard]);v=function(b){return function(c){return null!=c&&c.match("Confirm to view")&&y.isLoggedIn()?
aa.waitFor("header",y.myId(),function(){return b.displayErrorPage(_.extend({errorType:"unconfirmedNotFound",modelType:"board"},y.me().toJSON()))}):null!=c&&c.match("no card")?b.displayErrorPage({errorType:"cardNotFound"}):b.displayErrorPage({errorType:"boardNotFound"})}}(this);q=b.idBoard||(null!=(h=b.board)?h.id:void 0);if((n=b.idCard)&&null==q){if(!l.checkId(n)&&!l.isShortLink(n))return v("no card");q=IdCache.getBoardIdForCard(n)}if(null==q&&null==n)return v("no board id");k=this.spinnerUntil(c);
w=function(c){return function(e,f){var h,l,n,u,s,x;if(g)Y.isVisible&&Y.hide(!0);else{c.setViewType("board",null,e.id);c.clearPreviousView();c.showHeader();x=[e,ia.get("header",e.id)];n=0;for(s=x.length;n<s;n++)h=x[n],null!=h&&h.set("dateLastView",(new Date).toISOString());$("#content").html(c.topLevelView(Wb,e,{modelCache:ModelCacheCache["for"]("board_"+e.id)}).render().el);$("body").addClass("body-board-view")}W.pushBoard(e.id);h=c.topLevelView(Wb,e,{modelCache:ModelCacheCache["for"]("board_"+e.id)});
b.idCard?(u=function(b){return b?c.showCardDetail(b):c.setBoardLocation(e.id)},(l=e.getCard(b.idCard))?u(l):M["for"](c.getCurrentModelCache()).loadCardData(b.idBoard,b.idCard,function(f){if(null!=f)O.show("Card does not exist on this board","warning","doesnotexist",5E3),c.setBoardLocation(e.id);else return u(e.getCard(b.idCard))})):b.usernameBoardProfile?null!=(l=aa.find(c.getCurrentModelCache(),"username",b.usernameBoardProfile)[0])&&l.viewBoardProfile(e.id):"calendar"===b.section?(n=[b.year,b.month],
b.day&&n.push(b.day),0<=D.call(e.get("powerUps"),"calendar")&&!c.showingCalendar(h)&&(b.day||(b.day=15),l=I.objToDate(b),I.validDate(l)?h.showCalendar(l):h.showCalendar()),c.setBoardLocation(e.id,"calendar",n)):(c.showingCalendar(h)&&h.closeCalendar(),e.onId(function(){c.setBoardLocation(e.id)}));"function"===typeof k&&k(window.boardView);f||_.defer(function(){M.loadBoardActions(q,M.cacheCallback(function(b){return"board_"+b.id},"Board"));return M.loadBoardChecklists(q,M.cacheCallback(function(b){return"board_"+
b.id},"Board"))})}}(this);if(b.board)w(b.board);else if(null!=q){if(!l.checkId(q)&&!l.isShortLink(q))return v("no board");s=IdCache.getBoardId(q);if(l.checkId(s)&&ModelCacheCache.hasCache("board_"+s)&&(h=ModelCacheCache["for"]("board_"+s),f=h.get("Board",s),g=this.onBoardView(s),null!=f)){w(f,!0);return}ya.time("Load Board Data: "+q);M.loadCurrentBoardData(q,function(b){return function(b,c){ya.timeEnd("Load Board Data: "+q);return null!=b?v(b):ModelCacheCache["for"]("board_"+c.id).enqueueDelta("Board",
c,function(){f=ia.get("board_"+c.id,q);if(!f)return v("no board");ya.time("Render Board: "+c.name);Qa.hold();w(f);Qa.release();ya.timeEnd("Render Board: "+c.name,{reportToServer:!0,serverName:"renderBoard",data:{idBoard:f.id}})})}}(this))}else null!=n?(ya.time("Load Card Data: "+n),M.loadCardData(n,function(b){return function(b,c){ya.timeEnd("Load Card Data: "+n);if(null!=b||null==c)return v("no card");q=c.idBoard;ya.time("Load Board Data: "+q);return M["for"]("board_"+q).loadCurrentBoardData(q,function(b,
c){ya.timeEnd("Load Board Data: "+q);if(null!=b)return v(b);f=ia.get("board_"+c.id,q);if(!f)return v("no board");ya.time("RenderBoard w/ Card: "+c.name);w(f);ya.timeEnd("RenderBoard w/ Card: "+c.name,{reportToServer:!0,serverName:"renderBoardCard",data:{idCard:n,idBoard:f.id}})})}}(this))):v("no board or id")};b.prototype.landingView=function(){var b,c;c=y.isLoggedIn()?"/landing":"/";b=0.5<Math.random()?v["promo/landing_boards"]:v["promo/landing_video"];return this.staticView({title:"Organize anything, together.",
location:c,template:"promo/landing_base",templateData:{typekit:!0},templatePartials:{promo_footer:v.promo_footer,landing_content:b},headerOpts:{promo:!0},bodyClass:"landing-body promo-page"},function(){Hi();return wi()})};b.prototype.tourView=function(){return this.staticView({title:"Tour",location:"/tour",template:"promo/tour",templateData:{typekit:!0},templatePartials:{promo_footer:v.promo_footer},headerOpts:{promo:!0},bodyClass:"tour-body promo-page"})};b.prototype.businessClassSelectOrgView=function(){var b;
if(y.isLoggedIn())return b=this.spinnerUntil(function(){}),M.loadMyOrganizations(function(c){return function(g,f){var h,k;c.setViewType("select-org");c.getCurrentModelCache().enqueueDelta("Member",f);h=!g&&null!=f?aa.get(c.getCurrentModelCache(),null!=(k=f.id)?k:f.idMember):null;k=_.filter(h.organizationList.models,function(b){return!b.isPremium()});if(1===k.length)c.navigate("/"+k[0].get("name")+"/plans",{trigger:!0});else return c.setLocation({title:"Select Organization To Upgrade To Business Class",
location:"/select-org-to-upgrade"}),c.clearPreviousView(),h=c.topLevelView(yh,h),c.showHeader(),$("#content").html(h.render().el),b()}}(this));window.location="/login?returnUrl=/select-org-to-upgrade"};b.prototype.businessClassView=function(){return this.staticView({title:"Business Class",location:"/business-class",template:"promo_business_class_new",templateData:{typekit:!0},templatePartials:{promo_footer:v.promo_footer},headerOpts:{promo:!0},bodyClass:"businessClass-body promo-page"})};b.prototype.enterpriseView=
function(){return this.staticView({title:"Enterprise",location:"/enterprise",template:"promo_enterprise",templateData:{typekit:!0},templatePartials:{promo_footer:v.promo_footer},headerOpts:{promo:!0},bodyClass:"enterprise-body promo-page"})};b.prototype.goldView=function(){this.setViewType("gold");M["for"](this.getCurrentModelCache()).loadMemberAccountData(y.myId(),function(b){return function(){var c,g,f;g=y.me();b.clearPreviousView();b.showHeader({promo:!0});f={promo_gold_content:v.promo_gold_content,
card:v.card_in_list,promo_footer:v.promo_footer};c=g.get("credits");c=_.filter(c,function(b){var c;return!b.applied&&0<b.count&&("invitation"===(c=b.type)||"promoCode"===c)});c=_.reduce(c,function(b,c){return b+c.count},0);g={typekit:!0,confirmed:null!=g?g.get("confirmed"):void 0,hasCrown:null!=g?g.isFeatureEnabled("crown"):void 0,username:null!=g?g.get("username"):void 0,loggedIn:y.isLoggedIn(),hasCredits:c};(function(c){$("body").addClass("trelloGold-body promo-page");$("#content").html(c);return b.setLocation({title:"Trello Gold",
location:"/gold"})})(v.fill("promo_fan_club",g,null,f));return ve()}}(this))};b.prototype.platformsView=function(){this.staticView({title:"Apps and Platforms",location:"/platforms",template:"platforms",templateData:{},templatePartials:{promo_footer:v.promo_footer},headerOpts:{promo:!0},bodyClass:"promo-page"})};b.prototype.searchView=function(b){var c;P("controller",["searchView"]);c=this.spinnerUntil(b);M.waitFor("headerData",function(b){return function(){var d,h,k,q;b.setViewType("search");b.clearPreviousView();
k=y.me();d=ModelCacheCache["for"]("header");q=l.getQueryParameter("q","");h=b.topLevelView(Kd,k,{modelCache:d});d=h.getResultsView();ra.setQuery(q);d.update();b.showHeader({noSearch:!0});$("body").addClass("search-page");$("#content").append(h.render().el).append(d.render().el);_.defer(function(){return h.focusInput()});return"function"===typeof c?c(d):void 0}}(this))};b.prototype.recoView=function(){var b;y.isLoggedIn()?(b=this.spinnerUntil(b),(this.onAnyBoardView()||this.overBoardsPage)&&this.saveBoardsView(),
M.loadMemberRecommendData("me",function(c){return function(g,f){var h,k;c.setViewType("recommend");c.getCurrentModelCache().enqueueDelta("Member",f);h=!g&&null!=f?aa.get(c.getCurrentModelCache(),null!=(k=f.id)?k:f.idMember):null;c.setLocation({title:"Recommend Trello!",location:"/recommend"});c.onAnyBoardView()||c.overBoardsPage?(k=new ye({model:h,modelCache:c.getCurrentModelCache()}),Y.show({view:k,isNavigating:!0,hide:function(b){if(!b)return c.loadBoardsView()}})):(c.clearPreviousView(),k=c.topLevelView(ye,
h),c.showHeader(),$("#content").html(k.render().el));"function"===typeof b&&b(h)}}(this))):window.location="/login?returnUrl=/recommend"};b.prototype.organizationById=function(b,c){M.loadOrgNameById(b,function(g){return function(f,h){return null!=f||null==h?g.displayErrorPage():g.organizationBoardsView(h,b,c)}}(this))};b.prototype.organizationBoardsView=function(b,c,g){this.displayOrganizationPage({orgname:b,loadFn:"loadOrganizationBoardsData",additionalFns:{members:"loadOrganizationMemberGhost"},
viewClass:Hh,getLocation:this.getOrganizationUrl,idOrganization:c,callback:g})};b.prototype.organizationMembersView=function(b,c){this.displayOrganizationPage({orgname:b,loadFn:"loadOrganizationMembersData",viewClass:Oh,getLocation:this.getOrganizationMembersUrl,callback:c})};b.prototype.organizationMemberCardsView=function(b,c,g){this.displayOrganizationPage({orgname:b,username:c,loadFn:"loadOrganizationMinimal",additionalFns:{cards:"loadOrgMemberCardData",members:"loadOrganizationMemberMinimal"},
viewClass:Mh,getLocation:this.getOrganizationMemberCardsUrl,callback:g})};b.prototype.organizationAccountView=function(b,c,g){this.displayOrganizationPage({orgname:b,loadFn:"loadOrganizationData",viewClass:Dh,getLocation:this.getOrganizationAccountUrl,idOrganization:c,callback:g,adminOnly:!0})};b.prototype.organizationExportView=function(b,c){this.orgView(b,function(b){return function(c,d,e){return b.displayOrganizationPage({orgname:c,loadFn:"loadOrganizationExportData",viewClass:Jh,getLocation:b.getOrganizationExportUrl,
idOrganization:d,callback:e,adminOnly:!0})}}(this),c)};b.prototype.organizationPlansView=function(b,c){this.orgView(b,function(b){return function(c,d,e){return b.displayOrganizationPage({orgname:c,loadFn:"loadOrganizationData",viewClass:Ph,getLocation:b.getOrganizationPlansUrl,idOrganization:d,callback:e,membersOnly:!0})}}(this),c)};b.prototype.organizationBillingView=function(b,c){this.orgView(b,function(b){return function(c,d,e){return b.displayOrganizationPage({orgname:c,loadFn:"loadOrganizationData",
viewClass:oe,getLocation:b.getOrganizationBillingUrl,idOrganization:d,callback:e,adminOnly:!0})}}(this),c)};b.prototype.organizationBillingCardView=function(b,c,g){this.orgView(b,function(b){return function(d,g,k){return b.displayOrganizationPage({orgname:d,product:c,loadFn:"loadOrganizationData",viewClass:Fh,getLocation:b.getOrganizationBillingCardProductUrl,idOrganization:g,callback:k,adminOnly:!0})}}(this),g)};b.prototype.orgView=function(b,c,g){return this.getViewData(b,function(f){return function(h,
k){return null!=k&&k.id&&"organization"===(null!=k?k.type:void 0)?c(b,k.id,g):f.displayErrorPage({callback:g})}}(this))};b.prototype.userOrOrgProfileView=function(b,c){null==b&&(b="me");this.userOrOrgView(b,this.memberProfileView,this.organizationBoardsView,c)};b.prototype.userOrOrgAccountView=function(b,c){null==b&&(b="me");this.userOrOrgView(b,this.memberAccountView,this.organizationAccountView,c)};b.prototype.userOrOrgBillingView=function(b,c){null==b&&(b="me");this.userOrOrgView(b,this.memberBillingView,
this.organizationBillingView,c)};b.prototype.userOrOrgBillingCardViewTMP=function(b,c){null==b&&(b="me");this.userOrOrgView(b,this.memberBillingCardView,this.organizationBillingCardView,c)};b.prototype.userOrOrgBillingCardView=function(){var b,c,g,f,h;c=arguments[0];f=3<=arguments.length?G.call(arguments,1,h=arguments.length-1):(h=1,[]);b=arguments[h++];null==c&&(c="me");g=f[0];this.getViewData(c,function(f){return function(h,k){switch(null!=k?k.type:void 0){case "member":return f.memberBillingCardView.call(f,
c,g,b);case "organization":return f.organizationBillingCardView.call(f,c,g,k.id,b);default:return f.displayErrorPage({callback:b})}}}(this))};b.prototype.getViewData=function(b,c){var g,f,h,k;h=window.sessionStorage;f="userOrOrg_"+b;return null!=(k=null!=h?h.getItem(f):void 0)?(g=k.split("|"),k=g[0],g=g[1],c(null,{type:k,id:g})):async.waterfall([function(c){return $.get("/1/types/"+b).done(function(b){return c(null,b)}).fail(function(){return c("notFound")})},function(b,c){null!=(null!=b?b.type:void 0)&&
null!=(null!=b?b.id:void 0)&&null!=h&&h.setItem(f,""+b.type+"|"+b.id);return c(null,b)}],c)};b.prototype.userOrOrgView=function(b,c,g,f){return this.getViewData(b,function(h){return function(k,l){switch(null!=l?l.type:void 0){case "member":return c.call(h,b,f);case "organization":return g.call(h,b,l.id,f);default:return h.displayErrorPage({callback:f})}}}(this))};b.prototype.displayOrganizationPage=function(b){var c,g,f,h,k;null==b.idOrganization?this.getViewData(b.orgname,function(c){return function(e,
f){return"organization"===(null!=f?f.type:void 0)?(b.idOrganization=f.id,c.displayOrganizationPage(b)):c.displayErrorPage({callback:b.callback})}}(this)):(f=b.orgname,k=b.username,h=b.product,g=this.onAnyBoardView()&&b.inDialogIfOnBoard||this.overBoardsPage,P("controller",["organization"]),c=this.spinnerUntil(b.callback),async.auto({organization:function(c){return M[b.loadFn](f,function(b){return function(b,d){return null!=b||null==d?c(b||"Organization not found",d):ModelCacheCache["for"]("organization_"+
d.id).enqueueDelta("Organization",d,function(b){return c(b,d)})}}(this))},additional:["organization",function(c,e){var f,g,h;g=e.organization;f={};return async.forEach(_.keys(null!=(h=b.additionalFns)?h:{}),function(c,e){return M["for"]("organization_"+g.id)[b.additionalFns[c]](g.id,k,function(b,d){f[c]=d;return e()},e)},function(b){return c(b,f)})}],results:["organization","additional",function(l){return function(n,s){var v,w,B,A;A=s.organization;v=_.extend(A,s.additional);A=Ta.get("organization_"+
A.id,null!=(w=v.id)?w:v.idOrganization);v=aa.findOne("organization_"+A.id,"username",k);!A.owned()&&b.adminOnly||!A.isMember(y.me())&&b.membersOnly||null!=b.businessClass&&!A.isFeatureEnabled(b.businessClass)?l.organizationBoardsView(f,b.idOrganization):(g?l.saveBoardsView():l.clearPreviousView(),l.setViewType("organization",null,b.idOrganization),B={},v&&(B.member=v),null!=h&&(B.product=h),B.modelCache=l.getCurrentModelCache(),g?(w=null,null!=b.maxDialogWidth&&(w=b.maxDialogWidth),B=new b.viewClass(_.extend({model:A},
B)),Y.show({isNavigating:!0,view:B,maxWidth:w,hide:function(b){if(!b)return l.loadBoardsView()}})):(B=l.topLevelView(b.viewClass,A,B),l.showHeader(),$("body").addClass("tabbed-page"),$("#content").html(B.render().el)),w=""+A.get("displayName")+" ("+A.get("name")+")",v=v?b.getLocation(A.get("name"),v.get("username")):h?b.getLocation(A.get("name"),h):b.getLocation(A.get("name")),l.setLocation({title:w,location:v}),"function"===typeof c&&c(A))}}(this)]},function(b){return function(c){if(null!=c)return c.match("Confirm to view")&&
y.isLoggedIn()?aa.waitFor("header",y.myId(),function(){return b.displayErrorPage(_.extend({errorType:"unconfirmedNotFound",modelType:"organization"},y.me().toJSON()))}):b.displayErrorPage()}}(this)))};b.prototype.memberBoardsView=function(b,c,g){null==b&&(b="me");this.displayMemberPage(_.extend({username:b,loadFn:"loadMemberBoardsData",viewClass:$g,getLocation:function(b){return function(c){return b.getMemberBoardsUrl(c)}}(this),callback:function(){xi();return null!=g?g.apply(this,arguments):void 0}},
c))};b.prototype.memberNotificationsView=function(b,c){null==b&&(b="me");if(!y.isLoggedIn())return this.displayErrorPage({callback:c});this.displayMemberPage({username:"me",loadFn:"loadNotificationData",viewClass:hh,inDialogIfOnBoard:!0,maxDialogWidth:530,getLocation:function(b){return function(c){return b.getMemberNotificationsUrl(c)}}(this),callback:c})};b.prototype.memberProfileView=function(b,c){null==b&&(b="me");this.displayMemberPage({username:b,loadFn:"loadMemberProfileData",viewClass:ih,getLocation:function(b){return function(c){return b.getMemberProfileUrl(c)}}(this),
callback:c})};b.prototype.memberCardsView=function(b,c,g){null==b&&(b="me");this.displayMemberPage(_.extend({username:b,loadFn:"loadMemberCardsData",viewClass:eh,getLocation:function(b){return function(c){return b.getMemberCardsUrl(c)}}(this),callback:g},c))};b.prototype.memberIsGold=function(b){return b.isGold()};b.prototype.memberAccountView=function(b,c){this.displayMemberPage({username:"me",loadFn:"loadMemberAccountData",viewClass:Wg,getLocation:function(b){return function(c){return b.getMemberAccountUrl(c)}}(this),
callback:c})};b.prototype.memberBillingView=function(b,c){this.displayMemberPage({username:"me",loadFn:"loadMemberAccountData",viewClass:ge,getLocation:function(b){return function(c){return b.getMemberBillingUrl(c)}}(this),callback:c})};b.prototype.memberBillingCardView=function(b,c,g){this.displayMemberPage({username:"me",product:c,loadFn:"loadMemberAccountData",viewClass:Yg,getLocation:function(b){return function(c,d){return b.getMemberBillingCardProductUrl(c,d)}}(this),callback:g})};b.prototype.displayMemberPage=
function(b){var c,g,f,h,k,l,n,s,v,w,B;w=b.username;n=b.loadFn;B=b.viewClass;k=b.getLocation;g=b.callback;s=b.message;c=b.bodyClass;l=b.inDialogIfOnBoard;v=b.product;h=b.fxIsValid;null==w&&(w=y.myUsername());f=this.onAnyBoardView()&&l||this.overBoardsPage;P("controller",["memberBoardsView"]);g=this.spinnerUntil(g);M[n](w,function(l){return function(q,n){var u;f&&l.saveBoardsView();l.setViewType("member","boardsView",n.id);f||l.clearPreviousView();u=l.getModelCache("member","boardsView",n.id);return ModelCacheCache["for"](u).enqueueDelta("Member",
n,function(){var w,A,C;A=!q&&null!=n?aa.get(u,n.id):null;q||!A||null!=h&&!h(A)?l.displayErrorPage():(w={isMore:n.isMore,data:n,product:v,modelCache:u},f?(C=new B(_.extend({model:A},w)),w=null,null!=b.maxDialogWidth&&(w=b.maxDialogWidth),Y.show({isNavigating:!0,view:C,maxWidth:w,hide:function(b){if(!b)return l.loadBoardsView()}})):(C=l.topLevelView(B,A,w),l.showHeader(),c?$("body").addClass(c):$("body").addClass("tabbed-page"),$("#content").html(C.render().el)),w=y.isMe(A)?"":""+A.get("fullName")+
" ("+A.get("username")+")",l.setLocation({title:w,location:k(A.get("username"),v)}),"function"===typeof g&&g(A),null!=s&&O.flash(s.text,"confirm","member"))})}}(this))};b.prototype.cardView=function(b,c,g){return this.displayBoard({idCard:b},g)};b.prototype.oldCardView=function(b,c,g,f){this.displayBoard({idBoard:c,idCard:g},f)};b.prototype.blankView=function(b){var c;c=this.spinnerUntil(b);return M.waitFor("headerData",function(b){return function(){b.setViewType("blank");b.clearPreviousView();b.showHeader();
return"function"===typeof c?c():void 0}}(this))};b.prototype.shortcutsView=function(b){var c;c=function(b,c){var d;d=v.fill("shortcuts");return c(d)};this.onAnyBoardView()||this.overBoardsPage?(this.saveBoardsView(),c("board",function(b){return function(c){return Y.show({html:c,displayType:"single-column",hide:function(c){if(!c)return b.loadBoardsView()}})}}(this)),this.setLocation("Keyboard Shortcuts","shortcuts")):this.staticView({title:"Keyboard Shortcuts",location:"shortcuts",template:function(b){return c("static",
b)},bodyClass:"single-column"},b)};b.prototype.staticView=function(b,c){var g,f,h,k,l,n,s,w,A;w=b.title;k=b.location;l=b.template;n=b.templateData;s=b.templatePartials;g=b.bodyClass;A=b.viewType;h=b.headerOpts;P("controller",[k+"View"]);f=this.spinnerUntil(c);M.waitFor("headerData",function(b){return function(){var c;b.setViewType(null!=A?A:k);b.clearPreviousView();b.showHeader(h);null==n&&(n={});n.loggedIn=y.isLoggedIn();c=function(c){$("body").addClass(g);$("#content").html(c);b.setLocation({title:w,
location:k});return"function"===typeof f?f():void 0};_.isFunction(l)?l(c):c(v.fill(l,n,null,s))}}(this))};b.prototype.showHeader=function(b){var c,g;null==b&&(b={});$("#header .header-user").remove();$("#header .header-boards-button").remove();$("#header #header-search").parent().remove();$("#header-search").empty();$(".header-banner").remove();$("#header nav").remove();$("#boards-drawer").empty();g=y.me();c=ModelCacheCache["for"]("header");$("#header").empty().prepend(v.fill("header_logo"));b.promo?
$("#header").append(v.fill("header_promo_nav")):y.isLoggedIn()?($("#header").append(this.topLevelView(lf,g,{modelCache:c}).render().el),b.noSearch||$("#header").append(this.topLevelView(Kd,g,{modelCache:c}).render().el),$("#header .header-woof").parent().remove(),$("#header").append(this.topLevelView(qf,g,{modelCache:c}).render().el),$("#boards-drawer").append(this.topLevelView(si,g,{modelCache:c}).render().el)):$("#header").append(v.fill("header_promo_nav"));$("#header").append(this.topLevelView(of,
g,{modelCache:c}).render(b.promo).el);l.hasValidInviteTokenFor(this.getCurrentModelCache(),this.idModel)?(b={modelCache:this.getCurrentModelCache()},this.onAnyBoardView()?b.idBoard=this.idModel:this.onAnyOrganizationView()&&(b.idOrganization=this.idModel),$("#header").after(this.topLevelView(rf,g,b,this.idModel).render().el)):y.isLoggedIn()&&!y.confirmed()?$("#header").after(this.topLevelView(jf,g,{modelCache:c}).render().el):y.isLoggedIn()&&!y.canLogIn()?$("#header").after(this.topLevelView(vf,g,
{modelCache:c}).render().el):!y.isLoggedIn()&&C.onAnyBoardView()&&(b=ia.get(this.getCurrentModelCache(),this.idModel),null!=b&&b.isPublic()&&$("#header").after(this.topLevelView(uf,b,{modelCache:this.getCurrentModelCache()}).render().el));g.checkColorBlindMode()};b.prototype.displayErrorPage=function(b){var c;c=b=_.extend({errorType:"notFound"},b);null!=b&&b.errorType&&(c[b.errorType]=!0,c.url=location.pathname);this.staticView({title:"Error",template:"error",templateData:b,viewType:"error"},b.callback)};
b.prototype.showSpinner=function(){return $(".header-logo").addClass("throb")};b.prototype.hideSpinner=function(){return $(".header-logo").removeClass("throb")};b.prototype.spinnerUntil=function(b){this.showSpinner();return function(c){return function(g){c.hideSpinner();return"function"===typeof b?b(g):void 0}}(this)};b.prototype.advertiseUpgrade=function(){return Na.advertiseUpgrade()};b.prototype.upgradeClient=function(){var b;if(!this.upgrading)return this.upgrading=!0,b=l.randomWait(360,1800),
"active"===Ha.getStatus()&&(b=l.randomWait(60,300)),O.showHtml((new xe).render({timeInSeconds:b}),"confirm","upgrade"),setTimeout(function(b){return function(){if(b.upgrading)return b.upgradeNow()}}(this),1E3*b)};b.prototype.upgradeNow=function(){O.hideAll();return window.location.reload()};b.prototype.stopUpgrade=function(){this.upgrading=!1;return O.showHtml((new xe).render({stopped:!0}),"confirm","upgrade")};b.prototype.syncError=function(){return O.showHtml(v.fill("sync_error"),"error","modelSync")};
return b}(Backbone.Router);(function(){var c;c=Backbone.History.prototype.navigate;return _.extend(Backbone.History.prototype,{navigate:function(b,d){c.call(this,b,d);this.trackPageview(b)},trackPageview:function(b){""===b&&(b=y.isLoggedIn()?"boards":"landing");"undefined"!==typeof ga&&null!==ga&&(ga("create","UA-225715-29","trello.com"),ga("send","pageview","/"+b))}})})();var O,k=function(c,b){return function(){return c.apply(b,arguments)}};O=new (function(){function c(){this.hideAll=k(this.hideAll,
this);this.hide=k(this.hide,this);this.showHtml=k(this.showHtml,this);this.show=k(this.show,this);this._showHideContainer=k(this._showHideContainer,this);this._show=k(this._show,this);this._hide=k(this._hide,this);var b,c,e;e=null;b=function(b){return function(){clearTimeout(e);b.hide("connection");return b.showHtml(v.fill("connect_failed",{msg:"Could not connect to Trello."}),"error","connectionDead")}}(this);$(rpc).bind("connect_failed",b);$(rpc).bind("reconnect_failed",b);c=function(b){return function(){clearTimeout(e);
return b.hide("connection")}}(this);b=function(b){return function(){clearTimeout(e);return e=setTimeout(function(){e=null;return b.show("Attempting to restore connection.  Changes made now may not be saved.","error","connection")},500)}}(this);$(rpc).bind("reconnect",c);$(rpc).bind("connecting",b)}c.prototype._alerts={};c.prototype._hide=function(b){var c;c=this._alerts[b];null!=c&&c.timeout&&clearTimeout(c.timeout);delete this._alerts[b];$("#notification_"+b).remove();return this._showHideContainer()};
c.prototype._show=function(b,c,e,g,f){var h;P("alerts","show",b,c,e,g,f);this._hide(g);f&&(h=setTimeout(function(b){return function(){return b.hide(g)}}(this),f));this._alerts[g]={timeout:h};e=$("<div>").attr("id","notification_"+g).addClass(e).appendTo("#notification");c?e.html(b):e.text(b);return this._showHideContainer()};c.prototype._showHideContainer=function(){return $("#notification").toggle(!_.isEmpty(this._alerts))};c.prototype.show=function(b,c,e,g){return this._show(b,!1,c,e,g)};c.prototype.showHtml=
function(b,c,e,g){return this._show(b,!0,c,e,g)};c.prototype.flash=function(b,c,e){return this._show(b,!1,c,e,2E3)};c.prototype.hide=function(b){P("alerts","hide",b);return this._hide(b)};c.prototype.hideAll=function(){var b,c;c=[];for(b in this._alerts)c.push(this.hide(b));return c};return c}());window.cdnErr=function(){if(za.inTest("trellocdn_warning"))return window.Alerts=O,O.showHtml('Your browser can\'t reach our new CDN, trellocdn.com.<br />\n<a href="http://help.trello.com/customer/portal/articles/1339289">Fix it</a>\n<a href="#" onclick="window.Alerts.hide(\'cdnErr\')">Dismiss</a>',
"warning","cdnErr")};var Fb,k=function(c,b){return function(){return c.apply(b,arguments)}};Fb=function(){function c(d){this.model=d;this.localNotification=k(this.localNotification,this);this.clickHandler=k(this.clickHandler,this);this.show=k(this.show,this);(c.enabled()||window.fluid)&&this.model.get("unread")&&(this.localNotification()?this.show():_.delay(this.show,b))}var b;c.__proto__=window.Notification;b=1E3;c.enabled=function(){return"granted"===this.permission};c.denied=function(){return"denied"===
this.permission};c.notEnabled=function(){return"default"===this.permission};c.prototype.show=function(){return this.getLock(function(b){return function(){var c,g,f,h,k;h=b.render();k=h.title;c=h.body;g=h.icon;h=h.tag;if(window.fluid)return window.fluid.showGrowlNotification({title:k,priority:1,sticky:!1,description:c,icon:g});f=new window.Notification(k,{body:c,icon:g,tag:h});f.model=b.model;f.addEventListener("click",b.clickHandler);return _.delay(function(){return f.close()},1E4)}}(this))};c.prototype.render=
function(){var b,c,g,f,h;c=this.model.getTemplateData({useHTML:!0,truncate:null});c.isDesktopNotification=!0;f=v.fill("text_notification",c,{},{text_entity:v.notification_title}).replace(/\s+/g," ").trim();b="";g=_.last(c.entities);g.commentType&&(b=g.text);g="/favicon.ico";if(null!=(h=c.member)&&h.avatarHash)g=""+avatarDomain+"/"+c.member.avatarHash+"/50.png";return{title:f,body:b,icon:g,tag:this.model.id}};c.prototype.clickHandler=function(b){var c;this.model.get("data");this.model.markRead();b.target.close();
if(this.localNotification())return this.model.navigateToView()||C.memberNotificationsView(),window.focus();c=this.model.getUrlOfTarget();b=window.open(c);return null!=b?b.focus():window.location=c};c.prototype.localNotification=function(){var b;b=this.model.get("data");return _.any(_.invoke([function(){var c;return C.onBoardView(null!=(c=b.board)?c.id:void 0)},function(){var c;return C.onOrganizationView(null!=(c=b.organization)?c.id:void 0)},function(){return 0===location.pathname.indexOf(C.getMemberNotificationsUrl())}],
"call"))};c.prototype.getLock=function(b){var c,g;c="notification_lock_"+this.model.id;if(!ka.get(c))return g=Math.random(),ka.set(c,g),_.delay(function(f){return function(){if(ka.get(c)===g)return b()}}(this),100),_.delay(function(b){return function(){return ka.unset(c)}}(this),1E4)};return c}();var X,k=function(c,b){return function(){return c.apply(b,arguments)}},G=[].slice;X=new (function(){function c(){this._track=k(this._track,this);this.paste=k(this.paste,this);this.keydown=k(this.keydown,this);
this._isKeyEligible=k(this._isKeyEligible,this);var b,c,e,g;this._handlers={};this.clear();g=["keydown","paste"];c=0;for(e=g.length;c<e;c++)b=g[c],$(document).bind(b,this[b])}c.prototype.precedence={global:0,"default":1,header:2,board:3,board_sidebar:3,card:4,search_box:5,dialog_view:10,dialog:12,attachment_viewer:20,quick_card_editor:20,popover_view:30,popover:32};c.prototype._isKeyEligible=function(b){return!(ba.isTouch()||27!==b.which&&$(b.target).is("input:visible,textarea:visible,select:visible")||
b.ctrlKey||b.altKey||b.metaKey)};c.prototype.addHandler=function(b,c){var e,g,f,h,k;f=c.scope;g=c.precedence;e=c.modal;h=c.top;null==g&&(g=this.precedence[f]);null==g&&(P("userinput","Missing precedence for "+f),g=this.precedence["default"]);null==e&&(e=!1);if(null==(k=this._handlers)[f])k[f]={};this._handlers[f]={target:b,scope:f,precedence:g,modal:e,top:h};return P("userinput","Adding handler for "+f)};c.prototype.removeHandlerScope=function(b){var c,e;e=[];for(c in this._handlers)c===b&&(P("userinput",
"Removing handlers for "+c),e.push(delete this._handlers[c]));return e};c.prototype.removeHandler=function(b){var c,e,g,f;g=this._handlers;f=[];for(e in g)c=g[e].target,b===c&&(P("userinput","Removing handler for "+e),f.push(delete this._handlers[e]));return f};c.prototype.clear=function(){var b,c;P("userinput","Removing all non-global handlers");c=[];for(b in this._handlers)"global"!==b&&(P("userinput","Removing handler for "+b),c.push(delete this._handlers[b]));return c};c.prototype._sortedHandlers=
function(){var b;b=_.sortBy(_.values(this._handlers),function(b){return-b.precedence});_.any(b,function(b){return b.modal})&&(b=_.filter(b,function(b){return b.modal}));_.any(b,function(b){return b.top})&&(b=_.filter(b,function(b){return b.top}));return b};c.prototype._triggerOnTargets=function(){var b,c,e,g,f,h;c=arguments[0];b=2<=arguments.length?G.call(arguments,1):[];h=this._sortedHandlers();g=0;for(f=h.length;g<f;g++)if(e=h[g].target,e=null!=(null!=e?e[c]:void 0)?e[c].apply(e,b):null!=(null!=
e?e.triggerHandler:void 0)?e.triggerHandler(c,b):void 0)return(_.isString(e)||_.isArray(e))&&this._track(e),!0;return!1};c.prototype.keydown=function(b){27===b.which&&l.stop(b);this._isKeyEligible(b)&&this._triggerOnTargets("shortcut",b.which,b.shiftKey)&&l.stop(b)};c.prototype.paste=function(b){var c,e,g,f,h,k,q,u,s;c=null!=(g=b.originalEvent)?g.clipboardData:void 0;f=null!=(h=null!=c?c.items:void 0)?h:[];g=function(b){return _.find(f,function(c){return c.type===b})};if(g("text/plain"))b=null!=(e=
null!=c?"function"===typeof c.getData?c.getData("text/plain"):void 0:void 0)?e:null!=(k=window.clipboardData)?k.get("Text"):void 0,this._triggerOnTargets("paste","text",b);else if(e=g("image/png"),null!=e&&(e=e.getAsFile(),null!=e))if(l.validCardUpload(e)){if(n("Keyboard Shortcuts","Paste - Upload Image From Clipboard"),this._triggerOnTargets("paste","image",e))return l.stop(b)}else return null!=(q=y.me())&&q.isFeatureEnabled("largeAttachments")||null!=(u=this.model.getBoard())&&null!=(s=u.getOrganization())&&
s.isFeatureEnabled("largeAttachments")?O.show("File size exceeds 250MB limit","error","upload",5E3):O.show("File size exceeds 10MB limit","error","upload",5E3)};c.prototype._track=function(b){if(null!=b)return _.isArray(b)||(b=[b]),n.apply(null,["Keyboard Shortcuts"].concat(G.call(b)))};return c}());X.addHandler({shortcut:function(c,b){if(63===c||191===c&&b)return C.navigate("shortcuts"),C.shortcutsView(),"Shortcuts page"}},{scope:"global"});var C;if(!window.unsupported){C=null;$(function(){C=new vi;
Backbone.history.start({pushState:!0});qa.ensureRun();$("body").delegate("a[href^='/'],a[href^='"+siteDomain+"/']","click",function(c){var b,d;if(!c.ctrlKey&&(!c.metaKey&&!c.shiftKey)&&(d=$(this).attr("href").replace(RegExp("^(/(?=.)|"+siteDomain+")","g"),""),(b=d!==location.pathname.slice(1))&&w.hide(),!$(this).hasClass("js-real-link")&&("login"!==d&&"signup"!==d&&"forgot"!==d)&&(l.preventDefault(c),b)))return C.navigate(d,{trigger:!0})});return $("#surface").append(v.fill("surface_base"))});(function(){var c;
c=y.updateToken();return setInterval(function(){var b;b=y.updateToken();b!==c&&window.location.reload();return c=b},3E3)})();$(document).ready(function(){var c,b,d,e,g,f,h,k;g=0;h=["ms","moz","webkit","o"];d=0;for(k=h.length;d<k;d++)b=h[d],window.requestAnimationFrame||(window.requestAnimationFrame=window[""+b+"RequestAnimationFrame"],window.cancelAnimationFrame=window[""+b+"CancelAnimationFrame"]||window[""+b+"CancelRequestAnimationFrame"]);window.requestAnimationFrame||(window.requestAnimationFrame=
function(b,c){var d,e,f;d=(new Date).getTime();f=Math.max(0,16-(d-g));e=window.setTimeout(function(){return b(d+f)},f);g=d+f;return e});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(b){return clearTimeout(b)});window.orientationchange=Y.calcPos;ba.detectCustomWebkitScrollbars();jQuery.event.props.push("dataTransfer");"placeholder"in document.createElement("input")||$('input[placeholder]:not(".js-no-ie-placeholder"), textarea[placeholder]:not(".js-no-ie-placeholder")').delegate({focus:function(b){b=
$(this);if(b.hasClass("placeholder"))return b.removeClass("placeholder").val("")},blur:function(b){b=$(this);if(""===b.val().trim())return b.addClass("placeholder").val(b.attr("placeholder"))}});h=function(b,c,d,e){return $(document).on("click",b,function(b){var f,g,h,k,l;k=[c,d,e];l=[];g=0;for(h=k.length;g<h;g++)f=k[g],null!=f&&(_.isFunction(f)?l.push(f.call(this,b)):l.push(f));return n.apply(null,l)})};h(".js-home-via-logo","Header","Logo","Home");h(".header-signup","Header","Sign Up");$(document).on("click",
".js-resend-confirmation-email",_.throttle(function(b){return function(){return S({type:"POST",url:"/resendValidate",data:{email:y.me().get("email")},success:function(){return O.flash("Email Sent","confirm")}})}}(this),6E4));$(document).on("click",".js-add-this-businessClass",function(b){var c;l.stop(b);n("Business Class Promo Page","Clicked 'Add This'");b=$(b.target).closest(".js-add-this-businessClass");c=b.attr("name");w.toggle({elem:b,top:44,view:y.me().getView(xh,"",{product:c})})});d={helpdot:"help.trello.com",
shortcuts:"Shortcuts",api:"API",iphone:"iPhone link",android:"Android link",win8:"Windows 8 link",blog:"Blog Link",dev:"Dev Board",twitter:"Twitter Link",facebook:"Facebook link",google:"Google+ link",fogcreek:"Fog Creek Link",resources:"Resources",privacy:"Privacy",legal:"Legal"};for(e in d)b=d[e],h(".js-help-main-"+e,"Help","Main",b);h(".js-first-sign-up-landing-boards","Landing","Clicked on first signup button","Boards");h(".js-first-sign-up-landing-video","Landing","Clicked on first signup button",
"Video");h("#landingSignUp .landing-signup-button","Landing","Clicked on second signup button");h(".slideshow-arrow","Landing","Clicked on slideshow arrows");h("#slideshowNav a","Landing","Clicked on slideshow dots");h(".show-board-button","Landing","Clicked on featured board");h(".js-landing-learn-more","Landing","Learn more");h(".js-sign-up-via-business-class","Business Class","Sign up at bottom");e={android:"Android App",iphone:"iPhone App",ipad:"iPad App",win8:"Windows 8 App",web:"Web App"};for(c in e)b=
e[c],h(".js-landing-app-"+c,"Landing",b,function(b){return $(b.target).hasClass("js-text")?"Text":"Image"});c={web:"Open Web",ios:"Download iOS",android:"Download Android",kindle:"Download Kindle",win8:"Download Windows 8",chrome:"Download Chrome",firefox:"Download Firefox",safari:"Download Safari",ie:"Download Internet Explorer"};for(f in c)b=c[f],h(".js-platforms-"+f,"Platforms",b);$(".window-overlay").click(function(b){if(!$(b.target).is("a[href^='/']")&&!($(b.target).closest("a").hasClass("js-real-link")||
0<b.button))$(b.target).is("a")&&"#"!==$(b.target).attr("href")?l.stopPropagation(b):!$(b.target).is("a.focus-dummy")&&!$(b.target).hasClass("checkbox")&&(w.isVisible?w.hide():$(".new-comment").hasClass("focus")?$(".new-comment").removeClass("focus").find("textarea").blur():ma.isEditing()?ma.cancelEdits():0<$(b.target).closest(".window-wrapper").length||Y.hide())});$("#surface").click(function(b){var c,d;if(!(0<$(b.target).closest(".boards-drawer").length))if($(b.target).is("input")||$(b.target).is("textarea"))l.stopPropagation(b);
else return d=(c=C.getCurrentBoard())&&C.getCurrentBoardView(),w.isVisible?w.hide():W.getShowSidebar()&&!W.getPinSidebar()?W.hideSidebar():$(".new-comment").hasClass("focus")?$(".new-comment").removeClass("focus").find("textarea").blur():null!=c&&c.viewState.get("listComposerOpen")?null!=c?c.viewState.set("listComposerOpen",!1):void 0:null!=c&&c.composer.get("vis")&&0<!$(b.target).closest(".card-composer").length?c.composer.save("vis",!1):ma.isEditing()?ma.cancelEdits():C.showingCalendar(d)&&0===
$(b.target).closest(".calendar-day").length?$(".calendar-day.active").removeClass("active"):$("input, textarea").blur()});$(document).on("click","a[href=#]",function(b){return l.preventDefault(b)});$(document).keyup(function(b){if(27===b.keyCode){b.preventDefault();C.getCurrentBoard();if(W.getShowSidebar()&&!W.getPinSidebar())return W.hideSidebar();if(ma.isEditing())return ma.cancelEdits();if($(".new-comment").hasClass("focus"))return $(".new-comment").removeClass("focus").find("textarea").blur();
$("input").blur();return $("textarea").blur()}});$(document).bind("dragstart",function(b){return 0<$(b.target).closest(".ui-draggable").length});n("Trello Version",Na.version.toString());null!=window.fluid&&n("FluidApp");TRMixpanel.setReferralCookie();return TRMixpanel.trackLoginOrSignUp()});$.fn.fixPlaceholder=function(){if("placeholder"in document.createElement("input"))return this;this.filter('input[placeholder]:not(".js-no-ie-placeholder"), textarea[placeholder]:not(".js-no-ie-placeholder")').each(function(){var c;
c=$(this);return c.addClass("placeholder").val(c.attr("placeholder"))});return this};var Ac;Ac=new (function(){function c(){}c.prototype.delta=ka.get("serverTimeDelta");c.prototype.updateServerTime=function(b){this.delta=new Date(b)-new Date;ka.set("serverTimeDelta",this.delta);return P("time","delta",this.delta)};c.prototype.serverToClient=function(b){return new Date(new Date(b)-this.delta)};return c}());var I;I=new (function(){function c(){_.extend(this,Backbone.Events);this.startOfWeekOffset=this.DAY_TABLE[this.isUS?
"sunday":"monday"]}var b,d,e;e="";c.prototype.DAY_TABLE={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6};c.prototype.objToDate=function(b,c,d){_.isObject(b)&&(d=b,b=d.year,c=d.month,d=d.day);return new Date(b,c-1,d)};c.prototype.dateToObj=function(b){return{year:b.getFullYear(),month:b.getMonth()+1,day:b.getDate()}};c.prototype.setStartOfWeek=function(b){return this.startOfWeekOffset=this.DAY_TABLE[b]};c.prototype.getStartOfWeek=function(b){return(new Date(b)).addDays(this.startOfWeekOffset-
b.getDay())};c.prototype.getEndOfWeek=function(b){return(new Date(b)).addDays(6-b.getDay())};c.prototype.getDaysOfWeek=function(b){var c,d,e;e=[];for(c=d=0;6>=d;c=++d)e.push((new Date(this.getStartOfWeek(b))).addDays(c));return e};c.prototype.getMidnightInt=function(b){return(new Date(b)).setHours(0,0,0,0)};c.prototype.getFirstOfMonth=function(b){return(new Date(b)).moveToFirstDayOfMonth(b)};c.prototype.getDateWithSpecificTime=function(b,c){return new Date(c.getFullYear(),c.getMonth(),c.getDate(),
b.getHours(),b.getMinutes(),b.getSeconds())};b=function(){var b;b=$(this).data("date");null==b&&(b=I.parse($(this).attr("dt")),b=Ac.serverToClient(b),$(this).data("date",b));$(this).text(function(){return kb(b.getTime(),e,{timeFormat:I.timeFormat()})});$(this).is("[title]")||$(this).attr("title",""+b.toLocaleDateString()+" "+b.toLocaleTimeString())};d=function(){var b,c,d;b=I.parse($(this).attr("dt"));c=null!=(d=$(this).attr("text"))?d:"";$(this).text(function(){return""+(b>e?"is":"was")+" "+c+" "+
kb(b.getTime(),e)})};c.prototype.isUS=/en-us/i.test($.cookie("lang")||navigator.language||navigator.browserLanguage);c.prototype.timeFormat=function(){return this.isUS?"h:mm tt":"HH:mm"};c.prototype.updateRel=function(b){e=new Date;return $(b).find(".rel-date[dt]").each(d)};c.prototype.update=function(c){e=new Date;$(c).find(".date[dt]").each(b)};c.prototype.convertDateFormat=function(b){null==b&&(b="");return this.isUS?b:b.replace(/(?:^|\s)(\d{1,2})[\/-](\d{1,2})(?:[\/-](\d\d{2,4}))?(?:$|\s)/g,function(b,
c,d,e){return 12>=d?e?""+d+"/"+c+"/"+e+" ":""+d+"/"+c+" ":b})};c.prototype.parse=function(b){var c;null==b&&(b="");if(_.isDate(b)||_.isNumber(b))return new Date(b);b=this.convertDateFormat(b);c=new Date(b);return isNaN(c)?new Date(b.replace(/-/g,"/").replace(/T|Z|\.\d+/g," ")+" GMT"):c};c.prototype.toShortString=function(b){return this.isUS?b.toString("MM/dd/yyyy"):b.toString("dd/MM/yyyy")};c.prototype.toDateString=function(b,c){var d,k;d=(null!=c?c:{}).smartYear;e=new Date;null==d&&(d=!1);d=d&&(b.getYear()===
e.getYear()||l.getMs({months:-3})<(k=b-e)&&k<l.getMs({months:3}));return b.toString(d?"MMM d":"MMM d, yyyy")};c.prototype.toLongString=function(b){var c;c=Date.today();return c.getYear()===b.getYear()&&c.getMonth()===b.getMonth()&&c.getDate()===b.getDate()?"Today at "+b.toString(this.timeFormat()):""+this.toDateString(b,{smartYear:!0})+" at "+b.toString(this.timeFormat())};c.prototype.toLongDateString=function(b){if(null!=b)return b=new Date(b),""+(this.monthMap[b.getMonth()]+b.toString(" d, yyyy"))};
c.prototype.normalizeTime=function(b){var c,d,e,k,l;e=null!=b?"function"===typeof b.match?b.match(/^(\d\d)(\d\d)/):void 0:void 0;null==e&&(e=null!=b?"function"===typeof b.match?b.match(/(\d+)(?::(\d\d))?\s*([aApP]?)/):void 0:void 0);if(!e)return null;b=parseInt(e[1],10);d="p"===(c=e[3])||"P"===c;c="a"===(l=e[3])||"A"===l;24===b?b=0:d?12!==b&&(b+=12):c&&12===b&&(b=0);e=parseInt(null!=(k=e[2])?k:0,10);if(!(0<=b&&23>=b)||!(0<=e&&59>=e))return null;k=function(b){return 10>b?"0"+b:b};return""+k(b)+":"+
k(e)};c.prototype.monthMap={0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"};c.prototype.validDate=function(b){return _.isDate(b)&&!isNaN(b.getTime())};return c}());$(function(){return setInterval(function(){I.update("body");I.updateRel("body");I.trigger("renderInterval")},1E4)});var xi;xi=function(){var c,b,d,e,g,f,h,k,l,n,s,v;if(y.isLoggedIn()){g=y.me();k=function(b){var c;c=b+"";if(c=c.match(/\(([^\)]+)\)$/)||
c.match(/([A-Z]+|UTC[+-]\d{4}) [\d]{4}$/)){c=c[1];/\s/.test(c)&&(c=c.replace(/(\S)\S*/g,function(b,c){return c}));for(c=c.match(/[A-Z]/g).join("");2>c.length;)c+="?"}else b=b.getTimezoneOffset(),c="UTC"+(0>b?"+":"-")+("00"+Math.floor(Math.abs(b)/60)).substr(-2)+":"+("00"+Math.abs(b)%60).substr(-2);return c};n=s=d=null;b=new Date;n=b.getTimezoneOffset();v=k(b);for(f=0;12>=f;++f)if(b.addDays(30),b.getTimezoneOffset()!==n){d=b;break}if(null!=d){s=d.getTimezoneOffset();f=(new Date).getTime();b=d.getTime();
for(c=0;b>f+3E4&&30>c;)if(c++,h=Math.floor((f+b)/2),l=(new Date(h)).getTimezoneOffset(),l===n)f=h;else if(l===s)b=h;else break;c=k(d);d=(new Date(6E4*Math.floor(b/6E4))).toISOString()}k={};n={offsetCurrent:n,timezoneCurrent:v,offsetNext:s,timezoneNext:c,dateNext:d};for(e in n)d=n[e],null!=d&&(k[e]=d);e=g.getPref("timezoneInfo");if(!_.isEqual(k,e))return g.run("timezoneInfo",k)}};var kg;kg=new (function(){function c(){this.value="";$(document).keydown(function(b){return function(c){var e,g;if(b.value&&
(c.ctrlKey||c.metaKey)&&!$(c.target).is("input:visible,textarea:visible")&&!("function"===typeof window.getSelection&&null!=(e=window.getSelection())&&e.toString()))if(!(null!=(g=document.selection)&&g.createRange().text))return _.defer(function(){var c;c=$("#clipboard-container");c.empty().show();return $("<textarea id='clipboard'></textarea>").val(b.value).appendTo(c).focus().select()})}}(this));$(document).keyup(function(b){if($(b.target).is("#clipboard"))return $("#clipboard-container").empty().hide()})}
c.prototype.set=function(b){this.value=b};return c}());window.TRMixpanel=new (function(){function c(){this.signUpCookieName="just_signed_up";this.loginCookieName="just_logged_in";this.referralTypeCookieName="referral_type";this.referralSourceCookieName="referral_source";this.publicBoardPathCookieName="public_board_path"}c.prototype.setCookie=function(b,c){return $.cookie(b,c,{expires:1,path:"/"})};c.prototype.setReferralCookie=function(){var b,c,e,g,f,h,k;if(!$.cookie(this.referralTypeCookieName))return h=
function(){return 0<=window.location.pathname.indexOf("/b/")},k=function(){return 0<=window.location.pathname.indexOf("/recommend")},b=function(){return 0<$("#board").length},g=function(){var b,c;return null!=(b=document.referrer)?null!=(c=b.match(/:\/\/(.[^/]+)/))?c[1]:void 0:void 0},c=function(){return 0<("undefined"!==typeof l&&null!==l?"function"===typeof l.invitationTokens?l.invitationTokens().length:void 0:void 0)},e=function(){return window.location.pathname},f=function(f){return function(){var l,
n;c()?n=h()?"board invitation":"org invitation":(l=g(),k()?n="recommend":b()?(n="public board",TRMixpanel.setCookie(f.publicBoardPathCookieName,e())):n="direct");TRMixpanel.setCookie(f.referralTypeCookieName,n);l&&TRMixpanel.setCookie(f.referralSourceCookieName,l)}}(this),setTimeout(f,3E3)};c.prototype.justSignedUp=function(){return TRMixpanel.setCookie(this.signUpCookieName,!0)};c.prototype.justLoggedIn=function(){return TRMixpanel.setCookie(this.loginCookieName,!0)};c.prototype.trackEmailCampaign=
function(b,c,e){return mixpanel.track("email campaign",{"email name":b,"email action":c,"email template slug":e})};c.prototype.trackLoginOrSignUp=function(){if(y.isLoggedIn()){if($.cookie(this.signUpCookieName))return TRMixpanel.trackSignup(),$.cookie(this.signUpCookieName,null);if($.cookie(this.loginCookieName))return TRMixpanel.trackLogin(),$.cookie(this.loginCookieName,null)}};c.prototype.trackSignup=function(){var b;mixpanel.alias(y.myId());b={};$.cookie(this.referralTypeCookieName)&&(b["signup type"]=
$.cookie(this.referralTypeCookieName),$.cookie(this.referralTypeCookieName,null));$.cookie(this.referralSourceCookieName)&&(b["signup referrer"]=$.cookie(this.referralSourceCookieName),$.cookie(this.referralSourceCookieName,null));$.cookie(this.publicBoardPathCookieName)&&(b["public board path"]=$.cookie(this.publicBoardPathCookieName),$.cookie(this.publicBoardPathCookieName,null));return mixpanel.track("signup",b)};c.prototype.trackLogin=function(){return mixpanel.identify(y.myId())};c.prototype.trackInvitation=
function(b){null==b&&(b="board");mixpanel.track("invitation sent",{invitation_type:b});return mixpanel.people.increment("invitations sent")};c.prototype.trackPageView=function(b,c){return mixpanel.track("page viewed",{"page name":b,url:c})};c.prototype.trackPurchase=function(b,c){return mixpanel.track("purchase",{"product name":b,"product id":c})};c.prototype.trackVideoWatched=function(b,c,e){return mixpanel.track("video watched",{"video id":b,"video name":c,"video embed location":e})};return c}());
var Ae,Pc,yi,zi,Ai,Bi,Yc,G=[].slice,F={}.hasOwnProperty,s=function(c,b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c};Pc=new (function(){function c(){}c.prototype._findAd=function(){var b,c,e;b=arguments[0];e=arguments[1];c=3<=arguments.length?G.call(arguments,2):[];return _.find(b,function(b){return!e.isDismissed(b.adId)&&b.isEligible.apply(b,[e].concat(G.call(c)))})};c.prototype.adForMember=function(b){return this._findAd.apply(this,
[[yi]].concat(G.call(arguments)))};c.prototype.addMemberToOrganizationAd=function(b,c){return this._findAd.apply(this,[[zi]].concat(G.call(arguments)))};c.prototype.addMemberToBoardAd=function(b,c){return this._findAd.apply(this,[[Bi]].concat(G.call(arguments)))};c.prototype.boardMenuAd=function(b,c){return this._findAd.apply(this,[[Ai]].concat(G.call(arguments)))};return c}());Ae=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.events=function(){return{click:this.click,
"click .js-close-ad":this.close}};b.isEligible=function(b){return!1};b.prototype.getAdId=function(){return this.constructor.adId};b.prototype.click=function(){return n("Ad",this.getAdId(),"Click")};b.prototype.close=function(b){l.stop(b);if(null!=(b=this.getAdId()))n("Ad",this.getAdId(),"Dismiss"),y.me().dismiss(b);return this.$el.slideUp(100)};return b}(A);yi=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.adId="BoardsListBC";b.isEligible=function(b){var c,
g;g=function(b,c){return l.idToDate(b.id)<l.dateBefore(c)};if(g(b,{months:1}))return c=b.organizationList,b=c.any(function(b){return b.isPremium()}),c=c.any(function(b){return za.inTest("BC_boards_list_ad",b.id)&&g(b,{weeks:1})}),!b&&c};b.prototype.className="member-boards-list-ad business-class-ad";b.prototype.copyHtml=function(){return v.fill("ad_business_class")};b.prototype.iconClass=function(){return"business-class-mark"};b.prototype.click=function(){b.__super__.click.apply(this,arguments);return C.navigate("/business-class",
{trigger:!0})};return b}(function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="member-boards-list-ad";b.prototype.render=function(){this.$el.html(v.fill("member_boards_list_ad",{copyHtml:this.copyHtml(),iconClass:this.iconClass()}));return this};b.prototype.copy=function(){return""};return b}(Ae));Yc=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="pop-over-ad business-class-ad";b.prototype.iconClass=
function(){return"business-class-mark"};b.prototype.click=function(){b.__super__.click.apply(this,arguments);return C.navigate("/business-class",{trigger:!0})};return b}(function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.prototype.className="pop-over-list-ad";b.prototype.render=function(){this.$el.html(v.fill("pop_over_ad",{copyHtml:this.copyHtml(),iconClass:this.iconClass()}));return this};b.prototype.copyHtml=function(){return""};return b}(Ae));zi=function(c){function b(){return b.__super__.constructor.apply(this,
arguments)}s(b,c);b.adId="AddOrganizationMemberBC";b.isEligible=function(b,c){return null!=c&&za.inTest("BC_google_apps_ad",c.id)&&!c.isPremium()};b.prototype.copyHtml=function(){return v.fill("ad_business_class_google_apps")};return b}(Yc);Bi=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.adId="AddBoardMemberBC";b.isEligible=function(b,c){return null!=c&&za.inTest("BC_observers_ad",c.id)&&!c.isPremium()};b.prototype.copyHtml=function(){return v.fill("ad_business_class_observers")};
return b}(Yc);Ai=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.adId="BoardMenuBC";b.isEligible=function(b,c){var g;g=null!=c?c.getOrganization():void 0;return null!=g&&za.inTest("BC_manage_boards_ad",g.id)&&!g.isPremium()&&!c.ownedByMember(b)&&g.ownedByMember(b)};b.prototype.copyHtml=function(){var b;b={organization:this.model.getOrganization().toJSON()};return v.fill("ad_business_class_manage_any_board",b)};return b}(Yc);var Hb,F={}.hasOwnProperty,s=function(c,
b){function d(){this.constructor=c}for(var e in b)F.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c};Hb=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}s(b,c);b.loadedAuth=function(){return gapi.load("auth",function(){b.loaded=!0;b.trigger("loaded");return b.authorize(!0)})};b.authorize=function(c,e){return b.validToken()?"function"===typeof e?e(null,b.oauthToken.access_token):void 0:gapi.auth.authorize({client_id:window.googleDrive.clientId,
scope:"https://www.googleapis.com/auth/drive.readonly",immediate:c},function(c){var d;if(!c||c.error)return b.oauthToken=null,"function"===typeof e?e(null!=(d=null!=c?c.error:void 0)?d:Error("Failed to request token")):void 0;b.oauthToken=c;return"function"===typeof e?e(null,b.oauthToken.access_token):void 0})};b.validToken=function(){var c;return(null!=(c=b.oauthToken)?c.access_token:void 0)&&Date.now()/1E3<parseInt(b.oauthToken.expires_at)};return b}(Backbone.Events);$.getScript("https://apis.google.com/js/api.js",
Hb.loadedAuth);var ve;ve=function(c){var b,d,e,g;null==c&&(c=$("body"));b=function(){var b,c,d,e;d=[];e=_.shuffle(Mb);for(b in e)c=e[b],"premium"===c.type&&"Taco Pack"===c.pack.displayName&&d.push(new Qc(_.extend({image:b},c)));return d};e=function(){var d,e,g,k,n,s,w,y,A,C,E;d=c.find(".trellogold-demo-list-card");e=d.find(".js-card-stickers").empty();k=function(){return 90*Math.random()-45};s=_.shuffle(b()).slice(0,3);d=d.width()||300;n=y=0;for(A=s.length;y<A;n=++y)g=s[n],g=g.toJSON(),g.url=null!=
(C=null!=(E=l.smallestPreviewBiggerThan(g.scaled,80))?E.url:void 0)?C:g.url,g.rotate=k(),n=d/3*n+(30*Math.random()-15),w=30*Math.random()-15,e.append("<div class='sticker' style='left:"+n+"px;top:"+w+"%;'> "+v.fill("sticker_on_card",g)+" </div>")};g=function(b){var c;c=$(b.target).closest(".js-emoji");c.find("input").hide();b=c.find(".action-comment");b.find(".js-unrendered-emoji").addClass("hide");b.find(".js-rendered-emoji").removeClass("hide");c.find(".js-show-on-submit").removeClass("hide")};
d=function(){var b;b=_.filter(Sa,function(b){return"premium"===b.type&&!b.discontinued});b=b[Math.floor(Math.random()*b.length)];null!=b.scaled?c.find(".js-background").css({"background-image":'url("'+b.scaled[1].url+'")',"background-size":"cover"}):null!=b.tile&&c.find(".js-background").css({"background-image":'url("'+b.fullSizeUrl+'")',"background-size":"auto"})};(function(){var b;b=c.find(".trellogold-demo-list-card");b.find(".list-card-stickers-area").removeClass("hide");b.find(".js-card-name").text("Walk the dog.");
e()})();d();(function(){var b;b=y.me().toJSON();c.find(".js-member-emoji-demo").empty().append(v.fill("member",b));c.find(".js-member-name-emoji-demo").text(b.fullName)})();c.find(".js-earned-gold").append((new ec({model:y.me(),allowDismiss:!1})).render().el);c.find(".js-rotate-background").click(function(b){l.stop(b);return d()});c.find(".js-rotate-stickers").click(function(b){l.stop(b);return e()});return c.find(".js-submit-comment").click(function(b){l.stop(b);return g(b)})};var Ii=[{username:"brycecolquitt",
avatar:"https://d78fikflryjgj.cloudfront.net/images/landing/twitter-avatars/04e835470f32dc246875cb81d3294bbf/brycecolquitt.jpg",tweet:'How did people get work done before <a href="https://twitter.com/#!/trello" target="_blank">@Trello</a>?',timestamp:"29 Jun",url:"https://twitter.com/brycecolquitt/status/218763918934409217"},{username:"alfonsocatron",avatar:"https://d78fikflryjgj.cloudfront.net/images/landing/twitter-avatars/68cae40c6c8f244d85163197d7886c9b/alfonsocatron.jpg",tweet:'by far, trello.com is the best organization tool I\'ve ever seen, it is amazing how powerful and simple it is <a href="https://twitter.com/#!/trello" target="_blank">@trello</a>',
timestamp:"29 Jun",url:"https://twitter.com/alfonsocatron/status/218434126326403072"},{username:"angelabdotme",avatar:"https://d78fikflryjgj.cloudfront.net/images/landing/twitter-avatars/f1a5a13f00a33fc7fe84d69095070894/angelabdotme.jpg",tweet:'<a href="https://twitter.com/#!/trello" target="_blank">@Trello</a>, Good Lord, you rock! Just had to get that off my chest :)',timestamp:"28 Jun",url:"https://twitter.com/angelabdotme/status/218431858147475457"},{username:"krittabug",avatar:"https://d78fikflryjgj.cloudfront.net/images/landing/twitter-avatars/a478f6b1c3f2a7e12ecadf6163178504/krittabug.jpg",
tweet:'We\'ve been playing around on <a href="https://twitter.com/#!/trello" target="_blank">@Trello</a> at work. Brilliant, I say! Brilliant.',timestamp:"26 Jun",url:"https://twitter.com/krittabug/status/217659526135029761"},{username:"section71",avatar:"https://d78fikflryjgj.cloudfront.net/images/landing/twitter-avatars/b1f2bf42b27897400e2b4f58fd1daf28/section71.png",tweet:'A tool I use every day: <a href="https://twitter.com/#!/trello" target="_blank">@trello</a>. Awesome collaborative project management tool using boards and cards. Check it out!',
timestamp:"24 Jun",url:"https://twitter.com/section71/status/216851014370865154"},{username:"daehee",avatar:"https://d78fikflryjgj.cloudfront.net/images/landing/twitter-avatars/ad2bf733b15e83345ab1006a3eecd281/daehee.jpg",tweet:'I\'m sold. <a href="https://twitter.com/#!/trello" target="_blank">@Trello</a> is the most intuitive to-do list app I\'ve used.',timestamp:"24 Jun",url:"https://twitter.com/daehee/status/216813950745067520"},{username:"nabeelqu",avatar:"https://d78fikflryjgj.cloudfront.net/images/landing/twitter-avatars/18695da8696bb1e6a1d3662ad4dcc11e/nabeelqu.jpg",
tweet:'just transferred my entire life onto <a href="https://twitter.com/#!/trello" target="_blank">@trello</a>. Really useful tool. Thanks!',timestamp:"22 Jun",url:"https://twitter.com/nabeelqu/status/216261700637298688"},{username:"mdw233psu",avatar:"https://d78fikflryjgj.cloudfront.net/images/landing/twitter-avatars/268449c5750a33b569fb5efee220f079/mdw233psu.png",tweet:'I am at the point where I am using <a href="https://twitter.com/#!/trello" target="_blank">@trello</a> for everything ... Software project management, my GTD lists, my wedding ....',
timestamp:"22 Jun",url:"https://twitter.com/mdw233psu/status/216142253339586560"},{username:"mitchellhislop",avatar:"https://d78fikflryjgj.cloudfront.net/images/landing/twitter-avatars/63d666ce159b3035aceaffa9e118137f/mitchellhislop.jpg",tweet:'I love how <a href="https://twitter.com/#!/trello" target="_blank">@trello</a> balances both free-form stuff as well as structured stuff. Seriously powerful',timestamp:"19 Jun",url:"https://twitter.com/mitchellhislop/status/215196390400344064"},{username:"tomtheguvnor",
avatar:"/images/landing/twitter-avatars/omtheguvnor.jpg",tweet:'If you\'re not using <a href="https://twitter.com/#!/trello" target="_blank">@trello</a> to manage your project, whatever your project is, you\'re doing it wrong. Fact.',timestamp:"31 May",url:"https://twitter.com/tomtheguvnor/status/208365127144194048"}],Hi=function(){if("/landing"==location.pathname||"#landing"==location.hash||location.pathname.match(/\/recommend$/)||location.hash.match(/\/recommend$/)||"/"==location.pathname&&""==
location.hash&&(!window.Auth||!y.isLoggedIn())){$.getScript("https://use.typekit.com/wtv2ioe.js",function(){try{Typekit.load()}catch(b){}});$.easing.fastSlowFast=function(b){return(Math.tan(2.214*b-1.107)+2)/4};var c=$("#landingFeaturedUsers li"),b=$("#landingFeaturedUsers"),d=$("#landingSlidesWrapper"),e,g,f=c.length,h=d.height(),k=0,l,s=1,v=!1,A=!1;$(window).resize(function(){window.setTimeout(C,500)});var C=function(){k=d.width();$("#landingFeaturedUsers li").innerWidth(k);b.width(k*(f+2));c.css({display:"block"});
b.css({"margin-left":-k*s})},B=function(b){$("#slideshowNav .current").removeClass("current");$('#slideshowNav li[data-id="'+b+'"] a').addClass("current")},D=function(d){var h=c.filter('[data-id="'+s+'"]');if(d>f)E(h,e),F(d,function(){c.first().css({opacity:1});e.css({opacity:0});b.css({"margin-left":-k});s=1;A=!1}),B(1);else if(1>d)E(h,g),F(d,function(){c.last().css({opacity:1});g.css({opacity:0});b.css({"margin-left":-k*f});s=f;A=!1}),B(f);else{var l=c.filter('[data-id="'+d+'"]');E(h,l);F(d,function(){A=
!1});s=d;B(s)}},E=function(b,c){b.animate({opacity:0},{duration:300,easing:"linear",complete:function(){c.animate({opacity:1},{easing:"linear"})}})},F=function(c,d){A=!0;b.animate({"margin-left":-k*c},{duration:1E3,easing:"swing",complete:d})},G=function(){window.clearTimeout(l);v&&z($('.landing-featured-user[data-id="'+s+'"]'))};$(".slideshow-arrow").click(function(b){b.preventDefault();if(A)return!1;G();b="slideshowNext"===$(this).attr("id")?s+1:s-1;D(b);l=window.setTimeout(M,2E4)});var I=function(b){b.preventDefault();
if(A)return!1;G();b=parseInt($(this).parent().attr("data-id"));D(b);l=window.setTimeout(M,2E4)},M=function(){D(s+1);l=window.setTimeout(M,1E4)},O=function(b){v=!0;window.clearTimeout(l);var c=0;b.children().each(function(){c+=$(this).outerHeight()});b.children(".landing-board-fade").animate({bottom:"-800px",opacity:0});d.animate({height:c});$(".show-board-button").hide();$(".hide-board-button").show()},z=function(b){v=!1;b.children(".landing-board-fade").animate({bottom:"0px",opacity:1});d.animate({height:h});
$(".hide-board-button").hide();$(".show-board-button").show()};$(".show-board-button").click(function(b){b.preventDefault();O($('.landing-featured-user[data-id="'+s+'"]'))});$(".hide-board-button").click(function(b){b.preventDefault();z($('.landing-featured-user[data-id="'+s+'"]'));l=window.setTimeout(M,1E3)});C();(function(){e=c.first().clone().appendTo(b);g=c.last().clone().prependTo(b);for(var d=0;d<f;d++)$(c[d]).attr("data-id",d+1),$("#slideshowNav").append('<li data-id="'+(d+1)+'"><a href="">&bull;</a></li>');
$("#slideshowNav a").click(I);$("#landingFeaturedUsers li").filter('[data-id!="'+s+'"]').css({opacity:0})})();(function(){$("#surface").click(function(b){w.isVisible&&w.hide()})})();B(s);l=window.setTimeout(M,1E4);(function(){var b=Ii[Math.floor(10*Math.random())];$("#landingTwitterQuotes blockquote").html(b.tweet);$("#landingTwitterQuotes img").attr("src",b.avatar);$("#landingTwitterQuotes .quote-attribution").html(b.username);$("#landingTwitterQuotes .time").html(b.timestamp);$("#landingTwitterQuotes .tweet-url").attr("href",
b.url)})();$(document).on("click",".js-first-sign-up-landing-boards",function(b){n("Landing","Clicked on first signup button","Boards")});$(document).on("click",".js-first-sign-up-landing-video",function(b){n("Landing","Clicked on first signup button","Video")});$(document).on("click","#landingSignUp .landing-signup-button",function(b){n("Landing","Clicked on second signup button")});$(document).on("click",".slideshow-arrow",function(b){n("Landing","Clicked on slideshow arrows")});$(document).on("click",
"#slideshowNav a",function(b){n("Landing","Clicked on slideshow dots")});$(document).on("click",".show-board-button",function(b){n("Landing","Clicked on featured board")});$(document).on("click",".js-landing-learn-more",function(b){n("Landing","Learn more")});$(document).on("click",".js-landing-app-android",function(b){$(b.target).hasClass("js-text")?n("Landing","Android App","Text"):n("Landing","Android App","Image")});$(document).on("click",".js-landing-app-iphone",function(b){$(b.target).hasClass("js-text")?
n("Landing","iPhone App","Text"):n("Landing","iPhone App","Image")});$(document).on("click",".js-landing-app-ipad",function(b){$(b.target).hasClass("js-text")?n("Landing","iPad App","Text"):n("Landing","iPad App","Image")});$(document).on("click",".js-landing-app-win8",function(b){$(b.target).hasClass("js-text")?n("Landing","Windows 8 App","Text"):n("Landing","Windows 8 App","Image")});$(document).on("click",".js-landing-app-web",function(b){$(b.target).hasClass("js-text")?n("Landing","Web App","Text"):
n("Landing","Web App","Image")})}},wi;wi=function(){var c;c=$.cookie("referrer");if(null!=c)return $.get("/1/members/"+c,{fields:"username,fullName,initials,avatarHash"},function(b){var c;c=$("<div>").addClass("header-banner header-banner-reco");c.html('<span class="js-avatar"></span><span class="js-fullname"></span> recommends Trello!');c.find(".js-fullname").text(b.fullName);b.avatarHash&&(b=$("<img>").attr("src",""+avatarDomain+"/"+b.avatarHash+"/50.png"),c.find(".js-avatar").append(b));return $(function(){return $("#header").after(c)})})}}})();
(function(){var aa=encodeURIComponent,f=window,ba=setTimeout,n=Math;function fa(a,b){return a.name=b}function Pc(a,b){return a.href=b}
var p="push",h="hash",s="test",ha="slice",Qc="replace",q="data",r="cookie",Cc="charAt",t="indexOf",m="match",ia="defaultValue",xc="send",ja="port",u="createElement",id="setAttribute",v="name",da="getTime",x="host",y="length",z="prototype",la="clientWidth",A="split",B="location",ra="hasOwnProperty",ma="hostname",ga="search",jd="target",C="call",E="protocol",na="clientHeight",Ab="href",F="substring",kd="action",G="apply",oa="navigator",Ub="parentNode",H="join",I="toLowerCase";var pa=new function(){var a=[];this.set=function(b){a[b]=!0};this.M=function(){for(var b=[],c=0;c<a[y];c++)a[c]&&(b[n.floor(c/6)]=b[n.floor(c/6)]^1<<c%6);for(c=0;c<b[y];c++)b[c]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[Cc](b[c]||0);return b[H]("")+"~"}};function J(a){pa.set(a)};function K(a){return"function"==typeof a}function vd(a){return"[object Array]"==Object[z].toString[C](Object(a))}function qa(a){return void 0!=a&&-1<(a.constructor+"")[t]("String")}function ea(a,b){return 0==a[t](b)}function Lc(a){return a?a[Qc](/^[\s\xa0]+|[\s\xa0]+$/g,""):""}function Ca(a){var b=M[u]("img");b.width=1;b.height=1;b.src=a;return b}function L(){}function sa(a){if(aa instanceof Function)return aa(a);J(28);return a}function ka(a){return sa(a)[Qc](/\(/g,"%28")[Qc](/\)/g,"%29")}
var ta=function(a,b,c,d){try{a.addEventListener?a.addEventListener(b,c,!!d):a.attachEvent&&a.attachEvent("on"+b,c)}catch(e){J(27)}},ua=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)};function vc(a,b){if(a){var c=M[u]("script");c.type="text/javascript";c.async=!0;c.src=a;c.id=b;var d=M.getElementsByTagName("script")[0];d[Ub].insertBefore(c,d)}}function D(){return Ba||"https:"==M[B][E]?"https:":"http:"}
function eb(){var a=""+M[B][ma];return 0==a[t]("www.")?a[F](4):a}function va(a){var b=M.referrer;if(/^https?:\/\//i[s](b)){if(a)return b;a="//"+M[B][ma];var c=b[t](a);if(5==c||6==c)if(a=b[Cc](c+a[y]),"/"==a||"?"==a||""==a||":"==a)return;return b}}function wa(a,b){if(1==b[y]&&null!=b[0]&&"object"===typeof b[0])return b[0];for(var c={},d=n.min(a[y]+1,b[y]),e=0;e<d;e++)if("object"===typeof b[e]){for(var g in b[e])b[e][ra](g)&&(c[g]=b[e][g]);break}else e<a[y]&&(c[a[e]]=b[e]);return c};var N=function(){this.keys=[];this.w={};this.m={}};N[z].set=function(a,b,c){this.keys[p](a);c?this.m[":"+a]=b:this.w[":"+a]=b};N[z].get=function(a){return this.m[ra](":"+a)?this.m[":"+a]:this.w[":"+a]};N[z].map=function(a){for(var b=0;b<this.keys[y];b++){var c=this.keys[b],d=this.get(c);d&&a(c,d)}};var O=f,M=document,xa=function(a){var b=O._gaUserPrefs;if(b&&b.ioo&&b.ioo()||a&&!0===O["ga-disable-"+a])return!0;try{var c=O.external;if(c&&c._gaUserPrefs&&"oo"==c._gaUserPrefs)return!0}catch(d){}return!1},fb=function(a){ba(a,100)},ya=function(a){var b=[],c=M[r][A](";");a=new RegExp("^\\s*"+a+"=\\s*(.*?)\\s*$");for(var d=0;d<c[y];d++){var e=c[d][m](a);e&&b[p](e[1])}return b},zc=function(a,b,c,d,e,g){e=xa(e)?!1:Aa[s](M[B][ma])||"/"==c&&za[s](d)?!1:!0;if(!e)return!1;b&&1200<b[y]&&(b=b[F](0,1200),J(24));
c=a+"="+b+"; path="+c+"; ";g&&(c+="expires="+(new Date((new Date)[da]()+g)).toGMTString()+"; ");d&&"none"!=d&&(c+="domain="+d+";");d=M[r];M.cookie=c;if(!(d=d!=M[r]))t:{a=ya(a);for(d=0;d<a[y];d++)if(b==a[d]){d=!0;break t}d=!1}return d},za=new RegExp(/^(www\.)?google(\.com?)?(\.[a-z]{2})?$/),Aa=new RegExp(/(^|\.)doubleclick\.net$/i),Mc=function(){for(var a=O[oa],a=a.appName+a.version+a.platform+a.userAgent+(M[r]?M[r]:"")+(M.referrer?M.referrer:""),b=a[y],c=O.history[y];0<c;)a+=c--^b++;return La(a)};var oc=function(){return D()+"//www.google-analytics.com"},Da=function(a){fa(this,"len");this.message=a+"-8192"},Ea=function(a){fa(this,"ff2post");this.message=a+"-2036"},Ga=function(a,b){b=b||L;if(2036>=a[y])wc(a,b);else if(8192>=a[y]){var c=b;if(0<=O[oa].userAgent[t]("Firefox")&&![].reduce)throw new Ea(a[y]);wd(a,c)||xd(a,c)||Fa(a,c)||c()}else throw new Da(a[y]);},wc=function(a,b){var c=Ca(oc()+"/collect?"+a);c.onload=c.onerror=function(){c.onload=null;c.onerror=null;b()}},xd=function(a,b){var c;
c=O.XDomainRequest;if(!c)return!1;c=new c;c.open("POST",oc()+"/collect");c.onerror=function(){b()};c.onload=b;c[xc](a);return!0},wd=function(a,b){var c=O.XMLHttpRequest;if(!c)return!1;var d=new c;if(!("withCredentials"in d))return!1;d.open("POST",oc()+"/collect",!0);d.withCredentials=!0;d.setRequestHeader("Content-Type","text/plain");d.onreadystatechange=function(){4==d.readyState&&(b(),d=null)};d[xc](a);return!0},Fa=function(a,b){if(!M.body)return fb(function(){Fa(a,b)}),!0;a=aa(a);try{var c=M[u]('<iframe name="'+
a+'"></iframe>')}catch(d){c=M[u]("iframe"),fa(c,a)}c.height="0";c.width="0";c.style.display="none";c.style.visibility="hidden";var e=M[B],e=oc()+"/analytics_iframe.html#"+aa(e[E]+"//"+e[x]+"/favicon.ico"),g=function(){c.src="";c[Ub]&&c[Ub].removeChild(c)};ta(O,"beforeunload",g);var ca=!1,l=0,k=function(){if(!ca){try{if(9<l||c.contentWindow[B][x]==M[B][x]){ca=!0;g();ua(O,"beforeunload",g);b();return}}catch(a){}l++;ba(k,200)}};ta(c,"load",k);M.body.appendChild(c);c.src=e;return!0};var Ha=function(){this.t=[]};Ha[z].add=function(a){this.t[p](a)};Ha[z].D=function(a){try{for(var b=0;b<this.t[y];b++){var c=a.get(this.t[b]);c&&K(c)&&c[C](O,a)}}catch(d){}b=a.get(Ia);b!=L&&K(b)&&(a.set(Ia,L,!0),ba(b,10))};function Ja(a){if(100!=a.get(Ka)&&La(P(a,Q))%1E4>=100*R(a,Ka))throw"abort";}function Ma(a){if(xa(P(a,Na)))throw"abort";}function Oa(){var a=M[B][E];if("http:"!=a&&"https:"!=a)throw"abort";}
function Pa(a){try{O.XMLHttpRequest&&"withCredentials"in new O.XMLHttpRequest?J(40):O.XDomainRequest&&J(41),O[oa].sendBeacon&&J(42)}catch(b){}a.set(Ac,R(a,Ac)+1);var c=[];Qa.map(function(b,e){if(e.p){var g=a.get(b);void 0!=g&&g!=e[ia]&&("boolean"==typeof g&&(g*=1),c[p](e.p+"="+sa(""+g)))}});c[p]("z="+Bd());a.set(Ra,c[H]("&"),!0)}function Sa(a){Ga(P(a,Ra),a.get(Ia));a.set(Ia,L,!0)}function Hc(a){var b=O.gaData;b&&(b.expId&&a.set(Nc,b.expId),b.expVar&&a.set(Oc,b.expVar))}
function cd(){if(O[oa]&&"preview"==O[oa].loadPurpose)throw"abort";}function yd(a){var b=O.gaDevIds;vd(b)&&0!=b[y]&&a.set("&did",b[H](","),!0)}function vb(a){if(!a.get(Na))throw"abort";};var hd=function(){return n.round(2147483647*n.random())},Bd=function(){try{var a=new Uint32Array(1);O.crypto.getRandomValues(a);return a[0]&2147483647}catch(b){return hd()}};function Ta(a){var b=R(a,Ua);500<=b&&J(15);var c=P(a,Va);if("transaction"!=c&&"item"!=c){var c=R(a,Wa),d=(new Date)[da](),e=R(a,Xa);0==e&&a.set(Xa,d);e=n.round(2*(d-e)/1E3);0<e&&(c=n.min(c+e,20),a.set(Xa,d));if(0>=c)throw"abort";a.set(Wa,--c)}a.set(Ua,++b)};var Ya=function(){this.data=new N},Qa=new N,Za=[];Ya[z].get=function(a){var b=$a(a),c=this[q].get(a);b&&void 0==c&&(c=K(b[ia])?b[ia]():b[ia]);return b&&b.n?b.n(this,a,c):c};var P=function(a,b){var c=a.get(b);return void 0==c?"":""+c},R=function(a,b){var c=a.get(b);return void 0==c||""===c?0:1*c};Ya[z].set=function(a,b,c){if(a)if("object"==typeof a)for(var d in a)a[ra](d)&&ab(this,d,a[d],c);else ab(this,a,b,c)};
var ab=function(a,b,c,d){if(void 0!=c)switch(b){case Na:wb[s](c)}var e=$a(b);e&&e.o?e.o(a,b,c,d):a[q].set(b,c,d)},bb=function(a,b,c,d,e){fa(this,a);this.p=b;this.n=d;this.o=e;this.defaultValue=c},$a=function(a){var b=Qa.get(a);if(!b)for(var c=0;c<Za[y];c++){var d=Za[c],e=d[0].exec(a);if(e){b=d[1](e);Qa.set(b[v],b);break}}return b},yc=function(a){var b;Qa.map(function(c,d){d.p==a&&(b=d)});return b&&b[v]},S=function(a,b,c,d,e){a=new bb(a,b,c,d,e);Qa.set(a[v],a);return a[v]},cb=function(a,b){Za[p]([new RegExp("^"+
a+"$"),b])},T=function(a,b,c){return S(a,b,c,void 0,db)},db=function(){};var gb=qa(f.GoogleAnalyticsObject)&&Lc(f.GoogleAnalyticsObject)||"ga",Ba=!1,hb=T("apiVersion","v"),ib=T("clientVersion","_v");S("anonymizeIp","aip");var jb=S("adSenseId","a"),Va=S("hitType","t"),Ia=S("hitCallback"),Ra=S("hitPayload");S("nonInteraction","ni");S("currencyCode","cu");S("sessionControl","sc","");S("queueTime","qt");var Ac=S("_s","_s");S("screenName","cd");var kb=S("location","dl",""),lb=S("referrer","dr"),mb=S("page","dp","");S("hostname","dh");
var nb=S("language","ul"),ob=S("encoding","de");S("title","dt",function(){return M.title||void 0});cb("contentGroup([0-9]+)",function(a){return new bb(a[0],"cg"+a[1])});var pb=S("screenColors","sd"),qb=S("screenResolution","sr"),rb=S("viewportSize","vp"),sb=S("javaEnabled","je"),tb=S("flashVersion","fl");S("campaignId","ci");S("campaignName","cn");S("campaignSource","cs");S("campaignMedium","cm");S("campaignKeyword","ck");S("campaignContent","cc");
var ub=S("eventCategory","ec"),xb=S("eventAction","ea"),yb=S("eventLabel","el"),zb=S("eventValue","ev"),Bb=S("socialNetwork","sn"),Cb=S("socialAction","sa"),Db=S("socialTarget","st"),Eb=S("l1","plt"),Fb=S("l2","pdt"),Gb=S("l3","dns"),Hb=S("l4","rrt"),Ib=S("l5","srt"),Jb=S("l6","tcp"),Kb=S("l7","dit"),Lb=S("l8","clt"),Mb=S("timingCategory","utc"),Nb=S("timingVar","utv"),Ob=S("timingLabel","utl"),Pb=S("timingValue","utt");S("appName","an");S("appVersion","av","");S("appId","aid","");
S("appInstallerId","aiid","");S("exDescription","exd");S("exFatal","exf");var Nc=S("expId","xid"),Oc=S("expVar","xvar"),Rc=S("_utma","_utma"),Sc=S("_utmz","_utmz"),Tc=S("_utmht","_utmht"),Ua=S("_hc",void 0,0),Xa=S("_ti",void 0,0),Wa=S("_to",void 0,20);cb("dimension([0-9]+)",function(a){return new bb(a[0],"cd"+a[1])});cb("metric([0-9]+)",function(a){return new bb(a[0],"cm"+a[1])});S("linkerParam",void 0,void 0,Bc,db);var ld=S("usage","_u",void 0,function(){return pa.M()},db);
S("forceSSL",void 0,void 0,function(){return Ba},function(a,b,c){J(34);Ba=!!c});var ed=S("_j1","jid");S("_j2","gjid");cb("\\&(.*)",function(a){var b=new bb(a[0],a[1]),c=yc(a[0][F](1));c&&(b.n=function(a){return a.get(c)},b.o=function(a,b,g,ca){a.set(c,g,ca)},b.p=void 0);return b});
var Qb=T("_oot"),dd=S("previewTask"),Rb=S("checkProtocolTask"),md=S("validationTask"),Sb=S("checkStorageTask"),Uc=S("historyImportTask"),Tb=S("samplerTask"),Vb=T("_rlt"),Wb=S("buildHitTask"),Xb=S("sendHitTask"),Vc=S("ceTask"),zd=S("devIdTask"),Cd=S("timingTask"),V=T("name"),Q=T("clientId","cid"),Ad=S("userId","uid"),Na=T("trackingId","tid"),U=T("cookieName",void 0,"_ga"),W=T("cookieDomain"),Yb=T("cookiePath",void 0,"/"),Zb=T("cookieExpires",void 0,63072E3),$b=T("legacyCookieDomain"),Wc=T("legacyHistoryImport",
void 0,!0),ac=T("storage",void 0,"cookie"),bc=T("allowLinker",void 0,!1),cc=T("allowAnchor",void 0,!0),Ka=T("sampleRate","sf",100),dc=T("siteSpeedSampleRate",void 0,1),ec=T("alwaysSendReferrer",void 0,!1);function X(a,b,c,d){b[a]=function(){try{return d&&J(d),c[G](this,arguments)}catch(b){var g=b&&b[v];if(!(1<=100*n.random()||xa("?"))){var ca=["t=error","_e=exc","_v=j23","sr=1"];a&&ca[p]("_f="+a);g&&ca[p]("_m="+sa(g[F](0,100)));ca[p]("aip=1");ca[p]("z="+hd());Ga(ca[H]("&"))}throw b;}}};var Ed=function(a){var b=Dd;if(b.fa&&b.$)return 0;b.$=!0;if(0==b.V)return 0;void 0===a&&(a=Bd());return 0==a%b.V?n.floor(a/b.V)%b.ea+1:0};function fc(){var a,b,c;if((c=(c=O[oa])?c.plugins:null)&&c[y])for(var d=0;d<c[y]&&!b;d++){var e=c[d];-1<e[v][t]("Shockwave Flash")&&(b=e.description)}if(!b)try{a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),b=a.GetVariable("$version")}catch(g){}if(!b)try{a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),b="WIN 6,0,21,0",a.AllowScriptAccess="always",b=a.GetVariable("$version")}catch(ca){}if(!b)try{a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),b=a.GetVariable("$version")}catch(l){}b&&
(a=b[m](/[\d]+/g))&&3<=a[y]&&(b=a[0]+"."+a[1]+" r"+a[2]);return b||void 0};var gc=function(a,b){var c=n.min(R(a,dc),100);if(!(La(P(a,Q))%100>=c)&&(c={},Ec(c)||Fc(c))){var d=c[Eb];void 0==d||Infinity==d||isNaN(d)||(0<d?(Y(c,Gb),Y(c,Jb),Y(c,Ib),Y(c,Fb),Y(c,Hb),Y(c,Kb),Y(c,Lb),b(c)):ta(O,"load",function(){gc(a,b)},!1))}},Ec=function(a){var b=O.performance||O.webkitPerformance,b=b&&b.timing;if(!b)return!1;var c=b.navigationStart;if(0==c)return!1;a[Eb]=b.loadEventStart-c;a[Gb]=b.domainLookupEnd-b.domainLookupStart;a[Jb]=b.connectEnd-b.connectStart;a[Ib]=b.responseStart-b.requestStart;
a[Fb]=b.responseEnd-b.responseStart;a[Hb]=b.fetchStart-c;a[Kb]=b.domInteractive-c;a[Lb]=b.domContentLoadedEventStart-c;return!0},Fc=function(a){if(O.top!=O)return!1;var b=O.external,c=b&&b.onloadT;b&&!b.isValidLoadTime&&(c=void 0);2147483648<c&&(c=void 0);0<c&&b.setPageReadyTime();if(void 0==c)return!1;a[Eb]=c;return!0},Y=function(a,b){var c=a[b];if(isNaN(c)||Infinity==c||0>c)a[b]=void 0},Fd=function(a){return function(b){"pageview"!=b.get(Va)||a.I||(a.I=!0,gc(b,function(b){a[xc]("timing",b)}))}};var hc=!1,mc=function(a){if("cookie"==P(a,ac)){var b=P(a,U),c=nd(a),d=kc(P(a,Yb)),e=lc(P(a,W)),g=1E3*R(a,Zb),ca=P(a,Na);if("auto"!=e)zc(b,c,d,e,ca,g)&&(hc=!0);else{J(32);var l;t:{c=[];e=eb()[A](".");if(4==e[y]&&(l=e[e[y]-1],parseInt(l,10)==l)){l=["none"];break t}for(l=e[y]-2;0<=l;l--)c[p](e[ha](l)[H]("."));c[p]("none");l=c}for(var k=0;k<l[y];k++)if(e=l[k],a[q].set(W,e),c=nd(a),zc(b,c,d,e,ca,g)){1==ic(e)&&J(36);"none"==e&&J(37);hc=!0;return}a[q].set(W,"auto")}}},nc=function(a){if("cookie"==P(a,ac)&&
!hc&&(mc(a),!hc))throw"abort";},Yc=function(a){if(a.get(Wc)){var b=P(a,W),c=P(a,$b)||eb(),d=Xc("__utma",c,b);d&&(J(19),a.set(Tc,(new Date)[da](),!0),a.set(Rc,d.R),(b=Xc("__utmz",c,b))&&d[h]==b[h]&&a.set(Sc,b.R))}},nd=function(a){var b=ka(P(a,Q)),c=ic(P(a,W));a=jc(P(a,Yb));1<a&&(c+="-"+a);return["GA1",c,b][H](".")},Gc=function(a,b,c){for(var d=[],e=[],g,ca=0;ca<a[y];ca++){var l=a[ca];if(l.r[c]==b)d[p](l);else void 0==g||l.r[c]<g?(e=[l],g=l.r[c]):l.r[c]==g&&e[p](l)}return 0<d[y]?d:e},lc=function(a){return 0==
a[t](".")?a.substr(1):a},ic=function(a){return lc(a)[A](".")[y]},kc=function(a){if(!a)return"/";1<a[y]&&a.lastIndexOf("/")==a[y]-1&&(a=a.substr(0,a[y]-1));0!=a[t]("/")&&(a="/"+a);return a},jc=function(a){a=kc(a);return"/"==a?1:a[A]("/")[y]};function Xc(a,b,c){"none"==b&&(b="");var d=[],e=ya(a);a="__utma"==a?6:2;for(var g=0;g<e[y];g++){var ca=(""+e[g])[A](".");ca[y]>=a&&d[p]({hash:ca[0],R:e[g],O:ca})}return 0==d[y]?void 0:1==d[y]?d[0]:Zc(b,d)||Zc(c,d)||Zc(null,d)||d[0]}function Zc(a,b){var c,d;null==a?c=d=1:(c=La(a),d=La(ea(a,".")?a[F](1):"."+a));for(var e=0;e<b[y];e++)if(b[e][h]==c||b[e][h]==d)return b[e]};var od=new RegExp(/^https?:\/\/([^\/:]+)/),pd=/(.*)([?&#])(?:_ga=[^&#]*)(?:&?)(.*)/;function Bc(a){a=a.get(Q);var b=Ic(a,0);return"_ga=1."+sa(b+"."+a)}function Ic(a,b){for(var c=new Date,d=O[oa],e=d.plugins||[],c=[a,d.userAgent,c.getTimezoneOffset(),c.getYear(),c.getDate(),c.getHours(),c.getMinutes()+b],d=0;d<e[y];++d)c[p](e[d].description);return La(c[H]("."))}var Dc=function(a){J(48);this.target=a;this.T=!1};
Dc[z].Q=function(a,b){if(a.tagName){if("a"==a.tagName[I]()){a[Ab]&&Pc(a,qd(this,a[Ab],b));return}if("form"==a.tagName[I]())return rd(this,a)}if("string"==typeof a)return qd(this,a,b)};
var qd=function(a,b,c){var d=pd.exec(b);d&&3<=d[y]&&(b=d[1]+(d[3]?d[2]+d[3]:""));a=a[jd].get("linkerParam");var e=b[t]("?"),d=b[t]("#");c?b+=(-1==d?"#":"&")+a:(c=-1==e?"?":"&",b=-1==d?b+(c+a):b[F](0,d)+c+a+b[F](d));return b},rd=function(a,b){if(b&&b[kd]){var c=a[jd].get("linkerParam")[A]("=")[1];if("get"==b.method[I]()){for(var d=b.childNodes||[],e=0;e<d[y];e++)if("_ga"==d[e][v]){d[e][id]("value",c);return}d=M[u]("input");d[id]("type","hidden");d[id]("name","_ga");d[id]("value",c);b.appendChild(d)}else"post"==
b.method[I]()&&(b.action=qd(a,b[kd]))}};
Dc[z].S=function(a,b,c){function d(c){try{c=c||O.event;var d;t:{var g=c[jd]||c.srcElement;for(c=100;g&&0<c;){if(g[Ab]&&g.nodeName[m](/^a(?:rea)?$/i)){d=g;break t}g=g[Ub];c--}d={}}("http:"==d[E]||"https:"==d[E])&&sd(a,d[ma]||"")&&d[Ab]&&Pc(d,qd(e,d[Ab],b))}catch(w){J(26)}}var e=this;this.T||(this.T=!0,ta(M,"mousedown",d,!1),ta(M,"touchstart",d,!1),ta(M,"keyup",d,!1));if(c){c=function(b){b=b||O.event;if((b=b[jd]||b.srcElement)&&b[kd]){var c=b[kd][m](od);c&&sd(a,c[1])&&rd(e,b)}};for(var g=0;g<M.forms[y];g++)ta(M.forms[g],
"submit",c)}};function sd(a,b){if(b==M[B][ma])return!1;for(var c=0;c<a[y];c++)if(a[c]instanceof RegExp){if(a[c][s](b))return!0}else if(0<=b[t](a[c]))return!0;return!1};var Jd=function(a,b,c){var d=this;this.U=ed;this.aa=b;this.Y=c||Hd(a);var e=a.get(Wb);a.set(Wb,function(a){a.get(d.U)||("1"==ya(d.Y)[0]?a.set(d.U,"",!0):a.set(d.U,""+hd(),!0));var b=e(a);a.get(d.U)&&zc(d.Y,"1",a.get(Yb),a.get(W),a.get(Na),6E5);return b});var g=a.get(Xb);a.set(Xb,function(a){var b=g(a);Id(d,a);return b})},Id=function(a,b){if(b.get(a.U)){var c=new N,d=function(a){c.set($a(a).p,b.get(a))};d(hb);d(ib);d(Na);d(Q);d(a.U);d(ld);var e=a.aa;"/"===e[Cc](0)&&(e=D()+e);c.map(function(a,b){e+=
sa(a)+"="+sa(""+b)+"&"});e+="z="+hd();Ca(e);b.set(a.U,"",!0)}},Hd=function(a){return a.get(V)&&"t0"!=a.get(V)?"_dc_"+ka(a.get(V)):"_dc"};var Dd,Gd;Dd=new function(){this.V=10;this.fa=void 0;this.$=!1;this.ea=1};Gd=!1;var fd=function(a,b){var c=a.b;if(!c.get("dcLoaded")){J(29);b=b||{};var d;b[U]&&(d=ka(b[U]));var e="//stats.g.doubleclick.net/collect?t=dc&aip=1&";if("https:"!=M[B][E]&&!Ba){var g=La(c.get(Q));if(Gd||Ed(g))e="https:"+e,J(33),Gd=!0}new Jd(c,e,d);c.set("dcLoaded",!0)}};var Kd=function(){J(38)};function $c(){var a=O.gaGlobal=O.gaGlobal||{};return a.hid=a.hid||hd()};var ad,bd=function(a,b,c){if(!ad){var d;d=M[B][h];var e=O[v],g=/^#?gaso=([^&]*)/;if(e=(d=(d=d&&d[m](g)||e&&e[m](g))?d[1]:ya("GASO")[0]||"")&&d[m](/^(?:!([-0-9a-z.]{1,40})!)?([-.\w]{10,1200})$/i))zc("GASO",""+d,c,b,a,0),f._udo||(f._udo=b),f._utcp||(f._utcp=c),a=e[1],vc("https://www.google.com/analytics/web/inpage/pub/inpage.js?"+(a?"prefix="+a+"&":"")+hd(),"_gasojs");ad=!0}};var wb=/^(UA|YT|MO|GP)-(\d+)-(\d+)$/,pc=function(a){function b(a,b){d.b[q].set(a,b)}function c(a,c){b(a,c);d.filters.add(a)}var d=this;this.b=new Ya;this.filters=new Ha;b(V,a[V]);b(Na,Lc(a[Na]));b(U,a[U]);b(W,a[W]||eb());b(Yb,a[Yb]);b(Zb,a[Zb]);b($b,a[$b]);b(Wc,a[Wc]);b(bc,a[bc]);b(cc,a[cc]);b(Ka,a[Ka]);b(dc,a[dc]);b(ec,a[ec]);b(ac,a[ac]);b(Ad,a[Ad]);b(hb,1);b(ib,"j23");c(Qb,Ma);c(dd,cd);c(Rb,Oa);c(md,vb);c(Sb,nc);c(Uc,Yc);c(Tb,Ja);c(Vb,Ta);c(Vc,Hc);c(zd,yd);c(Wb,Pa);c(Xb,Sa);c(Cd,Fd(this));Jc(this.b,
a[Q]);Kc(this.b);this.b.set(jb,$c());bd(this.b.get(Na),this.b.get(W),this.b.get(Yb))},Jc=function(a,b){if("cookie"==P(a,ac)){hc=!1;var c;i:{var d=ya(P(a,U));if(d&&!(1>d[y])){c=[];for(var e=0;e<d[y];e++){var g;g=d[e][A](".");var ca=g.shift();("GA1"==ca||"1"==ca)&&1<g[y]?(ca=g.shift()[A]("-"),1==ca[y]&&(ca[1]="1"),ca[0]*=1,ca[1]*=1,g={r:ca,s:g[H](".")}):g=void 0;g&&c[p](g)}if(1==c[y]){J(13);c=c[0].s;break i}if(0==c[y])J(12);else{J(14);d=ic(P(a,W));c=Gc(c,d,0);if(1==c[y]){c=c[0].s;break i}d=jc(P(a,Yb));
c=Gc(c,d,1);c=c[0]&&c[0].s;break i}}c=void 0}c||(c=P(a,W),d=P(a,$b)||eb(),c=Xc("__utma",d,c),(c=void 0==c?void 0:c.O[1]+"."+c.O[2])&&J(10));c&&(a[q].set(Q,c),hc=!0)}c=a.get(cc);if(e=(c=M[B][c?"href":"search"][m]("(?:&|#|\\?)"+sa("_ga")[Qc](/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")+"=([^&#]*)"))&&2==c[y]?c[1]:"")a.get(bc)?(c=e[t]("."),-1==c?J(22):(d=e[F](c+1),"1"!=e[F](0,c)?J(22):(c=d[t]("."),-1==c?J(22):(e=d[F](0,c),c=d[F](c+1),e!=Ic(c,0)&&e!=Ic(c,-1)&&e!=Ic(c,-2)?J(23):(J(11),a[q].set(Q,c)))))):J(21);
b&&(J(9),a[q].set(Q,sa(b)));a.get(Q)||((c=(c=O.gaGlobal&&O.gaGlobal.vid)&&-1!=c[ga](/^(?:utma\.)?\d+\.\d+$/)?c:void 0)?(J(17),a[q].set(Q,c)):(J(8),a[q].set(Q,[hd()^Mc()&2147483647,n.round((new Date)[da]()/1E3)][H]("."))));mc(a)},Kc=function(a){var b=O[oa],c=O.screen,d=M[B];a.set(lb,va(a.get(ec)));if(d){var e=d.pathname||"";"/"!=e[Cc](0)&&(J(31),e="/"+e);a.set(kb,d[E]+"//"+d[ma]+e+d[ga])}c&&a.set(qb,c.width+"x"+c.height);c&&a.set(pb,c.colorDepth+"-bit");var c=M.documentElement,g=(e=M.body)&&e[la]&&
e[na],ca=[];c&&c[la]&&c[na]&&("CSS1Compat"===M.compatMode||!g)?ca=[c[la],c[na]]:g&&(ca=[e[la],e[na]]);c=0>=ca[0]||0>=ca[1]?"":ca[H]("x");a.set(rb,c);a.set(tb,fc());a.set(ob,M.characterSet||M.charset);a.set(sb,b&&"function"===typeof b.javaEnabled&&b.javaEnabled()||!1);a.set(nb,(b&&(b.language||b.browserLanguage)||"")[I]());if(d&&a.get(cc)&&(b=M[B][h])){b=b[A](/[?&#]+/);d=[];for(c=0;c<b[y];++c)(ea(b[c],"utm_id")||ea(b[c],"utm_campaign")||ea(b[c],"utm_source")||ea(b[c],"utm_medium")||ea(b[c],"utm_term")||
ea(b[c],"utm_content")||ea(b[c],"gclid")||ea(b[c],"dclid")||ea(b[c],"gclsrc"))&&d[p](b[c]);0<d[y]&&(b="#"+d[H]("&"),a.set(kb,a.get(kb)+b))}};pc[z].get=function(a){return this.b.get(a)};pc[z].set=function(a,b){this.b.set(a,b)};var qc={pageview:[mb],event:[ub,xb,yb,zb],social:[Bb,Cb,Db],timing:[Mb,Nb,Pb,Ob]};
pc[z].send=function(a){if(!(1>arguments[y])){var b,c;"string"===typeof arguments[0]?(b=arguments[0],c=[][ha][C](arguments,1)):(b=arguments[0]&&arguments[0][Va],c=arguments);b&&(c=wa(qc[b]||[],c),c[Va]=b,this.b.set(c,void 0,!0),this.filters.D(this.b),this.b[q].m={})}};var rc=function(a){if("prerender"==M.visibilityState)return!1;a();return!0};var td=/^(?:(\w+)\.)?(?:(\w+):)?(\w+)$/,sc=function(a){if(K(a[0]))this.u=a[0];else{var b=td.exec(a[0]);null!=b&&4==b[y]&&(this.c=b[1]||"t0",this.e=b[2]||"",this.d=b[3],this.a=[][ha][C](a,1),this.e||(this.A="create"==this.d,this.i="require"==this.d,this.g="provide"==this.d,this.ba="remove"==this.d),this.i&&(3<=this.a[y]?(this.X=this.a[1],this.W=this.a[2]):this.a[1]&&(qa(this.a[1])?this.X=this.a[1]:this.W=this.a[1])));b=a[1];a=a[2];if(!this.d)throw"abort";if(this.i&&(!qa(b)||""==b))throw"abort";if(this.g&&
(!qa(b)||""==b||!K(a)))throw"abort";if(ud(this.c)||ud(this.e))throw"abort";if(this.g&&"t0"!=this.c)throw"abort";}};function ud(a){return 0<=a[t](".")||0<=a[t](":")};var Z={F:"/plugins/ua/",H:"plugins_",ga:function(){Z.f=[];Z.k=new N;Z.Z=new N;Z.ca={ec:45,ecommerce:46,linkid:47}}};Z.ga();Z.B=function(a,b,c){b==$?J(35):b.get(V);var d=Z.k.get(a);if(!K(d))return!1;b[Z.H]=b[Z.H]||new N;if(b[Z.H].get(a))return!0;b[Z.H].set(a,new d(b,c||{}));return!0};
Z.da=function(a){var b=a.a[0];if(!K(Z.k.get(b))&&!Z.Z.get(b)&&(Z.ca[ra](b)&&J(Z.ca[b]),a=a.X,!a&&Z.ca[ra](b)?(J(39),a=b+".js"):J(43),a)){a&&0<=a[t]("/")||(a=D()+"//www.google-analytics.com"+Z.F+a);a=tc(a);var c=a[E],d=M[B][E];if(c="https:"==c||c==d?!0:"http:"!=c?!1:"http:"==d)c=tc(M[B][Ab]),a.G||0<=a.url[t]("?")||0<=a.path[t]("://")?c=!1:a[x]==c[x]&&a[ja]==c[ja]?c=!0:(c="http:"==a[E]?80:443,c="www.google-analytics.com"==a[x]&&(a[ja]||c)==c&&ea(a.path,"/plugins/")?!0:!1);c&&(vc(a.url),Z.Z.set(b,!0))}};
Z.C=function(a,b){Z.k.set(a,b)};Z.D=function(a){var b=Z.J[G](Z,arguments),b=Z.f.concat(b);for(Z.f=[];0<b[y]&&!Z.v(b[0])&&!(b.shift(),0<Z.f[y]););Z.f=Z.f.concat(b)};Z.J=function(a){for(var b=[],c=0;c<arguments[y];c++)try{var d=new sc(arguments[c]);d.g?Z.C(d.a[0],d.a[1]):(d.i&&Z.da(d),b[p](d))}catch(e){}return b};
Z.v=function(a){try{if(a.u)a.u[C](O,$.j("t0"));else{var b=a.c==gb?$:$.j(a.c);if(a.A)"t0"==a.c&&$.create[G]($,a.a);else if(a.ba)$.remove(a.c);else if(b)if(a.i){if(!Z.B(a.a[0],b,a.W))return!0}else a.e&&(b=b[Z.H].get(a.e)),b[a.d][G](b,a.a)}}catch(c){}};
function tc(a){function b(a){var b=(a[ma]||"")[A](":")[0][I](),c=(a[E]||"")[I](),c=1*a[ja]||("http:"==c?80:"https:"==c?443:"");a=a.pathname||"";ea(a,"/")||(a="/"+a);return[b,""+c,a]}var c=M[u]("a");Pc(c,M[B][Ab]);var d=(c[E]||"")[I](),e=b(c),g=c[ga]||"",ca=d+"//"+e[0]+(e[1]?":"+e[1]:"");ea(a,"//")?a=d+a:ea(a,"/")?a=ca+a:!a||ea(a,"?")?a=ca+e[2]+(a||g):0>a[A]("/")[0][t](":")&&(a=ca+e[2][F](0,e[2].lastIndexOf("/"))+"/"+a);Pc(c,a);d=b(c);return{protocol:(c[E]||"")[I](),host:d[0],port:d[1],path:d[2],G:c[ga]||
"",url:a||""}};var $=function(a){J(1);Z.D[G](Z,[arguments])};$.h={};$.P=[];$.L=0;$.answer=42;var uc=[Na,W,V];$.create=function(a){var b=wa(uc,[][ha][C](arguments));b[V]||(b[V]="t0");var c=""+b[V];if($.h[c])return $.h[c];b=new pc(b);$.h[c]=b;$.P[p](b);return b};$.remove=function(a){for(var b=0;b<$.P[y];b++)if($.P[b].get(V)==a){$.P.splice(b,1);$.h[a]=null;break}};$.j=function(a){return $.h[a]};$.K=function(){return $.P[ha](0)};
$.N=function(){"ga"!=gb&&J(49);var a=O[gb];if(!a||42!=a.answer){$.L=a&&a.l;$.loaded=!0;var b=O[gb]=$;X("create",b,b.create,3);X("remove",b,b.remove);X("getByName",b,b.j,5);X("getAll",b,b.K,6);b=pc[z];X("get",b,b.get,7);X("set",b,b.set,4);X("send",b,b[xc],2);b=Ya[z];X("get",b,b.get);X("set",b,b.set);(O.gaplugins=O.gaplugins||{}).Linker=Dc;b=Dc[z];Z.C("linker",Dc);X("decorate",b,b.Q,20);X("autoLink",b,b.S,25);Z.C("displayfeatures",fd);Z.C("adfeatures",Kd);a=a&&a.q;vd(a)?Z.D[G]($,a):J(50)}};
(function(){var a=$.N;if(!rc(a)){J(16);var b=!1,c=function(){!b&&rc(a)&&(b=!0,ua(M,"visibilitychange",c))};ta(M,"visibilitychange",c)}})();function La(a){var b=1,c=0,d;if(a)for(b=0,d=a[y]-1;0<=d;d--)c=a.charCodeAt(d),b=(b<<6&268435455)+c+(c<<14),c=b&266338304,b=0!=c?b^c>>21:b;return b};})(window);
var gapi=window.gapi=window.gapi||{};gapi._bs=new Date().getTime();(function(){var f=encodeURIComponent,g=window,k=decodeURIComponent,m="shift",n="replace",s="split",t="push",x="test",A="length",B="join";var C=g,D=document,aa=C.location,ba=function(){},ca=/\[native code\]/,F=function(a,b,c){return a[b]=a[b]||c},da=function(a){for(var b=0;b<this[A];b++)if(this[b]===a)return b;return-1},ea=function(a){a=a.sort();for(var b=[],c=void 0,d=0;d<a[A];d++){var e=a[d];e!=c&&b[t](e);c=e}return b},G=function(){var a;if((a=Object.create)&&ca[x](a))a=a(null);else{a={};for(var b in a)a[b]=void 0}return a},H=F(C,"gapi",{});var I;I=F(C,"___jsl",G());F(I,"I",0);F(I,"hel",10);var J=function(){var a=aa.href,b;if(I.dpo)b=I.h;else{b=I.h;var c=RegExp("([#].*&|[#])jsh=([^&#]*)","g"),d=RegExp("([?#].*&|[?#])jsh=([^&#]*)","g");if(a=a&&(c.exec(a)||d.exec(a)))try{b=k(a[2])}catch(e){}}return b},fa=function(a){var b=F(I,"PQ",[]);I.PQ=[];var c=b[A];if(0===c)a();else for(var d=0,e=function(){++d===c&&a()},h=0;h<c;h++)b[h](e)},K=function(a){return F(F(I,"H",G()),a,G())};var L=F(I,"perf",G()),M=F(L,"g",G()),ga=F(L,"i",G());F(L,"r",[]);G();G();var N=function(a,b,c){var d=L.r;"function"===typeof d?d(a,b,c):d[t]([a,b,c])},P=function(a,b,c){b&&0<b[A]&&(b=O(b),c&&0<c[A]&&(b+="___"+O(c)),28<b[A]&&(b=b.substr(0,28)+(b[A]-28)),c=b,b=F(ga,"_p",G()),F(b,c,G())[a]=(new Date).getTime(),N(a,"_p",c))},O=function(a){return a[B]("__")[n](/\./g,"_")[n](/\-/g,"_")[n](/\,/g,"_")};var R=G(),S=[],T=function(a){throw Error("Bad hint"+(a?": "+a:""));};S[t](["jsl",function(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b)){var c=a[b];"object"==typeof c?I[b]=F(I,b,[]).concat(c):F(I,b,c)}if(b=a.u)a=F(I,"us",[]),a[t](b),(b=/^https:(.*)$/.exec(b))&&a[t]("http:"+b[1])}]);var ha=/^(\/[a-zA-Z0-9_\-]+)+$/,ia=/^[a-zA-Z0-9\-_\.,!]+$/,ja=/^gapi\.loaded_[0-9]+$/,ka=/^[a-zA-Z0-9,._-]+$/,oa=function(a,b,c,d){var e=a[s](";"),h=R[e[m]()],l=null;h&&(l=h(e,b,c,d));if(b=l)b=l,c=b.match(la),d=b.match(ma),b=!!d&&1===d[A]&&na[x](b)&&!!c&&1===c[A];b||T(a);return l},qa=function(a,b,c,d){a=pa(a);ja[x](c)||T("invalid_callback");b=U(b);d=d&&d[A]?U(d):null;var e=function(a){return f(a)[n](/%2C/g,",")};return[f(a.d)[n](/%2C/g,",")[n](/%2F/g,"/"),"/k=",e(a.version),"/m=",e(b),d?"/exm="+e(d):
"","/rt=j/sv=1/d=1/ed=1",a.a?"/am="+e(a.a):"",a.b?"/rs="+e(a.b):"","/cb=",e(c)][B]("")},pa=function(a){"/"!==a.charAt(0)&&T("relative path");for(var b=a.substring(1)[s]("/"),c=[];b[A];){a=b[m]();if(!a[A]||0==a.indexOf("."))T("empty/relative directory");else if(0<a.indexOf("=")){b.unshift(a);break}c[t](a)}a={};for(var d=0,e=b[A];d<e;++d){var h=b[d][s]("="),l=k(h[0]),p=k(h[1]);2==h[A]&&l&&p&&(a[l]=a[l]||p)}b="/"+c[B]("/");ha[x](b)||T("invalid_prefix");c=V(a,"k",!0);d=V(a,"am");a=V(a,"rs");return{d:b,
version:c,a:d,b:a}},U=function(a){for(var b=[],c=0,d=a[A];c<d;++c){var e=a[c][n](/\./g,"_")[n](/-/g,"_");ka[x](e)&&b[t](e)}return b[B](",")},V=function(a,b,c){a=a[b];!a&&c&&T("missing: "+b);if(a){if(ia[x](a))return a;T("invalid: "+b)}return null},na=/^https?:\/\/[a-z0-9_.-]+\.google\.com(:\d+)?\/[a-zA-Z0-9_.,!=\-\/]+$/,ma=/\/cb=/g,la=/\/\//g,ra=function(){var a=J();if(!a)throw Error("Bad hint");return a};R.m=function(a,b,c,d){(a=a[0])||T("missing_hint");return"https://apis.google.com"+qa(a,b,c,d)};var W=decodeURI("%73cript"),X=function(a,b){for(var c=[],d=0;d<a[A];++d){var e=a[d];e&&0>da.call(b,e)&&c[t](e)}return c},sa=function(a){"loading"!=D.readyState?Y(a):D.write("<"+W+' src="'+encodeURI(a)+'"></'+W+">")},Y=function(a){var b=D.createElement(W);b.setAttribute("src",a);b.async="true";(a=D.getElementsByTagName(W)[0])?a.parentNode.insertBefore(b,a):(D.head||D.body||D.documentElement).appendChild(b)},ta=function(a,b){var c=b&&b._c;if(c)for(var d=0;d<S[A];d++){var e=S[d][0],h=S[d][1];h&&Object.prototype.hasOwnProperty.call(c,
e)&&h(c[e],a,b)}},ua=function(a,b){Z(function(){var c;c=b===J()?F(H,"_",G()):G();c=F(K(b),"_",c);a(c)})},va=function(a,b){var c=b||{};"function"==typeof b&&(c={},c.callback=b);ta(a,c);var d=a?a[s](":"):[],e=c.h||ra(),h=F(I,"ah",G());if(h["::"]&&d[A]){for(var l=[],p=null;p=d[m]();){var u=p[s]("."),u=h[p]||h[u[1]&&"ns:"+u[0]||""]||e,r=l[A]&&l[l[A]-1]||null,y=r;r&&r.hint==u||(y={hint:u,c:[]},l[t](y));y.c[t](p)}var z=l[A];if(1<z){var E=c.callback;E&&(c.callback=function(){0==--z&&E()})}for(;d=l[m]();)$(d.c,
c,d.hint)}else $(d||[],c,e)},$=function(a,b,c){a=ea(a)||[];var d=b.callback,e=b.config,h=b.timeout,l=b.ontimeout,p=null,u=!1;if(h&&!l||!h&&l)throw"Timeout requires both the timeout parameter and ontimeout parameter to be set";var r=F(K(c),"r",[]).sort(),y=F(K(c),"L",[]).sort(),z=[].concat(r),E=function(a,b){if(u)return 0;C.clearTimeout(p);y[t].apply(y,q);var d=((H||{}).config||{}).update;d?d(e):e&&F(I,"cu",[])[t](e);if(b){P("me0",a,z);try{ua(b,c)}finally{P("me1",a,z)}}return 1};0<h&&(p=C.setTimeout(function(){u=
!0;l()},h));var q=X(a,y);if(q[A]){var q=X(a,r),v=F(I,"CP",[]),w=v[A];v[w]=function(a){if(!a)return 0;P("ml1",q,z);var b=function(b){v[w]=null;E(q,a)&&fa(function(){d&&d();b()})},c=function(){var a=v[w+1];a&&a()};0<w&&v[w-1]?v[w]=function(){b(c)}:b(c)};if(q[A]){var Q="loaded_"+I.I++;H[Q]=function(a){v[w](a);H[Q]=null};a=oa(c,q,"gapi."+Q,r);r[t].apply(r,q);P("ml0",q,z);b.sync||C.___gapisync?sa(a):Y(a)}else v[w](ba)}else E(q)&&d&&d()};var Z=function(a){if(I.hee&&0<I.hel)try{return a()}catch(b){I.hel--,va("debug_error",function(){try{g.___jsl.hefn(b)}catch(a){throw b;}})}else return a()};H.load=function(a,b){return Z(function(){return va(a,b)})};M.bs0=g.gapi._bs||(new Date).getTime();N("bs0");M.bs1=(new Date).getTime();N("bs1");delete g.gapi._bs;})();
gapi.load("",{callback:window["gapi_onload"],_c:{"jsl":{"ci":{"llang":"en","client":{"headers":{"response":["Cache-Control","Content-Disposition","Content-Encoding","Content-Language","Content-Length","Content-MD5","Content-Range","Content-Type","Date","ETag","Expires","Last-Modified","Location","Pragma","Range","Server","Transfer-Encoding","WWW-Authenticate","X-Goog-Safety-Content-Type","X-Goog-Safety-Encoding","X-Goog-Upload-Chunk-Granularity","X-Goog-Upload-Control-URL","X-Goog-Upload-Size-Received","X-Goog-Upload-Status","X-Goog-Upload-URL","X-Goog-Diff-Download-Range","X-Goog-Hash","X-Server-Object-Version","X-Guploader-Customer","X-Guploader-Upload-Result","X-Guploader-Uploadid"],"request":["Accept","Accept-Language","Authorization","Cache-Control","Content-Disposition","Content-Encoding","Content-Language","Content-Length","Content-MD5","Content-Range","Content-Type","Date","GData-Version","Host","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Origin","OriginToken","Pragma","Range","Slug","Transfer-Encoding","X-ClientDetails","X-GData-Client","X-GData-Key","X-Goog-AuthUser","X-Goog-PageId","X-Goog-Encode-Response-If-Executable","X-Goog-Correlation-Id","X-Goog-Request-Info","X-Goog-Upload-Command","X-Goog-Upload-Content-Disposition","X-Goog-Upload-Content-Length","X-Goog-Upload-Content-Type","X-Goog-Upload-File-Name","X-Goog-Upload-Offset","X-Goog-Upload-Protocol","X-Goog-Visitor-Id","X-HTTP-Method-Override","X-JavaScript-User-Agent","X-Pan-Versionid","X-Origin","X-Referer","X-Upload-Content-Length","X-Upload-Content-Type","X-Use-HTTP-Status-Code-Override","X-YouTube-VVT","X-YouTube-Page-CL","X-YouTube-Page-Timestamp"]},"cors":false},"plus_layer":{"isEnabled":false},"enableMultilogin":true,"disableRealtimeCallback":false,"isLoggedIn":true,"iframes":{"additnow":{"methods":["launchurl"],"url":"https://apis.google.com/additnow/additnow.html?usegapi\u003d1"},"person":{"url":":socialhost:/:session_prefix:_/widget/render/person?usegapi\u003d1"},"visibility":{"params":{"url":""},"url":":socialhost:/:session_prefix:_/widget/render/visibility?usegapi\u003d1"},"plus_followers":{"params":{"url":""},"url":":socialhost:/_/im/_/widget/render/plus/followers?usegapi\u003d1"},"share":{"url":":socialhost:/:session_prefix::im_prefix:_/widget/render/share?usegapi\u003d1"},"signin":{"methods":["onauth"],"params":{"url":""},"url":":socialhost:/:session_prefix:_/widget/render/signin?usegapi\u003d1"},"commentcount":{"url":":socialhost:/:session_prefix:_/widget/render/commentcount?usegapi\u003d1"},"page":{"url":":socialhost:/:session_prefix:_/widget/render/page?usegapi\u003d1"},"hangout":{"url":"https://talkgadget.google.com/:session_prefix:talkgadget/_/widget"},"plus_circle":{"params":{"url":""},"url":":socialhost:/:session_prefix::se:_/widget/plus/circle?usegapi\u003d1"},"youtube":{"methods":["scroll","openwindow"],"params":{"location":["search","hash"]},"url":":socialhost:/:session_prefix:_/widget/render/youtube?usegapi\u003d1"},"zoomableimage":{"url":"https://ssl.gstatic.com/microscope/embed/"},"card":{"url":":socialhost:/:session_prefix:_/hovercard/card"},"evwidget":{"params":{"url":""},"url":":socialhost:/:session_prefix:_/events/widget?usegapi\u003d1"},"follow":{"url":":socialhost:/:session_prefix:_/widget/render/follow?usegapi\u003d1"},"shortlists":{"url":""},"plus":{"url":":socialhost:/:session_prefix:_/widget/render/badge?usegapi\u003d1"},"configurator":{"url":":socialhost:/:session_prefix:_/plusbuttonconfigurator?usegapi\u003d1"},":socialhost:":"https://apis.google.com","post":{"params":{"url":""},"url":":socialhost:/:session_prefix::im_prefix:_/widget/render/post?usegapi\u003d1"},"community":{"url":":socialhost:/:session_prefix:_/widget/render/community?usegapi\u003d1"},":gplus_url:":"https://plus.google.com","rbr_s":{"params":{"url":""},"url":":socialhost:/:session_prefix::se:_/widget/render/recobarsimplescroller"},"autocomplete":{"params":{"url":""},"url":":socialhost:/:session_prefix:_/widget/render/autocomplete"},"plus_share":{"params":{"url":""},"url":":socialhost:/:session_prefix::se:_/+1/sharebutton?plusShare\u003dtrue\u0026usegapi\u003d1"},":source:":"3p","blogger":{"methods":["scroll","openwindow"],"params":{"location":["search","hash"]},"url":":socialhost:/:session_prefix:_/widget/render/blogger?usegapi\u003d1"},"savetowallet":{"url":"https://clients5.google.com/s2w/o/savetowallet"},"rbr_i":{"params":{"url":""},"url":":socialhost:/:session_prefix::se:_/widget/render/recobarinvitation"},"appcirclepicker":{"url":":socialhost:/:session_prefix:_/widget/render/appcirclepicker"},":im_socialhost:":"https://plus.googleapis.com","savetodrive":{"methods":["save"],"url":"https://drive.google.com/savetodrivebutton?usegapi\u003d1"},":signuphost:":"https://plus.google.com","plusone":{"params":{"count":"","size":"","url":""},"url":":socialhost:/:session_prefix::se:_/+1/fastbutton?usegapi\u003d1"},"comments":{"methods":["scroll","openwindow"],"params":{"location":["search","hash"]},"url":":socialhost:/:session_prefix:_/widget/render/comments?usegapi\u003d1"},"ytsubscribe":{"url":"https://www.youtube.com/subscribe_embed?usegapi\u003d1"}},"isPlusUser":true,"debug":{"host":"https://apis.google.com","forceIm":false,"reportExceptionRate":0.05,"rethrowException":false},"enableContextualSignin":false,"enableSigninTooltip":false,"deviceType":"desktop","inline":{"css":1},"lexps":[102,99,97,79,109,45,17,117,115,81,127,123,122,61,30],"include_granted_scopes":true,"oauth-flow":{"usegapi":false,"disableOpt":true,"authUrl":"https://accounts.google.com/o/oauth2/auth","proxyUrl":"https://accounts.google.com/o/oauth2/postmessageRelay"},"report":{"apiRate":{"gapi\\.signin\\..*":0.05},"host":"https://apis.google.com","rate":0.001,"apis":["iframes\\..*","gadgets\\..*","gapi\\.appcirclepicker\\..*","gapi\\.auth\\..*","gapi\\.client\\..*"]},"csi":{"rate":0.01},"googleapis.config":{"auth":{"useFirstPartyAuthV2":true}}},"h":"m;/_/scs/apps-static/_/js/k\u003doz.gapi.en.gswXrEcOH5E.O/m\u003d__features__/am\u003dAQ/rt\u003dj/d\u003d1/t\u003dzcms/rs\u003dAItRSTPUKUAADgzNRkOS-GeSLjTh9F540g","u":"https://apis.google.com/js/api.js","hee":true,"fp":"2caf4b61adca19f9f1751cf3101bd59399c47f25","dpo":false},"fp":"2caf4b61adca19f9f1751cf3101bd59399c47f25","annotation":["interactivepost","recobar","autocomplete","profile"],"bimodal":["signin","share"]}});
window['___jsl'] = window['___jsl'] || {};(window['___jsl']['ci'] = (window['___jsl']['ci'] || [])).push({"rpc":{"commSwf":"//xpc.googleusercontent.com/gadgets/xpc.swf","passReferrer":"p2c:query","parentRelayUrl":"/rpc_relay.html"},"core.io":{"jsonProxyUrl":"//%host%/gadgets/makeRequest","proxyUrl":"//www.gmodules.com/gadgets/proxy/refresh=%refresh%&container=%container%%rewriteMime%&gadget=%gadget%/%rawurl%"}});window['___jsl']=window['___jsl']||{};(window['___jsl']['ci'] = (window['___jsl']['ci'] || [])).push({"rpc":{"commSwf":"//xpc.googleusercontent.com/gadgets/xpc.swf","passReferrer":"p2c:query","parentRelayUrl":"/rpc_relay.html"},"core.io":{"jsonProxyUrl":"//%host%/gadgets/makeRequest","proxyUrl":"//www.gmodules.com/gadgets/proxy/refresh=%refresh%&container=%container%%rewriteMime%&gadget=%gadget%/%rawurl%"}});
/* [start] feature=taming */
var safeJSON=window.safeJSON;
var tamings___=window.tamings___||[];
var bridge___;
var caja___=window.caja___;
var ___=window.___;;

/* [end] feature=taming */

/* [start] feature=gapi-globals */
var gapi=window.gapi||{};gapi.client=window.gapi&&window.gapi.client||{};
;
;

/* [end] feature=gapi-globals */

/* [start] feature=globals */
var gadgets=window.gadgets||{},shindig=window.shindig||{},osapi=window.osapi=window.osapi||{},google=window.google||{};
;
;

/* [end] feature=globals */

/* [start] feature=core.config.base */
window['___cfg'] = window['___cfg'] || window['___gcfg'];;
if(!window.gadgets["config"]){gadgets.config=function(){var f;
var h={};
var b={};
function c(j,l){for(var k in l){if(!l.hasOwnProperty(k)){continue
}if(typeof j[k]==="object"&&typeof l[k]==="object"){c(j[k],l[k])
}else{j[k]=l[k]
}}}function i(){var j=document.scripts||document.getElementsByTagName("script");
if(!j||j.length==0){return null
}var m;
if(f.u){for(var k=0;
!m&&k<j.length;
++k){var l=j[k];
if(l.src&&l.src.indexOf(f.u)==0){m=l
}}}if(!m){m=j[j.length-1]
}if(!m.src){return null
}return m
}function a(j){var k="";
if(j.nodeType==3||j.nodeType==4){k=j.nodeValue
}else{if(j.innerText){k=j.innerText
}else{if(j.innerHTML){k=j.innerHTML
}else{if(j.firstChild){var l=[];
for(var m=j.firstChild;
m;
m=m.nextSibling){l.push(a(m))
}k=l.join("")
}}}}return k
}function e(k){if(!k){return{}
}var j;
while(k.charCodeAt(k.length-1)==0){k=k.substring(0,k.length-1)
}try{j=(new Function("return ("+k+"\n)"))()
}catch(l){}if(typeof j==="object"){return j
}try{j=(new Function("return ({"+k+"\n})"))()
}catch(l){}return typeof j==="object"?j:{}
}function g(n){var p=window.___cfg;
if(p){c(n,p)
}var o=i();
if(!o){return
}var k=a(o);
var j=e(k);
if(f.f&&f.f.length==1){var m=f.f[0];
if(!j[m]){var l={};
l[f.f[0]]=j;
j=l
}}c(n,j)
}function d(o){for(var l in h){if(h.hasOwnProperty(l)){var n=h[l];
for(var m=0,k=n.length;
m<k;
++m){o(l,n[m])
}}}}return{register:function(l,k,j,m){var n=h[l];
if(!n){n=[];
h[l]=n
}n.push({validators:k||{},callback:j,callOnUpdate:m})
},get:function(j){if(j){return b[j]||{}
}return b
},init:function(k,j){f=window.___jsl||{};
c(b,k);
g(b);
var l=window.___config||{};
c(b,l);
d(function(q,p){var o=b[q];
if(o&&!j){var m=p.validators;
for(var n in m){if(m.hasOwnProperty(n)){if(!m[n](o[n])){throw new Error('Invalid config value "'+o[n]+'" for parameter "'+n+'" in component "'+q+'"')
}}}}if(p.callback){p.callback(b)
}})
},update:function(k,p){var o=(window.gapi&&window.gapi["config"]&&window.gapi["config"]["update"]);
if(!p&&o){o(k)
}var n=[];
d(function(q,j){if(k.hasOwnProperty(q)||(p&&b&&b[q])){if(j.callback&&j.callOnUpdate){n.push(j.callback)
}}});
b=p?{}:b||{};
c(b,k);
for(var m=0,l=n.length;
m<l;
++m){n[m](b)
}}}
}()
}else{gadgets.config=window.gadgets["config"];
gadgets.config.register=gadgets.config.register;
gadgets.config.get=gadgets.config.get;
gadgets.config.init=gadgets.config.init;
gadgets.config.update=gadgets.config.update
};;

/* [end] feature=core.config.base */

/* [start] feature=core.log */
gadgets.log=(function(){var e=1;
var a=2;
var f=3;
var c=4;
var d=function(i){b(e,i)
};
gadgets.warn=function(i){b(a,i)
};
gadgets.error=function(i){b(f,i)
};
gadgets.debug=function(i){};
gadgets.setLogLevel=function(i){h=i
};
function b(k,i){if(k<h||!g){return
}if(k===a&&g.warn){g.warn(i)
}else{if(k===f&&g.error){try{g.error(i)
}catch(j){}}else{if(g.log){g.log(i)
}}}}d.INFO=e;
d.WARNING=a;
d.NONE=c;
var h=e;
var g=window.console?window.console:window.opera?window.opera.postError:undefined;
return d
})();;
;

/* [end] feature=core.log */

/* [start] feature=core.config */
(function(){gadgets.config.EnumValidator=function(d){var c=[];
if(arguments.length>1){for(var b=0,a;
(a=arguments[b]);
++b){c.push(a)
}}else{c=d
}return function(f){for(var e=0,g;
(g=c[e]);
++e){if(f===c[e]){return true
}}return false
}
};
gadgets.config.RegExValidator=function(a){return function(b){return a.test(b)
}
};
gadgets.config.ExistsValidator=function(a){return typeof a!=="undefined"
};
gadgets.config.NonEmptyStringValidator=function(a){return typeof a==="string"&&a.length>0
};
gadgets.config.BooleanValidator=function(a){return typeof a==="boolean"
};
gadgets.config.LikeValidator=function(a){return function(c){for(var d in a){if(a.hasOwnProperty(d)){var b=a[d];
if(!b(c[d])){return false
}}}return true
}
}
})();;

/* [end] feature=core.config */

/* [start] feature=core.util.base */
gadgets.util=gadgets.util||{};
(function(){gadgets.util.makeClosure=function(d,f,e){var c=[];
for(var b=2,a=arguments.length;
b<a;
++b){c.push(arguments[b])
}return function(){var g=c.slice();
for(var k=0,h=arguments.length;
k<h;
++k){g.push(arguments[k])
}return f.apply(d,g)
}
};
gadgets.util.makeEnum=function(b){var c,a,d={};
for(c=0;
(a=b[c]);
++c){d[a]=a
}return d
}
})();;

/* [end] feature=core.util.base */

/* [start] feature=core.util.dom */
gadgets.util=gadgets.util||{};
(function(){var c="http://www.w3.org/1999/xhtml";
function b(f,e){var h=e||{};
for(var g in h){if(h.hasOwnProperty(g)){f[g]=h[g]
}}}function d(g,f){var e=["<",g];
var i=f||{};
for(var h in i){if(i.hasOwnProperty(h)){e.push(" ");
e.push(h);
e.push('="');
e.push(gadgets.util.escapeString(i[h]));
e.push('"')
}}e.push("></");
e.push(g);
e.push(">");
return e.join("")
}function a(f){var g="";
if(f.nodeType==3||f.nodeType==4){g=f.nodeValue
}else{if(f.innerText){g=f.innerText
}else{if(f.innerHTML){g=f.innerHTML
}else{if(f.firstChild){var e=[];
for(var h=f.firstChild;
h;
h=h.nextSibling){e.push(a(h))
}g=e.join("")
}}}}return g
}gadgets.util.createElement=function(f){var e;
if((!document.body)||document.body.namespaceURI){try{e=document.createElementNS(c,f)
}catch(g){}}return e||document.createElement(f)
};
gadgets.util.createIframeElement=function(g){var i=gadgets.util.createElement("iframe");
try{var e=d("iframe",g);
var f=gadgets.util.createElement(e);
if(f&&((!i)||((f.tagName==i.tagName)&&(f.namespaceURI==i.namespaceURI)))){i=f
}}catch(h){}b(i,g);
return i
};
gadgets.util.getBodyElement=function(){if(document.body){return document.body
}try{var f=document.getElementsByTagNameNS(c,"body");
if(f&&(f.length==1)){return f[0]
}}catch(e){}return document.documentElement||document
};
gadgets.util.getInnerText=function(e){return a(e)
}
})();;

/* [end] feature=core.util.dom */

/* [start] feature=core.util.event */
gadgets.util=gadgets.util||{};
(function(){gadgets.util.attachBrowserEvent=function(c,b,d,a){if(typeof c.addEventListener!="undefined"){c.addEventListener(b,d,a)
}else{if(typeof c.attachEvent!="undefined"){c.attachEvent("on"+b,d)
}else{gadgets.warn("cannot attachBrowserEvent: "+b)
}}};
gadgets.util.removeBrowserEvent=function(c,b,d,a){if(c.removeEventListener){c.removeEventListener(b,d,a)
}else{if(c.detachEvent){c.detachEvent("on"+b,d)
}else{gadgets.warn("cannot removeBrowserEvent: "+b)
}}}
})();;

/* [end] feature=core.util.event */

/* [start] feature=core.util.onload */
gadgets.util=gadgets.util||{};
(function(){var a=[];
gadgets.util.registerOnLoadHandler=function(b){a.push(b)
};
gadgets.util.runOnLoadHandlers=function(){for(var c=0,b=a.length;
c<b;
++c){a[c]()
}}
})();;

/* [end] feature=core.util.onload */

/* [start] feature=core.util.string */
gadgets.util=gadgets.util||{};
(function(){var a={0:false,10:true,13:true,34:true,39:true,60:true,62:true,92:true,8232:true,8233:true,65282:true,65287:true,65308:true,65310:true,65340:true};
function b(c,d){return String.fromCharCode(d)
}gadgets.util.escape=function(c,g){if(!c){return c
}else{if(typeof c==="string"){return gadgets.util.escapeString(c)
}else{if(typeof c==="Array"){for(var f=0,d=c.length;
f<d;
++f){c[f]=gadgets.util.escape(c[f])
}}else{if(typeof c==="object"&&g){var e={};
for(var h in c){if(c.hasOwnProperty(h)){e[gadgets.util.escapeString(h)]=gadgets.util.escape(c[h],true)
}}return e
}}}}return c
};
gadgets.util.escapeString=function(g){if(!g){return g
}var d=[],f,h;
for(var e=0,c=g.length;
e<c;
++e){f=g.charCodeAt(e);
h=a[f];
if(h===true){d.push("&#",f,";")
}else{if(h!==false){d.push(g.charAt(e))
}}}return d.join("")
};
gadgets.util.unescapeString=function(c){if(!c){return c
}return c.replace(/&#([0-9]+);/g,b)
}
})();;

/* [end] feature=core.util.string */

/* [start] feature=core.util.urlparams */
gadgets.util=gadgets.util||{};
(function(){var a=null;
function b(e){var f;
var c=e.indexOf("?");
var d=e.indexOf("#");
if(d===-1){f=e.substr(c+1)
}else{f=[e.substr(c+1,d-c-1),"&",e.substr(d+1)].join("")
}return f.split("&")
}gadgets.util.getUrlParameters=function(p){var d=typeof p==="undefined";
if(a!==null&&d){return a
}var l={};
var f=b(p||window.location.href);
var n=window.decodeURIComponent?decodeURIComponent:unescape;
for(var h=0,g=f.length;
h<g;
++h){var m=f[h].indexOf("=");
if(m===-1){continue
}var c=f[h].substring(0,m);
var o=f[h].substring(m+1);
o=o.replace(/\+/g," ");
try{l[c]=n(o)
}catch(k){}}if(d){a=l
}return l
};
gadgets.util.getUrlParameters()
})();;

/* [end] feature=core.util.urlparams */

/* [start] feature=core.util */
gadgets.util=gadgets.util||{};
(function(){var b={};
var a={};
function c(d){b=d["core.util"]||{}
}if(gadgets.config){gadgets.config.register("core.util",null,c)
}gadgets.util.getFeatureParameters=function(d){return typeof b[d]==="undefined"?null:b[d]
};
gadgets.util.hasFeature=function(d){return typeof b[d]!=="undefined"
};
gadgets.util.getServices=function(){return a
}
})();;

/* [end] feature=core.util */

/* [start] feature=shindig.auth */
shindig.Auth=function(){var authToken=null;
var trusted=null;
function addParamsToToken(urlParams){var args=authToken.split("&");
for(var i=0;
i<args.length;
i++){var nameAndValue=args[i].split("=");
if(nameAndValue.length===2){var name=nameAndValue[0];
var value=nameAndValue[1];
if(value==="$"){value=encodeURIComponent(urlParams[name]);
args[i]=name+"="+value
}}}authToken=args.join("&")
}function init(configuration){var urlParams=gadgets.util.getUrlParameters();
var config=configuration["shindig.auth"]||{};
if(config.authToken){authToken=config.authToken
}else{if(urlParams.st){authToken=urlParams.st
}}if(authToken!==null){addParamsToToken(urlParams)
}if(config.trustedJson){trusted=(eval("("+config.trustedJson+")"))
}}gadgets.config.register("shindig.auth",null,init);
return{getSecurityToken:function(){return authToken
},updateSecurityToken:function(newToken){authToken=newToken
},getTrustedData:function(){return trusted
}}
};;
shindig.auth=new shindig.Auth();;

/* [end] feature=shindig.auth */

/* [start] feature=core.json */
if(window.JSON&&window.JSON.parse&&window.JSON.stringify){gadgets.json=(function(){var a=/___$/;
function b(d,e){var c=this[d];
return c
}return{parse:function(d){try{return window.JSON.parse(d)
}catch(c){return false
}},stringify:function(d){var h=window.JSON.stringify;
function f(e){return h.call(this,e,b)
}var g=(Array.prototype.toJSON&&h([{x:1}])==='"[{\\"x\\": 1}]"')?f:h;
try{return g(d,function(i,e){return !a.test(i)?e:void 0
})
}catch(c){return null
}}}
})()
};;
;
if(!(window.JSON&&window.JSON.parse&&window.JSON.stringify)){gadgets.json=function(){function f(n){return n<10?"0"+n:n
}Date.prototype.toJSON=function(){return[this.getUTCFullYear(),"-",f(this.getUTCMonth()+1),"-",f(this.getUTCDate()),"T",f(this.getUTCHours()),":",f(this.getUTCMinutes()),":",f(this.getUTCSeconds()),"Z"].join("")
};
var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};
function stringify(value){var a,i,k,l,r=/[\"\\\x00-\x1f\x7f-\x9f]/g,v;
switch(typeof value){case"string":return r.test(value)?'"'+value.replace(r,function(a){var c=m[a];
if(c){return c
}c=a.charCodeAt();
return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)
})+'"':'"'+value+'"';
case"number":return isFinite(value)?String(value):"null";
case"boolean":case"null":return String(value);
case"object":if(!value){return"null"
}a=[];
if(typeof value.length==="number"&&!value.propertyIsEnumerable("length")){l=value.length;
for(i=0;
i<l;
i+=1){a.push(stringify(value[i])||"null")
}return"["+a.join(",")+"]"
}for(k in value){if(/___$/.test(k)){continue
}if(value.hasOwnProperty(k)){if(typeof k==="string"){v=stringify(value[k]);
if(v){a.push(stringify(k)+":"+v)
}}}}return"{"+a.join(",")+"}"
}return""
}return{stringify:stringify,parse:function(text){if(/^[\],:{}\s]*$/.test(text.replace(/\\["\\\/b-u]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return eval("("+text+")")
}return false
}}
}()
};;
gadgets.json.flatten=function(c){var d={};
if(c===null||c===undefined){return d
}for(var a in c){if(c.hasOwnProperty(a)){var b=c[a];
if(null===b||undefined===b){continue
}d[a]=(typeof b==="string")?b:gadgets.json.stringify(b)
}}return d
};;

/* [end] feature=core.json */

/* [start] feature=core.io */
gadgets.io=function(){var config={};
var oauthState;
function makeXhr(){var x;
var wrapperXhr=window.shindig&&window.shindig["xhrwrapper"]&&window.shindig["xhrwrapper"]["createXHR"];
if(wrapperXhr){return wrapperXhr()
}else{if(typeof ActiveXObject!="undefined"){x=new ActiveXObject("Msxml2.XMLHTTP");
if(!x){x=new ActiveXObject("Microsoft.XMLHTTP")
}return x
}else{if(typeof XMLHttpRequest!="undefined"||window.XMLHttpRequest){return new window.XMLHttpRequest()
}else{throw ("no xhr available")
}}}}function hadError(xobj,callback){if(xobj.readyState!==4){return true
}try{if(xobj.status!==200){var error=(""+xobj.status);
if(xobj.responseText){error=error+" "+xobj.responseText
}callback({errors:[error],rc:xobj.status,text:xobj.responseText});
return true
}}catch(e){callback({errors:[e.number+" Error not specified"],rc:e.number,text:e.description});
return true
}return false
}function processNonProxiedResponse(url,callback,params,xobj){if(hadError(xobj,callback)){return
}var data={body:xobj.responseText};
callback(transformResponseData(params,data))
}var UNPARSEABLE_CRUFT="throw 1; < don't be evil' >";
function processResponse(url,callback,params,xobj){if(hadError(xobj,callback)){return
}var txt=xobj.responseText;
var offset=txt.indexOf(UNPARSEABLE_CRUFT)+UNPARSEABLE_CRUFT.length;
if(offset<UNPARSEABLE_CRUFT.length){return
}txt=txt.substr(offset);
var data=eval("("+txt+")");
data=data[url];
if(data.oauthState){oauthState=data.oauthState
}if(data.st){shindig.auth.updateSecurityToken(data.st)
}callback(transformResponseData(params,data))
}function transformResponseData(params,data){var resp={text:data.body,rc:data.rc||200,headers:data.headers,oauthApprovalUrl:data.oauthApprovalUrl,oauthError:data.oauthError,oauthErrorText:data.oauthErrorText,errors:[]};
if(resp.rc<200||resp.rc>=400){resp.errors=[resp.rc+" Error"]
}else{if(resp.text){if(resp.rc>=300&&resp.rc<400){params.CONTENT_TYPE="TEXT"
}switch(params.CONTENT_TYPE){case"JSON":case"FEED":resp.data=gadgets.json.parse(resp.text);
if(!resp.data){resp.errors.push("500 Failed to parse JSON");
resp.rc=500;
resp.data=null
}break;
case"DOM":var dom;
if(typeof ActiveXObject!="undefined"){dom=new ActiveXObject("Microsoft.XMLDOM");
dom.async=false;
dom.validateOnParse=false;
dom.resolveExternals=false;
if(!dom.loadXML(resp.text)){resp.errors.push("500 Failed to parse XML");
resp.rc=500
}else{resp.data=dom
}}else{var parser=new DOMParser();
dom=parser.parseFromString(resp.text,"text/xml");
if("parsererror"===dom.documentElement.nodeName){resp.errors.push("500 Failed to parse XML");
resp.rc=500
}else{resp.data=dom
}}break;
default:resp.data=resp.text;
break
}}}return resp
}function makeXhrRequest(realUrl,proxyUrl,callback,paramData,method,params,processResponseFunction,opt_headers){var xhr=makeXhr();
if(proxyUrl.indexOf("//")==0){proxyUrl=document.location.protocol+proxyUrl
}xhr.open(method,proxyUrl,true);
if(callback){xhr.onreadystatechange=gadgets.util.makeClosure(null,processResponseFunction,realUrl,callback,params,xhr)
}if(paramData!==null){var contentTypeHeader="Content-Type";
var contentType="application/x-www-form-urlencoded";
if(typeof opt_headers==="string"){contentType=opt_headers;
opt_headers={}
}var headers=opt_headers||{};
if(!headers[contentTypeHeader]){headers[contentTypeHeader]=contentType
}for(var headerName in headers){xhr.setRequestHeader(headerName,headers[headerName])
}}xhr.send(paramData)
}function respondWithPreload(postData,params,callback){if(gadgets.io.preloaded_&&postData.httpMethod==="GET"){for(var i=0;
i<gadgets.io.preloaded_.length;
i++){var preload=gadgets.io.preloaded_[i];
if(preload&&(preload.id===postData.url)){delete gadgets.io.preloaded_[i];
if(preload.rc!==200){callback({rc:preload.rc,errors:[preload.rc+" Error"]})
}else{if(preload.oauthState){oauthState=preload.oauthState
}var resp={body:preload.body,rc:preload.rc,headers:preload.headers,oauthApprovalUrl:preload.oauthApprovalUrl,oauthError:preload.oauthError,oauthErrorText:preload.oauthErrorText,errors:[]};
callback(transformResponseData(params,resp))
}return true
}}}return false
}function init(configuration){config=configuration["core.io"]||{}
}gadgets.config.register("core.io",null,init);
return{makeRequest:function(url,callback,opt_params){var params=opt_params||{};
var httpMethod=params.METHOD||"GET";
var refreshInterval=params.REFRESH_INTERVAL;
var auth,st;
if(params.AUTHORIZATION&&params.AUTHORIZATION!=="NONE"){auth=params.AUTHORIZATION.toLowerCase();
st=shindig.auth.getSecurityToken()
}else{if(httpMethod==="GET"&&refreshInterval===undefined){refreshInterval=3600
}}var signOwner=true;
if(typeof params.OWNER_SIGNED!=="undefined"){signOwner=params.OWNER_SIGNED
}var signViewer=true;
if(typeof params.VIEWER_SIGNED!=="undefined"){signViewer=params.VIEWER_SIGNED
}var headers=params.HEADERS||{};
if(httpMethod==="POST"&&!headers["Content-Type"]){headers["Content-Type"]="application/x-www-form-urlencoded"
}var urlParams=gadgets.util.getUrlParameters();
var paramData={url:url,httpMethod:httpMethod,headers:gadgets.io.encodeValues(headers,false),postData:params.POST_DATA||"",authz:auth||"",st:st||"",contentType:params.CONTENT_TYPE||"TEXT",numEntries:params.NUM_ENTRIES||"3",getSummaries:!!params.GET_SUMMARIES,signOwner:signOwner,signViewer:signViewer,gadget:urlParams.url,container:urlParams.container||urlParams.synd||"default",bypassSpecCache:gadgets.util.getUrlParameters()["nocache"]||"",getFullHeaders:!!params.GET_FULL_HEADERS};
if(auth==="oauth"||auth==="signed"){if(gadgets.io.oauthReceivedCallbackUrl_){paramData.OAUTH_RECEIVED_CALLBACK=gadgets.io.oauthReceivedCallbackUrl_;
gadgets.io.oauthReceivedCallbackUrl_=null
}paramData.oauthState=oauthState||"";
for(var opt in params){if(params.hasOwnProperty(opt)){if(opt.indexOf("OAUTH_")===0){paramData[opt]=params[opt]
}}}}var proxyUrl=config.jsonProxyUrl.replace("%host%",document.location.host);
if(!respondWithPreload(paramData,params,callback)){if(httpMethod==="GET"&&refreshInterval>0){var extraparams="?refresh="+refreshInterval+"&"+gadgets.io.encodeValues(paramData);
makeXhrRequest(url,proxyUrl+extraparams,callback,null,"GET",params,processResponse)
}else{makeXhrRequest(url,proxyUrl,callback,gadgets.io.encodeValues(paramData),"POST",params,processResponse)
}}},makeNonProxiedRequest:function(relativeUrl,callback,opt_params,opt_headers){var params=opt_params||{};
makeXhrRequest(relativeUrl,relativeUrl,callback,params.POST_DATA,params.METHOD,params,processNonProxiedResponse,opt_headers)
},clearOAuthState:function(){oauthState=undefined
},encodeValues:function(fields,opt_noEscaping){var escape=!opt_noEscaping;
var buf=[];
var first=false;
for(var i in fields){if(fields.hasOwnProperty(i)&&!/___$/.test(i)){if(!first){first=true
}else{buf.push("&")
}buf.push(escape?encodeURIComponent(String(i)):i);
buf.push("=");
buf.push(escape?encodeURIComponent(String(fields[i])):fields[i])
}}return buf.join("")
},getProxyUrl:function(url,opt_params){var params=opt_params||{};
var refresh=params.REFRESH_INTERVAL;
if(refresh===undefined){refresh="3600"
}var urlParams=gadgets.util.getUrlParameters();
var rewriteMimeParam=params.rewriteMime?"&rewriteMime="+encodeURIComponent(String(params.rewriteMime)):"";
var ret=config.proxyUrl.replace("%url%",encodeURIComponent(url)).replace("%host%",document.location.host).replace("%rawurl%",url).replace("%refresh%",encodeURIComponent(String(refresh))).replace("%gadget%",encodeURIComponent(urlParams.url)).replace("%container%",encodeURIComponent(urlParams.container||urlParams.synd||"default")).replace("%rewriteMime%",rewriteMimeParam);
if(ret.indexOf("//")==0){ret=window.location.protocol+ret
}return ret
}}
}();
gadgets.io.RequestParameters=gadgets.util.makeEnum(["METHOD","CONTENT_TYPE","POST_DATA","HEADERS","AUTHORIZATION","NUM_ENTRIES","GET_SUMMARIES","GET_FULL_HEADERS","REFRESH_INTERVAL","OAUTH_SERVICE_NAME","OAUTH_USE_TOKEN","OAUTH_TOKEN_NAME","OAUTH_REQUEST_TOKEN","OAUTH_REQUEST_TOKEN_SECRET","OAUTH_RECEIVED_CALLBACK"]);
gadgets.io.MethodType=gadgets.util.makeEnum(["GET","POST","PUT","DELETE","HEAD"]);
gadgets.io.ContentType=gadgets.util.makeEnum(["TEXT","DOM","JSON","FEED"]);
gadgets.io.AuthorizationType=gadgets.util.makeEnum(["NONE","SIGNED","OAUTH"]);;

/* [end] feature=core.io */

/* [start] feature=core.prefs */
(function(){var i=null;
var j={};
var f=gadgets.util.escapeString;
var d={};
var h={};
var e="en";
var b="US";
var a=0;
function c(){var l=gadgets.util.getUrlParameters();
for(var k in l){if(l.hasOwnProperty(k)){if(k.indexOf("up_")===0&&k.length>3){j[k.substr(3)]=String(l[k])
}else{if(k==="country"){b=l[k]
}else{if(k==="lang"){e=l[k]
}else{if(k==="mid"){a=l[k]
}}}}}}}function g(){for(var k in h){if(typeof j[k]==="undefined"){j[k]=h[k]
}}}gadgets.Prefs=function(){if(!i){c();
g();
i=this
}return i
};
gadgets.Prefs.setInternal_=function(n,p){var o=false;
if(typeof n==="string"){if(!j.hasOwnProperty(n)||j[n]!==p){o=true
}j[n]=p
}else{for(var m in n){if(n.hasOwnProperty(m)){var l=n[m];
if(!j.hasOwnProperty(m)||j[m]!==l){o=true
}j[m]=l
}}}return o
};
gadgets.Prefs.setMessages_=function(k){d=k
};
gadgets.Prefs.setDefaultPrefs_=function(k){h=k
};
gadgets.Prefs.prototype.getString=function(k){if(k===".lang"){k="lang"
}return j[k]?f(j[k]):""
};
gadgets.Prefs.prototype.setDontEscape_=function(){f=function(l){return l
}
};
gadgets.Prefs.prototype.getInt=function(k){var l=parseInt(j[k],10);
return isNaN(l)?0:l
};
gadgets.Prefs.prototype.getFloat=function(k){var l=parseFloat(j[k]);
return isNaN(l)?0:l
};
gadgets.Prefs.prototype.getBool=function(k){var l=j[k];
if(l){return l==="true"||l===true||!!parseInt(l,10)
}return false
};
gadgets.Prefs.prototype.set=function(k,l){throw new Error("setprefs feature required to make this call.")
};
gadgets.Prefs.prototype.getArray=function(n){var o=j[n];
if(o){var k=o.split("|");
for(var m=0,l=k.length;
m<l;
++m){k[m]=f(k[m].replace(/%7C/g,"|"))
}return k
}return[]
};
gadgets.Prefs.prototype.setArray=function(k,l){throw new Error("setprefs feature required to make this call.")
};
gadgets.Prefs.prototype.getMsg=function(k){return d[k]||""
};
gadgets.Prefs.prototype.getCountry=function(){return b
};
gadgets.Prefs.prototype.getLang=function(){return e
};
gadgets.Prefs.prototype.getModuleId=function(){return a
}
})();;

/* [end] feature=core.prefs */

/* [start] feature=core.legacy */
var JSON=window.JSON||gadgets.json;
var _IG_Prefs=(function(){var a=null;
var b=function(){if(!a){a=new gadgets.Prefs();
a.setDontEscape_()
}return a
};
b._parseURL=gadgets.Prefs.parseUrl;
return b
})();
function _IG_Fetch_wrapper(b,a){b(a.data?a.data:"")
}function _IG_FetchContent(b,g,c){var f=c||{};
if(f.refreshInterval){f.REFRESH_INTERVAL=f.refreshInterval
}else{f.REFRESH_INTERVAL=3600
}for(var e in f){var d=f[e];
delete f[e];
f[e.toUpperCase()]=d
}var a=gadgets.util.makeClosure(null,_IG_Fetch_wrapper,g);
gadgets.io.makeRequest(b,a,f)
}function _IG_FetchXmlContent(b,e,c){var d=c||{};
if(d.refreshInterval){d.REFRESH_INTERVAL=d.refreshInterval
}else{d.REFRESH_INTERVAL=3600
}d.CONTENT_TYPE="DOM";
var a=gadgets.util.makeClosure(null,_IG_Fetch_wrapper,e);
gadgets.io.makeRequest(b,a,d)
}function _IG_FetchFeedAsJSON(b,f,c,a,d){var e=d||{};
e.CONTENT_TYPE="FEED";
e.NUM_ENTRIES=c;
e.GET_SUMMARIES=a;
gadgets.io.makeRequest(b,function(j){j.data=j.data||{};
if(j.errors&&j.errors.length>0){j.data.ErrorMsg=j.errors[0]
}if(j.data.link){j.data.URL=b
}if(j.data.title){j.data.Title=j.data.title
}if(j.data.description){j.data.Description=j.data.description
}if(j.data.link){j.data.Link=j.data.link
}if(j.data.items&&j.data.items.length>0){j.data.Entry=j.data.items;
for(var h=0;
h<j.data.Entry.length;
++h){var i=j.data.Entry[h];
i.Title=i.title;
i.Link=i.link;
i.Summary=i.summary||i.description;
i.Date=i.pubDate
}}for(var g=0;
g<j.data.Entry.length;
++g){var i=j.data.Entry[g];
i.Date=(i.Date/1000)
}f(j.data)
},e)
}function _IG_GetCachedUrl(a,b){var c=b||{};
c.REFRESH_INTERVAL=3600;
if(c.refreshInterval){c.REFRESH_INTERVAL=c.refreshInterval
}return gadgets.io.getProxyUrl(a,c)
}function _IG_GetImageUrl(a,b){return _IG_GetCachedUrl(a,b)
}function _IG_GetImage(b){var a=document.createElement("img");
a.src=_IG_GetCachedUrl(b);
return a
}function _IG_RegisterOnloadHandler(a){gadgets.util.registerOnLoadHandler(a)
}function _IG_Callback(b,c){var a=arguments;
return function(){var d=Array.prototype.slice.call(arguments);
b.apply(null,d.concat(Array.prototype.slice.call(a,1)))
}
}var _args=gadgets.util.getUrlParameters;
function _gel(a){return document.getElementById?document.getElementById(a):null
}function _gelstn(a){if(a==="*"&&document.all){return document.all
}return document.getElementsByTagName?document.getElementsByTagName(a):[]
}function _gelsbyregex(d,f){var c=_gelstn(d);
var e=[];
for(var b=0,a=c.length;
b<a;
++b){if(f.test(c[b].id)){e.push(c[b])
}}return e
}function _esc(a){return window.encodeURIComponent?encodeURIComponent(a):escape(a)
}function _unesc(a){return window.decodeURIComponent?decodeURIComponent(a):unescape(a)
}function _hesc(a){return gadgets.util.escapeString(a)
}function _striptags(a){return a.replace(/<\/?[^>]+>/g,"")
}function _trim(a){return a.replace(/^\s+|\s+$/g,"")
}function _toggle(a){a=(typeof a==="string")?_gel(a):a;
if(a!==null){if(a.style.display.length===0||a.style.display==="block"){a.style.display="none"
}else{if(a.style.display==="none"){a.style.display="block"
}}}}var _uid=(function(){var a=0;
return function(){return a++
}
})();
function _min(d,c){return(d<c?d:c)
}function _max(d,c){return(d>c?d:c)
}function _exportSymbols(a,c){var m=window;
var f=a.split(".");
for(var h=0,g=f.length;
h<g;
h++){var b=f[h];
m[b]=m[b]||{};
m=m[b]
}for(var e=0,d=c.length;
e<d;
e+=2){m[c[e]]=c[e+1]
}}function _IG_AddDOMEventHandler(c,b,a){gadgets.warn("_IG_AddDOMEventHandler not implemented - see SHINDIG-198")
};;

/* [end] feature=core.legacy */

/* [start] feature=core.tracking */
(function(){function e(b,c,a){b={msg:b||"",line:a||0,jsUrl:0==window.location.href.indexOf(c)?"-top-":c,fullUrl:window.location};try{if(++window._varz_numerrors,gadgets&&!(3<f)){c={};c[gadgets.io.RequestParameters.METHOD]=gadgets.io.MethodType.GET;a=encodeURIComponent||escape;var d=gadgets.util.getUrlParameters(),e=d.container||d.synd,g=d.gadget||d.url,k=["/gadgets/evthdlr?t=err&gadget=",a(g),"&container=",a(e),"&jsurl=",a(b.jsUrl),"&line=",a(b.line),"&session=",h,"&count=",f,"&msg=",a(b.msg)];gadgets.io.makeNonProxiedRequest(k.join(""),
null,c);f++}}catch(l){}}window._varz_numerrors=0;var h=(new Date).getTime(),f=0;-1==window.location.href.indexOf("&debug=1")&&-1==window.location.href.indexOf("?debug=1")&&(window.onerror=e)})();
;

/* [end] feature=core.tracking */

/* [start] feature=core */
(function(){var l=null,p=function(){function e(a){a=(""+a).match(E);return!a?l:new b(q(a[1]),q(a[2]),q(a[3]),q(a[4]),q(a[5]),q(a[6]),q(a[7]))}function z(a,e){return"string"==typeof a?encodeURI(a).replace(e,B):l}function B(a){a=a.charCodeAt(0);return"%"+"0123456789ABCDEF".charAt(a>>4&15)+"0123456789ABCDEF".charAt(a&15)}function y(a){if(a===l)return l;for(var a=a.replace(/(^|\/)\.(?:\/|$)/g,"$1").replace(/\/{2,}/g,"/"),e=m,b;(b=a.replace(e,"$1"))!=a;a=b);return a}function A(a,e){var b=a.R(),g=e.K();g?b.fa(e.j):
g=e.V();g?b.ca(e.m):g=e.W();g?b.da(e.k):g=e.Y();var m=e.g,k=y(m);if(g)b.ba(e.T()),k=k&&k.replace(x,"");else if(g=!!m){if(47!==k.charCodeAt(0))var k=y(b.g||"").replace(x,""),s=k.lastIndexOf("/")+1,k=y((s?k.substring(0,s):"")+y(m)).replace(x,"")}else k=k&&k.replace(x,""),k!==m&&b.G(k);g?b.G(k):g=e.Z();g?b.M(e.l):g=e.X();g&&b.ea(e.n);return b}function b(a,e,b,g,m,k,s){this.j=a;this.m=e;this.k=b;this.h=g;this.g=m;this.l=k;this.n=s}function q(a){return"string"==typeof a&&0<a.length?a:l}var m=RegExp(/(\/|^)(?:[^./][^/]*|\.{2,}(?:[^./][^/]*)|\.{3,}[^/]*)\/\.\.(?:\/|$)/),
x=/^(?:\.\.\/)*(?:\.\.$)?/;b.prototype.toString=function(){var a=[];l!==this.j&&a.push(this.j,":");l!==this.k&&(a.push("//"),l!==this.m&&a.push(this.m,"@"),a.push(this.k),l!==this.h&&a.push(":",this.h.toString()));l!==this.g&&a.push(this.g);l!==this.l&&a.push("?",this.l);l!==this.n&&a.push("#",this.n);return a.join("")};b.prototype.R=function(){return new b(this.j,this.m,this.k,this.h,this.g,this.l,this.n)};b.prototype.U=function(){return this.j&&decodeURIComponent(this.j).toLowerCase()};b.prototype.fa=
function(a){this.j=a?a:l};b.prototype.K=function(){return l!==this.j};b.prototype.ca=function(a){this.m=a?a:l};b.prototype.V=function(){return l!==this.m};b.prototype.da=function(a){this.k=a?a:l;this.G(this.g)};b.prototype.W=function(){return l!==this.k};b.prototype.T=function(){return this.h&&decodeURIComponent(this.h)};b.prototype.ba=function(a){if(a){a=Number(a);if(a!==(a&65535))throw Error("Bad port number "+a);this.h=""+a}else this.h=l};b.prototype.Y=function(){return l!==this.h};b.prototype.S=
function(){return this.g&&decodeURIComponent(this.g)};b.prototype.G=function(a){a?(a=""+a,this.g=!this.k||/^\//.test(a)?a:"/"+a):this.g=l};b.prototype.M=function(a){this.l=a?a:l};b.prototype.Z=function(){return l!==this.l};b.prototype.aa=function(a){if("object"===typeof a&&!(a instanceof Array)&&(a instanceof Object||"[object Array]"!==Object.prototype.toString.call(a))){var e=[],b=-1,g;for(g in a){var m=a[g];"string"===typeof m&&(e[++b]=g,e[++b]=m)}a=e}for(var e=[],b="",k=0;k<a.length;)g=a[k++],
m=a[k++],e.push(b,encodeURIComponent(g.toString())),b="&",m&&e.push("=",encodeURIComponent(m.toString()));this.l=e.join("")};b.prototype.ea=function(a){this.n=a?a:l};b.prototype.X=function(){return l!==this.n};var E=/^(?:([^:/?#]+):)?(?:\/\/(?:([^/?#]*)@)?([^/?#:@]*)(?::([0-9]+))?)?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/,D=/[#\/\?@]/g,F=/[\#\?]/g;b.parse=e;b.create=function(a,e,m,g,q,k,s){a=new b(z(a,D),z(e,D),"string"==typeof m?encodeURIComponent(m):l,0<g?g.toString():l,z(q,F),l,"string"==typeof s?encodeURIComponent(s):
l);k&&("string"===typeof k?a.M(k.replace(/[^?&=0-9A-Za-z_\-~.%]/g,B)):a.aa(k));return a};b.$=A;b.ja=y;b.ua={oa:function(a){return/\.html$/.test(e(a).S())?"text/html":"application/javascript"},$:function(a,b){return a?A(e(a),e(b)).toString():""+b}};return b}();"undefined"!==typeof window&&(window.URI=p);var L={e:{NONE:0,URI:1,URI_FRAGMENT:11,SCRIPT:2,STYLE:3,HTML:12,ID:4,IDREF:5,IDREFS:6,GLOBAL_NAME:7,LOCAL_NAME:8,CLASSES:9,FRAME_TARGET:10,MEDIA_QUERY:13}};L.atype=L.e;
L.w={"*::class":9,"*::dir":0,"*::draggable":0,"*::hidden":0,"*::id":4,"*::inert":0,"*::itemprop":0,"*::itemref":6,"*::itemscope":0,"*::lang":0,"*::onblur":2,"*::onchange":2,"*::onclick":2,"*::ondblclick":2,"*::onerror":2,"*::onfocus":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::onreset":2,"*::onscroll":2,"*::onselect":2,"*::onsubmit":2,"*::ontouchcancel":2,"*::ontouchend":2,"*::ontouchenter":2,
"*::ontouchleave":2,"*::ontouchmove":2,"*::ontouchstart":2,"*::onunload":2,"*::spellcheck":0,"*::style":3,"*::title":0,"*::translate":0,"a::accesskey":0,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::onfocus":2,"a::shape":0,"a::tabindex":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,"area::href":1,"area::nohref":0,"area::onblur":2,"area::onfocus":2,"area::shape":0,"area::tabindex":0,"area::target":10,"audio::controls":0,"audio::loop":0,"audio::mediagroup":5,
"audio::muted":0,"audio::preload":0,"audio::src":1,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::tabindex":0,"button::type":0,"button::value":0,"canvas::height":0,"canvas::width":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,
"colgroup::width":0,"command::checked":0,"command::command":5,"command::disabled":0,"command::icon":1,"command::label":0,"command::radiogroup":0,"command::type":0,"data::value":0,"del::cite":1,"del::datetime":0,"details::open":0,"dir::compact":0,"div::align":0,"dl::compact":0,"fieldset::disabled":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::novalidate":0,"form::onreset":2,"form::onsubmit":2,
"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"iframe::align":0,"iframe::frameborder":0,"iframe::height":0,"iframe::marginheight":0,"iframe::marginwidth":0,"iframe::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,"img::hspace":0,"img::ismap":0,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::align":0,
"input::alt":0,"input::autocomplete":0,"input::checked":0,"input::disabled":0,"input::inputmode":0,"input::ismap":0,"input::list":5,"input::max":0,"input::maxlength":0,"input::min":0,"input::multiple":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::placeholder":0,"input::readonly":0,"input::required":0,"input::size":0,"input::src":1,"input::step":0,"input::tabindex":0,"input::type":0,"input::usemap":11,"input::value":0,"ins::cite":1,"ins::datetime":0,
"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"menu::label":0,"menu::type":0,"meter::high":0,"meter::low":0,"meter::max":0,"meter::min":0,"meter::value":0,"ol::compact":0,"ol::reversed":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"output::for":6,"output::name":8,"p::align":0,
"pre::width":0,"progress::max":0,"progress::min":0,"progress::value":0,"q::cite":1,"select::autocomplete":0,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,"select::onfocus":2,"select::required":0,"select::size":0,"select::tabindex":0,"source::type":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,
"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,"textarea::accesskey":0,"textarea::autocomplete":0,"textarea::cols":0,"textarea::disabled":0,"textarea::inputmode":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::placeholder":0,"textarea::readonly":0,
"textarea::required":0,"textarea::rows":0,"textarea::tabindex":0,"textarea::wrap":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,
"track::default":0,"track::kind":0,"track::label":0,"track::srclang":0,"ul::compact":0,"ul::type":0,"video::controls":0,"video::height":0,"video::loop":0,"video::mediagroup":5,"video::muted":0,"video::poster":1,"video::preload":0,"video::src":1,"video::width":0};L.ATTRIBS=L.w;L.c={OPTIONAL_ENDTAG:1,EMPTY:2,CDATA:4,RCDATA:8,UNSAFE:16,FOLDABLE:32,SCRIPT:64,STYLE:128,VIRTUALIZED:256};L.eflags=L.c;
L.f={a:0,abbr:0,acronym:0,address:0,applet:272,area:2,article:0,aside:0,audio:0,b:0,base:274,basefont:274,bdi:0,bdo:0,big:0,blockquote:0,body:305,br:2,button:0,canvas:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,command:2,data:0,datalist:0,dd:1,del:0,details:0,dfn:0,dialog:272,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,figcaption:0,figure:0,font:0,footer:0,form:0,frame:274,frameset:272,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:305,header:0,hgroup:0,hr:2,html:305,i:0,iframe:4,img:2,input:2,ins:0,isindex:274,
kbd:0,keygen:274,label:0,legend:0,li:1,link:274,map:0,mark:0,menu:0,meta:274,meter:0,nav:0,nobr:0,noembed:276,noframes:276,noscript:276,object:272,ol:0,optgroup:0,option:1,output:0,p:1,param:274,pre:0,progress:0,q:0,s:0,samp:0,script:84,section:0,select:0,small:0,source:2,span:0,strike:0,strong:0,style:148,sub:0,summary:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,time:0,title:280,tr:1,track:2,tt:0,u:0,ul:0,"var":0,video:0,wbr:2};L.ELEMENTS=L.f;
L.O={a:"HTMLAnchorElement",abbr:"HTMLElement",acronym:"HTMLElement",address:"HTMLElement",applet:"HTMLAppletElement",area:"HTMLAreaElement",article:"HTMLElement",aside:"HTMLElement",audio:"HTMLAudioElement",b:"HTMLElement",base:"HTMLBaseElement",basefont:"HTMLBaseFontElement",bdi:"HTMLElement",bdo:"HTMLElement",big:"HTMLElement",blockquote:"HTMLQuoteElement",body:"HTMLBodyElement",br:"HTMLBRElement",button:"HTMLButtonElement",canvas:"HTMLCanvasElement",caption:"HTMLTableCaptionElement",center:"HTMLElement",
cite:"HTMLElement",code:"HTMLElement",col:"HTMLTableColElement",colgroup:"HTMLTableColElement",command:"HTMLCommandElement",data:"HTMLElement",datalist:"HTMLDataListElement",dd:"HTMLElement",del:"HTMLModElement",details:"HTMLDetailsElement",dfn:"HTMLElement",dialog:"HTMLDialogElement",dir:"HTMLDirectoryElement",div:"HTMLDivElement",dl:"HTMLDListElement",dt:"HTMLElement",em:"HTMLElement",fieldset:"HTMLFieldSetElement",figcaption:"HTMLElement",figure:"HTMLElement",font:"HTMLFontElement",footer:"HTMLElement",
form:"HTMLFormElement",frame:"HTMLFrameElement",frameset:"HTMLFrameSetElement",h1:"HTMLHeadingElement",h2:"HTMLHeadingElement",h3:"HTMLHeadingElement",h4:"HTMLHeadingElement",h5:"HTMLHeadingElement",h6:"HTMLHeadingElement",head:"HTMLHeadElement",header:"HTMLElement",hgroup:"HTMLElement",hr:"HTMLHRElement",html:"HTMLHtmlElement",i:"HTMLElement",iframe:"HTMLIFrameElement",img:"HTMLImageElement",input:"HTMLInputElement",ins:"HTMLModElement",isindex:"HTMLUnknownElement",kbd:"HTMLElement",keygen:"HTMLKeygenElement",
label:"HTMLLabelElement",legend:"HTMLLegendElement",li:"HTMLLIElement",link:"HTMLLinkElement",map:"HTMLMapElement",mark:"HTMLElement",menu:"HTMLMenuElement",meta:"HTMLMetaElement",meter:"HTMLMeterElement",nav:"HTMLElement",nobr:"HTMLElement",noembed:"HTMLElement",noframes:"HTMLElement",noscript:"HTMLElement",object:"HTMLObjectElement",ol:"HTMLOListElement",optgroup:"HTMLOptGroupElement",option:"HTMLOptionElement",output:"HTMLOutputElement",p:"HTMLParagraphElement",param:"HTMLParamElement",pre:"HTMLPreElement",
progress:"HTMLProgressElement",q:"HTMLQuoteElement",s:"HTMLElement",samp:"HTMLElement",script:"HTMLScriptElement",section:"HTMLElement",select:"HTMLSelectElement",small:"HTMLElement",source:"HTMLSourceElement",span:"HTMLSpanElement",strike:"HTMLElement",strong:"HTMLElement",style:"HTMLStyleElement",sub:"HTMLElement",summary:"HTMLElement",sup:"HTMLElement",table:"HTMLTableElement",tbody:"HTMLTableSectionElement",td:"HTMLTableDataCellElement",textarea:"HTMLTextAreaElement",tfoot:"HTMLTableSectionElement",
th:"HTMLTableHeaderCellElement",thead:"HTMLTableSectionElement",time:"HTMLTimeElement",title:"HTMLTitleElement",tr:"HTMLTableRowElement",track:"HTMLTrackElement",tt:"HTMLElement",u:"HTMLElement",ul:"HTMLUListElement","var":"HTMLElement",video:"HTMLVideoElement",wbr:"HTMLElement"};L.ELEMENT_DOM_INTERFACES=L.O;L.N={NOT_LOADED:0,SAME_DOCUMENT:1,NEW_DOCUMENT:2};L.ueffects=L.N;
L.J={"a::href":2,"area::href":2,"audio::src":1,"blockquote::cite":0,"command::icon":1,"del::cite":0,"form::action":2,"img::src":1,"input::src":1,"ins::cite":0,"q::cite":0,"video::poster":1,"video::src":1};L.URIEFFECTS=L.J;L.L={UNSANDBOXED:2,SANDBOXED:1,DATA:0};L.ltypes=L.L;L.I={"a::href":2,"area::href":2,"audio::src":2,"blockquote::cite":2,"command::icon":1,"del::cite":2,"form::action":2,"img::src":1,"input::src":1,"ins::cite":2,"q::cite":2,"video::poster":1,"video::src":2};L.LOADERTYPES=L.I;
"undefined"!==typeof window&&(window.html4=L);var Q=function(e){function z(f){if(G.hasOwnProperty(f))return G[f];var a=f.match(R);return a?String.fromCharCode(parseInt(a[1],10)):(a=f.match(S))?String.fromCharCode(parseInt(a[1],16)):H&&T.test(f)?(H.innerHTML="&"+f+";",a=H.textContent,G[f]=a):"&"+f+";"}function B(f,a){return z(a)}function y(f){return f.replace(U,B)}function A(f){return(""+f).replace(V,"&amp;").replace(M,"&lt;").replace(N,"&gt;").replace(W,"&#34;")}function b(f){return f.replace(X,"&amp;$1").replace(M,"&lt;").replace(N,"&gt;")}
function q(f){var a={z:f.z||f.cdata,A:f.A||f.comment,B:f.B||f.endDoc,r:f.r||f.endTag,d:f.d||f.pcdata,F:f.F||f.rcdata,H:f.H||f.startDoc,v:f.v||f.startTag};return function(f,e){var c;var b=/(<\/|<\!--|<[!?]|[&<>])/g;c=f+"";if(Y)c=c.split(b);else{for(var i=[],h=0,n;(n=b.exec(c))!==l;)i.push(c.substring(h,n.index)),i.push(n[0]),h=n.index+n[0].length;i.push(c.substring(h));c=i}x(a,c,0,{o:!1,C:!1},e)}}function m(f,a,d,e,c){return function(){x(f,a,d,e,c)}}function x(f,a,d,j,c){try{f.H&&0==d&&f.H(c);for(var b,
i,h,n=a.length;d<n;){var r=a[d++],k=a[d];switch(r){case "&":Z.test(k)?(f.d&&f.d("&"+k,c,t,m(f,a,d,j,c)),d++):f.d&&f.d("&amp;",c,t,m(f,a,d,j,c));break;case "</":if(b=/^([-\w:]+)[^\'\"]*/.exec(k))if(b[0].length===k.length&&">"===a[d+1])d+=2,h=b[1].toLowerCase(),f.r&&f.r(h,c,t,m(f,a,d,j,c));else{var g=a,o=d,q=f,s=c,v=t,y=j,x=D(g,o);x?(q.r&&q.r(x.name,s,v,m(q,g,o,y,s)),d=x.next):d=g.length}else f.d&&f.d("&lt;/",c,t,m(f,a,d,j,c));break;case "<":if(b=/^([-\w:]+)\s*\/?/.exec(k))if(b[0].length===k.length&&
">"===a[d+1]){d+=2;h=b[1].toLowerCase();f.v&&f.v(h,[],c,t,m(f,a,d,j,c));var z=e.f[h];z&O&&(d=E(a,{name:h,next:d,c:z},f,c,t,j))}else{var g=a,o=f,q=c,s=t,v=j,C=D(g,d);C?(o.v&&o.v(C.name,C.P,q,s,m(o,g,C.next,v,q)),d=C.c&O?E(g,C,o,q,s,v):C.next):d=g.length}else f.d&&f.d("&lt;",c,t,m(f,a,d,j,c));break;case "<\!--":if(!j.C){for(i=d+1;i<n&&!(">"===a[i]&&/--$/.test(a[i-1]));i++);if(i<n){if(f.A){var A=a.slice(d,i).join("");f.A(A.substr(0,A.length-2),c,t,m(f,a,i+1,j,c))}d=i+1}else j.C=!0}j.C&&f.d&&f.d("&lt;!--",
c,t,m(f,a,d,j,c));break;case "<!":if(/^\w/.test(k)){if(!j.o){for(i=d+1;i<n&&">"!==a[i];i++);i<n?d=i+1:j.o=!0}j.o&&f.d&&f.d("&lt;!",c,t,m(f,a,d,j,c))}else f.d&&f.d("&lt;!",c,t,m(f,a,d,j,c));break;case "<?":if(!j.o){for(i=d+1;i<n&&">"!==a[i];i++);i<n?d=i+1:j.o=!0}j.o&&f.d&&f.d("&lt;?",c,t,m(f,a,d,j,c));break;case ">":f.d&&f.d("&gt;",c,t,m(f,a,d,j,c));break;case "":break;default:f.d&&f.d(r,c,t,m(f,a,d,j,c))}}f.B&&f.B(c)}catch(B){if(B!==t)throw B;}}function E(a,w,d,j,c,u){var i=a.length;I.hasOwnProperty(w.name)||
(I[w.name]=RegExp("^"+w.name+"(?:[\\s\\/]|$)","i"));for(var h=I[w.name],n=w.next,r=w.next+1;r<i&&!("</"===a[r-1]&&h.test(a[r]));r++);r<i&&(r-=1);i=a.slice(n,r).join("");if(w.c&e.c.CDATA)d.z&&d.z(i,j,c,m(d,a,r,u,j));else if(w.c&e.c.RCDATA)d.F&&d.F(b(i),j,c,m(d,a,r,u,j));else throw Error("bug");return r}function D(a,b){var d=/^([-\w:]+)/.exec(a[b]),j={};j.name=d[1].toLowerCase();j.c=e.f[j.name];for(var c=a[b].substr(d[0].length),u=b+1,i=a.length;u<i&&">"!==a[u];u++)c+=a[u];if(!(i<=u)){for(var h=[];""!==
c;)if(d=$.exec(c))if(d[4]&&!d[5]||d[6]&&!d[7]){for(var d=d[4]||d[6],n=!1,c=[c,a[u++]];u<i;u++){if(n){if(">"===a[u])break}else 0<=a[u].indexOf(d)&&(n=!0);c.push(a[u])}if(i<=u)break;c=c.join("")}else{var n=d[1].toLowerCase(),r;if(d[2]){r=d[3];var g=r.charCodeAt(0);if(34===g||39===g)r=r.substr(1,r.length-2);r=y(r.replace(aa,""))}else r="";h.push(n,r);c=c.substr(d[0].length)}else c=c.replace(/^[\s\S][^a-z\s]*/,"");j.P=h;j.next=u+1;return j}}function F(a){function b(a,f){j||f.push(a)}var d,j;return q({startDoc:function(){d=
[];j=!1},startTag:function(c,b,i){if(!j&&e.f.hasOwnProperty(c)){var h=e.f[c];if(!(h&e.c.FOLDABLE)){var n=a(c,b);if(n){if("object"!==typeof n)throw Error("tagPolicy did not return object (old API?)");if("attribs"in n)b=n.attribs;else throw Error("tagPolicy gave no attribs");var g;"tagName"in n?(g=n.tagName,n=e.f[g]):(g=c,n=h);if(h&e.c.OPTIONAL_ENDTAG){var k=d[d.length-1];k&&k.D===c&&(k.t!==g||c!==g)&&i.push("</",k.t,">")}h&e.c.EMPTY||d.push({D:c,t:g});i.push("<",g);c=0;for(k=b.length;c<k;c+=2){var m=
b[c],w=b[c+1];w!==l&&void 0!==w&&i.push(" ",m,'="',A(w),'"')}i.push(">");h&e.c.EMPTY&&!(n&e.c.EMPTY)&&i.push("</",g,">")}else j=!(h&e.c.EMPTY)}}},endTag:function(a,f){if(j)j=!1;else if(e.f.hasOwnProperty(a)){var b=e.f[a];if(!(b&(e.c.EMPTY|e.c.FOLDABLE))){if(b&e.c.OPTIONAL_ENDTAG)for(b=d.length;0<=--b;){var h=d[b].D;if(h===a)break;if(!(e.f[h]&e.c.OPTIONAL_ENDTAG))return}else for(b=d.length;0<=--b&&d[b].D!==a;);if(!(0>b)){for(h=d.length;--h>b;){var g=d[h].t;e.f[g]&e.c.OPTIONAL_ENDTAG||f.push("</",g,
">")}b<d.length&&(a=d[b].t);d.length=b;f.push("</",a,">")}}}},pcdata:b,rcdata:b,cdata:b,endDoc:function(a){for(;d.length;d.length--)a.push("</",d[d.length-1].t,">")}})}function a(a,b,d,e,c){if(!c)return l;try{var g=p.parse(""+a);if(g&&(!g.K()||ba.test(g.U()))){var i=c(g,b,d,e);return i?i.toString():l}}catch(h){}return l}function v(a,b,d,e,c){d||a(b+" removed",{Q:"removed",tagName:b});if(e!==c){var g="changed";e&&!c?g="removed":!e&&c&&(g="added");a(b+"."+d+" "+g,{Q:g,tagName:b,ia:d,oldValue:e,newValue:c})}}
function J(a,b,d){b=b+"::"+d;if(a.hasOwnProperty(b))return a[b];b="*::"+d;if(a.hasOwnProperty(b))return a[b]}function g(b,g,d,j,c){for(var k=0;k<g.length;k+=2){var i=g[k],h=g[k+1],n=h,m=l,o;if((o=b+"::"+i,e.w.hasOwnProperty(o))||(o="*::"+i,e.w.hasOwnProperty(o)))m=e.w[o];if(m!==l)switch(m){case e.e.NONE:break;case e.e.SCRIPT:h=l;c&&v(c,b,i,n,h);break;case e.e.STYLE:if("undefined"===typeof s){h=l;c&&v(c,b,i,n,h);break}var q=[];s(h,{declaration:function(b,c){var f=b.toLowerCase();P(f,c,d?function(b){return a(b,
e.N.ga,e.L.ha,{TYPE:"CSS",CSS_PROP:f},d)}:l);c.length&&q.push(f+": "+c.join(" "))}});h=0<q.length?q.join(" ; "):l;c&&v(c,b,i,n,h);break;case e.e.ID:case e.e.IDREF:case e.e.IDREFS:case e.e.GLOBAL_NAME:case e.e.LOCAL_NAME:case e.e.CLASSES:h=j?j(h):h;c&&v(c,b,i,n,h);break;case e.e.URI:h=a(h,J(e.J,b,i),J(e.I,b,i),{TYPE:"MARKUP",XML_ATTR:i,XML_TAG:b},d);c&&v(c,b,i,n,h);break;case e.e.URI_FRAGMENT:h&&"#"===h.charAt(0)?(h=h.substring(1),h=j?j(h):h,h!==l&&void 0!==h&&(h="#"+h)):h=l;c&&v(c,b,i,n,h);break;
default:h=l,c&&v(c,b,i,n,h)}else h=l,c&&v(c,b,i,n,h);g[k+1]=h}return g}function K(a,b,d){return function(j,c){if(e.f[j]&e.c.UNSAFE)d&&v(d,j,void 0,void 0,void 0);else return{attribs:g(j,c,a,b,d)}}}function k(a,b){var d=[];F(b)(a,d);return d.join("")}var s,P;"undefined"!==typeof window&&(s=window.parseCssDeclarations,P=window.sanitizeCssProperty);var G={lt:"<",LT:"<",gt:">",GT:">",amp:"&",AMP:"&",quot:'"',apos:"'",nbsp:"\u00a0"},R=/^#(\d+)$/,S=/^#x([0-9A-Fa-f]+)$/,T=/^[A-Za-z][A-za-z0-9]+$/,H="undefined"!==
typeof window&&window.document?window.document.createElement("textarea"):l,aa=/\0/g,U=/&(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/g,Z=/^(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/,V=/&/g,X=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,M=/[<]/g,N=/>/g,W=/\"/g,$=/^\s*([-.:\w]+)(?:\s*(=)\s*((")[^"]*("|$)|(')[^']*('|$)|(?=[a-z][-\w]*\s*=)|[^"'\s]*))?/i,Y=3==="a,b".split(/(,)/).length,O=e.c.CDATA|e.c.RCDATA,t={},I={},ba=/^(?:https?|mailto)$/i,o={};o.ka=o.escapeAttrib=A;o.la=o.makeHtmlSanitizer=F;o.ma=o.makeSaxParser=
q;o.na=o.makeTagPolicy=K;o.pa=o.normalizeRCData=b;o.qa=o.sanitize=function(a,b,d,e){return k(a,K(b,d,e))};o.ra=o.sanitizeAttribs=g;o.sa=o.sanitizeWithPolicy=k;o.ta=o.unescapeEntities=y;return o}(L),ca=Q.sanitize;"undefined"!==typeof window&&(window.html=Q,window.html_sanitize=ca);})();
;

/* [end] feature=core */

/* [start] feature=gapi.util-globals */
gapi.util=window.gapi&&window.gapi.util||{};
;

/* [end] feature=gapi.util-globals */

/* [start] feature=gapi.util.getOrigin */
gapi.util.getOrigin=function(a){if(!a)return"";a=a.split("#")[0].split("?")[0];a=a.toLowerCase();0==a.indexOf("//")&&(a=window.location.protocol+a);/^[\w\-]*:\/\//.test(a)||(a=window.location.href);var b=a.substring(a.indexOf("://")+3),c=b.indexOf("/");-1!=c&&(b=b.substring(0,c));a=a.substring(0,a.indexOf("://"));if("http"!==a&&"https"!==a&&"chrome-extension"!==a&&"file"!==a)throw Error("Invalid URI scheme in origin");var c="",d=b.indexOf(":");if(-1!=d){var e=b.substring(d+1),b=b.substring(0,d);if("http"===
a&&"80"!==e||"https"===a&&"443"!==e)c=":"+e}return a+"://"+b+c};
;

/* [end] feature=gapi.util.getOrigin */

/* [start] feature=rpc */
gadgets.rpctx=gadgets.rpctx||{};
if(!gadgets.rpctx.wpm){gadgets.rpctx.wpm=function(){var e,d;
var c=true;
function b(h,j,g){if(typeof window.addEventListener!="undefined"){window.addEventListener(h,j,g)
}else{if(typeof window.attachEvent!="undefined"){window.attachEvent("on"+h,j)
}}if(h==="message"){window.___jsl=window.___jsl||{};
var i=window.___jsl;
i.RPMQ=i.RPMQ||[];
i.RPMQ.push(j)
}}function a(h,i,g){if(window.removeEventListener){window.removeEventListener(h,i,g)
}else{if(window.detachEvent){window.detachEvent("on"+h,i)
}}}function f(h){var i=gadgets.json.parse(h.data);
if(!i||!i.f){return
}gadgets.debug("gadgets.rpc.receive("+window.name+"): "+h.data);
var g=gadgets.rpc.getTargetOrigin(i.f);
if(c&&(typeof h.origin!=="undefined"?h.origin!==g:h.domain!==/^.+:\/\/([^:]+).*/.exec(g)[1])){gadgets.error("Invalid rpc message origin. "+g+" vs "+(h.origin||""));
return
}e(i,h.origin)
}return{getCode:function(){return"wpm"
},isParentVerifiable:function(){return true
},init:function(h,i){function g(k){var j=k&&k.rpc||{};
if(String(j.disableForceSecure)==="true"){c=false
}}gadgets.config.register("rpc",null,g);
e=h;
d=i;
b("message",f,false);
d("..",true);
return true
},setup:function(h,g){d(h,true);
return true
},call:function(h,k,j){var g=gadgets.rpc.getTargetOrigin(h);
var i=gadgets.rpc._getTargetWin(h);
if(g){window.setTimeout(function(){var l=gadgets.json.stringify(j);
gadgets.debug("gadgets.rpc.send("+window.name+"): "+l);
i.postMessage(l,g)
},0)
}else{if(h!=".."){gadgets.error("No relay set (used as window.postMessage targetOrigin), cannot send cross-domain message")
}}return true
}}
}()
};;

       gadgets.rpctx.ifpc = gadgets.rpctx.wpm;
    ;
if(!window.gadgets||!window.gadgets["rpc"]){gadgets.rpc=function(){var M="__cb";
var S="";
var T="__ack";
var f=500;
var G=10;
var b="|";
var u="callback";
var g="origin";
var r="referer";
var s="legacy__";
var q={};
var W={};
var D={};
var B={};
var z=0;
var l={};
var m={};
var d={};
var n={};
var E={};
var e=null;
var p=null;
var A=(window.top!==window.self);
var v=window.name;
var J=function(){};
var P=0;
var Y=1;
var a=2;
var x=window.console;
var V=x&&x.log&&function(ae){x.log(ae)
}||function(){};
var R=(function(){function ae(af){return function(){V(af+": call ignored")
}
}return{getCode:function(){return"noop"
},isParentVerifiable:function(){return true
},init:ae("init"),setup:ae("setup"),call:ae("call")}
})();
if(gadgets.util){d=gadgets.util.getUrlParameters()
}function K(){if(d.rpctx=="flash"){return gadgets.rpctx.flash
}if(d.rpctx=="rmr"){return gadgets.rpctx.rmr
}var ae=typeof window.postMessage==="function"?gadgets.rpctx.wpm:typeof window.postMessage==="object"?gadgets.rpctx.wpm:window.ActiveXObject?(gadgets.rpctx.flash?gadgets.rpctx.flash:(gadgets.rpctx.nix?gadgets.rpctx.nix:gadgets.rpctx.ifpc)):navigator.userAgent.indexOf("WebKit")>0?gadgets.rpctx.rmr:navigator.product==="Gecko"?gadgets.rpctx.frameElement:gadgets.rpctx.ifpc;
if(!ae){ae=R
}return ae
}function k(aj,ah){if(n[aj]){return
}var af=H;
if(!ah){af=R
}n[aj]=af;
var ae=E[aj]||[];
for(var ag=0;
ag<ae.length;
++ag){var ai=ae[ag];
ai.t=F(aj);
af.call(aj,ai.f,ai)
}E[aj]=[]
}var I=false,U=false;
function N(){if(U){return
}function ae(){I=true
}if(typeof window.addEventListener!="undefined"){window.addEventListener("unload",ae,false)
}else{if(typeof window.attachEvent!="undefined"){window.attachEvent("onunload",ae)
}}U=true
}function j(ae,ai,af,ah,ag){if(!B[ai]||B[ai]!==af){gadgets.error("Invalid gadgets.rpc token. "+B[ai]+" vs "+af);
J(ai,a)
}ag.onunload=function(){if(m[ai]&&!I){J(ai,Y);
gadgets.rpc.removeReceiver(ai)
}};
N();
ah=gadgets.json.parse(decodeURIComponent(ah))
}function Z(ak,af){if(ak&&typeof ak.s==="string"&&typeof ak.f==="string"&&ak.a instanceof Array){if(B[ak.f]){if(B[ak.f]!==ak.t){gadgets.error("Invalid gadgets.rpc token. "+B[ak.f]+" vs "+ak.t);
J(ak.f,a)
}}if(ak.s===T){window.setTimeout(function(){k(ak.f,true)
},0);
return
}if(ak.c){ak[u]=function(al){var am=ak.g?s:"";
gadgets.rpc.call(ak.f,am+M,null,ak.c,al)
}
}if(af){var ag=t(af);
ak[g]=af;
var ah=ak.r,aj;
try{aj=t(ah)
}catch(ai){}if(!ah||aj!=ag){ah=af
}ak[r]=ah
}var ae=(q[ak.s]||q[S]).apply(ak,ak.a);
if(ak.c&&typeof ae!=="undefined"){gadgets.rpc.call(ak.f,M,null,ak.c,ae)
}}}function t(ag){if(!ag){return""
}ag=((ag.split("#"))[0].split("?"))[0];
ag=ag.toLowerCase();
if(ag.indexOf("//")==0){ag=window.location.protocol+ag
}if(ag.indexOf("://")==-1){ag=window.location.protocol+"//"+ag
}var ah=ag.substring(ag.indexOf("://")+3);
var ae=ah.indexOf("/");
if(ae!=-1){ah=ah.substring(0,ae)
}var aj=ag.substring(0,ag.indexOf("://"));
if(aj!=="http"&&aj!=="https"&&aj!=="chrome-extension"&&aj!=="file"){throw Error("Invalid URI scheme in origin")
}var ai="";
var ak=ah.indexOf(":");
if(ak!=-1){var af=ah.substring(ak+1);
ah=ah.substring(0,ak);
if((aj==="http"&&af!=="80")||(aj==="https"&&af!=="443")){ai=":"+af
}}return aj+"://"+ah+ai
}function C(af,ae){return"/"+af+(ae?b+ae:"")
}function y(ah){if(ah.charAt(0)=="/"){var af=ah.indexOf(b);
var ag=af>0?ah.substring(1,af):ah.substring(1);
var ae=af>0?ah.substring(af+1):null;
return{id:ag,origin:ae}
}else{return null
}}function ad(ag){if(typeof ag==="undefined"||ag===".."){return window.parent
}var af=y(ag);
if(af){return window.top.frames[af.id]
}ag=String(ag);
var ae=window.frames[ag];
if(ae){return ae
}ae=document.getElementById(ag);
if(ae&&ae.contentWindow){return ae.contentWindow
}return null
}function L(ah){var ag=null;
var ae=O(ah);
if(ae){ag=ae
}else{var af=y(ah);
if(af){ag=af.origin
}else{if(ah==".."){ag=d.parent
}else{ag=document.getElementById(ah).src
}}}return t(ag)
}var H=K();
q[S]=function(){V("Unknown RPC service: "+this["s"])
};
q[M]=function(af,ae){var ag=l[af];
if(ag){delete l[af];
ag.call(this,ae)
}};
function X(ag,ae){if(m[ag]===true){return
}if(typeof m[ag]==="undefined"){m[ag]=0
}var af=ad(ag);
if(ag===".."||af!=null){if(H.setup(ag,ae)===true){m[ag]=true;
return
}}if(m[ag]!==true&&m[ag]++<G){window.setTimeout(function(){X(ag,ae)
},f)
}else{n[ag]=R;
m[ag]=true
}}function O(af){var ae=W[af];
if(ae&&ae.substring(0,1)==="/"){if(ae.substring(1,2)==="/"){ae=document.location.protocol+ae
}else{ae=document.location.protocol+"//"+document.location.host+ae
}}return ae
}function ac(af,ae,ag){if(ae&&!/http(s)?:\/\/.+/.test(ae)){if(ae.indexOf("//")==0){ae=window.location.protocol+ae
}else{if(ae.charAt(0)=="/"){ae=window.location.protocol+"//"+window.location.host+ae
}else{if(ae.indexOf("://")==-1){ae=window.location.protocol+"//"+ae
}}}}W[af]=ae;
if(typeof ag!=="undefined"){D[af]=!!ag
}}function F(ae){return B[ae]
}function c(ae,af){af=af||"";
B[ae]=String(af);
X(ae,af)
}function ab(af){var ae=af.passReferrer||"";
var ag=ae.split(":",2);
e=ag[0]||"none";
p=ag[1]||"origin"
}function aa(ae){if(Q(ae)){H=gadgets.rpctx.ifpc||R;
H.init(Z,k)
}}function Q(ae){return String(ae.useLegacyProtocol)==="true"
}function h(af,ae){function ag(aj){var ai=aj&&aj.rpc||{};
ab(ai);
var ah=ai.parentRelayUrl||"";
ah=t(d.parent||ae)+ah;
ac("..",ah,Q(ai));
aa(ai);
c("..",af)
}if(!d.parent&&ae){ag({});
return
}gadgets.config.register("rpc",null,ag)
}function o(af,aj,al){var ai=null;
if(af.charAt(0)!="/"){if(!gadgets.util){return
}ai=document.getElementById(af);
if(!ai){throw new Error("Cannot set up gadgets.rpc receiver with ID: "+af+", element not found.")
}}var ae=ai&&ai.src;
var ag=aj||gadgets.rpc.getOrigin(ae);
ac(af,ag);
var ak=gadgets.util.getUrlParameters(ae);
var ah=al||ak.rpctoken;
c(af,ah)
}function i(ae,ag,ah){if(ae===".."){var af=ah||d.rpctoken||d.ifpctok||"";
h(af,ag)
}else{o(ae,ag,ah)
}}function w(ag){if(e==="bidir"||(e==="c2p"&&ag==="..")||(e==="p2c"&&ag!=="..")){var af=window.location.href;
var ah="?";
if(p==="query"){ah="#"
}else{if(p==="hash"){return af
}}var ae=af.lastIndexOf(ah);
ae=ae===-1?af.length:ae;
return af.substring(0,ae)
}return null
}return{config:function(ae){if(typeof ae.securityCallback==="function"){J=ae.securityCallback
}},register:function(af,ae){if(af===M||af===T){throw new Error("Cannot overwrite callback/ack service")
}if(af===S){throw new Error("Cannot overwrite default service: use registerDefault")
}q[af]=ae
},unregister:function(ae){if(ae===M||ae===T){throw new Error("Cannot delete callback/ack service")
}if(ae===S){throw new Error("Cannot delete default service: use unregisterDefault")
}delete q[ae]
},registerDefault:function(ae){q[S]=ae
},unregisterDefault:function(){delete q[S]
},forceParentVerifiable:function(){if(!H.isParentVerifiable()){H=gadgets.rpctx.ifpc
}},call:function(ae,ag,al,aj){ae=ae||"..";
var ak="..";
if(ae===".."){ak=v
}else{if(ae.charAt(0)=="/"){ak=C(v,gadgets.rpc.getOrigin(window.location.href))
}}++z;
if(al){l[z]=al
}var ai={s:ag,f:ak,c:al?z:0,a:Array.prototype.slice.call(arguments,3),t:B[ae],l:!!D[ae]};
var af=w(ae);
if(af){ai.r=af
}if(ae!==".."&&y(ae)==null&&!document.getElementById(ae)){return
}var ah=n[ae];
if(!ah&&y(ae)!==null){ah=H
}if(ag.indexOf(s)===0){ah=H;
ai.s=ag.substring(s.length);
ai.c=ai.c?ai.c:z
}ai.g=true;
ai.r=ak;
if(!ah){if(!E[ae]){E[ae]=[ai]
}else{E[ae].push(ai)
}return
}if(D[ae]){ah=gadgets.rpctx.ifpc
}if(ah.call(ae,ak,ai)===false){n[ae]=R;
H.call(ae,ak,ai)
}},getRelayUrl:O,setRelayUrl:ac,setAuthToken:c,setupReceiver:i,getAuthToken:F,removeReceiver:function(ae){delete W[ae];
delete D[ae];
delete B[ae];
delete m[ae];
delete n[ae]
},getRelayChannel:function(){return H.getCode()
},receive:function(af,ae){if(af.length>4){H._receiveMessage(af,Z)
}else{j.apply(null,af.concat(ae))
}},receiveSameDomain:function(ae){ae.a=Array.prototype.slice.call(ae.a);
window.setTimeout(function(){Z(ae)
},0)
},getOrigin:t,getTargetOrigin:L,init:function(){if(H.init(Z,k)===false){H=R
}if(A){i("..")
}else{gadgets.config.register("rpc",null,function(af){var ae=af.rpc||{};
ab(ae);
aa(ae)
})
}},_getTargetWin:ad,_parseSiblingId:y,ACK:T,RPC_ID:v||"..",SEC_ERROR_LOAD_TIMEOUT:P,SEC_ERROR_FRAME_PHISH:Y,SEC_ERROR_FORGED_MSG:a}
}();
gadgets.rpc.init()
}else{if(typeof gadgets.rpc=="undefined"||!gadgets.rpc){gadgets.rpc=window.gadgets["rpc"];
gadgets.rpc.config=gadgets.rpc.config;
gadgets.rpc.register=gadgets.rpc.register;
gadgets.rpc.unregister=gadgets.rpc.unregister;
gadgets.rpc.registerDefault=gadgets.rpc.registerDefault;
gadgets.rpc.unregisterDefault=gadgets.rpc.unregisterDefault;
gadgets.rpc.forceParentVerifiable=gadgets.rpc.forceParentVerifiable;
gadgets.rpc.call=gadgets.rpc.call;
gadgets.rpc.getRelayUrl=gadgets.rpc.getRelayUrl;
gadgets.rpc.setRelayUrl=gadgets.rpc.setRelayUrl;
gadgets.rpc.setAuthToken=gadgets.rpc.setAuthToken;
gadgets.rpc.setupReceiver=gadgets.rpc.setupReceiver;
gadgets.rpc.getAuthToken=gadgets.rpc.getAuthToken;
gadgets.rpc.removeReceiver=gadgets.rpc.removeReceiver;
gadgets.rpc.getRelayChannel=gadgets.rpc.getRelayChannel;
gadgets.rpc.receive=gadgets.rpc.receive;
gadgets.rpc.receiveSameDomain=gadgets.rpc.receiveSameDomain;
gadgets.rpc.getOrigin=gadgets.rpc.getOrigin;
gadgets.rpc.getTargetOrigin=gadgets.rpc.getTargetOrigin;
gadgets.rpc._getTargetWin=gadgets.rpc._getTargetWin;
gadgets.rpc._parseSiblingId=gadgets.rpc._parseSiblingId
}};;

/* [end] feature=rpc */

/* [start] feature=config.min */
gapi.config={};gapi.config.GLOBAL_CFG_KEY="___gcfg";gapi.config.GLOBAL_CFG_USED="___gu";gapi.config.JSL_KEY="___jsl";gapi.config.DEFAULT_CFG_KEY="cd";gapi.config.USER_CFG_KEY="cu";gapi.config.INJECTED_CFG_KEY="ci";gapi.config.SAVED_CFG_KEY="cfg";gapi.config.ALL_SOURCES_KEY="us";gapi.config.ATTR_PROCESSED_CONFIG="gapi_processed";gapi.config.jsl=function(){return window[gapi.config.JSL_KEY]=window[gapi.config.JSL_KEY]||{}};gapi.config.jslComponent=function(a){var b=gapi.config.jsl();b[a]=b[a]||[];return b[a]};
gapi.config.cfg=function(a){var b=gapi.config.jsl();b[gapi.config.SAVED_CFG_KEY]=!a&&b[gapi.config.SAVED_CFG_KEY]||{};return b[gapi.config.SAVED_CFG_KEY]};gapi.config.isArray=function(a){return"object"===typeof a&&/\[native code\]/.test(a.push)};
gapi.config.foldConfig=function(a,b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]&&b[c]&&"object"===typeof a[c]&&"object"===typeof b[c]&&!gapi.config.isArray(a[c])&&!gapi.config.isArray(b[c])?gapi.config.foldConfig(a[c],b[c]):b[c]&&"object"===typeof b[c]?(a[c]=gapi.config.isArray(b[c])?[]:{},gapi.config.foldConfig(a[c],b[c])):a[c]=b[c])};
gapi.config.getSelfScriptTags=function(){var a=document.scripts||document.getElementsByTagName("script")||[],b=[],c=[];c.push.apply(c,gapi.config.getAllSourceUrls());for(var d=0;d<a.length;++d)for(var e=a[d],f=0;f<c.length;++f)e.src&&0==e.src.indexOf(c[f])&&b.push(e);0==b.length&&0<a.length&&a[a.length-1].src&&b.push(a[a.length-1]);return b};
gapi.config.appendInlineConfig=function(){for(var a=gapi.config.jslComponent(gapi.config.USER_CFG_KEY),b=gapi.config.getSelfScriptTags(),c=0;c<b.length;++c)if(!b[c].getAttribute(gapi.config.ATTR_PROCESSED_CONFIG)){b[c].setAttribute(gapi.config.ATTR_PROCESSED_CONFIG,!0);var d=gapi.config.getInnerText(b[c]);(d=gapi.config.parseConfig(d))&&a.push(d)}};gapi.config.getAllSourceUrls=function(){return gapi.config.jslComponent(gapi.config.ALL_SOURCES_KEY)};
gapi.config.getInnerText=function(a){if(a){var b=a.nodeType;return 3==b||4==b?a.nodeValue:a.textContent||a.innerText||a.innerHTML||""}};
gapi.config.parseConfig=function(a){if(a&&!/^\s+$/.test(a)){for(;0==a.charCodeAt(a.length-1);)a=a.substring(0,a.length-1);var b;try{b=window.JSON.parse(a)}catch(c){}if("object"===typeof b)return b;try{b=(new Function("return ("+a+"\n)"))()}catch(d){}if("object"===typeof b)return b;try{b=(new Function("return ({"+a+"\n})"))()}catch(e){}return"object"===typeof b?b:{}}};
gapi.config.mergeConfig=function(a){gapi.config.cfg(!0);var b=window[gapi.config.GLOBAL_CFG_KEY],c=gapi.config.jslComponent(gapi.config.USER_CFG_KEY);if(b&&b!==window[gapi.config.GLOBAL_CFG_USED]){var d={};gapi.config.foldConfig(d,b);c.push(d);window[gapi.config.GLOBAL_CFG_USED]=b}gapi.config.appendInlineConfig();a&&(d={},gapi.config.foldConfig(d,a),c.push(d));d=gapi.config.jslComponent(gapi.config.DEFAULT_CFG_KEY);a=0;for(b=d.length;a<b;++a)gapi.config.foldConfig(gapi.config.cfg(),d[a]);d=gapi.config.jslComponent(gapi.config.INJECTED_CFG_KEY);
a=0;for(b=d.length;a<b;++a)gapi.config.foldConfig(gapi.config.cfg(),d[a]);a=0;for(b=c.length;a<b;++a)gapi.config.foldConfig(gapi.config.cfg(),c[a])};gapi.config.get=function(a,b){if(!a)return gapi.config.cfg();for(var c=a.split("/"),d=gapi.config.cfg(),e=0,f=c.length;d&&"object"===typeof d&&e<f;++e)d=d[c[e]];return e===c.length&&void 0!==d?d:b};gapi.config.update=function(a,b){var c=a;if("string"===typeof a){for(var d=c={},e=a.split("/"),f=0,g=e.length;f<g-1;++f)var h={},d=d[e[f]]=h;d[e[f]]=b}gapi.config.mergeConfig(c)};
gapi.config.prefixGet=function(a){return function(b){return b?gapi.config.get(a+"/"+b):gapi.config.get(a)}};gapi.config.init_=gapi.config.mergeConfig;gapi.config.legacyInit&&gapi.config.legacyInit();gapi.config.init_();
;

/* [end] feature=config.min */

/* [start] feature=shindig.sha1 */
shindig.sha1=(function(){var d="0123456789ABCDEF";
var h=[];
var e=[];
var l=[];
var o=[];
o[0]=128;
for(var g=1;
g<64;
++g){o[g]=0
}var n;
var b;
function j(){h[0]=1732584193;
h[1]=4023233417;
h[2]=2562383102;
h[3]=271733878;
h[4]=3285377520;
n=0;
b=0
}function m(i,p){return((i<<p)|(i>>>(32-p)))&4294967295
}function a(p){var q=l;
for(var s=0;
s<64;
s+=4){var B=(p[s]<<24)|(p[s+1]<<16)|(p[s+2]<<8)|(p[s+3]);
q[s/4]=B
}for(var s=16;
s<80;
s++){q[s]=m(q[s-3]^q[s-8]^q[s-14]^q[s-16],1)
}var A=h[0];
var z=h[1];
var y=h[2];
var x=h[3];
var v=h[4];
var u,r;
for(var s=0;
s<80;
s++){if(s<40){if(s<20){u=x^(z&(y^x));
r=1518500249
}else{u=z^y^x;
r=1859775393
}}else{if(s<60){u=(z&y)|(x&(z|y));
r=2400959708
}else{u=z^y^x;
r=3395469782
}}var C=(m(A,5)+u+v+r+q[s])&4294967295;
v=x;
x=y;
y=m(z,30);
z=A;
A=C
}h[0]=(h[0]+A)&4294967295;
h[1]=(h[1]+z)&4294967295;
h[2]=(h[2]+y)&4294967295;
h[3]=(h[3]+x)&4294967295;
h[4]=(h[4]+v)&4294967295
}function f(q,s){if(typeof(q)==="string"){q=unescape(encodeURIComponent(q));
var p=[];
for(var t=0,r=q.length;
t<r;
++t){p.push(q.charCodeAt(t))
}q=p
}if(!s){s=q.length
}var u=0;
if(n==0){while(u+64<s){a(q.slice(u,u+64));
u+=64;
b+=64
}}while(u<s){e[n++]=q[u++];
b++;
if(n==64){n=0;
a(e);
while(u+64<s){a(q.slice(u,u+64));
u+=64;
b+=64
}}}}function k(){var s=[];
var r=b*8;
if(n<56){f(o,56-n)
}else{f(o,64-(n-56))
}for(var q=63;
q>=56;
q--){e[q]=r&255;
r>>>=8
}a(e);
var t=0;
for(var q=0;
q<5;
q++){for(var p=24;
p>=0;
p-=8){s[t++]=(h[q]>>p)&255
}}return s
}function c(){var p=k();
var r="";
for(var q=0;
q<p.length;
q++){r+=d.charAt(Math.floor(p[q]/16))+d.charAt(p[q]%16)
}return r
}j();
return{reset:j,update:f,digest:k,digestString:c}
});;

/* [end] feature=shindig.sha1 */

/* [start] feature=shindig.random */
shindig.random=(function(){var a=window.crypto;
if(a&&typeof a.getRandomValues=="function"){return function(){var k=new window.Uint32Array(1);
a.getRandomValues(k);
return Number("0."+k[0])
}
}var d=gapi.config.get("random/maxObserveMousemove");
if(d==null){d=-1
}var j=0;
var f=Math.random();
var e="0123456789ABCDEF";
var c=1;
var g=((screen.width*screen.width)+screen.height)*1000000;
var b=function(l){l=l||window.event;
var k=(l.screenX+l.clientX)<<16;
k+=(l.screenY+l.clientY);
k*=new Date().getTime()%1000000;
c=(c*k)%g;
if(d>0&&++j==d){gadgets.util.removeBrowserEvent(window,"mousemove",b,false)
}};
if(d!=0){gadgets.util.attachBrowserEvent(window,"mousemove",b,false)
}function i(k){var l=shindig.sha1();
l.update(k);
return l.digestString()
}var h=i(document.cookie+"|"+document.location+"|"+(new Date()).getTime()+"|"+f);
return function(){var k=c;
k+=parseInt(h.substr(0,20),16);
h=i(h);
return k/(g+Math.pow(16,20))
}
})();;

/* [end] feature=shindig.random */
gadgets.config.init({"rpc":{"commSwf":"//xpc.googleusercontent.com/gadgets/xpc.swf","passReferrer":"p2c:query","parentRelayUrl":"/rpc_relay.html"},"core.io":{"jsonProxyUrl":"//%host%/gadgets/makeRequest","proxyUrl":"//www.gmodules.com/gadgets/proxy/refresh=%refresh%&container=%container%%rewriteMime%&gadget=%gadget%/%rawurl%"}});
(function(){var j=window['___jsl']=window['___jsl']||{};j['l']=(j['l']||[]).concat(['core','rpc','shindig.random','shindig.sha1']);})();(function(){var j=window['___jsl']=window['___jsl']||{};if(j['c']){j['c']();delete j['c'];}})();
(function() {
var o=!0,q=null,v=!1;function C(){return function(){}}
(function(s){function l(){}function g(){}function E(a,c,e){var f,d="mixpanel"===e?s:s[e];if(d&&!b.isArray(d))p.error("You have already initialized "+e);else return f=new g,f.O(a,c,e),f.people=new l,f.people.O(f),A=A||f.d("debug"),b.e(d)||(f.M.call(f.people,d.people),f.M(d)),f}function k(a){this.props={};this.da=v;this.name=a.cookie_name?"mp_"+a.cookie_name:"mp_"+a.token+"_mixpanel";this.load();this.xa(a);this.hb(a);this.save()}function F(){this.pa="submit"}function B(){this.pa="click"}function w(){}
function x(){if(!x.La)K=x.La=o,L=v,b.a(y,function(a){a.Ba()})}var J=Array.prototype,z=Object.prototype,M=J.slice,D=z.toString,G=z.hasOwnProperty,t=window.console,H=window.navigator,r=window.document,u=H.userAgent,O="__mps,__mpso,__mpa,__mpap,$people_distinct_id,__alias".split(","),z=s&&s.__SV||0,I=window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,L=!I&&-1==u.indexOf("MSIE"),b={},A=v,P={api_host:("https:"==r.location.protocol?"https://":"http://")+"api.mixpanel.com",cross_subdomain_cookie:o,
cookie_name:"",loaded:C(),store_google:o,save_referrer:o,test:v,verbose:v,img:v,track_pageview:o,debug:v,track_links_timeout:300,cookie_expiration:365,upgrade:v,disable_cookie:v,secure_cookie:v,ip:o},K=v;(function(){var a=J.forEach,c=J.indexOf,e=Array.isArray,f={},d=b.a=function(c,e,b){if(c!=q)if(a&&c.forEach===a)c.forEach(e,b);else if(c.length===+c.length)for(var d=0,g=c.length;d<g&&!(d in c&&e.call(b,c[d],d,c)===f);d++);else for(d in c)if(G.call(c,d)&&e.call(b,c[d],d,c)===f)break};b.extend=function(a){d(M.call(arguments,
1),function(c){for(var e in c)void 0!==c[e]&&(a[e]=c[e])});return a};b.isArray=e||function(a){return"[object Array]"===D.call(a)};b.Sa=function(a){try{return/^\s*\bfunction\b/.test(a)}catch(c){return v}};b.Qa=function(a){return!(!a||!G.call(a,"callee"))};b.q=function(a){return!a?[]:a.q?a.q():b.isArray(a)||b.Qa(a)?M.call(a):b.jb(a)};b.jb=function(a){var c=[];if(a==q)return c;d(a,function(a){c[c.length]=a});return c};b.lb=function(a){return a};b.ia=function(a,e){var b=v;if(a==q)return b;if(c&&a.indexOf===
c)return-1!=a.indexOf(e);d(a,function(a){if(b||(b=a===e))return f});return b};b.h=function(a,c){return-1!==a.indexOf(c)}})();b.ka=function(a,c){a.prototype=new c;a.bb=c.prototype};b.g=function(a){return a===Object(a)&&!b.isArray(a)};b.D=function(a){if(b.g(a)){for(var c in a)if(G.call(a,c))return v;return o}return v};b.e=function(a){return void 0===a};b.ma=function(a){return"[object String]"==D.call(a)};b.Ra=function(a){return"[object Date]"==D.call(a)};b.Ta=function(a){return"[object Number]"==D.call(a)};
b.ga=function(a){b.a(a,function(c,e){b.Ra(c)?a[e]=b.Ma(c):b.g(c)&&(a[e]=b.ga(c))});return a};b.Ma=function(a){function c(a){return 10>a?"0"+a:a}return a.getUTCFullYear()+"-"+c(a.getUTCMonth()+1)+"-"+c(a.getUTCDate())+"T"+c(a.getUTCHours())+":"+c(a.getUTCMinutes())+":"+c(a.getUTCSeconds())};b.G=function(a){var c={};b.a(a,function(a,f){b.ma(a)&&0<a.length&&(c[f]=a)});return c};b.truncate=function(a,c){var e;"string"===typeof a?e=a.slice(0,c):b.isArray(a)?(e=[],b.a(a,function(a){e.push(b.truncate(a,
c))})):b.g(a)?(e={},b.a(a,function(a,d){e[d]=b.truncate(a,c)})):e=a;return e};b.s=function(){return function(a){function c(a,b){var j="",i=0,h=i="",h=0,g=j,m=[],n=b[a];n&&"object"===typeof n&&"function"===typeof n.toJSON&&(n=n.toJSON(a));switch(typeof n){case "string":return e(n);case "number":return isFinite(n)?""+n:"null";case "boolean":case "null":return""+n;case "object":if(!n)return"null";j+="    ";m=[];if("[object Array]"===D.apply(n)){h=n.length;for(i=0;i<h;i+=1)m[i]=c(i,n)||"null";return h=
0===m.length?"[]":j?"[\n"+j+m.join(",\n"+j)+"\n"+g+"]":"["+m.join(",")+"]"}for(i in n)G.call(n,i)&&(h=c(i,n))&&m.push(e(i)+(j?": ":":")+h);return h=0===m.length?"{}":j?"{"+m.join(",")+""+g+"}":"{"+m.join(",")+"}"}}function e(a){var c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,b={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};c.lastIndex=0;return c.test(a)?'"'+a.replace(c,function(a){var c=
b[a];return"string"===typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}return c("",{"":a})}}();b.I=function(){function a(){switch(h){case "t":return d("t"),d("r"),d("u"),d("e"),o;case "f":return d("f"),d("a"),d("l"),d("s"),d("e"),v;case "n":return d("n"),d("u"),d("l"),d("l"),q}j("Unexpected '"+h+"'")}function c(){for(;h&&" ">=h;)d()}function b(){var a,c,e="",f;if('"'===h)for(;d();){if('"'===h)return d(),e;if("\\"===h)if(d(),"u"===h){for(c=f=0;4>c;c+=1){a=parseInt(d(),
16);if(!isFinite(a))break;f=16*f+a}e+=String.fromCharCode(f)}else if("string"===typeof g[h])e+=g[h];else break;else e+=h}j("Bad string")}function f(){var a;a="";"-"===h&&(a="-",d("-"));for(;"0"<=h&&"9">=h;)a+=h,d();if("."===h)for(a+=".";d()&&"0"<=h&&"9">=h;)a+=h;if("e"===h||"E"===h){a+=h;d();if("-"===h||"+"===h)a+=h,d();for(;"0"<=h&&"9">=h;)a+=h,d()}a=+a;if(isFinite(a))return a;j("Bad number")}function d(a){a&&a!==h&&j("Expected '"+a+"' instead of '"+h+"'");h=m.charAt(i);i+=1;return h}function j(a){throw{name:"SyntaxError",
message:a,kb:i,text:m};}var i,h,g={'"':'"',"\\":"\\","/":"/",b:"\u0008",f:"\u000c",n:"\n",r:"\r",t:"\t"},m,n;n=function(){c();switch(h){case "{":var i;a:{var g,m={};if("{"===h){d("{");c();if("}"===h){d("}");i=m;break a}for(;h;){g=b();c();d(":");Object.hasOwnProperty.call(m,g)&&j('Duplicate key "'+g+'"');m[g]=n();c();if("}"===h){d("}");i=m;break a}d(",");c()}}j("Bad object")}return i;case "[":a:{i=[];if("["===h){d("[");c();if("]"===h){d("]");g=i;break a}for(;h;){i.push(n());c();if("]"===h){d("]");
g=i;break a}d(",");c()}}j("Bad array")}return g;case '"':return b();case "-":return f();default:return"0"<=h&&"9">=h?f():a()}};return function(a){m=a;i=0;h=" ";a=n();c();h&&j("Syntax error");return a}}();b.ca=function(a){var c,e,f,d,j=0,i=0,h="",h=[];if(!a)return a;a=b.ib(a);do c=a.charCodeAt(j++),e=a.charCodeAt(j++),f=a.charCodeAt(j++),d=c<<16|e<<8|f,c=d>>18&63,e=d>>12&63,f=d>>6&63,d&=63,h[i++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e)+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d);while(j<a.length);h=h.join("");switch(a.length%3){case 1:h=h.slice(0,-2)+"==";break;case 2:h=h.slice(0,-1)+"="}return h};b.ib=function(a){var a=(a+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n"),c="",b,f,d=0,j;b=f=0;d=a.length;for(j=0;j<d;j++){var i=a.charCodeAt(j),h=q;128>i?f++:h=127<i&&2048>i?String.fromCharCode(i>>6|192,i&63|128):String.fromCharCode(i>>
12|224,i>>6&63|128,i&63|128);h!==q&&(f>b&&(c+=a.substring(b,f)),c+=h,b=f=j+1)}f>b&&(c+=a.substring(b,a.length));return c};b.Aa=function(){function a(){function a(c,b){var e,d=0;for(e=0;e<b.length;e++)d|=j[e]<<8*e;return c^d}var c,b,j=[],i=0;for(c=0;c<u.length;c++)b=u.charCodeAt(c),j.unshift(b&255),4<=j.length&&(i=a(i,j),j=[]);0<j.length&&(i=a(i,j));return i.toString(16)}function c(){for(var a=1*new Date,c=0;a==1*new Date;)c++;return a.toString(16)+c.toString(16)}return function(){var b=(screen.height*
screen.width).toString(16);return c()+"-"+Math.random().toString(16).replace(".","")+"-"+a()+"-"+b+"-"+c()}}();b.la=function(a){return/(google web preview|baiduspider|yandexbot|bingbot|googlebot|yahoo! slurp)/i.test(a)?o:v};b.za=function(a){var c,e,f,d=[];"undefined"===typeof c&&(c="&");b.a(a,function(a,c){e=encodeURIComponent(a.toString());f=encodeURIComponent(c);d[d.length]=f+"="+e});return d.join(c)};b.ha=function(a,c){var c=c.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),b=RegExp("[\\?&]"+c+"=([^&#]*)").exec(a);
return b===q||b&&"string"!==typeof b[1]&&b[1].length?"":decodeURIComponent(b[1]).replace(/\+/g," ")};b.cookie={get:function(a){for(var a=a+"=",c=r.cookie.split(";"),b=0;b<c.length;b++){for(var f=c[b];" "==f.charAt(0);)f=f.substring(1,f.length);if(0==f.indexOf(a))return decodeURIComponent(f.substring(a.length,f.length))}return q},parse:function(a){var c;try{c=b.I(b.cookie.get(a))||{}}catch(e){}return c},set:function(a,c,b,f,d){var e;var j="",i="",h="";f&&(e=(j=(j=r.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i))?
j[0]:"")?"; domain=."+j:"",j=e);b&&(i=new Date,i.setTime(i.getTime()+864E5*b),i="; expires="+i.toGMTString());d&&(h="; secure");r.cookie=a+"="+encodeURIComponent(c)+i+"; path=/"+j+h},remove:function(a,c){b.cookie.set(a,"",-1,c)}};b.ra=function(){function a(a,f,d){return function(j){if(j=j||c(window.event)){var i=o,h;b.Sa(d)&&(h=d(j));j=f.call(a,j);if(v===h||v===j)i=v;return i}}}function c(a){if(a)a.preventDefault=c.preventDefault,a.stopPropagation=c.stopPropagation;return a}c.preventDefault=function(){this.returnValue=
v};c.stopPropagation=function(){this.cancelBubble=o};return function(c,b,d,j){c?c.addEventListener&&!j?c.addEventListener(b,d,v):(b="on"+b,c[b]=a(c,d,c[b])):p.error("No valid element provided to register_event")}}();b.Ka=function(){function a(a,b){return 0<=(" "+a.className+" ").replace(c," ").indexOf(" "+b+" ")}var c=/[\t\r\n]/g;return function(c){if(!r.getElementsByTagName)return[];for(var c=c.split(" "),f,d=Array(r),j=0;j<c.length;j++)if(f=c[j].replace(/^\s+/,"").replace(/\s+$/,""),-1<f.indexOf("#")){f=
f.split("#");var i=f[0],d=r.getElementById(f[1]);if(!d||i&&d.nodeName.toLowerCase()!=i)return[];d=Array(d)}else if(-1<f.indexOf(".")){f=f.split(".");var i=f[0],h=f[1];i||(i="*");f=[];for(var g=0,m=0;m<d.length;m++){var n;n="*"==i?d[m].all?d[m].all:d[m].getElementsByTagName("*"):d[m].getElementsByTagName(i);for(var k=0;k<n.length;k++)f[g++]=n[k]}d=[];for(g=i=0;g<f.length;g++)f[g].className&&b.ma(f[g].className)&&a(f[g],h)&&(d[i++]=f[g])}else if(f.match(/^(\w*)\[(\w+)([=~\|\^\$\*]?)=?"?([^\]"]*)"?\]$/)){var i=
RegExp.$1,l=RegExp.$2,h=RegExp.$3,p=RegExp.$4;i||(i="*");f=[];for(m=g=0;m<d.length;m++){n="*"==i?d[m].all?d[m].all:d[m].getElementsByTagName("*"):d[m].getElementsByTagName(i);for(k=0;k<n.length;k++)f[g++]=n[k]}d=[];i=0;switch(h){case "=":h=function(a){return a.getAttribute(l)==p};break;case "~":h=function(a){return a.getAttribute(l).match(RegExp("\\b"+p+"\\b"))};break;case "|":h=function(a){return a.getAttribute(l).match(RegExp("^"+p+"-?"))};break;case "^":h=function(a){return 0==a.getAttribute(l).indexOf(p)};
break;case "$":h=function(a){return a.getAttribute(l).lastIndexOf(p)==a.getAttribute(l).length-p.length};break;case "*":h=function(a){return-1<a.getAttribute(l).indexOf(p)};break;default:h=function(a){return a.getAttribute(l)}}d=[];for(g=i=0;g<f.length;g++)h(f[g])&&(d[i++]=f[g])}else{i=f;f=[];for(m=g=0;m<d.length;m++){n=d[m].getElementsByTagName(i);for(k=0;k<n.length;k++)f[g++]=n[k]}d=f}return d}}();b.info={Ga:function(){var a="",c={};b.a("utm_source utm_medium utm_campaign utm_content utm_term".split(" "),
function(e){a=b.ha(r.URL,e);a.length&&(c[e]=a)});return c},Xa:function(a){return 0===a.search("https?://(.*)google.([^/?]*)")?"google":0===a.search("https?://(.*)bing.com")?"bing":0===a.search("https?://(.*)yahoo.com")?"yahoo":0===a.search("https?://(.*)duckduckgo.com")?"duckduckgo":q},Ya:function(a){var c=b.info.Xa(a),e={};if(c!==q)e.$search_engine=c,a=b.ha(a,"yahoo"!=c?"q":"p"),a.length&&(e.mp_keyword=a);return e},A:function(a,c,e){c=c||"";return e?b.h(a,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(a)?
"BlackBerry":b.h(a,"FBIOS")?"Facebook Mobile":b.h(a,"Chrome")?"Chrome":b.h(a,"CriOS")?"Chrome iOS":b.h(c,"Apple")?b.h(a,"Mobile")?"Mobile Safari":"Safari":b.h(a,"Android")?"Android Mobile":b.h(a,"Konqueror")?"Konqueror":b.h(a,"Firefox")?"Firefox":b.h(a,"MSIE")||b.h(a,"Trident/")?"Internet Explorer":b.h(a,"Gecko")?"Mozilla":""},Z:function(){return/Windows/i.test(u)?/Phone/.test(u)?"Windows Mobile":"Windows":/(iPhone|iPad|iPod)/.test(u)?"iOS":/Android/.test(u)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(u)?
"BlackBerry":/Mac/i.test(u)?"Mac OS X":/Linux/.test(u)?"Linux":""},fa:function(a){return/iPad/.test(a)?"iPad":/iPod/.test(a)?"iPod Touch":/iPhone/.test(a)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(a)?"BlackBerry":/Windows Phone/i.test(a)?"Windows Phone":/Android/.test(a)?"Android":""},qa:function(a){a=a.split("/");return 3<=a.length?a[2]:""},F:function(){return b.extend(b.G({$os:b.info.Z(),$browser:b.info.A(u,H.vendor,window.opera),$referrer:r.referrer,$referring_domain:b.info.qa(r.referrer),$device:b.info.fa(u)}),
{$screen_height:screen.height,$screen_width:screen.width,mp_lib:"web"})},Wa:function(){return b.G({$os:b.info.Z(),$browser:b.info.A(u,H.vendor,window.opera)})},Va:function(a){return b.G({mp_page:a,mp_referrer:r.referrer,mp_browser:b.info.A(u,H.vendor,window.opera),mp_platform:b.info.Z()})}};var p={log:function(){if(A&&!b.e(t)&&t)try{t.log.apply(t,arguments)}catch(a){b.a(arguments,function(a){t.log(a)})}},error:function(){if(A&&!b.e(t)&&t){var a=["Mixpanel error:"].concat(b.q(arguments));try{t.error.apply(t,
a)}catch(c){b.a(a,function(a){t.error(a)})}}},T:function(){if(!b.e(t)&&t){var a=["Mixpanel error:"].concat(b.q(arguments));try{t.error.apply(t,a)}catch(c){b.a(a,function(a){t.error(a)})}}}};w.prototype.B=C();w.prototype.V=C();w.prototype.S=C();w.prototype.Y=function(a){this.na=a;return this};w.prototype.l=function(a,c,e,f){var d=this,j=b.Ka(a);if(0==j.length)p.error("The DOM query ("+a+") returned 0 elements");else return b.a(j,function(a){b.ra(a,this.pa,function(a){var b={},i=d.B(e,this),j=d.na.d("track_links_timeout");
d.V(a,this,b);window.setTimeout(d.va(f,i,b,o),j);d.na.l(c,i,d.va(f,i,b))})},this),o};w.prototype.va=function(a,c,b,f){var f=f||v,d=this;return function(){if(!b.Fa)b.Fa=o,a&&a(f,c)===v||d.S(c,b,f)}};w.prototype.B=function(a,c){return"function"===typeof a?a(c):b.extend({},a)};b.ka(B,w);B.prototype.B=function(a,c){var b=B.bb.B.apply(this,arguments);if(c.href)b.url=c.href;return b};B.prototype.V=function(a,c,b){b.oa=2===a.which||a.metaKey||"_blank"===c.target;b.href=c.href;b.oa||a.preventDefault()};B.prototype.S=
function(a,c){c.oa||setTimeout(function(){window.location=c.href},0)};b.ka(F,w);F.prototype.V=function(a,c,b){b.element=c;a.preventDefault()};F.prototype.S=function(a,c){setTimeout(function(){c.element.submit()},0)};k.prototype.F=function(){var a={};b.a(this.props,function(c,e){b.ia(O,e)||(a[e]=c)});return a};k.prototype.load=function(){if(!this.disabled){var a=b.cookie.parse(this.name);a&&(this.props=b.extend({},a))}};k.prototype.hb=function(a){var c=a.upgrade,e;if(c)e="mp_super_properties","string"===
typeof c&&(e=c),c=b.cookie.parse(e),b.cookie.remove(e),b.cookie.remove(e,o),c&&(this.props=b.extend(this.props,c.all,c.events));if(!a.cookie_name&&"mixpanel"!==a.name&&(e="mp_"+a.token+"_"+a.name,c=b.cookie.parse(e)))b.cookie.remove(e),b.cookie.remove(e,o),this.k(c)};k.prototype.save=function(){this.disabled||b.cookie.set(this.name,b.s(this.props),this.W,this.U,this.sa)};k.prototype.remove=function(){b.cookie.remove(this.name,v);b.cookie.remove(this.name,o)};k.prototype.clear=function(){this.remove();
this.props={}};k.prototype.k=function(a,c,e){return b.g(a)?("undefined"===typeof c&&(c="None"),this.W="undefined"===typeof e?this.ea:e,b.a(a,function(a,b){if(!this.props[b]||this.props[b]===c)this.props[b]=a},this),this.save(),o):v};k.prototype.p=function(a,c){return b.g(a)?(this.W="undefined"===typeof c?this.ea:c,b.extend(this.props,a),this.save(),o):v};k.prototype.H=function(a){a in this.props&&(delete this.props[a],this.save())};k.prototype.gb=function(){if(!this.da)this.k(b.info.Ga()),this.da=
o};k.prototype.ya=function(a){this.p(b.info.Ya(a))};k.prototype.$=function(a){this.k({$initial_referrer:a||"$direct",$initial_referring_domain:b.info.qa(a)||"$direct"},"")};k.prototype.Oa=function(){return b.G({$initial_referrer:this.props.$initial_referrer,$initial_referring_domain:this.props.$initial_referring_domain})};k.prototype.xa=function(a){this.ea=this.W=a.cookie_expiration;this.$a(a.disable_cookie);this.Za(a.cross_subdomain_cookie);this.ab(a.secure_cookie)};k.prototype.$a=function(a){(this.disabled=
a)&&this.remove()};k.prototype.Za=function(a){if(a!==this.U)this.U=a,this.remove(),this.save()};k.prototype.Na=function(){return this.U};k.prototype.ab=function(a){if(a!==this.sa)this.sa=a?o:v,this.remove(),this.save()};k.prototype.j=function(a,c){var e=this.N(a),f=c[a],d=this.w("$set"),j=this.w("$set_once"),i=this.w("$add"),h=this.w("$append",[]);"__mps"===e?(b.extend(d,f),this.z("$add",f)):"__mpso"===e?b.a(f,function(a,c){c in j||(j[c]=a)}):"__mpa"===e?b.a(f,function(a,c){c in d?d[c]+=a:(c in i||
(i[c]=0),i[c]+=a)},this):"__mpap"===e&&h.push(f);p.log("MIXPANEL PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):");p.log(c);this.save()};k.prototype.z=function(a,c){var e=this.m(a);b.e(e)||(b.a(c,function(a,c){delete e[c]},this),this.save())};k.prototype.N=function(a){if("$set"===a)return"__mps";if("$set_once"===a)return"__mpso";if("$add"===a)return"__mpa";if("$append"===a)return"__mpap";p.error("Invalid queue:",a)};k.prototype.m=function(a){return this.props[this.N(a)]};k.prototype.w=function(a,c){var e=
this.N(a),c=b.e(c)?{}:c;return this.props[e]||(this.props[e]=c)};g.prototype.Y=function(a,c,b){if("undefined"===typeof b)p.error("You must name your new library: init(token, config, name)");else if("mixpanel"===b)p.error("You must initialize the main mixpanel object right after you include the Mixpanel js snippet");else return a=E(a,c,b),s[b]=a,a.P(),a};g.prototype.O=function(a,c,e){this.__loaded=o;this.config={};this.ta(b.extend({},P,c,{name:e,token:a,callback_fn:("mixpanel"===e?e:"mixpanel."+e)+
"._jsc"}));this._jsc=C();this.K=[];this.L=[];this.J=[];this.u={disable_all_events:v,identify_called:v};this.cookie=new k(this.config);this.k({distinct_id:b.Aa()},"")};g.prototype.P=function(){this.d("loaded")(this);this.d("track_pageview")&&this.wa()};g.prototype.Ba=function(){b.a(this.K,function(a){this.R.apply(this,a)},this);b.a(this.L,function(a){this.i.apply(this,a)},this);delete this.K;delete this.L};g.prototype.R=function(a,c){if(this.d("img"))return p.error("You can't use DOM tracking functions with img = true."),
v;if(!K)return this.K.push([a,c]),v;var b=(new a).Y(this);return b.l.apply(b,c)};g.prototype.ba=function(a,c){if(b.e(a))return q;if(I)return function(b){a(b,c)};var e=this._jsc,f=""+Math.floor(1E8*Math.random()),d=this.d("callback_fn")+'["'+f+'"]';e[f]=function(b){delete e[f];a(b,c)};return d};g.prototype.i=function(a,c,e){if(L)this.L.push(arguments);else{var f=this.d("verbose");this.d("test")&&(c.test=1);f&&(c.verbose=1);this.d("img")&&(c.img=1);if(!I)if(e)c.callback=e;else if(f||this.d("test"))c.callback=
"(function(){})";c.ip=this.d("ip")?1:0;c._=(new Date).getTime().toString();a+="?"+b.za(c);if("img"in c){var d=r.createElement("img");d.src=a;r.body.appendChild(d)}else if(I){var g=new XMLHttpRequest;g.open("GET",a,o);g.withCredentials=o;g.onreadystatechange=function(){if(4===g.readyState)if(200===g.status)e&&(f?e(b.I(g.responseText)):e(Number(g.responseText)));else{var a="Bad HTTP status: "+g.status+" "+g.statusText;p.error(a);e&&(f?e({status:0,error:a}):e(0))}};g.send(q)}else{d=r.createElement("script");
d.type="text/javascript";d.async=o;d.defer=o;d.src=a;var i=r.getElementsByTagName("script")[0];i.parentNode.insertBefore(d,i)}}};g.prototype.M=function(a){function c(a,c){b.a(a,function(a){this[a[0]].apply(this,a.slice(1))},c)}var e,f=[],d=[],g=[];b.a(a,function(a){a&&(e=a[0],"function"===typeof a?a.call(this):b.isArray(a)&&"alias"===e?f.push(a):b.isArray(a)&&-1!=e.indexOf("track")&&"function"===typeof this[e]?g.push(a):d.push(a))},this);c(f,this);c(d,this);c(g,this)};g.prototype.push=function(a){this.M([a])};
g.prototype.disable=function(a){"undefined"===typeof a?this.u.Ja=o:this.J=this.J.concat(a)};g.prototype.l=function(a,c,e){if("undefined"===typeof a)p.error("No event name provided to mixpanel.track");else if(b.la(u)||this.u.Ja||b.ia(this.J,a))"undefined"!==typeof e&&e(0);else return c=c||{},c.token=c.mb||this.d("token"),this.cookie.ya(r.referrer),this.d("store_google")&&this.cookie.gb(),this.d("save_referrer")&&this.cookie.$(r.referrer),c=b.extend({},b.info.F(),this.cookie.F(),c),a=b.truncate({event:a,
properties:c},255),c=b.s(a),c=b.ca(c),p.log("MIXPANEL REQUEST:"),p.log(a),this.i(this.d("api_host")+"/track/",{data:c},this.ba(e,a)),a};g.prototype.wa=function(a){if("undefined"===typeof a)a=r.location.href;this.l("mp_page_view",b.info.Va(a))};g.prototype.fb=function(){return this.R.call(this,B,arguments)};g.prototype.eb=function(){return this.R.call(this,F,arguments)};g.prototype.p=function(a,c){this.cookie.p(a,c)};g.prototype.k=function(a,c,b){this.cookie.k(a,c,b)};g.prototype.H=function(a){this.cookie.H(a)};
g.prototype.Q=function(a,c){var b={};b[a]=c;this.p(b)};g.prototype.X=function(a,b,e,f,d){a!=this.o()&&a!=this.C("__alias")&&(this.H("__alias"),this.Q("distinct_id",a));this.u.Pa=o;this.people.Da(b,e,f,d)};g.prototype.o=function(){return this.C("distinct_id")};g.prototype.Ea=function(a,c){if(a===this.C("$people_distinct_id"))return p.T("Attempting to create alias for existing People user - aborting."),-2;var e=this;b.e(c)&&(c=this.o());if(a!==c)return this.Q("__alias",a),this.l("$create_alias",{alias:a,
distinct_id:c},function(){e.X(a)});p.error("alias matches current distinct_id - skipping api call.");this.X(a);return-1};g.prototype.Ua=function(a){this.Q("mp_name_tag",a)};g.prototype.ta=function(a){b.g(a)&&(b.extend(this.config,a),this.cookie&&this.cookie.xa(this.config),A=A||this.d("debug"))};g.prototype.d=function(a){return this.config[a]};g.prototype.C=function(a){return this.cookie.props[a]};g.prototype.toString=function(){var a=this.d("name");"mixpanel"!==a&&(a="mixpanel."+a);return a};l.prototype.O=
function(a){this.c=a};l.prototype.set=function(a,c,e){var f={},d={};b.g(a)?(b.a(a,function(a,b){"$distinct_id"==b||"$token"==b||(d[b]=a)}),e=c):d[a]=c;this.v("save_referrer")&&this.c.cookie.$(r.referrer);d=b.extend({},b.info.Wa(),this.c.cookie.Oa(),d);f.$set=d;return this.i(f,e)};l.prototype.ua=function(a,c,e){var f={},d={};b.g(a)?(b.a(a,function(a,b){"$distinct_id"==b||"$token"==b||(d[b]=a)}),e=c):d[a]=c;f.$set_once=d;return this.i(f,e)};l.prototype.ja=function(a,c,e){var f={},d={};b.g(a)?(b.a(a,
function(a,b){"$distinct_id"==b||"$token"==b||(isNaN(parseFloat(a))?p.error("Invalid increment value passed to mixpanel.people.increment - must be a number"):d[b]=a)}),e=c):(b.e(c)&&(c=1),d[a]=c);f.$add=d;return this.i(f,e)};l.prototype.append=function(a,c,e){var f={},d={};b.g(a)?(b.a(a,function(a,b){"$distinct_id"==b||"$token"==b||(d[b]=a)}),e=c):d[a]=c;f.$append=d;return this.i(f,e)};l.prototype.cb=function(a,c,e){if(!b.Ta(a)&&(a=parseFloat(a),isNaN(a))){p.error("Invalid value passed to mixpanel.people.track_charge - must be a number");
return}return this.append("$transactions",b.extend({$amount:a},c),e)};l.prototype.Ha=function(a){return this.set("$transactions",[],a)};l.prototype.Ia=function(){if(this.aa())return this.i({$delete:this.c.o()});p.error("mixpanel.people.delete_user() requires you to call identify() first")};l.prototype.toString=function(){return this.c.toString()+".people"};l.prototype.i=function(a,c){a.$token=this.v("token");a.$distinct_id=this.c.o();var e=b.ga(a),f=b.truncate(e,255),e=b.s(e),e=b.ca(e);if(!this.aa())return this.Ca(a),
b.e(c)||(this.v("verbose")?c({status:-1,error:q}):c(-1)),f;p.log("MIXPANEL PEOPLE REQUEST:");p.log(f);this.c.i(this.v("api_host")+"/engage/",{data:e},this.c.ba(c,f));return f};l.prototype.v=function(a){return this.c.d(a)};l.prototype.aa=function(){return this.c.u.Pa===o};l.prototype.Ca=function(a){"$set"in a?this.c.cookie.j("$set",a):"$set_once"in a?this.c.cookie.j("$set_once",a):"$add"in a?this.c.cookie.j("$add",a):"$append"in a?this.c.cookie.j("$append",a):p.error("Invalid call to _enqueue():",
a)};l.prototype.Da=function(a,c,e,f){var d=this,g=b.extend({},this.c.cookie.m("$set")),i=b.extend({},this.c.cookie.m("$set_once")),h=b.extend({},this.c.cookie.m("$add")),k=this.c.cookie.m("$append");!b.e(g)&&b.g(g)&&!b.D(g)&&(d.c.cookie.z("$set",g),this.set(g,function(c,e){0==c&&d.c.cookie.j("$set",g);b.e(a)||a(c,e)}));!b.e(i)&&b.g(i)&&!b.D(i)&&(d.c.cookie.z("$set_once",i),this.ua(i,function(a,c){0==a&&d.c.cookie.j("$set_once",i);b.e(f)||f(a,c)}));!b.e(h)&&b.g(h)&&!b.D(h)&&(d.c.cookie.z("$add",h),
this.ja(h,function(a,e){0==a&&d.c.cookie.j("$add",h);b.e(c)||c(a,e)}));if(!b.e(k)&&b.isArray(k)&&k.length){for(var l=k.length-1;0<=l;l--){var n=k.pop();d.append(n,function(a,c){0==a&&d.c.cookie.j("$append",n);b.e(e)||e(a,c)})}d.c.cookie.save()}};b.toArray=b.q;b.isObject=b.g;b.JSONEncode=b.s;b.JSONDecode=b.I;b.isBlockedUA=b.la;b.isEmptyObject=b.D;b.info=b.info;b.info.device=b.info.fa;b.info.browser=b.info.A;g.prototype.init=g.prototype.Y;g.prototype.disable=g.prototype.disable;g.prototype.track=g.prototype.l;
g.prototype.track_links=g.prototype.fb;g.prototype.track_forms=g.prototype.eb;g.prototype.track_pageview=g.prototype.wa;g.prototype.register=g.prototype.p;g.prototype.register_once=g.prototype.k;g.prototype.unregister=g.prototype.H;g.prototype.identify=g.prototype.X;g.prototype.alias=g.prototype.Ea;g.prototype.name_tag=g.prototype.Ua;g.prototype.set_config=g.prototype.ta;g.prototype.get_config=g.prototype.d;g.prototype.get_property=g.prototype.C;g.prototype.get_distinct_id=g.prototype.o;g.prototype.toString=
g.prototype.toString;k.prototype.properties=k.prototype.F;k.prototype.update_search_keyword=k.prototype.ya;k.prototype.update_referrer_info=k.prototype.$;k.prototype.get_cross_subdomain=k.prototype.Na;k.prototype.clear=k.prototype.clear;l.prototype.set=l.prototype.set;l.prototype.set_once=l.prototype.ua;l.prototype.increment=l.prototype.ja;l.prototype.append=l.prototype.append;l.prototype.track_charge=l.prototype.cb;l.prototype.clear_charges=l.prototype.Ha;l.prototype.delete_user=l.prototype.Ia;l.prototype.toString=
l.prototype.toString;if(b.e(s))p.T("'mixpanel' object not initialized. Ensure you are using the latest version of the Mixpanel JS Library along with the snippet we provide.");else if(s.__loaded||s.config&&s.cookie)p.error("Mixpanel library has already been downloaded at least once.");else if(1.1>z)p.T("Version mismatch; please ensure you're using the latest version of the Mixpanel code snippet.");else{var y={};b.a(s._i,function(a){var c;a&&b.isArray(a)&&(c=a[a.length-1],a=E.apply(this,a),y[c]=a)});
var Q=function(){b.a(y,function(a,b){"mixpanel"!==b&&(s[b]=a)});s._=b};s.init=function(a,b,e){e?s[e]||(s[e]=y[e]=E(a,b,e),s[e].P()):(e=s,y.mixpanel?e=y.mixpanel:a&&(e=E(a,b,"mixpanel")),window.mixpanel=s=e,Q())};s.init();b.a(y,function(a){a.P()});if(r.addEventListener)"complete"==r.readyState?x():r.addEventListener("DOMContentLoaded",x,v);else if(r.attachEvent){r.attachEvent("onreadystatechange",x);z=v;try{z=window.frameElement==q}catch(R){}if(r.documentElement.doScroll&&z){var N=function(){try{r.documentElement.doScroll("left")}catch(a){setTimeout(N,
1);return}x()};N()}}b.ra(window,"load",x,o)}})(window.mixpanel);
})();
/* Copyright (c) 2008-2013, Quantcast Corp. */

if(!__qc){var __qc={qs:'quantserve.com',ql:'quantcount.com',pixelcalls:[],pmto:null,pmc:undefined,qcdst:function(){if(__qc.qctzoff(0)!=__qc.qctzoff(6))return 1;return 0;},qctzoff:function(m){var d1=new Date(2000,m,1,0,0,0,0);var t=d1.toGMTString();var d3=new Date(t.substring(0,t.lastIndexOf(" ")-1));return d1-d3;},qceuc:function(s){if(typeof(encodeURIComponent)=='function'){return encodeURIComponent(s);}
else{return escape(s);}},qcrnd:function(){return Math.round(Math.random()*2147483647);},qcgc:function(n){var v='';var c=document.cookie;if(!c)return v;var i=c.indexOf(n+"=");var len=i+n.length+1;if(i>-1){var end=c.indexOf(";",len);if(end<0)end=c.length;v=c.substring(len,end);}
return v;},qcdomain:function(){var d=document.domain;if(d.substring(0,4)=="www.")d=d.substring(4,d.length);var a=d.split(".");var len=a.length;if(len<3)return d;var e=a[len-1];if(e.length<3)return d;d=a[len-2]+"."+a[len-1];return d;},qhash2:function(h,s){for(var i=0;i<s.length;i++){h^=s.charCodeAt(i);h+=(h<<1)+(h<<4)+(h<<7)+(h<<8)+(h<<24);}
return h;},qhash:function(s){var h1=0x811c9dc5,h2=0xc9dc5118;var hash1=__qc.qhash2(h1,s);var hash2=__qc.qhash2(h2,s);return(Math.round(Math.abs(hash1*hash2)/65536)).toString(16);},sd:["4dcfa7079941","127fdf7967f31","588ab9292a3f","32f92b0727e5","22f9aa38dfd3","a4abfe8f3e04","18b66bc1325c","958e70ea2f28","bdbf0cb4bbb","65118a0d557","40a1d9db1864","18ae3d985046","3b26460f55d"],qcsc:function(){var s="";var d=__qc.qcdomain();if(__qc.qad==1)return";fpan=u;fpa=";var qh=__qc.qhash(d);for(var i=0;i<__qc.sd.length;i++){if(__qc.sd[i]==qh)return";fpan=u;fpa=";}
var u=document;var a=__qc.qcgc("__qca");if(a.length>0){s+=";fpan=0;fpa="+a;}
else{var da=new Date();var db=new Date(da.getTime()+47335389000);a='P0-'+__qc.qcrnd()+'-'+da.getTime();u.cookie="__qca="+a+"; expires="+db.toGMTString()+"; path=/; domain="+d;a=__qc.qcgc("__qca");if(a.length>0){s+=";fpan=1;fpa="+a;}
else{s+=";fpan=u;fpa=";}}
return s;},qcdc:function(n){document.cookie=n+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/; domain="+__qc.qcdomain();},qpxload:function(img){if(img&&typeof(img.width)=="number"&&img.width==3){__qc.qcdc("__qca");}},qcdnt:function(){var ipf=false;if(typeof(window.external)!=='undefined'&&window.external!==null){var we=window.external;ipf=(typeof we.InPrivateFilteringEnabled==='function'&&we.InPrivateFilteringEnabled()===true);}
return(ipf||navigator.doNotTrack==="1"||navigator.doNotTrack==="yes"||navigator.msDoNotTrack==="1");},qcp:function(p,myqo){var s='',a=null;uh=null;var media='webpage',event='load';if(myqo!=null){for(var k in myqo){if(typeof(k)!='string'){continue;}
if(typeof(myqo[k])!='string'){continue;}
if(k=='uid'||k=='uh'){if(__qc.qcdnt()===false){uh=__qc.qhash(myqo[k]);}
delete myqo[k];continue;}
if(k=='qacct'){a=myqo[k];continue;}
s+=';'+k+p+'='+__qc.qceuc(myqo[k]);if(k=='media'){media=myqo[k];}
if(k=='event'){event=myqo[k];}}}
if(typeof a!="string"){if((typeof _qacct=="undefined")||(_qacct.length==0))return'';a=_qacct;}
if(typeof uh==='string'){myqo['uh']=uh;s+=';uh'+p+'='+__qc.qceuc(uh);}
if(media=='webpage'&&event=='load'){for(var i=0;i<__qc.qpixelsent.length;i++){if(__qc.qpixelsent[i]==a)return'';}
__qc.qpixelsent.push(a);}
if(media=='ad'){__qc.qad=1;}
s=';a'+p+'='+a+s;return s;},qcesc:function(s){return s.replace(/\./g,'%2E').replace(/,/g,'%2C');},qcd:function(o){return(typeof(o)!="undefined"&&o!=null);},qcogl:function(){var m=document.getElementsByTagName('meta');var o='';for(var i=0;i<m.length;i++){if(o.length>=1000)return o;if(__qc.qcd(m[i])&&__qc.qcd(m[i].attributes)&&__qc.qcd(m[i].attributes.property)&&__qc.qcd(m[i].attributes.property.value)&&__qc.qcd(m[i].content)){var p=m[i].attributes.property.value;var c=m[i].content;if(p.length>3&&p.substring(0,3)=='og:'){if(o.length>0)o+=',';var l=(c.length>80)?80:c.length;o+=__qc.qcesc(p.substring(3,p.length))+'.'+__qc.qcesc(c.substring(0,l));}}}
return __qc.qceuc(o);},qchcr:function(e){if(e.source!==window.top){return;}
var params=null;try{params=(typeof JSON==='object')&&JSON.parse(e.data);}catch(e){}
if(params&&typeof params.PrivacyManagerAPI==='object'){clearTimeout(__qc.pmto);if(window.removeEventListener){window.removeEventListener('message',__qc.qchcr,false);}
else if(window.detachEvent){window.detachEvent('onmessage',__qc.qchcr);}
__qc.pmc=params.PrivacyManagerAPI;__qc.firepixels();}},qccfp:function(action,type){__qc.pmc=PrivacyManagerAPI.callApi(action,__qc.qs,__qc.qcdomain(),"truste.com",type);__qc.firepixels();},qcctp:function(action,type){var params={PrivacyManagerAPI:{timestamp:new Date().getTime(),action:action,self:__qc.qs,domain:__qc.qcdomain(),authority:"truste.com",type:type}};if(window.addEventListener){window.addEventListener('message',__qc.qchcr,false);}
else if(window.attachEvent){window.attachEvent('onmessage',__qc.qchcr);}
else{__qc.pmc=true;__qc.firepixels();return;}
try{window.top.postMessage(JSON.stringify(params),"*");}
catch(e){}
__qc.pmto=setTimeout(function(){if(__qc.pmc===undefined){__qc.pmc=true;__qc.firepixels();}},25);},qc_consent:function(action,type){if(__qc.pmc===undefined){if(window.top===window.self){if(typeof PrivacyManagerAPI==='object'&&typeof PrivacyManagerAPI.callApi==='function'){__qc.qccfp(action,type);return;}}
else if(!!window.postMessage&&typeof JSON==='object'){__qc.qcctp(action,type);return;}
__qc.pmc=true;}
__qc.firepixels();},qctv:function(cm_consent){var cmv='';if(typeof cm_consent==='object'){cmv='p';cmv+=cm_consent.consent==='approved'?'a':'d';cmv+=cm_consent.source==='asserted'?'e':'i';}
return cmv;},qcenqp:function(qoptions){var e=(typeof(encodeURIComponent)=='function')?"n":"s";var r=__qc.qcrnd();var sr='',qo='',qm='',url='',ref='',je='u',ns='1';var qocount=0;__qc.qad=0;if(typeof __qc.qpixelsent=="undefined"){__qc.qpixelsent=new Array();}
if(typeof qoptions!="undefined"&&qoptions!=null){__qc.qopts=qoptions;for(var k in __qc.qopts){if(typeof(__qc.qopts[k])=='string'){qo=__qc.qcp("",__qc.qopts);break;}else if(typeof(__qc.qopts[k])=='object'&&__qc.qopts[k]!=null){++qocount;qo+=__qc.qcp("."+qocount,__qc.qopts[k]);}}}else if(typeof _qacct=="string"){qo=__qc.qcp("",null);}
if(qo.length==0)return;var ce=(navigator.cookieEnabled)?"1":"0";if(typeof navigator.javaEnabled!='undefined')je=(navigator.javaEnabled())?"1":"0";if(typeof _qmeta!="undefined"&&_qmeta!=null){qm=';m='+__qc.qceuc(_qmeta);_qmeta=null;}
if(self.screen){sr=screen.width+"x"+screen.height+"x"+screen.colorDepth;}
var d=new Date();var dst=__qc.qcdst();var fp=__qc.qcsc();if(window.location&&window.location.href)url=__qc.qceuc(window.location.href);if(window.document&&window.document.referrer)ref=__qc.qceuc(window.document.referrer);if(self==top)ns='0';var ogl=__qc.qcogl();var p1='/pixel;r='+r+qo+fp+';ns='+ns+';ce='+ce;var p2=';je='+je+';sr='+sr+';enc='+e+';dst='+dst+';et='+d.getTime()+';tzo='+d.getTimezoneOffset()+qm+';ref='+ref+';url='+url+';ogl='+ogl;__qc.pixelcalls.push({p1:p1,p2:p2});__qc.firepixels();},fire:function(o){var src='http';if(window.location.protocol=='https:'){src+='s';}
src+='://pixel.';src+=(__qc.pmc===true||__qc.pmc.consent==='approved')?__qc.qs:__qc.ql;src+=o.p1;src+=';cm='+__qc.qctv(__qc.pmc);src+=o.p2;var img=new Image();img.alt='';img.src=src;img.onload=function(){__qc.qpxload(img);};},firepixels:function(){if(__qc.pmc){while(__qc.pixelcalls.length){__qc.fire(__qc.pixelcalls.shift());}}else{__qc.qc_consent('getConsent','advertising');}},quantserve:function(){if(typeof _qevents=='undefined'){_qevents=[];}
if(typeof _qoptions!="undefined"&&_qoptions!=null){__qc.qcenqp(_qoptions);_qoptions=null;}else if(!_qevents.length&&typeof _qacct!="undefined"){__qc.qcenqp(null);}
if(!__qc.evts){for(var k in _qevents){__qc.qcenqp(_qevents[k]);}
_qevents={push:function(){var a=arguments;for(var i=0;i<a.length;i++){__qc.qcenqp(a[i]);}}};__qc.evts=1;}}};}
function quantserve(){__qc.quantserve();}
quantserve();
// This is the test JavaScript file for Trello's CDN
var trelloCDN = true;
/*!
 * bootstrap-select v1.5.3
 * http://silviomoreto.github.io/bootstrap-select/
 *
 * Copyright 2013 bootstrap-select
 * Licensed under the MIT license
 */

;!function(b){b.expr[":"].icontains=function(e,c,d){return b(e).text().toUpperCase().indexOf(d[3].toUpperCase())>=0};var a=function(d,c,f){if(f){f.stopPropagation();f.preventDefault()}this.$element=b(d);this.$newElement=null;this.$button=null;this.$menu=null;this.$lis=null;this.options=b.extend({},b.fn.selectpicker.defaults,this.$element.data(),typeof c=="object"&&c);if(this.options.title===null){this.options.title=this.$element.attr("title")}this.val=a.prototype.val;this.render=a.prototype.render;this.refresh=a.prototype.refresh;this.setStyle=a.prototype.setStyle;this.selectAll=a.prototype.selectAll;this.deselectAll=a.prototype.deselectAll;this.init()};a.prototype={constructor:a,init:function(){var c=this,d=this.$element.attr("id");this.$element.hide();this.multiple=this.$element.prop("multiple");this.autofocus=this.$element.prop("autofocus");this.$newElement=this.createView();this.$element.after(this.$newElement);this.$menu=this.$newElement.find("> .dropdown-menu");this.$button=this.$newElement.find("> button");this.$searchbox=this.$newElement.find("input");if(d!==undefined){this.$button.attr("data-id",d);b('label[for="'+d+'"]').click(function(f){f.preventDefault();c.$button.focus()})}this.checkDisabled();this.clickListener();if(this.options.liveSearch){this.liveSearchListener()}this.render();this.liHeight();this.setStyle();this.setWidth();if(this.options.container){this.selectPosition()}this.$menu.data("this",this);this.$newElement.data("this",this)},createDropdown:function(){var c=this.multiple?" show-tick":"";var d=this.$element.parent().hasClass("input-group")?" input-group-btn":"";var i=this.autofocus?" autofocus":"";var h=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"";var g=this.options.liveSearch?'<div class="bootstrap-select-searchbox"><input type="text" class="input-block-level form-control" /></div>':"";var f=this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-block"><button class="actions-btn bs-select-all btn btn-sm btn-default">Select All</button><button class="actions-btn bs-deselect-all btn btn-sm btn-default">Deselect All</button></div></div>':"";var e='<div class="btn-group bootstrap-select'+c+d+'"><button type="button" class="btn dropdown-toggle selectpicker" data-toggle="dropdown"'+i+'><span class="filter-option pull-left"></span>&nbsp;<span class="caret"></span></button><div class="dropdown-menu open">'+h+g+f+'<ul class="dropdown-menu inner selectpicker" role="menu"></ul></div></div>';return b(e)},createView:function(){var c=this.createDropdown();var d=this.createLi();c.find("ul").append(d);return c},reloadLi:function(){this.destroyLi();var c=this.createLi();this.$menu.find("ul").append(c)},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){var d=this,e=[],c="";this.$element.find("option").each(function(){var i=b(this);var g=i.attr("class")||"";var h=i.attr("style")||"";var m=i.data("content")?i.data("content"):i.html();var k=i.data("subtext")!==undefined?'<small class="muted text-muted">'+i.data("subtext")+"</small>":"";var j=i.data("icon")!==undefined?'<i class="'+d.options.iconBase+" "+i.data("icon")+'"></i> ':"";if(j!==""&&(i.is(":disabled")||i.parent().is(":disabled"))){j="<span>"+j+"</span>"}if(!i.data("content")){m=j+'<span class="text">'+m+k+"</span>"}if(d.options.hideDisabled&&(i.is(":disabled")||i.parent().is(":disabled"))){e.push('<a style="min-height: 0; padding: 0"></a>')}else{if(i.parent().is("optgroup")&&i.data("divider")!==true){if(i.index()===0){var l=i.parent().attr("label");var n=i.parent().data("subtext")!==undefined?'<small class="muted text-muted">'+i.parent().data("subtext")+"</small>":"";var f=i.parent().data("icon")?'<i class="'+i.parent().data("icon")+'"></i> ':"";l=f+'<span class="text">'+l+n+"</span>";if(i[0].index!==0){e.push('<div class="div-contain"><div class="divider"></div></div><dt>'+l+"</dt>"+d.createA(m,"opt "+g,h))}else{e.push("<dt>"+l+"</dt>"+d.createA(m,"opt "+g,h))}}else{e.push(d.createA(m,"opt "+g,h))}}else{if(i.data("divider")===true){e.push('<div class="div-contain"><div class="divider"></div></div>')}else{if(b(this).data("hidden")===true){e.push("<a></a>")}else{e.push(d.createA(m,g,h))}}}}});b.each(e,function(g,h){var f=h==="<a></a>"?'class="hide"':"";c+='<li rel="'+g+'"'+f+">"+h+"</li>"});if(!this.multiple&&this.$element.find("option:selected").length===0&&!this.options.title){this.$element.find("option").eq(0).prop("selected",true).attr("selected","selected")}return b(c)},createA:function(e,c,d){return'<a tabindex="0" class="'+c+'" style="'+d+'">'+e+'<i class="'+this.options.iconBase+" "+this.options.tickIcon+' icon-ok check-mark"></i></a>'},render:function(e){var d=this;if(e!==false){this.$element.find("option").each(function(i){d.setDisabled(i,b(this).is(":disabled")||b(this).parent().is(":disabled"));d.setSelected(i,b(this).is(":selected"))})}this.tabIndex();var h=this.$element.find("option:selected").map(function(){var k=b(this);var j=k.data("icon")&&d.options.showIcon?'<i class="'+d.options.iconBase+" "+k.data("icon")+'"></i> ':"";var i;if(d.options.showSubtext&&k.attr("data-subtext")&&!d.multiple){i=' <small class="muted text-muted">'+k.data("subtext")+"</small>"}else{i=""}if(k.data("content")&&d.options.showContent){return k.data("content")}else{if(k.attr("title")!==undefined){return k.attr("title")}else{return j+k.html()+i}}}).toArray();var g=!this.multiple?h[0]:h.join(this.options.multipleSeparator);if(this.multiple&&this.options.selectedTextFormat.indexOf("count")>-1){var c=this.options.selectedTextFormat.split(">");var f=this.options.hideDisabled?":not([disabled])":"";if((c.length>1&&h.length>c[1])||(c.length==1&&h.length>=2)){g=this.options.countSelectedText.replace("{0}",h.length).replace("{1}",this.$element.find('option:not([data-divider="true"]):not([data-hidden="true"])'+f).length)}}this.options.title=this.$element.attr("title");if(!g){g=this.options.title!==undefined?this.options.title:this.options.noneSelectedText}this.$button.attr("title",b.trim(g));this.$newElement.find(".filter-option").html(g)},setStyle:function(e,d){if(this.$element.attr("class")){this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device/gi,""))}var c=e?e:this.options.style;if(d=="add"){this.$button.addClass(c)}else{if(d=="remove"){this.$button.removeClass(c)}else{this.$button.removeClass(this.options.style);this.$button.addClass(c)}}},liHeight:function(){if(this.options.size===false){return}var f=this.$menu.parent().clone().find("> .dropdown-toggle").prop("autofocus",false).end().appendTo("body"),g=f.addClass("open").find("> .dropdown-menu"),e=g.find("li > a").outerHeight(),d=this.options.header?g.find(".popover-title").outerHeight():0,h=this.options.liveSearch?g.find(".bootstrap-select-searchbox").outerHeight():0,c=this.options.actionsBox?g.find(".bs-actionsbox").outerHeight():0;f.remove();this.$newElement.data("liHeight",e).data("headerHeight",d).data("searchHeight",h).data("actionsHeight",c)},setSize:function(){var i=this,d=this.$menu,j=d.find(".inner"),u=this.$newElement.outerHeight(),f=this.$newElement.data("liHeight"),s=this.$newElement.data("headerHeight"),m=this.$newElement.data("searchHeight"),h=this.$newElement.data("actionsHeight"),l=d.find("li .divider").outerHeight(true),r=parseInt(d.css("padding-top"))+parseInt(d.css("padding-bottom"))+parseInt(d.css("border-top-width"))+parseInt(d.css("border-bottom-width")),p=this.options.hideDisabled?":not(.disabled)":"",o=b(window),g=r+parseInt(d.css("margin-top"))+parseInt(d.css("margin-bottom"))+2,q,v,t,k=function(){v=i.$newElement.offset().top-o.scrollTop();t=o.height()-v-u};k();if(this.options.header){d.css("padding-top",0)}if(this.options.size=="auto"){var e=function(){var x,w=i.$lis.not(".hide");k();q=t-g;if(i.options.dropupAuto){i.$newElement.toggleClass("dropup",(v>t)&&((q-g)<d.height()))}if(i.$newElement.hasClass("dropup")){q=v-g}if((w.length+w.find("dt").length)>3){x=f*3+g-2}else{x=0}d.css({"max-height":q+"px",overflow:"hidden","min-height":x+s+m+h+"px"});j.css({"max-height":q-s-m-h-r+"px","overflow-y":"auto","min-height":Math.max(x-r,0)+"px"})};e();this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",e);b(window).off("resize.getSize").on("resize.getSize",e);b(window).off("scroll.getSize").on("scroll.getSize",e)}else{if(this.options.size&&this.options.size!="auto"&&d.find("li"+p).length>this.options.size){var n=d.find("li"+p+" > *").filter(":not(.div-contain)").slice(0,this.options.size).last().parent().index();var c=d.find("li").slice(0,n+1).find(".div-contain").length;q=f*this.options.size+c*l+r;if(i.options.dropupAuto){this.$newElement.toggleClass("dropup",(v>t)&&(q<d.height()))}d.css({"max-height":q+s+m+h+"px",overflow:"hidden"});j.css({"max-height":q-r+"px","overflow-y":"auto"})}}},setWidth:function(){if(this.options.width=="auto"){this.$menu.css("min-width","0");var e=this.$newElement.clone().appendTo("body");var c=e.find("> .dropdown-menu").css("width");var d=e.css("width","auto").find("> button").css("width");e.remove();this.$newElement.css("width",Math.max(parseInt(c),parseInt(d))+"px")}else{if(this.options.width=="fit"){this.$menu.css("min-width","");this.$newElement.css("width","").addClass("fit-width")}else{if(this.options.width){this.$menu.css("min-width","");this.$newElement.css("width",this.options.width)}else{this.$menu.css("min-width","");this.$newElement.css("width","")}}}if(this.$newElement.hasClass("fit-width")&&this.options.width!=="fit"){this.$newElement.removeClass("fit-width")}},selectPosition:function(){var e=this,d="<div />",f=b(d),h,g,c=function(i){f.addClass(i.attr("class").replace(/form-control/gi,"")).toggleClass("dropup",i.hasClass("dropup"));h=i.offset();g=i.hasClass("dropup")?0:i[0].offsetHeight;f.css({top:h.top+g,left:h.left,width:i[0].offsetWidth,position:"absolute"})};this.$newElement.on("click",function(){if(e.isDisabled()){return}c(b(this));f.appendTo(e.options.container);f.toggleClass("open",!b(this).hasClass("open"));f.append(e.$menu)});b(window).resize(function(){c(e.$newElement)});b(window).on("scroll",function(){c(e.$newElement)});b("html").on("click",function(i){if(b(i.target).closest(e.$newElement).length<1){f.removeClass("open")}})},mobile:function(){this.$element.addClass("mobile-device").appendTo(this.$newElement);if(this.options.container){this.$menu.hide()}},refresh:function(){this.$lis=null;this.reloadLi();this.render();this.setWidth();this.setStyle();this.checkDisabled();this.liHeight()},update:function(){this.reloadLi();this.setWidth();this.setStyle();this.checkDisabled();this.liHeight()},setSelected:function(c,d){if(this.$lis==null){this.$lis=this.$menu.find("li")}b(this.$lis[c]).toggleClass("selected",d)},setDisabled:function(c,d){if(this.$lis==null){this.$lis=this.$menu.find("li")}if(d){b(this.$lis[c]).addClass("disabled").find("a").attr("href","#").attr("tabindex",-1)}else{b(this.$lis[c]).removeClass("disabled").find("a").removeAttr("href").attr("tabindex",0)}},isDisabled:function(){return this.$element.is(":disabled")},checkDisabled:function(){var c=this;if(this.isDisabled()){this.$button.addClass("disabled").attr("tabindex",-1)}else{if(this.$button.hasClass("disabled")){this.$button.removeClass("disabled")}if(this.$button.attr("tabindex")==-1){if(!this.$element.data("tabindex")){this.$button.removeAttr("tabindex")}}}this.$button.click(function(){return !c.isDisabled()})},tabIndex:function(){if(this.$element.is("[tabindex]")){this.$element.data("tabindex",this.$element.attr("tabindex"));this.$button.attr("tabindex",this.$element.data("tabindex"))}},clickListener:function(){var c=this;b("body").on("touchstart.dropdown",".dropdown-menu",function(d){d.stopPropagation()});this.$newElement.on("click",function(){c.setSize();if(!c.options.liveSearch&&!c.multiple){setTimeout(function(){c.$menu.find(".selected a").focus()},10)}});this.$menu.on("click","li a",function(n){var t=b(this).parent().index(),m=c.$element.val(),i=c.$element.prop("selectedIndex");if(c.multiple){n.stopPropagation()}n.preventDefault();if(!c.isDisabled()&&!b(this).parent().hasClass("disabled")){var l=c.$element.find("option"),d=l.eq(t),f=d.prop("selected"),r=d.parent("optgroup"),p=c.options.maxOptions,h=r.data("maxOptions")||false;if(!c.multiple){l.prop("selected",false);d.prop("selected",true);c.$menu.find(".selected").removeClass("selected");c.setSelected(t,true)}else{d.prop("selected",!f);c.setSelected(t,!f);if((p!==false)||(h!==false)){var o=p<l.filter(":selected").length,j=h<r.find("option:selected").length,s=c.options.maxOptionsText,g=s[0].replace("{n}",p),q=s[1].replace("{n}",h),k=b('<div class="notify"></div>');if((p&&o)||(h&&j)){if(s[2]){g=g.replace("{var}",s[2][p>1?0:1]);q=q.replace("{var}",s[2][h>1?0:1])}d.prop("selected",false);c.$menu.append(k);if(p&&o){k.append(b("<div>"+g+"</div>"));c.$element.trigger("maxReached.bs.select")}if(h&&j){k.append(b("<div>"+q+"</div>"));c.$element.trigger("maxReachedGrp.bs.select")}setTimeout(function(){c.setSelected(t,false)},10);k.delay(750).fadeOut(300,function(){b(this).remove()})}}}if(!c.multiple){c.$button.focus()}else{if(c.options.liveSearch){c.$searchbox.focus()}}if((m!=c.$element.val()&&c.multiple)||(i!=c.$element.prop("selectedIndex")&&!c.multiple)){c.$element.change()}}});this.$menu.on("click","li.disabled a, li dt, li .div-contain, .popover-title, .popover-title :not(.close)",function(d){if(d.target==this){d.preventDefault();d.stopPropagation();if(!c.options.liveSearch){c.$button.focus()}else{c.$searchbox.focus()}}});this.$menu.on("click",".popover-title .close",function(){c.$button.focus()});this.$searchbox.on("click",function(d){d.stopPropagation()});this.$menu.on("click",".actions-btn",function(d){if(c.options.liveSearch){c.$searchbox.focus()}else{c.$button.focus()}d.preventDefault();d.stopPropagation();if(b(this).is(".bs-select-all")){c.selectAll()}else{c.deselectAll()}c.$element.change()});this.$element.change(function(){c.render(false)})},liveSearchListener:function(){var d=this,c=b('<li class="no-results"></li>');this.$newElement.on("click.dropdown.data-api",function(){d.$menu.find(".active").removeClass("active");if(!!d.$searchbox.val()){d.$searchbox.val("");d.$menu.find("li").show();if(!!c.parent().length){c.remove()}}if(!d.multiple){d.$menu.find(".selected").addClass("active")}setTimeout(function(){d.$searchbox.focus()},10)});this.$searchbox.on("input propertychange",function(){if(d.$searchbox.val()){d.$lis.removeClass("hide").find("a").not(":icontains("+d.$searchbox.val()+")").parent().addClass("hide");if(!d.$menu.find("li").filter(":visible:not(.no-results)").length){if(!!c.parent().length){c.remove()}c.html(d.options.noneResultsText+' "'+d.$searchbox.val()+'"').show();d.$menu.find("li").last().after(c)}else{if(!!c.parent().length){c.remove()}}}else{d.$menu.find("li").removeClass("hide");if(!!c.parent().length){c.remove()}}d.$menu.find("li.active").removeClass("active");d.$menu.find("li").filter(":visible:not(.divider)").eq(0).addClass("active").find("a").focus();b(this).focus()});this.$menu.on("mouseenter","a",function(f){d.$menu.find(".active").removeClass("active");b(f.currentTarget).parent().not(".disabled").addClass("active")});this.$menu.on("mouseleave","a",function(){d.$menu.find(".active").removeClass("active")})},val:function(c){if(c!==undefined){this.$element.val(c);this.$element.change();return this.$element}else{return this.$element.val()}},selectAll:function(){if(this.$lis==null){this.$lis=this.$menu.find("li")}this.$element.find("option:enabled").prop("selected",true);b(this.$lis).filter(":not(.disabled)").addClass("selected");this.render(false)},deselectAll:function(){if(this.$lis==null){this.$lis=this.$menu.find("li")}this.$element.find("option:enabled").prop("selected",false);b(this.$lis).filter(":not(.disabled)").removeClass("selected");this.render(false)},keydown:function(p){var q,o,i,n,k,j,r,f,h,m,d,s,g={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};q=b(this);i=q.parent();if(q.is("input")){i=q.parent().parent()}m=i.data("this");if(m.options.liveSearch){i=q.parent().parent()}if(m.options.container){i=m.$menu}o=b("[role=menu] li:not(.divider) a",i);s=m.$menu.parent().hasClass("open");if(!s&&/([0-9]|[A-z])/.test(String.fromCharCode(p.keyCode))){if(!m.options.container){m.setSize();m.$menu.parent().addClass("open");s=m.$menu.parent().hasClass("open")}else{m.$newElement.trigger("click")}m.$searchbox.focus()}if(m.options.liveSearch){if(/(^9$|27)/.test(p.keyCode)&&s&&m.$menu.find(".active").length===0){p.preventDefault();m.$menu.parent().removeClass("open");m.$button.focus()}o=b("[role=menu] li:not(.divider):visible",i);if(!q.val()&&!/(38|40)/.test(p.keyCode)){if(o.filter(".active").length===0){o=m.$newElement.find("li").filter(":icontains("+g[p.keyCode]+")")}}}if(!o.length){return}if(/(38|40)/.test(p.keyCode)){n=o.index(o.filter(":focus"));j=o.parent(":not(.disabled):visible").first().index();r=o.parent(":not(.disabled):visible").last().index();k=o.eq(n).parent().nextAll(":not(.disabled):visible").eq(0).index();f=o.eq(n).parent().prevAll(":not(.disabled):visible").eq(0).index();h=o.eq(k).parent().prevAll(":not(.disabled):visible").eq(0).index();if(m.options.liveSearch){o.each(function(e){if(b(this).is(":not(.disabled)")){b(this).data("index",e)}});n=o.index(o.filter(".active"));j=o.filter(":not(.disabled):visible").first().data("index");r=o.filter(":not(.disabled):visible").last().data("index");k=o.eq(n).nextAll(":not(.disabled):visible").eq(0).data("index");f=o.eq(n).prevAll(":not(.disabled):visible").eq(0).data("index");h=o.eq(k).prevAll(":not(.disabled):visible").eq(0).data("index")}d=q.data("prevIndex");if(p.keyCode==38){if(m.options.liveSearch){n-=1}if(n!=h&&n>f){n=f}if(n<j){n=j}if(n==d){n=r}}if(p.keyCode==40){if(m.options.liveSearch){n+=1}if(n==-1){n=0}if(n!=h&&n<k){n=k}if(n>r){n=r}if(n==d){n=j}}q.data("prevIndex",n);if(!m.options.liveSearch){o.eq(n).focus()}else{p.preventDefault();if(!q.is(".dropdown-toggle")){o.removeClass("active");o.eq(n).addClass("active").find("a").focus();q.focus()}}}else{if(!q.is("input")){var c=[],l,t;o.each(function(){if(b(this).parent().is(":not(.disabled)")){if(b.trim(b(this).text().toLowerCase()).substring(0,1)==g[p.keyCode]){c.push(b(this).parent().index())}}});l=b(document).data("keycount");l++;b(document).data("keycount",l);t=b.trim(b(":focus").text().toLowerCase()).substring(0,1);if(t!=g[p.keyCode]){l=1;b(document).data("keycount",l)}else{if(l>=c.length){b(document).data("keycount",0);if(l>c.length){l=1}}}o.eq(c[l-1]).focus()}}if(/(13|32|^9$)/.test(p.keyCode)&&s){if(!/(32)/.test(p.keyCode)){p.preventDefault()}if(!m.options.liveSearch){b(":focus").click()}else{if(!/(32)/.test(p.keyCode)){m.$menu.find(".active a").click();q.focus()}}b(document).data("keycount",0)}if((/(^9$|27)/.test(p.keyCode)&&s&&(m.multiple||m.options.liveSearch))||(/(27)/.test(p.keyCode)&&!s)){m.$menu.parent().removeClass("open");m.$button.focus()}},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},destroy:function(){this.$newElement.remove();this.$element.remove()}};b.fn.selectpicker=function(e,f){var c=arguments;var g;var d=this.each(function(){if(b(this).is("select")){var m=b(this),l=m.data("selectpicker"),h=typeof e=="object"&&e;if(!l){m.data("selectpicker",(l=new a(this,h,f)))}else{if(h){for(var j in h){l.options[j]=h[j]}}}if(typeof e=="string"){var k=e;if(l[k] instanceof Function){[].shift.apply(c);g=l[k].apply(l,c)}else{g=l.options[k]}}}});if(g!==undefined){return g}else{return d}};b.fn.selectpicker.defaults={style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",noneSelectedText:"Nothing selected",noneResultsText:"No results match",countSelectedText:"{0} of {1} selected",maxOptionsText:["Limit reached ({n} {var} max)","Group limit reached ({n} {var} max)",["items","item"]],width:false,container:false,hideDisabled:false,showSubtext:false,showIcon:true,showContent:true,dropupAuto:true,header:false,liveSearch:false,actionsBox:false,multipleSeparator:", ",iconBase:"glyphicon",tickIcon:"glyphicon-ok",maxOptions:false};b(document).data("keycount",0).on("keydown",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bootstrap-select-searchbox input",a.prototype.keydown).on("focusin.modal",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bootstrap-select-searchbox input",function(c){c.stopPropagation()})}(window.jQuery);
(function() {


}).call(this);
(function() {


}).call(this);
//if(typeof(stlib)=="undefined"){var stlib={}}if(!stlib.functions){stlib.functions=[];stlib.functionCount=0}stlib.global={};stlib.global.hash=document.location.href.split("#");stlib.global.hash.shift();stlib.global.hash=stlib.global.hash.join("#");stlib.dynamicOn=true;stlib.debugOn=false;stlib.debug={count:0,messages:[],debug:function(b,a){if(a&&(typeof console)!="undefined"){console.log(b)}stlib.debug.messages.push(b)},show:function(a){for(message in stlib.debug.messages){if((typeof console)!="undefined"){if(a){/ERROR/.test(stlib.debug.messages[message])?console.log(stlib.debug.messages[message]):null}else{console.log(stlib.debug.messages[message])}}}},showError:function(){stlib.debug.show(true)}};var _$d=function(a){stlib.debug.debug(a,stlib.debugOn)};var _$d0=function(){_$d(" ")};var _$d_=function(){_$d("___________________________________________")};var _$d1=function(a){_$d(_$dt()+"| "+a)};var _$d2=function(a){_$d(_$dt()+"|  * "+a)};var _$de=function(a){_$d(_$dt()+"ERROR: "+a)};var _$dt=function(){var b=new Date();var e=b.getHours();var a=b.getMinutes();var d=b.getSeconds();return e+":"+a+":"+d+" > "};stlib.allServices={adfty:{title:"Adfty"},allvoices:{title:"Allvoices"},amazon_wishlist:{title:"Amazon Wishlist"},arto:{title:"Arto"},baidu:{title:"Baidu"},bebo:{title:"Bebo"},blinklist:{title:"Blinklist"},blip:{title:"Blip"},blogmarks:{title:"Blogmarks"},blogger:{title:"Blogger",type:"post"},brainify:{title:"Brainify"},buddymarks:{title:"BuddyMarks"},buffer:{title:"Buffer"},bus_exchange:{title:"Add to BX",aTitle:"Business Exchange"},care2:{title:"Care2"},chiq:{title:"chiq"},citeulike:{title:"CiteULike"},chiq:{title:"chiq"},connotea:{title:"Connotea"},corank:{title:"coRank"},corkboard:{title:"Corkboard"},current:{title:"Current"},dealsplus:{title:"Dealspl.us"},delicious:{title:"Delicious"},digg:{title:"Digg"},diigo:{title:"Diigo"},dotnetshoutout:{title:".net Shoutout"},dzone:{title:"DZone"},edmodo:{title:"Edmodo"},email:{title:"Email"},evernote:{title:"Evernote"},facebook:{title:"Facebook"},fark:{title:"Fark"},fashiolista:{title:"Fashiolista"},folkd:{title:"folkd.com"},formspring:{title:"Formspring"},fresqui:{title:"Fresqui"},friendfeed:{title:"FriendFeed"},funp:{title:"Funp"},fwisp:{title:"fwisp"},google:{title:"Google"},googleplus:{title:"Google +"},google_bmarks:{title:"Bookmarks"},google_reader:{title:"Google Reader"},google_translate:{title:"Google Translate"},hatena:{title:"Hatena"},hyves:{title:"Hyves"},identi:{title:"identi.ca"},instapaper:{title:"Instapaper"},jumptags:{title:"Jumptags"},kaboodle:{title:"Kaboodle"},linkagogo:{title:"linkaGoGo"},linkedin:{title:"LinkedIn"},livejournal:{title:"LiveJournal",type:"post"},mail_ru:{title:"mail.ru"},meneame:{title:"Meneame"},messenger:{title:"Messenger"},mister_wong:{title:"Mr Wong"},mixx:{title:"Mixx"},moshare:{title:"moShare"},myspace:{title:"MySpace"},n4g:{title:"N4G"},netlog:{title:"Netlog"},netvouz:{title:"Netvouz"},newsvine:{title:"Newsvine"},nujij:{title:"NUjij"},odnoklassniki:{title:"Odnoklassniki"},oknotizie:{title:"Oknotizie"},orkut:{title:"Orkut"},pinterest:{title:"Pinterest"},raise_your_voice:{title:"Raise Your Voice"},reddit:{title:"Reddit"},segnalo:{title:"Segnalo"},sharethis:{title:"ShareThis"},sina:{title:"Sina"},slashdot:{title:"Slashdot"},sonico:{title:"Sonico"},speedtile:{title:"Speedtile"},startaid:{title:"Startaid"},startlap:{title:"Startlap"},stumbleupon:{title:"StumbleUpon"},stumpedia:{title:"Stumpedia"},technorati:{title:"Technorati",dontUseEncodedURL:"Encoded URLs are not allowed"},typepad:{title:"TypePad",type:"post"},tumblr:{title:"Tumblr"},twitter:{title:"Tweet"},viadeo:{title:"Viadeo"},virb:{title:"Virb"},vkontakte:{title:"Vkontakte"},voxopolis:{title:"VOXopolis"},wordpress:{title:"WordPress",type:"post"},xanga:{title:"Xanga"},xerpi:{title:"Xerpi"},xing:{title:"Xing"},yammer:{title:"Yammer"},yigg:{title:"Yigg"}};stlib.allOauthServices={twitter:{title:"Twitter"},linkedIn:{title:"LinkedIn"},facebook:{title:"Facebook"}};stlib.allNativeServices={fblike:{title:"Facebook Like"},fbrec:{title:"Facebook Recommend"},fbsend:{title:"Facebook Send"},fbsub:{title:"Facebook Subscribe"},foursquaresave:{title:"Foursquare Save"},foursquarefollow:{title:"Foursquare Follow"},instagram:{title:"Instagram Badge"},plusone:{title:"Google +1"},pinterestfollow:{title:"Pinterest Follow"},twitterfollow:{title:"Twitter Follow"},youtube:{title:"Youtube Subscribe"}};stlib.allDeprecatedServices={google_bmarks:{title:"Google Bookmarks"},yahoo_bmarks:{title:"Yahoo Bookmarks"}};stlib.allOtherServices={copy:{title:"Copy Paste"},sharenow:{title:"ShareNow"},sharenow_auto:{title:"Frictionless Sharing"},fbunlike:{title:"Facebook Unlike"}};var _all_services=stlib.allServices;stlib.buttonInfo={buttonList:[],addButton:function(a){stlib.buttonInfo.buttonList.push(a)},getButton:function(a){if(!isNaN(a)){if(a>=stlib.buttonInfo.buttonList.length){return false}else{return stlib.buttonInfo.buttonList[a]}}else{for(c=0;c<stlib.buttonInfo.buttonList.length;c++){if(stlib.buttonInfo.buttonList[c].service==a){debug(stlib.buttonInfo.buttonList[c])}}}},clickButton:function(a){if(!isNaN(a)){if(a>=stlib.buttonInfo.buttonList.length){return false}else{if(stlib.buttonInfo.getButton(a).service=="sharethis"||stlib.buttonInfo.getButton(a).service=="email"||stlib.buttonInfo.getButton(a).service=="wordpress"){stlib.buttonInfo.getButton(a).popup()}else{stlib.buttonInfo.getButton(a).element.childNodes[0].onclick()}}}else{for(c=0;c<stlib.buttonInfo.buttonList.length;c++){if(stlib.buttonInfo.buttonList[c].service==a){if(stlib.buttonInfo.getButton(c).service=="sharethis"||stlib.buttonInfo.getButton(c).service=="email"||stlib.buttonInfo.getButton(c).service=="wordpress"){stlib.buttonInfo.getButton(c).popup();return true}else{stlib.buttonInfo.getButton(c).element.childNodes[0].onclick()}}}}},resetButton:function(){stlib.buttonInfo.buttonList=[]},listButton:function(){for(c=0;c<stlib.buttonInfo.buttonList.length;c++){debug(stlib.buttonInfo.buttonList[c])}}};stlib.buttonInfo.resetButton();stlib.messageQueue=function(){var a=this;this.pumpInstance=null;this.queue=[];this.dependencies=["data"];this.sending=true;this.setPumpInstance=function(b){this.pumpInstance=b};this.send=function(f,d){if((typeof(f)=="string")&&(typeof(d)=="string")){_$d_();_$d1("Queueing message: "+d+": "+f)}(typeof(f)=="string")&&(typeof(d)=="string")?this.queue.push([d,f]):null;if(this.sending==false||stlib.browser.ieFallback){if(this.pumpInstance!=null){if(this.dependencies.length>0){for(messageSet in this.queue){if(this.queue[messageSet][0]==this.dependencies[0]){if(this.queue.length>0){_$d1("Current Queue Length: "+this.queue.length);var b=this.queue.shift();this.pumpInstance.broadcastSendMessage(b[1]);this.dependencies.shift();this.sending=true}}}}else{if(this.queue.length>0){_$d1("Current Queue Length: "+this.queue.length);var b=this.queue.shift();this.pumpInstance.broadcastSendMessage(b[1]);this.sending=true}}}else{_$d_();_$d1("Pump is null")}}if((stlib.browser.ieFallback)&&(this.queue.length>0)){var e="process"+stlib.functionCount;stlib.functionCount++;stlib.functions[e]=a.process;setTimeout("stlib.functions['"+e+"']()",500)}};this.process=function(){_$d1("Processing MessageQueue");a.sending=false;_$d(this.queue);a.send()}};stlib.sharer={sharerUrl:(("https:"==document.location.protocol)?"https://ws.":"http://wd.")+"sharethis.com/api/sharer.php",regAuto:new RegExp(/(.*?)_auto$/),constructParamString:function(){stlib.data.validate();stlib.hash.checkURL();var a=stlib.data.pageInfo;var d="?";var b;for(b in a){d+=b+"="+encodeURIComponent(a[b])+"&";_$d1("constructParamStringPageInfo: "+b+": "+a[b])}a=stlib.data.shareInfo;for(b in a){d+=b+"="+encodeURIComponent(a[b])+"&";_$d1("constructParamStringShareInfo: "+b+": "+a[b])}return d.substring(0,d.length-1)},sharePinterest:function(){if(stlib.data.get("image","shareInfo")==false||stlib.data.get("image","shareInfo")==null||stlib.data.get("pinterest_native","shareInfo")=="true"){if(typeof(stWidget)!="undefined"&&typeof(stWidget.closeWidget)==="function"){stWidget.closeWidget()}if(typeof(stcloseWidget)==="function"){stcloseWidget()}if(typeof(stToolbar)!="undefined"&&typeof(stToolbar.closeWidget)==="function"){stToolbar.closeWidget()}var a=document.createElement("script");a.setAttribute("type","text/javascript");a.setAttribute("charset","UTF-8");a.setAttribute("src","//assets.pinterest.com/js/pinmarklet.js?r="+Math.random()*99999999);document.body.appendChild(a)}},share:function(e,a){var d=stlib.sharer.constructParamString();_$d_();_$d1("Initiating a Share with the following url:");_$d2(stlib.sharer.sharerUrl+d);if((stlib.data.get("destination","shareInfo")=="email")||(stlib.data.get("destination","shareInfo")=="pinterest"&&stlib.data.get("source","shareInfo").match(/share4xmobile/)==null&&stlib.data.get("source","shareInfo").match(/share4xpage/)==null&&stlib.data.get("source","shareInfo").match(/5xpage/)==null&&(stlib.data.get("image","shareInfo")==false||stlib.data.get("image","shareInfo")==null))||stlib.data.get("destination","shareInfo")=="snapsets"||stlib.data.get("destination","shareInfo")=="copy"||stlib.data.get("destination","shareInfo")=="plusone"||stlib.data.get("destination","shareInfo").match(stlib.sharer.regAuto)||(typeof(stlib.nativeButtons)!="undefined"&&stlib.nativeButtons.checkNativeButtonSupport(stlib.data.get("destination","shareInfo")))||(stlib.data.get("pinterest_native","shareInfo")!=false&&stlib.data.get("pinterest_native","shareInfo")!=null)){var b=new Image(1,1);b.src=stlib.sharer.sharerUrl+d;b.onload=function(){return}}else{if(typeof(a)!="undefined"&&a==true){window.open(stlib.sharer.sharerUrl+d,(new Date()).valueOf(),"scrollbars=1, status=1, height=480, width=640, resizable=1")}else{window.open(stlib.sharer.sharerUrl+d)}}e?e():null}};stlib.browser={iemode:null,firefox:null,firefoxVersion:null,safari:null,chrome:null,windows:null,mac:null,ieFallback:(/MSIE [6789]/).test(navigator.userAgent),init:function(){if(window.navigator.appName=="Microsoft Internet Explorer"){if(document.documentMode){stlib.browser.iemode=document.documentMode}else{stlib.browser.iemode=5;if(document.compatMode){if(document.compatMode=="CSS1Compat"){stlib.browser.iemode=7}}}}stlib.browser.firefox=(navigator.userAgent.indexOf("Firefox")!=-1)?true:false;stlib.browser.firefoxVersion=(navigator.userAgent.indexOf("Firefox/5.0")!=-1||navigator.userAgent.indexOf("Firefox/9.0")!=-1)?false:true;stlib.browser.safari=(navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1)?true:false;stlib.browser.chrome=(navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")!=-1)?true:false;stlib.browser.windows=(navigator.userAgent.indexOf("Windows")!=-1)?true:false;stlib.browser.mac=(navigator.userAgent.indexOf("Macintosh")!=-1)?true:false},getIEVersion:function(){return stlib.browser.iemode},isFirefox:function(){return stlib.browser.firefox},firefox8Version:function(){return stlib.browser.firefoxVersion},isSafari:function(){return stlib.browser.safari},isWindows:function(){return stlib.browser.windows},isMac:function(){return stlib.browser.mac}};stlib.browser.init();stlib.browser.mobile={mobile:false,uagent:null,android:null,iOs:null,silk:null,windows:null,kindle:null,init:function(){this.uagent=navigator.userAgent.toLowerCase();if(this.isAndroid()){this.mobile=true}else{if(this.isIOs()){this.mobile=true}else{if(this.isSilk()){this.mobile=true}else{if(this.isWindowsPhone()){this.mobile=true}else{if(this.isKindle()){this.mobile=true}}}}}},isMobile:function isMobile(){return this.mobile},isAndroid:function(){if(this.android===null){this.android=this.uagent.indexOf("android")>-1}return this.android},isKindle:function(){if(this.kindle===null){this.kindle=this.uagent.indexOf("kindle")>-1}return this.kindle},isIOs:function isIOs(){if(this.iOs===null){this.iOs=(this.uagent.indexOf("ipad")>-1)||(this.uagent.indexOf("ipod")>-1)||(this.uagent.indexOf("iphone")>-1)}return this.iOs},isSilk:function(){if(this.silk===null){this.silk=this.uagent.indexOf("silk")>-1}return this.silk},isWindowsPhone:function(){if(this.windows===null){this.windows=this.uagent.indexOf("windows phone")>-1}return this.windows},handleForMobileFriendly:function handleForMobileFriendly(d,p,g){if(!this.isMobile()){return false}if(typeof(stLight)==="undefined"){stLight={};stLight.publisher=p.publisher;stLight.sessionID=p.sessionID;stLight.fpc=""}var k=(typeof(d.title)!=="undefined")?d.title:encodeURIComponent(document.title);var a=(typeof(d.url)!=="undefined")?d.url:document.URL;if(p.service=="sharethis"){var k=(typeof(d.title)!=="undefined")?d.title:encodeURIComponent(document.title);var a=(typeof(d.url)!=="undefined")?d.url:document.URL;var b=document.createElement("form");b.setAttribute("method","GET");b.setAttribute("action","http://edge.sharethis.com/share4x/mobile.html");b.setAttribute("target","_blank");var f={url:a,title:k,destination:p.service,publisher:stLight.publisher,fpc:stLight.fpc,sessionID:stLight.sessionID};if(typeof(d.image)!="undefined"&&d.image!=null){f.image=d.image}if(typeof(d.summary)!="undefined"&&d.summary!=null){f.desc=d.summary}if(typeof(g)!="undefined"&&typeof(g.exclusive_services)!="undefined"&&g.exclusive_services!=null){f.exclusive_services=g.exclusive_services}if(typeof(p.exclusive_services)!="undefined"&&p.exclusive_services!=null){f.exclusive_services=p.exclusive_services}if(typeof(g)!="undefined"&&typeof(g.services)!="undefined"&&g.services!=null){f.services=g.services}if(typeof(p.services)!="undefined"&&p.services!=null){f.services=p.services}var l=p;if(typeof(g)!="undefined"){l=g}if(typeof(l.doNotHash)!="undefined"&&l.doNotHash!=null){f.doNotHash=l.doNotHash}if(typeof(d.via)!="undefined"&&d.via!=null){f.via=d.via}f.service=p.service;f.type=p.type;if(stlib.data){var j=stlib.json.encode(stlib.data.pageInfo);var i=stlib.json.encode(stlib.data.shareInfo);if(stlib.browser.isFirefox()&&!stlib.browser.firefox8Version()){j=encodeURIComponent(encodeURIComponent(j));i=encodeURIComponent(encodeURIComponent(i))}else{j=encodeURIComponent(j);i=encodeURIComponent(i)}f.pageInfo=j;f.shareInfo=i}for(var m in f){var e=document.createElement("input");e.setAttribute("type","hidden");e.setAttribute("name",m);e.setAttribute("value",f[m]);b.appendChild(e)}document.body.appendChild(b);b.submit();return true}if(p.service=="email"){var h=a+"%0A%0a";h+="Sent using ShareThis";var n="mailto:?";n+="Subject="+k;n+="&body="+h;window.location.href=n;return true}return false}};stlib.browser.mobile.init();var tpcCookiesEnableCheckingDone=false;var tpcCookiesEnabledStatus=true;stlib.cookie={setCookie:function(e,n,p){var d=(navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1);var b=(navigator.userAgent.indexOf("MSIE")!=-1);if(d||b){var r=(p)?p*24*60*60:0;var k=document.createElement("div");k.setAttribute("id",e);k.setAttribute("type","hidden");document.body.appendChild(k);var a=document.getElementById(e),f=document.createElement("form");try{var m=document.createElement('<iframe name="'+e+'" ></iframe>')}catch(l){m=document.createElement("iframe")}m.name=e;m.src="javascript:false";m.style.display="none";a.appendChild(m);f.action=(("https:"==document.location.protocol)?"https://sharethis.com/":"http://sharethis.com/")+"account/setCookie.php";f.method="POST";var j=document.createElement("input");j.setAttribute("type","hidden");j.setAttribute("name","name");j.setAttribute("value",e);f.appendChild(j);var q=document.createElement("input");q.setAttribute("type","hidden");q.setAttribute("name","value");q.setAttribute("value",n);f.appendChild(q);var o=document.createElement("input");o.setAttribute("type","hidden");o.setAttribute("name","time");o.setAttribute("value",r);f.appendChild(o);f.target=e;a.appendChild(f);f.submit()}else{if(p){var i=new Date();i.setTime(i.getTime()+(p*24*60*60*1000));var g="; expires="+i.toGMTString()}else{var g=""}var h=e+"="+escape(n)+g;h+="; domain="+escape(".sharethis.com")+";path=/";document.cookie=h}},getCookie:function(b){var a=document.cookie.match("(^|;) ?"+b+"=([^;]*)(;|$)");if(a){return(unescape(a[2]))}else{return false}},deleteCookie:function(e){var l="/";var k=".sharethis.com";document.cookie=e.replace(/^\s+|\s+$/g,"")+"="+((l)?";path="+l:"")+((k)?";domain="+k:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT";var d=(navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1);var b=(navigator.userAgent.indexOf("MSIE")!=-1);if(d||b){var h=document.createElement("div");h.setAttribute("id",e);h.setAttribute("type","hidden");document.body.appendChild(h);var a=document.getElementById(e),f=document.createElement("form");try{var j=document.createElement('<iframe name="'+e+'" ></iframe>')}catch(i){j=document.createElement("iframe")}j.name=e;j.src="javascript:false";j.style.display="none";a.appendChild(j);f.action=(("https:"==document.location.protocol)?"https://sharethis.com/":"http://sharethis.com/")+"account/deleteCookie.php";f.method="POST";var g=document.createElement("input");g.setAttribute("type","hidden");g.setAttribute("name","name");g.setAttribute("value",e);f.appendChild(g);f.target=e;a.appendChild(f);f.submit()}},deleteAllSTCookie:function(){var e=document.cookie;e=e.split(";");for(var g=0;g<e.length;g++){var d=e[g];d=d.split("=");if(!/st_optout/.test(d[0])){var f=d[0];var j="/";var h=".edge.sharethis.com";document.cookie=f+"=;path="+j+";domain="+h+";expires=Thu, 01-Jan-1970 00:00:01 GMT"}}},setFpcCookie:function(a,h){var d=new Date;var j=d.getFullYear();var g=d.getMonth()+9;var i=d.getDate();var e=a+"="+escape(h);if(j){var b=new Date(j,g,i);e+="; expires="+b.toGMTString()}var f=stlib.cookie.getDomain();e+="; domain="+escape(f)+";path=/";document.cookie=e},getFpcCookie:function(b){var a=document.cookie.match("(^|;) ?"+b+"=([^;]*)(;|$)");if(a){return(unescape(a[2]))}else{return false}},getDomain:function(){var b=document.domain.split(/\./);var a="";if(b.length>1){a="."+b[b.length-2]+"."+b[b.length-1]}return a},checkCookiesEnabled:function(){if(!tpcCookiesEnableCheckingDone){stlib.cookie.setCookie("STPC","yes",1);if(stlib.cookie.getCookie("STPC")=="yes"){tpcCookiesEnabledStatus=true}else{tpcCookiesEnabledStatus=false}tpcCookiesEnableCheckingDone=true;return tpcCookiesEnabledStatus}else{return tpcCookiesEnabledStatus}},hasLocalStorage:function(){try{localStorage.setItem("stStorage","yes");localStorage.removeItem("stStorage");return true}catch(a){return false}}};stlib.fpc={cookieName:"__unam",cookieValue:"",createFpc:function(){if(!document.domain||document.domain.search(/\.gov/)>0){return false}var i=stlib.cookie.getFpcCookie(stlib.fpc.cookieName);if(i==false){var d=Math.round(Math.random()*2147483647);d=d.toString(16);var g=(new Date()).getTime();g=g.toString(16);var f=window.location.hostname.split(/\./)[1];if(!f){return false}var h="";h=stlib.fpc.determineHash(f)+"-"+g+"-"+d+"-1";i=h}else{var b=i;var a=b.split(/\-/);if(a.length==4){var e=Number(a[3]);e++;i=a[0]+"-"+a[1]+"-"+a[2]+"-"+e}}stlib.cookie.setFpcCookie(stlib.fpc.cookieName,i);stlib.fpc.cookieValue=i;return i},determineHash:function(b){var f=0;var e=0;for(var d=b.length-1;d>=0;d--){var a=parseInt(b.charCodeAt(d));f=((f<<8)&268435455)+a+(a<<12);if((e=f&161119850)!=0){f=(f^(e>>20))}}return f.toString(16)}};stlib.validate={regexes:{notEncoded:/(%[^0-7])|(%[0-7][^0-9a-f])|["{}\[\]\<\>\\\^`\|]/gi,tooEncoded:/%25([0-7][0-9a-f])/gi,publisher:/^(([a-z]{2}(-|\.))|)[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i,url:/^(http|https):\/\/([a-z0-9!'\(\)\*\.\-\+:]*(\.)[a-z0-9!'\(\)\*\.\-\+:]*)((\/[a-z0-9!'\(\)\*\.\-\+:]*)*)/i,fpc:/^[0-9a-f]{7}-[0-9a-f]{11}-[0-9a-f]{7,8}-[0-9]*$/i,sessionID:/^[0-9]*\.[0-9a-f]*$/i,title:/.*/,description:/.*/,buttonType:/^(chicklet|vcount|hcount|large|custom|button|)$/,comment:/.*/,destination:/.*/,source:/.*/,image:/(^(http|https):\/\/([a-z0-9!'\(\)\*\.\-\+:]*(\.)[a-z0-9!'\(\)\*\.\-\+:]*)((\/[a-z0-9!'\(\)\*\.\-\+:]*)*))|^$/i,sourceURL:/^(http|https):\/\/([a-z0-9!'\(\)\*\.\-\+:]*(\.)[a-z0-9!'\(\)\*\.\-\+:]*)((\/[a-z0-9!'\(\)\*\.\-\+:]*)*)/i,sharURL:/(^(http|https):\/\/([a-z0-9!'\(\)\*\.\-\+:]*(\.)[a-z0-9!'\(\)\*\.\-\+:]*)((\/[a-z0-9!'\(\)\*\.\-\+:]*)*))|^$/i}};stlib.html={encode:function(a){if(stlib.html.startsWith(a,"http")){return String(a).replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}else{return String(a).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}},startsWith:function(a,b){return(a.match("^"+b)==b)}};if(typeof(stlib.data)=="undefined"){stlib.data={bInit:false,publisherKeySet:false,pageInfo:{},shareInfo:{},resetPageData:function(){stlib.data.pageInfo.fpc="ERROR";stlib.data.pageInfo.sessionID="ERROR";stlib.data.pageInfo.hostname="ERROR";stlib.data.pageInfo.location="ERROR"},resetShareData:function(){stlib.data.shareInfo={};stlib.data.shareInfo.url="ERROR";stlib.data.shareInfo.sharURL="";stlib.data.shareInfo.buttonType="ERROR";stlib.data.shareInfo.destination="ERROR";stlib.data.shareInfo.source="ERROR"},resetData:function(){stlib.data.resetPageData();stlib.data.resetShareData()},validate:function(){var a=stlib.validate.regexes;function b(f,h){if(h!=encodeURIComponent(h)){a.notEncoded.test(h)?_$de(f+" not encoded"):null;a.tooEncoded.test(h)?_$de(f+" has too much encoding"):null}var g=a[f]?a[f].test(decodeURIComponent(h)):true;if(!g){_$de(f+" failed validation")}}var d=stlib.data.pageInfo;var e;for(e in d){b(e,d[e])}d=stlib.data.shareInfo;for(e in d){b(e,d[e])}},init:function(){if(!stlib.data.bInit){stlib.data.bInit=true;stlib.data.resetData();stlib.data.set("url",document.location.href,"shareInfo");var g="";stlib.hash.init();stlib.data.set("shareHash",stlib.hash.shareHash,"pageInfo");stlib.data.set("incomingHash",stlib.hash.incomingHash,"pageInfo");if(!stlib.hash.doNotHash){g="#"+stlib.data.get("shareHash","pageInfo")}var f=stlib.hash.updateParams();stlib.data.set("url",f+g,"shareInfo");if(stlib.data.publisherKeySet!=true){stlib.data.set("publisher","ur.00000000-0000-0000-0000-000000000000","pageInfo")}stlib.fpc.createFpc();stlib.data.set("fpc",stlib.fpc.cookieValue,"pageInfo");var b=(new Date()).getTime().toString();var h=Number(Math.random().toPrecision(5).toString().substr(2)).toString();stlib.data.set("sessionID",b+"."+h,"pageInfo");stlib.data.set("hostname",document.location.hostname,"pageInfo");stlib.data.set("location",document.location.pathname,"pageInfo");var e=document.referrer;var i=e.replace("http://","").replace("https://","").split("/");var d=i.shift();var a=i.join("/");stlib.data.set("refDomain",d,"pageInfo");stlib.data.set("refQuery",a,"pageInfo")}},setPublisher:function(a){stlib.data.set("publisher",a,"pageInfo");stlib.data.publisherKeySet=true},setSource:function(d,a){var b="";if(a){if(a.toolbar){b="toolbar"+d}else{if(a.page&&a.page!="home"&&a.page!=""){b="chicklet"+d}else{b="button"+d}}}else{b=d}stlib.data.set("source",b,"shareInfo")},set:function(a,d,b){_$d_();_$d1("Setting: "+a+": "+d);if(typeof(d)=="number"||typeof(d)=="boolean"){stlib.data[b][a]=d}else{if(typeof(d)=="undefined"||d==null){_$d1("Value undefined or null")}else{stlib.data[b][a]=encodeURIComponent(decodeURIComponent(unescape(d.replace(/<[^<>]*>/gi," ")).replace(/%/gi,"%25")));if(a=="url"||a=="location"||a=="image"){try{stlib.data[b][a]=encodeURIComponent(decodeURIComponent(decodeURI(d.replace(/<[^<>]*>/gi," ")).replace(/%/gi,"%25")))}catch(f){stlib.data[b][a]=encodeURIComponent(decodeURIComponent(unescape(d.replace(/<[^<>]*>/gi," ")).replace(/%/gi,"%25")))}}}}},get:function(a,b){if(stlib.data[b]&&stlib.data[b][a]){return decodeURIComponent(stlib.data[b][a])}else{return false}},unset:function(a,b){if(stlib.data[b]&&typeof(stlib.data[b][a])!="undefined"){delete stlib.data[b][a]}}};stlib.data.resetData()}stlib.hash={doNotHash:true,hashAddressBar:false,doNotCopy:true,prefix:"sthash",shareHash:"",incomingHash:"",validChars:["1","2","3","4","5","6","7","8","9","0","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],servicePreferences:{linkedin:"param",stumbleupon:"param",bebo:"param"},hashDestination:function(b){if(b=="copy"){return"dpuf"}var d=b.substring(0,2)+b.substring(b.length-2,b.length);var a=function(e,f){if(e.charCodeAt(f)==122){return"a"}return String.fromCharCode(e.charCodeAt(f)+1)};return a(d,0)+a(d,1)+a(d,2)+a(d,3)},getHash:function(){var d=false;var b="";var e=document.location.href;e=e.split("#").shift();var a=e.split("?");if(a.length>1){a=a[1].split("&");for(arg in a){try{if(a[arg].substring(0,6)=="sthash"){d=true;b=a[arg]}}catch(f){}}if(d){return b}else{return document.location.hash.substring(1)}}else{return document.location.hash.substring(1)}},stripHash:function(a){var b=a;b=b.split("#");if(b.length>1){return b[1]}else{return""}},clearHash:function(){if(stlib.hash.validateHash(document.location.hash)){var a=document.location.href.split("#").shift();if(window.history&&history.replaceState){history.replaceState(null,document.title,a)}else{if((/MSIE/).test(navigator.userAgent)){window.location.replace("#")}else{document.location.hash=""}}}},init:function(){var b="";var a=stlib.hash.validChars.length;for(var f=0;f<8;f++){b+=stlib.hash.validChars[Math.random()*a|0]}if(stlib.hash.getHash()==""){stlib.hash.shareHash=stlib.hash.prefix+"."+b}else{var d=stlib.hash.getHash().split(".");var e=d.shift();if(e==stlib.hash.prefix||e==stlib.hash.prefix){stlib.hash.incomingHash=stlib.hash.getHash();stlib.hash.shareHash=stlib.hash.prefix+"."+d.shift()+"."+b}else{stlib.hash.shareHash=stlib.hash.prefix+"."+b}}if(!stlib.hash.doNotHash&&stlib.hash.hashAddressBar){if(document.location.hash==""||stlib.hash.validateHash(document.location.hash)){if(window.history&&history.replaceState){history.replaceState(null,"ShareThis","#"+stlib.hash.shareHash+".dpbs")}else{if((/MSIE/).test(navigator.userAgent)){window.location.replace("#"+stlib.hash.shareHash+".dpbs")}else{document.location.hash=stlib.hash.shareHash+".dpbs"}}}}else{stlib.hash.clearHash()}if(!stlib.hash.doNotHash&&!stlib.hash.doNotCopy){stlib.hash.copyPasteInit()}stlib.hash.copyPasteLog()},checkURL:function(){var b=stlib.data.get("destination","shareInfo");var g=stlib.hash.updateParams(b);var e="."+stlib.hash.hashDestination(b);stlib.hash.updateDestination(e);if(!stlib.hash.doNotHash&&typeof(stlib.data.pageInfo.shareHash)!="undefined"){var d=stlib.data.get("url","shareInfo");var h=stlib.hash.stripHash(d);if(stlib.hash.validateHash(h)||h==""){if(typeof(stlib.hash.servicePreferences[b])!="undefined"){if(stlib.hash.servicePreferences[b]=="param"){_$d1("Don't use hash, use params");_$d2(g);if(g.split("?").length>1){var f=g.split("?")[1].split("&");var i=false;for(var a=0;a<f.length;a++){if(f[a].split(".")[0]=="sthash"){i=true}}if(i){stlib.data.set("url",g,"shareInfo")}else{stlib.data.set("url",g+"&"+stlib.data.pageInfo.shareHash,"shareInfo")}}else{stlib.data.set("url",g+"?"+stlib.data.pageInfo.shareHash,"shareInfo")}if(b=="linkedin"){if(stlib.data.get("sharURL","shareInfo")!=""){stlib.data.set("sharURL",stlib.data.get("url","shareInfo"),"shareInfo")}}}else{_$d1("Using Hash");stlib.data.set("url",g+"#"+stlib.data.pageInfo.shareHash,"shareInfo")}}else{_$d1("Not using custom destination hash type");stlib.data.set("url",g+"#"+stlib.data.pageInfo.shareHash,"shareInfo")}}}},updateParams:function(a){var g=stlib.data.get("url","shareInfo").split("#").shift();var f=/(\?)sthash\.[a-zA-z0-9]{8}\.[a-zA-z0-9]{8}/;var e=/(&)sthash\.[a-zA-z0-9]{8}\.[a-zA-z0-9]{8}/;var d=/(\?)sthash\.[a-zA-z0-9]{8}/;var b=/(&)sthash\.[a-zA-z0-9]{8}/;if(f.test(g)){g=g.replace(f,"?"+stlib.data.pageInfo.shareHash)}else{if(e.test(g)){g=g.replace(e,"&"+stlib.data.pageInfo.shareHash)}else{if(d.test(g)){g=g.replace(d,"?"+stlib.data.pageInfo.shareHash)}else{if(b.test(g)){g=g.replace(b,"&"+stlib.data.pageInfo.shareHash)}}}}return g},updateDestination:function(b){var a=/sthash\.[a-zA-z0-9]{8}\.[a-zA-z0-9]{8}\.[a-z]{4}/;var d=/sthash\.[a-zA-z0-9]{8}\.[a-z]{4}/;_$d_();_$d1("Updating Destination");if(a.test(stlib.data.pageInfo.shareHash)){_$d2(stlib.data.pageInfo.shareHash.substring(0,24));stlib.data.pageInfo.shareHash=stlib.data.pageInfo.shareHash.substring(0,24)+b}else{if(d.test(stlib.data.pageInfo.shareHash)){_$d2(stlib.data.pageInfo.shareHash.substring(0,15));stlib.data.pageInfo.shareHash=stlib.data.pageInfo.shareHash.substring(0,15)+b}else{stlib.data.pageInfo.shareHash+=b}}},validateHash:function(a){var b=/[\?#&]?sthash\.[a-zA-z0-9]{8}\.[a-zA-z0-9]{8}$/;var d=/[\?#&]?sthash\.[a-zA-z0-9]{8}\.[a-zA-z0-9]{8}\.[a-z]{4}$/;var e=/[\?#&]?sthash\.[a-zA-z0-9]{8}\.[a-z]{4}$/;var f=/[\?#&]?sthash\.[a-zA-z0-9]{8}$/;return f.test(a)||e.test(a)||d.test(a)||b.test(a)},appendHash:function(a){var b=stlib.hash.stripHash(a);if(stlib.data.pageInfo.shareHash&&(stlib.hash.validateHash(b)||b=="")){a=a.replace("#"+b,"")+"#"+stlib.data.pageInfo.shareHash}else{}return a},copyPasteInit:function(){var a=document.getElementsByTagName("body")[0];var d=document.createElement("div");d.id="stcpDiv";d.style.position="absolute";d.style.top="-1999px";d.style.left="-1988px";a.appendChild(d);d.innerHTML="ShareThis Copy and Paste";var b=document.location.href.split("#").shift();var e="#"+stlib.hash.shareHash;if(document.addEventListener){a.addEventListener("copy",function(i){if(typeof(Tynt)!="undefined"){return}var h=document.getSelection();if(h.isCollapsed){return}var g=h.getRangeAt(0).cloneContents();d.innerHTML="";d.appendChild(g);if(d.textContent.trim().length==0){return}if((h+"").trim().length==0){}else{if(d.innerHTML==(h+"")||d.textContent==(h+"")){d.innerHTML=stlib.html.encode(stlib.hash.selectionModify(h))}else{d.innerHTML+=stlib.html.encode(stlib.hash.selectionModify(h,true))}}var f=document.createRange();f.selectNodeContents(d);var j=h.getRangeAt(0);h.removeAllRanges();h.addRange(f);setTimeout(function(){h.removeAllRanges();h.addRange(j)},0)},false)}else{if(document.attachEvent){}}},copyPasteLog:function(){var d=window.addEventListener?"addEventListener":"attachEvent";var b=d=="attachEvent"?"oncopy":"copy";var a=document.getElementsByTagName("body")[0];a[d](b,function(g){var f=true;stlib.data.resetShareData();stlib.data.set("url",document.location.href,"shareInfo");stlib.data.setSource("copy");stlib.data.set("destination","copy","shareInfo");stlib.data.set("buttonType","custom","shareInfo");if(typeof(Tynt)!="undefined"){stlib.data.set("result","tynt","shareInfo");stlib.logger.log("debug");f=false}if(typeof(addthis_config)!="undefined"){stlib.data.set("result","addThis","shareInfo");if(typeof(addthis_config.data_track_textcopy)=="undefined"||addthis_config.data_track_textcopy){stlib.data.set("enabled","true","shareInfo");f=false}else{stlib.data.set("enabled","false","shareInfo")}stlib.logger.log("debug")}if(f){stlib.data.set("result","pass","shareInfo");stlib.logger.log("debug")}},false)},logCopy:function(a,b){stlib.data.resetShareData();stlib.data.set("url",a,"shareInfo");stlib.data.setSource("copy");stlib.data.set("destination","copy","shareInfo");stlib.data.set("buttonType","custom","shareInfo");if(b){stlib.data.set("description",b,"shareInfo")}stlib.sharer.share()},selectionModify:function(o,m){o=""+o;_$d_();_$d1("Copy Paste");var n=/^((http|https):\/\/([a-z0-9!'\(\)\*\.\-\+:]*(\.)[a-z0-9!'\(\)\*\.\-\+:]*)((\/[a-z0-9!'\(\)\*\.\-\+:]*)*))/i;var h=/^([a-z0-9!'\(\)\*\.\-\+:]*(\.)[a-z0-9!'\(\)\*\.\-\+:]*)((\/[a-z0-9!'\(\)\*\.\-\+:]*)*)/i;var f=/^\+?1?[\.\-\\)_\s]?[\\(]?[0-9]{3}[\.\-\\)_\s]?[0-9]{3}[\.\-_\s]?[0-9]{4}$|^[0-9]{3}[\.\-_\s]?[0-9]{4}$/;var j=/^[0-9]{3}[\.\-_\s]?[0-9]{8}$/;var l=/^[0-9]{2}[\.\-_\s]?[0-9]{4}[\.\-_\s]?[0-9]{4}$/;var d=/[\-_\.a-z0-9]+@[\-_\.a-z0-9]+\.[\-_\.a-z0-9]+/i;var g=/[\s@]/;var b=document.location.href.split("#").shift();var i="#"+stlib.hash.shareHash;var a="";var k="";var e="";if(typeof(m)=="undefined"&&((n.test(o)||h.test(o))&&!g.test(o.trim()))){_$d2("is Url");if(o.match(/#/)==null||stlib.hash.validateHash(o)){k=o.split("#")[0]+i+".dpuf";e=k}else{k=o;e=k}}else{_$d2("is Not Url");if(document.location.hash==""||(/^#$/).test(document.location.hash)||stlib.hash.validateHash(document.location.hash)){k=b+i+".dpuf"}else{k=document.location.href}e=o;if(o.length>50){a=" - See more at: "+k+"";if(!f.test(o)&&!j.test(o)&&!l.test(o)&&!d.test(o)){e+=a}}}if(o.length>140){o=o.substring(0,137)+"..."}stlib.hash.logCopy(k,o);return((m&&m==true)?a:e)}};stlib.pump=function(a,d,e){var b=this;this.isIframeReady=false;this.isIframeSending=false;this.getHash=function(f){var g=f.split("#");g.shift();return g.join("#")};this.broadcastInit=function(f){this.destination=f;_$d_("---------------------");_$d1("Initiating broadcaster:");_$d(this.destination)};this.broadcastSendMessage=function(f){_$d_("---------------------");_$d1("Initiating Send:");if(this.destination===window){if(stlib.browser.ieFallback){window.location.replace(window.location.href.split("#")[0]+"#"+f);_$d2("child can't communicate with parent");return}_$d2("Iframe to publisher: "+f);parent.postMessage("#"+f,document.referrer)}else{_$d2("Publisher to Iframe: "+f);if(stlib.browser.ieFallback){if(this.destination.contentWindow){this.destination.contentWindow.location.replace(this.destination.src+"#"+f);this.isIframeSending=true}return}this.destination.contentWindow.postMessage("#"+f,this.destination.src)}};this.receiverInit=function(h,k){_$d_("---------------------");_$d1("Initiating Receiver:");_$d(h);if(stlib.browser.ieFallback){this.callback=k;this.source=h;if(h===window){window.location.replace(window.location.href.split("#")[0]+"#");this.currentIframe=window.location.hash;var g="receiver"+stlib.functionCount;stlib.functions[g]=function(m){if(""!=window.location.hash&&"#"!=window.location.hash){var l=window.location.hash;m(l);window.location.replace(window.location.href.split("#")[0]+"#")}};stlib.functionCount++;var j="callback"+stlib.functionCount;stlib.functions[j]=k;stlib.functionCount++;setInterval("stlib.functions['"+g+"'](stlib.functions['"+j+"'])",200)}else{}var i=window.addEventListener?"addEventListener":"attachEvent";var f=i=="attachEvent"?"onmessage":"message";window[i](f,function(l){if(h==window){}else{if(l.origin.indexOf("sharethis.com")!=-1){if(l.data.match(/#Pinterest Click/)){stlib.sharer.sharePinterest()}}}},false);return}var i=window.addEventListener?"addEventListener":"attachEvent";var f=i=="attachEvent"?"onmessage":"message";window[i](f,function(l){if(h==window){_$d1("arrived in iframe from:");_$d(l.origin);if(l.data.match(/#fragmentPump/)||l.data.match(/#Buttons Ready/)||l.data.match(/#Widget Ready/)||l.data.indexOf("#light")==0||l.data.indexOf("#widget")==0||l.data.indexOf("#popup")==0||l.data.indexOf("#show")==0||l.data.indexOf("#init")==0||l.data.indexOf("#test")==0||l.data.indexOf("#data")==0){k(l.data)}}else{if(l.origin.indexOf("sharethis.com")!=-1){_$d1("arrived in parent from:");_$d(l.origin);if(l.data.match(/#fragmentPump/)||l.data.match(/#Buttons Ready/)||l.data.match(/#Widget Ready/)||l.data.indexOf("#light")==0||l.data.indexOf("#widget")==0||l.data.indexOf("#popup")==0||l.data.indexOf("#show")==0||l.data.indexOf("#init")==0||l.data.indexOf("#test")==0||l.data.indexOf("#data")==0){k(l.data)}else{if(l.data.match(/#Pinterest Click/)){stlib.sharer.sharePinterest()}}}else{_$d1("discarded event from:");_$d(l.origin)}}},false)};this.broadcastInit(a);this.receiverInit(d,e)};stlib.json={c:{"\b":"b","\t":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\","/":"/"},d:function(a){return a<10?"0".concat(a):a},e:function(c,f,e){e=eval;delete eval;if(typeof eval==="undefined"){eval=e}f=eval(""+c);eval=e;return f},i:function(d,b,a){return 1*d.substr(b,a)},p:["","000","00","0",""],rc:null,rd:/^[0-9]{4}\-[0-9]{2}\-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}$/,rs:/(\x5c|\x2F|\x22|[\x0c-\x0d]|[\x08-\x0a])/g,rt:/^([0-9]+|[0-9]+[,\.][0-9]{1,3})$/,ru:/([\x00-\x07]|\x0b|[\x0e-\x1f])/g,s:function(a,b){return"\\".concat(stlib.json.c[b])},u:function(a,b){var e=b.charCodeAt(0).toString(16);return"\\u".concat(stlib.json.p[e.length],e)},v:function(b,a){return stlib.json.types[typeof result](result)!==Function&&(a.hasOwnProperty?a.hasOwnProperty(b):a.constructor.prototype[b]!==a[b])},types:{"boolean":function(){return Boolean},"function":function(){return Function},number:function(){return Number},object:function(a){return a instanceof a.constructor?a.constructor:null},string:function(){return String},"undefined":function(){return null}},$$:function(a){function b(f,d){d=f[a];delete f[a];try{stlib.json.e(f)}catch(e){f[a]=d;return 1}}return b(Array)&&b(Object)},encode:function(){var d=arguments.length?arguments[0]:this,a,h;if(d===null){a="null"}else{if(d!==undefined&&(h=stlib.json.types[typeof d](d))){switch(h){case Array:a=[];for(var g=0,e=0,b=d.length;e<b;e++){if(d[e]!==undefined&&(h=stlib.json.encode(d[e]))){a[g++]=h}}a="[".concat(a.join(","),"]");break;case Boolean:a=String(d);break;case Date:a='"'.concat(d.getFullYear(),"-",stlib.json.d(d.getMonth()+1),"-",stlib.json.d(d.getDate()),"T",stlib.json.d(d.getHours()),":",stlib.json.d(d.getMinutes()),":",stlib.json.d(d.getSeconds()),'"');break;case Function:break;case Number:a=isFinite(d)?String(d):"null";break;case String:a='"'.concat(d.replace(stlib.json.rs,stlib.json.s).replace(stlib.json.ru,stlib.json.u),'"');break;default:var g=0,f;a=[];for(f in d){if(d[f]!==undefined&&(h=stlib.json.encode(d[f]))){a[g++]='"'.concat(f.replace(stlib.json.rs,stlib.json.s).replace(stlib.json.ru,stlib.json.u),'":',h)}}a="{".concat(a.join(","),"}");break}}}return a},decode:function(a){if(typeof(a)=="string"){var d=null;try{if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){d=window.JSON&&window.JSON.parse?window.JSON.parse(a):(new Function("return "+a))();return d}else{return null}}catch(b){}}}};try{stlib.json.rc=new RegExp('^("(\\\\.|[^"\\\\\\n\\r])*?"|[,:{}\\[\\]0-9.\\-+Eaeflnr-u \\n\\r\\t])+?$')}catch(z){stlib.json.rc=/^(true|false|null|\[.*\]|\{.*\}|".*"|\d+|\d+\.\d+)$/}stlib.logger={loggerUrl:(("https:"==document.location.protocol)?"https://":"http://")+"l.sharethis.com/",productArray:new Array(),version:"",lang:"en",constructParamString:function(){var a=stlib.data.pageInfo;var d="";var b;for(b in a){d+=b+"="+a[b]+"&"}a=stlib.data.shareInfo;for(b in a){d+=b+"="+a[b]+"&"}return d.substring(0,d.length-1)},log:function(e,g){_$d_();_$d1("Log Event PageInfo:");_$d(stlib.data.pageInfo);_$d1("Log Event ShareInfo:");_$d(stlib.data.shareInfo);if(typeof(e)=="undefined"){_$de("event does not exist \nFor help, contact support@sharethis.com");return}if(stlib.data.pageInfo==null||stlib.data.shareInfo==null){_$de("stlib.logger does not have enough info to log \nFor help, contact support@sharethis.com");return}if(!stlib.data.get("url","shareInfo")){_$de("shareThisInfo.url do not exist \nFor help, contact support@sharethis.com");return}if(!stlib.data.get("sessionID","pageInfo")){_$de("sharePageInfo.sessionID do not exist \nFor help, contact support@sharethis.com");return}if(!stlib.data.get("destination","shareInfo")){if(e!="pview"){_$de("shareThisInfo.destination do not exist \nFor help, contact support@sharethis.com");return}}if(!stlib.data.get("buttonType","shareInfo")){if(e!="pview"){_$de("shareThisInfo.type do not exist \nFor help, contact support@sharethis.com");return}}if(!stlib.data.get("source","shareInfo")){_$de("shareThisInfo.source do not exist \nFor help, contact support@sharethis.com");return}if(e=="pview"){stlib.data.unset("destination","shareInfo");stlib.data.unset("buttonType","shareInfo")}else{stlib.data.unset("refDomain","pageInfo");stlib.data.unset("refQuery","pageInfo")}if(typeof(stlib.data.get("counter","shareInfo"))!="undefined"){var d=0;if(stlib.data.get("counter","shareInfo")){d=stlib.data.get("counter","shareInfo")}stlib.data.set("ts"+new Date().getTime()+"."+d,"","shareInfo");stlib.data.unset("counter","shareInfo")}else{stlib.data.set("ts"+new Date().getTime(),"","shareInfo")}var a=(e=="pview")?"pview":((e=="debug")?"cns":"log");if(e=="pview"){var f=stlib.logger.loggerUrl+a+"?event="+e+"&product="+stlib.logger.productArray+"&version="+stlib.logger.version+"&lang="+stlib.logger.lang+"&"+stlib.logger.constructParamString()}else{var f=stlib.logger.loggerUrl+a+"?event="+e+"&"+stlib.logger.constructParamString()}_$d1("Final Log Url:");_$d2(f);var b=new Image(1,1);b.src=f;b.onload=function(){return};g?g():null}};stlib.scriptLoader={loadJavascript:function(b,d){_$d_();_$d1("Loading JS: "+b);var a=stlib.scriptLoader;a.head=document.getElementsByTagName("head")[0];a.scriptSrc=b;a.script=document.createElement("script");a.script.setAttribute("type","text/javascript");a.script.setAttribute("src",a.scriptSrc);a.script.async=true;a.script.onload=d;a.script.onreadystatechange=function(){if(this.readyState=="loaded"){d()}};a.s=document.getElementsByTagName("script")[0];a.s.parentNode.insertBefore(a.script,a.s)},loadCSS:function(b,e){_$d_();_$d1("Loading CSS: "+b);var a=stlib.scriptLoader;var d;a.head=document.getElementsByTagName("head")[0];a.cssSrc=b;a.css=document.createElement("link");a.css.setAttribute("rel","stylesheet");a.css.setAttribute("type","text/css");a.css.setAttribute("href",b);a.css.setAttribute("id",b);setTimeout(function(){e();if(!document.getElementById(b)){d=setInterval(function(){if(document.getElementById(b)){clearInterval(d);e()}},100)}},100);a.head.appendChild(a.css)}};stlib.nativeButtons={supportedNativeButtons:{linkedinfollow:{log:true,config:true,dependencyLoaded:false,dependencyLoading:false,requiredFields:[["st_followId","Profile Id","Enter '207839' for profile id"]]},twitterfollow:{log:false,config:true,requiredFields:[["st_username","Username","Enter 'sharethis' for username"]]},pinterestfollow:{log:true,config:true,requiredFields:[["st_username","Username","Enter 'sharethis' for username"]]},youtube:{log:true,config:true,requiredFields:[["st_username","Username","Enter 'sharethis' for username"]]},foursquaresave:{log:false,config:true,dependencyLoaded:false,dependencyLoading:false},foursquarefollow:{log:false,config:true,requiredFields:[["st_username","Username","Enter 'sharethis' for username"],["st_followId","Follow id","Enter '1234567' for follow id"]]},googleplusfollow:{log:true,config:true,requiredFields:[["st_followId","Page Id","Enter '110967630299632321627' for page id"]]},googleplusadd:{log:true,config:true,requiredFields:[["st_followId","Profile Id","Enter '113842823840690472625' for profile id"]]}},loadService:function(a){if(a=="foursquaresave"||a=="foursquarefollow"){if(stlib.nativeButtons.supportedNativeButtons.foursquaresave.dependencyLoaded==false){if(stlib.nativeButtons.supportedNativeButtons.foursquaresave.dependencyLoading==false){stlib.nativeButtons.supportedNativeButtons.foursquaresave.dependencyLoading=true;var d="http://platform.foursquare.com/js/widgets.js";var b={uid:"606"};if("https:"==document.location.protocol){d="http://platform-s.foursquare.com/js/widgets.js";b.secure=true}(function(){window.___fourSq=b;var e=document.createElement("script");e.type="text/javascript";e.src=d;e.async=true;var f=document.getElementsByTagName("script")[0];e.onload=function(){fourSq.widget.Factory.go();stlib.nativeButtons.supportedNativeButtons.foursquaresave.dependencyLoaded=true;stlib.nativeButtons.supportedNativeButtons.foursquaresave.dependencyLoading=false};e.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){fourSq.widget.Factory.go();stlib.nativeButtons.supportedNativeButtons.foursquaresave.dependencyLoaded=true;stlib.nativeButtons.supportedNativeButtons.foursquaresave.dependencyLoading=false}};f.parentNode.insertBefore(e,f)})()}}else{fourSq.widget.Factory.go()}}else{if(a=="pinterestfollow"){}else{if(a=="twitterfollow"){}else{if(a=="youtube"){}else{if(a=="linkedinfollow"){if(window.IN&&typeof(window.IN.parse)==="function"){window.IN.parse()}else{if(stlib.nativeButtons.supportedNativeButtons.linkedinfollow.dependencyLoading==false){stlib.nativeButtons.supportedNativeButtons.linkedinfollow.dependencyLoading=true;var d="//platform.linkedin.com/in.js";(function(){var e=document.createElement("script");e.type="text/javascript";e.src=d;e.async=true;var f=document.getElementsByTagName("script")[0];e.onload=function(){stlib.nativeButtons.supportedNativeButtons.linkedinfollow.dependencyLoading=false};e.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){stlib.nativeButtons.supportedNativeButtons.linkedinfollow.dependencyLoading=false}};f.parentNode.insertBefore(e,f)})()}}}else{}}}}}},logService:function(a,b){stlib.data.resetShareData();stlib.data.set("url",b,"shareInfo");stlib.data.set("destination",a,"shareInfo");stlib.data.setSource("chicklet");stlib.data.set("buttonType","chicklet","shareInfo");stlib.sharer.share()},makeButton:function(w,e,d){if(w=="foursquaresave"){try{var k=document.createElement("<div></div>");var i=document.createElement("<a></a>")}catch(h){k=document.createElement("div");i=document.createElement("a")}k.className="stNativeButton stFourSquare";i.setAttribute("href","https://foursquare.com/intent/venue.html");i.setAttribute("class","fourSq-widget");i.setAttribute("data-on-open","foursquareCallback");k.appendChild(i);return k}else{if(w=="foursquarefollow"){if(typeof(d.username)=="undefined"||d.username==""){return false}if(typeof(d.followId)=="undefined"||d.followId==""){return false}try{var k=document.createElement("<div></div>");var i=document.createElement("<a></a>")}catch(h){k=document.createElement("div");i=document.createElement("a")}k.className="stNativeButton stFourSquare";i.setAttribute("href","https://foursquare.com/user/"+d.username);i.setAttribute("class","fourSq-widget");i.setAttribute("data-type","follow");i.setAttribute("data-fuid",d.followId);i.setAttribute("data-on-open","foursquareCallback");k.appendChild(i);return k}else{if(w=="googleplusfollow"||w=="googleplusadd"){if(typeof(d.followId)=="undefined"||d.followId==""){return false}try{var q=document.createElement("<span></span>")}catch(h){q=document.createElement("span")}q.className="stNativeButton stGoogleNative";var o=document.createElement("g:plus");o.setAttribute("href","https://plus.google.com/"+d.followId);o.setAttribute("width","300");o.setAttribute("height","69");q.appendChild(o);return q}else{if(w=="pinterestfollow"){if(typeof(d.username)=="undefined"||d.username==""){return false}try{var b=document.createElement("<span></span>");var p=document.createElement("<a></a>");var n=document.createElement("<img></img>")}catch(h){b=document.createElement("span");p=document.createElement("a");n=document.createElement("img")}b.className="stNativeButton stPinterestfollow";var g=d.username;p.setAttribute("target","_blank");p.setAttribute("href","//pinterest.com/"+g+"/");n.setAttribute("src","//passets-cdn.pinterest.com/images/follow-on-pinterest-button.png");n.setAttribute("width","156");n.setAttribute("height","26");n.setAttribute("alt","Follow "+g+" on Pinterest");p.appendChild(n);b.appendChild(p);return b}else{if(w=="twitterfollow"){if(typeof(d.username)=="undefined"||d.username==""){return false}try{var j=document.createElement("<iframe></iframe>")}catch(h){j=document.createElement("iframe")}var l="&screen_name="+d.username;var r="&show_count=false";iedocmode=stlib.browser.getIEVersion();var v="";if(e=="vcount"){r="&show_count=true"}else{if(e=="hcount"){r="&show_count=true"}}j.setAttribute("allowtransparency","true");j.setAttribute("frameborder","0");j.setAttribute("scrolling","no");j.className="stTwitterFollowFrame";j.setAttribute("src","//platform.twitter.com/widgets/follow_button.html?lang=en&show_screen_name=false"+l+r);var u=document.createElement("span");u.className="stNativeButton stTwitterFollowFrame stTwitterFollow";u.appendChild(j);return u}else{if(w=="youtube"){if(typeof(d.username)=="undefined"||d.username==""){return false}try{var m=document.createElement("<span></span>");var f=document.createElement("<a></a>");var a=document.createElement("<img></img>")}catch(h){m=document.createElement("span");f=document.createElement("a");a=document.createElement("img")}m.setAttribute("class","stNativeButton stYoutube");var g=d.username;f.setAttribute("target","_blank");f.setAttribute("href","//youtube.com/subscription_center?add_user="+g);a.setAttribute("src","//s.ytimg.com/yt/img/creators_corner/Subscribe_to_my_videos/YT_Subscribe_130x36_red.png");a.setAttribute("alt","Follow "+g+" on youtube");f.appendChild(a);m.appendChild(f);return m}else{if(w=="linkedinfollow"){if(typeof(d.followId)=="undefined"||d.followId==""){return false}var s=document.createElement("span");s.setAttribute("class","stNativeButton stLinkedinfollow");var t=document.createElement("script");t.type="text/javascript";t.setAttribute("type","IN/FollowCompany");t.setAttribute("data-id",d.followId);t.setAttribute("data-counter","none");if(e=="vcount"){t.setAttribute("data-counter","top")}else{if(e=="hcount"){t.setAttribute("data-counter","right")}}s.appendChild(t);return s}else{}}}}}}}},checkNativeButtonSupport:function(a){if(stlib.nativeButtons.supportedNativeButtons[a]){return true}return false},checkNativeButtonLogging:function(a){if(stlib.nativeButtons.supportedNativeButtons[a]){return stlib.nativeButtons.supportedNativeButtons[a].log}return false},checkNativeButtonConfig:function(a){if(stlib.nativeButtons.supportedNativeButtons[a]){return stlib.nativeButtons.supportedNativeButtons[a].config}return false}};foursquareCallback=function(d){if(d){var a="foursquaresave";var b="https://foursquare.com/intent/venue.html";if(d.config.type){a="foursquarefollow";b="https://foursquare.com/user/"+d.config.fuid}stlib.nativeButtons.logService(a,b)}};stlib.nativeCounts={nativeCountServices:{linkedin:true,facebook:true,stumbleupon:true},nativeFunc:[],addNativeFunc:function(b,a){stlib.nativeCounts.nativeFunc[b]=a},getNativeCounts:function(d,b,a){switch(d){case"facebook":stlib.scriptLoader.loadJavascript("http://api.facebook.com/method/fql.query?format=json&query=select url, like_count, total_count, comment_count, share_count, click_count from link_stat where url='"+encodeURIComponent(b)+"'&callback="+a,function(){});break;case"linkedin":stlib.scriptLoader.loadJavascript("//www.linkedin.com/countserv/count/share?format=jsonp&callback="+a+"&url="+encodeURIComponent(b),function(){});break;case"stumbleupon":stlib.scriptLoader.loadJavascript("http://www.stumbleupon.com/services/1.1/badge.getinfo?url="+encodeURIComponent(b)+"&format=jsonp&callback="+a,function(){});break}},checkNativeCountServicesQueue:function(a){if(stlib.nativeCounts.nativeCountServices[a]){return true}return false}};var stWidgetVersion=false;__stgetPubGA=function(){if(typeof(_gaq)!=="undefined"&&typeof(__stPubGA)=="undefined"){if(typeof(_gat)!=="undefined"){__stPubGA=_gat._getTrackerByName("~0")._getAccount()}if(typeof(__stPubGA)!=="undefined"&&__stPubGA=="UA-XXXXX-X"){_gaq.push(function(){var a=_gat._getTrackerByName();__stPubGA=a._getAccount()})}}if(__stPubGA=="UA-XXXXX-X"){delete __stPubGA}};if(typeof(stLight)=="undefined"&&typeof(SHARETHIS)=="undefined"){var stRecentServices=false;if(typeof(switchTo5x)=="undefined"){stWidgetVersion="4x"}else{if(switchTo5x==false){stWidgetVersion="4x"}if(switchTo5x==true){stWidgetVersion="5x"}}var esiLoaded=false,esiStatus="",stIsLoggedIn=false,servicesLoggedIn={};var stFastShareObj={};stFastShareObj.shorten=true;if(typeof(useEdgeSideInclude)=="undefined"){var useEdgeSideInclude=true}if("https:"==document.location.protocol){var useFastShare=false;var useEdgeSideInclude=false}if(typeof(useFastShare)=="undefined"){var useFastShare=true}stLight=new function(){this.version=false;this.publisher=null;this.sessionID_time=(new Date()).getTime().toString();this.sessionID_rand=Number(Math.random().toPrecision(5).toString().substr(2)).toString();this.sessionID=this.sessionID_time+"."+this.sessionID_rand;this.fpc=null;this.counter=0;this.readyRun=false;this.meta={hostname:document.location.host,location:document.location.pathname};this.loadedFromBar=false;this.clickCallBack=false};stLight.onReady=function(){if(stLight.readyRun==true){return false}stLight.readyRun=true;stLight.getAllAppDefault(function(){stlib.data.init();stLight.fpc=stlib.data.get("fpc","pageInfo");if(stButtons.messageQueueInstance==null){stButtons.messageQueueInstance=new stlib.messageQueue()}stLight.processSTQ();if(stLight.publisher==null){if(typeof(window.console)!=="undefined"){try{console.debug("Please specify a ShareThis Publisher Key \nFor help, contact support@sharethis.com")}catch(a){}}}var b=stLight.getSource();if(stLight.hasButtonOnPage()){if(b=="share4x"||b=="bar_share4x"){stlib.logger.productArray.push("Chicklet4x")}else{if(b=="share5x"||b=="bar_share5x"){stlib.logger.productArray.push("Chicklet5x")}}}if(typeof st_hover_widget!="undefined"){stlib.logger.productArray.push("HoverBar")}if(typeof st_pulldown_widget!="undefined"){stlib.logger.productArray.push("PullDownBar")}if(typeof st_bar_widget!="undefined"){stlib.logger.productArray.push("ShareBar")}if(typeof st_service_widget!="undefined"){stlib.logger.productArray.push("ShareNow")}if(typeof stlib.shareEgg!="undefined"){stlib.logger.productArray.push("ShareEgg")}if(typeof st_disc_widget!="undefined"){stlib.logger.productArray.push("TrendingWidget")}stlib.logger.version="buttons.js";if((stWidget.options.lang!=="undefined")&&(stWidget.options.lang!=="")){stlib.logger.lang=stWidget.options.lang}else{stlib.logger.lang="en"}stLight.log("pview",b);stWidget.options.sessionID=stLight.sessionID;stWidget.options.fpc=stLight.fpc;stLight.loadServicesLoggedIn(function(){stButtons.onReady()})})};stLight.getSource=function(){var a="share4x";if(stWidgetVersion=="5x"){a="share5x"}if(stLight.hasButtonOnPage()){if(stLight.loadedFromBar){if(stWidgetVersion=="5x"){a="bar_share5x"}else{a="bar_share4x"}}}else{if(stLight.loadedFromBar){a="bar"}}return a};stLight.getSource2=function(a){var d="share4x";if(stWidgetVersion=="5x"){d="share5x";try{if(stLight.clickCallBack!=false){stLight.clickCallBack(a.service)}}catch(b){}}if(a.type=="stbar"||a.type=="stsmbar"){d="bar"}return d};stLight.log=function(d,e,a,b){stlib.data.resetShareData();stlib.data.set("url",document.location.href,"shareInfo");stlib.data.set("title",document.title,"shareInfo");stlib.data.set("counter",stLight.counter++,"shareInfo");stlib.data.setSource(e);if(typeof(a)!="undefined"){stlib.data.set("destination",a,"shareInfo")}if(typeof(b)!="undefined"){stlib.data.set("buttonType",b,"shareInfo")}stlib.logger.log(d);if(d=="pview"){stLight.createSegmentFrame()}};stLight._stFpc=function(){if(!document.domain||document.domain.search(/\.gov/)>0){return false}var h=stLight._stGetFpc("__unam");if(h==false){var d=Math.round(Math.random()*2147483647);d=d.toString(16);var i=(new Date()).getTime();i=i.toString(16);var f="";var a=stLight._stGetD();a=a.split(/\./)[1];if(!a){return false}f=stLight._stdHash(a)+"-"+i+"-"+d+"-1";h=f;stLight._stSetFpc(h)}else{var b=h;var g=b.split(/\-/);if(g.length==4){var e=Number(g[3]);e++;b=g[0]+"-"+g[1]+"-"+g[2]+"-"+e;h=b;stLight._stSetFpc(h)}}return h};stLight._stSetFpc=function(h){var a="__unam";var d=new Date;var j=d.getFullYear();var g=d.getMonth()+9;var i=d.getDate();var e=a+"="+escape(h);if(j){var b=new Date(j,g,i);e+="; expires="+b.toGMTString()}var f=stLight._stGetD();e+="; domain="+escape(f)+";path=/";document.cookie=e};stLight._stGetD=function(){var b=document.domain.split(/\./);var a="";if(b.length>1){a="."+b[b.length-2]+"."+b[b.length-1]}return a};stLight._stGetFpc=function(b){var a=document.cookie.match("(^|;) ?"+b+"=([^;]*)(;|$)");if(a){return(unescape(a[2]))}else{return false}};stLight._stdHash=function(a){var f=0,e=0;for(var d=a.length-1;d>=0;d--){var b=parseInt(a.charCodeAt(d));f=((f<<8)&268435455)+b+(b<<12);if((e=f&161119850)!=0){f=(f^(e>>20))}}return f.toString(16)};stLight._thisScript=null;stLight.getShareThisLightScript=function(){var e=document.getElementsByTagName("script");var d=null;for(var b=0;b<e.length;b++){var a=e[b].src;if(a.search(/.*sharethis.*\/button\/light.*/)>=0){d=e[b]}}return d};stLight.dbrInfo=function(){var j=document.referrer;if(j&&j.length>0){var h=/\/\/.*?\//;var e=j.match(h);if(typeof(e)!=="undefined"&&typeof(e[0])!=="undefined"){var b=new RegExp(document.domain,"gi");if(b.test(e[0])==true){return false}}var g=/(http:\/\/)(.*?)\/.*/i;var f=/(^.*\?)(.*)/ig;var a="";var d=j.replace(g,"$2");var b=new RegExp(d,"gi");if(d.length>0){a+="&refDomain="+d}else{return false}var i=j.replace(f,"$2");if(i.length>0){a+="&refQuery="+encodeURIComponent(i)}return a}else{return false}};stLight.odjs=function(a,b){this.head=document.getElementsByTagName("head")[0];this.scriptSrc=a;this.script=document.createElement("script");this.script.setAttribute("type","text/javascript");this.script.setAttribute("src",this.scriptSrc);this.script.onload=b;this.script.onreadystatechange=function(){if(this.readyState=="complete"||((a.indexOf("getAllAppDefault.esi")!=-1||a.indexOf("checkOAuth.esi")!=-1)&&this.readyState=="loaded")){b()}};this.head.appendChild(this.script)};stLight.getAppDefault=function(b,h,f){if(useEdgeSideInclude){var a="cb="+h;var g="&app="+b;var d="&publisher="+((stLight.publisher!=null)?stLight.publisher:"ur.00000000-0000-0000-0000-000000000000");var e="&domain="+document.location.hostname.replace(/^www\./,"");stLight.odjs("http://wd-edge.sharethis.com/button/getAllAppDefault.esi?"+a+g+d+e,function(){if(f!=null){f()}})}else{if(b=="cns"){if(stWidget.options.doNotHash==null){stlib.hash.doNotHash=stWidget.options.doNotHash=true}if(stWidget.options.hashAddressBar==null){stlib.hash.hashAddressBar=stWidget.options.hashAddressBar=false}if(stWidget.options.doNotCopy==null){stlib.hash.doNotCopy=stWidget.options.doNotCopy=true}}else{if(b=="snapsets"){if(stWidget.options.snapsets==null){stWidget.options.snapsets=false}}}if(f!=null){f()}}};stLight.getAllAppDefault=function(e){if(useEdgeSideInclude){if(esiStatus=="loading"){if(e!=null){stButtons.cbAppQueue.push(e)}return}else{if(esiStatus=="loaded"){if(e!=null){e()}return}}esiStatus="loading";var a="cb=stLight.allDefault";var f="&app=all";var b="&publisher="+((stLight.publisher!=null)?stLight.publisher:"ur.00000000-0000-0000-0000-000000000000");var d="&domain="+document.location.hostname.replace(/^www\./,"");stLight.odjs("http://wd-edge.sharethis.com/button/getAllAppDefault.esi?"+a+f+b+d,function(){esiStatus="loaded";for(var g=0;g<stButtons.cbAppQueue.length;g++){stButtons.cbAppQueue[g]()}stButtons.cbAppQueue=[];if(e!=null){e()}})}else{if(name=="cns"){if(stWidget.options.doNotHash==null){stlib.hash.doNotHash=stWidget.options.doNotHash=true}if(stWidget.options.hashAddressBar==null){stlib.hash.hashAddressBar=stWidget.options.hashAddressBar=false}if(stWidget.options.doNotCopy==null){stlib.hash.doNotCopy=stWidget.options.doNotCopy=true}}else{if(name=="snapsets"){if(stWidget.options.snapsets==null){stWidget.options.snapsets=false}}}if(e!=null){e()}}};stLight.allDefault=function(a){if(a){if(a.cns){stLight.cnsDefault(a.cns)}if(a.snapsets){stLight.snapSetsDefault(a.snapsets)}if(a.migration){stLight.migrationDefault(a.migration)}else{stLight.usePublisherDefaultSettings()}}else{stLight.usePublisherDefaultSettings()}};stLight.usePublisherDefaultSettings=function(){if(typeof(switchTo5x)=="undefined"){stWidgetVersion="4x"}else{if(switchTo5x==false){stWidgetVersion="4x"}if(switchTo5x==true){stWidgetVersion="5x"}}};stLight.migrationDefault=function(a){if(stWidget.skipESIValue==false){if(stLight.version){stWidgetVersion=stLight.version}else{if((stWidget.options.lang=="")||(stWidget.options.lang=="en")){if((typeof(a)!=="undefined")&&(a.version!="")){stWidgetVersion=a.version}}if(stWidgetVersion==false){stLight.usePublisherDefaultSettings()}else{stWidget.options.publisherMigration=true}}}};stLight.snapSetsDefault=function(a){if(a){if(a.override){stWidget.options.snapsets=a.snapsets}else{if(stWidget.options.snapsets==null){stWidget.options.snapsets=a.snapsets}}}};stLight.cnsDefault=function(a){if(a){if(a.override){stWidget.options.doNotHash=a.doNotHash;stWidget.options.hashAddressBar=a.hashAddressBar;stWidget.options.doNotCopy=a.doNotCopy}else{if(stWidget.options.doNotHash==null){stWidget.options.doNotHash=a.doNotHash}if(stWidget.options.hashAddressBar==null){stWidget.options.hashAddressBar=a.hashAddressBar}if(stWidget.options.doNotCopy==null){stWidget.options.doNotCopy=a.doNotCopy}}stlib.hash.doNotHash=stWidget.options.doNotHash=(/true/i).test(stWidget.options.doNotHash)?true:false;stlib.hash.hashAddressBar=stWidget.options.hashAddressBar=(/true/i).test(stWidget.options.hashAddressBar)?true:false;stlib.hash.doNotCopy=stWidget.options.doNotCopy=(/true/i).test(stWidget.options.doNotCopy)?true:false}};stLight.loadServicesLoggedIn=function(b){if(useFastShare&&esiLoaded==false){try{stLight.odjs((("https:"==document.location.protocol)?"https://wd-edge.sharethis.com/button/checkOAuth.esi":"http://wd-edge.sharethis.com/button/checkOAuth.esi"),function(){if(typeof(userDetails)!=="undefined"){stIsLoggedIn=true;if(userDetails!=="null"){servicesLoggedIn=userDetails}}esiLoaded=true;if(b!=null){b()}})}catch(a){}}else{if(b!=null){b()}}};if(window.document.readyState=="completed"){stLight.onReady()}else{if(typeof(window.addEventListener)!="undefined"){window.addEventListener("load",stLight.onReady,false)}else{if(typeof(document.addEventListener)!="undefined"){document.addEventListener("load",stLight.onReady,false)}else{if(typeof window.attachEvent!="undefined"){window.attachEvent("onload",stLight.onReady)}}}}stLight.createSegmentFrame=function(){try{stLight.segmentframe=document.createElement('<iframe name="stframe" allowTransparency="true" style="body{background:transparent;}" ></iframe>')}catch(b){stLight.segmentframe=document.createElement("iframe")}stLight.segmentframe.id="stSegmentFrame";stLight.segmentframe.name="stSegmentFrame";var d=document.body;var a=(("https:"==document.location.protocol)?"https://seg.":"http://seg.")+"sharethis.com/getSegment.php?purl="+encodeURIComponent(document.location.href)+"&jsref="+encodeURIComponent(document.referrer)+"&rnd="+(new Date()).getTime();stLight.segmentframe.src=a;stLight.segmentframe.frameBorder="0";stLight.segmentframe.scrolling="no";stLight.segmentframe.width="0px";stLight.segmentframe.height="0px";stLight.segmentframe.setAttribute("style","display:none;");d.appendChild(stLight.segmentframe)};stLight.options=function(a){if(a&&a.version){stLight.version=a.version}if(a&&a.publisher){stlib.data.setPublisher(a.publisher);stLight.publisher=a.publisher}if(a&&a.loadedFromBar){stLight.loadedFromBar=a.loadedFromBar}if(a&&a.clickCallBack&&typeof(a.clickCallBack)=="function"){stLight.clickCallBack=a.clickCallBack}if(a&&typeof(a.hashAddressBar)!="undefined"){stlib.hash.hashAddressBar=a.hashAddressBar}if(a&&typeof(a.doNotHash)!="undefined"){stlib.hash.doNotHash=a.doNotHash}if(a&&typeof(a.doNotCopy)!="undefined"){stlib.hash.doNotCopy=a.doNotCopy}for(var b in a){if(b=="shorten"){stFastShareObj.shorten=a[b]}if(stWidget.options.hasOwnProperty(b)&&a[b]!==null){stWidget.options[b]=a[b]}}};stLight.hasButtonOnPage=function(){var e=document.getElementsByTagName("*");var d=new RegExp(/^st_(.*?)$/);var a=e.length;for(var b=0;b<a;b++){if(typeof(e[b].className)=="string"&&e[b].className!=""){if(e[b].className.match(d)&&e[b].className.match(d).length>=2&&e[b].className.match(d)[1]){return true}}}return false}}var stButtons={};stButtons.smartifyButtons=function(a){if(typeof(a)!="undefined"&&a!="undefined"){stRecentServices=a;for(var b in stRecentServices){stRecentServices[b].processed=false}}stButtons.completeInit()};stButtons.makeButton=function(w){var g=w.service;var I=w.text;var Y="";if(typeof(stWidget.options.shorten)!="undefined"){Y=stWidget.options.shorten}if(I==null&&(w.type=="vcount"||w.type=="hcount")){I="Share";if(g=="email"){I="Mail"}}if(g=="fb_like"){g="fblike"}else{if(g=="fblike_fbLong"){g="fblike";w.type="fbLong"}}var h=stWidget.ogurl?stWidget.ogurl:(stWidget.twitterurl?stWidget.twitterurl:document.location.href);h=w.url?w.url:h;var U=h;if(!stlib.hash.doNotHash){U=stlib.hash.appendHash(h);h=U}stlib.data.set("url",U,"shareInfo");var L=stWidget.ogtitle?stWidget.ogtitle:(stWidget.twittertitle?stWidget.twittertitle:document.title);L=w.title?w.title:L;if(typeof(w.pinterest_native)=="string"){w.pinterest_native=w.pinterest_native.replace(/^\s+|\s+$/g,"")}if(g=="pinterest"&&(w.pinterest_native=="false"||w.pinterest_native==null||w.pinterest_native=="")){var f=stWidget.ogimg?stWidget.ogimg:(stWidget.twitterimg?stWidget.twitterimg:(w.thumbnail?w.thumbnail:null));if(typeof(f)=="string"){f=f.replace(/^\s+|\s+$/g,"")}if(typeof(w.image)=="string"){w.image=w.image.replace(/^\s+|\s+$/g,"")}f=(w.image)?w.image:f}var aa=stWidget.desc?stWidget.desc:"";aa=stWidget.ogdesc?stWidget.ogdesc:(stWidget.twitterdesc?stWidget.twitterdesc:stWidget.desc);aa=(w.summary&&w.summary!=null)?w.summary:aa;var s=(w.message&&w.message!=null)?w.message:"";if(/(http|https):\/\//.test(h)==false){h=decodeURIComponent(h);L=decodeURIComponent(L)}var ag=document.createElement("span");ag.setAttribute("style","text-decoration:none;color:#000000;display:inline-block;cursor:pointer;");ag.className="stButton";if(w.type=="custom"&&g!="email"&&g!="sharethis"&&g!="wordpress"){w.element.onclick=function(){_$d_();_$d1("Clicked on a custom button to share");stLight.callSubscribers("click",g,h);stlib.data.resetShareData();stlib.data.set("url",h,"shareInfo");stlib.data.set("shorten",Y,"shareInfo");stlib.data.set("title",L,"shareInfo");stlib.data.set("destination",g,"shareInfo");stlib.data.setSource("chicklet");stlib.data.set("buttonType",w.type,"shareInfo");if(typeof(pinterest_native)!="undefined"&&pinterest_native!=null&&pinterest_native!=" "){stlib.data.set("pinterest_native",pinterest_native,"shareInfo")}if(typeof(f)!="undefined"&&f!=null&&f!=" "){stlib.data.set("image",f,"shareInfo")}if(typeof(aa)!="undefined"&&aa!=null){stlib.data.set("description",aa,"shareInfo")}if(s!=""){stlib.data.set("message",s,"shareInfo")}if(w.element.getAttribute("st_username")!=null){stlib.data.set("refUsername",w.element.getAttribute("st_username"),"shareInfo")}if(g=="twitter"&&w.element.getAttribute("st_via")!=null){stlib.data.set("via",w.element.getAttribute("st_via").replace(/^\s+|\s+$/g,""),"shareInfo")}stlib.sharer.share(null,stWidget.options.servicePopup);if(g=="pinterest"){stlib.sharer.sharePinterest()}};return false}if(!((g=="email"||g=="sharethis"||g=="wordpress")||(stIsLoggedIn&&servicesLoggedIn&&typeof(servicesLoggedIn[g])!="undefined"&&((useFastShare||(!useFastShare&&switchTo5x))&&(g=="facebook"||g=="twitter"||g=="yahoo"||g=="linkedin"))))){ag.onclick=function(){_$d_();_$d1("Clicked on a regular button to share");stLight.callSubscribers("click",g,h);var b=this.getElementsByTagName("*");for(var a=0;a<b.length;a++){if(b[a].className=="stBubble_hcount"||b[a].className=="stBubble_count"){if(!stWidget.options.nativeCount||!stlib.nativeCounts.checkNativeCountServicesQueue(g)){if(!isNaN(b[a].innerHTML)){b[a].innerHTML=Number(b[a].innerHTML)+1}}}}if(stWidget.options.tracking){shareLog(g,h)}stlib.data.resetShareData();var ai="";var ah=stLight.getSource();if(ah=="share5x"){ai="5x"}else{if(ah=="share4x"){ai="4x"}}stlib.data.set("url",h,"shareInfo");stlib.data.set("shorten",Y,"shareInfo");stlib.data.set("title",L,"shareInfo");stlib.data.set("destination",g,"shareInfo");stlib.data.setSource("chicklet"+ai);stlib.data.set("buttonType",w.type,"shareInfo");if(typeof(pinterest_native)!="undefined"&&pinterest_native!=null&&pinterest_native!=" "){stlib.data.set("pinterest_native",pinterest_native,"shareInfo")}if(typeof(f)!="undefined"&&f!=null){stlib.data.set("image",f,"shareInfo")}if(typeof(aa)!="undefined"&&aa!=null){stlib.data.set("description",aa,"shareInfo")}if(s!=""){stlib.data.set("message",s,"shareInfo")}if(w.element.getAttribute("st_username")!=null){stlib.data.set("refUsername",w.element.getAttribute("st_username"),"shareInfo")}if(g=="twitter"&&w.element.getAttribute("st_via")!=null){stlib.data.set("via",w.element.getAttribute("st_via").replace(/^\s+|\s+$/g,""),"shareInfo")}stlib.sharer.share(null,stWidget.options.servicePopup);if(g=="pinterest"&&(stlib.data.get("image","shareInfo")==false||stlib.data.get("image","shareInfo")==null)){stlib.sharer.sharePinterest()}}}if(g=="gbuzz"){return ag}if(g=="fblike"||g=="fbsend"||g=="fbrec"||g=="fbLong"||g=="fbsub"){if(g=="fbsub"){if(w.element.getAttribute("st_username")!=null){h="http://facebook.com/"+w.element.getAttribute("st_username")}else{h=""}}return stButtons.makeFBButton(g,w.type,h)}if(stlib.nativeButtons.checkNativeButtonSupport(g)){var V={};if(w.element.getAttribute("st_username")!=null){V.username=w.element.getAttribute("st_username")}if(w.element.getAttribute("st_followId")!=null){V.followId=w.element.getAttribute("st_followId")}retObj=stlib.nativeButtons.makeButton(g,w.type,V);if(retObj){if(stlib.nativeButtons.checkNativeButtonLogging(g)){retObj.onclick=function(){stlib.nativeButtons.logService(g,h)}}return retObj}else{if(typeof(window.console)!=="undefined"){try{console.debug("Looks like "+g+" is missing some required parameters. Please recheck "+g+" HTML \nFor help, contact support@sharethis.com")}catch(ab){}}return ag}}if(g=="plusone"){stButtons.loadPlusone=true;var G=document.createElement("div");G.innerHTML="&nbsp;";iedocmode=stlib.browser.getIEVersion();var x=(navigator.userAgent.indexOf("MSIE 7.0")!=-1);var i=(navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1);var P="display:inline-block;overflow:hidden;line-height:0px;";var D="overflow:hidden;zoom:1;display:inline;vertical-align:bottom;";var E="overflow:hidden;zoom:1;display:inline;line-height:0px;position:relative;";var e=document.createElement("g:plusone");var l=h;if((/#sthash/i).test(l)){var n=l.split("#");if(n.length>0){l=n[0]}}e.setAttribute("href",l);if(w.type=="vcount"){e.setAttribute("size","tall");G.setAttribute("style",P+"vertical-align:bottom;width:55px; height:61px;");x&&G.style.setAttribute?G.style.setAttribute("cssText",P+"vertical-align:bottom;width:55px; height:61px;",0):null;(iedocmode&&(iedocmode==7)&&G.style.setAttribute)?G.style.setAttribute("cssText",E+"vertical-align:bottom;bottom:-8px;width:55px; height:80px;",0):(null)}else{if(w.type=="hcount"){e.setAttribute("size","medium");e.setAttribute("count","true");G.setAttribute("style",P+"position:relative;vertical-align:middle;bottom:0px;width:75px; height:21px;");x&&G.style.setAttribute?G.style.setAttribute("cssText",P+"position:relative;vertical-align:middle;width:75px; height:21px;",0):null;(iedocmode&&(iedocmode==7)&&G.style.setAttribute)?G.style.setAttribute("cssText",E+"vertical-align:middle;bottom:2px;width:75px; height:21px;",0):(null)}else{if(w.type=="button"){e.setAttribute("size","medium");e.setAttribute("count","false");G.setAttribute("style",P+"position:relative;vertical-align:middle;bottom:0px;width:36px; height:21px;");x&&G.style.setAttribute?G.style.setAttribute("cssText",P+"position:relative;vertical-align:middle;width:36px; height:21px;",0):null;(iedocmode&&(iedocmode==7)&&G.style.setAttribute)?G.style.setAttribute("cssText",E+"vertical-align:middle;bottom:-8px;width:36px; height:39px;",0):(null)}else{if(w.type=="large"){e.setAttribute("size","large");e.setAttribute("count","false");G.setAttribute("style",P+"position:relative;vertical-align:middle;bottom:12px;width:38px; height:27px;");x&&G.style.setAttribute?G.style.setAttribute("cssText",P+"position:relative;vertical-align:middle;bottom:0px;width:38px; height:30px;",0):null;(iedocmode&&((iedocmode==8)||(iedocmode==9))&&G.style.setAttribute)?G.style.setAttribute("cssText",E+"vertical-align:middle;bottom:7px;width:38px; height:39px;",0):(null);(iedocmode&&(iedocmode==7)&&G.style.setAttribute)?G.style.setAttribute("cssText",E+"vertical-align:middle;bottom:1px;width:38px; height:39px;",0):(null)}else{e.setAttribute("size","small");e.setAttribute("count","false");G.setAttribute("style",P+"position:relative;vertical-align:middle;bottom:0px;width:36px; height:16px;");x&&G.style.setAttribute?G.style.setAttribute("cssText",P+"position:relative;vertical-align:middle;width:36px; height:16px;",0):null;(iedocmode&&(iedocmode==7)&&G.style.setAttribute)?G.style.setAttribute("cssText",E+"vertical-align:middle;bottom:-12px;width:36px; height:36px;",0):(null)}}}}G.appendChild(e);e.setAttribute("callback","plusoneCallback");return G}var j=("https:"==document.location.protocol)?"https://ws.sharethis.com/images/":"http://w.sharethis.com/images/";var Z=document.createElement("img");Z.src=j+"check-big.png";Z.style.position="absolute";Z.style.top="-7px";Z.style.right="-7px";Z.style.width="19px";Z.style.height="19px";Z.style.maxWidth="19px";Z.style.maxHeight="19px";var t=g;function o(a){var ah=new Date();var b=null;var ai=0;do{b=new Date();ai++;if(ai>a){break}}while(((b-ah)<a)||!esiLoaded)}if(!esiLoaded&&(g=="facebook"||g=="twitter"||g=="linkedin"||g=="yahoo")){o(500)}if(!(useFastShare&&servicesLoggedIn&&typeof(servicesLoggedIn[g])!="undefined"&&(g=="facebook"||g=="twitter"||g=="linkedin"||g=="yahoo"))){Z.style.display="none"}if(w.type=="chicklet"){var N=document.createElement("span");N.className="chicklets "+g;if(I==null){N.innerHTML="&nbsp;";ag.style.paddingLeft="0px";ag.style.paddingRight="0px";ag.style.width="16px"}else{N.appendChild(document.createTextNode(I));Z.style.right="auto";Z.style.left="8px";Z.style.top="-5px"}ag.appendChild(N);Z.src=j+"check-small.png";Z.style.top="-6px";Z.style.width="13px";Z.style.height="13px";Z.style.maxWidth="13px";Z.style.maxHeight="13px";ag.appendChild(Z);return ag}else{if(w.type=="large"){var N=document.createElement("span");N.className="stLarge";ag.appendChild(N);N.style.backgroundImage="url('"+j+t+"_32.png')";ag.appendChild(Z);return ag}else{if(w.type=="basic"||w.type=="circle"||w.type=="brushed"||w.type=="shiny"){var N=document.createElement("span");N.className="stLarge";N.className=w.size=="16"?((w.type=="brushed"||w.type=="shiny")?"stSmall2":"stSmall"):N.className;N.className=w.size=="64"?"stHuge":N.className;ag.appendChild(N);N.style.backgroundImage="url('"+j+w.type+"/"+w.size+"/"+t+(w.color?"_"+w.color:"_"+w.type)+".png')";ag.appendChild(Z);return ag}else{if(w.type=="pcount"||w.type=="stbar"||w.type=="stsmbar"){var C=document.createElement("span");var N=document.createElement("span");if(w.type=="stsmbar"){N.className="stSmBar";var j=("https:"==document.location.protocol)?"https://ws.sharethis.com/images/":"http://w.sharethis.com/images/";N.style.backgroundImage="url('"+j+t+"_16.png')";Z.src=j+"check-small.png"}else{N.className="stLarge";var j=("https:"==document.location.protocol)?"https://ws.sharethis.com/images/":"http://w.sharethis.com/images/";N.style.backgroundImage="url('"+j+t+"_32.png')"}N.appendChild(Z);C.appendChild(N);var u=document.createElement("span");var af=document.createElement("div");if(w.type=="stsmbar"){af.className="stBubbleSmHoriz"}else{af.className="stBubbleSm"}af.setAttribute("id","stBubble_"+w.count);af.style.visibility="hidden";var W=document.createElement("div");W.className="stBubble_count_sm";af.appendChild(W);u.appendChild(af);u.appendChild(C);ag.appendChild(u);stButtons.getCount2(h,g,W);C.onmouseover=function(){var a=document.getElementById("stBubble_"+w.count);a.style.visibility="visible"};C.onmouseout=function(){var a=document.getElementById("stBubble_"+w.count);a.style.visibility="hidden"};return ag}else{if(w.type=="button"||w.type=="vcount"||w.type=="hcount"){var C=document.createElement("span");C.className="stButton_gradient";var J=document.createElement("span");J.className="chicklets "+g;if(I==null){J.innerHTML="&nbsp;"}else{J.appendChild(document.createTextNode(I))}C.appendChild(J);if(g=="facebook"||g=="twitter"||g=="linkedin"||g=="yahoo"||g=="pinterest"||g=="sharethis"||g=="email"){var v=document.createElement("span");v.className="stMainServices st-"+g+"-counter";v.innerHTML="&nbsp";C=v;v.style.backgroundImage="url('"+j+t+"_counter.png')";if(g=="sharethis"&&I!=null&&I.length<6){v.className="stMainServices st-"+g+"-counter2";v.style.backgroundImage="url('"+j+t+"_counter2.png')"}}C.appendChild(Z);if(w.type=="vcount"){var u=document.createElement("div");var af=document.createElement("div");af.className="stBubble";var W=document.createElement("div");W.className="stBubble_count";af.appendChild(W);u.appendChild(af);u.appendChild(C);ag.appendChild(u);stButtons.getCount2(h,g,W)}else{if(w.type=="hcount"){var u=document.createElement("span");var O=document.createElement("span");O.className="stButton_gradient stHBubble";var r=document.createElement("span");r.className="stButton_left";r.innerHTML="&nbsp;";var y=document.createElement("span");y.className="stButton_right";y.innerHTML="&nbsp;";var W=document.createElement("span");W.className="stBubble_hcount";O.appendChild(W);u.appendChild(C);var F=document.createElement("span");F.className="stArrow";F.appendChild(O);u.appendChild(F);ag.appendChild(u);stButtons.getCount2(h,g,W)}else{ag.appendChild(C)}}if(w.type=="vcount"||w.type=="hcount"){if(w.ctype=="native"){if(g=="twitter"){var X=document.createElement("span");X.className="stButton";var H=55;var ac=20;var S="";var k="none";var K=7;if(w.type=="vcount"){var q=document.createElement("div");H=55;ac=62;S="top:42px;";k="vertical";Z.style.top="34px"}else{if(w.type=="hcount"){var q=document.createElement("span");H=110;ac=20;k="horizontal";Z.style.right="44px"}}iedocmode=stlib.browser.getIEVersion();var T=document.createElement("span");T.setAttribute("style","vertical-align:bottom;line-height:0px;position:absolute;padding:0px !important;"+S+"width:55px;height:20px;");(iedocmode&&(iedocmode==7)&&T.style.setAttribute)?T.style.setAttribute("cssText","vertical-align:bottom;line-height:0px;position:absolute;padding:0px !important;"+S+"width:55px;height:20px;",0):null;try{var R=document.createElement('<iframe name="stframe" allowTransparency="true" scrolling="no" frameBorder="0"></iframe>')}catch(ab){R=document.createElement("iframe");R.setAttribute("allowTransparency","true");R.setAttribute("frameborder","0");R.setAttribute("scrolling","no")}var ae=encodeURIComponent(h);R.setAttribute("src","http://platform.twitter.com/widgets/tweet_button.html?count="+k+"&url="+ae);R.setAttribute("style","width:"+H+"px;height:"+ac+"px;");(iedocmode&&(iedocmode==7)&&R.style.setAttribute)?R.style.setAttribute("cssText","width:"+H+"px;height:"+ac+"px;",0):null;if((useFastShare&&servicesLoggedIn&&typeof(servicesLoggedIn[g])!="undefined")){q.appendChild(T)}q.appendChild(R);C=q;C.appendChild(Z);X.appendChild(C);X.setAttribute("style","text-decoration:none;color:#000000;display:inline-block;cursor:pointer;vertical-align:bottom;margin-top:6px;width:"+H+"px;height:"+ac+"px;");(iedocmode&&(iedocmode==7)&&X.style.setAttribute)?X.style.setAttribute("cssText","text-decoration:none;color:#000000;display:inline-block;cursor:pointer;vertical-align:bottom;width:"+H+"px;height:"+ac+"px;",0):null;ag=X}else{if(g=="facebook"){stButtons.getXFBMLFromFB(w);return stButtons.makeFBButton("fblike",w.type,h)}else{if(g=="linkedin"){}}}}}}else{if(w.type=="css"){var C=document.createElement("div");C.className="stCSSButton";if(w.cssType=="cssV"){var B=document.createElement("div");B.className="stCSSVBubble";var M=document.createElement("div");M.className="stCSSVBubble_count";B.appendChild(M);var m=document.createElement("div");m.className="stCSSVArrow";var Q=document.createElement("div");Q.className="stCSSVArrowBorder";Q.appendChild(m);ag.appendChild(B);ag.appendChild(Q);stButtons.getCount2(h,g,M)}var d=document.createElement("div");d.className="stCSSSprite "+g;d.innerHTML="&nbsp;";var N=document.createElement("span");N.className="stCSSText";C.appendChild(d);if(I==null||I==""){}else{N.appendChild(document.createTextNode(I));C.appendChild(N)}C.appendChild(Z);ag.appendChild(C);if(w.cssType=="cssH"){var A=document.createElement("div");A.className="stCSSHBubble";var M=document.createElement("div");M.className="stCSSHBubble_count";A.appendChild(M);var ad=document.createElement("div");ad.className="stCSSHArrow";var p=document.createElement("div");p.className="stCSSHArrowBorder";p.appendChild(ad);ag.appendChild(p);ag.appendChild(A);stButtons.getCount2(h,g,M)}}}}}}}return ag};stButtons.makeFBButton=function(j,l,b){try{var i=document.createElement("<div></div>")}catch(e){i=document.createElement("div")}if((/#sthash/i).test(b)){var m=b.split("#");if(m.length>0){b=m[0]}}var d=b;var h="button_count";var k="fb-send";var f="";iedocmode=stlib.browser.getIEVersion();var g="";if(l=="vcount"){h="box_count"}else{if(l=="hcount"){}else{if(l=="large"){g=(iedocmode&&(iedocmode==7))?"vertical-align:bottom;bottom:3px;":"bottom:7px;margin-top:9px;"}else{if(l=="button"){}else{g="top:1px;margin-top:0px;"}}}}if(j=="fbLong"){k="fb-like";h="standard";i.setAttribute("data-layout",h);i.setAttribute("data-send","false");i.setAttribute("data-show-faces","false")}else{if(j=="fbsend"){k="fb-send"}else{if(j=="fblike"||j=="fbrec"){(j=="fbrec")?f="recommend":null;k="fb-like";i.setAttribute("data-action",f);i.setAttribute("data-send","false");i.setAttribute("data-layout",h);i.setAttribute("data-show-faces","false")}else{if(j=="fbsub"){k="fb-subscribe";i.setAttribute("data-layout",h);i.setAttribute("data-show-faces","false")}}}}i.setAttribute("class",k);i.setAttribute("data-href",d);if(iedocmode&&(iedocmode==7)){if(j!="fbsend"){i=document.createElement("<div class='"+k+"' data-action='"+f+"' data-send='false' data-layout='"+h+"' data-show-faces='false' data-href='"+d+"'></div>")}else{i=document.createElement("<div class='"+k+"' data-href='"+d+"'></div>")}}var a=document.createElement("span");a.setAttribute("style","text-decoration:none;color:#000000;display:inline-block;cursor:pointer;position:relative;margin:3px 3px 0;padding:0px;font-size:11px;line-height:0px;vertical-align:bottom;overflow:visible;"+g);(iedocmode&&(iedocmode==7)&&a.style.setAttribute)?a.style.setAttribute("cssText","text-decoration:none;color:#000000;display:inline-block;cursor:pointer;position:relative;margin:3px 3px 0;font-size:11px;line-height:0px;"+g,0):(null);a.appendChild(i);return a};stButtons.getCount=function(d,a,e){var b=false;if(e&&e!==null){while(e.childNodes.length>=1){try{e.removeChild(e.firstChild)}catch(f){}}}stButtons.cbQueue.push({url:d,service:a,element:e});stButtons.getCountsFromService(d,a,e)};stButtons.getCount2=function(d,a,e){var b=false;if(e&&e!==null){while(e.childNodes.length>=1){try{e.removeChild(e.firstChild)}catch(f){}}}if(stWidget.options.nativeCount&&stlib.nativeCounts.checkNativeCountServicesQueue(a)){if(a=="facebook"){if((/#/).test(d)){d=d.split("#")[0]}}stButtons.cbNativeQueue.push({url:d,service:a,element:e});if(typeof(stButtons.countsNativeResp[d])=="undefined"){stButtons.countsNativeResp[d]=[]}if(typeof(stButtons.countsNativeResp[d][a])=="undefined"){stlib.nativeCounts.getNativeCounts(a,d,"stButtons."+a+"CB");stButtons.countsNativeResp[d][a]=null}else{if(stButtons.countsNativeResp[d][a]!=null){switch(a){case"facebook":stButtons.facebookCB(stButtons.countsNativeResp[d][a]);break;case"linkedin":stButtons.linkedinCB(stButtons.countsNativeResp[d][a]);break;case"stumbleupon":stButtons.stumbleuponCB(stButtons.countsNativeResp[d][a]);break}}}}else{stButtons.cbQueue.push({url:d,service:a,element:e});stButtons.getCountsFromService(d,a,e)}};stButtons.processCB=function(a){if(typeof(a)!="undefined"&&typeof(a.ourl)!="undefined"){stButtons.countsResp[a.ourl]=a}stButtons.processCount(a)};stButtons.stumbleuponCB=function(a){var b={ourl:"",stumbleupon:null};if(typeof(a)!="undefined"&&typeof(a.result)!="undefined"){if(typeof(stButtons.countsNativeResp[a.result.url])!="undefined"){stButtons.countsNativeResp[a.result.url]["stumbleupon"]=a}b.ourl=a.result.url;if(typeof(a.result.views)!="undefined"){b.stumbleupon=a.result.views}}stButtons.processNativeCount(b,"stumbleupon")};stButtons.linkedinCB=function(a){var b={ourl:"",linkedin:null};if(typeof(a)!="undefined"){if(typeof(stButtons.countsNativeResp[a.url])!="undefined"){stButtons.countsNativeResp[a.url]["linkedin"]=a}b.ourl=a.url;if(typeof(a.count)!="undefined"){b.linkedin=a.count}}stButtons.processNativeCount(b,"linkedin")};stButtons.facebookCB=function(a){var b={ourl:"",facebook:null};if(typeof(a)!="undefined"){if(typeof(stButtons.countsNativeResp[a[0].url])!="undefined"){stButtons.countsNativeResp[a[0].url]["facebook"]=a}b.ourl=a[0].url;if(typeof(a[0].total_count)!="undefined"){b.facebook=a[0].total_count}}stButtons.processNativeCount(b,"facebook")};stButtons.processCount=function(b){if(!(b)){return}stButtons.storedCountResponse=b;var a=false;for(var d=0;d<stButtons.cbQueue.length;d++){var f=stButtons.cbQueue[d];if(b.ourl==f.url){var h="New";try{if(f.service=="sharethis"){if(stWidget.options.minShareCount==null||b.total>=stWidget.options.minShareCount){if(stWidget.options.newOrZero=="zero"){h=(b.total>0)?stButtons.human(b.total):"0"}else{h=(b.total>0)?stButtons.human(b.total):"New"}}}else{if(f.service=="facebook"&&typeof(b.facebook2)!="undefined"){if(stWidget.options.minShareCount==null||b.facebook2>=stWidget.options.minShareCount){h=stButtons.human(b.facebook2)}}else{if(typeof(b[f.service])!="undefined"){if(stWidget.options.minShareCount==null||b[f.service]>=stWidget.options.minShareCount){h=(b[f.service]>0)?stButtons.human(b[f.service]):"0"}}else{if(stWidget.options.minShareCount==null||stWidget.options.minShareCount<=0){h="0"}}}}if(/stHBubble/.test(f.element.parentNode.className)==true){f.element.parentNode.style.display="inline-block"}else{if(/stBubble/.test(f.element.parentNode.className)==true){f.element.parentNode.style.display="block"}}f.element.innerHTML=h}catch(e){if(!f.element.hasChildNodes()){var g=document.createElement("div");g.innerHTML=h;f.element.appendChild(g)}}a=true}}};stButtons.processNativeCount=function(b,a){if(!(b)){return}if(!(a)){return}for(var d=0;d<stButtons.cbNativeQueue.length;d++){var f=stButtons.cbNativeQueue[d];if(b.ourl==f.url||(a=="stumbleupon"&&b.ourl.replace(/http:\/\/www\.|http:\/\/|www\./i,"")==f.url.replace(/http:\/\/www\.|http:\/\/|www\./i,""))){var h="New";try{if(f.service==a){if(b[a]!=null){if(stWidget.options.minShareCount==null||b[a]>=stWidget.options.minShareCount){h=stButtons.human(b[a])}}}else{continue}if(/stHBubble/.test(f.element.parentNode.className)==true){f.element.parentNode.style.display="inline-block"}else{if(/stBubble/.test(f.element.parentNode.className)==true){f.element.parentNode.style.display="block"}}f.element.innerHTML=h}catch(e){if(!f.element.hasChildNodes()){var g=document.createElement("div");g.innerHTML=h;f.element.appendChild(g)}}}}};stButtons.human=function(a){if(a>=100000){a=a/1000;a=Math.round(a);a=a+"K"}else{if(a>=10000){a=a/100;a=Math.round(a);a=a/10;a=a+"K"}}return a};stButtons.isValidService=function(a){return(typeof(stlib.allServices)==="object"&&stlib.allServices.hasOwnProperty(a))?true:(typeof(stlib.allOauthServices)==="object"&&stlib.allOauthServices.hasOwnProperty(a))?true:(typeof(stlib.allNativeServices)==="object"&&stlib.allNativeServices.hasOwnProperty(a))?true:(typeof(stlib.allOtherServices)==="object"&&stlib.allOtherServices.hasOwnProperty(a))?true:false};stButtons.locateElements=function(d){var v=document.getElementsByTagName("*");var o=[];var P=new RegExp(/st_(.*?)_custom/);var O=new RegExp(/st_(.*?)_vcount/);var w=new RegExp(/st_(.*?)_vcount_native/);var N=new RegExp(/st_(.*?)_hcount/);var n=new RegExp(/st_(.*?)_hcount_native/);var M=new RegExp(/st_(.*?)_button/);var L=new RegExp(/st_(.*?)_large/);var J=new RegExp(/st_(.*?)_pcount/);var I=new RegExp(/st_(.*?)_stbar/);var F=new RegExp(/st_(.*?)_stsmbar/);var E=new RegExp(/st_(.*?)_css/);var u=new RegExp(/^st_(.*?)$/);var h=new RegExp(/st_(.*?)_basic/);var p=new RegExp(/st_(.*?)_circle/);var l=new RegExp(/(st_(.*?)_basic)|(st_(.*?)_circle)/);var e=new RegExp(/(st_(.*?)_brushed)|(st_(.*?)_shiny)/);var C=new RegExp(/(st_(.*?)_brushed)/);var Q=new RegExp(/(st_(.*?)_shiny)/);var g=v.length;var A=0,B,m,j,a=[],t=false;if(typeof(stRecentServices)!="undefined"&&stRecentServices!="undefined"&&stRecentServices!="false"&&stRecentServices){t=true}for(var D=0;D<g;D++){B="";m=false;j=false;if(typeof(v[D].className)=="string"&&v[D].className!=""){if(v[D].className.match(P)&&v[D].className.match(P).length>=2&&v[D].className.match(P)[1]){if(stButtons.testElem(v[D])==false){j=true;B=v[D].className.match(P)[1];typeName="custom";if(B=="plusone"||B=="fblike"||B=="fbrec"||B=="fbsend"||B=="fbsub"){typeName="chicklet"}o.push({service:B,element:v[D],url:v[D].getAttribute("st_url"),title:v[D].getAttribute("st_title"),image:(v[D].getAttribute("st_img")!=null)?v[D].getAttribute("st_img"):v[D].getAttribute("st_image"),pinterest_native:v[D].getAttribute("st_native"),message:(v[D].getAttribute("st_msg")!=null)?v[D].getAttribute("st_msg"):v[D].getAttribute("st_message"),summary:v[D].getAttribute("st_summary"),text:v[D].getAttribute("displayText"),type:typeName});v[D].setAttribute("st_processed","yes")}}else{if(v[D].className.match(l)&&v[D].className.match(l).length>=2){if(stButtons.testElem(v[D])==false){j=true;B=v[D].className.split("_")[1];var R="basic";if(v[D].className.match(p)){R="circle"}o.push({service:B,element:v[D],url:v[D].getAttribute("st_url"),title:v[D].getAttribute("st_title"),image:(v[D].getAttribute("st_img")!=null)?v[D].getAttribute("st_img"):v[D].getAttribute("st_image"),pinterest_native:v[D].getAttribute("st_native"),message:(v[D].getAttribute("st_msg")!=null)?v[D].getAttribute("st_msg"):v[D].getAttribute("st_message"),summary:v[D].getAttribute("st_summary"),text:v[D].getAttribute("displayText"),type:R,size:v[D].className.split("$")[1],color:v[D].className.split("$")[2]});v[D].setAttribute("st_processed","yes")}}else{if(v[D].className.match(e)&&v[D].className.match(e).length>=2){if(stButtons.testElem(v[D])==false){j=true;B=v[D].className.split("_")[1];var R="brushed";if(v[D].className.match(Q)){R="shiny"}o.push({service:B,element:v[D],url:v[D].getAttribute("st_url"),title:v[D].getAttribute("st_title"),image:(v[D].getAttribute("st_img")!=null)?v[D].getAttribute("st_img"):v[D].getAttribute("st_image"),pinterest_native:v[D].getAttribute("st_native"),message:(v[D].getAttribute("st_msg")!=null)?v[D].getAttribute("st_msg"):v[D].getAttribute("st_message"),summary:v[D].getAttribute("st_summary"),text:v[D].getAttribute("displayText"),type:R,size:v[D].className.split("$")[1]});v[D].setAttribute("st_processed","yes")}}else{if(v[D].className.match(O)&&v[D].className.match(O).length>=2&&v[D].className.match(O)[1]){if(stButtons.testElem(v[D])==false){j=true;B=v[D].className.match(O)[1];var G="";if(v[D].className.match(w)&&v[D].className.match(w).length>=2&&v[D].className.match(w)[1]){G="native"}o.push({service:B,element:v[D],url:v[D].getAttribute("st_url"),title:v[D].getAttribute("st_title"),image:(v[D].getAttribute("st_img")!=null)?v[D].getAttribute("st_img"):v[D].getAttribute("st_image"),pinterest_native:v[D].getAttribute("st_native"),message:(v[D].getAttribute("st_msg")!=null)?v[D].getAttribute("st_msg"):v[D].getAttribute("st_message"),summary:v[D].getAttribute("st_summary"),text:v[D].getAttribute("displayText"),type:"vcount",ctype:G});v[D].setAttribute("st_processed","yes")}}else{if(v[D].className.match(N)&&v[D].className.match(N).length>=2&&v[D].className.match(N)[1]){if(stButtons.testElem(v[D])==false){j=true;B=v[D].className.match(N)[1];var G="";if(v[D].className.match(n)&&v[D].className.match(n).length>=2&&v[D].className.match(n)[1]){G="native"}o.push({service:B,element:v[D],url:v[D].getAttribute("st_url"),title:v[D].getAttribute("st_title"),image:(v[D].getAttribute("st_img")!=null)?v[D].getAttribute("st_img"):v[D].getAttribute("st_image"),pinterest_native:v[D].getAttribute("st_native"),message:(v[D].getAttribute("st_msg")!=null)?v[D].getAttribute("st_msg"):v[D].getAttribute("st_message"),summary:v[D].getAttribute("st_summary"),text:v[D].getAttribute("displayText"),type:"hcount",ctype:G});v[D].setAttribute("st_processed","yes")}}else{if(v[D].className.match(M)&&v[D].className.match(M).length>=2&&v[D].className.match(M)[1]){if(stButtons.testElem(v[D])==false){j=true;B=v[D].className.match(M)[1];o.push({service:B,element:v[D],url:v[D].getAttribute("st_url"),title:v[D].getAttribute("st_title"),image:(v[D].getAttribute("st_img")!=null)?v[D].getAttribute("st_img"):v[D].getAttribute("st_image"),pinterest_native:v[D].getAttribute("st_native"),message:(v[D].getAttribute("st_msg")!=null)?v[D].getAttribute("st_msg"):v[D].getAttribute("st_message"),summary:v[D].getAttribute("st_summary"),text:v[D].getAttribute("displayText"),type:"button"});v[D].setAttribute("st_processed","yes")}}else{if(v[D].className.match(L)&&v[D].className.match(L).length>=2&&v[D].className.match(L)[1]){if(stButtons.testElem(v[D])==false){j=true;B=v[D].className.match(L)[1];o.push({service:B,element:v[D],url:v[D].getAttribute("st_url"),title:v[D].getAttribute("st_title"),image:(v[D].getAttribute("st_img")!=null)?v[D].getAttribute("st_img"):v[D].getAttribute("st_image"),pinterest_native:v[D].getAttribute("st_native"),message:(v[D].getAttribute("st_msg")!=null)?v[D].getAttribute("st_msg"):v[D].getAttribute("st_message"),summary:v[D].getAttribute("st_summary"),text:v[D].getAttribute("displayText"),type:"large"});v[D].setAttribute("st_processed","yes")}}else{if(v[D].className.match(J)&&v[D].className.match(J).length>=2&&v[D].className.match(J)[1]){if(stButtons.testElem(v[D])==false){j=true;B=v[D].className.match(J)[1];o.push({service:B,element:v[D],url:v[D].getAttribute("st_url"),title:v[D].getAttribute("st_title"),image:(v[D].getAttribute("st_img")!=null)?v[D].getAttribute("st_img"):v[D].getAttribute("st_image"),pinterest_native:v[D].getAttribute("st_native"),message:(v[D].getAttribute("st_msg")!=null)?v[D].getAttribute("st_msg"):v[D].getAttribute("st_message"),summary:v[D].getAttribute("st_summary"),text:v[D].getAttribute("displayText"),type:"pcount",count:D});v[D].setAttribute("st_processed","yes")}}else{if(v[D].className.match(I)&&v[D].className.match(I).length>=2&&v[D].className.match(I)[1]){if(stButtons.testElem(v[D])==false){j=true;B=v[D].className.match(I)[1];o.push({service:B,element:v[D],url:v[D].getAttribute("st_url"),title:v[D].getAttribute("st_title"),image:(v[D].getAttribute("st_img")!=null)?v[D].getAttribute("st_img"):v[D].getAttribute("st_image"),pinterest_native:v[D].getAttribute("st_native"),message:(v[D].getAttribute("st_msg")!=null)?v[D].getAttribute("st_msg"):v[D].getAttribute("st_message"),summary:v[D].getAttribute("st_summary"),text:v[D].getAttribute("displayText"),type:"stbar",count:D});v[D].setAttribute("st_processed","yes")}}else{if(v[D].className.match(F)&&v[D].className.match(F).length>=2&&v[D].className.match(F)[1]){if(stButtons.testElem(v[D])==false){j=true;B=v[D].className.match(F)[1];o.push({service:B,element:v[D],url:v[D].getAttribute("st_url"),title:v[D].getAttribute("st_title"),image:(v[D].getAttribute("st_img")!=null)?v[D].getAttribute("st_img"):v[D].getAttribute("st_image"),pinterest_native:v[D].getAttribute("st_native"),message:(v[D].getAttribute("st_msg")!=null)?v[D].getAttribute("st_msg"):v[D].getAttribute("st_message"),summary:v[D].getAttribute("st_summary"),text:v[D].getAttribute("displayText"),type:"stsmbar",count:D});v[D].setAttribute("st_processed","yes")}}else{if(v[D].className.match(E)&&v[D].className.match(E).length>=2&&v[D].className.match(E)[1]){if(stButtons.testElem(v[D])==false){j=true;B=v[D].className.match(E)[1];var H=v[D].className.split("_");o.push({service:B,element:v[D],url:v[D].getAttribute("st_url"),title:v[D].getAttribute("st_title"),image:(v[D].getAttribute("st_img")!=null)?v[D].getAttribute("st_img"):v[D].getAttribute("st_image"),pinterest_native:v[D].getAttribute("st_native"),message:(v[D].getAttribute("st_msg")!=null)?v[D].getAttribute("st_msg"):v[D].getAttribute("st_message"),summary:v[D].getAttribute("st_summary"),text:v[D].getAttribute("displayText"),type:"css",cssType:H[H.length-1]});v[D].setAttribute("st_processed","yes")}}else{if(v[D].className.match(u)&&v[D].className.match(u).length>=2&&v[D].className.match(u)[1]){if(stButtons.testElem(v[D])==false){j=true;B=v[D].className.match(u)[1];o.push({service:B,element:v[D],url:v[D].getAttribute("st_url"),title:v[D].getAttribute("st_title"),image:(v[D].getAttribute("st_img")!=null)?v[D].getAttribute("st_img"):v[D].getAttribute("st_image"),pinterest_native:v[D].getAttribute("st_native"),message:(v[D].getAttribute("st_msg")!=null)?v[D].getAttribute("st_msg"):v[D].getAttribute("st_message"),summary:v[D].getAttribute("st_summary"),text:v[D].getAttribute("displayText"),type:"chicklet"});v[D].setAttribute("st_processed","yes")}}}}}}}}}}}}}if(t){if(j){for(A=0;A<a.length;A++){if(a[A].service==B){a[A].count++;m=true}}if(!m){a.push({service:B,count:1,doNotReplace:false,processed:false})}}}}}if(t){var K=[];for(var s=a.length-1;s>=0;s--){if(a[s].service=="sharethis"||a[s].doNotReplace){a[s].processed=true;continue}else{for(var r in stRecentServices){var f=false;if(!stRecentServices[r].processed){for(var b=0;b<a.length;b++){if(r==a[b].service&&!a[b].processed){f=true;a[b].doNotReplace=true;stRecentServices[r].processed=true;break}}if(f){a[s].processed=true}else{K.push({oldService:a[s].service,newService:r});for(var q=0;q<o.length;q++){if(o[q].service==a[s].service){o[q].service=r;o[q].text=stRecentServices[r].title;o[q].element.setAttribute("displayText",stRecentServices[r].title);o[q].element.className=o[q].element.className.replace(a[s].service,r)}}stRecentServices[r].processed=true;a[s].processed=true;break}}}}}}for(var D=0;D<o.length;D++){if(!stButtons.isValidService(o[D].service)){continue}stWidget.addEntry(o[D])}};stButtons.odcss=function(a,b){this.head=document.getElementsByTagName("head")[0];this.scriptSrc=a;this.css=document.createElement("link");this.css.setAttribute("rel","stylesheet");this.css.setAttribute("type","text/css");this.css.setAttribute("href",this.scriptSrc);setTimeout(function(){b()},500);this.head.appendChild(this.css)};stButtons.makeButtons=function(){if(typeof(stButtons.button_css_called)=="undefined"){var a=(("https:"==document.location.protocol)?"https://ws.sharethis.com/button/css/buttons-secure.css":"http://w.sharethis.com/button/css/buttons.b53d53949b67e7ea0adacde4c2838c6a.css");stButtons.odcss(a,function(){});stButtons.button_css_called=true}stButtons.locateElements()};stButtons.getPlusOneFromGoogle=function(a){if(stButtons.plusOneLoaded==false){if(stButtons.plusOneLoading==false){var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("src","https://apis.google.com/js/plusone.js");b.async=stWidget.options.asyncPlusone;b.onload=function(){stButtons.renderPlusOneFromGoogle(a);stButtons.plusOneLoaded=true;stButtons.plusOneLoading=false};b.onreadystatechange=function(){if(this.readyState=="complete"){stButtons.renderPlusOneFromGoogle(a);stButtons.plusOneLoaded=true;stButtons.plusOneLoading=false}};stButtons.plusOneLoading=true;document.getElementsByTagName("head")[0].appendChild(b)}}else{stButtons.renderPlusOneFromGoogle(a)}};stButtons.renderPlusOneFromGoogle=function(a){if(a=="plusone"){gapi.plusone.go()}else{if(a=="googleplusfollow"||a=="googleplusadd"){gapi.plus.go()}}};stButtons.getXFBMLFromFB=function(b){if(typeof(stWidget.options.fbLoad)!="undefined"&&stWidget.options.fbLoad!=true){return}if(stButtons.xfbmlLoaded==false){if(stButtons.xfbmlLoading==false){stButtons.xfbmlLoading=true;var d=document.createElement("div");d.setAttribute("id","fb-root");document.body.appendChild(d);var a="en_US";if(typeof(stWidget.options.fbLang)!="undefined"&&stWidget.options.fbLang!=""){a=stWidget.options.fbLang}var f,e=document.getElementsByTagName("script")[0];if(document.getElementById("facebook-jssdk")){if(typeof(FB)!="undefined"&&typeof(FB.XFBML)!="undefined"&&typeof(FB.XFBML.parse)=="function"){if(!(/iframe/).test(b.innerHTML)){FB.XFBML.parse(b)}stButtons.trackFB();stButtons.xfbmlLoaded=true;stButtons.xfbmlLoading=false}return}f=document.createElement("script");f.id="facebook-jssdk";f.src="//connect.facebook.net/"+a+"/all.js";f.async=stWidget.options.async;f.onload=function(){FB.init({appId:"",xfbml:true});stButtons.trackFB();stButtons.xfbmlLoaded=true;stButtons.xfbmlLoading=false};f.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){FB.init({appId:"",xfbml:true});stButtons.trackFB();stButtons.xfbmlLoaded=true;stButtons.xfbmlLoading=false}};e.parentNode.insertBefore(f,e)}}else{if(!(/iframe/).test(b.innerHTML)){FB.XFBML.parse(b)}stButtons.trackFB()}};stButtons.addCount=function(a){stButtons.counts.push(a)};stButtons.getCountsFromService=function(a,h,f){if(stButtons.checkQueue(a)==false){var d=d+"-"+stButtons.cbVal;d="stButtons.processCB";stButtons.cbVal++;var j=document.referrer;var e=j.replace("http://","").replace("https://","").split("/");var i=e.shift();var b=e.join("/");i=encodeURIComponent(i);b=encodeURIComponent(b);var g=stLight.publisher;var k=(("https:"==document.location.protocol)?"https://ws.sharethis.com/api/getCount2.php?cb="+d+"&refDomain="+i+"&refQuery="+b+"&pgurl="+encodeURIComponent(document.location.href)+"&pubKey="+g+"&url=":"http://wd.sharethis.com/api/getCount2.php?cb="+d+"&refDomain="+i+"&refQuery="+b+"&pgurl="+encodeURIComponent(document.location.href)+"&pubKey="+g+"&url=");stLight.odjs(k+encodeURIComponent(a),function(){});stButtons.queue.push(a)}if(stButtons.countsResp[a]){stButtons.processCount(stButtons.countsResp[a])}};stButtons.checkQueue=function(a){for(var b=0;b<stButtons.queue.length;b++){if(stButtons.queue[b]==a){return true}}return false};stButtons.testElem=function(b){var a=false;if(b.getAttribute("st_processed")!=null){return true}else{return false}};function Shareable(d){var a={};a.facebook="450";a.twitter="684";a.yahoo="500";a.linkedin="600";var b={};b.facebook="300";b.twitter="718";b.yahoo="460";b.linkedin="433";this.idx=-1;this.url=null;this.title=null;this.image=null;this.pinterest_native=null;this.element=null;this.service=null;this.message=null;this.screen="home";this.summary=null;this.content=null;this.buttonText=null;this.frag=null;this.onhover=true;this.type=null;var e=this;var f=false;this.attachButton=function(g){this.element=g;if((this.onhover==true||this.onhover=="true")&&!stlib.browser.mobile.isMobile()&&((stWidgetVersion=="4x")||((stWidgetVersion=="5x")&&(d.service=="sharethis"||d.service=="email"||d.service=="wordpress")))){g.onmouseover=this.mouseOn;g.onmouseout=this.mouseOut}g.onclick=function(h){e.decideFastShare()}};this.init=function(){stWidget.merge(this,d);stWidget.shareables.push(this);if(d.element!==null){this.attachButton(d.element)}};return this}if(typeof(stWidget)=="undefined"){var stWidget=new function(){this.shareables=[];this.entries=0;this.widgetOpen=false;this.mouseOnTimer=null;this.mouseTimer=null;this.mouseOutTimer=null;this.frameReady=false;this.stopClosing=false;this.buttonClicked=false;this.widgetLoadingComplete=false;this.skipESIValue=false;this.frameUrl5x=(("https:"==document.location.protocol)?"https://ws.sharethis.com/secure5x/index.html":"http://edge.sharethis.com/share5x/index.60f47fb0837636a7ce1ad2eeefe14324.html");this.frameUrl4x=(("https:"==document.location.protocol)?"https://ws.sharethis.com/secure/index.html":"http://edge.sharethis.com/share4x/index.8981626edb3e6ebb561322f974a165c5.html");this.secure=false;try{this.mainstframe=document.createElement('<iframe name="stLframe" allowTransparency="true" style="body{background:transparent;}" ></iframe>');this.mainstframe.onreadystatechange=function(){if(stWidget.mainstframe.readyState==="complete"){stWidget.frameReady=true;stButtons.pumpInstance=new stlib.pump(stWidget.mainstframe,stWidget.mainstframe,function(){stButtons.messageQueueInstance.process()});stButtons.messageQueueInstance.setPumpInstance(stButtons.pumpInstance);try{stButtons.pumpInstance.broadcastSendMessage("Buttons Ready")}catch(d){}}}}catch(b){this.mainstframe=document.createElement("iframe");this.mainstframe.allowTransparency="true";this.mainstframe.setAttribute("allowTransparency","true");this.mainstframe.onload=function(){stWidget.frameReady=true;stButtons.pumpInstance=new stlib.pump(stWidget.mainstframe,stWidget.mainstframe,function(){stButtons.messageQueueInstance.process()});stButtons.messageQueueInstance.setPumpInstance(stButtons.pumpInstance);try{stButtons.pumpInstance.broadcastSendMessage("Buttons Ready")}catch(d){}}}this.mainstframe.id="stLframe";this.mainstframe.className="stLframe";this.mainstframe.name="stLframe";this.mainstframe.frameBorder="0";this.mainstframe.scrolling="no";this.mainstframe.width="353px";this.mainstframe.height="350px";this.mainstframe.style.top="0px";this.mainstframe.style.left="0px";this.wrapper=document.createElement("div");this.wrapper.id="stwrapper";this.wrapper.className="stwrapper";this.wrapper.style.visibility="hidden";this.wrapper.style.top="-999px";this.wrapper.style.left="-999px";this.closewrapper=document.createElement("div");this.closewrapper.className="stclose";var a=0;this.widgetLoadInterval=self.setInterval(function(){stWidget.widgetLoad();a+=1;if(a>90){stWidget.forceDefaultWidgetSetting();window.clearInterval(stWidget.widgetLoadInterval)}},1000);this.closewrapper.onclick=function(){stWidget.closeWidget()};this.ogtitle=null;this.ogdesc=null;this.ogurl=null;this.ogimg=null;this.ogtype=null;this.twittertitle=null;this.twitterdesc=null;this.twitterurl=null;this.twitterimg=null;this.twittercard=null;this.desc=null;this.initFire=false;this.merge=function(f,e){for(var d in e){if(f.hasOwnProperty(d)&&e[d]!==null){f[d]=e[d]}}};this.oldScroll=0;this.init=function(){if(stWidget.initFire==false){stWidget.initFire=true;if(stButtons.messageQueueInstance==null){stButtons.messageQueueInstance=new stlib.messageQueue()}if(stlib.browser.ieFallback){setTimeout("stButtons.messageQueueInstance.send(stWidget.createFrag(stlib.data,'data'), 'data');",1000)}else{stButtons.messageQueueInstance.send(stWidget.createFrag(stlib.data,"data"),"data")}if(stlib.browser.ieFallback){setTimeout("stButtons.messageQueueInstance.send(stWidget.createFrag(null,'init'), 'init');",2000);setTimeout("stWidget.initIE=true;",2500)}else{stButtons.messageQueueInstance.send(stWidget.createFrag(null,"init"),"init")}}}}}stWidget.widgetLoad=function(){if(esiStatus=="loaded"||(useEdgeSideInclude==false)){if(stWidgetVersion=="5x"){stWidget.frameUrlChoice=stWidget.frameUrl5x}if(stWidgetVersion=="4x"){stWidget.frameUrlChoice=stWidget.frameUrl4x}stWidget.mainstframe.src=stWidget.frameUrlChoice;if(stWidgetVersion=="5x"){stWidget.mainstframe.width="500px";stWidget.mainstframe.height="430px";stWidget.wrapper.style.top="-999px";stWidget.wrapper.style.left="-999px";stWidget.wrapper.style.width="500px";stWidget.wrapper.style.zIndex=89999999;stWidget.overlay=document.createElement("div");stWidget.overlay.style.height="100%";stWidget.overlay.style.width="100%";stWidget.overlay.style.backgroundColor="#000";stWidget.overlay.style.opacity="0.6";stWidget.overlay.style.filter="Alpha(Opacity=60)";stWidget.overlay.style.position="fixed";if(document.all&&navigator.appVersion.indexOf("MSIE 6.")!=-1){stWidget.overlay.style.position="absolute"}stWidget.overlay.style.display="none";stWidget.overlay.style.left="0";stWidget.overlay.style.top="0";stWidget.overlay.style.zIndex=89999990;stWidget.overlay.setAttribute("id","stOverlay");stWidget.closewrapper.className="stCloseNew2"}stWidget.wrapper.appendChild(stWidget.closewrapper);stWidget.wrapper.appendChild(stWidget.mainstframe);stWidget.widgetLoadingComplete=true;window.clearInterval(stWidget.widgetLoadInterval)}};stWidget.forceDefaultWidgetSetting=function(){window.clearInterval(stWidget.widgetLoadInterval);stWidget.skipESIValue=true;stLight.usePublisherDefaultSettings();if(stWidgetVersion=="5x"){stWidget.frameUrl5x=(("https:"==document.location.protocol)?"https://ws.sharethis.com/secure5x/index.html":"http://edge.sharethis.com/share5x/index.60f47fb0837636a7ce1ad2eeefe14324.html");stWidget.frameUrlChoice=stWidget.frameUrl5x}if(stWidgetVersion=="4x"){stWidget.frameUrlChoice=stWidget.frameUrl4x}stWidget.mainstframe.src=stWidget.frameUrlChoice;if(stWidgetVersion=="5x"){stWidget.mainstframe.width="500px";stWidget.mainstframe.height="430px";stWidget.wrapper.style.top="-999px";stWidget.wrapper.style.left="-999px";stWidget.wrapper.style.width="500px";stWidget.wrapper.style.zIndex=89999999;stWidget.overlay=document.createElement("div");stWidget.overlay.style.height="100%";stWidget.overlay.style.width="100%";stWidget.overlay.style.backgroundColor="#000";stWidget.overlay.style.opacity="0.6";stWidget.overlay.style.filter="Alpha(Opacity=60)";stWidget.overlay.style.position="fixed";if(document.all&&navigator.appVersion.indexOf("MSIE 6.")!=-1){stWidget.overlay.style.position="absolute"}stWidget.overlay.style.display="none";stWidget.overlay.style.left="0";stWidget.overlay.style.top="0";stWidget.overlay.style.zIndex=89999990;stWidget.overlay.setAttribute("id","stOverlay");stWidget.closewrapper.className="stCloseNew2"}stWidget.wrapper.appendChild(stWidget.closewrapper);stWidget.wrapper.appendChild(stWidget.mainstframe);stWidget.widgetLoadingComplete=true};stWidget.options=new function(){this.fpc=stLight.fpc;this.sessionID=null;this.publisher=null;this.tracking=true;this.send_services=null;this.exclusive_services=null;this.headerTitle=null;this.headerfg=null;this.headerbg=null;this.offsetLeft=null;this.offsetTop=null;this.onhover=true;this.async=false;this.asyncPlusone=false;this.autoclose=true;this.autoPosition=true;this.embeds=false;this.doneScreen=true;this.minorServices=true;this.excludeServices=null;this.theme=1;this.serviceBarColor=null;this.shareButtonColor=null;this.footerColor=null;this.headerTextColor=null;this.helpTextColor=null;this.mainWidgetColor=null;this.textBoxFontColor=null;this.textRightToLeft=false;this.shorten=true;this.popup=false;this.newOrZero="new";this.minShareCount=null;this.publisherGA=null;this.services="";this.relatedDomain=null;this.hashAddressBar=null;this.doNotHash=null;this.doNotCopy=null;this.nativeCount=false;this.lang="";this.fbLang="";this.fbLoad=true;this.servicePopup=false;this.textcause=null;this.linkcause=null;this.snapsets=null;this.publisherMigration=false};stWidget.addEntry=function(a){if(!a.element){return false}if(a&&a.service&&((a.service=="email"||a.service=="sharethis"||a.service=="wordpress")||((stIsLoggedIn&&servicesLoggedIn&&typeof(servicesLoggedIn[a.service])!="undefined"&&((useFastShare||(!useFastShare&&(stWidgetVersion=="5x")))&&(a.service=="facebook"||a.service=="twitter"||a.service=="yahoo"||a.service=="linkedin")))))){openWidget=true}else{openWidget=false}if(!openWidget){if(a.type!=="custom"){a.element.appendChild(stButtons.makeButton(a));if(a.service=="plusone"||a.service=="googleplusfollow"||a.service=="googleplusadd"){stButtons.getPlusOneFromGoogle(a.service)}if(a.service=="fblike"||a.service=="fbsend"||a.service=="fbrec"||a.service=="fbLong"||a.service=="fbsub"){stButtons.getXFBMLFromFB(a.element)}if(stlib.nativeButtons.checkNativeButtonSupport(a.service)){stlib.nativeButtons.loadService(a.service)}}else{stButtons.makeButton(a)}stlib.buttonInfo.addButton(a);return true}else{if(a.type!="custom"){a.element.appendChild(stButtons.makeButton(a));if(a.service=="plusone"||a.service=="googleplusfollow"||a.service=="googleplusadd"){stButtons.getPlusOneFromGoogle(a.service)}if(a.service=="fblike"||a.service=="fbsend"||a.service=="fbrec"||a.service=="fbLong"||a.service=="fbsub"){stButtons.getXFBMLFromFB(a.element)}if(stlib.nativeButtons.checkNativeButtonSupport(a.service)){stlib.nativeButtons.loadService(a.service)}}else{stButtons.makeButton(a)}var d=new Shareable(a);d.idx=stWidget.entries;stWidget.entries++;d.publisher=stLight.publisher;d.sessionID=stLight.sessionID;d.fpc=stLight.fpc;if(a.element.getAttribute("st_via")!=null){d.via=a.element.getAttribute("st_via").replace(/^\s+|\s+$/g,"")}d.url=stWidget.ogurl?stWidget.ogurl:(stWidget.twitterurl?stWidget.twitterurl:document.location.href);d.url=a.url?a.url:d.url;if(!stlib.hash.doNotHash){d.url=stlib.hash.appendHash(d.url);a.url=d.url}stlib.data.set("url",d.url,"shareInfo");d.title=stWidget.ogtitle?stWidget.ogtitle:(stWidget.twittertitle?stWidget.twittertitle:document.title);d.title=a.title?a.title:d.title;var b=stWidget.ogimg?stWidget.ogimg:(stWidget.twitterimg?stWidget.twitterimg:(a.element.thumbnail?a.element.thumbnail:null));d.image=(a.element.image)?a.element.image:b;d.summary=stWidget.ogdesc?stWidget.ogdesc:(stWidget.twitterdesc?stWidget.twitterdesc:stWidget.desc);d.summary=a.element.summary?a.element.summary:d.summary;stWidget.merge(d,stWidget.options);if(typeof(stWidget.options.textRightToLeft)!="undefined"&&stWidget.options.textRightToLeft!="null"&&stWidget.options.textRightToLeft==true){document.getElementById("stwrapper").style.top="auto";document.getElementById("stwrapper").style.left="auto"}d.mouseOn=function(){stWidget.mouseOnTimer=setTimeout(d.decideFastShare,500)};d.mouseOut=function(){clearInterval(stWidget.mouseOnTimer)};d.decideFastShare=function(){if(stlib.browser.ieFallback){if(typeof(stWidget.initIE)=="undefined"||stWidget.initIE!=true){return}}if(!useFastShare||!stIsLoggedIn||a.service=="email"||a.service=="sharethis"||a.service=="wordpress"||(typeof(servicesLoggedIn[a.service])=="undefined"&&(a.service=="facebook"||a.service=="twitter"||a.service=="linkedin"||a.service=="yahoo"))){if(stlib.browser.mobile.handleForMobileFriendly(d,a,stWidget.options)){stLight.log("widget","mobile",a.service,a.type)}else{d.popup()}}else{stLight.log("widget","fastShare",a.service,a.type);stFastShareObj.url=d.url;stFastShareObj.title=d.title;stFastShareObj.image=d.image;if(typeof(d.summary)!="undefined"&&d.summary!=null){stFastShareObj.summary=d.summary}stFastShareObj.via=null;if(a.service=="twitter"&&d.element.getAttribute("st_via")!=null){stFastShareObj.via=d.element.getAttribute("st_via").replace(/^\s+|\s+$/g,"")}stFastShareObj.message=d.message;stFastShareObj.element=a.element;stFastShareObj.service=a.service;stFastShareObj.type=a.type;stFastShareObj.publisher=stlib.data.get("publisher","pageInfo");stFastShareObj.fpc=stlib.data.get("fpc","pageInfo");stFastShareObj.sessionID=stlib.data.get("sessionID","pageInfo");stFastShareObj.hostname=stlib.data.get("hostname","pageInfo");stFastShareObj.username=servicesLoggedIn[a.service];if(typeof(fastShare)=="undefined"){stLight.odjs((("https:"==document.location.protocol)?"https://ws.sharethis.com/button/fastShare.js":"http://w.sharethis.com/button/fastShare.js"),function(){fastShare.showWidget()})}else{fastShare.showWidget()}}};d.popup=function(){if(stWidget.widgetOpen==false){if(stWidgetVersion=="4x"){stWidget.stCancelClose()}var h=stLight.getSource2(a);stLight.log("widget",h,a.service,a.type);if(stWidget.options.popup&&(stWidgetVersion=="4x")){var j=stWidget.createFrag(d);_$d_();_$d1("4x Popup Called");_$d1(j);_$d_();window.open(stWidget.frameUrl4x+"#"+j,"newstframe","status=1,toolbar=0,width=345,height=375")}else{if(stWidget.options.popup&&(stWidgetVersion=="5x")){var i="http://sharethis.com/share?url="+d.url;if(d.title!=null){i+="&title="+d.title}if(d.image!=null){i+="&img="+d.image}if(d.summary!=null){i+="&summary="+d.summary}if(a.type!=null){i+="&type="+a.type}if(d.via!=null){i+="&via="+d.via}var g="";if(stlib.data){var f=stlib.json.encode(stlib.data.pageInfo);var e=stlib.json.encode(stlib.data.shareInfo);if(stlib.browser.isFirefox()&&!stlib.browser.firefox8Version()){f=encodeURIComponent(encodeURIComponent(f));e=encodeURIComponent(encodeURIComponent(e))}else{f=encodeURIComponent(f);e=encodeURIComponent(e)}g="&pageInfo="+f+"&shareInfo="+e}window.open(i+g,"newstframe","status=1,toolbar=0,width=820,height=950")}else{stButtons.messageQueueInstance.send(stWidget.createFrag(d),"light");stWidget.positionWidget(d);if(stWidget.options.embeds==false){stWidget.hideEmbeds()}setTimeout(function(){stWidget.widgetOpen=true;st_showing=true},200)}}}else{if(stWidget.widgetOpen==true&&stWidget.options.onhover==false){}}return false};d.init();stlib.buttonInfo.addButton(d);return d}};stWidget.createFrag=function(a,j){var i="light";i=stWidget.options.popup?"popup":i;__stgetPubGA();if(j=="data"){i="data";for(var b in a){if(a.hasOwnProperty(b)==true&&a[b]!==null&&typeof(a[b])!="function"){if(typeof(a[b])=="object"){var e=stlib.json.encode(a[b])}else{var e=a[b]}if(stlib.browser.isFirefox()&&!stlib.browser.firefox8Version()){i=i+"/"+b+"="+encodeURIComponent(encodeURIComponent(e))}else{i=i+"/"+b+"="+encodeURIComponent(e)}}}}else{if(j=="init"){i="init";if(stWidget.options.tracking&&stWidget.options.publisherGA==null){if(typeof(pageTracker)!="undefined"&&pageTracker!==null){stWidget.options.publisherGA=pageTracker._getAccount()}else{if(stWidget.options.publisherGA==null&&typeof(__stPubGA)!=="undefined"){stWidget.options.publisherGA=__stPubGA}}}for(var b in stWidget.options){if(stWidget.options.hasOwnProperty(b)==true&&stWidget.options[b]!==null&&typeof(stWidget.options[b])!="function"&&typeof(stWidget.options[b])!="object"){var h=stWidget.options[b];try{h=decodeURIComponent(h);h=decodeURIComponent(h)}catch(d){}i=i+"/"+b+"="+encodeURIComponent(h)}}i=i+"/pUrl="+encodeURIComponent(encodeURIComponent(document.location.href))+((document.title!="")?"/title="+encodeURIComponent(encodeURIComponent(document.title)):"")+"/stLight=true"}else{for(var b in a){if(a.hasOwnProperty(b)==true&&a[b]!==null&&typeof(a[b])!="function"&&typeof(a[b])!="object"&&b!=="idx"){i=i+"/"+b+"-=-"+encodeURIComponent(encodeURIComponent(a[b]))}}if(a.service=="email"){i=i+"/page-=-send"}if(stWidgetVersion=="5x"){if(a.service=="facebook"){i=i+"/page-=-fbhome"}else{if(a.service=="twitter"){i=i+"/page-=-twhome"}else{if(a.service=="yahoo"){i=i+"/page-=-ybhome"}else{if(a.service=="linkedin"){i=i+"/page-=-lihome"}else{if(a.service=="wordpress"){i=i+"/page-=-wphome"}}}}}}if(stlib.data){var g=stlib.json.encode(stlib.data.pageInfo);var f=stlib.json.encode(stlib.data.shareInfo);if(stlib.browser.isFirefox()&&!stlib.browser.firefox8Version()){g=encodeURIComponent(encodeURIComponent(g));f=encodeURIComponent(encodeURIComponent(f))}else{g=encodeURIComponent(g);f=encodeURIComponent(f)}i+="/pageInfo-=-"+g;i+="/shareInfo-=-"+f}}}return i};stWidget.positionWidget=function(o){function getHW(elem){var retH=0;var retW=0;var going=true;while(elem!=null){retW+=elem.offsetLeft;if(going){retH+=elem.offsetTop}if(window.getComputedStyle){if(document.defaultView.getComputedStyle(elem,null).getPropertyValue("position")=="fixed"){retH+=(document.documentElement.scrollTop||document.body.scrollTop);going=false}}else{if(elem.currentStyle){if(elem.currentStyle.position=="fixed"){retH+=(document.documentElement.scrollTop||document.body.scrollTop);going=false}}}elem=elem.offsetParent}return{height:retH,width:retW}}if(!o){return false}if(stWidgetVersion=="4x"){shareel=o.element;var curleft=curtop=0;var mPos=getHW(shareel);curleft=mPos.width;curtop=mPos.height;shareel=o.element;var eltop=0;var elleft=0;var topVal=0;var leftVal=0;var elemH=0;var elemW=0;eltop=curtop+shareel.offsetHeight+5;elleft=curleft+5;topVal=(eltop+(stWidget.options.offsetTop?stWidget.options.offsetTop:0));topVal=eval(topVal);elemH=topVal;topVal+="px";leftVal=(elleft+(stWidget.options.offsetLeft?stWidget.options.offsetLeft:0));leftVal=eval(leftVal);elemW=leftVal;leftVal+="px";stWidget.wrapper.style.top=topVal;stWidget.wrapper.style.left=leftVal;if(stWidget.options.autoPosition==true){stWidget.oldScroll=document.body.scrollTop;var pginfo=stWidget.pageSize();var effectiveH=pginfo.height+pginfo.scrY;var effectiveW=pginfo.width+pginfo.scrX;var widgetH=330;var widgetW=330;var needH=widgetH+elemH;var needW=widgetW+elemW;var diffH=needH-effectiveH;var diffW=needW-effectiveW;var newH=elemH-diffH;var newW=elemW-diffW;var buttonPos=getHW(shareel);var leftA,rightA,topA,bottomA=false;if(diffH>0){bottomA=false;topA=true;if((buttonPos.height-widgetH)>0){newH=buttonPos.height-widgetH}stWidget.wrapper.style.top=newH+"px"}if(diffW>0){leftA=false;rightA=true;if((buttonPos.width-widgetW)>0){newW=buttonPos.width-widgetW}stWidget.wrapper.style.left=newW+"px"}}if(stWidget.options.autoPosition=="center"){stWidget.wrapper.style.top="15%";stWidget.wrapper.style.left="35%";stWidget.wrapper.style.position="fixed"}}else{document.getElementById("stOverlay").style.display="block";var topVal;if(stWidget.options.autoPosition==true){if(document.all&&navigator.appVersion.indexOf("MSIE 7.")!=-1){stWidget.wrapper.style.left="500px"}else{stWidget.wrapper.style.left="10%"}stWidget.wrapper.style.right="10%";topVal=(document.documentElement.clientHeight-parseFloat(stWidget.wrapper.offsetHeight)/2)/2;if(topVal>20){topVal=20}else{if(topVal<5){topVal=5}}stWidget.wrapper.style.top=topVal+"px";stWidget.wrapper.style.marginLeft="auto";stWidget.wrapper.style.marginRight="auto";stWidget.wrapper.style.textAlign="left";stWidget.wrapper.style.position="fixed";if(document.all&&navigator.appVersion.indexOf("MSIE 6.")!=-1){stWidget.wrapper.style.left="300px";stWidget.wrapper.style.position="absolute"}}if(stWidget.options.autoPosition=="center"){if(document.all&&navigator.appVersion.indexOf("MSIE 7.")!=-1){stWidget.wrapper.style.left="500px"}else{stWidget.wrapper.style.left="10%"}stWidget.wrapper.style.right="10%";stWidget.wrapper.style.marginLeft="auto";stWidget.wrapper.style.marginRight="auto";stWidget.wrapper.style.position="fixed";topVal=(document.documentElement.clientHeight-parseFloat(stWidget.wrapper.offsetHeight)/2)/2;if(topVal>20){topVal=20}else{if(topVal<5){topVal=5}}stWidget.wrapper.style.top=topVal+"px";if(document.all&&navigator.appVersion.indexOf("MSIE 6.")!=-1){stWidget.wrapper.style.position="absolute"}}}stWidget.wrapper.style.visibility="visible";stWidget.mainstframe.style.visibility="visible"},stWidget.hideWidget=function(){if(stWidget.wrapper.style.visibility!=="hidden"){stWidget.wrapper.style.visibility="hidden"}if(stWidget.mainstframe.style.visibility!=="hidden"){stWidget.mainstframe.style.visibility="hidden"}if(stWidgetVersion=="5x"){document.getElementById("stOverlay").style.display="none"}};stWidget.pageSize=function(){var f=[0,0,0,0];var b=0;var a=0;var e=0;var d=0;if(typeof(window.pageYOffset)=="number"){b=window.pageXOffset;a=window.pageYOffset}else{if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){b=document.body.scrollLeft;a=document.body.scrollTop}else{if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){b=document.documentElement.scrollLeft;a=document.documentElement.scrollTop}}}if(window.innerWidth){e=window.innerWidth;d=window.innerHeight}else{if(document.documentElement.offsetWidth){e=document.documentElement.offsetWidth;d=document.documentElement.offsetHeight}}f={scrX:b,scrY:a,width:e,height:d};return f};stWidget.closetimeout=null;stWidget.stClose=function(a){if(!a){a=1000}if((stWidgetVersion=="4x")&&stWidget.options.autoclose!=null&&(stWidget.options.autoclose==true||stWidget.options.autoclose=="true")){if(stWidget.openDuration<0.5&&stWidget.stopClosing==false){stWidget.closetimeout=setTimeout("stWidget.closeWidget()",a)}else{stWidget.stopClosing=true}}};stWidget.stCancelClose=function(){clearTimeout(stWidget.closetimeout);stWidget.buttonClicked=true;setTimeout(function(){stWidget.buttonClicked=false},100)};stWidget.closeWidget=function(){if(st_showing==false){return false}st_showing=false;stWidget.widgetOpen=false;stWidget.wrapper.style.visibility="hidden";stWidget.mainstframe.style.visibility="hidden";stWidget.showEmbeds();stWidget.sendEvent("screen","home");if(stWidgetVersion=="5x"){document.getElementById("stOverlay").style.display="none"}else{stWidget.wrapper.style.top="-999px";stWidget.wrapper.style.left="-999px"}};stWidget.hideEmbeds=function(){var b=document.getElementsByTagName("embed");for(var a=0;a<b.length;a++){b[a].style.visibility="hidden"}};stWidget.showEmbeds=function(){if(stWidget.options.embeds==true){return true}var b=document.getElementsByTagName("embed");for(var a=0;a<b.length;a++){b[a].style.visibility="visible"}};stWidget.sendEvent=function(a,d){var b="widget/"+a+"="+d;stButtons.messageQueueInstance.send(b,"widget")};stWidget.getMetaTags=function(){stWidget.getOGTags();stWidget.getTwitterTags()};stWidget.getOGTags=function(){var d=document.getElementsByTagName("meta");for(var a=0;a<d.length;a++){var b=d[a].getAttribute("property");if(b==null){b=d[a].getAttribute("name")}if(b=="og:title"){stWidget.ogtitle=d[a].getAttribute("content")}else{if(b=="og:type"){stWidget.ogtype=d[a].getAttribute("content")}else{if(b=="og:url"){stWidget.ogurl=d[a].getAttribute("content")}else{if(b=="og:image"){stWidget.ogimg=d[a].getAttribute("content").replace(/^\s+|\s+$/g,"")}else{if(b=="og:description"){stWidget.ogdesc=d[a].getAttribute("content")}else{if(b=="description"||b=="Description"){stWidget.desc=d[a].getAttribute("content")}}}}}}}};stWidget.getTwitterTags=function(){var d=document.getElementsByTagName("meta");for(var a=0;a<d.length;a++){var b=d[a].getAttribute("name");if(b==null){b=d[a].getAttribute("property")}if(b=="twitter:card"){stWidget.twittercard=d[a].getAttribute("content")}else{if(b=="twitter:url"){stWidget.twitterurl=d[a].getAttribute("content")}else{if(b=="twitter:title"){stWidget.twittertitle=d[a].getAttribute("content")}else{if(b=="twitter:description"){stWidget.twitterdesc=d[a].getAttribute("content")}else{if(b=="twitter:image"){stWidget.twitterimg=d[a].getAttribute("content")}else{if(b=="description"||b=="Description"){stWidget.desc=d[a].getAttribute("content")}}}}}}}};function shareLog(a,b){if(typeof(pageTracker)!="undefined"&&pageTracker!==null&&typeof(pageTracker._trackEvent)!="undefined"){pageTracker._trackEvent("ShareThis",a,b)}else{if(typeof(_gaq)!="undefined"&&_gaq!==null){_gaq.push(["_trackEvent","ShareThis",a,b])}else{if(stButtons.publisherTracker!==null){stButtons.publisherTracker._trackEvent("ShareThis",a,b)}else{if(typeof(_gat)!="undefined"&&_gat!==null){if(typeof(stWidget.options.publisherGA)!="undefined"&&stWidget.options.publisherGA!=null){stButtons.publisherTracker=_gat._getTracker(stWidget.options.publisherGA);stButtons.publisherTracker._trackEvent("ShareThis",a,b)}}}}}}stButtons.completeInit=function(){if(!stButtons.goToInit){var a=self.setInterval(function(){if(stWidget.widgetLoadingComplete){stButtons.goToInit=true;stWidget.getMetaTags();document.body.appendChild(stWidget.wrapper);if(stWidgetVersion=="5x"){document.body.appendChild(stWidget.overlay)}if(stWidgetVersion=="4x"){try{var d=document.getElementById("stLframe");d.onmouseover=function(){stWidget.stCancelClose();stWidget.inTime=(new Date()).getTime()};d.onmouseout=function(){stWidget.outTime=(new Date()).getTime();stWidget.openDuration=(stWidget.outTime-stWidget.inTime)/1000;stWidget.stClose()};try{if(document.body.attachEvent){document.body.attachEvent("onclick",function(){if(stWidget.buttonClicked==false){stWidget.stopClosing=false;stWidget.openDuration=0;stWidget.stClose(100)}})}else{document.body.setAttribute("onclick","if(stWidget.buttonClicked==false){stWidget.stopClosing=false;stWidget.openDuration=0;stWidget.stClose(100);}")}}catch(b){document.body.onclick=function(){if(stWidget.buttonClicked==false){stWidget.stopClosing=false;stWidget.openDuration=0;stWidget.stClose(100)}}}}catch(b){}}stButtons.makeButtons();stWidget.init();window.clearInterval(a)}},1000)}};plusoneCallback=function(a){if(a.state=="on"){stlib.data.resetShareData();stlib.data.set("url",a.href,"shareInfo");stlib.data.set("destination","plusone","shareInfo");stlib.data.setSource("chicklet");stlib.data.set("buttonType","chicklet","shareInfo");stlib.sharer.share()}};stButtons.trackFB=function(){try{if(!stButtons.fbTracked&&typeof(FB)!="undefined"&&typeof(FB.Event)!="undefined"&&typeof(FB.Event.subscribe)!="undefined"){stButtons.fbTracked=true;FB.Event.subscribe("edge.create",function(b){stButtons.trackShare("fblike_auto",b);stLight.callSubscribers("click","fblike",b)});FB.Event.subscribe("edge.remove",function(b){stButtons.trackShare("fbunlike_auto",b);stLight.callSubscribers("click","fbunlike",b)});FB.Event.subscribe("message.send",function(b){stButtons.trackShare("fbsend_auto",b);stLight.callSubscribers("click","fbsend",b)})}}catch(a){}};stButtons.trackTwitter=function(){if(!stButtons.twitterTracked&&typeof(twttr)!="undefined"&&typeof(twttr.events)!="undefined"&&typeof(twttr.events.bind)!="undefined"){stButtons.twitterTracked=true;twttr.events.bind("click",function(a){stButtons.trackTwitterEvent("click");stLight.callSubscribers("click","twitter")});twttr.events.bind("tweet",function(){stButtons.trackTwitterEvent("tweet")});twttr.events.bind("retweet",function(){stButtons.trackTwitterEvent("retweet");stLight.callSubscribers("click","retweet")});twttr.events.bind("favorite",function(){stButtons.trackTwitterEvent("favorite");stLight.callSubscribers("click","favorite")});twttr.events.bind("follow",function(){stButtons.trackTwitterEvent("follow");stLight.callSubscribers("click","follow")})}};stButtons.trackTwitterEvent=function(a){stButtons.trackShare("twitter_"+a+"_auto")};stButtons.trackShare=function(a,d){if(typeof(d)!=="undefined"&&d!==null){var b=d}else{var b=document.location.href}stlib.data.resetShareData();stlib.data.set("url",b,"shareInfo");stlib.data.set("destination",a,"shareInfo");stlib.data.set("buttonType","chicklet","shareInfo");stlib.data.setSource("chicklet");stlib.sharer.share()};stLight.processSTQ=function(){if(typeof(_stq)!="undefined"){for(var a=0;a<_stq.length;a++){var b=_stq[a];stLight.options(b)}}else{return false}};stLight.onDomContentLoaded=function(){stLight.onReady();stButtons.trackTwitter()};stLight.onDomContentLoadedLazy=function(){stLight.loadServicesLoggedIn(function(){stLight.getAllAppDefault(function(){stlib.data.init();stButtons.locateElements();stButtons.makeButtons()})})};stLight.messageReceiver=function(b){if(b&&(b.origin=="http://edge.sharethis.com"||b.origin=="https://ws.sharethis.com")){var d=b.data;d=d.split("|");if(d[0]=="ShareThis"&&d.length>2){var a=(typeof(d[3])=="undefined")?document.location.href:d[3];stLight.callSubscribers(d[1],d[2],a)}}};stLight.subscribe=function(b,a){if(b=="click"){stLight.clickSubscribers.push(a)}else{stLight.nonClickSubscribers.push(a)}};stLight.callSubscribers=function(e,a,b){if(e=="click"){for(var d=0;d<stLight.clickSubscribers.length;d++){stLight.clickSubscribers[d]("click",a,b)}}};stLight.gaTS=function(d,a,b){var e="";var f="";if(a=="fblike"){e="ShareThis_facebook";f="Like"}else{if(a=="fbunlike"){e="ShareThis_facebook";f="UnLike"}else{if(a=="fbsend"){e="ShareThis_facebook";f="Send"}else{if(a=="twitter"){e="ShareThis_twitter";f="Share"}else{if(a=="retweet"){e="ShareThis_twitter";f="ReTweet"}else{if(a=="favorite"){e="ShareThis_twitter";f="Favorite"}else{if(a=="follow"){e="ShareThis_twitter";f="Follow"}else{e="ShareThis_"+a;f="Share"}}}}}}}if(typeof(_gaq)!="undefined"){_gaq.push(["_trackSocial",e,f,b])}};stButtons.onReady=function(){var h=document.getElementsByTagName("*");var b=[];var d=new RegExp(/sharethis_smartbuttons/);var a=false;for(var j=0;j<h.length;j++){if(typeof(h[j].className)=="string"&&h[j].className!=""){if(h[j].className.match(d)){a=true;break}}}if(a){var g=document.getElementsByTagName("head")[0];var e=["return=json","cb=stButtons.smartifyButtons"];e=e.join("&");var f=(("https:"==document.location.protocol)?"https://ws.":"http://wd.")+"sharethis.com/api/getRecentServices.php?"+e;var i=document.createElement("script");i.setAttribute("type","text/javascript");i.setAttribute("src",f);g.appendChild(i);setTimeout("stButtons.completeInit()",2000)}else{stButtons.completeInit()}stLight.subscribe("click",stLight.gaTS);if(stlib.browser.ieFallback&&stlib.browser.getIEVersion()<9){return}else{stLight.getAllAppDefault(function(){if(stWidget.options.snapsets&&typeof(stLight.snapSetsRun)=="undefined"){stLight.snapSetsRun=true;if(typeof(stlib.p6x)=="undefined"){stLight.odjs("http://w.sharethis.com/button/clipboard.js",function(){stlib.p6x.init()})}}})}};stLight.domReady=function(){stLight.onReady();stButtons.trackTwitter();__stgetPubGA();if(typeof(__stPubGA)!=="undefined"&&stLight.readyRun==true&&stWidget.frameReady==true){stWidget.sendEvent("publisherGA",__stPubGA)}};stButtons.goToInit=false;stButtons.widget=false;stButtons.widgetArray=[];stButtons.cbAppQueue=[];stButtons.queue=[];stButtons.cbQueue=[];stButtons.cbNativeQueue=[];stButtons.cbVal=0;stButtons.queuePos=0;stButtons.counts=[];st_showing=false;stButtons.urlElements=[];stButtons.publisherTracker=null;stButtons.plusOneLoaded=false;stButtons.plusOneLoading=false;stButtons.xfbmlLoaded=false;stButtons.xfbmlLoading=false;stButtons.fbTracked=false;stButtons.twitterTracked=false;stButtons.pumpInstance=null;stButtons.messageQueueInstance=null;stButtons.countsResp=[];stButtons.countsNativeResp=[];stWidget.getMetaTags();stLight.clickSubscribers=[];stLight.nonClickSubscribers=[];var __stPubGA;if(window.document.readyState=="completed"){stLight.domReady()}else{if(typeof(window.addEventListener)!="undefined"){window.addEventListener("load",stLight.domReady,false)}else{if(typeof(document.addEventListener)!="undefined"){document.addEventListener("load",stLight.domReady,false)}else{if(typeof window.attachEvent!="undefined"){window.attachEvent("onload",stLight.domReady)}}}}if(typeof(window.addEventListener)!="undefined"){window.addEventListener("click",function(){stWidget.closeWidget()},false)}else{if(typeof(document.addEventListener)!="undefined"){document.addEventListener("click",function(){stWidget.closeWidget()},false)}else{if(typeof window.attachEvent!="undefined"){window.attachEvent("onclick",function(){stWidget.closeWidget()})}}}if(typeof(__st_loadLate)=="undefined"){if(typeof(window.addEventListener)!="undefined"){window.addEventListener("DOMContentLoaded",stLight.onDomContentLoaded,false)}else{if(typeof(document.addEventListener)!="undefined"){document.addEventListener("DOMContentLoaded",stLight.onDomContentLoaded,false)}}}else{if(typeof(window.addEventListener)!="undefined"){window.addEventListener("DOMContentLoaded",stLight.onDomContentLoadedLazy,false)}else{if(typeof(document.addEventListener)!="undefined"){document.addEventListener("DOMContentLoaded",stLight.onDomContentLoadedLazy,false)}}}if(typeof(window.addEventListener)!="undefined"){window.addEventListener("message",stLight.messageReceiver,false)}else{if(typeof(document.addEventListener)!="undefined"){document.addEventListener("message",stLight.messageReceiver,false)}else{if(typeof window.attachEvent!="undefined"){window.attachEvent("onmessage",stLight.messageReceiver)}}}if(document.readyState=="complete"&&stLight.readyRun==false){stLight.domReady()};
(function() {
  var hide_or_show;

  hide_or_show = function() {
    var s1, s2;
    s1 = document.getElementById("business_is_tax_lien");
    s2 = document.getElementsByClassName("tax_lien_payment_plan");
    if (s1.options[s1.selectedIndex].text === "Yes") {
      s2.style.display = "block";
    }
    if (s1.options[s1.selectedIndex].text === "No") {
      s2.style.display = "none";
    }
  };

}).call(this);
(function() {
  var convert_currency, convert_phone;

  Number.prototype.formatMoney = function(decPlaces, thouSeparator, decSeparator) {
    var i, j, n, sign;
    n = this;
    decPlaces = (isNaN(decPlaces = Math.abs(decPlaces)) ? 2 : decPlaces);
    decSeparator = (decSeparator === undefined ? "." : decSeparator);
    thouSeparator = (thouSeparator === undefined ? "," : thouSeparator);
    sign = (n < 0 ? "-" : "");
    i = parseInt(n = Math.abs(+n || 0).toFixed(decPlaces)) + "";
    j = ((j = i.length) > 3 ? j % 3 : 0);
    return sign + (j ? i.substr(0, j) + thouSeparator : "") + i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + thouSeparator) + (decPlaces ? decSeparator + Math.abs(n - i).toFixed(decPlaces).slice(2) : "");
  };

  convert_currency = function(element) {
    return $(element).each(function(index) {
      var new_value, number;
      number = $(this).val();
      if (typeof number !== 'undefined' && number.length > 0) {
        number = number.replace(/k$/, "000");
        number = number.replace(/K$/, "000");
        number = number.replace(/[^\d.]/g, "");
        new_value = parseInt(number).formatMoney(0, ",", ".");
        return $(this).val("$" + new_value);
      }
    });
  };

  convert_phone = function(element) {
    var number;
    number = $(element).val();
    if (typeof number !== 'undefined' && number.length > 0) {
      number = number.replace(/\D/g, "");
      number = number.replace(/\A1/, "");
      while (number.length < 10) {
        number = number + "x";
      }
      return $(element).val("(" + number.substring(0, 3) + ") " + number.substring(3, 6) + " - " + number.substring(6, 10));
    }
  };

  $(document).ready(function() {
    convert_currency(".currency_convert");
    convert_phone(".phone_convert");
    $(".currency_convert").change(function() {
      return convert_currency(this);
    });
    $(".currency_convert.live_edit").keyup(function() {
      return convert_currency(this);
    });
    $(".phone_convert").change(function() {
      return convert_phone(this);
    });
    return $('input.form-control').click(function() {
      return $(this).val('');
    });
  });

}).call(this);
//$(function() {
//     $( ".date_picker" ).datepicker();
//   });
(function() {
  window['funding_steps#show'] = function(data) {
    if (data.is_financial === true) {
      $(".paper-section-bank-login-form-section-payment").css("display", "none");
      return $(".is_tax_lien_input").on("change", function() {
        if ($(".is_tax_lien_input").val() === "true") {
          return $(".paper-section-bank-login-form-section-payment").css("display", "block");
        } else {
          return $(".paper-section-bank-login-form-section-payment").css("display", "none");
        }
      });
    }
  };

  window['funding_steps#update'] = function(data) {
    if (data.is_financial === true) {
      return $(".is_tax_lien_input").on("change", function() {
        if ($(".is_tax_lien_input").val() === "true") {
          return $(".paper-section-bank-login-form-section-payment").css("display", "block");
        } else {
          return $(".paper-section-bank-login-form-section-payment").css("display", "none");
        }
      });
    }
  };

  $(document).ready(function() {
    if ($(".closing_fee_input_value").val() !== "true") {
      $(".closing_fee_input_value").css("display", "none");
    }
    $(".is_closing_fee_input").on("change", function() {
      if ($(".is_closing_fee_input").val() === "true") {
        return $(".closing_fee_input_value").css("display", "block");
      } else {
        return $(".closing_fee_input_value").css("display", "none");
      }
    });
    $(".datepicker").datepicker({
      dateFormat: 'mm/dd/yy'
    });
    return $(".datepicker").datepicker("option", "showAnim", "slideDown");
  });

}).call(this);
/*! jCarousel - v0.3.1 - 2014-04-26
* http://sorgalla.com/jcarousel
* Copyright (c) 2014 Jan Sorgalla; Licensed MIT */

(function($) {
    'use strict';

    $.jCarousel.plugin('jcarouselAutoscroll', {
        _options: {
            target:    '+=1',
            interval:  3000,
            autostart: true
        },
        _timer: null,
        _init: function () {
            this.onDestroy = $.proxy(function() {
                this._destroy();
                this.carousel()
                    .one('jcarousel:createend', $.proxy(this._create, this));
            }, this);

            this.onAnimateEnd = $.proxy(this.start, this);
        },
        _create: function() {
            this.carousel()
                .one('jcarousel:destroy', this.onDestroy);

            if (this.options('autostart')) {
                this.start();
            }
        },
        _destroy: function() {
            this.stop();
            this.carousel()
                .off('jcarousel:destroy', this.onDestroy);
        },
        start: function() {
            this.stop();

            this.carousel()
                .one('jcarousel:animateend', this.onAnimateEnd);

            this._timer = setTimeout($.proxy(function() {
                this.carousel().jcarousel('scroll', this.options('target'));
            }, this), this.options('interval'));

            return this;
        },
        stop: function() {
            if (this._timer) {
                this._timer = clearTimeout(this._timer);
            }

            this.carousel()
                .off('jcarousel:animateend', this.onAnimateEnd);

            return this;
        }
    });
}(jQuery));
/*! jCarousel - v0.3.1 - 2014-04-26
* http://sorgalla.com/jcarousel
* Copyright (c) 2014 Jan Sorgalla; Licensed MIT */

(function($) {
    'use strict';

    $.jcarousel.fn.scrollIntoView = function(target, animate, callback) {
        var parsed = $.jCarousel.parseTarget(target),
            first  = this.index(this._fullyvisible.first()),
            last   = this.index(this._fullyvisible.last()),
            index;

        if (parsed.relative) {
            index = parsed.target < 0 ? Math.max(0, first + parsed.target) : last + parsed.target;
        } else {
            index = typeof parsed.target !== 'object' ? parsed.target : this.index(parsed.target);
        }

        if (index < first) {
            return this.scroll(index, animate, callback);
        }

        if (index >= first && index <= last) {
            if ($.isFunction(callback)) {
                callback.call(this, false);
            }

            return this;
        }

        var items = this.items(),
            clip = this.clipping(),
            lrb  = this.vertical ? 'bottom' : (this.rtl ? 'left'  : 'right'),
            wh   = 0,
            curr;

        while (true) {
            curr = items.eq(index);

            if (curr.length === 0) {
                break;
            }

            wh += this.dimension(curr);

            if (wh >= clip) {
                var margin = parseFloat(curr.css('margin-' + lrb)) || 0;
                if ((wh - margin) !== clip) {
                    index++;
                }
                break;
            }

            if (index <= 0) {
                break;
            }

            index--;
        }

        return this.scroll(index, animate, callback);
    };
}(jQuery));
/*!
 * jQuery.ScrollTo
 * Copyright (c) 2007-2014 Ariel Flesler - aflesler<a>gmail<d>com | http://flesler.blogspot.com
 * Licensed under MIT
 * http://flesler.blogspot.com/2007/10/jqueryscrollto.html
 * @projectDescription Easy element scrolling using jQuery.
 * @author Ariel Flesler
 * @version 1.4.12
 */


;(function(plugin) {
    // AMD Support
    if (typeof define === 'function' && define.amd) {
        define(['jquery'], plugin);
    } else {
        plugin(jQuery);
    }
}(function($) {

	var $scrollTo = $.scrollTo = function( target, duration, settings ) {
		return $(window).scrollTo( target, duration, settings );
	};

	$scrollTo.defaults = {
		axis:'xy',
		duration: parseFloat($.fn.jquery) >= 1.3 ? 0 : 1,
		limit:true
	};

	// Returns the element that needs to be animated to scroll the window.
	// Kept for backwards compatibility (specially for localScroll & serialScroll)
	$scrollTo.window = function( scope ) {
		return $(window)._scrollable();
	};

	// Hack, hack, hack :)
	// Returns the real elements to scroll (supports window/iframes, documents and regular nodes)
	$.fn._scrollable = function() {
		return this.map(function() {
			var elem = this,
				isWin = !elem.nodeName || $.inArray( elem.nodeName.toLowerCase(), ['iframe','#document','html','body'] ) != -1;

				if (!isWin)
					return elem;

			var doc = (elem.contentWindow || elem).document || elem.ownerDocument || elem;

			return /webkit/i.test(navigator.userAgent) || doc.compatMode == 'BackCompat' ?
				doc.body :
				doc.documentElement;
		});
	};

	$.fn.scrollTo = function( target, duration, settings ) {
		if (typeof duration == 'object') {
			settings = duration;
			duration = 0;
		}
		if (typeof settings == 'function')
			settings = { onAfter:settings };

		if (target == 'max')
			target = 9e9;

		settings = $.extend( {}, $scrollTo.defaults, settings );
		// Speed is still recognized for backwards compatibility
		duration = duration || settings.duration;
		// Make sure the settings are given right
		settings.queue = settings.queue && settings.axis.length > 1;

		if (settings.queue)
			// Let's keep the overall duration
			duration /= 2;
		settings.offset = both( settings.offset );
		settings.over = both( settings.over );

		return this._scrollable().each(function() {
			// Null target yields nothing, just like jQuery does
			if (target == null) return;

			var elem = this,
				$elem = $(elem),
				targ = target, toff, attr = {},
				win = $elem.is('html,body');

			switch (typeof targ) {
				// A number will pass the regex
				case 'number':
				case 'string':
					if (/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(targ)) {
						targ = both( targ );
						// We are done
						break;
					}
					// Relative/Absolute selector, no break!
					targ = win ? $(targ) : $(targ, this);
					if (!targ.length) return;
				case 'object':
					// DOMElement / jQuery
					if (targ.is || targ.style)
						// Get the real position of the target
						toff = (targ = $(targ)).offset();
			}
			
			var offset = $.isFunction(settings.offset) && settings.offset(elem, targ) || settings.offset;
			
			$.each( settings.axis.split(''), function( i, axis ) {
				var Pos	= axis == 'x' ? 'Left' : 'Top',
					pos = Pos.toLowerCase(),
					key = 'scroll' + Pos,
					old = elem[key],
					max = $scrollTo.max(elem, axis);

				if (toff) {// jQuery / DOMElement
					attr[key] = toff[pos] + ( win ? 0 : old - $elem.offset()[pos] );

					// If it's a dom element, reduce the margin
					if (settings.margin) {
						attr[key] -= parseInt(targ.css('margin'+Pos)) || 0;
						attr[key] -= parseInt(targ.css('border'+Pos+'Width')) || 0;
					}

					attr[key] += offset[pos] || 0;

					if(settings.over[pos])
						// Scroll to a fraction of its width/height
						attr[key] += targ[axis=='x'?'width':'height']() * settings.over[pos];
				} else {
					var val = targ[pos];
					// Handle percentage values
					attr[key] = val.slice && val.slice(-1) == '%' ?
						parseFloat(val) / 100 * max
						: val;
				}

				// Number or 'number'
				if (settings.limit && /^\d+$/.test(attr[key]))
					// Check the limits
					attr[key] = attr[key] <= 0 ? 0 : Math.min( attr[key], max );

				// Queueing axes
				if (!i && settings.queue) {
					// Don't waste time animating, if there's no need.
					if (old != attr[key])
						// Intermediate animation
						animate( settings.onAfterFirst );
					// Don't animate this axis again in the next iteration.
					delete attr[key];
				}
			});

			animate( settings.onAfter );

			function animate( callback ) {
				$elem.animate( attr, duration, settings.easing, callback && function() {
					callback.call(this, targ, settings);
				});
			};

		}).end();
	};

	// Max scrolling position, works on quirks mode
	// It only fails (not too badly) on IE, quirks mode.
	$scrollTo.max = function( elem, axis ) {
		var Dim = axis == 'x' ? 'Width' : 'Height',
			scroll = 'scroll'+Dim;

		if (!$(elem).is('html,body'))
			return elem[scroll] - $(elem)[Dim.toLowerCase()]();

		var size = 'client' + Dim,
			html = elem.ownerDocument.documentElement,
			body = elem.ownerDocument.body;

		return Math.max( html[scroll], body[scroll] )
			 - Math.min( html[size]  , body[size]   );
	};

	function both( val ) {
		return $.isFunction(val) || typeof val == 'object' ? val : { top:val, left:val };
	};

    // AMD requirement
    return $scrollTo;
}));
(function() {


}).call(this);
(function() {
  var IAVResultJSON, processMessage;

  (function($) {
    $.browserTest = function(a, z) {
      var c, m, u, x;
      u = "unknown";
      x = "X";
      m = function(r, h) {
        var i;
        i = 0;
        while (i < h.length) {
          r = r.replace(h[i][0], h[i][1]);
          i = i + 1;
        }
        return r;
      };
      c = function(i, a, b, c) {
        var r;
        r = {
          name: m((a.exec(i) || [u, u])[1], b)
        };
        r[r.name] = true;
        r.version = (c.exec(i) || [x, x, x, x])[3];
        if (r.name.match(/safari/) && r.version > 400) {
          r.version = "2.0";
        }
        if (r.name === "presto") {
          r.version = ($.browser.version > 9.27 ? "futhark" : "linear_b");
        }
        r.versionNumber = parseFloat(r.version, 10) || 0;
        r.versionX = (r.version !== x ? (r.version + "").substr(0, 1) : x);
        r.className = r.name + r.versionX;
        return r;
      };
      a = (a.match(/Opera|Navigator|Minefield|KHTML|Chrome/) ? m(a, [[/(Firefox|MSIE|KHTML,\slike\sGecko|Konqueror)/, ""], ["Chrome Safari", "Chrome"], ["KHTML", "Konqueror"], ["Minefield", "Firefox"], ["Navigator", "Netscape"]]) : a).toLowerCase();
      $.browser = $.extend((!z ? $.browser : {}), c(a, /(camino|chrome|firefox|netscape|konqueror|lynx|msie|opera|safari)/, [], /(camino|chrome|firefox|netscape|netscape6|opera|version|konqueror|lynx|msie|safari)(\/|\s)([a-z0-9\.\+]*?)(\;|dev|rel|\s|$)/));
      $.layout = c(a, /(gecko|konqueror|msie|opera|webkit)/, [["konqueror", "khtml"], ["msie", "trident"], ["opera", "presto"]], /(applewebkit|rv|konqueror|msie)(\:|\/|\s)([a-z0-9\.]*?)(\;|\)|\s)/);
      $.os = {
        name: (/(win|mac|linux|sunos|solaris|iphone)/.exec(navigator.platform.toLowerCase()) || [u])[0].replace("sunos", "solaris")
      };
      if (!z) {
        $("html").addClass([$.os.name, $.browser.name, $.browser.className, $.layout.name, $.layout.className].join(" "));
      }
    };
    $.browserTest(navigator.userAgent);
  })(jQuery);

  processMessage = function(s) {
    var p, v;
    p = s.split("|");
    if (p.length === 2) {
      if (p[0] === "Alert") {
        alert(p[1]);
      }
      if (p[0] === "Redirect") {
        document.location.href = p[1];
      }
      if (p[0] === "Function") {
        v = p[1].split(",");
        if (v.length === 22) {
          IAVResult(v[0], v[1], v[2], v[3], v[4], v[5], v[6], v[7], v[8], v[9], v[10], v[11], v[12], v[13], v[14], v[15], v[16], v[17], v[18], v[19], v[20], v[21]);
        }
      }
      if (p[0] === "JSON") {
        IAVResultJSON(p[1]);
      }
    }
  };

  (function($) {
    var a, b, c, d, e, f, g, h, i, j;
    g = void 0;
    d = void 0;
    j = 1;
    a = void 0;
    b = this;
    f = !1;
    h = "postMessage";
    e = "addEventListener";
    c = void 0;
    i = b[h] && !$.browser.opera;
    $[h] = function(k, l, m) {
      if (!l) {
        return;
      }
      k = (typeof k === "string" ? k : $.param(k));
      m = m || parent;
      if (i) {
        m[h](k, l.replace(/([^:]+:\/\/[^\/]+).*/, "$1"));
      } else {
        if (l) {
          m.location = l.replace(/#.*$/, "") + "#" + (+(new Date)) + (j++) + "&" + k;
        }
      }
    };
    $.receiveMessage = c = function(l, m, k) {
      if (i) {
        if (l) {
          a && c();
          a = function(n) {
            if ((typeof m === "string" && n.origin !== m) || ($.isFunction(m) && m(n.origin) === f)) {
              return f;
            }
            l(n);
          };
        }
        if (b[e]) {
          b[(l ? e : "removeEventListener")]("message", a, f);
        } else {
          b[(l ? "attachEvent" : "detachEvent")]("onmessage", a);
        }
      } else {
        g && clearInterval(g);
        g = null;
        if (l) {
          k = (typeof m === "number" ? m : (typeof k === "number" ? k : 100));
          g = setInterval(function() {
            var n, o;
            o = document.location.hash;
            n = /^#?\d+&/;
            if (o !== d && n.test(o)) {
              d = o;
              l({
                data: o.replace(n, "")
              });
            }
          }, k);
        }
      }
    };
  })(jQuery);

  IAVResultJSON = function(IAVResult) {
    var displayString, iavResultObj, key, rawJSONString;
    rawJSONString = unescape(IAVResult);
    iavResultObj = $.parseJSON(rawJSONString);
    displayString = "";
    for (key in iavResultObj) {
      if (iavResultObj.hasOwnProperty(key)) {
        displayString += key + " : " + iavResultObj[key] + "\n\r";
      }
    }
    alert(displayString);
  };

  $.receiveMessage((function(e) {
    processMessage(e.data);
  }), "https://widget.decisionlogic.com");

}).call(this);
(function() {
  var button_node, monthly_bill, monthly_cash_collected;

  $(window).load(function() {
    var location;
    if (typeof included_result !== "undefined" && included_result) {
      location = $(".result-box").offset().top;
      return $("html, body").animate({
        scrollTop: location
      }, 1000);
    }
  });

  $(document).ready(function() {
    return $('.selectpicker').selectpicker();
  });

  monthly_cash_collected = 50000;

  monthly_bill = 40000;

  button_node = document.getElementById("hidden_button");

  $('#profitability_monthly_cash_collection_amount, #profitability_total_monthly_bills, #profitability_daily_merchant_cash_advance').click(function() {
    return $(this).val('');
  });

  $("#profitability_monthly_cash_collection_amount").blur(function() {
    var monthly_bill_node, monthly_cash_collected_node;
    monthly_cash_collected_node = document.getElementById("profitability_monthly_cash_collection_amount");
    monthly_bill_node = document.getElementById("profitability_total_monthly_bills");
    monthly_cash_collected = ~~($(this).val().replace("$", ""));
    console.log("1 -" + monthly_cash_collected + " 2-" + monthly_bill);
    $(monthly_bill_node).attr("max", monthly_bill);
    if (monthly_cash_collected < monthly_bill) {
      monthly_bill_node.setCustomValidity("");
      $(this).attr("min", monthly_bill);
      monthly_cash_collected_node.setCustomValidity("Monthly earnings should not be less than the total monthly bills");
    } else {
      if (monthly_bill !== 0) {
        monthly_bill_node.setCustomValidity("");
      }
      monthly_cash_collected_node.setCustomValidity("");
    }
    if (monthly_cash_collected === 0) {
      return monthly_cash_collected_node.setCustomValidity("Please enter a valid value");
    }
  });

  $("#profitability_total_monthly_bills").blur(function() {
    var monthly_bill_node, monthly_cash_collected_node;
    monthly_cash_collected_node = document.getElementById("profitability_monthly_cash_collection_amount");
    monthly_bill_node = document.getElementById("profitability_total_monthly_bills");
    monthly_bill = ~~($(this).val().replace("$", ""));
    console.log("1 -" + monthly_cash_collected + " 2-" + monthly_bill);
    $(monthly_cash_collected_node).attr("min", monthly_bill);
    if (monthly_cash_collected < monthly_bill) {
      monthly_cash_collected_node.setCustomValidity("");
      $(this).attr("max", monthly_cash_collected);
      monthly_bill_node.setCustomValidity("Total Monthly bills should not be greater than monthly earnings");
    } else {
      if (monthly_cash_collected !== 0) {
        monthly_cash_collected_node.setCustomValidity("");
      }
      monthly_bill_node.setCustomValidity("");
    }
    if (monthly_bill === 0) {
      return monthly_bill_node.setCustomValidity("Please enter a valid value");
    }
  });

}).call(this);
(function() {
  $(document).ready(function() {
    var max, max2, min, min2;
    min = 100;
    max = 2000;
    $("#slider-range-refi").slider({
      range: "min",
      value: 100,
      min: min,
      max: max,
      step: 50,
      slide: function(event, ui) {
        $("#slider-range-refi > .ui-slider-handle").html("<br/><div class='homepage-slider-bubble'><span>$" + ui.value.formatMoney(0, ",", ".") + "</span></div>");
        $('.slider-left-value').text("$" + parseInt(ui.value * 0.5).formatMoney(0, ",", "."));
      },
      change: function(event, ui) {
        $("#slider-range-refi > .ui-slider-handle").html("<br/><div class='homepage-slider-bubble'><span>$" + ui.value.formatMoney(0, ",", ".") + "</span></div>");
        $('.slider-left-value').text("$" + parseInt(ui.value * 0.5).formatMoney(0, ",", "."));
      }
    });
    $("span.homepage-slider-left-main-section-label-left-min").html("$ 100<br/> paid per day");
    $("span.homepage-slider-left-main-section-label-right-max").html("$ 2,000<br/> paid per day");
    min2 = 10000;
    max2 = 250000;
    $("#slider-range-funder").slider({
      range: "min",
      value: 10000,
      min: min2,
      max: max2,
      step: 1000,
      slide: function(event, ui) {
        $("#slider-range-funder > .amount").html("$" + ui.value);
        $("#slider-range-funder > .ui-slider-handle").html("<br/><div class='homepage-slider-bubble'><span>$" + ui.value.formatMoney(0, ",", ".") + "</span></div>");
        if (ui.value === max2) {
          $('.slider-right-value').text("$" + parseInt(ui.value * 0.075).formatMoney(0, ",", ".") + "+");
        } else {
          $('.slider-right-value').text("$" + parseInt(ui.value * 0.075).formatMoney(0, ",", "."));
        }
      },
      change: function(event, ui) {
        $("#slider-range-funder > .amount").html("$" + ui.value);
        $("#slider-range-funder > .ui-slider-handle").html("<br/><div class='homepage-slider-bubble'><span>$" + ui.value.formatMoney(0, ",", ".") + "</span></div>");
        $('.slider-right-value').text("$" + parseInt(ui.value * 0.075).formatMoney(0, ",", "."));
        if (ui.value === max2) {
          $('.slider-right-value').text("$" + parseInt(ui.value * 0.075).formatMoney(0, ",", ".") + "+");
        } else {
          $('.slider-right-value').text("$" + parseInt(ui.value * 0.075).formatMoney(0, ",", "."));
        }
      }
    });
    $("span.homepage-slider-right-main-section-label-left-min").html("$ 10,000");
    $("span.homepage-slider-right-main-section-label-right-max").html("$ 250,000+");
  });

}).call(this);
(function() {
  jQuery(document).ready(function() {
    $(".jcarousel").jcarousel({
      animation: {
        duration: 800,
        easing: "linear"
      },
      wrap: "circular",
      complete: function() {}
    }).jcarouselAutoscroll({
      interval: 10000,
      target: "+=1",
      autostart: false
    });
  });

}).call(this);
// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// compiled file.
//
// Read Sprockets README (https://github.com/sstephenson/sprockets#sprockets-directives) for details
// about supported directives.
//







;
